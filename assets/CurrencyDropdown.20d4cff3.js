import{b as q}from"./QCard.2750a515.js";import{Q as N,b as y,a as V}from"./QMenu.57a49691.js";import{c as $,C as D,Q as I}from"./index.3853611b.js";import{r as k,a as L,w as M,u as d,v as C,x as s,y as i,P as E,S as T,X as j,C as F,Y as H,M as Q,W as O,V as x,aH as U,N as W}from"./index.e9f7faa0.js";const J={__name:"CurrencyDropdown",props:{modelValue:String,usedCurrencies:{type:Set,default:()=>new Set},buttonProps:{type:Object,default:()=>({})},expandable:{type:Boolean,default:!0},clear:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:B}){var g;const a=v,S=B,f=k(a.modelValue),c=k(((g=a.usedCurrencies)==null?void 0:g.size)>0),n=k(""),b=L(()=>a.expandable&&a.usedCurrencies.size>0),_=()=>{var e;c.value=((e=a.usedCurrencies)==null?void 0:e.size)>0,a.clear&&(f.value=null,S("update:modelValue",null))},p=$.data.map(({code:e,currency:t})=>({label:`${e} - ${t.length>15?t.slice(0,15)+"...":t}`,value:e})),P=L(()=>{var r,m,w,h;if(a.usedCurrencies.size===0){let l=p;const u=(r=n.value)==null?void 0:r.toLowerCase();return u&&(l=l.filter(({label:o})=>o.toLowerCase().includes(u))),l}if(!b.value){let l=p.filter(({value:o})=>a.usedCurrencies.has(o));const u=(m=n.value)==null?void 0:m.toLowerCase();return u&&(l=l.filter(({label:o})=>o.toLowerCase().includes(u))),l}if(!c.value){let l=p;const u=(w=n.value)==null?void 0:w.toLowerCase();return u&&(l=l.filter(({label:o})=>o.toLowerCase().includes(u))),l}let e=p.filter(({value:l})=>a.usedCurrencies.has(l));const t=(h=n.value)==null?void 0:h.toLowerCase();return t&&(e=e.filter(({label:l})=>l.toLowerCase().includes(t))),e});M(()=>a.modelValue,e=>{f.value=e});function z(e){f.value=e,S("update:modelValue",e)}return(e,t)=>(d(),C(W,U({label:v.buttonProps.label||f.value||"Select currency"},v.buttonProps,{"icon-right":"arrow_drop_down"}),{default:s(()=>[i(N,{anchor:"bottom left",self:"top left",onBeforeShow:_,fit:!0},{default:s(()=>[i(y,null,{default:s(()=>[i(V,null,{default:s(()=>[i(q,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),debounce:"300",label:"Search currencies",placeholder:"Type to filter",dense:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),(d(!0),E(T,null,j(P.value,(r,m)=>F((d(),C(y,{key:r.value,class:H(m%2===0?"bg-white":"bg-grey-3"),clickable:"",onClick:w=>z(r.value)},{default:s(()=>[i(V,null,{default:s(()=>[Q(O(r.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[D]])),128)),c.value&&b.value?(d(),C(I,{key:0})):x("",!0),c.value&&b.value?(d(),C(y,{key:1,clickable:"",onClick:t[1]||(t[1]=r=>c.value=!1)},{default:s(()=>[i(V,null,{default:s(()=>t[2]||(t[2]=[Q("More...")])),_:1})]),_:1})):x("",!0)]),_:1})]),_:1},16,["label"]))}};export{J as _};
