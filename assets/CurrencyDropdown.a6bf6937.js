import{b as z}from"./QCard.fb2873c1.js";import{Q as q,c as y,b as V}from"./QItemLabel.ba253f25.js";import{c as $,C as D,Q as I}from"./index.78941bf0.js";import{r as k,a as B,w as M,u as f,v as C,x as o,y as i,P as E,S as T,X as j,C as F,Y as G,M as L,W as O,V as Q,aG as U,N as W}from"./index.74f480bf.js";const J={__name:"CurrencyDropdown",props:{modelValue:String,usedCurrencies:{type:Set,default:()=>new Set},buttonProps:{type:Object,default:()=>({})},expandable:{type:Boolean,default:!0},clear:{type:Boolean,default:!1},allowNoCurrency:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(v,{emit:x}){var g;const t=v,S=x,c=k(t.modelValue),d=k(((g=t.usedCurrencies)==null?void 0:g.size)>0),n=k(""),b=B(()=>t.expandable&&t.usedCurrencies.size>0),N=()=>{var l;d.value=((l=t.usedCurrencies)==null?void 0:l.size)>0,t.clear&&(c.value=null,S("update:modelValue",null))},p=$.data.map(({code:l,currency:a})=>({label:`${l} - ${a.length>15?a.slice(0,15)+"...":a}`,value:l})),_=B(()=>{var r,m,w,h;if(t.usedCurrencies.size===0){let e=p;const u=(r=n.value)==null?void 0:r.toLowerCase();return u&&(e=e.filter(({label:s})=>s.toLowerCase().includes(u))),t.allowNoCurrency&&!u&&(e=[{label:"No currency",value:null},...e]),e}if(!b.value){let e=p.filter(({value:s})=>t.usedCurrencies.has(s));const u=(m=n.value)==null?void 0:m.toLowerCase();return u&&(e=e.filter(({label:s})=>s.toLowerCase().includes(u))),e}if(!d.value){let e=p;const u=(w=n.value)==null?void 0:w.toLowerCase();return u&&(e=e.filter(({label:s})=>s.toLowerCase().includes(u))),e}let l=p.filter(({value:e})=>t.usedCurrencies.has(e));const a=(h=n.value)==null?void 0:h.toLowerCase();return a&&(l=l.filter(({label:e})=>e.toLowerCase().includes(a))),l});M(()=>t.modelValue,l=>{c.value=l});function P(l){c.value=l,S("update:modelValue",l)}return(l,a)=>(f(),C(W,U({label:v.buttonProps.label||(c.value===null?"No currency":c.value)||"Select currency"},v.buttonProps,{"icon-right":"arrow_drop_down"}),{default:o(()=>[i(q,{anchor:"bottom left",self:"top left",onBeforeShow:N,fit:!0},{default:o(()=>[i(y,null,{default:o(()=>[i(V,null,{default:o(()=>[i(z,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),debounce:"300",label:"Search currencies",placeholder:"Type to filter",dense:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),(f(!0),E(T,null,j(_.value,(r,m)=>F((f(),C(y,{key:r.value,class:G(m%2===0?"bg-white":"bg-grey-3"),clickable:"",onClick:w=>P(r.value)},{default:o(()=>[i(V,null,{default:o(()=>[L(O(r.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[D]])),128)),d.value&&b.value?(f(),C(I,{key:0})):Q("",!0),d.value&&b.value?(f(),C(y,{key:1,clickable:"",onClick:a[1]||(a[1]=r=>d.value=!1)},{default:o(()=>[i(V,null,{default:o(()=>a[2]||(a[2]=[L("More...")])),_:1})]),_:1})):Q("",!0)]),_:1})]),_:1},16,["label"]))}};export{J as _};
