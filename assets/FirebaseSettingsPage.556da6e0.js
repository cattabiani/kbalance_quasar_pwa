import{Q as Si,u as Pi,c as Et,a as je,b as Oe}from"./use-quasar.bd9eb004.js";import{aI as _i,r as ue,w as Le,o as $i,q as Ai,a as cr,u as At,C as Tn,D as tt,aq as Mi,ad as Di,aB as Ri,aJ as Ii,F as Oi,y as x,x as te,I as Bi,J as ki,aH as nn,z as Ni,E as lr,aG as ji,G as se,K as Fe,v as on,H as an,N as Fi}from"./index.84102067.js";import{Q as St}from"./QCardActions.874f75fd.js";import{Q as Li}from"./QForm.ddaebe9c.js";import{Q as sn}from"./QDialog.8cdec6a5.js";import"./scroll.73cd88d8.js";var at={},xi=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},En={},ce={};let br;const Ui=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ce.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};ce.getSymbolTotalCodewords=function(n){return Ui[n]};ce.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};ce.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');br=n};ce.isKanjiModeEnabled=function(){return typeof br!="undefined"};ce.toSJIS=function(n){return br(n)};var Bt={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+o)}}e.isValid=function(i){return i&&typeof i.bit!="undefined"&&i.bit>=0&&i.bit<4},e.from=function(i,s){if(e.isValid(i))return i;try{return n(i)}catch{return s}}})(Bt);function Sn(){this.buffer=[],this.length=0}Sn.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let o=0;o<n;o++)this.putBit((e>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var Vi=Sn;function it(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}it.prototype.set=function(e,n,o,i){const s=e*this.size+n;this.data[s]=o,i&&(this.reservedBit[s]=!0)};it.prototype.get=function(e,n){return this.data[e*this.size+n]};it.prototype.xor=function(e,n,o){this.data[e*this.size+n]^=o};it.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};var Hi=it,Pn={};(function(e){const n=ce.getSymbolSize;e.getRowColCoords=function(i){if(i===1)return[];const s=Math.floor(i/7)+2,u=n(i),d=u===145?26:Math.ceil((u-13)/(2*s-2))*2,f=[u-7];for(let l=1;l<s-1;l++)f[l]=f[l-1]-d;return f.push(6),f.reverse()},e.getPositions=function(i){const s=[],u=e.getRowColCoords(i),d=u.length;for(let f=0;f<d;f++)for(let l=0;l<d;l++)f===0&&l===0||f===0&&l===d-1||f===d-1&&l===0||s.push([u[f],u[l]]);return s}})(Pn);var _n={};const Wi=ce.getSymbolSize,un=7;_n.getPositions=function(n){const o=Wi(n);return[[0,0],[o-un,0],[0,o-un]]};var $n={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const u=s.size;let d=0,f=0,l=0,p=null,w=null;for(let T=0;T<u;T++){f=l=0,p=w=null;for(let _=0;_<u;_++){let P=s.get(T,_);P===p?f++:(f>=5&&(d+=n.N1+(f-5)),p=P,f=1),P=s.get(_,T),P===w?l++:(l>=5&&(d+=n.N1+(l-5)),w=P,l=1)}f>=5&&(d+=n.N1+(f-5)),l>=5&&(d+=n.N1+(l-5))}return d},e.getPenaltyN2=function(s){const u=s.size;let d=0;for(let f=0;f<u-1;f++)for(let l=0;l<u-1;l++){const p=s.get(f,l)+s.get(f,l+1)+s.get(f+1,l)+s.get(f+1,l+1);(p===4||p===0)&&d++}return d*n.N2},e.getPenaltyN3=function(s){const u=s.size;let d=0,f=0,l=0;for(let p=0;p<u;p++){f=l=0;for(let w=0;w<u;w++)f=f<<1&2047|s.get(p,w),w>=10&&(f===1488||f===93)&&d++,l=l<<1&2047|s.get(w,p),w>=10&&(l===1488||l===93)&&d++}return d*n.N3},e.getPenaltyN4=function(s){let u=0;const d=s.data.length;for(let l=0;l<d;l++)u+=s.data[l];return Math.abs(Math.ceil(u*100/d/5)-10)*n.N4};function o(i,s,u){switch(i){case e.Patterns.PATTERN000:return(s+u)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return u%3===0;case e.Patterns.PATTERN011:return(s+u)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(u/3))%2===0;case e.Patterns.PATTERN101:return s*u%2+s*u%3===0;case e.Patterns.PATTERN110:return(s*u%2+s*u%3)%2===0;case e.Patterns.PATTERN111:return(s*u%3+(s+u)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}e.applyMask=function(s,u){const d=u.size;for(let f=0;f<d;f++)for(let l=0;l<d;l++)u.isReserved(l,f)||u.xor(l,f,o(s,l,f))},e.getBestMask=function(s,u){const d=Object.keys(e.Patterns).length;let f=0,l=1/0;for(let p=0;p<d;p++){u(p),e.applyMask(p,s);const w=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(p,s),w<l&&(l=w,f=p)}return f}})($n);var kt={};const _e=Bt,Pt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],_t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];kt.getBlocksCount=function(n,o){switch(o){case _e.L:return Pt[(n-1)*4+0];case _e.M:return Pt[(n-1)*4+1];case _e.Q:return Pt[(n-1)*4+2];case _e.H:return Pt[(n-1)*4+3];default:return}};kt.getTotalCodewordsCount=function(n,o){switch(o){case _e.L:return _t[(n-1)*4+0];case _e.M:return _t[(n-1)*4+1];case _e.Q:return _t[(n-1)*4+2];case _e.H:return _t[(n-1)*4+3];default:return}};var An={},Nt={};const nt=new Uint8Array(512),Rt=new Uint8Array(256);(function(){let n=1;for(let o=0;o<255;o++)nt[o]=n,Rt[n]=o,n<<=1,n&256&&(n^=285);for(let o=255;o<512;o++)nt[o]=nt[o-255]})();Nt.log=function(n){if(n<1)throw new Error("log("+n+")");return Rt[n]};Nt.exp=function(n){return nt[n]};Nt.mul=function(n,o){return n===0||o===0?0:nt[Rt[n]+Rt[o]]};(function(e){const n=Nt;e.mul=function(i,s){const u=new Uint8Array(i.length+s.length-1);for(let d=0;d<i.length;d++)for(let f=0;f<s.length;f++)u[d+f]^=n.mul(i[d],s[f]);return u},e.mod=function(i,s){let u=new Uint8Array(i);for(;u.length-s.length>=0;){const d=u[0];for(let l=0;l<s.length;l++)u[l]^=n.mul(s[l],d);let f=0;for(;f<u.length&&u[f]===0;)f++;u=u.slice(f)}return u},e.generateECPolynomial=function(i){let s=new Uint8Array([1]);for(let u=0;u<i;u++)s=e.mul(s,new Uint8Array([1,n.exp(u)]));return s}})(An);const Mn=An;function Cr(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Cr.prototype.initialize=function(n){this.degree=n,this.genPoly=Mn.generateECPolynomial(this.degree)};Cr.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(n.length+this.degree);o.set(n);const i=Mn.mod(o,this.genPoly),s=this.degree-i.length;if(s>0){const u=new Uint8Array(this.degree);return u.set(i,s),u}return i};var zi=Cr,Dn={},Me={},Tr={};Tr.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var pe={};const Rn="[0-9]+",qi="[A-Z $%*+\\-./:]+";let ot="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ot=ot.replace(/u/g,"\\u");const Ji="(?:(?![A-Z0-9 $%*+\\-./:]|"+ot+`)(?:.|[\r
]))+`;pe.KANJI=new RegExp(ot,"g");pe.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");pe.BYTE=new RegExp(Ji,"g");pe.NUMERIC=new RegExp(Rn,"g");pe.ALPHANUMERIC=new RegExp(qi,"g");const Yi=new RegExp("^"+ot+"$"),Gi=new RegExp("^"+Rn+"$"),Ki=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");pe.testKanji=function(n){return Yi.test(n)};pe.testNumeric=function(n){return Gi.test(n)};pe.testAlphanumeric=function(n){return Ki.test(n)};(function(e){const n=Tr,o=pe;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(u,d){if(!u.ccBits)throw new Error("Invalid mode: "+u);if(!n.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?u.ccBits[0]:d<27?u.ccBits[1]:u.ccBits[2]},e.getBestModeForData=function(u){return o.testNumeric(u)?e.NUMERIC:o.testAlphanumeric(u)?e.ALPHANUMERIC:o.testKanji(u)?e.KANJI:e.BYTE},e.toString=function(u){if(u&&u.id)return u.id;throw new Error("Invalid mode")},e.isValid=function(u){return u&&u.bit&&u.ccBits};function i(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(u,d){if(e.isValid(u))return u;try{return i(u)}catch{return d}}})(Me);(function(e){const n=ce,o=kt,i=Bt,s=Me,u=Tr,d=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,f=n.getBCHDigit(d);function l(_,P,$){for(let R=1;R<=40;R++)if(P<=e.getCapacity(R,$,_))return R}function p(_,P){return s.getCharCountIndicator(_,P)+4}function w(_,P){let $=0;return _.forEach(function(R){$+=p(R.mode,P)+R.getBitsLength()}),$}function T(_,P){for(let $=1;$<=40;$++)if(w(_,$)<=e.getCapacity($,P,s.MIXED))return $}e.from=function(P,$){return u.isValid(P)?parseInt(P,10):$},e.getCapacity=function(P,$,R){if(!u.isValid(P))throw new Error("Invalid QR Code version");typeof R=="undefined"&&(R=s.BYTE);const N=n.getSymbolTotalCodewords(P),D=o.getTotalCodewordsCount(P,$),I=(N-D)*8;if(R===s.MIXED)return I;const y=I-p(R,P);switch(R){case s.NUMERIC:return Math.floor(y/10*3);case s.ALPHANUMERIC:return Math.floor(y/11*2);case s.KANJI:return Math.floor(y/13);case s.BYTE:default:return Math.floor(y/8)}},e.getBestVersionForData=function(P,$){let R;const N=i.from($,i.M);if(Array.isArray(P)){if(P.length>1)return T(P,N);if(P.length===0)return 1;R=P[0]}else R=P;return l(R.mode,R.getLength(),N)},e.getEncodedBits=function(P){if(!u.isValid(P)||P<7)throw new Error("Invalid QR Code version");let $=P<<12;for(;n.getBCHDigit($)-f>=0;)$^=d<<n.getBCHDigit($)-f;return P<<12|$}})(Dn);var In={};const pr=ce,On=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Qi=1<<14|1<<12|1<<10|1<<4|1<<1,cn=pr.getBCHDigit(On);In.getEncodedBits=function(n,o){const i=n.bit<<3|o;let s=i<<10;for(;pr.getBCHDigit(s)-cn>=0;)s^=On<<pr.getBCHDigit(s)-cn;return(i<<10|s)^Qi};var Bn={};const Xi=Me;function Ve(e){this.mode=Xi.NUMERIC,this.data=e.toString()}Ve.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};Ve.prototype.getLength=function(){return this.data.length};Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)};Ve.prototype.write=function(n){let o,i,s;for(o=0;o+3<=this.data.length;o+=3)i=this.data.substr(o,3),s=parseInt(i,10),n.put(s,10);const u=this.data.length-o;u>0&&(i=this.data.substr(o),s=parseInt(i,10),n.put(s,u*3+1))};var Zi=Ve;const es=Me,dr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function He(e){this.mode=es.ALPHANUMERIC,this.data=e}He.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};He.prototype.getLength=function(){return this.data.length};He.prototype.getBitsLength=function(){return He.getBitsLength(this.data.length)};He.prototype.write=function(n){let o;for(o=0;o+2<=this.data.length;o+=2){let i=dr.indexOf(this.data[o])*45;i+=dr.indexOf(this.data[o+1]),n.put(i,11)}this.data.length%2&&n.put(dr.indexOf(this.data[o]),6)};var ts=He;const rs=Me;function We(e){this.mode=rs.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}We.getBitsLength=function(n){return n*8};We.prototype.getLength=function(){return this.data.length};We.prototype.getBitsLength=function(){return We.getBitsLength(this.data.length)};We.prototype.write=function(e){for(let n=0,o=this.data.length;n<o;n++)e.put(this.data[n],8)};var ns=We;const os=Me,as=ce;function ze(e){this.mode=os.KANJI,this.data=e}ze.getBitsLength=function(n){return n*13};ze.prototype.getLength=function(){return this.data.length};ze.prototype.getBitsLength=function(){return ze.getBitsLength(this.data.length)};ze.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let o=as.toSJIS(this.data[n]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),e.put(o,13)}};var is=ze,kn={exports:{}};(function(e){var n={single_source_shortest_paths:function(o,i,s){var u={},d={};d[i]=0;var f=n.PriorityQueue.make();f.push(i,0);for(var l,p,w,T,_,P,$,R,N;!f.empty();){l=f.pop(),p=l.value,T=l.cost,_=o[p]||{};for(w in _)_.hasOwnProperty(w)&&(P=_[w],$=T+P,R=d[w],N=typeof d[w]=="undefined",(N||R>$)&&(d[w]=$,f.push(w,$),u[w]=p))}if(typeof s!="undefined"&&typeof d[s]=="undefined"){var D=["Could not find a path from ",i," to ",s,"."].join("");throw new Error(D)}return u},extract_shortest_path_from_predecessor_list:function(o,i){for(var s=[],u=i;u;)s.push(u),o[u],u=o[u];return s.reverse(),s},find_path:function(o,i,s){var u=n.single_source_shortest_paths(o,i,s);return n.extract_shortest_path_from_predecessor_list(u,s)},PriorityQueue:{make:function(o){var i=n.PriorityQueue,s={},u;o=o||{};for(u in i)i.hasOwnProperty(u)&&(s[u]=i[u]);return s.queue=[],s.sorter=o.sorter||i.default_sorter,s},default_sorter:function(o,i){return o.cost-i.cost},push:function(o,i){var s={value:o,cost:i};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=n})(kn);(function(e){const n=Me,o=Zi,i=ts,s=ns,u=is,d=pe,f=ce,l=kn.exports;function p(D){return unescape(encodeURIComponent(D)).length}function w(D,I,y){const b=[];let M;for(;(M=D.exec(y))!==null;)b.push({data:M[0],index:M.index,mode:I,length:M[0].length});return b}function T(D){const I=w(d.NUMERIC,n.NUMERIC,D),y=w(d.ALPHANUMERIC,n.ALPHANUMERIC,D);let b,M;return f.isKanjiModeEnabled()?(b=w(d.BYTE,n.BYTE,D),M=w(d.KANJI,n.KANJI,D)):(b=w(d.BYTE_KANJI,n.BYTE,D),M=[]),I.concat(y,b,M).sort(function(U,X){return U.index-X.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function _(D,I){switch(I){case n.NUMERIC:return o.getBitsLength(D);case n.ALPHANUMERIC:return i.getBitsLength(D);case n.KANJI:return u.getBitsLength(D);case n.BYTE:return s.getBitsLength(D)}}function P(D){return D.reduce(function(I,y){const b=I.length-1>=0?I[I.length-1]:null;return b&&b.mode===y.mode?(I[I.length-1].data+=y.data,I):(I.push(y),I)},[])}function $(D){const I=[];for(let y=0;y<D.length;y++){const b=D[y];switch(b.mode){case n.NUMERIC:I.push([b,{data:b.data,mode:n.ALPHANUMERIC,length:b.length},{data:b.data,mode:n.BYTE,length:b.length}]);break;case n.ALPHANUMERIC:I.push([b,{data:b.data,mode:n.BYTE,length:b.length}]);break;case n.KANJI:I.push([b,{data:b.data,mode:n.BYTE,length:p(b.data)}]);break;case n.BYTE:I.push([{data:b.data,mode:n.BYTE,length:p(b.data)}])}}return I}function R(D,I){const y={},b={start:{}};let M=["start"];for(let L=0;L<D.length;L++){const U=D[L],X=[];for(let ne=0;ne<U.length;ne++){const re=U[ne],de=""+L+ne;X.push(de),y[de]={node:re,lastCount:0},b[de]={};for(let Te=0;Te<M.length;Te++){const ae=M[Te];y[ae]&&y[ae].node.mode===re.mode?(b[ae][de]=_(y[ae].lastCount+re.length,re.mode)-_(y[ae].lastCount,re.mode),y[ae].lastCount+=re.length):(y[ae]&&(y[ae].lastCount=re.length),b[ae][de]=_(re.length,re.mode)+4+n.getCharCountIndicator(re.mode,I))}}M=X}for(let L=0;L<M.length;L++)b[M[L]].end=0;return{map:b,table:y}}function N(D,I){let y;const b=n.getBestModeForData(D);if(y=n.from(I,b),y!==n.BYTE&&y.bit<b.bit)throw new Error('"'+D+'" cannot be encoded with mode '+n.toString(y)+`.
 Suggested mode is: `+n.toString(b));switch(y===n.KANJI&&!f.isKanjiModeEnabled()&&(y=n.BYTE),y){case n.NUMERIC:return new o(D);case n.ALPHANUMERIC:return new i(D);case n.KANJI:return new u(D);case n.BYTE:return new s(D)}}e.fromArray=function(I){return I.reduce(function(y,b){return typeof b=="string"?y.push(N(b,null)):b.data&&y.push(N(b.data,b.mode)),y},[])},e.fromString=function(I,y){const b=T(I,f.isKanjiModeEnabled()),M=$(b),L=R(M,y),U=l.find_path(L.map,"start","end"),X=[];for(let ne=1;ne<U.length-1;ne++)X.push(L.table[U[ne]].node);return e.fromArray(P(X))},e.rawSplit=function(I){return e.fromArray(T(I,f.isKanjiModeEnabled()))}})(Bn);const jt=ce,fr=Bt,ss=Vi,us=Hi,cs=Pn,ls=_n,vr=$n,yr=kt,ds=zi,It=Dn,fs=In,hs=Me,hr=Bn;function gs(e,n){const o=e.size,i=ls.getPositions(n);for(let s=0;s<i.length;s++){const u=i[s][0],d=i[s][1];for(let f=-1;f<=7;f++)if(!(u+f<=-1||o<=u+f))for(let l=-1;l<=7;l++)d+l<=-1||o<=d+l||(f>=0&&f<=6&&(l===0||l===6)||l>=0&&l<=6&&(f===0||f===6)||f>=2&&f<=4&&l>=2&&l<=4?e.set(u+f,d+l,!0,!0):e.set(u+f,d+l,!1,!0))}}function ms(e){const n=e.size;for(let o=8;o<n-8;o++){const i=o%2===0;e.set(o,6,i,!0),e.set(6,o,i,!0)}}function ps(e,n){const o=cs.getPositions(n);for(let i=0;i<o.length;i++){const s=o[i][0],u=o[i][1];for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)d===-2||d===2||f===-2||f===2||d===0&&f===0?e.set(s+d,u+f,!0,!0):e.set(s+d,u+f,!1,!0)}}function vs(e,n){const o=e.size,i=It.getEncodedBits(n);let s,u,d;for(let f=0;f<18;f++)s=Math.floor(f/3),u=f%3+o-8-3,d=(i>>f&1)===1,e.set(s,u,d,!0),e.set(u,s,d,!0)}function gr(e,n,o){const i=e.size,s=fs.getEncodedBits(n,o);let u,d;for(u=0;u<15;u++)d=(s>>u&1)===1,u<6?e.set(u,8,d,!0):u<8?e.set(u+1,8,d,!0):e.set(i-15+u,8,d,!0),u<8?e.set(8,i-u-1,d,!0):u<9?e.set(8,15-u-1+1,d,!0):e.set(8,15-u-1,d,!0);e.set(i-8,8,1,!0)}function ys(e,n){const o=e.size;let i=-1,s=o-1,u=7,d=0;for(let f=o-1;f>0;f-=2)for(f===6&&f--;;){for(let l=0;l<2;l++)if(!e.isReserved(s,f-l)){let p=!1;d<n.length&&(p=(n[d]>>>u&1)===1),e.set(s,f-l,p),u--,u===-1&&(d++,u=7)}if(s+=i,s<0||o<=s){s-=i,i=-i;break}}}function ws(e,n,o){const i=new ss;o.forEach(function(l){i.put(l.mode.bit,4),i.put(l.getLength(),hs.getCharCountIndicator(l.mode,e)),l.write(i)});const s=jt.getSymbolTotalCodewords(e),u=yr.getTotalCodewordsCount(e,n),d=(s-u)*8;for(i.getLengthInBits()+4<=d&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const f=(d-i.getLengthInBits())/8;for(let l=0;l<f;l++)i.put(l%2?17:236,8);return bs(i,e,n)}function bs(e,n,o){const i=jt.getSymbolTotalCodewords(n),s=yr.getTotalCodewordsCount(n,o),u=i-s,d=yr.getBlocksCount(n,o),f=i%d,l=d-f,p=Math.floor(i/d),w=Math.floor(u/d),T=w+1,_=p-w,P=new ds(_);let $=0;const R=new Array(d),N=new Array(d);let D=0;const I=new Uint8Array(e.buffer);for(let U=0;U<d;U++){const X=U<l?w:T;R[U]=I.slice($,$+X),N[U]=P.encode(R[U]),$+=X,D=Math.max(D,X)}const y=new Uint8Array(i);let b=0,M,L;for(M=0;M<D;M++)for(L=0;L<d;L++)M<R[L].length&&(y[b++]=R[L][M]);for(M=0;M<_;M++)for(L=0;L<d;L++)y[b++]=N[L][M];return y}function Cs(e,n,o,i){let s;if(Array.isArray(e))s=hr.fromArray(e);else if(typeof e=="string"){let p=n;if(!p){const w=hr.rawSplit(e);p=It.getBestVersionForData(w,o)}s=hr.fromString(e,p||40)}else throw new Error("Invalid data");const u=It.getBestVersionForData(s,o);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=u;else if(n<u)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+u+`.
`);const d=ws(n,o,s),f=jt.getSymbolSize(n),l=new us(f);return gs(l,n),ms(l),ps(l,n),gr(l,o,0),n>=7&&vs(l,n),ys(l,d),isNaN(i)&&(i=vr.getBestMask(l,gr.bind(null,l,o))),vr.applyMask(i,l),gr(l,o,i),{modules:l,version:n,errorCorrectionLevel:o,maskPattern:i,segments:s}}En.create=function(n,o){if(typeof n=="undefined"||n==="")throw new Error("No input text");let i=fr.M,s,u;return typeof o!="undefined"&&(i=fr.from(o.errorCorrectionLevel,fr.M),s=It.from(o.version),u=vr.from(o.maskPattern),o.toSJISFunc&&jt.setToSJISFunction(o.toSJISFunc)),Cs(n,s,i,u)};var Nn={},Er={};(function(e){function n(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let i=o.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+o);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(u){return[u,u]}))),i.length===6&&i.push("F","F");const s=parseInt(i.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+i.slice(0,6).join("")}}e.getOptions=function(i){i||(i={}),i.color||(i.color={});const s=typeof i.margin=="undefined"||i.margin===null||i.margin<0?4:i.margin,u=i.width&&i.width>=21?i.width:void 0,d=i.scale||4;return{width:u,scale:u?4:d,margin:s,color:{dark:n(i.color.dark||"#000000ff"),light:n(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},e.getScale=function(i,s){return s.width&&s.width>=i+s.margin*2?s.width/(i+s.margin*2):s.scale},e.getImageWidth=function(i,s){const u=e.getScale(i,s);return Math.floor((i+s.margin*2)*u)},e.qrToImageData=function(i,s,u){const d=s.modules.size,f=s.modules.data,l=e.getScale(d,u),p=Math.floor((d+u.margin*2)*l),w=u.margin*l,T=[u.color.light,u.color.dark];for(let _=0;_<p;_++)for(let P=0;P<p;P++){let $=(_*p+P)*4,R=u.color.light;if(_>=w&&P>=w&&_<p-w&&P<p-w){const N=Math.floor((_-w)/l),D=Math.floor((P-w)/l);R=T[f[N*d+D]?1:0]}i[$++]=R.r,i[$++]=R.g,i[$++]=R.b,i[$]=R.a}}})(Er);(function(e){const n=Er;function o(s,u,d){s.clearRect(0,0,u.width,u.height),u.style||(u.style={}),u.height=d,u.width=d,u.style.height=d+"px",u.style.width=d+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(u,d,f){let l=f,p=d;typeof l=="undefined"&&(!d||!d.getContext)&&(l=d,d=void 0),d||(p=i()),l=n.getOptions(l);const w=n.getImageWidth(u.modules.size,l),T=p.getContext("2d"),_=T.createImageData(w,w);return n.qrToImageData(_.data,u,l),o(T,p,w),T.putImageData(_,0,0),p},e.renderToDataURL=function(u,d,f){let l=f;typeof l=="undefined"&&(!d||!d.getContext)&&(l=d,d=void 0),l||(l={});const p=e.render(u,d,l),w=l.type||"image/png",T=l.rendererOpts||{};return p.toDataURL(w,T.quality)}})(Nn);var jn={};const Ts=Er;function ln(e,n){const o=e.a/255,i=n+'="'+e.hex+'"';return o<1?i+" "+n+'-opacity="'+o.toFixed(2).slice(1)+'"':i}function mr(e,n,o){let i=e+n;return typeof o!="undefined"&&(i+=" "+o),i}function Es(e,n,o){let i="",s=0,u=!1,d=0;for(let f=0;f<e.length;f++){const l=Math.floor(f%n),p=Math.floor(f/n);!l&&!u&&(u=!0),e[f]?(d++,f>0&&l>0&&e[f-1]||(i+=u?mr("M",l+o,.5+p+o):mr("m",s,0),s=0,u=!1),l+1<n&&e[f+1]||(i+=mr("h",d),d=0)):s++}return i}jn.render=function(n,o,i){const s=Ts.getOptions(o),u=n.modules.size,d=n.modules.data,f=u+s.margin*2,l=s.color.light.a?"<path "+ln(s.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",p="<path "+ln(s.color.dark,"stroke")+' d="'+Es(d,u,s.margin)+'"/>',w='viewBox="0 0 '+f+" "+f+'"',T=s.width?'width="'+s.width+'" height="'+s.width+'" ':"",_='<svg xmlns="http://www.w3.org/2000/svg" '+T+w+' shape-rendering="crispEdges">'+l+p+`</svg>
`;return typeof i=="function"&&i(null,_),_};const Ss=xi,wr=En,Fn=Nn,Ps=jn;function Sr(e,n,o,i,s){const u=[].slice.call(arguments,1),d=u.length,f=typeof u[d-1]=="function";if(!f&&!Ss())throw new Error("Callback required as last argument");if(f){if(d<2)throw new Error("Too few arguments provided");d===2?(s=o,o=n,n=i=void 0):d===3&&(n.getContext&&typeof s=="undefined"?(s=i,i=void 0):(s=i,i=o,o=n,n=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(o=n,n=i=void 0):d===2&&!n.getContext&&(i=o,o=n,n=void 0),new Promise(function(l,p){try{const w=wr.create(o,i);l(e(w,n,i))}catch(w){p(w)}})}try{const l=wr.create(o,i);s(null,e(l,n,i))}catch(l){s(l)}}at.create=wr.create;at.toCanvas=Sr.bind(null,Fn.render);at.toDataURL=Sr.bind(null,Fn.renderToDataURL);at.toString=Sr.bind(null,function(e,n,o){return Ps.render(e,o)});var Ln=(e,n,o)=>{if(!n.has(e))throw TypeError("Cannot "+o)},dn=(e,n,o)=>(Ln(e,n,"read from private field"),o?o.call(e):n.get(e)),_s=(e,n,o)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,o)},$s=(e,n,o,i)=>(Ln(e,n,"write to private field"),n.set(e,o),o);const xn=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],As=[...xn,["unknown"]].map(e=>e[0]),Mt=new Map(xn);function Ms(e){for(const[n,o]of Mt)if(e===o)return n;return"unknown"}function Ds(e){if(Un(e))return{width:e.naturalWidth,height:e.naturalHeight};if(Vn(e))return{width:e.width.baseVal.value,height:e.height.baseVal.value};if(Hn(e))return{width:e.videoWidth,height:e.videoHeight};if(zn(e))return{width:e.width,height:e.height};if(Jn(e))return{width:e.displayWidth,height:e.displayHeight};if(Wn(e))return{width:e.width,height:e.height};if(qn(e))return{width:e.width,height:e.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Un(e){try{return e instanceof HTMLImageElement}catch{return!1}}function Vn(e){try{return e instanceof SVGImageElement}catch{return!1}}function Hn(e){try{return e instanceof HTMLVideoElement}catch{return!1}}function Wn(e){try{return e instanceof HTMLCanvasElement}catch{return!1}}function zn(e){try{return e instanceof ImageBitmap}catch{return!1}}function qn(e){try{return e instanceof OffscreenCanvas}catch{return!1}}function Jn(e){try{return e instanceof VideoFrame}catch{return!1}}function Yn(e){try{return e instanceof Blob}catch{return!1}}function Rs(e){try{return e instanceof ImageData}catch{return!1}}function Is(e,n){try{const o=new OffscreenCanvas(e,n);if(o.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return o;throw void 0}catch{const i=document.createElement("canvas");return i.width=e,i.height=n,i}}async function Gn(e){if(Un(e)&&!await Ns(e))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Vn(e)&&!await js(e))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Jn(e)&&Fs(e))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Hn(e)&&(e.readyState===0||e.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(zn(e)&&xs(e))throw new DOMException("The image source is detached.","InvalidStateError");const{width:n,height:o}=Ds(e);if(n===0||o===0)return null;const i=Is(n,o).getContext("2d");i.drawImage(e,0,0);try{return i.getImageData(0,0,n,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Os(e){let n;try{if(globalThis.createImageBitmap)n=await createImageBitmap(e);else if(globalThis.Image){n=new Image;let o="";try{o=URL.createObjectURL(e),n.src=o,await n.decode()}finally{URL.revokeObjectURL(o)}}else return e}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Gn(n)}function Bs(e){const{width:n,height:o}=e;if(n===0||o===0)return null;const i=e.getContext("2d");try{return i.getImageData(0,0,n,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ks(e){if(Yn(e))return await Os(e);if(Rs(e)){if(Ls(e))throw new DOMException("The image data has been detached.","InvalidStateError");return e}return Wn(e)||qn(e)?Bs(e):await Gn(e)}async function Ns(e){try{return await e.decode(),!0}catch{return!1}}async function js(e){var n;try{return await((n=e.decode)==null?void 0:n.call(e)),!0}catch{return!1}}function Fs(e){return e.format===null}function Ls(e){return e.data.buffer.byteLength===0}function xs(e){return e.width===0&&e.height===0}function fn(e,n){return e instanceof DOMException?new DOMException(`${n}: ${e.message}`,e.name):e instanceof Error?new e.constructor(`${n}: ${e.message}`):new Error(`${n}: ${e}`)}const hn=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function Us(e){return e.join("|")}function Vs(e){const n=gn(e);let o=0,i=hn.length-1;for(;o<=i;){const s=Math.floor((o+i)/2),u=hn[s],d=gn(u);if(d===n)return u;d<n?o=s+1:i=s-1}return"None"}function gn(e){return e.toLowerCase().replace(/_-\[\]/g,"")}function Hs(e,n){return e.Binarizer[n]}function Ws(e,n){return e.CharacterSet[n]}const zs=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function qs(e){return zs[e.value]}function Js(e,n){return e.EanAddOnSymbol[n]}function Ys(e,n){return e.TextMode[n]}const qe={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Kn(e,n){return{...n,formats:Us(n.formats),binarizer:Hs(e,n.binarizer),eanAddOnSymbol:Js(e,n.eanAddOnSymbol),textMode:Ys(e,n.textMode),characterSet:Ws(e,n.characterSet)}}function Qn(e){return{...e,format:Vs(e.format),eccLevel:e.eccLevel,contentType:qs(e.contentType)}}const Gs={locateFile:(e,n)=>{const o=e.match(/_(.+?)\.wasm$/);return o?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${o[1]}/${e}`:n+e}};let mn=new WeakMap;function Pr(e,n){var o;const i=mn.get(e);if(i!=null&&i.modulePromise&&n===void 0)return i.modulePromise;const s=(o=i==null?void 0:i.moduleOverrides)!=null?o:Gs,u=e({...s});return mn.set(e,{moduleOverrides:s,modulePromise:u}),u}async function Ks(e,n,o=qe){const i={...qe,...o},s=await Pr(e),{size:u}=n,d=new Uint8Array(await n.arrayBuffer()),f=s._malloc(u);s.HEAPU8.set(d,f);const l=s.readBarcodesFromImage(f,u,Kn(s,i));s._free(f);const p=[];for(let w=0;w<l.size();++w)p.push(Qn(l.get(w)));return p}async function Qs(e,n,o=qe){const i={...qe,...o},s=await Pr(e),{data:u,width:d,height:f,data:{byteLength:l}}=n,p=s._malloc(l);s.HEAPU8.set(u,p);const w=s.readBarcodesFromPixmap(p,d,f,Kn(s,i));s._free(p);const T=[];for(let _=0;_<w.size();++_)T.push(Qn(w.get(_)));return T}({...qe,formats:[...qe.formats]});var _r=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n={}){var o=n,i,s;o.ready=new Promise((t,r)=>{i=t,s=r});var u=Object.assign({},o),d="./this.program",f=typeof window=="object",l=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var p="";function w(t){return o.locateFile?o.locateFile(t,p):p+t}var T;(f||l)&&(l?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),e&&(p=e),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",l&&(T=t=>{var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)})),o.print||console.log.bind(console);var _=o.printErr||console.error.bind(console);Object.assign(o,u),u=null,o.arguments&&o.arguments,o.thisProgram&&(d=o.thisProgram),o.quit&&o.quit;var P;o.wasmBinary&&(P=o.wasmBinary),typeof WebAssembly!="object"&&ie("no native wasm support detected");var $,R=!1,N,D,I,y,b,M,L,U;function X(){var t=$.buffer;o.HEAP8=N=new Int8Array(t),o.HEAP16=I=new Int16Array(t),o.HEAPU8=D=new Uint8Array(t),o.HEAPU16=y=new Uint16Array(t),o.HEAP32=b=new Int32Array(t),o.HEAPU32=M=new Uint32Array(t),o.HEAPF32=L=new Float32Array(t),o.HEAPF64=U=new Float64Array(t)}var ne=[],re=[],de=[];function Te(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Lt(o.preRun.shift());Wt(ne)}function ae(){Wt(re)}function Ft(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)Je(o.postRun.shift());Wt(de)}function Lt(t){ne.unshift(t)}function xt(t){re.unshift(t)}function Je(t){de.unshift(t)}var he=0,De=null;function Ut(t){var r;he++,(r=o.monitorRunDependencies)===null||r===void 0||r.call(o,he)}function Ee(t){var r;if(he--,(r=o.monitorRunDependencies)===null||r===void 0||r.call(o,he),he==0&&De){var a=De;De=null,a()}}function ie(t){var r;(r=o.onAbort)===null||r===void 0||r.call(o,t),t="Aborted("+t+")",_(t),R=!0,t+=". Build with -sASSERTIONS for more info.";var a=new WebAssembly.RuntimeError(t);throw s(a),a}var Vt="data:application/octet-stream;base64,",st=t=>t.startsWith(Vt),Se;Se="zxing_reader.wasm",st(Se)||(Se=w(Se));function ut(t){if(t==Se&&P)return new Uint8Array(P);if(T)return T(t);throw"both async and sync fetching of the wasm failed"}function Ht(t){return!P&&(f||l)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+t+"'";return r.arrayBuffer()}).catch(()=>ut(t)):Promise.resolve().then(()=>ut(t))}function ct(t,r,a){return Ht(t).then(c=>WebAssembly.instantiate(c,r)).then(c=>c).then(a,c=>{_(`failed to asynchronously prepare wasm: ${c}`),ie(c)})}function go(t,r,a,c){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!st(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(h=>{var g=WebAssembly.instantiateStreaming(h,a);return g.then(c,function(m){return _(`wasm streaming compile failed: ${m}`),_("falling back to ArrayBuffer instantiation"),ct(r,a,c)})}):ct(r,a,c)}function mo(){var t={a:ri};function r(c,h){return K=c.exports,$=K.ia,X(),Nr=K.ma,xt(K.ja),Ee(),K}Ut();function a(c){r(c.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(t,r)}catch(c){_(`Module.instantiateWasm callback failed with error: ${c}`),s(c)}return go(P,Se,t,a).catch(s),{}}var Wt=t=>{for(;t.length>0;)t.shift()(o)};o.noExitRuntime;var lt=[],dt=0,po=t=>{var r=new zt(t);return r.get_caught()||(r.set_caught(!0),dt--),r.set_rethrown(!1),lt.push(r),Kr(r.excPtr),r.get_exception_ptr()},ye=0,vo=()=>{H(0,0);var t=lt.pop();Gr(t.excPtr),ye=0};function zt(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(r){M[this.ptr+4>>2]=r},this.get_type=function(){return M[this.ptr+4>>2]},this.set_destructor=function(r){M[this.ptr+8>>2]=r},this.get_destructor=function(){return M[this.ptr+8>>2]},this.set_caught=function(r){r=r?1:0,N[this.ptr+12>>0]=r},this.get_caught=function(){return N[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,N[this.ptr+13>>0]=r},this.get_rethrown=function(){return N[this.ptr+13>>0]!=0},this.init=function(r,a){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(a)},this.set_adjusted_ptr=function(r){M[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return M[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=Xr(this.get_type());if(r)return M[this.excPtr>>2];var a=this.get_adjusted_ptr();return a!==0?a:this.excPtr}}var yo=t=>{throw ye||(ye=t),ye},qt=t=>{var r=ye;if(!r)return et(0),0;var a=new zt(r);a.set_adjusted_ptr(r);var c=a.get_type();if(!c)return et(0),r;for(var h in t){var g=t[h];if(g===0||g===c)break;var m=a.ptr+16;if(Qr(g,c,m))return et(g),r}return et(c),r},wo=()=>qt([]),bo=t=>qt([t]),Co=(t,r)=>qt([t,r]),To=()=>{var t=lt.pop();t||ie("no exception to throw");var r=t.excPtr;throw t.get_rethrown()||(lt.push(t),t.set_rethrown(!0),t.set_caught(!1),dt++),ye=r,ye},Eo=(t,r,a)=>{var c=new zt(t);throw c.init(r,a),ye=t,dt++,ye},So=()=>dt,ft={},Jt=t=>{for(;t.length;){var r=t.pop(),a=t.pop();a(r)}};function Yt(t){return this.fromWireType(b[t>>2])}var Be={},Re={},ht={},$r,gt=t=>{throw new $r(t)},Ie=(t,r,a)=>{t.forEach(function(v){ht[v]=r});function c(v){var C=a(v);C.length!==t.length&&gt("Mismatched type converter count");for(var S=0;S<t.length;++S)ge(t[S],C[S])}var h=new Array(r.length),g=[],m=0;r.forEach((v,C)=>{Re.hasOwnProperty(v)?h[C]=Re[v]:(g.push(v),Be.hasOwnProperty(v)||(Be[v]=[]),Be[v].push(()=>{h[C]=Re[v],++m,m===g.length&&c(h)}))}),g.length===0&&c(h)},Po=t=>{var r=ft[t];delete ft[t];var a=r.rawConstructor,c=r.rawDestructor,h=r.fields,g=h.map(m=>m.getterReturnType).concat(h.map(m=>m.setterArgumentType));Ie([t],g,m=>{var v={};return h.forEach((C,S)=>{var A=C.fieldName,B=m[S],k=C.getter,j=C.getterContext,W=m[S+h.length],Y=C.setter,V=C.setterContext;v[A]={read:ee=>B.fromWireType(k(j,ee)),write:(ee,E)=>{var O=[];Y(V,ee,W.toWireType(O,E)),Jt(O)}}}),[{name:r.name,fromWireType:C=>{var S={};for(var A in v)S[A]=v[A].read(C);return c(C),S},toWireType:(C,S)=>{for(var A in v)if(!(A in S))throw new TypeError(`Missing field: "${A}"`);var B=a();for(A in v)v[A].write(B,S[A]);return C!==null&&C.push(c,B),B},argPackAdvance:me,readValueFromPointer:Yt,destructorFunction:c}]})},_o=(t,r,a,c,h)=>{},$o=()=>{for(var t=new Array(256),r=0;r<256;++r)t[r]=String.fromCharCode(r);Ar=t},Ar,Z=t=>{for(var r="",a=t;D[a];)r+=Ar[D[a++]];return r},ke,F=t=>{throw new ke(t)};function Ao(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var c=r.name;if(t||F(`type "${c}" must have a positive integer typeid pointer`),Re.hasOwnProperty(t)){if(a.ignoreDuplicateRegistrations)return;F(`Cannot register type '${c}' twice`)}if(Re[t]=r,delete ht[t],Be.hasOwnProperty(t)){var h=Be[t];delete Be[t],h.forEach(g=>g())}}function ge(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Ao(t,r,a)}var me=8,Mo=(t,r,a,c)=>{r=Z(r),ge(t,{name:r,fromWireType:function(h){return!!h},toWireType:function(h,g){return g?a:c},argPackAdvance:me,readValueFromPointer:function(h){return this.fromWireType(D[h])},destructorFunction:null})},Do=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),Gt=t=>{function r(a){return a.$$.ptrType.registeredClass.name}F(r(t)+" instance already deleted")},Kt=!1,Mr=t=>{},Ro=t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)},Dr=t=>{t.count.value-=1;var r=t.count.value===0;r&&Ro(t)},Rr=(t,r,a)=>{if(r===a)return t;if(a.baseClass===void 0)return null;var c=Rr(t,r,a.baseClass);return c===null?null:a.downcast(c)},Ir={},Io=()=>Object.keys(Ke).length,Oo=()=>{var t=[];for(var r in Ke)Ke.hasOwnProperty(r)&&t.push(Ke[r]);return t},Ye=[],Qt=()=>{for(;Ye.length;){var t=Ye.pop();t.$$.deleteScheduled=!1,t.delete()}},Ge,Bo=t=>{Ge=t,Ye.length&&Ge&&Ge(Qt)},ko=()=>{o.getInheritedInstanceCount=Io,o.getLiveInheritedInstances=Oo,o.flushPendingDeletes=Qt,o.setDelayFunction=Bo},Ke={},No=(t,r)=>{for(r===void 0&&F("ptr should not be undefined");t.baseClass;)r=t.upcast(r),t=t.baseClass;return r},jo=(t,r)=>(r=No(t,r),Ke[r]),mt=(t,r)=>{(!r.ptrType||!r.ptr)&&gt("makeClassHandle requires ptr and ptrType");var a=!!r.smartPtrType,c=!!r.smartPtr;return a!==c&&gt("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Qe(Object.create(t,{$$:{value:r,writable:!0}}))};function Fo(t){var r=this.getPointee(t);if(!r)return this.destructor(t),null;var a=jo(this.registeredClass,r);if(a!==void 0){if(a.$$.count.value===0)return a.$$.ptr=r,a.$$.smartPtr=t,a.clone();var c=a.clone();return this.destructor(t),c}function h(){return this.isSmartPointer?mt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:t}):mt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var g=this.registeredClass.getActualType(r),m=Ir[g];if(!m)return h.call(this);var v;this.isConst?v=m.constPointerType:v=m.pointerType;var C=Rr(r,this.registeredClass,v.registeredClass);return C===null?h.call(this):this.isSmartPointer?mt(v.registeredClass.instancePrototype,{ptrType:v,ptr:C,smartPtrType:this,smartPtr:t}):mt(v.registeredClass.instancePrototype,{ptrType:v,ptr:C})}var Qe=t=>typeof FinalizationRegistry>"u"?(Qe=r=>r,t):(Kt=new FinalizationRegistry(r=>{Dr(r.$$)}),Qe=r=>{var a=r.$$,c=!!a.smartPtr;if(c){var h={$$:a};Kt.register(r,h,r)}return r},Mr=r=>Kt.unregister(r),Qe(t)),Lo=()=>{Object.assign(pt.prototype,{isAliasOf(t){if(!(this instanceof pt)||!(t instanceof pt))return!1;var r=this.$$.ptrType.registeredClass,a=this.$$.ptr;t.$$=t.$$;for(var c=t.$$.ptrType.registeredClass,h=t.$$.ptr;r.baseClass;)a=r.upcast(a),r=r.baseClass;for(;c.baseClass;)h=c.upcast(h),c=c.baseClass;return r===c&&a===h},clone(){if(this.$$.ptr||Gt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Qe(Object.create(Object.getPrototypeOf(this),{$$:{value:Do(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||Gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),Mr(this),Dr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),Ye.push(this),Ye.length===1&&Ge&&Ge(Qt),this.$$.deleteScheduled=!0,this}})};function pt(){}var Xe=(t,r)=>Object.defineProperty(r,"name",{value:t}),Or=(t,r,a)=>{if(t[r].overloadTable===void 0){var c=t[r];t[r]=function(){return t[r].overloadTable.hasOwnProperty(arguments.length)||F(`Function '${a}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[r].overloadTable})!`),t[r].overloadTable[arguments.length].apply(this,arguments)},t[r].overloadTable=[],t[r].overloadTable[c.argCount]=c}},Xt=(t,r,a)=>{o.hasOwnProperty(t)?((a===void 0||o[t].overloadTable!==void 0&&o[t].overloadTable[a]!==void 0)&&F(`Cannot register public name '${t}' twice`),Or(o,t,t),o.hasOwnProperty(a)&&F(`Cannot register multiple overloads of a function with the same number of arguments (${a})!`),o[t].overloadTable[a]=r):(o[t]=r,a!==void 0&&(o[t].numArguments=a))},xo=48,Uo=57,Vo=t=>{if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var r=t.charCodeAt(0);return r>=xo&&r<=Uo?`_${t}`:t};function Ho(t,r,a,c,h,g,m,v){this.name=t,this.constructor=r,this.instancePrototype=a,this.rawDestructor=c,this.baseClass=h,this.getActualType=g,this.upcast=m,this.downcast=v,this.pureVirtualFunctions=[]}var Zt=(t,r,a)=>{for(;r!==a;)r.upcast||F(`Expected null or instance of ${a.name}, got an instance of ${r.name}`),t=r.upcast(t),r=r.baseClass;return t};function Wo(t,r){if(r===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;r.$$||F(`Cannot pass "${or(r)}" as a ${this.name}`),r.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`);var a=r.$$.ptrType.registeredClass,c=Zt(r.$$.ptr,a,this.registeredClass);return c}function zo(t,r){var a;if(r===null)return this.isReference&&F(`null is not a valid ${this.name}`),this.isSmartPointer?(a=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,a),a):0;(!r||!r.$$)&&F(`Cannot pass "${or(r)}" as a ${this.name}`),r.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&F(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var c=r.$$.ptrType.registeredClass;if(a=Zt(r.$$.ptr,c,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&F("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?a=r.$$.smartPtr:F(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:a=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)a=r.$$.smartPtr;else{var h=r.clone();a=this.rawShare(a,we.toHandle(()=>h.delete())),t!==null&&t.push(this.rawDestructor,a)}break;default:F("Unsupporting sharing policy")}return a}function qo(t,r){if(r===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;r.$$||F(`Cannot pass "${or(r)}" as a ${this.name}`),r.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&F(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var a=r.$$.ptrType.registeredClass,c=Zt(r.$$.ptr,a,this.registeredClass);return c}function Br(t){return this.fromWireType(M[t>>2])}var Jo=()=>{Object.assign(vt.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var r;(r=this.rawDestructor)===null||r===void 0||r.call(this,t)},argPackAdvance:me,readValueFromPointer:Br,deleteObject(t){t!==null&&t.delete()},fromWireType:Fo})};function vt(t,r,a,c,h,g,m,v,C,S,A){this.name=t,this.registeredClass=r,this.isReference=a,this.isConst=c,this.isSmartPointer=h,this.pointeeType=g,this.sharingPolicy=m,this.rawGetPointee=v,this.rawConstructor=C,this.rawShare=S,this.rawDestructor=A,!h&&r.baseClass===void 0?c?(this.toWireType=Wo,this.destructorFunction=null):(this.toWireType=qo,this.destructorFunction=null):this.toWireType=zo}var kr=(t,r,a)=>{o.hasOwnProperty(t)||gt("Replacing nonexistant public symbol"),o[t].overloadTable!==void 0&&a!==void 0?o[t].overloadTable[a]=r:(o[t]=r,o[t].argCount=a)},Yo=(t,r,a)=>{var c=o["dynCall_"+t];return a&&a.length?c.apply(null,[r].concat(a)):c.call(null,r)},yt=[],Nr,z=t=>{var r=yt[t];return r||(t>=yt.length&&(yt.length=t+1),yt[t]=r=Nr.get(t)),r},Go=(t,r,a)=>{if(t.includes("j"))return Yo(t,r,a);var c=z(r).apply(null,a);return c},Ko=(t,r)=>{var a=[];return function(){return a.length=0,Object.assign(a,arguments),Go(t,r,a)}},fe=(t,r)=>{t=Z(t);function a(){return t.includes("j")?Ko(t,r):z(r)}var c=a();return typeof c!="function"&&F(`unknown function pointer with signature ${t}: ${r}`),c},Qo=(t,r)=>{var a=Xe(r,function(c){this.name=r,this.message=c;var h=new Error(c).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},a},jr,Fr=t=>{var r=Yr(t),a=Z(r);return be(r),a},wt=(t,r)=>{var a=[],c={};function h(g){if(!c[g]&&!Re[g]){if(ht[g]){ht[g].forEach(h);return}a.push(g),c[g]=!0}}throw r.forEach(h),new jr(`${t}: `+a.map(Fr).join([", "]))},Xo=(t,r,a,c,h,g,m,v,C,S,A,B,k)=>{A=Z(A),g=fe(h,g),v&&(v=fe(m,v)),S&&(S=fe(C,S)),k=fe(B,k);var j=Vo(A);Xt(j,function(){wt(`Cannot construct ${A} due to unbound types`,[c])}),Ie([t,r,a],c?[c]:[],function(W){W=W[0];var Y,V;c?(Y=W.registeredClass,V=Y.instancePrototype):V=pt.prototype;var ee=Xe(A,function(){if(Object.getPrototypeOf(this)!==E)throw new ke("Use 'new' to construct "+A);if(O.constructor_body===void 0)throw new ke(A+" has no accessible constructor");var rn=O.constructor_body[arguments.length];if(rn===void 0)throw new ke(`Tried to invoke ctor of ${A} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(O.constructor_body).toString()}) parameters instead!`);return rn.apply(this,arguments)}),E=Object.create(V,{constructor:{value:ee}});ee.prototype=E;var O=new Ho(A,ee,E,k,Y,g,v,S);if(O.baseClass){var G,Q;(Q=(G=O.baseClass).__derivedClasses)!==null&&Q!==void 0||(G.__derivedClasses=[]),O.baseClass.__derivedClasses.push(O)}var Ne=new vt(A,O,!0,!1,!1),Tt=new vt(A+"*",O,!1,!1,!1),tn=new vt(A+" const*",O,!1,!0,!1);return Ir[t]={pointerType:Tt,constPointerType:tn},kr(j,ee),[Ne,Tt,tn]})},er=(t,r)=>{for(var a=[],c=0;c<t;c++)a.push(M[r+c*4>>2]);return a};function Zo(t){for(var r=1;r<t.length;++r)if(t[r]!==null&&t[r].destructorFunction===void 0)return!0;return!1}function tr(t,r,a,c,h,g){var m=r.length;m<2&&F("argTypes array size mismatch! Must at least get return value and 'this' types!");var v=r[1]!==null&&a!==null,C=Zo(r),S=r[0].name!=="void",A=m-2,B=new Array(A),k=[],j=[],W=function(){arguments.length!==A&&F(`function ${t} called with ${arguments.length} arguments, expected ${A}`),j.length=0;var Y;k.length=v?2:1,k[0]=h,v&&(Y=r[1].toWireType(j,this),k[1]=Y);for(var V=0;V<A;++V)B[V]=r[V+2].toWireType(j,arguments[V]),k.push(B[V]);var ee=c.apply(null,k);function E(O){if(C)Jt(j);else for(var G=v?1:2;G<r.length;G++){var Q=G===1?Y:B[G-2];r[G].destructorFunction!==null&&r[G].destructorFunction(Q)}if(S)return r[0].fromWireType(O)}return E(ee)};return Xe(t,W)}var ea=(t,r,a,c,h,g)=>{var m=er(r,a);h=fe(c,h),Ie([],[t],function(v){v=v[0];var C=`constructor ${v.name}`;if(v.registeredClass.constructor_body===void 0&&(v.registeredClass.constructor_body=[]),v.registeredClass.constructor_body[r-1]!==void 0)throw new ke(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${v.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return v.registeredClass.constructor_body[r-1]=()=>{wt(`Cannot construct ${v.name} due to unbound types`,m)},Ie([],m,S=>(S.splice(1,0,null),v.registeredClass.constructor_body[r-1]=tr(C,S,null,h,g),[])),[]})},Lr=t=>{t=t.trim();const r=t.indexOf("(");return r!==-1?t.substr(0,r):t},ta=(t,r,a,c,h,g,m,v,C)=>{var S=er(a,c);r=Z(r),r=Lr(r),g=fe(h,g),Ie([],[t],function(A){A=A[0];var B=`${A.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),v&&A.registeredClass.pureVirtualFunctions.push(r);function k(){wt(`Cannot call ${B} due to unbound types`,S)}var j=A.registeredClass.instancePrototype,W=j[r];return W===void 0||W.overloadTable===void 0&&W.className!==A.name&&W.argCount===a-2?(k.argCount=a-2,k.className=A.name,j[r]=k):(Or(j,r,B),j[r].overloadTable[a-2]=k),Ie([],S,function(Y){var V=tr(B,Y,A,g,m);return j[r].overloadTable===void 0?(V.argCount=a-2,j[r]=V):j[r].overloadTable[a-2]=V,[]}),[]})};function ra(){Object.assign(xr.prototype,{get(t){return this.allocated[t]},has(t){return this.allocated[t]!==void 0},allocate(t){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=t,r},free(t){this.allocated[t]=void 0,this.freelist.push(t)}})}function xr(){this.allocated=[void 0],this.freelist=[]}var le=new xr,rr=t=>{t>=le.reserved&&--le.get(t).refcount===0&&le.free(t)},na=()=>{for(var t=0,r=le.reserved;r<le.allocated.length;++r)le.allocated[r]!==void 0&&++t;return t},oa=()=>{le.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),le.reserved=le.allocated.length,o.count_emval_handles=na},we={toValue:t=>(t||F("Cannot use deleted val. handle = "+t),le.get(t).value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return le.allocate({refcount:1,value:t})}}},aa=(t,r)=>{r=Z(r),ge(t,{name:r,fromWireType:a=>{var c=we.toValue(a);return rr(a),c},toWireType:(a,c)=>we.toHandle(c),argPackAdvance:me,readValueFromPointer:Yt,destructorFunction:null})},ia=(t,r,a)=>{switch(r){case 1:return a?function(c){return this.fromWireType(N[c>>0])}:function(c){return this.fromWireType(D[c>>0])};case 2:return a?function(c){return this.fromWireType(I[c>>1])}:function(c){return this.fromWireType(y[c>>1])};case 4:return a?function(c){return this.fromWireType(b[c>>2])}:function(c){return this.fromWireType(M[c>>2])};default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},sa=(t,r,a,c)=>{r=Z(r);function h(){}h.values={},ge(t,{name:r,constructor:h,fromWireType:function(g){return this.constructor.values[g]},toWireType:(g,m)=>m.value,argPackAdvance:me,readValueFromPointer:ia(r,a,c),destructorFunction:null}),Xt(r,h)},nr=(t,r)=>{var a=Re[t];return a===void 0&&F(r+" has unknown type "+Fr(t)),a},ua=(t,r,a)=>{var c=nr(t,"enum");r=Z(r);var h=c.constructor,g=Object.create(c.constructor.prototype,{value:{value:a},constructor:{value:Xe(`${c.name}_${r}`,function(){})}});h.values[a]=g,h[r]=g},or=t=>{if(t===null)return"null";var r=typeof t;return r==="object"||r==="array"||r==="function"?t.toString():""+t},ca=(t,r)=>{switch(r){case 4:return function(a){return this.fromWireType(L[a>>2])};case 8:return function(a){return this.fromWireType(U[a>>3])};default:throw new TypeError(`invalid float width (${r}): ${t}`)}},la=(t,r,a)=>{r=Z(r),ge(t,{name:r,fromWireType:c=>c,toWireType:(c,h)=>h,argPackAdvance:me,readValueFromPointer:ca(r,a),destructorFunction:null})},da=(t,r,a,c,h,g,m)=>{var v=er(r,a);t=Z(t),t=Lr(t),h=fe(c,h),Xt(t,function(){wt(`Cannot call ${t} due to unbound types`,v)},r-1),Ie([],v,function(C){var S=[C[0],null].concat(C.slice(1));return kr(t,tr(t,S,null,h,g),r-1),[]})},fa=(t,r,a)=>{switch(r){case 1:return a?c=>N[c>>0]:c=>D[c>>0];case 2:return a?c=>I[c>>1]:c=>y[c>>1];case 4:return a?c=>b[c>>2]:c=>M[c>>2];default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},ha=(t,r,a,c,h)=>{r=Z(r);var g=A=>A;if(c===0){var m=32-8*a;g=A=>A<<m>>>m}var v=r.includes("unsigned"),C=(A,B)=>{},S;v?S=function(A,B){return C(B,this.name),B>>>0}:S=function(A,B){return C(B,this.name),B},ge(t,{name:r,fromWireType:g,toWireType:S,argPackAdvance:me,readValueFromPointer:fa(r,a,c!==0),destructorFunction:null})},ga=(t,r,a)=>{var c=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=c[r];function g(m){var v=M[m>>2],C=M[m+4>>2];return new h(N.buffer,C,v)}a=Z(a),ge(t,{name:a,fromWireType:g,argPackAdvance:me,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})},Ur=(t,r,a,c)=>{if(!(c>0))return 0;for(var h=a,g=a+c-1,m=0;m<t.length;++m){var v=t.charCodeAt(m);if(v>=55296&&v<=57343){var C=t.charCodeAt(++m);v=65536+((v&1023)<<10)|C&1023}if(v<=127){if(a>=g)break;r[a++]=v}else if(v<=2047){if(a+1>=g)break;r[a++]=192|v>>6,r[a++]=128|v&63}else if(v<=65535){if(a+2>=g)break;r[a++]=224|v>>12,r[a++]=128|v>>6&63,r[a++]=128|v&63}else{if(a+3>=g)break;r[a++]=240|v>>18,r[a++]=128|v>>12&63,r[a++]=128|v>>6&63,r[a++]=128|v&63}}return r[a]=0,a-h},ma=(t,r,a)=>Ur(t,D,r,a),Vr=t=>{for(var r=0,a=0;a<t.length;++a){var c=t.charCodeAt(a);c<=127?r++:c<=2047?r+=2:c>=55296&&c<=57343?(r+=4,++a):r+=3}return r},Hr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,pa=(t,r,a)=>{for(var c=r+a,h=r;t[h]&&!(h>=c);)++h;if(h-r>16&&t.buffer&&Hr)return Hr.decode(t.subarray(r,h));for(var g="";r<h;){var m=t[r++];if(!(m&128)){g+=String.fromCharCode(m);continue}var v=t[r++]&63;if((m&224)==192){g+=String.fromCharCode((m&31)<<6|v);continue}var C=t[r++]&63;if((m&240)==224?m=(m&15)<<12|v<<6|C:m=(m&7)<<18|v<<12|C<<6|t[r++]&63,m<65536)g+=String.fromCharCode(m);else{var S=m-65536;g+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return g},ar=(t,r)=>t?pa(D,t,r):"",va=(t,r)=>{r=Z(r);var a=r==="std::string";ge(t,{name:r,fromWireType(c){var h=M[c>>2],g=c+4,m;if(a)for(var v=g,C=0;C<=h;++C){var S=g+C;if(C==h||D[S]==0){var A=S-v,B=ar(v,A);m===void 0?m=B:(m+="\0",m+=B),v=S+1}}else{for(var k=new Array(h),C=0;C<h;++C)k[C]=String.fromCharCode(D[g+C]);m=k.join("")}return be(c),m},toWireType(c,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var g,m=typeof h=="string";m||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||F("Cannot pass non-string to std::string"),a&&m?g=Vr(h):g=h.length;var v=ur(4+g+1),C=v+4;if(M[v>>2]=g,a&&m)ma(h,C,g+1);else if(m)for(var S=0;S<g;++S){var A=h.charCodeAt(S);A>255&&(be(C),F("String has UTF-16 code units that do not fit in 8 bits")),D[C+S]=A}else for(var S=0;S<g;++S)D[C+S]=h[S];return c!==null&&c.push(be,v),v},argPackAdvance:me,readValueFromPointer:Br,destructorFunction(c){be(c)}})},Wr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ya=(t,r)=>{for(var a=t,c=a>>1,h=c+r/2;!(c>=h)&&y[c];)++c;if(a=c<<1,a-t>32&&Wr)return Wr.decode(D.subarray(t,a));for(var g="",m=0;!(m>=r/2);++m){var v=I[t+m*2>>1];if(v==0)break;g+=String.fromCharCode(v)}return g},wa=(t,r,a)=>{var c;if((c=a)!==null&&c!==void 0||(a=2147483647),a<2)return 0;a-=2;for(var h=r,g=a<t.length*2?a/2:t.length,m=0;m<g;++m){var v=t.charCodeAt(m);I[r>>1]=v,r+=2}return I[r>>1]=0,r-h},ba=t=>t.length*2,Ca=(t,r)=>{for(var a=0,c="";!(a>=r/4);){var h=b[t+a*4>>2];if(h==0)break;if(++a,h>=65536){var g=h-65536;c+=String.fromCharCode(55296|g>>10,56320|g&1023)}else c+=String.fromCharCode(h)}return c},Ta=(t,r,a)=>{var c;if((c=a)!==null&&c!==void 0||(a=2147483647),a<4)return 0;for(var h=r,g=h+a-4,m=0;m<t.length;++m){var v=t.charCodeAt(m);if(v>=55296&&v<=57343){var C=t.charCodeAt(++m);v=65536+((v&1023)<<10)|C&1023}if(b[r>>2]=v,r+=4,r+4>g)break}return b[r>>2]=0,r-h},Ea=t=>{for(var r=0,a=0;a<t.length;++a){var c=t.charCodeAt(a);c>=55296&&c<=57343&&++a,r+=4}return r},Sa=(t,r,a)=>{a=Z(a);var c,h,g,m,v;r===2?(c=ya,h=wa,m=ba,g=()=>y,v=1):r===4&&(c=Ca,h=Ta,m=Ea,g=()=>M,v=2),ge(t,{name:a,fromWireType:C=>{for(var S=M[C>>2],A=g(),B,k=C+4,j=0;j<=S;++j){var W=C+4+j*r;if(j==S||A[W>>v]==0){var Y=W-k,V=c(k,Y);B===void 0?B=V:(B+="\0",B+=V),k=W+r}}return be(C),B},toWireType:(C,S)=>{typeof S!="string"&&F(`Cannot pass non-string to C++ string type ${a}`);var A=m(S),B=ur(4+A+r);return M[B>>2]=A>>v,h(S,B+4,A+r),C!==null&&C.push(be,B),B},argPackAdvance:me,readValueFromPointer:Yt,destructorFunction(C){be(C)}})},Pa=(t,r,a,c,h,g)=>{ft[t]={name:Z(r),rawConstructor:fe(a,c),rawDestructor:fe(h,g),fields:[]}},_a=(t,r,a,c,h,g,m,v,C,S)=>{ft[t].fields.push({fieldName:Z(r),getterReturnType:a,getter:fe(c,h),getterContext:g,setterArgumentType:m,setter:fe(v,C),setterContext:S})},$a=(t,r)=>{r=Z(r),ge(t,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(a,c)=>{}})},ir=[],Aa=(t,r,a,c)=>(t=ir[t],r=we.toValue(r),t(null,r,a,c)),Ma={},Da=t=>{var r=Ma[t];return r===void 0?Z(t):r},zr=()=>{if(typeof globalThis=="object")return globalThis;function t(r){r.$$$embind_global$$$=r;var a=typeof $$$embind_global$$$=="object"&&r.$$$embind_global$$$==r;return a||delete r.$$$embind_global$$$,a}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&t(global)?$$$embind_global$$$=global:typeof self=="object"&&t(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Ra=t=>t===0?we.toHandle(zr()):(t=Da(t),we.toHandle(zr()[t])),Ia=t=>{var r=ir.length;return ir.push(t),r},Oa=(t,r)=>{for(var a=new Array(t),c=0;c<t;++c)a[c]=nr(M[r+c*4>>2],"parameter "+c);return a},Ba=Reflect.construct,ka=(t,r,a)=>{var c=[],h=t.toWireType(c,a);return c.length&&(M[r>>2]=we.toHandle(c)),h},Na=(t,r,a)=>{var c=Oa(t,r),h=c.shift();t--;var g=new Array(t),m=(C,S,A,B)=>{for(var k=0,j=0;j<t;++j)g[j]=c[j].readValueFromPointer(B+k),k+=c[j].argPackAdvance;for(var W=a===1?Ba(S,g):S.apply(C,g),j=0;j<t;++j){var Y,V;(Y=(V=c[j]).deleteObject)===null||Y===void 0||Y.call(V,g[j])}return ka(h,A,W)},v=`methodCaller<(${c.map(C=>C.name).join(", ")}) => ${h.name}>`;return Ia(Xe(v,m))},ja=t=>{t>4&&(le.get(t).refcount+=1)},Fa=t=>{var r=we.toValue(t);Jt(r),rr(t)},La=(t,r)=>{t=nr(t,"_emval_take_value");var a=t.readValueFromPointer(r);return we.toHandle(a)},xa=()=>{ie("")},Ua=(t,r,a)=>D.copyWithin(t,r,r+a),Va=()=>2147483648,Ha=t=>{var r=$.buffer,a=(t-r.byteLength+65535)/65536;try{return $.grow(a),X(),1}catch{}},Wa=t=>{var r=D.length;t>>>=0;var a=Va();if(t>a)return!1;for(var c=(C,S)=>C+(S-C%S)%S,h=1;h<=4;h*=2){var g=r*(1+.2/h);g=Math.min(g,t+100663296);var m=Math.min(a,c(Math.max(t,g),65536)),v=Ha(m);if(v)return!0}return!1},sr={},za=()=>d||"./this.program",Ze=()=>{if(!Ze.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:za()};for(var a in sr)sr[a]===void 0?delete r[a]:r[a]=sr[a];var c=[];for(var a in r)c.push(`${a}=${r[a]}`);Ze.strings=c}return Ze.strings},qa=(t,r)=>{for(var a=0;a<t.length;++a)N[r++>>0]=t.charCodeAt(a);N[r>>0]=0},Ja=(t,r)=>{var a=0;return Ze().forEach((c,h)=>{var g=r+a;M[t+h*4>>2]=g,qa(c,g),a+=c.length+1}),0},Ya=(t,r)=>{var a=Ze();M[t>>2]=a.length;var c=0;return a.forEach(h=>c+=h.length+1),M[r>>2]=c,0},Ga=t=>t,bt=t=>t%4===0&&(t%100!==0||t%400===0),Ka=(t,r)=>{for(var a=0,c=0;c<=r;a+=t[c++]);return a},qr=[31,29,31,30,31,30,31,31,30,31,30,31],Jr=[31,28,31,30,31,30,31,31,30,31,30,31],Qa=(t,r)=>{for(var a=new Date(t.getTime());r>0;){var c=bt(a.getFullYear()),h=a.getMonth(),g=(c?qr:Jr)[h];if(r>g-a.getDate())r-=g-a.getDate()+1,a.setDate(1),h<11?a.setMonth(h+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else return a.setDate(a.getDate()+r),a}return a};function Xa(t,r,a){var c=Vr(t)+1,h=new Array(c);return Ur(t,h,0,h.length),h}var Za=(t,r)=>{N.set(t,r)},ei=(t,r,a,c)=>{var h=M[c+40>>2],g={tm_sec:b[c>>2],tm_min:b[c+4>>2],tm_hour:b[c+8>>2],tm_mday:b[c+12>>2],tm_mon:b[c+16>>2],tm_year:b[c+20>>2],tm_wday:b[c+24>>2],tm_yday:b[c+28>>2],tm_isdst:b[c+32>>2],tm_gmtoff:b[c+36>>2],tm_zone:h?ar(h):""},m=ar(a),v={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var C in v)m=m.replace(new RegExp(C,"g"),v[C]);var S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=["January","February","March","April","May","June","July","August","September","October","November","December"];function B(E,O,G){for(var Q=typeof E=="number"?E.toString():E||"";Q.length<O;)Q=G[0]+Q;return Q}function k(E,O){return B(E,O,"0")}function j(E,O){function G(Ne){return Ne<0?-1:Ne>0?1:0}var Q;return(Q=G(E.getFullYear()-O.getFullYear()))===0&&(Q=G(E.getMonth()-O.getMonth()))===0&&(Q=G(E.getDate()-O.getDate())),Q}function W(E){switch(E.getDay()){case 0:return new Date(E.getFullYear()-1,11,29);case 1:return E;case 2:return new Date(E.getFullYear(),0,3);case 3:return new Date(E.getFullYear(),0,2);case 4:return new Date(E.getFullYear(),0,1);case 5:return new Date(E.getFullYear()-1,11,31);case 6:return new Date(E.getFullYear()-1,11,30)}}function Y(E){var O=Qa(new Date(E.tm_year+1900,0,1),E.tm_yday),G=new Date(O.getFullYear(),0,4),Q=new Date(O.getFullYear()+1,0,4),Ne=W(G),Tt=W(Q);return j(Ne,O)<=0?j(Tt,O)<=0?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}var V={"%a":E=>S[E.tm_wday].substring(0,3),"%A":E=>S[E.tm_wday],"%b":E=>A[E.tm_mon].substring(0,3),"%B":E=>A[E.tm_mon],"%C":E=>{var O=E.tm_year+1900;return k(O/100|0,2)},"%d":E=>k(E.tm_mday,2),"%e":E=>B(E.tm_mday,2," "),"%g":E=>Y(E).toString().substring(2),"%G":E=>Y(E),"%H":E=>k(E.tm_hour,2),"%I":E=>{var O=E.tm_hour;return O==0?O=12:O>12&&(O-=12),k(O,2)},"%j":E=>k(E.tm_mday+Ka(bt(E.tm_year+1900)?qr:Jr,E.tm_mon-1),3),"%m":E=>k(E.tm_mon+1,2),"%M":E=>k(E.tm_min,2),"%n":()=>`
`,"%p":E=>E.tm_hour>=0&&E.tm_hour<12?"AM":"PM","%S":E=>k(E.tm_sec,2),"%t":()=>"	","%u":E=>E.tm_wday||7,"%U":E=>{var O=E.tm_yday+7-E.tm_wday;return k(Math.floor(O/7),2)},"%V":E=>{var O=Math.floor((E.tm_yday+7-(E.tm_wday+6)%7)/7);if((E.tm_wday+371-E.tm_yday-2)%7<=2&&O++,O){if(O==53){var G=(E.tm_wday+371-E.tm_yday)%7;G!=4&&(G!=3||!bt(E.tm_year))&&(O=1)}}else{O=52;var Q=(E.tm_wday+7-E.tm_yday-1)%7;(Q==4||Q==5&&bt(E.tm_year%400-1))&&O++}return k(O,2)},"%w":E=>E.tm_wday,"%W":E=>{var O=E.tm_yday+7-(E.tm_wday+6)%7;return k(Math.floor(O/7),2)},"%y":E=>(E.tm_year+1900).toString().substring(2),"%Y":E=>E.tm_year+1900,"%z":E=>{var O=E.tm_gmtoff,G=O>=0;return O=Math.abs(O)/60,O=O/60*100+O%60,(G?"+":"-")+("0000"+O).slice(-4)},"%Z":E=>E.tm_zone,"%%":()=>"%"};m=m.replace(/%%/g,"\0\0");for(var C in V)m.includes(C)&&(m=m.replace(new RegExp(C,"g"),V[C](g)));m=m.replace(/\0\0/g,"%");var ee=Xa(m);return ee.length>r?0:(Za(ee,t),ee.length-1)},ti=(t,r,a,c,h)=>ei(t,r,a,c);$r=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},$o(),ke=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Lo(),ko(),Jo(),jr=o.UnboundTypeError=Qo(Error,"UnboundTypeError"),ra(),oa();var ri={s:po,u:vo,b:wo,g:bo,q:Co,J:To,f:Eo,V:So,d:yo,da:Po,Q:_o,_:Mo,ca:Xo,ba:ea,w:ta,Y:aa,x:sa,h:ua,L:la,M:da,t:ha,o:ga,K:va,C:Sa,A:Pa,ea:_a,$:$a,R:Aa,ha:rr,fa:Ra,Z:Na,N:ja,O:Fa,aa:La,B:xa,X:Ua,W:Wa,T:Ja,U:Ya,E:yi,D:si,F:vi,n:wi,a:ni,e:ci,m:ii,k:di,H:mi,v:hi,G:pi,z:Ci,P:Ei,l:li,j:ui,c:ai,p:oi,I:gi,r:bi,i:fi,y:Ti,ga:Ga,S:ti},K=mo(),be=o._free=t=>(be=o._free=K.ka)(t),ur=o._malloc=t=>(ur=o._malloc=K.la)(t),Yr=t=>(Yr=K.na)(t),H=(t,r)=>(H=K.oa)(t,r),et=t=>(et=K.pa)(t),q=()=>(q=K.qa)(),J=t=>(J=K.ra)(t),Gr=t=>(Gr=K.sa)(t),Kr=t=>(Kr=K.ta)(t),Qr=(t,r,a)=>(Qr=K.ua)(t,r,a),Xr=t=>(Xr=K.va)(t);o.dynCall_viijii=(t,r,a,c,h,g,m)=>(o.dynCall_viijii=K.wa)(t,r,a,c,h,g,m);var Zr=o.dynCall_jiiii=(t,r,a,c,h)=>(Zr=o.dynCall_jiiii=K.xa)(t,r,a,c,h);o.dynCall_iiiiij=(t,r,a,c,h,g,m)=>(o.dynCall_iiiiij=K.ya)(t,r,a,c,h,g,m),o.dynCall_iiiiijj=(t,r,a,c,h,g,m,v,C)=>(o.dynCall_iiiiijj=K.za)(t,r,a,c,h,g,m,v,C),o.dynCall_iiiiiijj=(t,r,a,c,h,g,m,v,C,S)=>(o.dynCall_iiiiiijj=K.Aa)(t,r,a,c,h,g,m,v,C,S);function ni(t,r){var a=q();try{return z(t)(r)}catch(c){if(J(a),c!==c+0)throw c;H(1,0)}}function oi(t,r,a,c){var h=q();try{z(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function ai(t,r,a){var c=q();try{z(t)(r,a)}catch(h){if(J(c),h!==h+0)throw h;H(1,0)}}function ii(t,r,a,c){var h=q();try{return z(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function si(t,r,a,c,h){var g=q();try{return z(t)(r,a,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}function ui(t,r){var a=q();try{z(t)(r)}catch(c){if(J(a),c!==c+0)throw c;H(1,0)}}function ci(t,r,a){var c=q();try{return z(t)(r,a)}catch(h){if(J(c),h!==h+0)throw h;H(1,0)}}function li(t){var r=q();try{z(t)()}catch(a){if(J(r),a!==a+0)throw a;H(1,0)}}function di(t,r,a,c,h){var g=q();try{return z(t)(r,a,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}function fi(t,r,a,c,h,g,m,v,C,S,A){var B=q();try{z(t)(r,a,c,h,g,m,v,C,S,A)}catch(k){if(J(B),k!==k+0)throw k;H(1,0)}}function hi(t,r,a,c,h,g,m){var v=q();try{return z(t)(r,a,c,h,g,m)}catch(C){if(J(v),C!==C+0)throw C;H(1,0)}}function gi(t,r,a,c,h){var g=q();try{z(t)(r,a,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}function mi(t,r,a,c,h,g){var m=q();try{return z(t)(r,a,c,h,g)}catch(v){if(J(m),v!==v+0)throw v;H(1,0)}}function pi(t,r,a,c,h,g,m,v){var C=q();try{return z(t)(r,a,c,h,g,m,v)}catch(S){if(J(C),S!==S+0)throw S;H(1,0)}}function vi(t,r,a,c){var h=q();try{return z(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function yi(t,r,a,c){var h=q();try{return z(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function wi(t){var r=q();try{return z(t)()}catch(a){if(J(r),a!==a+0)throw a;H(1,0)}}function bi(t,r,a,c,h,g,m,v){var C=q();try{z(t)(r,a,c,h,g,m,v)}catch(S){if(J(C),S!==S+0)throw S;H(1,0)}}function Ci(t,r,a,c,h,g,m,v,C,S,A,B){var k=q();try{return z(t)(r,a,c,h,g,m,v,C,S,A,B)}catch(j){if(J(k),j!==j+0)throw j;H(1,0)}}function Ti(t,r,a,c,h,g,m,v,C,S,A,B,k,j,W,Y){var V=q();try{z(t)(r,a,c,h,g,m,v,C,S,A,B,k,j,W,Y)}catch(ee){if(J(V),ee!==ee+0)throw ee;H(1,0)}}function Ei(t,r,a,c,h){var g=q();try{return Zr(t,r,a,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}var Ct;De=function t(){Ct||en(),Ct||(De=t)};function en(){if(he>0||(Te(),he>0))return;function t(){Ct||(Ct=!0,o.calledRun=!0,!R&&(ae(),i(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),Ft()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),t()},1)):t()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return en(),n.ready}})();function Xs(e){return Pr(_r,e)}async function Zs(e,n){return Ks(_r,e,n)}async function eu(e,n){return Qs(_r,e,n)}var rt;class pn extends EventTarget{constructor(n={}){var o;super(),_s(this,rt,void 0);try{const i=(o=n==null?void 0:n.formats)==null?void 0:o.filter(s=>s!=="unknown");if((i==null?void 0:i.length)===0)throw new TypeError("Hint option provided, but is empty.");i==null||i.forEach(s=>{if(!Mt.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`)}),$s(this,rt,i!=null?i:[]),Xs().then(s=>{this.dispatchEvent(new CustomEvent("load",{detail:s}))}).catch(s=>{this.dispatchEvent(new CustomEvent("error",{detail:s}))})}catch(i){throw fn(i,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return As.filter(n=>n!=="unknown")}async detect(n){try{const o=await ks(n);if(o===null)return[];let i;try{Yn(o)?i=await Zs(o,{tryHarder:!0,formats:dn(this,rt).map(s=>Mt.get(s))}):i=await eu(o,{tryHarder:!0,formats:dn(this,rt).map(s=>Mt.get(s))})}catch(s){throw console.error(s),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return i.map(s=>{const{topLeft:{x:u,y:d},topRight:{x:f,y:l},bottomLeft:{x:p,y:w},bottomRight:{x:T,y:_}}=s.position,P=Math.min(u,f,p,T),$=Math.min(d,l,w,_),R=Math.max(u,f,p,T),N=Math.max(d,l,w,_);return{boundingBox:new DOMRectReadOnly(P,$,R-P,N-$),rawValue:s.text,format:Ms(s.format),cornerPoints:[{x:u,y:d},{x:f,y:l},{x:T,y:_},{x:p,y:w}]}})}catch(o){throw fn(o,"Failed to execute 'detect' on 'BarcodeDetector'")}}}rt=new WeakMap;const Xn=(e,n,o="error")=>{let i,s;const u=new Promise((d,f)=>{i=d,s=f,e.addEventListener(n,i),e.addEventListener(o,s)});return u.finally(()=>{e.removeEventListener(n,i),e.removeEventListener(o,s)}),u},vn=e=>new Promise(n=>setTimeout(n,e));class Zn extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class tu extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class ru extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let eo;async function nu(e){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new pn({formats:e});const n=await window.BarcodeDetector.getSupportedFormats(),o=e.filter(i=>!n.includes(i));return o.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(o)}. Will use polyfill.`),new pn({formats:e})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:e}))}async function to(e){eo=await nu(e)}const ou=async(e,{detectHandler:n,locateHandler:o,minDelay:i,formats:s})=>{console.debug("[vue-qrcode-reader] start scanning"),await to(s);const u=d=>async f=>{if(e.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:l,contentBefore:p,lastScanHadContent:w}=d;if(f-l<i)window.requestAnimationFrame(u(d));else{const T=await eo.detect(e),_=T.some(R=>!p.includes(R.rawValue));_&&n(T);const P=T.length>0;P&&o(T),!P&&w&&o(T);const $={lastScanned:f,lastScanHadContent:P,contentBefore:_?T.map(R=>R.rawValue):p};window.requestAnimationFrame(u($))}}};u({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var ro={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.compactObject=ao;oe.deprecated=hu;var au=oe.detectBrowser=gu;oe.disableLog=lu;oe.disableWarnings=du;oe.extractVersion=Dt;oe.filterStats=mu;oe.log=fu;oe.walkStats=Ot;oe.wrapPeerConnectionEvent=cu;function iu(e,n,o){return n=su(n),n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function su(e){var n=uu(e,"string");return $e(n)==="symbol"?n:String(n)}function uu(e,n){if($e(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var i=o.call(e,n||"default");if($e(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function $e(e){return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$e(e)}var no=!0,oo=!0;function Dt(e,n,o){var i=e.match(n);return i&&i.length>=o&&parseInt(i[o],10)}function cu(e,n,o){if(e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype,s=i.addEventListener;i.addEventListener=function(d,f){if(d!==n)return s.apply(this,arguments);var l=function(p){var w=o(p);w&&(f.handleEvent?f.handleEvent(w):f(w))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(f,l),s.apply(this,[d,l])};var u=i.removeEventListener;i.removeEventListener=function(d,f){if(d!==n||!this._eventMap||!this._eventMap[n])return u.apply(this,arguments);if(!this._eventMap[n].has(f))return u.apply(this,arguments);var l=this._eventMap[n].get(f);return this._eventMap[n].delete(f),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[d,l])},Object.defineProperty(i,"on"+n,{get:function(){return this["_on"+n]},set:function(d){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),d&&this.addEventListener(n,this["_on"+n]=d)},enumerable:!0,configurable:!0})}}function lu(e){return typeof e!="boolean"?new Error("Argument type: "+$e(e)+". Please use a boolean."):(no=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function du(e){return typeof e!="boolean"?new Error("Argument type: "+$e(e)+". Please use a boolean."):(oo=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function fu(){if((typeof window>"u"?"undefined":$e(window))==="object"){if(no)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function hu(e,n){oo&&console.warn(e+" is deprecated, please use "+n+" instead.")}function gu(e){var n={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return n.browser="Not a browser.",n;var o=e.navigator;if(o.mozGetUserMedia)n.browser="firefox",n.version=Dt(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)n.browser="chrome",n.version=Dt(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))n.browser="safari",n.version=Dt(o.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return n.browser="Not a supported browser.",n;return n}function yn(e){return Object.prototype.toString.call(e)==="[object Object]"}function ao(e){return yn(e)?Object.keys(e).reduce(function(n,o){var i=yn(e[o]),s=i?ao(e[o]):e[o],u=i&&!Object.keys(s).length;return s===void 0||u?n:Object.assign(n,iu({},o,s))},{}):e}function Ot(e,n,o){!n||o.has(n.id)||(o.set(n.id,n),Object.keys(n).forEach(function(i){i.endsWith("Id")?Ot(e,e.get(n[i]),o):i.endsWith("Ids")&&n[i].forEach(function(s){Ot(e,e.get(s),o)})}))}function mu(e,n,o){var i=o?"outbound-rtp":"inbound-rtp",s=new Map;if(n===null)return s;var u=[];return e.forEach(function(d){d.type==="track"&&d.trackIdentifier===n.id&&u.push(d)}),u.forEach(function(d){e.forEach(function(f){f.type===i&&f.trackId===d.id&&Ot(e,f,s)})}),s}Object.defineProperty(ro,"__esModule",{value:!0});var pu=ro.shimGetUserMedia=wu,vu=yu(oe);function io(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(io=function(i){return i?o:n})(e)}function yu(e,n){if(e&&e.__esModule)return e;if(e===null||Pe(e)!=="object"&&typeof e!="function")return{default:e};var o=io(n);if(o&&o.has(e))return o.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(i,u,d):i[u]=e[u]}return i.default=e,o&&o.set(e,i),i}function Pe(e){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pe(e)}var wn=vu.log;function wu(e,n){var o=e&&e.navigator;if(o.mediaDevices){var i=function(l){if(Pe(l)!=="object"||l.mandatory||l.optional)return l;var p={};return Object.keys(l).forEach(function(w){if(!(w==="require"||w==="advanced"||w==="mediaSource")){var T=Pe(l[w])==="object"?l[w]:{ideal:l[w]};T.exact!==void 0&&typeof T.exact=="number"&&(T.min=T.max=T.exact);var _=function($,R){return $?$+R.charAt(0).toUpperCase()+R.slice(1):R==="deviceId"?"sourceId":R};if(T.ideal!==void 0){p.optional=p.optional||[];var P={};typeof T.ideal=="number"?(P[_("min",w)]=T.ideal,p.optional.push(P),P={},P[_("max",w)]=T.ideal,p.optional.push(P)):(P[_("",w)]=T.ideal,p.optional.push(P))}T.exact!==void 0&&typeof T.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[_("",w)]=T.exact):["min","max"].forEach(function($){T[$]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[_($,w)]=T[$])})}}),l.advanced&&(p.optional=(p.optional||[]).concat(l.advanced)),p},s=function(l,p){if(n.version>=61)return p(l);if(l=JSON.parse(JSON.stringify(l)),l&&Pe(l.audio)==="object"){var w=function($,R,N){R in $&&!(N in $)&&($[N]=$[R],delete $[R])};l=JSON.parse(JSON.stringify(l)),w(l.audio,"autoGainControl","googAutoGainControl"),w(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=i(l.audio)}if(l&&Pe(l.video)==="object"){var T=l.video.facingMode;T=T&&(Pe(T)==="object"?T:{ideal:T});var _=n.version<66;if(T&&(T.exact==="user"||T.exact==="environment"||T.ideal==="user"||T.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!_)){delete l.video.facingMode;var P;if(T.exact==="environment"||T.ideal==="environment"?P=["back","rear"]:(T.exact==="user"||T.ideal==="user")&&(P=["front"]),P)return o.mediaDevices.enumerateDevices().then(function($){$=$.filter(function(N){return N.kind==="videoinput"});var R=$.find(function(N){return P.some(function(D){return N.label.toLowerCase().includes(D)})});return!R&&$.length&&P.includes("back")&&(R=$[$.length-1]),R&&(l.video.deviceId=T.exact?{exact:R.deviceId}:{ideal:R.deviceId}),l.video=i(l.video),wn("chrome: "+JSON.stringify(l)),p(l)})}l.video=i(l.video)}return wn("chrome: "+JSON.stringify(l)),p(l)},u=function(l){return n.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},d=function(l,p,w){s(l,function(T){o.webkitGetUserMedia(T,p,function(_){w&&w(u(_))})})};if(o.getUserMedia=d.bind(o),o.mediaDevices.getUserMedia){var f=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(l){return s(l,function(p){return f(p).then(function(w){if(p.audio&&!w.getAudioTracks().length||p.video&&!w.getVideoTracks().length)throw w.getTracks().forEach(function(T){T.stop()}),new DOMException("","NotFoundError");return w},function(w){return Promise.reject(u(w))})})}}}}var so={};Object.defineProperty(so,"__esModule",{value:!0});var bu=so.shimGetUserMedia=Eu,Cu=Tu(oe);function uo(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(uo=function(i){return i?o:n})(e)}function Tu(e,n){if(e&&e.__esModule)return e;if(e===null||xe(e)!=="object"&&typeof e!="function")return{default:e};var o=uo(n);if(o&&o.has(e))return o.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(i,u,d):i[u]=e[u]}return i.default=e,o&&o.set(e,i),i}function xe(e){return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xe(e)}function Eu(e,n){var o=e&&e.navigator,i=e&&e.MediaStreamTrack;if(o.getUserMedia=function(l,p,w){Cu.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(l).then(p,w)},!(n.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){var s=function(l,p,w){p in l&&!(w in l)&&(l[w]=l[p],delete l[p])},u=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(l){return xe(l)==="object"&&xe(l.audio)==="object"&&(l=JSON.parse(JSON.stringify(l)),s(l.audio,"autoGainControl","mozAutoGainControl"),s(l.audio,"noiseSuppression","mozNoiseSuppression")),u(l)},i&&i.prototype.getSettings){var d=i.prototype.getSettings;i.prototype.getSettings=function(){var l=d.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(i&&i.prototype.applyConstraints){var f=i.prototype.applyConstraints;i.prototype.applyConstraints=function(l){return this.kind==="audio"&&xe(l)==="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[l])}}}}var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.shimAudioContext=Ou;ve.shimCallbacksAPI=Au;ve.shimConstraints=fo;ve.shimCreateOfferLegacy=Iu;var Su=ve.shimGetUserMedia=Mu;ve.shimLocalStreamsAPI=_u;ve.shimRTCIceServerUrls=Du;ve.shimRemoteStreamsAPI=$u;ve.shimTrackEventTransceiver=Ru;var co=Pu(oe);function lo(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(lo=function(i){return i?o:n})(e)}function Pu(e,n){if(e&&e.__esModule)return e;if(e===null||Ae(e)!=="object"&&typeof e!="function")return{default:e};var o=lo(n);if(o&&o.has(e))return o.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(i,u,d):i[u]=e[u]}return i.default=e,o&&o.set(e,i),i}function Ae(e){return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ae(e)}function _u(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(o){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(function(s){return n.call(i,s,o)}),o.getVideoTracks().forEach(function(s){return n.call(i,s,o)})},e.RTCPeerConnection.prototype.addTrack=function(o){for(var i=this,s=arguments.length,u=new Array(s>1?s-1:0),d=1;d<s;d++)u[d-1]=arguments[d];return u&&u.forEach(function(f){i._localStreams?i._localStreams.includes(f)||i._localStreams.push(f):i._localStreams=[f]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(o){var i=this;this._localStreams||(this._localStreams=[]);var s=this._localStreams.indexOf(o);if(s!==-1){this._localStreams.splice(s,1);var u=o.getTracks();this.getSenders().forEach(function(d){u.includes(d.track)&&i.removeTrack(d)})}})}}function $u(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(o){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(function(u){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(u)){i._remoteStreams.push(u);var d=new Event("addstream");d.stream=u,i.dispatchEvent(d)}})})}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(s){if(o._remoteStreams||(o._remoteStreams=[]),!(o._remoteStreams.indexOf(s)>=0)){o._remoteStreams.push(s);var u=new Event("addstream");u.stream=s,o.dispatchEvent(u)}})}),n.apply(o,arguments)}}}function Au(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)){var n=e.RTCPeerConnection.prototype,o=n.createOffer,i=n.createAnswer,s=n.setLocalDescription,u=n.setRemoteDescription,d=n.addIceCandidate;n.createOffer=function(l,p){var w=arguments.length>=2?arguments[2]:arguments[0],T=o.apply(this,[w]);return p?(T.then(l,p),Promise.resolve()):T},n.createAnswer=function(l,p){var w=arguments.length>=2?arguments[2]:arguments[0],T=i.apply(this,[w]);return p?(T.then(l,p),Promise.resolve()):T};var f=function(l,p,w){var T=s.apply(this,[l]);return w?(T.then(p,w),Promise.resolve()):T};n.setLocalDescription=f,f=function(l,p,w){var T=u.apply(this,[l]);return w?(T.then(p,w),Promise.resolve()):T},n.setRemoteDescription=f,f=function(l,p,w){var T=d.apply(this,[l]);return w?(T.then(p,w),Promise.resolve()):T},n.addIceCandidate=f}}function Mu(e){var n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){var o=n.mediaDevices,i=o.getUserMedia.bind(o);n.mediaDevices.getUserMedia=function(s){return i(fo(s))}}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=function(s,u,d){n.mediaDevices.getUserMedia(s).then(u,d)}.bind(n))}function fo(e){return e&&e.video!==void 0?Object.assign({},e,{video:co.compactObject(e.video)}):e}function Du(e){if(e.RTCPeerConnection){var n=e.RTCPeerConnection;e.RTCPeerConnection=function(o,i){if(o&&o.iceServers){for(var s=[],u=0;u<o.iceServers.length;u++){var d=o.iceServers[u];d.urls===void 0&&d.url?(co.deprecated("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,s.push(d)):s.push(o.iceServers[u])}o.iceServers=s}return new n(o,i)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}}function Ru(e){Ae(e)==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Iu(e){var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);var i=this.getTransceivers().find(function(u){return u.receiver.track.kind==="audio"});o.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):o.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);var s=this.getTransceivers().find(function(u){return u.receiver.track.kind==="video"});o.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):o.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function Ou(e){Ae(e)!=="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Bu=e=>{let n=!1,o;return(...i)=>(n||(o=e(i),n=!0),o)};function Ce(e,n){if(e===!1)throw new Error(n!=null?n:"assertion failure")}function bn(e){throw new Error("this code should be unreachable")}const ku=Bu(()=>{const e=au(window);switch(e.browser){case"chrome":pu(window,e);break;case"firefox":bu(window,e);break;case"safari":Su(window,e);break;default:throw new Zn}});let Ue=Promise.resolve({type:"stop",data:{}});async function Cn(e,n,o){var i,s,u;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(n)),window.isSecureContext!==!0)throw new tu;if(((i=navigator==null?void 0:navigator.mediaDevices)==null?void 0:i.getUserMedia)===void 0)throw new Zn;ku(),console.debug("[vue-qrcode-reader] calling getUserMedia");const d=await navigator.mediaDevices.getUserMedia({audio:!1,video:n});e.srcObject!==void 0?e.srcObject=d:e.mozSrcObject!==void 0?e.mozSrcObject=d:window.URL.createObjectURL?e.src=window.URL.createObjectURL(d):window.webkitURL?e.src=window.webkitURL.createObjectURL(d):e.src=d.id,e.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([Xn(e,"loadeddata"),vn(6e3).then(()=>{throw new ru})]),console.debug("[vue-qrcode-reader] video element loaded"),await vn(500);const[f]=d.getVideoTracks(),l=(u=(s=f==null?void 0:f.getCapabilities)==null?void 0:s.call(f))!=null?u:{};let p=!1;return o&&l.torch&&(await f.applyConstraints({advanced:[{torch:!0}]}),p=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:e,stream:d,capabilities:l,constraints:n,isTorchOn:p}}}async function Nu(e,{constraints:n,torch:o,restart:i=!1}){Ue=Ue.then(u=>{if(u.type==="start"){const{data:{videoEl:d,stream:f,constraints:l,isTorchOn:p}}=u;return!i&&e===d&&n===l&&o===p?u:ho(d,f,p).then(()=>Cn(e,n,o))}else if(u.type==="stop"||u.type==="failed")return Cn(e,n,o);bn()}).catch(u=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${u}"`),{type:"failed",error:u}));const s=await Ue;if(s.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(s.type==="failed")throw s.error;if(s.type==="start")return s.data.capabilities;bn()}async function ho(e,n,o){console.debug("[vue-qrcode-reader] stopping camera"),e.src="",e.srcObject=null,e.load(),await Xn(e,"error");for(const i of n.getTracks())o!=null||await i.applyConstraints({advanced:[{torch:!1}]}),n.removeTrack(i),i.stop();return{type:"stop",data:{}}}async function $t(){if(Ue=Ue.then(e=>{if(e.type==="stop"||e.type==="failed")return e;const{data:{videoEl:n,stream:o,isTorchOn:i}}=e;return ho(n,o,i)}),(await Ue).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const ju=_i({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(e,{emit:n}){const o=e,i=n,s=ue(o.constraints),u=ue(o.formats);Le(()=>o.constraints,(y,b)=>{JSON.stringify(y)!==JSON.stringify(b)&&(s.value=y)},{deep:!0}),Le(()=>o.formats,(y,b)=>{JSON.stringify(y)!==JSON.stringify(b)&&(u.value=y)},{deep:!0});const d=ue(),f=ue(),l=ue(),p=ue(!1),w=ue(!1);$i(()=>{w.value=!0}),Ai(()=>{$t()});const T=cr(()=>({torch:o.torch,constraints:s.value,shouldStream:w.value&&!o.paused}));Le(T,async y=>{const b=l.value;Ce(b!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const M=d.value;Ce(M!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const L=M.getContext("2d");if(Ce(L!==null,"if cavnas is defined, canvas 2d context should also be non-null"),y.shouldStream){$t(),p.value=!1;try{const U=await Nu(b,y);w.value?(p.value=!0,i("camera-on",U)):await $t()}catch(U){i("error",U)}}else M.width=b.videoWidth,M.height=b.videoHeight,L.drawImage(b,0,0,b.videoWidth,b.videoHeight),$t(),p.value=!1,i("camera-off")},{deep:!0}),Le(u,async y=>{w.value&&await to(y)});const _=cr(()=>T.value.shouldStream&&p.value);Le(_,y=>{if(y){Ce(d.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),P(d.value),Ce(f.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),P(f.value);const b=()=>o.track===void 0?500:40;Ce(l.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),ou(l.value,{detectHandler:M=>i("detect",M),formats:u.value,locateHandler:$,minDelay:b()})}});const P=y=>{const b=y.getContext("2d");Ce(b!==null,"canvas 2d context should always be non-null"),b.clearRect(0,0,y.width,y.height)},$=y=>{const b=f.value;Ce(b!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const M=l.value;if(Ce(M!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),y.length===0||o.track===void 0)P(b);else{const L=M.offsetWidth,U=M.offsetHeight,X=M.videoWidth,ne=M.videoHeight,re=Math.max(L/X,U/ne),de=X*re,Te=ne*re,ae=de/X,Ft=Te/ne,Lt=(L-de)/2,xt=(U-Te)/2,Je=({x:Ee,y:ie})=>({x:Math.floor(Ee*ae),y:Math.floor(ie*Ft)}),he=({x:Ee,y:ie})=>({x:Math.floor(Ee+Lt),y:Math.floor(ie+xt)}),De=y.map(Ee=>{const{boundingBox:ie,cornerPoints:Vt}=Ee,{x:st,y:Se}=he(Je({x:ie.x,y:ie.y})),{x:ut,y:Ht}=Je({x:ie.width,y:ie.height});return{...Ee,cornerPoints:Vt.map(ct=>he(Je(ct))),boundingBox:DOMRectReadOnly.fromRect({x:st,y:Se,width:ut,height:Ht})}});b.width=M.offsetWidth,b.height=M.offsetHeight;const Ut=b.getContext("2d");o.track(De,Ut)}},R={width:"100%",height:"100%",position:"relative","z-index":"0"},N={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},D={width:"100%",height:"100%","object-fit":"cover"},I=cr(()=>_.value?D:{...D,visibility:"hidden",position:"absolute"});return(y,b)=>(At(),Tn("div",{style:R},[tt("video",{ref_key:"videoRef",ref:l,style:Mi(I.value),autoplay:"",muted:"",playsinline:""},null,4),Di(tt("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:d,style:D},null,512),[[Ri,!_.value]]),tt("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:f,style:N},null,512),tt("div",{style:N},[Ii(y.$slots,"default")])]))}}),Fu=["src"],zu={__name:"FirebaseSettingsPage",setup(e){const n=Oi(),o=Pi(),i=ki(),s=ue(!1),u=ue(null),d=ue(""),f=ue(!1),l=ue(null),p=ue(""),w=()=>{f.value=!0,l.value=null},T=I=>{l.value=I,f.value=!1},_=I=>{I.catch(y=>{f.value=!1,o.notify({message:y.message||y})})},P=()=>{if(!nn.isEmpty(n.fbConfig)){const I=JSON.stringify(n.fbConfig);at.toDataURL(I,(y,b)=>{y?(o.notify({message:y.message||y}),console.log("error",y)):p.value=b})}};Le(()=>n.fbConfig,()=>{P()},{immediate:!0});const $=()=>{nn.isEmpty(n.fbConfig)||(d.value=JSON.stringify(n.fbConfig)),Ni(()=>{var I,y;(I=u.value)==null||I.focus(),(y=u.value)==null||y.select()})},R=()=>{const I={...n.fbConfig};try{const y=JSON.parse(d.value);n.fbConfig.apiKey=y==null?void 0:y.apiKey,n.fbConfig.authDomain=y==null?void 0:y.authDomain,n.fbConfig.projectId=y==null?void 0:y.projectId,n.fbConfig.storageBucket=y==null?void 0:y.storageBucket,n.fbConfig.messagingSenderId=y==null?void 0:y.messagingSenderId,n.fbConfig.appId=y==null?void 0:y.appId}catch{n.fbConfig=I}N()},N=()=>{s.value=!1},D=async()=>{try{n.initFb(),i.push({name:"LoginPage"})}catch(I){o.notify({message:I.message||I})}};return(I,y)=>(At(),Tn(Bi,null,[x(Si,{class:"flex flex-center"},{default:te(()=>[x(Et,{class:"q-pa-md",style:{width:"98%"}},{default:te(()=>[x(je,{class:"text-center",style:{"font-size":"28px"}},{default:te(()=>y[11]||(y[11]=[lr(" Firebase Settings ")])),_:1}),x(Li,{onSubmit:ji(D,["prevent"])},{default:te(()=>[x(je,null,{default:te(()=>[x(Oe,{modelValue:se(n).fbConfig.apiKey,"onUpdate:modelValue":y[0]||(y[0]=b=>se(n).fbConfig.apiKey=b),label:"Api Key",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.authDomain,"onUpdate:modelValue":y[1]||(y[1]=b=>se(n).fbConfig.authDomain=b),label:"Auth Domain",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.projectId,"onUpdate:modelValue":y[2]||(y[2]=b=>se(n).fbConfig.projectId=b),label:"Project Id",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.storageBucket,"onUpdate:modelValue":y[3]||(y[3]=b=>se(n).fbConfig.storageBucket=b),label:"Storage Bucket",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.messagingSenderId,"onUpdate:modelValue":y[4]||(y[4]=b=>se(n).fbConfig.messagingSenderId=b),label:"Message Sender Id",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.appId,"onUpdate:modelValue":y[5]||(y[5]=b=>se(n).fbConfig.appId=b),label:"App Id",required:"",outlined:""},null,8,["modelValue"])]),_:1}),x(St,null,{default:te(()=>[x(Fe,{label:"Submit",color:"primary",type:"submit",class:"full-width"})]),_:1})]),_:1}),x(St,null,{default:te(()=>[x(Fe,{label:"Import/Export via String",color:"secondary",class:"full-width q-mb-md",onClick:y[6]||(y[6]=b=>s.value=!s.value)}),f.value?an("",!0):(At(),on(Fe,{key:0,label:"Import via QR code",color:"secondary",class:"full-width",onClick:w}))]),_:1})]),_:1}),p.value?(At(),on(Et,{key:0,class:"q-my-md",style:{width:"100%",height:"auto"}},{default:te(()=>[x(je,{class:"text-center",style:{"font-size":"28px"}},{default:te(()=>y[12]||(y[12]=[lr(" Share with the QR Code ")])),_:1}),x(je,null,{default:te(()=>[tt("img",{src:p.value,alt:"QR Code",style:{width:"100%",height:"auto"}},null,8,Fu)]),_:1})]),_:1})):an("",!0),lr(" aa "+Fi(l.value),1)]),_:1}),x(sn,{modelValue:s.value,"onUpdate:modelValue":y[8]||(y[8]=b=>s.value=b),persistent:"",onBeforeShow:$},{default:te(()=>[x(Et,null,{default:te(()=>[x(je,null,{default:te(()=>[x(Oe,{ref_key:"inputRef",ref:u,modelValue:d.value,"onUpdate:modelValue":y[7]||(y[7]=b=>d.value=b),type:"textarea",label:"Config by String",autoresize:!0},null,8,["modelValue"])]),_:1}),x(St,{align:"center"},{default:te(()=>[x(Fe,{icon:"close",color:"red",onClick:N}),x(Fe,{icon:"check",color:"primary",onClick:R})]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(sn,{modelValue:f.value,"onUpdate:modelValue":y[10]||(y[10]=b=>f.value=b),persistent:"",onBeforeShow:w},{default:te(()=>[x(Et,null,{default:te(()=>[x(je,null,{default:te(()=>[x(se(ju),{onDecode:T,onInit:_,class:"scanner"})]),_:1}),x(St,{align:"center"},{default:te(()=>[x(Fe,{label:"Stop Scanning",class:"q-mt-md",onClick:y[9]||(y[9]=b=>f.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{zu as default};
