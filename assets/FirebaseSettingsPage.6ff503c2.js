import{Q as Sa,u as Pa,c as Et,a as je,b as Oe}from"./use-quasar.d30f86b9.js";import{aI as _a,r as le,w as Le,o as $a,q as Aa,a as cr,u as At,C as Tn,D as tt,aq as Ma,ad as Ra,aB as Da,aJ as Ia,F as Oa,y as x,x as te,I as Ba,J as ka,aH as rn,z as Na,E as nn,aG as ja,G as se,K as Fe,v as on,H as an}from"./index.f3a519c8.js";import{Q as St}from"./QCardActions.9a422cb1.js";import{Q as Fa}from"./QForm.22f3d312.js";import{Q as sn}from"./QDialog.9128e3ad.js";import"./scroll.80b17db8.js";var it={},La=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},En={},ue={};let wr;const xa=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ue.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};ue.getSymbolTotalCodewords=function(n){return xa[n]};ue.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};ue.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');wr=n};ue.isKanjiModeEnabled=function(){return typeof wr!="undefined"};ue.toSJIS=function(n){return wr(n)};var Bt={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+o)}}e.isValid=function(a){return a&&typeof a.bit!="undefined"&&a.bit>=0&&a.bit<4},e.from=function(a,s){if(e.isValid(a))return a;try{return n(a)}catch{return s}}})(Bt);function Sn(){this.buffer=[],this.length=0}Sn.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let o=0;o<n;o++)this.putBit((e>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var Ua=Sn;function at(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}at.prototype.set=function(e,n,o,a){const s=e*this.size+n;this.data[s]=o,a&&(this.reservedBit[s]=!0)};at.prototype.get=function(e,n){return this.data[e*this.size+n]};at.prototype.xor=function(e,n,o){this.data[e*this.size+n]^=o};at.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};var Va=at,Pn={};(function(e){const n=ue.getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const s=Math.floor(a/7)+2,u=n(a),d=u===145?26:Math.ceil((u-13)/(2*s-2))*2,f=[u-7];for(let l=1;l<s-1;l++)f[l]=f[l-1]-d;return f.push(6),f.reverse()},e.getPositions=function(a){const s=[],u=e.getRowColCoords(a),d=u.length;for(let f=0;f<d;f++)for(let l=0;l<d;l++)f===0&&l===0||f===0&&l===d-1||f===d-1&&l===0||s.push([u[f],u[l]]);return s}})(Pn);var _n={};const Ha=ue.getSymbolSize,un=7;_n.getPositions=function(n){const o=Ha(n);return[[0,0],[o-un,0],[0,o-un]]};var $n={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const u=s.size;let d=0,f=0,l=0,p=null,y=null;for(let C=0;C<u;C++){f=l=0,p=y=null;for(let _=0;_<u;_++){let P=s.get(C,_);P===p?f++:(f>=5&&(d+=n.N1+(f-5)),p=P,f=1),P=s.get(_,C),P===y?l++:(l>=5&&(d+=n.N1+(l-5)),y=P,l=1)}f>=5&&(d+=n.N1+(f-5)),l>=5&&(d+=n.N1+(l-5))}return d},e.getPenaltyN2=function(s){const u=s.size;let d=0;for(let f=0;f<u-1;f++)for(let l=0;l<u-1;l++){const p=s.get(f,l)+s.get(f,l+1)+s.get(f+1,l)+s.get(f+1,l+1);(p===4||p===0)&&d++}return d*n.N2},e.getPenaltyN3=function(s){const u=s.size;let d=0,f=0,l=0;for(let p=0;p<u;p++){f=l=0;for(let y=0;y<u;y++)f=f<<1&2047|s.get(p,y),y>=10&&(f===1488||f===93)&&d++,l=l<<1&2047|s.get(y,p),y>=10&&(l===1488||l===93)&&d++}return d*n.N3},e.getPenaltyN4=function(s){let u=0;const d=s.data.length;for(let l=0;l<d;l++)u+=s.data[l];return Math.abs(Math.ceil(u*100/d/5)-10)*n.N4};function o(a,s,u){switch(a){case e.Patterns.PATTERN000:return(s+u)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return u%3===0;case e.Patterns.PATTERN011:return(s+u)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(u/3))%2===0;case e.Patterns.PATTERN101:return s*u%2+s*u%3===0;case e.Patterns.PATTERN110:return(s*u%2+s*u%3)%2===0;case e.Patterns.PATTERN111:return(s*u%3+(s+u)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(s,u){const d=u.size;for(let f=0;f<d;f++)for(let l=0;l<d;l++)u.isReserved(l,f)||u.xor(l,f,o(s,l,f))},e.getBestMask=function(s,u){const d=Object.keys(e.Patterns).length;let f=0,l=1/0;for(let p=0;p<d;p++){u(p),e.applyMask(p,s);const y=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(p,s),y<l&&(l=y,f=p)}return f}})($n);var kt={};const _e=Bt,Pt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],_t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];kt.getBlocksCount=function(n,o){switch(o){case _e.L:return Pt[(n-1)*4+0];case _e.M:return Pt[(n-1)*4+1];case _e.Q:return Pt[(n-1)*4+2];case _e.H:return Pt[(n-1)*4+3];default:return}};kt.getTotalCodewordsCount=function(n,o){switch(o){case _e.L:return _t[(n-1)*4+0];case _e.M:return _t[(n-1)*4+1];case _e.Q:return _t[(n-1)*4+2];case _e.H:return _t[(n-1)*4+3];default:return}};var An={},Nt={};const nt=new Uint8Array(512),Dt=new Uint8Array(256);(function(){let n=1;for(let o=0;o<255;o++)nt[o]=n,Dt[n]=o,n<<=1,n&256&&(n^=285);for(let o=255;o<512;o++)nt[o]=nt[o-255]})();Nt.log=function(n){if(n<1)throw new Error("log("+n+")");return Dt[n]};Nt.exp=function(n){return nt[n]};Nt.mul=function(n,o){return n===0||o===0?0:nt[Dt[n]+Dt[o]]};(function(e){const n=Nt;e.mul=function(a,s){const u=new Uint8Array(a.length+s.length-1);for(let d=0;d<a.length;d++)for(let f=0;f<s.length;f++)u[d+f]^=n.mul(a[d],s[f]);return u},e.mod=function(a,s){let u=new Uint8Array(a);for(;u.length-s.length>=0;){const d=u[0];for(let l=0;l<s.length;l++)u[l]^=n.mul(s[l],d);let f=0;for(;f<u.length&&u[f]===0;)f++;u=u.slice(f)}return u},e.generateECPolynomial=function(a){let s=new Uint8Array([1]);for(let u=0;u<a;u++)s=e.mul(s,new Uint8Array([1,n.exp(u)]));return s}})(An);const Mn=An;function br(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}br.prototype.initialize=function(n){this.degree=n,this.genPoly=Mn.generateECPolynomial(this.degree)};br.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(n.length+this.degree);o.set(n);const a=Mn.mod(o,this.genPoly),s=this.degree-a.length;if(s>0){const u=new Uint8Array(this.degree);return u.set(a,s),u}return a};var Wa=br,Rn={},Me={},Cr={};Cr.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var pe={};const Dn="[0-9]+",za="[A-Z $%*+\\-./:]+";let ot="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ot=ot.replace(/u/g,"\\u");const qa="(?:(?![A-Z0-9 $%*+\\-./:]|"+ot+`)(?:.|[\r
]))+`;pe.KANJI=new RegExp(ot,"g");pe.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");pe.BYTE=new RegExp(qa,"g");pe.NUMERIC=new RegExp(Dn,"g");pe.ALPHANUMERIC=new RegExp(za,"g");const Ja=new RegExp("^"+ot+"$"),Ya=new RegExp("^"+Dn+"$"),Ga=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");pe.testKanji=function(n){return Ja.test(n)};pe.testNumeric=function(n){return Ya.test(n)};pe.testAlphanumeric=function(n){return Ga.test(n)};(function(e){const n=Cr,o=pe;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(u,d){if(!u.ccBits)throw new Error("Invalid mode: "+u);if(!n.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?u.ccBits[0]:d<27?u.ccBits[1]:u.ccBits[2]},e.getBestModeForData=function(u){return o.testNumeric(u)?e.NUMERIC:o.testAlphanumeric(u)?e.ALPHANUMERIC:o.testKanji(u)?e.KANJI:e.BYTE},e.toString=function(u){if(u&&u.id)return u.id;throw new Error("Invalid mode")},e.isValid=function(u){return u&&u.bit&&u.ccBits};function a(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(u,d){if(e.isValid(u))return u;try{return a(u)}catch{return d}}})(Me);(function(e){const n=ue,o=kt,a=Bt,s=Me,u=Cr,d=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,f=n.getBCHDigit(d);function l(_,P,$){for(let I=1;I<=40;I++)if(P<=e.getCapacity(I,$,_))return I}function p(_,P){return s.getCharCountIndicator(_,P)+4}function y(_,P){let $=0;return _.forEach(function(I){$+=p(I.mode,P)+I.getBitsLength()}),$}function C(_,P){for(let $=1;$<=40;$++)if(y(_,$)<=e.getCapacity($,P,s.MIXED))return $}e.from=function(P,$){return u.isValid(P)?parseInt(P,10):$},e.getCapacity=function(P,$,I){if(!u.isValid(P))throw new Error("Invalid QR Code version");typeof I=="undefined"&&(I=s.BYTE);const B=n.getSymbolTotalCodewords(P),w=o.getTotalCodewordsCount(P,$),R=(B-w)*8;if(I===s.MIXED)return R;const A=R-p(I,P);switch(I){case s.NUMERIC:return Math.floor(A/10*3);case s.ALPHANUMERIC:return Math.floor(A/11*2);case s.KANJI:return Math.floor(A/13);case s.BYTE:default:return Math.floor(A/8)}},e.getBestVersionForData=function(P,$){let I;const B=a.from($,a.M);if(Array.isArray(P)){if(P.length>1)return C(P,B);if(P.length===0)return 1;I=P[0]}else I=P;return l(I.mode,I.getLength(),B)},e.getEncodedBits=function(P){if(!u.isValid(P)||P<7)throw new Error("Invalid QR Code version");let $=P<<12;for(;n.getBCHDigit($)-f>=0;)$^=d<<n.getBCHDigit($)-f;return P<<12|$}})(Rn);var In={};const mr=ue,On=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Qa=1<<14|1<<12|1<<10|1<<4|1<<1,cn=mr.getBCHDigit(On);In.getEncodedBits=function(n,o){const a=n.bit<<3|o;let s=a<<10;for(;mr.getBCHDigit(s)-cn>=0;)s^=On<<mr.getBCHDigit(s)-cn;return(a<<10|s)^Qa};var Bn={};const Ka=Me;function Ve(e){this.mode=Ka.NUMERIC,this.data=e.toString()}Ve.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};Ve.prototype.getLength=function(){return this.data.length};Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)};Ve.prototype.write=function(n){let o,a,s;for(o=0;o+3<=this.data.length;o+=3)a=this.data.substr(o,3),s=parseInt(a,10),n.put(s,10);const u=this.data.length-o;u>0&&(a=this.data.substr(o),s=parseInt(a,10),n.put(s,u*3+1))};var Xa=Ve;const Za=Me,lr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function He(e){this.mode=Za.ALPHANUMERIC,this.data=e}He.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};He.prototype.getLength=function(){return this.data.length};He.prototype.getBitsLength=function(){return He.getBitsLength(this.data.length)};He.prototype.write=function(n){let o;for(o=0;o+2<=this.data.length;o+=2){let a=lr.indexOf(this.data[o])*45;a+=lr.indexOf(this.data[o+1]),n.put(a,11)}this.data.length%2&&n.put(lr.indexOf(this.data[o]),6)};var es=He;const ts=Me;function We(e){this.mode=ts.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}We.getBitsLength=function(n){return n*8};We.prototype.getLength=function(){return this.data.length};We.prototype.getBitsLength=function(){return We.getBitsLength(this.data.length)};We.prototype.write=function(e){for(let n=0,o=this.data.length;n<o;n++)e.put(this.data[n],8)};var rs=We;const ns=Me,os=ue;function ze(e){this.mode=ns.KANJI,this.data=e}ze.getBitsLength=function(n){return n*13};ze.prototype.getLength=function(){return this.data.length};ze.prototype.getBitsLength=function(){return ze.getBitsLength(this.data.length)};ze.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let o=os.toSJIS(this.data[n]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),e.put(o,13)}};var is=ze,kn={exports:{}};(function(e){var n={single_source_shortest_paths:function(o,a,s){var u={},d={};d[a]=0;var f=n.PriorityQueue.make();f.push(a,0);for(var l,p,y,C,_,P,$,I,B;!f.empty();){l=f.pop(),p=l.value,C=l.cost,_=o[p]||{};for(y in _)_.hasOwnProperty(y)&&(P=_[y],$=C+P,I=d[y],B=typeof d[y]=="undefined",(B||I>$)&&(d[y]=$,f.push(y,$),u[y]=p))}if(typeof s!="undefined"&&typeof d[s]=="undefined"){var w=["Could not find a path from ",a," to ",s,"."].join("");throw new Error(w)}return u},extract_shortest_path_from_predecessor_list:function(o,a){for(var s=[],u=a;u;)s.push(u),o[u],u=o[u];return s.reverse(),s},find_path:function(o,a,s){var u=n.single_source_shortest_paths(o,a,s);return n.extract_shortest_path_from_predecessor_list(u,s)},PriorityQueue:{make:function(o){var a=n.PriorityQueue,s={},u;o=o||{};for(u in a)a.hasOwnProperty(u)&&(s[u]=a[u]);return s.queue=[],s.sorter=o.sorter||a.default_sorter,s},default_sorter:function(o,a){return o.cost-a.cost},push:function(o,a){var s={value:o,cost:a};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=n})(kn);(function(e){const n=Me,o=Xa,a=es,s=rs,u=is,d=pe,f=ue,l=kn.exports;function p(w){return unescape(encodeURIComponent(w)).length}function y(w,R,A){const E=[];let D;for(;(D=w.exec(A))!==null;)E.push({data:D[0],index:D.index,mode:R,length:D[0].length});return E}function C(w){const R=y(d.NUMERIC,n.NUMERIC,w),A=y(d.ALPHANUMERIC,n.ALPHANUMERIC,w);let E,D;return f.isKanjiModeEnabled()?(E=y(d.BYTE,n.BYTE,w),D=y(d.KANJI,n.KANJI,w)):(E=y(d.BYTE_KANJI,n.BYTE,w),D=[]),R.concat(A,E,D).sort(function(U,X){return U.index-X.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function _(w,R){switch(R){case n.NUMERIC:return o.getBitsLength(w);case n.ALPHANUMERIC:return a.getBitsLength(w);case n.KANJI:return u.getBitsLength(w);case n.BYTE:return s.getBitsLength(w)}}function P(w){return w.reduce(function(R,A){const E=R.length-1>=0?R[R.length-1]:null;return E&&E.mode===A.mode?(R[R.length-1].data+=A.data,R):(R.push(A),R)},[])}function $(w){const R=[];for(let A=0;A<w.length;A++){const E=w[A];switch(E.mode){case n.NUMERIC:R.push([E,{data:E.data,mode:n.ALPHANUMERIC,length:E.length},{data:E.data,mode:n.BYTE,length:E.length}]);break;case n.ALPHANUMERIC:R.push([E,{data:E.data,mode:n.BYTE,length:E.length}]);break;case n.KANJI:R.push([E,{data:E.data,mode:n.BYTE,length:p(E.data)}]);break;case n.BYTE:R.push([{data:E.data,mode:n.BYTE,length:p(E.data)}])}}return R}function I(w,R){const A={},E={start:{}};let D=["start"];for(let L=0;L<w.length;L++){const U=w[L],X=[];for(let ne=0;ne<U.length;ne++){const re=U[ne],de=""+L+ne;X.push(de),A[de]={node:re,lastCount:0},E[de]={};for(let Te=0;Te<D.length;Te++){const ie=D[Te];A[ie]&&A[ie].node.mode===re.mode?(E[ie][de]=_(A[ie].lastCount+re.length,re.mode)-_(A[ie].lastCount,re.mode),A[ie].lastCount+=re.length):(A[ie]&&(A[ie].lastCount=re.length),E[ie][de]=_(re.length,re.mode)+4+n.getCharCountIndicator(re.mode,R))}}D=X}for(let L=0;L<D.length;L++)E[D[L]].end=0;return{map:E,table:A}}function B(w,R){let A;const E=n.getBestModeForData(w);if(A=n.from(R,E),A!==n.BYTE&&A.bit<E.bit)throw new Error('"'+w+'" cannot be encoded with mode '+n.toString(A)+`.
 Suggested mode is: `+n.toString(E));switch(A===n.KANJI&&!f.isKanjiModeEnabled()&&(A=n.BYTE),A){case n.NUMERIC:return new o(w);case n.ALPHANUMERIC:return new a(w);case n.KANJI:return new u(w);case n.BYTE:return new s(w)}}e.fromArray=function(R){return R.reduce(function(A,E){return typeof E=="string"?A.push(B(E,null)):E.data&&A.push(B(E.data,E.mode)),A},[])},e.fromString=function(R,A){const E=C(R,f.isKanjiModeEnabled()),D=$(E),L=I(D,A),U=l.find_path(L.map,"start","end"),X=[];for(let ne=1;ne<U.length-1;ne++)X.push(L.table[U[ne]].node);return e.fromArray(P(X))},e.rawSplit=function(R){return e.fromArray(C(R,f.isKanjiModeEnabled()))}})(Bn);const jt=ue,dr=Bt,as=Ua,ss=Va,us=Pn,cs=_n,pr=$n,vr=kt,ls=Wa,It=Rn,ds=In,fs=Me,fr=Bn;function hs(e,n){const o=e.size,a=cs.getPositions(n);for(let s=0;s<a.length;s++){const u=a[s][0],d=a[s][1];for(let f=-1;f<=7;f++)if(!(u+f<=-1||o<=u+f))for(let l=-1;l<=7;l++)d+l<=-1||o<=d+l||(f>=0&&f<=6&&(l===0||l===6)||l>=0&&l<=6&&(f===0||f===6)||f>=2&&f<=4&&l>=2&&l<=4?e.set(u+f,d+l,!0,!0):e.set(u+f,d+l,!1,!0))}}function gs(e){const n=e.size;for(let o=8;o<n-8;o++){const a=o%2===0;e.set(o,6,a,!0),e.set(6,o,a,!0)}}function ms(e,n){const o=us.getPositions(n);for(let a=0;a<o.length;a++){const s=o[a][0],u=o[a][1];for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)d===-2||d===2||f===-2||f===2||d===0&&f===0?e.set(s+d,u+f,!0,!0):e.set(s+d,u+f,!1,!0)}}function ps(e,n){const o=e.size,a=It.getEncodedBits(n);let s,u,d;for(let f=0;f<18;f++)s=Math.floor(f/3),u=f%3+o-8-3,d=(a>>f&1)===1,e.set(s,u,d,!0),e.set(u,s,d,!0)}function hr(e,n,o){const a=e.size,s=ds.getEncodedBits(n,o);let u,d;for(u=0;u<15;u++)d=(s>>u&1)===1,u<6?e.set(u,8,d,!0):u<8?e.set(u+1,8,d,!0):e.set(a-15+u,8,d,!0),u<8?e.set(8,a-u-1,d,!0):u<9?e.set(8,15-u-1+1,d,!0):e.set(8,15-u-1,d,!0);e.set(a-8,8,1,!0)}function vs(e,n){const o=e.size;let a=-1,s=o-1,u=7,d=0;for(let f=o-1;f>0;f-=2)for(f===6&&f--;;){for(let l=0;l<2;l++)if(!e.isReserved(s,f-l)){let p=!1;d<n.length&&(p=(n[d]>>>u&1)===1),e.set(s,f-l,p),u--,u===-1&&(d++,u=7)}if(s+=a,s<0||o<=s){s-=a,a=-a;break}}}function ys(e,n,o){const a=new as;o.forEach(function(l){a.put(l.mode.bit,4),a.put(l.getLength(),fs.getCharCountIndicator(l.mode,e)),l.write(a)});const s=jt.getSymbolTotalCodewords(e),u=vr.getTotalCodewordsCount(e,n),d=(s-u)*8;for(a.getLengthInBits()+4<=d&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const f=(d-a.getLengthInBits())/8;for(let l=0;l<f;l++)a.put(l%2?17:236,8);return ws(a,e,n)}function ws(e,n,o){const a=jt.getSymbolTotalCodewords(n),s=vr.getTotalCodewordsCount(n,o),u=a-s,d=vr.getBlocksCount(n,o),f=a%d,l=d-f,p=Math.floor(a/d),y=Math.floor(u/d),C=y+1,_=p-y,P=new ls(_);let $=0;const I=new Array(d),B=new Array(d);let w=0;const R=new Uint8Array(e.buffer);for(let U=0;U<d;U++){const X=U<l?y:C;I[U]=R.slice($,$+X),B[U]=P.encode(I[U]),$+=X,w=Math.max(w,X)}const A=new Uint8Array(a);let E=0,D,L;for(D=0;D<w;D++)for(L=0;L<d;L++)D<I[L].length&&(A[E++]=I[L][D]);for(D=0;D<_;D++)for(L=0;L<d;L++)A[E++]=B[L][D];return A}function bs(e,n,o,a){let s;if(Array.isArray(e))s=fr.fromArray(e);else if(typeof e=="string"){let p=n;if(!p){const y=fr.rawSplit(e);p=It.getBestVersionForData(y,o)}s=fr.fromString(e,p||40)}else throw new Error("Invalid data");const u=It.getBestVersionForData(s,o);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=u;else if(n<u)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+u+`.
`);const d=ys(n,o,s),f=jt.getSymbolSize(n),l=new ss(f);return hs(l,n),gs(l),ms(l,n),hr(l,o,0),n>=7&&ps(l,n),vs(l,d),isNaN(a)&&(a=pr.getBestMask(l,hr.bind(null,l,o))),pr.applyMask(a,l),hr(l,o,a),{modules:l,version:n,errorCorrectionLevel:o,maskPattern:a,segments:s}}En.create=function(n,o){if(typeof n=="undefined"||n==="")throw new Error("No input text");let a=dr.M,s,u;return typeof o!="undefined"&&(a=dr.from(o.errorCorrectionLevel,dr.M),s=It.from(o.version),u=pr.from(o.maskPattern),o.toSJISFunc&&jt.setToSJISFunction(o.toSJISFunc)),bs(n,s,a,u)};var Nn={},Tr={};(function(e){function n(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let a=o.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+o);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(u){return[u,u]}))),a.length===6&&a.push("F","F");const s=parseInt(a.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const s=typeof a.margin=="undefined"||a.margin===null||a.margin<0?4:a.margin,u=a.width&&a.width>=21?a.width:void 0,d=a.scale||4;return{width:u,scale:u?4:d,margin:s,color:{dark:n(a.color.dark||"#000000ff"),light:n(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,s){return s.width&&s.width>=a+s.margin*2?s.width/(a+s.margin*2):s.scale},e.getImageWidth=function(a,s){const u=e.getScale(a,s);return Math.floor((a+s.margin*2)*u)},e.qrToImageData=function(a,s,u){const d=s.modules.size,f=s.modules.data,l=e.getScale(d,u),p=Math.floor((d+u.margin*2)*l),y=u.margin*l,C=[u.color.light,u.color.dark];for(let _=0;_<p;_++)for(let P=0;P<p;P++){let $=(_*p+P)*4,I=u.color.light;if(_>=y&&P>=y&&_<p-y&&P<p-y){const B=Math.floor((_-y)/l),w=Math.floor((P-y)/l);I=C[f[B*d+w]?1:0]}a[$++]=I.r,a[$++]=I.g,a[$++]=I.b,a[$]=I.a}}})(Tr);(function(e){const n=Tr;function o(s,u,d){s.clearRect(0,0,u.width,u.height),u.style||(u.style={}),u.height=d,u.width=d,u.style.height=d+"px",u.style.width=d+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(u,d,f){let l=f,p=d;typeof l=="undefined"&&(!d||!d.getContext)&&(l=d,d=void 0),d||(p=a()),l=n.getOptions(l);const y=n.getImageWidth(u.modules.size,l),C=p.getContext("2d"),_=C.createImageData(y,y);return n.qrToImageData(_.data,u,l),o(C,p,y),C.putImageData(_,0,0),p},e.renderToDataURL=function(u,d,f){let l=f;typeof l=="undefined"&&(!d||!d.getContext)&&(l=d,d=void 0),l||(l={});const p=e.render(u,d,l),y=l.type||"image/png",C=l.rendererOpts||{};return p.toDataURL(y,C.quality)}})(Nn);var jn={};const Cs=Tr;function ln(e,n){const o=e.a/255,a=n+'="'+e.hex+'"';return o<1?a+" "+n+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function gr(e,n,o){let a=e+n;return typeof o!="undefined"&&(a+=" "+o),a}function Ts(e,n,o){let a="",s=0,u=!1,d=0;for(let f=0;f<e.length;f++){const l=Math.floor(f%n),p=Math.floor(f/n);!l&&!u&&(u=!0),e[f]?(d++,f>0&&l>0&&e[f-1]||(a+=u?gr("M",l+o,.5+p+o):gr("m",s,0),s=0,u=!1),l+1<n&&e[f+1]||(a+=gr("h",d),d=0)):s++}return a}jn.render=function(n,o,a){const s=Cs.getOptions(o),u=n.modules.size,d=n.modules.data,f=u+s.margin*2,l=s.color.light.a?"<path "+ln(s.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",p="<path "+ln(s.color.dark,"stroke")+' d="'+Ts(d,u,s.margin)+'"/>',y='viewBox="0 0 '+f+" "+f+'"',C=s.width?'width="'+s.width+'" height="'+s.width+'" ':"",_='<svg xmlns="http://www.w3.org/2000/svg" '+C+y+' shape-rendering="crispEdges">'+l+p+`</svg>
`;return typeof a=="function"&&a(null,_),_};const Es=La,yr=En,Fn=Nn,Ss=jn;function Er(e,n,o,a,s){const u=[].slice.call(arguments,1),d=u.length,f=typeof u[d-1]=="function";if(!f&&!Es())throw new Error("Callback required as last argument");if(f){if(d<2)throw new Error("Too few arguments provided");d===2?(s=o,o=n,n=a=void 0):d===3&&(n.getContext&&typeof s=="undefined"?(s=a,a=void 0):(s=a,a=o,o=n,n=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(o=n,n=a=void 0):d===2&&!n.getContext&&(a=o,o=n,n=void 0),new Promise(function(l,p){try{const y=yr.create(o,a);l(e(y,n,a))}catch(y){p(y)}})}try{const l=yr.create(o,a);s(null,e(l,n,a))}catch(l){s(l)}}it.create=yr.create;it.toCanvas=Er.bind(null,Fn.render);it.toDataURL=Er.bind(null,Fn.renderToDataURL);it.toString=Er.bind(null,function(e,n,o){return Ss.render(e,o)});var Ln=(e,n,o)=>{if(!n.has(e))throw TypeError("Cannot "+o)},dn=(e,n,o)=>(Ln(e,n,"read from private field"),o?o.call(e):n.get(e)),Ps=(e,n,o)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,o)},_s=(e,n,o,a)=>(Ln(e,n,"write to private field"),n.set(e,o),o);const xn=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],$s=[...xn,["unknown"]].map(e=>e[0]),Mt=new Map(xn);function As(e){for(const[n,o]of Mt)if(e===o)return n;return"unknown"}function Ms(e){if(Un(e))return{width:e.naturalWidth,height:e.naturalHeight};if(Vn(e))return{width:e.width.baseVal.value,height:e.height.baseVal.value};if(Hn(e))return{width:e.videoWidth,height:e.videoHeight};if(zn(e))return{width:e.width,height:e.height};if(Jn(e))return{width:e.displayWidth,height:e.displayHeight};if(Wn(e))return{width:e.width,height:e.height};if(qn(e))return{width:e.width,height:e.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Un(e){try{return e instanceof HTMLImageElement}catch{return!1}}function Vn(e){try{return e instanceof SVGImageElement}catch{return!1}}function Hn(e){try{return e instanceof HTMLVideoElement}catch{return!1}}function Wn(e){try{return e instanceof HTMLCanvasElement}catch{return!1}}function zn(e){try{return e instanceof ImageBitmap}catch{return!1}}function qn(e){try{return e instanceof OffscreenCanvas}catch{return!1}}function Jn(e){try{return e instanceof VideoFrame}catch{return!1}}function Yn(e){try{return e instanceof Blob}catch{return!1}}function Rs(e){try{return e instanceof ImageData}catch{return!1}}function Ds(e,n){try{const o=new OffscreenCanvas(e,n);if(o.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return o;throw void 0}catch{const a=document.createElement("canvas");return a.width=e,a.height=n,a}}async function Gn(e){if(Un(e)&&!await ks(e))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Vn(e)&&!await Ns(e))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Jn(e)&&js(e))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Hn(e)&&(e.readyState===0||e.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(zn(e)&&Ls(e))throw new DOMException("The image source is detached.","InvalidStateError");const{width:n,height:o}=Ms(e);if(n===0||o===0)return null;const a=Ds(n,o).getContext("2d");a.drawImage(e,0,0);try{return a.getImageData(0,0,n,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Is(e){let n;try{if(globalThis.createImageBitmap)n=await createImageBitmap(e);else if(globalThis.Image){n=new Image;let o="";try{o=URL.createObjectURL(e),n.src=o,await n.decode()}finally{URL.revokeObjectURL(o)}}else return e}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Gn(n)}function Os(e){const{width:n,height:o}=e;if(n===0||o===0)return null;const a=e.getContext("2d");try{return a.getImageData(0,0,n,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Bs(e){if(Yn(e))return await Is(e);if(Rs(e)){if(Fs(e))throw new DOMException("The image data has been detached.","InvalidStateError");return e}return Wn(e)||qn(e)?Os(e):await Gn(e)}async function ks(e){try{return await e.decode(),!0}catch{return!1}}async function Ns(e){var n;try{return await((n=e.decode)==null?void 0:n.call(e)),!0}catch{return!1}}function js(e){return e.format===null}function Fs(e){return e.data.buffer.byteLength===0}function Ls(e){return e.width===0&&e.height===0}function fn(e,n){return e instanceof DOMException?new DOMException(`${n}: ${e.message}`,e.name):e instanceof Error?new e.constructor(`${n}: ${e.message}`):new Error(`${n}: ${e}`)}const hn=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function xs(e){return e.join("|")}function Us(e){const n=gn(e);let o=0,a=hn.length-1;for(;o<=a;){const s=Math.floor((o+a)/2),u=hn[s],d=gn(u);if(d===n)return u;d<n?o=s+1:a=s-1}return"None"}function gn(e){return e.toLowerCase().replace(/_-\[\]/g,"")}function Vs(e,n){return e.Binarizer[n]}function Hs(e,n){return e.CharacterSet[n]}const Ws=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function zs(e){return Ws[e.value]}function qs(e,n){return e.EanAddOnSymbol[n]}function Js(e,n){return e.TextMode[n]}const qe={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Qn(e,n){return{...n,formats:xs(n.formats),binarizer:Vs(e,n.binarizer),eanAddOnSymbol:qs(e,n.eanAddOnSymbol),textMode:Js(e,n.textMode),characterSet:Hs(e,n.characterSet)}}function Kn(e){return{...e,format:Us(e.format),eccLevel:e.eccLevel,contentType:zs(e.contentType)}}const Ys={locateFile:(e,n)=>{const o=e.match(/_(.+?)\.wasm$/);return o?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${o[1]}/${e}`:n+e}};let mn=new WeakMap;function Sr(e,n){var o;const a=mn.get(e);if(a!=null&&a.modulePromise&&n===void 0)return a.modulePromise;const s=(o=a==null?void 0:a.moduleOverrides)!=null?o:Ys,u=e({...s});return mn.set(e,{moduleOverrides:s,modulePromise:u}),u}async function Gs(e,n,o=qe){const a={...qe,...o},s=await Sr(e),{size:u}=n,d=new Uint8Array(await n.arrayBuffer()),f=s._malloc(u);s.HEAPU8.set(d,f);const l=s.readBarcodesFromImage(f,u,Qn(s,a));s._free(f);const p=[];for(let y=0;y<l.size();++y)p.push(Kn(l.get(y)));return p}async function Qs(e,n,o=qe){const a={...qe,...o},s=await Sr(e),{data:u,width:d,height:f,data:{byteLength:l}}=n,p=s._malloc(l);s.HEAPU8.set(u,p);const y=s.readBarcodesFromPixmap(p,d,f,Qn(s,a));s._free(p);const C=[];for(let _=0;_<y.size();++_)C.push(Kn(y.get(_)));return C}({...qe,formats:[...qe.formats]});var Pr=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n={}){var o=n,a,s;o.ready=new Promise((t,r)=>{a=t,s=r});var u=Object.assign({},o),d="./this.program",f=typeof window=="object",l=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var p="";function y(t){return o.locateFile?o.locateFile(t,p):p+t}var C;(f||l)&&(l?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),e&&(p=e),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",l&&(C=t=>{var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)})),o.print||console.log.bind(console);var _=o.printErr||console.error.bind(console);Object.assign(o,u),u=null,o.arguments&&o.arguments,o.thisProgram&&(d=o.thisProgram),o.quit&&o.quit;var P;o.wasmBinary&&(P=o.wasmBinary),typeof WebAssembly!="object"&&ae("no native wasm support detected");var $,I=!1,B,w,R,A,E,D,L,U;function X(){var t=$.buffer;o.HEAP8=B=new Int8Array(t),o.HEAP16=R=new Int16Array(t),o.HEAPU8=w=new Uint8Array(t),o.HEAPU16=A=new Uint16Array(t),o.HEAP32=E=new Int32Array(t),o.HEAPU32=D=new Uint32Array(t),o.HEAPF32=L=new Float32Array(t),o.HEAPF64=U=new Float64Array(t)}var ne=[],re=[],de=[];function Te(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Lt(o.preRun.shift());Wt(ne)}function ie(){Wt(re)}function Ft(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)Je(o.postRun.shift());Wt(de)}function Lt(t){ne.unshift(t)}function xt(t){re.unshift(t)}function Je(t){de.unshift(t)}var he=0,Re=null;function Ut(t){var r;he++,(r=o.monitorRunDependencies)===null||r===void 0||r.call(o,he)}function Ee(t){var r;if(he--,(r=o.monitorRunDependencies)===null||r===void 0||r.call(o,he),he==0&&Re){var i=Re;Re=null,i()}}function ae(t){var r;(r=o.onAbort)===null||r===void 0||r.call(o,t),t="Aborted("+t+")",_(t),I=!0,t+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(t);throw s(i),i}var Vt="data:application/octet-stream;base64,",st=t=>t.startsWith(Vt),Se;Se="zxing_reader.wasm",st(Se)||(Se=y(Se));function ut(t){if(t==Se&&P)return new Uint8Array(P);if(C)return C(t);throw"both async and sync fetching of the wasm failed"}function Ht(t){return!P&&(f||l)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+t+"'";return r.arrayBuffer()}).catch(()=>ut(t)):Promise.resolve().then(()=>ut(t))}function ct(t,r,i){return Ht(t).then(c=>WebAssembly.instantiate(c,r)).then(c=>c).then(i,c=>{_(`failed to asynchronously prepare wasm: ${c}`),ae(c)})}function go(t,r,i,c){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!st(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(h=>{var g=WebAssembly.instantiateStreaming(h,i);return g.then(c,function(m){return _(`wasm streaming compile failed: ${m}`),_("falling back to ArrayBuffer instantiation"),ct(r,i,c)})}):ct(r,i,c)}function mo(){var t={a:ra};function r(c,h){return Q=c.exports,$=Q.ia,X(),kr=Q.ma,xt(Q.ja),Ee(),Q}Ut();function i(c){r(c.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(t,r)}catch(c){_(`Module.instantiateWasm callback failed with error: ${c}`),s(c)}return go(P,Se,t,i).catch(s),{}}var Wt=t=>{for(;t.length>0;)t.shift()(o)};o.noExitRuntime;var lt=[],dt=0,po=t=>{var r=new zt(t);return r.get_caught()||(r.set_caught(!0),dt--),r.set_rethrown(!1),lt.push(r),Gr(r.excPtr),r.get_exception_ptr()},ye=0,vo=()=>{H(0,0);var t=lt.pop();Yr(t.excPtr),ye=0};function zt(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(r){D[this.ptr+4>>2]=r},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(r){D[this.ptr+8>>2]=r},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_caught=function(r){r=r?1:0,B[this.ptr+12>>0]=r},this.get_caught=function(){return B[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,B[this.ptr+13>>0]=r},this.get_rethrown=function(){return B[this.ptr+13>>0]!=0},this.init=function(r,i){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(i)},this.set_adjusted_ptr=function(r){D[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return D[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=Kr(this.get_type());if(r)return D[this.excPtr>>2];var i=this.get_adjusted_ptr();return i!==0?i:this.excPtr}}var yo=t=>{throw ye||(ye=t),ye},qt=t=>{var r=ye;if(!r)return et(0),0;var i=new zt(r);i.set_adjusted_ptr(r);var c=i.get_type();if(!c)return et(0),r;for(var h in t){var g=t[h];if(g===0||g===c)break;var m=i.ptr+16;if(Qr(g,c,m))return et(g),r}return et(c),r},wo=()=>qt([]),bo=t=>qt([t]),Co=(t,r)=>qt([t,r]),To=()=>{var t=lt.pop();t||ae("no exception to throw");var r=t.excPtr;throw t.get_rethrown()||(lt.push(t),t.set_rethrown(!0),t.set_caught(!1),dt++),ye=r,ye},Eo=(t,r,i)=>{var c=new zt(t);throw c.init(r,i),ye=t,dt++,ye},So=()=>dt,ft={},Jt=t=>{for(;t.length;){var r=t.pop(),i=t.pop();i(r)}};function Yt(t){return this.fromWireType(E[t>>2])}var Be={},De={},ht={},_r,gt=t=>{throw new _r(t)},Ie=(t,r,i)=>{t.forEach(function(v){ht[v]=r});function c(v){var b=i(v);b.length!==t.length&&gt("Mismatched type converter count");for(var S=0;S<t.length;++S)ge(t[S],b[S])}var h=new Array(r.length),g=[],m=0;r.forEach((v,b)=>{De.hasOwnProperty(v)?h[b]=De[v]:(g.push(v),Be.hasOwnProperty(v)||(Be[v]=[]),Be[v].push(()=>{h[b]=De[v],++m,m===g.length&&c(h)}))}),g.length===0&&c(h)},Po=t=>{var r=ft[t];delete ft[t];var i=r.rawConstructor,c=r.rawDestructor,h=r.fields,g=h.map(m=>m.getterReturnType).concat(h.map(m=>m.setterArgumentType));Ie([t],g,m=>{var v={};return h.forEach((b,S)=>{var M=b.fieldName,k=m[S],N=b.getter,j=b.getterContext,W=m[S+h.length],Y=b.setter,V=b.setterContext;v[M]={read:ee=>k.fromWireType(N(j,ee)),write:(ee,T)=>{var O=[];Y(V,ee,W.toWireType(O,T)),Jt(O)}}}),[{name:r.name,fromWireType:b=>{var S={};for(var M in v)S[M]=v[M].read(b);return c(b),S},toWireType:(b,S)=>{for(var M in v)if(!(M in S))throw new TypeError(`Missing field: "${M}"`);var k=i();for(M in v)v[M].write(k,S[M]);return b!==null&&b.push(c,k),k},argPackAdvance:me,readValueFromPointer:Yt,destructorFunction:c}]})},_o=(t,r,i,c,h)=>{},$o=()=>{for(var t=new Array(256),r=0;r<256;++r)t[r]=String.fromCharCode(r);$r=t},$r,Z=t=>{for(var r="",i=t;w[i];)r+=$r[w[i++]];return r},ke,F=t=>{throw new ke(t)};function Ao(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var c=r.name;if(t||F(`type "${c}" must have a positive integer typeid pointer`),De.hasOwnProperty(t)){if(i.ignoreDuplicateRegistrations)return;F(`Cannot register type '${c}' twice`)}if(De[t]=r,delete ht[t],Be.hasOwnProperty(t)){var h=Be[t];delete Be[t],h.forEach(g=>g())}}function ge(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Ao(t,r,i)}var me=8,Mo=(t,r,i,c)=>{r=Z(r),ge(t,{name:r,fromWireType:function(h){return!!h},toWireType:function(h,g){return g?i:c},argPackAdvance:me,readValueFromPointer:function(h){return this.fromWireType(w[h])},destructorFunction:null})},Ro=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),Gt=t=>{function r(i){return i.$$.ptrType.registeredClass.name}F(r(t)+" instance already deleted")},Qt=!1,Ar=t=>{},Do=t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)},Mr=t=>{t.count.value-=1;var r=t.count.value===0;r&&Do(t)},Rr=(t,r,i)=>{if(r===i)return t;if(i.baseClass===void 0)return null;var c=Rr(t,r,i.baseClass);return c===null?null:i.downcast(c)},Dr={},Io=()=>Object.keys(Qe).length,Oo=()=>{var t=[];for(var r in Qe)Qe.hasOwnProperty(r)&&t.push(Qe[r]);return t},Ye=[],Kt=()=>{for(;Ye.length;){var t=Ye.pop();t.$$.deleteScheduled=!1,t.delete()}},Ge,Bo=t=>{Ge=t,Ye.length&&Ge&&Ge(Kt)},ko=()=>{o.getInheritedInstanceCount=Io,o.getLiveInheritedInstances=Oo,o.flushPendingDeletes=Kt,o.setDelayFunction=Bo},Qe={},No=(t,r)=>{for(r===void 0&&F("ptr should not be undefined");t.baseClass;)r=t.upcast(r),t=t.baseClass;return r},jo=(t,r)=>(r=No(t,r),Qe[r]),mt=(t,r)=>{(!r.ptrType||!r.ptr)&&gt("makeClassHandle requires ptr and ptrType");var i=!!r.smartPtrType,c=!!r.smartPtr;return i!==c&&gt("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Ke(Object.create(t,{$$:{value:r,writable:!0}}))};function Fo(t){var r=this.getPointee(t);if(!r)return this.destructor(t),null;var i=jo(this.registeredClass,r);if(i!==void 0){if(i.$$.count.value===0)return i.$$.ptr=r,i.$$.smartPtr=t,i.clone();var c=i.clone();return this.destructor(t),c}function h(){return this.isSmartPointer?mt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:t}):mt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var g=this.registeredClass.getActualType(r),m=Dr[g];if(!m)return h.call(this);var v;this.isConst?v=m.constPointerType:v=m.pointerType;var b=Rr(r,this.registeredClass,v.registeredClass);return b===null?h.call(this):this.isSmartPointer?mt(v.registeredClass.instancePrototype,{ptrType:v,ptr:b,smartPtrType:this,smartPtr:t}):mt(v.registeredClass.instancePrototype,{ptrType:v,ptr:b})}var Ke=t=>typeof FinalizationRegistry>"u"?(Ke=r=>r,t):(Qt=new FinalizationRegistry(r=>{Mr(r.$$)}),Ke=r=>{var i=r.$$,c=!!i.smartPtr;if(c){var h={$$:i};Qt.register(r,h,r)}return r},Ar=r=>Qt.unregister(r),Ke(t)),Lo=()=>{Object.assign(pt.prototype,{isAliasOf(t){if(!(this instanceof pt)||!(t instanceof pt))return!1;var r=this.$$.ptrType.registeredClass,i=this.$$.ptr;t.$$=t.$$;for(var c=t.$$.ptrType.registeredClass,h=t.$$.ptr;r.baseClass;)i=r.upcast(i),r=r.baseClass;for(;c.baseClass;)h=c.upcast(h),c=c.baseClass;return r===c&&i===h},clone(){if(this.$$.ptr||Gt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Ke(Object.create(Object.getPrototypeOf(this),{$$:{value:Ro(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||Gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),Ar(this),Mr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Gt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),Ye.push(this),Ye.length===1&&Ge&&Ge(Kt),this.$$.deleteScheduled=!0,this}})};function pt(){}var Xe=(t,r)=>Object.defineProperty(r,"name",{value:t}),Ir=(t,r,i)=>{if(t[r].overloadTable===void 0){var c=t[r];t[r]=function(){return t[r].overloadTable.hasOwnProperty(arguments.length)||F(`Function '${i}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[r].overloadTable})!`),t[r].overloadTable[arguments.length].apply(this,arguments)},t[r].overloadTable=[],t[r].overloadTable[c.argCount]=c}},Xt=(t,r,i)=>{o.hasOwnProperty(t)?((i===void 0||o[t].overloadTable!==void 0&&o[t].overloadTable[i]!==void 0)&&F(`Cannot register public name '${t}' twice`),Ir(o,t,t),o.hasOwnProperty(i)&&F(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`),o[t].overloadTable[i]=r):(o[t]=r,i!==void 0&&(o[t].numArguments=i))},xo=48,Uo=57,Vo=t=>{if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var r=t.charCodeAt(0);return r>=xo&&r<=Uo?`_${t}`:t};function Ho(t,r,i,c,h,g,m,v){this.name=t,this.constructor=r,this.instancePrototype=i,this.rawDestructor=c,this.baseClass=h,this.getActualType=g,this.upcast=m,this.downcast=v,this.pureVirtualFunctions=[]}var Zt=(t,r,i)=>{for(;r!==i;)r.upcast||F(`Expected null or instance of ${i.name}, got an instance of ${r.name}`),t=r.upcast(t),r=r.baseClass;return t};function Wo(t,r){if(r===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;r.$$||F(`Cannot pass "${or(r)}" as a ${this.name}`),r.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`);var i=r.$$.ptrType.registeredClass,c=Zt(r.$$.ptr,i,this.registeredClass);return c}function zo(t,r){var i;if(r===null)return this.isReference&&F(`null is not a valid ${this.name}`),this.isSmartPointer?(i=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,i),i):0;(!r||!r.$$)&&F(`Cannot pass "${or(r)}" as a ${this.name}`),r.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&F(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var c=r.$$.ptrType.registeredClass;if(i=Zt(r.$$.ptr,c,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&F("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?i=r.$$.smartPtr:F(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:i=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)i=r.$$.smartPtr;else{var h=r.clone();i=this.rawShare(i,we.toHandle(()=>h.delete())),t!==null&&t.push(this.rawDestructor,i)}break;default:F("Unsupporting sharing policy")}return i}function qo(t,r){if(r===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;r.$$||F(`Cannot pass "${or(r)}" as a ${this.name}`),r.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&F(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var i=r.$$.ptrType.registeredClass,c=Zt(r.$$.ptr,i,this.registeredClass);return c}function Or(t){return this.fromWireType(D[t>>2])}var Jo=()=>{Object.assign(vt.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var r;(r=this.rawDestructor)===null||r===void 0||r.call(this,t)},argPackAdvance:me,readValueFromPointer:Or,deleteObject(t){t!==null&&t.delete()},fromWireType:Fo})};function vt(t,r,i,c,h,g,m,v,b,S,M){this.name=t,this.registeredClass=r,this.isReference=i,this.isConst=c,this.isSmartPointer=h,this.pointeeType=g,this.sharingPolicy=m,this.rawGetPointee=v,this.rawConstructor=b,this.rawShare=S,this.rawDestructor=M,!h&&r.baseClass===void 0?c?(this.toWireType=Wo,this.destructorFunction=null):(this.toWireType=qo,this.destructorFunction=null):this.toWireType=zo}var Br=(t,r,i)=>{o.hasOwnProperty(t)||gt("Replacing nonexistant public symbol"),o[t].overloadTable!==void 0&&i!==void 0?o[t].overloadTable[i]=r:(o[t]=r,o[t].argCount=i)},Yo=(t,r,i)=>{var c=o["dynCall_"+t];return i&&i.length?c.apply(null,[r].concat(i)):c.call(null,r)},yt=[],kr,z=t=>{var r=yt[t];return r||(t>=yt.length&&(yt.length=t+1),yt[t]=r=kr.get(t)),r},Go=(t,r,i)=>{if(t.includes("j"))return Yo(t,r,i);var c=z(r).apply(null,i);return c},Qo=(t,r)=>{var i=[];return function(){return i.length=0,Object.assign(i,arguments),Go(t,r,i)}},fe=(t,r)=>{t=Z(t);function i(){return t.includes("j")?Qo(t,r):z(r)}var c=i();return typeof c!="function"&&F(`unknown function pointer with signature ${t}: ${r}`),c},Ko=(t,r)=>{var i=Xe(r,function(c){this.name=r,this.message=c;var h=new Error(c).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},i},Nr,jr=t=>{var r=Jr(t),i=Z(r);return be(r),i},wt=(t,r)=>{var i=[],c={};function h(g){if(!c[g]&&!De[g]){if(ht[g]){ht[g].forEach(h);return}i.push(g),c[g]=!0}}throw r.forEach(h),new Nr(`${t}: `+i.map(jr).join([", "]))},Xo=(t,r,i,c,h,g,m,v,b,S,M,k,N)=>{M=Z(M),g=fe(h,g),v&&(v=fe(m,v)),S&&(S=fe(b,S)),N=fe(k,N);var j=Vo(M);Xt(j,function(){wt(`Cannot construct ${M} due to unbound types`,[c])}),Ie([t,r,i],c?[c]:[],function(W){W=W[0];var Y,V;c?(Y=W.registeredClass,V=Y.instancePrototype):V=pt.prototype;var ee=Xe(M,function(){if(Object.getPrototypeOf(this)!==T)throw new ke("Use 'new' to construct "+M);if(O.constructor_body===void 0)throw new ke(M+" has no accessible constructor");var tn=O.constructor_body[arguments.length];if(tn===void 0)throw new ke(`Tried to invoke ctor of ${M} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(O.constructor_body).toString()}) parameters instead!`);return tn.apply(this,arguments)}),T=Object.create(V,{constructor:{value:ee}});ee.prototype=T;var O=new Ho(M,ee,T,N,Y,g,v,S);if(O.baseClass){var G,K;(K=(G=O.baseClass).__derivedClasses)!==null&&K!==void 0||(G.__derivedClasses=[]),O.baseClass.__derivedClasses.push(O)}var Ne=new vt(M,O,!0,!1,!1),Tt=new vt(M+"*",O,!1,!1,!1),en=new vt(M+" const*",O,!1,!0,!1);return Dr[t]={pointerType:Tt,constPointerType:en},Br(j,ee),[Ne,Tt,en]})},er=(t,r)=>{for(var i=[],c=0;c<t;c++)i.push(D[r+c*4>>2]);return i};function Zo(t){for(var r=1;r<t.length;++r)if(t[r]!==null&&t[r].destructorFunction===void 0)return!0;return!1}function tr(t,r,i,c,h,g){var m=r.length;m<2&&F("argTypes array size mismatch! Must at least get return value and 'this' types!");var v=r[1]!==null&&i!==null,b=Zo(r),S=r[0].name!=="void",M=m-2,k=new Array(M),N=[],j=[],W=function(){arguments.length!==M&&F(`function ${t} called with ${arguments.length} arguments, expected ${M}`),j.length=0;var Y;N.length=v?2:1,N[0]=h,v&&(Y=r[1].toWireType(j,this),N[1]=Y);for(var V=0;V<M;++V)k[V]=r[V+2].toWireType(j,arguments[V]),N.push(k[V]);var ee=c.apply(null,N);function T(O){if(b)Jt(j);else for(var G=v?1:2;G<r.length;G++){var K=G===1?Y:k[G-2];r[G].destructorFunction!==null&&r[G].destructorFunction(K)}if(S)return r[0].fromWireType(O)}return T(ee)};return Xe(t,W)}var ei=(t,r,i,c,h,g)=>{var m=er(r,i);h=fe(c,h),Ie([],[t],function(v){v=v[0];var b=`constructor ${v.name}`;if(v.registeredClass.constructor_body===void 0&&(v.registeredClass.constructor_body=[]),v.registeredClass.constructor_body[r-1]!==void 0)throw new ke(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${v.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return v.registeredClass.constructor_body[r-1]=()=>{wt(`Cannot construct ${v.name} due to unbound types`,m)},Ie([],m,S=>(S.splice(1,0,null),v.registeredClass.constructor_body[r-1]=tr(b,S,null,h,g),[])),[]})},Fr=t=>{t=t.trim();const r=t.indexOf("(");return r!==-1?t.substr(0,r):t},ti=(t,r,i,c,h,g,m,v,b)=>{var S=er(i,c);r=Z(r),r=Fr(r),g=fe(h,g),Ie([],[t],function(M){M=M[0];var k=`${M.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),v&&M.registeredClass.pureVirtualFunctions.push(r);function N(){wt(`Cannot call ${k} due to unbound types`,S)}var j=M.registeredClass.instancePrototype,W=j[r];return W===void 0||W.overloadTable===void 0&&W.className!==M.name&&W.argCount===i-2?(N.argCount=i-2,N.className=M.name,j[r]=N):(Ir(j,r,k),j[r].overloadTable[i-2]=N),Ie([],S,function(Y){var V=tr(k,Y,M,g,m);return j[r].overloadTable===void 0?(V.argCount=i-2,j[r]=V):j[r].overloadTable[i-2]=V,[]}),[]})};function ri(){Object.assign(Lr.prototype,{get(t){return this.allocated[t]},has(t){return this.allocated[t]!==void 0},allocate(t){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=t,r},free(t){this.allocated[t]=void 0,this.freelist.push(t)}})}function Lr(){this.allocated=[void 0],this.freelist=[]}var ce=new Lr,rr=t=>{t>=ce.reserved&&--ce.get(t).refcount===0&&ce.free(t)},ni=()=>{for(var t=0,r=ce.reserved;r<ce.allocated.length;++r)ce.allocated[r]!==void 0&&++t;return t},oi=()=>{ce.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ce.reserved=ce.allocated.length,o.count_emval_handles=ni},we={toValue:t=>(t||F("Cannot use deleted val. handle = "+t),ce.get(t).value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ce.allocate({refcount:1,value:t})}}},ii=(t,r)=>{r=Z(r),ge(t,{name:r,fromWireType:i=>{var c=we.toValue(i);return rr(i),c},toWireType:(i,c)=>we.toHandle(c),argPackAdvance:me,readValueFromPointer:Yt,destructorFunction:null})},ai=(t,r,i)=>{switch(r){case 1:return i?function(c){return this.fromWireType(B[c>>0])}:function(c){return this.fromWireType(w[c>>0])};case 2:return i?function(c){return this.fromWireType(R[c>>1])}:function(c){return this.fromWireType(A[c>>1])};case 4:return i?function(c){return this.fromWireType(E[c>>2])}:function(c){return this.fromWireType(D[c>>2])};default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},si=(t,r,i,c)=>{r=Z(r);function h(){}h.values={},ge(t,{name:r,constructor:h,fromWireType:function(g){return this.constructor.values[g]},toWireType:(g,m)=>m.value,argPackAdvance:me,readValueFromPointer:ai(r,i,c),destructorFunction:null}),Xt(r,h)},nr=(t,r)=>{var i=De[t];return i===void 0&&F(r+" has unknown type "+jr(t)),i},ui=(t,r,i)=>{var c=nr(t,"enum");r=Z(r);var h=c.constructor,g=Object.create(c.constructor.prototype,{value:{value:i},constructor:{value:Xe(`${c.name}_${r}`,function(){})}});h.values[i]=g,h[r]=g},or=t=>{if(t===null)return"null";var r=typeof t;return r==="object"||r==="array"||r==="function"?t.toString():""+t},ci=(t,r)=>{switch(r){case 4:return function(i){return this.fromWireType(L[i>>2])};case 8:return function(i){return this.fromWireType(U[i>>3])};default:throw new TypeError(`invalid float width (${r}): ${t}`)}},li=(t,r,i)=>{r=Z(r),ge(t,{name:r,fromWireType:c=>c,toWireType:(c,h)=>h,argPackAdvance:me,readValueFromPointer:ci(r,i),destructorFunction:null})},di=(t,r,i,c,h,g,m)=>{var v=er(r,i);t=Z(t),t=Fr(t),h=fe(c,h),Xt(t,function(){wt(`Cannot call ${t} due to unbound types`,v)},r-1),Ie([],v,function(b){var S=[b[0],null].concat(b.slice(1));return Br(t,tr(t,S,null,h,g),r-1),[]})},fi=(t,r,i)=>{switch(r){case 1:return i?c=>B[c>>0]:c=>w[c>>0];case 2:return i?c=>R[c>>1]:c=>A[c>>1];case 4:return i?c=>E[c>>2]:c=>D[c>>2];default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},hi=(t,r,i,c,h)=>{r=Z(r);var g=M=>M;if(c===0){var m=32-8*i;g=M=>M<<m>>>m}var v=r.includes("unsigned"),b=(M,k)=>{},S;v?S=function(M,k){return b(k,this.name),k>>>0}:S=function(M,k){return b(k,this.name),k},ge(t,{name:r,fromWireType:g,toWireType:S,argPackAdvance:me,readValueFromPointer:fi(r,i,c!==0),destructorFunction:null})},gi=(t,r,i)=>{var c=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=c[r];function g(m){var v=D[m>>2],b=D[m+4>>2];return new h(B.buffer,b,v)}i=Z(i),ge(t,{name:i,fromWireType:g,argPackAdvance:me,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})},xr=(t,r,i,c)=>{if(!(c>0))return 0;for(var h=i,g=i+c-1,m=0;m<t.length;++m){var v=t.charCodeAt(m);if(v>=55296&&v<=57343){var b=t.charCodeAt(++m);v=65536+((v&1023)<<10)|b&1023}if(v<=127){if(i>=g)break;r[i++]=v}else if(v<=2047){if(i+1>=g)break;r[i++]=192|v>>6,r[i++]=128|v&63}else if(v<=65535){if(i+2>=g)break;r[i++]=224|v>>12,r[i++]=128|v>>6&63,r[i++]=128|v&63}else{if(i+3>=g)break;r[i++]=240|v>>18,r[i++]=128|v>>12&63,r[i++]=128|v>>6&63,r[i++]=128|v&63}}return r[i]=0,i-h},mi=(t,r,i)=>xr(t,w,r,i),Ur=t=>{for(var r=0,i=0;i<t.length;++i){var c=t.charCodeAt(i);c<=127?r++:c<=2047?r+=2:c>=55296&&c<=57343?(r+=4,++i):r+=3}return r},Vr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,pi=(t,r,i)=>{for(var c=r+i,h=r;t[h]&&!(h>=c);)++h;if(h-r>16&&t.buffer&&Vr)return Vr.decode(t.subarray(r,h));for(var g="";r<h;){var m=t[r++];if(!(m&128)){g+=String.fromCharCode(m);continue}var v=t[r++]&63;if((m&224)==192){g+=String.fromCharCode((m&31)<<6|v);continue}var b=t[r++]&63;if((m&240)==224?m=(m&15)<<12|v<<6|b:m=(m&7)<<18|v<<12|b<<6|t[r++]&63,m<65536)g+=String.fromCharCode(m);else{var S=m-65536;g+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return g},ir=(t,r)=>t?pi(w,t,r):"",vi=(t,r)=>{r=Z(r);var i=r==="std::string";ge(t,{name:r,fromWireType(c){var h=D[c>>2],g=c+4,m;if(i)for(var v=g,b=0;b<=h;++b){var S=g+b;if(b==h||w[S]==0){var M=S-v,k=ir(v,M);m===void 0?m=k:(m+="\0",m+=k),v=S+1}}else{for(var N=new Array(h),b=0;b<h;++b)N[b]=String.fromCharCode(w[g+b]);m=N.join("")}return be(c),m},toWireType(c,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var g,m=typeof h=="string";m||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||F("Cannot pass non-string to std::string"),i&&m?g=Ur(h):g=h.length;var v=ur(4+g+1),b=v+4;if(D[v>>2]=g,i&&m)mi(h,b,g+1);else if(m)for(var S=0;S<g;++S){var M=h.charCodeAt(S);M>255&&(be(b),F("String has UTF-16 code units that do not fit in 8 bits")),w[b+S]=M}else for(var S=0;S<g;++S)w[b+S]=h[S];return c!==null&&c.push(be,v),v},argPackAdvance:me,readValueFromPointer:Or,destructorFunction(c){be(c)}})},Hr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,yi=(t,r)=>{for(var i=t,c=i>>1,h=c+r/2;!(c>=h)&&A[c];)++c;if(i=c<<1,i-t>32&&Hr)return Hr.decode(w.subarray(t,i));for(var g="",m=0;!(m>=r/2);++m){var v=R[t+m*2>>1];if(v==0)break;g+=String.fromCharCode(v)}return g},wi=(t,r,i)=>{var c;if((c=i)!==null&&c!==void 0||(i=2147483647),i<2)return 0;i-=2;for(var h=r,g=i<t.length*2?i/2:t.length,m=0;m<g;++m){var v=t.charCodeAt(m);R[r>>1]=v,r+=2}return R[r>>1]=0,r-h},bi=t=>t.length*2,Ci=(t,r)=>{for(var i=0,c="";!(i>=r/4);){var h=E[t+i*4>>2];if(h==0)break;if(++i,h>=65536){var g=h-65536;c+=String.fromCharCode(55296|g>>10,56320|g&1023)}else c+=String.fromCharCode(h)}return c},Ti=(t,r,i)=>{var c;if((c=i)!==null&&c!==void 0||(i=2147483647),i<4)return 0;for(var h=r,g=h+i-4,m=0;m<t.length;++m){var v=t.charCodeAt(m);if(v>=55296&&v<=57343){var b=t.charCodeAt(++m);v=65536+((v&1023)<<10)|b&1023}if(E[r>>2]=v,r+=4,r+4>g)break}return E[r>>2]=0,r-h},Ei=t=>{for(var r=0,i=0;i<t.length;++i){var c=t.charCodeAt(i);c>=55296&&c<=57343&&++i,r+=4}return r},Si=(t,r,i)=>{i=Z(i);var c,h,g,m,v;r===2?(c=yi,h=wi,m=bi,g=()=>A,v=1):r===4&&(c=Ci,h=Ti,m=Ei,g=()=>D,v=2),ge(t,{name:i,fromWireType:b=>{for(var S=D[b>>2],M=g(),k,N=b+4,j=0;j<=S;++j){var W=b+4+j*r;if(j==S||M[W>>v]==0){var Y=W-N,V=c(N,Y);k===void 0?k=V:(k+="\0",k+=V),N=W+r}}return be(b),k},toWireType:(b,S)=>{typeof S!="string"&&F(`Cannot pass non-string to C++ string type ${i}`);var M=m(S),k=ur(4+M+r);return D[k>>2]=M>>v,h(S,k+4,M+r),b!==null&&b.push(be,k),k},argPackAdvance:me,readValueFromPointer:Yt,destructorFunction(b){be(b)}})},Pi=(t,r,i,c,h,g)=>{ft[t]={name:Z(r),rawConstructor:fe(i,c),rawDestructor:fe(h,g),fields:[]}},_i=(t,r,i,c,h,g,m,v,b,S)=>{ft[t].fields.push({fieldName:Z(r),getterReturnType:i,getter:fe(c,h),getterContext:g,setterArgumentType:m,setter:fe(v,b),setterContext:S})},$i=(t,r)=>{r=Z(r),ge(t,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(i,c)=>{}})},ar=[],Ai=(t,r,i,c)=>(t=ar[t],r=we.toValue(r),t(null,r,i,c)),Mi={},Ri=t=>{var r=Mi[t];return r===void 0?Z(t):r},Wr=()=>{if(typeof globalThis=="object")return globalThis;function t(r){r.$$$embind_global$$$=r;var i=typeof $$$embind_global$$$=="object"&&r.$$$embind_global$$$==r;return i||delete r.$$$embind_global$$$,i}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&t(global)?$$$embind_global$$$=global:typeof self=="object"&&t(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Di=t=>t===0?we.toHandle(Wr()):(t=Ri(t),we.toHandle(Wr()[t])),Ii=t=>{var r=ar.length;return ar.push(t),r},Oi=(t,r)=>{for(var i=new Array(t),c=0;c<t;++c)i[c]=nr(D[r+c*4>>2],"parameter "+c);return i},Bi=Reflect.construct,ki=(t,r,i)=>{var c=[],h=t.toWireType(c,i);return c.length&&(D[r>>2]=we.toHandle(c)),h},Ni=(t,r,i)=>{var c=Oi(t,r),h=c.shift();t--;var g=new Array(t),m=(b,S,M,k)=>{for(var N=0,j=0;j<t;++j)g[j]=c[j].readValueFromPointer(k+N),N+=c[j].argPackAdvance;for(var W=i===1?Bi(S,g):S.apply(b,g),j=0;j<t;++j){var Y,V;(Y=(V=c[j]).deleteObject)===null||Y===void 0||Y.call(V,g[j])}return ki(h,M,W)},v=`methodCaller<(${c.map(b=>b.name).join(", ")}) => ${h.name}>`;return Ii(Xe(v,m))},ji=t=>{t>4&&(ce.get(t).refcount+=1)},Fi=t=>{var r=we.toValue(t);Jt(r),rr(t)},Li=(t,r)=>{t=nr(t,"_emval_take_value");var i=t.readValueFromPointer(r);return we.toHandle(i)},xi=()=>{ae("")},Ui=(t,r,i)=>w.copyWithin(t,r,r+i),Vi=()=>2147483648,Hi=t=>{var r=$.buffer,i=(t-r.byteLength+65535)/65536;try{return $.grow(i),X(),1}catch{}},Wi=t=>{var r=w.length;t>>>=0;var i=Vi();if(t>i)return!1;for(var c=(b,S)=>b+(S-b%S)%S,h=1;h<=4;h*=2){var g=r*(1+.2/h);g=Math.min(g,t+100663296);var m=Math.min(i,c(Math.max(t,g),65536)),v=Hi(m);if(v)return!0}return!1},sr={},zi=()=>d||"./this.program",Ze=()=>{if(!Ze.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:zi()};for(var i in sr)sr[i]===void 0?delete r[i]:r[i]=sr[i];var c=[];for(var i in r)c.push(`${i}=${r[i]}`);Ze.strings=c}return Ze.strings},qi=(t,r)=>{for(var i=0;i<t.length;++i)B[r++>>0]=t.charCodeAt(i);B[r>>0]=0},Ji=(t,r)=>{var i=0;return Ze().forEach((c,h)=>{var g=r+i;D[t+h*4>>2]=g,qi(c,g),i+=c.length+1}),0},Yi=(t,r)=>{var i=Ze();D[t>>2]=i.length;var c=0;return i.forEach(h=>c+=h.length+1),D[r>>2]=c,0},Gi=t=>t,bt=t=>t%4===0&&(t%100!==0||t%400===0),Qi=(t,r)=>{for(var i=0,c=0;c<=r;i+=t[c++]);return i},zr=[31,29,31,30,31,30,31,31,30,31,30,31],qr=[31,28,31,30,31,30,31,31,30,31,30,31],Ki=(t,r)=>{for(var i=new Date(t.getTime());r>0;){var c=bt(i.getFullYear()),h=i.getMonth(),g=(c?zr:qr)[h];if(r>g-i.getDate())r-=g-i.getDate()+1,i.setDate(1),h<11?i.setMonth(h+1):(i.setMonth(0),i.setFullYear(i.getFullYear()+1));else return i.setDate(i.getDate()+r),i}return i};function Xi(t,r,i){var c=Ur(t)+1,h=new Array(c);return xr(t,h,0,h.length),h}var Zi=(t,r)=>{B.set(t,r)},ea=(t,r,i,c)=>{var h=D[c+40>>2],g={tm_sec:E[c>>2],tm_min:E[c+4>>2],tm_hour:E[c+8>>2],tm_mday:E[c+12>>2],tm_mon:E[c+16>>2],tm_year:E[c+20>>2],tm_wday:E[c+24>>2],tm_yday:E[c+28>>2],tm_isdst:E[c+32>>2],tm_gmtoff:E[c+36>>2],tm_zone:h?ir(h):""},m=ir(i),v={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var b in v)m=m.replace(new RegExp(b,"g"),v[b]);var S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=["January","February","March","April","May","June","July","August","September","October","November","December"];function k(T,O,G){for(var K=typeof T=="number"?T.toString():T||"";K.length<O;)K=G[0]+K;return K}function N(T,O){return k(T,O,"0")}function j(T,O){function G(Ne){return Ne<0?-1:Ne>0?1:0}var K;return(K=G(T.getFullYear()-O.getFullYear()))===0&&(K=G(T.getMonth()-O.getMonth()))===0&&(K=G(T.getDate()-O.getDate())),K}function W(T){switch(T.getDay()){case 0:return new Date(T.getFullYear()-1,11,29);case 1:return T;case 2:return new Date(T.getFullYear(),0,3);case 3:return new Date(T.getFullYear(),0,2);case 4:return new Date(T.getFullYear(),0,1);case 5:return new Date(T.getFullYear()-1,11,31);case 6:return new Date(T.getFullYear()-1,11,30)}}function Y(T){var O=Ki(new Date(T.tm_year+1900,0,1),T.tm_yday),G=new Date(O.getFullYear(),0,4),K=new Date(O.getFullYear()+1,0,4),Ne=W(G),Tt=W(K);return j(Ne,O)<=0?j(Tt,O)<=0?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}var V={"%a":T=>S[T.tm_wday].substring(0,3),"%A":T=>S[T.tm_wday],"%b":T=>M[T.tm_mon].substring(0,3),"%B":T=>M[T.tm_mon],"%C":T=>{var O=T.tm_year+1900;return N(O/100|0,2)},"%d":T=>N(T.tm_mday,2),"%e":T=>k(T.tm_mday,2," "),"%g":T=>Y(T).toString().substring(2),"%G":T=>Y(T),"%H":T=>N(T.tm_hour,2),"%I":T=>{var O=T.tm_hour;return O==0?O=12:O>12&&(O-=12),N(O,2)},"%j":T=>N(T.tm_mday+Qi(bt(T.tm_year+1900)?zr:qr,T.tm_mon-1),3),"%m":T=>N(T.tm_mon+1,2),"%M":T=>N(T.tm_min,2),"%n":()=>`
`,"%p":T=>T.tm_hour>=0&&T.tm_hour<12?"AM":"PM","%S":T=>N(T.tm_sec,2),"%t":()=>"	","%u":T=>T.tm_wday||7,"%U":T=>{var O=T.tm_yday+7-T.tm_wday;return N(Math.floor(O/7),2)},"%V":T=>{var O=Math.floor((T.tm_yday+7-(T.tm_wday+6)%7)/7);if((T.tm_wday+371-T.tm_yday-2)%7<=2&&O++,O){if(O==53){var G=(T.tm_wday+371-T.tm_yday)%7;G!=4&&(G!=3||!bt(T.tm_year))&&(O=1)}}else{O=52;var K=(T.tm_wday+7-T.tm_yday-1)%7;(K==4||K==5&&bt(T.tm_year%400-1))&&O++}return N(O,2)},"%w":T=>T.tm_wday,"%W":T=>{var O=T.tm_yday+7-(T.tm_wday+6)%7;return N(Math.floor(O/7),2)},"%y":T=>(T.tm_year+1900).toString().substring(2),"%Y":T=>T.tm_year+1900,"%z":T=>{var O=T.tm_gmtoff,G=O>=0;return O=Math.abs(O)/60,O=O/60*100+O%60,(G?"+":"-")+("0000"+O).slice(-4)},"%Z":T=>T.tm_zone,"%%":()=>"%"};m=m.replace(/%%/g,"\0\0");for(var b in V)m.includes(b)&&(m=m.replace(new RegExp(b,"g"),V[b](g)));m=m.replace(/\0\0/g,"%");var ee=Xi(m);return ee.length>r?0:(Zi(ee,t),ee.length-1)},ta=(t,r,i,c,h)=>ea(t,r,i,c);_r=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},$o(),ke=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Lo(),ko(),Jo(),Nr=o.UnboundTypeError=Ko(Error,"UnboundTypeError"),ri(),oi();var ra={s:po,u:vo,b:wo,g:bo,q:Co,J:To,f:Eo,V:So,d:yo,da:Po,Q:_o,_:Mo,ca:Xo,ba:ei,w:ti,Y:ii,x:si,h:ui,L:li,M:di,t:hi,o:gi,K:vi,C:Si,A:Pi,ea:_i,$:$i,R:Ai,ha:rr,fa:Di,Z:Ni,N:ji,O:Fi,aa:Li,B:xi,X:Ui,W:Wi,T:Ji,U:Yi,E:ya,D:sa,F:va,n:wa,a:na,e:ca,m:aa,k:da,H:ma,v:ha,G:pa,z:Ca,P:Ea,l:la,j:ua,c:ia,p:oa,I:ga,r:ba,i:fa,y:Ta,ga:Gi,S:ta},Q=mo(),be=o._free=t=>(be=o._free=Q.ka)(t),ur=o._malloc=t=>(ur=o._malloc=Q.la)(t),Jr=t=>(Jr=Q.na)(t),H=(t,r)=>(H=Q.oa)(t,r),et=t=>(et=Q.pa)(t),q=()=>(q=Q.qa)(),J=t=>(J=Q.ra)(t),Yr=t=>(Yr=Q.sa)(t),Gr=t=>(Gr=Q.ta)(t),Qr=(t,r,i)=>(Qr=Q.ua)(t,r,i),Kr=t=>(Kr=Q.va)(t);o.dynCall_viijii=(t,r,i,c,h,g,m)=>(o.dynCall_viijii=Q.wa)(t,r,i,c,h,g,m);var Xr=o.dynCall_jiiii=(t,r,i,c,h)=>(Xr=o.dynCall_jiiii=Q.xa)(t,r,i,c,h);o.dynCall_iiiiij=(t,r,i,c,h,g,m)=>(o.dynCall_iiiiij=Q.ya)(t,r,i,c,h,g,m),o.dynCall_iiiiijj=(t,r,i,c,h,g,m,v,b)=>(o.dynCall_iiiiijj=Q.za)(t,r,i,c,h,g,m,v,b),o.dynCall_iiiiiijj=(t,r,i,c,h,g,m,v,b,S)=>(o.dynCall_iiiiiijj=Q.Aa)(t,r,i,c,h,g,m,v,b,S);function na(t,r){var i=q();try{return z(t)(r)}catch(c){if(J(i),c!==c+0)throw c;H(1,0)}}function oa(t,r,i,c){var h=q();try{z(t)(r,i,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function ia(t,r,i){var c=q();try{z(t)(r,i)}catch(h){if(J(c),h!==h+0)throw h;H(1,0)}}function aa(t,r,i,c){var h=q();try{return z(t)(r,i,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function sa(t,r,i,c,h){var g=q();try{return z(t)(r,i,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}function ua(t,r){var i=q();try{z(t)(r)}catch(c){if(J(i),c!==c+0)throw c;H(1,0)}}function ca(t,r,i){var c=q();try{return z(t)(r,i)}catch(h){if(J(c),h!==h+0)throw h;H(1,0)}}function la(t){var r=q();try{z(t)()}catch(i){if(J(r),i!==i+0)throw i;H(1,0)}}function da(t,r,i,c,h){var g=q();try{return z(t)(r,i,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}function fa(t,r,i,c,h,g,m,v,b,S,M){var k=q();try{z(t)(r,i,c,h,g,m,v,b,S,M)}catch(N){if(J(k),N!==N+0)throw N;H(1,0)}}function ha(t,r,i,c,h,g,m){var v=q();try{return z(t)(r,i,c,h,g,m)}catch(b){if(J(v),b!==b+0)throw b;H(1,0)}}function ga(t,r,i,c,h){var g=q();try{z(t)(r,i,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}function ma(t,r,i,c,h,g){var m=q();try{return z(t)(r,i,c,h,g)}catch(v){if(J(m),v!==v+0)throw v;H(1,0)}}function pa(t,r,i,c,h,g,m,v){var b=q();try{return z(t)(r,i,c,h,g,m,v)}catch(S){if(J(b),S!==S+0)throw S;H(1,0)}}function va(t,r,i,c){var h=q();try{return z(t)(r,i,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function ya(t,r,i,c){var h=q();try{return z(t)(r,i,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function wa(t){var r=q();try{return z(t)()}catch(i){if(J(r),i!==i+0)throw i;H(1,0)}}function ba(t,r,i,c,h,g,m,v){var b=q();try{z(t)(r,i,c,h,g,m,v)}catch(S){if(J(b),S!==S+0)throw S;H(1,0)}}function Ca(t,r,i,c,h,g,m,v,b,S,M,k){var N=q();try{return z(t)(r,i,c,h,g,m,v,b,S,M,k)}catch(j){if(J(N),j!==j+0)throw j;H(1,0)}}function Ta(t,r,i,c,h,g,m,v,b,S,M,k,N,j,W,Y){var V=q();try{z(t)(r,i,c,h,g,m,v,b,S,M,k,N,j,W,Y)}catch(ee){if(J(V),ee!==ee+0)throw ee;H(1,0)}}function Ea(t,r,i,c,h){var g=q();try{return Xr(t,r,i,c,h)}catch(m){if(J(g),m!==m+0)throw m;H(1,0)}}var Ct;Re=function t(){Ct||Zr(),Ct||(Re=t)};function Zr(){if(he>0||(Te(),he>0))return;function t(){Ct||(Ct=!0,o.calledRun=!0,!I&&(ie(),a(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),Ft()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),t()},1)):t()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Zr(),n.ready}})();function Ks(e){return Sr(Pr,e)}async function Xs(e,n){return Gs(Pr,e,n)}async function Zs(e,n){return Qs(Pr,e,n)}var rt;class pn extends EventTarget{constructor(n={}){var o;super(),Ps(this,rt,void 0);try{const a=(o=n==null?void 0:n.formats)==null?void 0:o.filter(s=>s!=="unknown");if((a==null?void 0:a.length)===0)throw new TypeError("Hint option provided, but is empty.");a==null||a.forEach(s=>{if(!Mt.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`)}),_s(this,rt,a!=null?a:[]),Ks().then(s=>{this.dispatchEvent(new CustomEvent("load",{detail:s}))}).catch(s=>{this.dispatchEvent(new CustomEvent("error",{detail:s}))})}catch(a){throw fn(a,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return $s.filter(n=>n!=="unknown")}async detect(n){try{const o=await Bs(n);if(o===null)return[];let a;try{Yn(o)?a=await Xs(o,{tryHarder:!0,formats:dn(this,rt).map(s=>Mt.get(s))}):a=await Zs(o,{tryHarder:!0,formats:dn(this,rt).map(s=>Mt.get(s))})}catch(s){throw console.error(s),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return a.map(s=>{const{topLeft:{x:u,y:d},topRight:{x:f,y:l},bottomLeft:{x:p,y},bottomRight:{x:C,y:_}}=s.position,P=Math.min(u,f,p,C),$=Math.min(d,l,y,_),I=Math.max(u,f,p,C),B=Math.max(d,l,y,_);return{boundingBox:new DOMRectReadOnly(P,$,I-P,B-$),rawValue:s.text,format:As(s.format),cornerPoints:[{x:u,y:d},{x:f,y:l},{x:C,y:_},{x:p,y}]}})}catch(o){throw fn(o,"Failed to execute 'detect' on 'BarcodeDetector'")}}}rt=new WeakMap;const Xn=(e,n,o="error")=>{let a,s;const u=new Promise((d,f)=>{a=d,s=f,e.addEventListener(n,a),e.addEventListener(o,s)});return u.finally(()=>{e.removeEventListener(n,a),e.removeEventListener(o,s)}),u},vn=e=>new Promise(n=>setTimeout(n,e));class Zn extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class eu extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class tu extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let eo;async function ru(e){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new pn({formats:e});const n=await window.BarcodeDetector.getSupportedFormats(),o=e.filter(a=>!n.includes(a));return o.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(o)}. Will use polyfill.`),new pn({formats:e})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:e}))}async function to(e){eo=await ru(e)}const nu=async(e,{detectHandler:n,locateHandler:o,minDelay:a,formats:s})=>{console.debug("[vue-qrcode-reader] start scanning"),await to(s);const u=d=>async f=>{if(e.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:l,contentBefore:p,lastScanHadContent:y}=d;if(f-l<a)window.requestAnimationFrame(u(d));else{const C=await eo.detect(e),_=C.some(I=>!p.includes(I.rawValue));_&&n(C);const P=C.length>0;P&&o(C),!P&&y&&o(C);const $={lastScanned:f,lastScanHadContent:P,contentBefore:_?C.map(I=>I.rawValue):p};window.requestAnimationFrame(u($))}}};u({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var ro={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.compactObject=io;oe.deprecated=fu;var ou=oe.detectBrowser=hu;oe.disableLog=cu;oe.disableWarnings=lu;oe.extractVersion=Rt;oe.filterStats=gu;oe.log=du;oe.walkStats=Ot;oe.wrapPeerConnectionEvent=uu;function iu(e,n,o){return n=au(n),n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function au(e){var n=su(e,"string");return $e(n)==="symbol"?n:String(n)}function su(e,n){if($e(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var a=o.call(e,n||"default");if($e(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function $e(e){return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$e(e)}var no=!0,oo=!0;function Rt(e,n,o){var a=e.match(n);return a&&a.length>=o&&parseInt(a[o],10)}function uu(e,n,o){if(e.RTCPeerConnection){var a=e.RTCPeerConnection.prototype,s=a.addEventListener;a.addEventListener=function(d,f){if(d!==n)return s.apply(this,arguments);var l=function(p){var y=o(p);y&&(f.handleEvent?f.handleEvent(y):f(y))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(f,l),s.apply(this,[d,l])};var u=a.removeEventListener;a.removeEventListener=function(d,f){if(d!==n||!this._eventMap||!this._eventMap[n])return u.apply(this,arguments);if(!this._eventMap[n].has(f))return u.apply(this,arguments);var l=this._eventMap[n].get(f);return this._eventMap[n].delete(f),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[d,l])},Object.defineProperty(a,"on"+n,{get:function(){return this["_on"+n]},set:function(d){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),d&&this.addEventListener(n,this["_on"+n]=d)},enumerable:!0,configurable:!0})}}function cu(e){return typeof e!="boolean"?new Error("Argument type: "+$e(e)+". Please use a boolean."):(no=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function lu(e){return typeof e!="boolean"?new Error("Argument type: "+$e(e)+". Please use a boolean."):(oo=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function du(){if((typeof window>"u"?"undefined":$e(window))==="object"){if(no)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function fu(e,n){oo&&console.warn(e+" is deprecated, please use "+n+" instead.")}function hu(e){var n={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return n.browser="Not a browser.",n;var o=e.navigator;if(o.mozGetUserMedia)n.browser="firefox",n.version=Rt(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)n.browser="chrome",n.version=Rt(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))n.browser="safari",n.version=Rt(o.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return n.browser="Not a supported browser.",n;return n}function yn(e){return Object.prototype.toString.call(e)==="[object Object]"}function io(e){return yn(e)?Object.keys(e).reduce(function(n,o){var a=yn(e[o]),s=a?io(e[o]):e[o],u=a&&!Object.keys(s).length;return s===void 0||u?n:Object.assign(n,iu({},o,s))},{}):e}function Ot(e,n,o){!n||o.has(n.id)||(o.set(n.id,n),Object.keys(n).forEach(function(a){a.endsWith("Id")?Ot(e,e.get(n[a]),o):a.endsWith("Ids")&&n[a].forEach(function(s){Ot(e,e.get(s),o)})}))}function gu(e,n,o){var a=o?"outbound-rtp":"inbound-rtp",s=new Map;if(n===null)return s;var u=[];return e.forEach(function(d){d.type==="track"&&d.trackIdentifier===n.id&&u.push(d)}),u.forEach(function(d){e.forEach(function(f){f.type===a&&f.trackId===d.id&&Ot(e,f,s)})}),s}Object.defineProperty(ro,"__esModule",{value:!0});var mu=ro.shimGetUserMedia=yu,pu=vu(oe);function ao(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(ao=function(a){return a?o:n})(e)}function vu(e,n){if(e&&e.__esModule)return e;if(e===null||Pe(e)!=="object"&&typeof e!="function")return{default:e};var o=ao(n);if(o&&o.has(e))return o.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(a,u,d):a[u]=e[u]}return a.default=e,o&&o.set(e,a),a}function Pe(e){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pe(e)}var wn=pu.log;function yu(e,n){var o=e&&e.navigator;if(o.mediaDevices){var a=function(l){if(Pe(l)!=="object"||l.mandatory||l.optional)return l;var p={};return Object.keys(l).forEach(function(y){if(!(y==="require"||y==="advanced"||y==="mediaSource")){var C=Pe(l[y])==="object"?l[y]:{ideal:l[y]};C.exact!==void 0&&typeof C.exact=="number"&&(C.min=C.max=C.exact);var _=function($,I){return $?$+I.charAt(0).toUpperCase()+I.slice(1):I==="deviceId"?"sourceId":I};if(C.ideal!==void 0){p.optional=p.optional||[];var P={};typeof C.ideal=="number"?(P[_("min",y)]=C.ideal,p.optional.push(P),P={},P[_("max",y)]=C.ideal,p.optional.push(P)):(P[_("",y)]=C.ideal,p.optional.push(P))}C.exact!==void 0&&typeof C.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[_("",y)]=C.exact):["min","max"].forEach(function($){C[$]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[_($,y)]=C[$])})}}),l.advanced&&(p.optional=(p.optional||[]).concat(l.advanced)),p},s=function(l,p){if(n.version>=61)return p(l);if(l=JSON.parse(JSON.stringify(l)),l&&Pe(l.audio)==="object"){var y=function($,I,B){I in $&&!(B in $)&&($[B]=$[I],delete $[I])};l=JSON.parse(JSON.stringify(l)),y(l.audio,"autoGainControl","googAutoGainControl"),y(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=a(l.audio)}if(l&&Pe(l.video)==="object"){var C=l.video.facingMode;C=C&&(Pe(C)==="object"?C:{ideal:C});var _=n.version<66;if(C&&(C.exact==="user"||C.exact==="environment"||C.ideal==="user"||C.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!_)){delete l.video.facingMode;var P;if(C.exact==="environment"||C.ideal==="environment"?P=["back","rear"]:(C.exact==="user"||C.ideal==="user")&&(P=["front"]),P)return o.mediaDevices.enumerateDevices().then(function($){$=$.filter(function(B){return B.kind==="videoinput"});var I=$.find(function(B){return P.some(function(w){return B.label.toLowerCase().includes(w)})});return!I&&$.length&&P.includes("back")&&(I=$[$.length-1]),I&&(l.video.deviceId=C.exact?{exact:I.deviceId}:{ideal:I.deviceId}),l.video=a(l.video),wn("chrome: "+JSON.stringify(l)),p(l)})}l.video=a(l.video)}return wn("chrome: "+JSON.stringify(l)),p(l)},u=function(l){return n.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},d=function(l,p,y){s(l,function(C){o.webkitGetUserMedia(C,p,function(_){y&&y(u(_))})})};if(o.getUserMedia=d.bind(o),o.mediaDevices.getUserMedia){var f=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(l){return s(l,function(p){return f(p).then(function(y){if(p.audio&&!y.getAudioTracks().length||p.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(function(C){C.stop()}),new DOMException("","NotFoundError");return y},function(y){return Promise.reject(u(y))})})}}}}var so={};Object.defineProperty(so,"__esModule",{value:!0});var wu=so.shimGetUserMedia=Tu,bu=Cu(oe);function uo(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(uo=function(a){return a?o:n})(e)}function Cu(e,n){if(e&&e.__esModule)return e;if(e===null||xe(e)!=="object"&&typeof e!="function")return{default:e};var o=uo(n);if(o&&o.has(e))return o.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(a,u,d):a[u]=e[u]}return a.default=e,o&&o.set(e,a),a}function xe(e){return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xe(e)}function Tu(e,n){var o=e&&e.navigator,a=e&&e.MediaStreamTrack;if(o.getUserMedia=function(l,p,y){bu.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(l).then(p,y)},!(n.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){var s=function(l,p,y){p in l&&!(y in l)&&(l[y]=l[p],delete l[p])},u=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(l){return xe(l)==="object"&&xe(l.audio)==="object"&&(l=JSON.parse(JSON.stringify(l)),s(l.audio,"autoGainControl","mozAutoGainControl"),s(l.audio,"noiseSuppression","mozNoiseSuppression")),u(l)},a&&a.prototype.getSettings){var d=a.prototype.getSettings;a.prototype.getSettings=function(){var l=d.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(a&&a.prototype.applyConstraints){var f=a.prototype.applyConstraints;a.prototype.applyConstraints=function(l){return this.kind==="audio"&&xe(l)==="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[l])}}}}var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.shimAudioContext=Iu;ve.shimCallbacksAPI=$u;ve.shimConstraints=fo;ve.shimCreateOfferLegacy=Du;var Eu=ve.shimGetUserMedia=Au;ve.shimLocalStreamsAPI=Pu;ve.shimRTCIceServerUrls=Mu;ve.shimRemoteStreamsAPI=_u;ve.shimTrackEventTransceiver=Ru;var co=Su(oe);function lo(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(lo=function(a){return a?o:n})(e)}function Su(e,n){if(e&&e.__esModule)return e;if(e===null||Ae(e)!=="object"&&typeof e!="function")return{default:e};var o=lo(n);if(o&&o.has(e))return o.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(a,u,d):a[u]=e[u]}return a.default=e,o&&o.set(e,a),a}function Ae(e){return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ae(e)}function Pu(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(o){var a=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(function(s){return n.call(a,s,o)}),o.getVideoTracks().forEach(function(s){return n.call(a,s,o)})},e.RTCPeerConnection.prototype.addTrack=function(o){for(var a=this,s=arguments.length,u=new Array(s>1?s-1:0),d=1;d<s;d++)u[d-1]=arguments[d];return u&&u.forEach(function(f){a._localStreams?a._localStreams.includes(f)||a._localStreams.push(f):a._localStreams=[f]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(o){var a=this;this._localStreams||(this._localStreams=[]);var s=this._localStreams.indexOf(o);if(s!==-1){this._localStreams.splice(s,1);var u=o.getTracks();this.getSenders().forEach(function(d){u.includes(d.track)&&a.removeTrack(d)})}})}}function _u(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(o){var a=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(function(u){if(a._remoteStreams||(a._remoteStreams=[]),!a._remoteStreams.includes(u)){a._remoteStreams.push(u);var d=new Event("addstream");d.stream=u,a.dispatchEvent(d)}})})}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(function(s){if(o._remoteStreams||(o._remoteStreams=[]),!(o._remoteStreams.indexOf(s)>=0)){o._remoteStreams.push(s);var u=new Event("addstream");u.stream=s,o.dispatchEvent(u)}})}),n.apply(o,arguments)}}}function $u(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)){var n=e.RTCPeerConnection.prototype,o=n.createOffer,a=n.createAnswer,s=n.setLocalDescription,u=n.setRemoteDescription,d=n.addIceCandidate;n.createOffer=function(l,p){var y=arguments.length>=2?arguments[2]:arguments[0],C=o.apply(this,[y]);return p?(C.then(l,p),Promise.resolve()):C},n.createAnswer=function(l,p){var y=arguments.length>=2?arguments[2]:arguments[0],C=a.apply(this,[y]);return p?(C.then(l,p),Promise.resolve()):C};var f=function(l,p,y){var C=s.apply(this,[l]);return y?(C.then(p,y),Promise.resolve()):C};n.setLocalDescription=f,f=function(l,p,y){var C=u.apply(this,[l]);return y?(C.then(p,y),Promise.resolve()):C},n.setRemoteDescription=f,f=function(l,p,y){var C=d.apply(this,[l]);return y?(C.then(p,y),Promise.resolve()):C},n.addIceCandidate=f}}function Au(e){var n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){var o=n.mediaDevices,a=o.getUserMedia.bind(o);n.mediaDevices.getUserMedia=function(s){return a(fo(s))}}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=function(s,u,d){n.mediaDevices.getUserMedia(s).then(u,d)}.bind(n))}function fo(e){return e&&e.video!==void 0?Object.assign({},e,{video:co.compactObject(e.video)}):e}function Mu(e){if(e.RTCPeerConnection){var n=e.RTCPeerConnection;e.RTCPeerConnection=function(o,a){if(o&&o.iceServers){for(var s=[],u=0;u<o.iceServers.length;u++){var d=o.iceServers[u];d.urls===void 0&&d.url?(co.deprecated("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,s.push(d)):s.push(o.iceServers[u])}o.iceServers=s}return new n(o,a)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}}function Ru(e){Ae(e)==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Du(e){var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);var a=this.getTransceivers().find(function(u){return u.receiver.track.kind==="audio"});o.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):o.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);var s=this.getTransceivers().find(function(u){return u.receiver.track.kind==="video"});o.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):o.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function Iu(e){Ae(e)!=="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Ou=e=>{let n=!1,o;return(...a)=>(n||(o=e(a),n=!0),o)};function Ce(e,n){if(e===!1)throw new Error(n!=null?n:"assertion failure")}function bn(e){throw new Error("this code should be unreachable")}const Bu=Ou(()=>{const e=ou(window);switch(e.browser){case"chrome":mu(window,e);break;case"firefox":wu(window,e);break;case"safari":Eu(window,e);break;default:throw new Zn}});let Ue=Promise.resolve({type:"stop",data:{}});async function Cn(e,n,o){var a,s,u;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(n)),window.isSecureContext!==!0)throw new eu;if(((a=navigator==null?void 0:navigator.mediaDevices)==null?void 0:a.getUserMedia)===void 0)throw new Zn;Bu(),console.debug("[vue-qrcode-reader] calling getUserMedia");const d=await navigator.mediaDevices.getUserMedia({audio:!1,video:n});e.srcObject!==void 0?e.srcObject=d:e.mozSrcObject!==void 0?e.mozSrcObject=d:window.URL.createObjectURL?e.src=window.URL.createObjectURL(d):window.webkitURL?e.src=window.webkitURL.createObjectURL(d):e.src=d.id,e.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([Xn(e,"loadeddata"),vn(6e3).then(()=>{throw new tu})]),console.debug("[vue-qrcode-reader] video element loaded"),await vn(500);const[f]=d.getVideoTracks(),l=(u=(s=f==null?void 0:f.getCapabilities)==null?void 0:s.call(f))!=null?u:{};let p=!1;return o&&l.torch&&(await f.applyConstraints({advanced:[{torch:!0}]}),p=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:e,stream:d,capabilities:l,constraints:n,isTorchOn:p}}}async function ku(e,{constraints:n,torch:o,restart:a=!1}){Ue=Ue.then(u=>{if(u.type==="start"){const{data:{videoEl:d,stream:f,constraints:l,isTorchOn:p}}=u;return!a&&e===d&&n===l&&o===p?u:ho(d,f,p).then(()=>Cn(e,n,o))}else if(u.type==="stop"||u.type==="failed")return Cn(e,n,o);bn()}).catch(u=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${u}"`),{type:"failed",error:u}));const s=await Ue;if(s.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(s.type==="failed")throw s.error;if(s.type==="start")return s.data.capabilities;bn()}async function ho(e,n,o){console.debug("[vue-qrcode-reader] stopping camera"),e.src="",e.srcObject=null,e.load(),await Xn(e,"error");for(const a of n.getTracks())o!=null||await a.applyConstraints({advanced:[{torch:!1}]}),n.removeTrack(a),a.stop();return{type:"stop",data:{}}}async function $t(){if(Ue=Ue.then(e=>{if(e.type==="stop"||e.type==="failed")return e;const{data:{videoEl:n,stream:o,isTorchOn:a}}=e;return ho(n,o,a)}),(await Ue).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const Nu=_a({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(e,{emit:n}){const o=e,a=n,s=le(o.constraints),u=le(o.formats);Le(()=>o.constraints,(A,E)=>{JSON.stringify(A)!==JSON.stringify(E)&&(s.value=A)},{deep:!0}),Le(()=>o.formats,(A,E)=>{JSON.stringify(A)!==JSON.stringify(E)&&(u.value=A)},{deep:!0});const d=le(),f=le(),l=le(),p=le(!1),y=le(!1);$a(()=>{y.value=!0}),Aa(()=>{$t()});const C=cr(()=>({torch:o.torch,constraints:s.value,shouldStream:y.value&&!o.paused}));Le(C,async A=>{const E=l.value;Ce(E!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const D=d.value;Ce(D!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const L=D.getContext("2d");if(Ce(L!==null,"if cavnas is defined, canvas 2d context should also be non-null"),A.shouldStream){$t(),p.value=!1;try{const U=await ku(E,A);y.value?(p.value=!0,a("camera-on",U)):await $t()}catch(U){a("error",U)}}else D.width=E.videoWidth,D.height=E.videoHeight,L.drawImage(E,0,0,E.videoWidth,E.videoHeight),$t(),p.value=!1,a("camera-off")},{deep:!0}),Le(u,async A=>{y.value&&await to(A)});const _=cr(()=>C.value.shouldStream&&p.value);Le(_,A=>{if(A){Ce(d.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),P(d.value),Ce(f.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),P(f.value);const E=()=>o.track===void 0?500:40;Ce(l.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),nu(l.value,{detectHandler:D=>a("detect",D),formats:u.value,locateHandler:$,minDelay:E()})}});const P=A=>{const E=A.getContext("2d");Ce(E!==null,"canvas 2d context should always be non-null"),E.clearRect(0,0,A.width,A.height)},$=A=>{const E=f.value;Ce(E!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const D=l.value;if(Ce(D!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),A.length===0||o.track===void 0)P(E);else{const L=D.offsetWidth,U=D.offsetHeight,X=D.videoWidth,ne=D.videoHeight,re=Math.max(L/X,U/ne),de=X*re,Te=ne*re,ie=de/X,Ft=Te/ne,Lt=(L-de)/2,xt=(U-Te)/2,Je=({x:Ee,y:ae})=>({x:Math.floor(Ee*ie),y:Math.floor(ae*Ft)}),he=({x:Ee,y:ae})=>({x:Math.floor(Ee+Lt),y:Math.floor(ae+xt)}),Re=A.map(Ee=>{const{boundingBox:ae,cornerPoints:Vt}=Ee,{x:st,y:Se}=he(Je({x:ae.x,y:ae.y})),{x:ut,y:Ht}=Je({x:ae.width,y:ae.height});return{...Ee,cornerPoints:Vt.map(ct=>he(Je(ct))),boundingBox:DOMRectReadOnly.fromRect({x:st,y:Se,width:ut,height:Ht})}});E.width=D.offsetWidth,E.height=D.offsetHeight;const Ut=E.getContext("2d");o.track(Re,Ut)}},I={width:"100%",height:"100%",position:"relative","z-index":"0"},B={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},w={width:"100%",height:"100%","object-fit":"cover"},R=cr(()=>_.value?w:{...w,visibility:"hidden",position:"absolute"});return(A,E)=>(At(),Tn("div",{style:I},[tt("video",{ref_key:"videoRef",ref:l,style:Ma(R.value),autoplay:"",muted:"",playsinline:""},null,4),Ra(tt("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:d,style:w},null,512),[[Da,!_.value]]),tt("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:f,style:B},null,512),tt("div",{style:B},[Ia(A.$slots,"default")])]))}}),ju=["src"],Wu={__name:"FirebaseSettingsPage",setup(e){const n=Oa(),o=Pa(),a=ka(),s=le(!1),u=le(null),d=le(""),f=le(!1),l=le(""),p=B=>{if(B&&B.length>0){const w=B[0];w.rawValue&&(n.setNewConfig(JSON.parse(w.rawValue)),f.value=!1)}},y=B=>{B.catch(w=>{f.value=!1,o.notify({message:w.message||w})})},C=()=>{if(!rn.isEmpty(n.fbConfig)){const B=JSON.stringify(n.fbConfig);it.toDataURL(B,(w,R)=>{w?(o.notify({message:w.message||w}),console.log("error",w)):l.value=R})}};Le(()=>n.fbConfig,()=>{C()},{immediate:!0});const _=()=>{rn.isEmpty(n.fbConfig)||(d.value=JSON.stringify(n.fbConfig)),Na(()=>{var B,w;(B=u.value)==null||B.focus(),(w=u.value)==null||w.select()})},P=()=>{n.setNewConfig(JSON.parse(d.value)),$()},$=()=>{s.value=!1},I=async()=>{try{n.initFb(),a.push({name:"LoginPage"})}catch(B){o.notify({message:B.message||B})}};return(B,w)=>(At(),Tn(Ba,null,[x(Sa,{class:"flex flex-center"},{default:te(()=>[x(Et,{class:"q-pa-md",style:{width:"98%"}},{default:te(()=>[x(je,{class:"text-center",style:{"font-size":"28px"}},{default:te(()=>w[12]||(w[12]=[nn(" Firebase Settings ")])),_:1}),x(Fa,{onSubmit:ja(I,["prevent"])},{default:te(()=>[x(je,null,{default:te(()=>[x(Oe,{modelValue:se(n).fbConfig.apiKey,"onUpdate:modelValue":w[0]||(w[0]=R=>se(n).fbConfig.apiKey=R),label:"Api Key",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.authDomain,"onUpdate:modelValue":w[1]||(w[1]=R=>se(n).fbConfig.authDomain=R),label:"Auth Domain",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.projectId,"onUpdate:modelValue":w[2]||(w[2]=R=>se(n).fbConfig.projectId=R),label:"Project Id",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.storageBucket,"onUpdate:modelValue":w[3]||(w[3]=R=>se(n).fbConfig.storageBucket=R),label:"Storage Bucket",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.messagingSenderId,"onUpdate:modelValue":w[4]||(w[4]=R=>se(n).fbConfig.messagingSenderId=R),label:"Message Sender Id",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(Oe,{modelValue:se(n).fbConfig.appId,"onUpdate:modelValue":w[5]||(w[5]=R=>se(n).fbConfig.appId=R),label:"App Id",required:"",outlined:""},null,8,["modelValue"])]),_:1}),x(St,null,{default:te(()=>[x(Fe,{label:"Submit",color:"primary",type:"submit",class:"full-width"})]),_:1})]),_:1}),x(St,null,{default:te(()=>[x(Fe,{label:"Import/Export via String",color:"secondary",class:"full-width q-mb-md",onClick:w[6]||(w[6]=R=>s.value=!s.value)}),f.value?an("",!0):(At(),on(Fe,{key:0,label:"Import via QR code",color:"secondary",class:"full-width",onClick:w[7]||(w[7]=R=>f.value=!0)}))]),_:1})]),_:1}),l.value?(At(),on(Et,{key:0,class:"q-my-md",style:{width:"100%",height:"auto"}},{default:te(()=>[x(je,{class:"text-center",style:{"font-size":"28px"}},{default:te(()=>w[13]||(w[13]=[nn(" Share with the QR Code ")])),_:1}),x(je,null,{default:te(()=>[tt("img",{src:l.value,alt:"QR Code",style:{width:"100%",height:"auto"}},null,8,ju)]),_:1})]),_:1})):an("",!0)]),_:1}),x(sn,{modelValue:s.value,"onUpdate:modelValue":w[9]||(w[9]=R=>s.value=R),persistent:"",onBeforeShow:_},{default:te(()=>[x(Et,null,{default:te(()=>[x(je,null,{default:te(()=>[x(Oe,{ref_key:"inputRef",ref:u,modelValue:d.value,"onUpdate:modelValue":w[8]||(w[8]=R=>d.value=R),type:"textarea",label:"Config by String",autoresize:!0},null,8,["modelValue"])]),_:1}),x(St,{align:"center"},{default:te(()=>[x(Fe,{icon:"close",color:"red",onClick:$}),x(Fe,{icon:"check",color:"primary",onClick:P})]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(sn,{modelValue:f.value,"onUpdate:modelValue":w[11]||(w[11]=R=>f.value=R),persistent:""},{default:te(()=>[x(Et,null,{default:te(()=>[x(je,null,{default:te(()=>[x(se(Nu),{onDetect:p,onInit:y,class:"scanner"})]),_:1}),x(St,{align:"center"},{default:te(()=>[x(Fe,{label:"Stop Scanning",class:"q-mt-md",onClick:w[10]||(w[10]=R=>f.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{Wu as default};
