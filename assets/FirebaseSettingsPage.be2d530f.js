import{u as wn,a as Le,c as Rt,Q as Ei,b as Oe}from"./use-quasar.8a51beb7.js";import{r as le,a as Ne,w as Be,u as ot,v as bn,x as te,y as F,E as gr,C as br,H as Si,N as Pi,K as ke,aI as _i,o as $i,q as Ai,D as St,aq as Mi,ad as Ri,aB as Di,aJ as Ii,G as oe,F as Oi,I as Bi,J as ki,aG as Ni}from"./index.5a6bea89.js";import{Q as Dt}from"./QCardActions.997a31ce.js";import{Q as ji}from"./QForm.b6a3051f.js";import{Q as Cn}from"./QDialog.daf787b2.js";import"./scroll.64b1b420.js";var it={},Fi=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Tn={},ue={};let Cr;const xi=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ue.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};ue.getSymbolTotalCodewords=function(n){return xi[n]};ue.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};ue.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');Cr=n};ue.isKanjiModeEnabled=function(){return typeof Cr!="undefined"};ue.toSJIS=function(n){return Cr(n)};var kt={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+o)}}e.isValid=function(i){return i&&typeof i.bit!="undefined"&&i.bit>=0&&i.bit<4},e.from=function(i,s){if(e.isValid(i))return i;try{return n(i)}catch{return s}}})(kt);function En(){this.buffer=[],this.length=0}En.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let o=0;o<n;o++)this.putBit((e>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var Li=En;function st(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}st.prototype.set=function(e,n,o,i){const s=e*this.size+n;this.data[s]=o,i&&(this.reservedBit[s]=!0)};st.prototype.get=function(e,n){return this.data[e*this.size+n]};st.prototype.xor=function(e,n,o){this.data[e*this.size+n]^=o};st.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};var Ui=st,Sn={};(function(e){const n=ue.getSymbolSize;e.getRowColCoords=function(i){if(i===1)return[];const s=Math.floor(i/7)+2,u=n(i),d=u===145?26:Math.ceil((u-13)/(2*s-2))*2,f=[u-7];for(let l=1;l<s-1;l++)f[l]=f[l-1]-d;return f.push(6),f.reverse()},e.getPositions=function(i){const s=[],u=e.getRowColCoords(i),d=u.length;for(let f=0;f<d;f++)for(let l=0;l<d;l++)f===0&&l===0||f===0&&l===d-1||f===d-1&&l===0||s.push([u[f],u[l]]);return s}})(Sn);var Pn={};const Vi=ue.getSymbolSize,on=7;Pn.getPositions=function(n){const o=Vi(n);return[[0,0],[o-on,0],[0,o-on]]};var _n={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const u=s.size;let d=0,f=0,l=0,m=null,p=null;for(let w=0;w<u;w++){f=l=0,m=p=null;for(let C=0;C<u;C++){let P=s.get(w,C);P===m?f++:(f>=5&&(d+=n.N1+(f-5)),m=P,f=1),P=s.get(C,w),P===p?l++:(l>=5&&(d+=n.N1+(l-5)),p=P,l=1)}f>=5&&(d+=n.N1+(f-5)),l>=5&&(d+=n.N1+(l-5))}return d},e.getPenaltyN2=function(s){const u=s.size;let d=0;for(let f=0;f<u-1;f++)for(let l=0;l<u-1;l++){const m=s.get(f,l)+s.get(f,l+1)+s.get(f+1,l)+s.get(f+1,l+1);(m===4||m===0)&&d++}return d*n.N2},e.getPenaltyN3=function(s){const u=s.size;let d=0,f=0,l=0;for(let m=0;m<u;m++){f=l=0;for(let p=0;p<u;p++)f=f<<1&2047|s.get(m,p),p>=10&&(f===1488||f===93)&&d++,l=l<<1&2047|s.get(p,m),p>=10&&(l===1488||l===93)&&d++}return d*n.N3},e.getPenaltyN4=function(s){let u=0;const d=s.data.length;for(let l=0;l<d;l++)u+=s.data[l];return Math.abs(Math.ceil(u*100/d/5)-10)*n.N4};function o(i,s,u){switch(i){case e.Patterns.PATTERN000:return(s+u)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return u%3===0;case e.Patterns.PATTERN011:return(s+u)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(u/3))%2===0;case e.Patterns.PATTERN101:return s*u%2+s*u%3===0;case e.Patterns.PATTERN110:return(s*u%2+s*u%3)%2===0;case e.Patterns.PATTERN111:return(s*u%3+(s+u)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}e.applyMask=function(s,u){const d=u.size;for(let f=0;f<d;f++)for(let l=0;l<d;l++)u.isReserved(l,f)||u.xor(l,f,o(s,l,f))},e.getBestMask=function(s,u){const d=Object.keys(e.Patterns).length;let f=0,l=1/0;for(let m=0;m<d;m++){u(m),e.applyMask(m,s);const p=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(m,s),p<l&&(l=p,f=m)}return f}})(_n);var Nt={};const _e=kt,Pt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],_t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Nt.getBlocksCount=function(n,o){switch(o){case _e.L:return Pt[(n-1)*4+0];case _e.M:return Pt[(n-1)*4+1];case _e.Q:return Pt[(n-1)*4+2];case _e.H:return Pt[(n-1)*4+3];default:return}};Nt.getTotalCodewordsCount=function(n,o){switch(o){case _e.L:return _t[(n-1)*4+0];case _e.M:return _t[(n-1)*4+1];case _e.Q:return _t[(n-1)*4+2];case _e.H:return _t[(n-1)*4+3];default:return}};var $n={},jt={};const nt=new Uint8Array(512),It=new Uint8Array(256);(function(){let n=1;for(let o=0;o<255;o++)nt[o]=n,It[n]=o,n<<=1,n&256&&(n^=285);for(let o=255;o<512;o++)nt[o]=nt[o-255]})();jt.log=function(n){if(n<1)throw new Error("log("+n+")");return It[n]};jt.exp=function(n){return nt[n]};jt.mul=function(n,o){return n===0||o===0?0:nt[It[n]+It[o]]};(function(e){const n=jt;e.mul=function(i,s){const u=new Uint8Array(i.length+s.length-1);for(let d=0;d<i.length;d++)for(let f=0;f<s.length;f++)u[d+f]^=n.mul(i[d],s[f]);return u},e.mod=function(i,s){let u=new Uint8Array(i);for(;u.length-s.length>=0;){const d=u[0];for(let l=0;l<s.length;l++)u[l]^=n.mul(s[l],d);let f=0;for(;f<u.length&&u[f]===0;)f++;u=u.slice(f)}return u},e.generateECPolynomial=function(i){let s=new Uint8Array([1]);for(let u=0;u<i;u++)s=e.mul(s,new Uint8Array([1,n.exp(u)]));return s}})($n);const An=$n;function Tr(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Tr.prototype.initialize=function(n){this.degree=n,this.genPoly=An.generateECPolynomial(this.degree)};Tr.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(n.length+this.degree);o.set(n);const i=An.mod(o,this.genPoly),s=this.degree-i.length;if(s>0){const u=new Uint8Array(this.degree);return u.set(i,s),u}return i};var Hi=Tr,Mn={},Me={},Er={};Er.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var pe={};const Rn="[0-9]+",Wi="[A-Z $%*+\\-./:]+";let at="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";at=at.replace(/u/g,"\\u");const qi="(?:(?![A-Z0-9 $%*+\\-./:]|"+at+`)(?:.|[\r
]))+`;pe.KANJI=new RegExp(at,"g");pe.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");pe.BYTE=new RegExp(qi,"g");pe.NUMERIC=new RegExp(Rn,"g");pe.ALPHANUMERIC=new RegExp(Wi,"g");const zi=new RegExp("^"+at+"$"),Ji=new RegExp("^"+Rn+"$"),Yi=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");pe.testKanji=function(n){return zi.test(n)};pe.testNumeric=function(n){return Ji.test(n)};pe.testAlphanumeric=function(n){return Yi.test(n)};(function(e){const n=Er,o=pe;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(u,d){if(!u.ccBits)throw new Error("Invalid mode: "+u);if(!n.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?u.ccBits[0]:d<27?u.ccBits[1]:u.ccBits[2]},e.getBestModeForData=function(u){return o.testNumeric(u)?e.NUMERIC:o.testAlphanumeric(u)?e.ALPHANUMERIC:o.testKanji(u)?e.KANJI:e.BYTE},e.toString=function(u){if(u&&u.id)return u.id;throw new Error("Invalid mode")},e.isValid=function(u){return u&&u.bit&&u.ccBits};function i(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(u,d){if(e.isValid(u))return u;try{return i(u)}catch{return d}}})(Me);(function(e){const n=ue,o=Nt,i=kt,s=Me,u=Er,d=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,f=n.getBCHDigit(d);function l(C,P,$){for(let D=1;D<=40;D++)if(P<=e.getCapacity(D,$,C))return D}function m(C,P){return s.getCharCountIndicator(C,P)+4}function p(C,P){let $=0;return C.forEach(function(D){$+=m(D.mode,P)+D.getBitsLength()}),$}function w(C,P){for(let $=1;$<=40;$++)if(p(C,$)<=e.getCapacity($,P,s.MIXED))return $}e.from=function(P,$){return u.isValid(P)?parseInt(P,10):$},e.getCapacity=function(P,$,D){if(!u.isValid(P))throw new Error("Invalid QR Code version");typeof D=="undefined"&&(D=s.BYTE);const j=n.getSymbolTotalCodewords(P),R=o.getTotalCodewordsCount(P,$),k=(j-R)*8;if(D===s.MIXED)return k;const _=k-m(D,P);switch(D){case s.NUMERIC:return Math.floor(_/10*3);case s.ALPHANUMERIC:return Math.floor(_/11*2);case s.KANJI:return Math.floor(_/13);case s.BYTE:default:return Math.floor(_/8)}},e.getBestVersionForData=function(P,$){let D;const j=i.from($,i.M);if(Array.isArray(P)){if(P.length>1)return w(P,j);if(P.length===0)return 1;D=P[0]}else D=P;return l(D.mode,D.getLength(),j)},e.getEncodedBits=function(P){if(!u.isValid(P)||P<7)throw new Error("Invalid QR Code version");let $=P<<12;for(;n.getBCHDigit($)-f>=0;)$^=d<<n.getBCHDigit($)-f;return P<<12|$}})(Mn);var Dn={};const pr=ue,In=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Gi=1<<14|1<<12|1<<10|1<<4|1<<1,an=pr.getBCHDigit(In);Dn.getEncodedBits=function(n,o){const i=n.bit<<3|o;let s=i<<10;for(;pr.getBCHDigit(s)-an>=0;)s^=In<<pr.getBCHDigit(s)-an;return(i<<10|s)^Gi};var On={};const Qi=Me;function He(e){this.mode=Qi.NUMERIC,this.data=e.toString()}He.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};He.prototype.getLength=function(){return this.data.length};He.prototype.getBitsLength=function(){return He.getBitsLength(this.data.length)};He.prototype.write=function(n){let o,i,s;for(o=0;o+3<=this.data.length;o+=3)i=this.data.substr(o,3),s=parseInt(i,10),n.put(s,10);const u=this.data.length-o;u>0&&(i=this.data.substr(o),s=parseInt(i,10),n.put(s,u*3+1))};var Ki=He;const Xi=Me,lr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function We(e){this.mode=Xi.ALPHANUMERIC,this.data=e}We.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};We.prototype.getLength=function(){return this.data.length};We.prototype.getBitsLength=function(){return We.getBitsLength(this.data.length)};We.prototype.write=function(n){let o;for(o=0;o+2<=this.data.length;o+=2){let i=lr.indexOf(this.data[o])*45;i+=lr.indexOf(this.data[o+1]),n.put(i,11)}this.data.length%2&&n.put(lr.indexOf(this.data[o]),6)};var Zi=We;const es=Me;function qe(e){this.mode=es.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}qe.getBitsLength=function(n){return n*8};qe.prototype.getLength=function(){return this.data.length};qe.prototype.getBitsLength=function(){return qe.getBitsLength(this.data.length)};qe.prototype.write=function(e){for(let n=0,o=this.data.length;n<o;n++)e.put(this.data[n],8)};var ts=qe;const rs=Me,ns=ue;function ze(e){this.mode=rs.KANJI,this.data=e}ze.getBitsLength=function(n){return n*13};ze.prototype.getLength=function(){return this.data.length};ze.prototype.getBitsLength=function(){return ze.getBitsLength(this.data.length)};ze.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let o=ns.toSJIS(this.data[n]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),e.put(o,13)}};var os=ze,Bn={exports:{}};(function(e){var n={single_source_shortest_paths:function(o,i,s){var u={},d={};d[i]=0;var f=n.PriorityQueue.make();f.push(i,0);for(var l,m,p,w,C,P,$,D,j;!f.empty();){l=f.pop(),m=l.value,w=l.cost,C=o[m]||{};for(p in C)C.hasOwnProperty(p)&&(P=C[p],$=w+P,D=d[p],j=typeof d[p]=="undefined",(j||D>$)&&(d[p]=$,f.push(p,$),u[p]=m))}if(typeof s!="undefined"&&typeof d[s]=="undefined"){var R=["Could not find a path from ",i," to ",s,"."].join("");throw new Error(R)}return u},extract_shortest_path_from_predecessor_list:function(o,i){for(var s=[],u=i;u;)s.push(u),o[u],u=o[u];return s.reverse(),s},find_path:function(o,i,s){var u=n.single_source_shortest_paths(o,i,s);return n.extract_shortest_path_from_predecessor_list(u,s)},PriorityQueue:{make:function(o){var i=n.PriorityQueue,s={},u;o=o||{};for(u in i)i.hasOwnProperty(u)&&(s[u]=i[u]);return s.queue=[],s.sorter=o.sorter||i.default_sorter,s},default_sorter:function(o,i){return o.cost-i.cost},push:function(o,i){var s={value:o,cost:i};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=n})(Bn);(function(e){const n=Me,o=Ki,i=Zi,s=ts,u=os,d=pe,f=ue,l=Bn.exports;function m(R){return unescape(encodeURIComponent(R)).length}function p(R,k,_){const E=[];let M;for(;(M=R.exec(_))!==null;)E.push({data:M[0],index:M.index,mode:k,length:M[0].length});return E}function w(R){const k=p(d.NUMERIC,n.NUMERIC,R),_=p(d.ALPHANUMERIC,n.ALPHANUMERIC,R);let E,M;return f.isKanjiModeEnabled()?(E=p(d.BYTE,n.BYTE,R),M=p(d.KANJI,n.KANJI,R)):(E=p(d.BYTE_KANJI,n.BYTE,R),M=[]),k.concat(_,E,M).sort(function(U,X){return U.index-X.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function C(R,k){switch(k){case n.NUMERIC:return o.getBitsLength(R);case n.ALPHANUMERIC:return i.getBitsLength(R);case n.KANJI:return u.getBitsLength(R);case n.BYTE:return s.getBitsLength(R)}}function P(R){return R.reduce(function(k,_){const E=k.length-1>=0?k[k.length-1]:null;return E&&E.mode===_.mode?(k[k.length-1].data+=_.data,k):(k.push(_),k)},[])}function $(R){const k=[];for(let _=0;_<R.length;_++){const E=R[_];switch(E.mode){case n.NUMERIC:k.push([E,{data:E.data,mode:n.ALPHANUMERIC,length:E.length},{data:E.data,mode:n.BYTE,length:E.length}]);break;case n.ALPHANUMERIC:k.push([E,{data:E.data,mode:n.BYTE,length:E.length}]);break;case n.KANJI:k.push([E,{data:E.data,mode:n.BYTE,length:m(E.data)}]);break;case n.BYTE:k.push([{data:E.data,mode:n.BYTE,length:m(E.data)}])}}return k}function D(R,k){const _={},E={start:{}};let M=["start"];for(let L=0;L<R.length;L++){const U=R[L],X=[];for(let ne=0;ne<U.length;ne++){const re=U[ne],de=""+L+ne;X.push(de),_[de]={node:re,lastCount:0},E[de]={};for(let Te=0;Te<M.length;Te++){const ie=M[Te];_[ie]&&_[ie].node.mode===re.mode?(E[ie][de]=C(_[ie].lastCount+re.length,re.mode)-C(_[ie].lastCount,re.mode),_[ie].lastCount+=re.length):(_[ie]&&(_[ie].lastCount=re.length),E[ie][de]=C(re.length,re.mode)+4+n.getCharCountIndicator(re.mode,k))}}M=X}for(let L=0;L<M.length;L++)E[M[L]].end=0;return{map:E,table:_}}function j(R,k){let _;const E=n.getBestModeForData(R);if(_=n.from(k,E),_!==n.BYTE&&_.bit<E.bit)throw new Error('"'+R+'" cannot be encoded with mode '+n.toString(_)+`.
 Suggested mode is: `+n.toString(E));switch(_===n.KANJI&&!f.isKanjiModeEnabled()&&(_=n.BYTE),_){case n.NUMERIC:return new o(R);case n.ALPHANUMERIC:return new i(R);case n.KANJI:return new u(R);case n.BYTE:return new s(R)}}e.fromArray=function(k){return k.reduce(function(_,E){return typeof E=="string"?_.push(j(E,null)):E.data&&_.push(j(E.data,E.mode)),_},[])},e.fromString=function(k,_){const E=w(k,f.isKanjiModeEnabled()),M=$(E),L=D(M,_),U=l.find_path(L.map,"start","end"),X=[];for(let ne=1;ne<U.length-1;ne++)X.push(L.table[U[ne]].node);return e.fromArray(P(X))},e.rawSplit=function(k){return e.fromArray(w(k,f.isKanjiModeEnabled()))}})(On);const Ft=ue,dr=kt,as=Li,is=Ui,ss=Sn,us=Pn,vr=_n,yr=Nt,cs=Hi,Ot=Mn,ls=Dn,ds=Me,fr=On;function fs(e,n){const o=e.size,i=us.getPositions(n);for(let s=0;s<i.length;s++){const u=i[s][0],d=i[s][1];for(let f=-1;f<=7;f++)if(!(u+f<=-1||o<=u+f))for(let l=-1;l<=7;l++)d+l<=-1||o<=d+l||(f>=0&&f<=6&&(l===0||l===6)||l>=0&&l<=6&&(f===0||f===6)||f>=2&&f<=4&&l>=2&&l<=4?e.set(u+f,d+l,!0,!0):e.set(u+f,d+l,!1,!0))}}function hs(e){const n=e.size;for(let o=8;o<n-8;o++){const i=o%2===0;e.set(o,6,i,!0),e.set(6,o,i,!0)}}function ms(e,n){const o=ss.getPositions(n);for(let i=0;i<o.length;i++){const s=o[i][0],u=o[i][1];for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)d===-2||d===2||f===-2||f===2||d===0&&f===0?e.set(s+d,u+f,!0,!0):e.set(s+d,u+f,!1,!0)}}function gs(e,n){const o=e.size,i=Ot.getEncodedBits(n);let s,u,d;for(let f=0;f<18;f++)s=Math.floor(f/3),u=f%3+o-8-3,d=(i>>f&1)===1,e.set(s,u,d,!0),e.set(u,s,d,!0)}function hr(e,n,o){const i=e.size,s=ls.getEncodedBits(n,o);let u,d;for(u=0;u<15;u++)d=(s>>u&1)===1,u<6?e.set(u,8,d,!0):u<8?e.set(u+1,8,d,!0):e.set(i-15+u,8,d,!0),u<8?e.set(8,i-u-1,d,!0):u<9?e.set(8,15-u-1+1,d,!0):e.set(8,15-u-1,d,!0);e.set(i-8,8,1,!0)}function ps(e,n){const o=e.size;let i=-1,s=o-1,u=7,d=0;for(let f=o-1;f>0;f-=2)for(f===6&&f--;;){for(let l=0;l<2;l++)if(!e.isReserved(s,f-l)){let m=!1;d<n.length&&(m=(n[d]>>>u&1)===1),e.set(s,f-l,m),u--,u===-1&&(d++,u=7)}if(s+=i,s<0||o<=s){s-=i,i=-i;break}}}function vs(e,n,o){const i=new as;o.forEach(function(l){i.put(l.mode.bit,4),i.put(l.getLength(),ds.getCharCountIndicator(l.mode,e)),l.write(i)});const s=Ft.getSymbolTotalCodewords(e),u=yr.getTotalCodewordsCount(e,n),d=(s-u)*8;for(i.getLengthInBits()+4<=d&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const f=(d-i.getLengthInBits())/8;for(let l=0;l<f;l++)i.put(l%2?17:236,8);return ys(i,e,n)}function ys(e,n,o){const i=Ft.getSymbolTotalCodewords(n),s=yr.getTotalCodewordsCount(n,o),u=i-s,d=yr.getBlocksCount(n,o),f=i%d,l=d-f,m=Math.floor(i/d),p=Math.floor(u/d),w=p+1,C=m-p,P=new cs(C);let $=0;const D=new Array(d),j=new Array(d);let R=0;const k=new Uint8Array(e.buffer);for(let U=0;U<d;U++){const X=U<l?p:w;D[U]=k.slice($,$+X),j[U]=P.encode(D[U]),$+=X,R=Math.max(R,X)}const _=new Uint8Array(i);let E=0,M,L;for(M=0;M<R;M++)for(L=0;L<d;L++)M<D[L].length&&(_[E++]=D[L][M]);for(M=0;M<C;M++)for(L=0;L<d;L++)_[E++]=j[L][M];return _}function ws(e,n,o,i){let s;if(Array.isArray(e))s=fr.fromArray(e);else if(typeof e=="string"){let m=n;if(!m){const p=fr.rawSplit(e);m=Ot.getBestVersionForData(p,o)}s=fr.fromString(e,m||40)}else throw new Error("Invalid data");const u=Ot.getBestVersionForData(s,o);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=u;else if(n<u)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+u+`.
`);const d=vs(n,o,s),f=Ft.getSymbolSize(n),l=new is(f);return fs(l,n),hs(l),ms(l,n),hr(l,o,0),n>=7&&gs(l,n),ps(l,d),isNaN(i)&&(i=vr.getBestMask(l,hr.bind(null,l,o))),vr.applyMask(i,l),hr(l,o,i),{modules:l,version:n,errorCorrectionLevel:o,maskPattern:i,segments:s}}Tn.create=function(n,o){if(typeof n=="undefined"||n==="")throw new Error("No input text");let i=dr.M,s,u;return typeof o!="undefined"&&(i=dr.from(o.errorCorrectionLevel,dr.M),s=Ot.from(o.version),u=vr.from(o.maskPattern),o.toSJISFunc&&Ft.setToSJISFunction(o.toSJISFunc)),ws(n,s,i,u)};var kn={},Sr={};(function(e){function n(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let i=o.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+o);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(u){return[u,u]}))),i.length===6&&i.push("F","F");const s=parseInt(i.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+i.slice(0,6).join("")}}e.getOptions=function(i){i||(i={}),i.color||(i.color={});const s=typeof i.margin=="undefined"||i.margin===null||i.margin<0?4:i.margin,u=i.width&&i.width>=21?i.width:void 0,d=i.scale||4;return{width:u,scale:u?4:d,margin:s,color:{dark:n(i.color.dark||"#000000ff"),light:n(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},e.getScale=function(i,s){return s.width&&s.width>=i+s.margin*2?s.width/(i+s.margin*2):s.scale},e.getImageWidth=function(i,s){const u=e.getScale(i,s);return Math.floor((i+s.margin*2)*u)},e.qrToImageData=function(i,s,u){const d=s.modules.size,f=s.modules.data,l=e.getScale(d,u),m=Math.floor((d+u.margin*2)*l),p=u.margin*l,w=[u.color.light,u.color.dark];for(let C=0;C<m;C++)for(let P=0;P<m;P++){let $=(C*m+P)*4,D=u.color.light;if(C>=p&&P>=p&&C<m-p&&P<m-p){const j=Math.floor((C-p)/l),R=Math.floor((P-p)/l);D=w[f[j*d+R]?1:0]}i[$++]=D.r,i[$++]=D.g,i[$++]=D.b,i[$]=D.a}}})(Sr);(function(e){const n=Sr;function o(s,u,d){s.clearRect(0,0,u.width,u.height),u.style||(u.style={}),u.height=d,u.width=d,u.style.height=d+"px",u.style.width=d+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(u,d,f){let l=f,m=d;typeof l=="undefined"&&(!d||!d.getContext)&&(l=d,d=void 0),d||(m=i()),l=n.getOptions(l);const p=n.getImageWidth(u.modules.size,l),w=m.getContext("2d"),C=w.createImageData(p,p);return n.qrToImageData(C.data,u,l),o(w,m,p),w.putImageData(C,0,0),m},e.renderToDataURL=function(u,d,f){let l=f;typeof l=="undefined"&&(!d||!d.getContext)&&(l=d,d=void 0),l||(l={});const m=e.render(u,d,l),p=l.type||"image/png",w=l.rendererOpts||{};return m.toDataURL(p,w.quality)}})(kn);var Nn={};const bs=Sr;function sn(e,n){const o=e.a/255,i=n+'="'+e.hex+'"';return o<1?i+" "+n+'-opacity="'+o.toFixed(2).slice(1)+'"':i}function mr(e,n,o){let i=e+n;return typeof o!="undefined"&&(i+=" "+o),i}function Cs(e,n,o){let i="",s=0,u=!1,d=0;for(let f=0;f<e.length;f++){const l=Math.floor(f%n),m=Math.floor(f/n);!l&&!u&&(u=!0),e[f]?(d++,f>0&&l>0&&e[f-1]||(i+=u?mr("M",l+o,.5+m+o):mr("m",s,0),s=0,u=!1),l+1<n&&e[f+1]||(i+=mr("h",d),d=0)):s++}return i}Nn.render=function(n,o,i){const s=bs.getOptions(o),u=n.modules.size,d=n.modules.data,f=u+s.margin*2,l=s.color.light.a?"<path "+sn(s.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",m="<path "+sn(s.color.dark,"stroke")+' d="'+Cs(d,u,s.margin)+'"/>',p='viewBox="0 0 '+f+" "+f+'"',w=s.width?'width="'+s.width+'" height="'+s.width+'" ':"",C='<svg xmlns="http://www.w3.org/2000/svg" '+w+p+' shape-rendering="crispEdges">'+l+m+`</svg>
`;return typeof i=="function"&&i(null,C),C};const Ts=Fi,wr=Tn,jn=kn,Es=Nn;function Pr(e,n,o,i,s){const u=[].slice.call(arguments,1),d=u.length,f=typeof u[d-1]=="function";if(!f&&!Ts())throw new Error("Callback required as last argument");if(f){if(d<2)throw new Error("Too few arguments provided");d===2?(s=o,o=n,n=i=void 0):d===3&&(n.getContext&&typeof s=="undefined"?(s=i,i=void 0):(s=i,i=o,o=n,n=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(o=n,n=i=void 0):d===2&&!n.getContext&&(i=o,o=n,n=void 0),new Promise(function(l,m){try{const p=wr.create(o,i);l(e(p,n,i))}catch(p){m(p)}})}try{const l=wr.create(o,i);s(null,e(l,n,i))}catch(l){s(l)}}it.create=wr.create;it.toCanvas=Pr.bind(null,jn.render);it.toDataURL=Pr.bind(null,jn.renderToDataURL);it.toString=Pr.bind(null,function(e,n,o){return Es.render(e,o)});const Ss=["src"],Ps={__name:"ShareQRCodeDialog",props:{modelValue:String},emits:["update:modelValue"],setup(e,{emit:n}){const o=wn(),i=e,s=n,u=le(null),d=Ne({get:()=>i.modelValue,set:m=>{s("update:modelValue",m)}}),f=Ne(()=>!!d.value);Be(()=>i.modelValue,async m=>{if(m)try{u.value=await it.toDataURL(m)}catch(p){o.notify({message:p.message||p}),u.value=null}else u.value=null},{immediate:!0});const l=m=>{navigator.clipboard.writeText(m).then(()=>{o.notify("Copied to clipboard!")}).catch(()=>{o.notify("Failed to copy!")})};return(m,p)=>(ot(),bn(Cn,{modelValue:f.value,"onUpdate:modelValue":p[2]||(p[2]=w=>f.value=w),persistent:""},{default:te(()=>[F(Rt,{class:"q-my-md",style:{width:"100%",height:"auto"}},{default:te(()=>[F(Le,{class:"text-center",style:{"font-size":"28px"}},{default:te(()=>p[3]||(p[3]=[gr(" Share ")])),_:1}),F(Le,null,{default:te(()=>[u.value?(ot(),br("img",{key:0,src:u.value,alt:"QR Code",style:{width:"100%",height:"auto"}},null,8,Ss)):Si("",!0)]),_:1}),F(Le,{class:"flex flex-center"},{default:te(()=>[gr(Pi(d.value),1)]),_:1}),F(Dt,{style:{display:"flex","justify-content":"center","align-items":"center"}},{default:te(()=>[F(ke,{color:"primary",icon:"content_copy",onClick:p[0]||(p[0]=w=>l(d.value)),label:"Copy"}),F(ke,{icon:"close",label:"Close",color:"red",onClick:p[1]||(p[1]=w=>d.value=null)})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};var Fn=(e,n,o)=>{if(!n.has(e))throw TypeError("Cannot "+o)},un=(e,n,o)=>(Fn(e,n,"read from private field"),o?o.call(e):n.get(e)),_s=(e,n,o)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,o)},$s=(e,n,o,i)=>(Fn(e,n,"write to private field"),n.set(e,o),o);const xn=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],As=[...xn,["unknown"]].map(e=>e[0]),At=new Map(xn);function Ms(e){for(const[n,o]of At)if(e===o)return n;return"unknown"}function Rs(e){if(Ln(e))return{width:e.naturalWidth,height:e.naturalHeight};if(Un(e))return{width:e.width.baseVal.value,height:e.height.baseVal.value};if(Vn(e))return{width:e.videoWidth,height:e.videoHeight};if(Wn(e))return{width:e.width,height:e.height};if(zn(e))return{width:e.displayWidth,height:e.displayHeight};if(Hn(e))return{width:e.width,height:e.height};if(qn(e))return{width:e.width,height:e.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Ln(e){try{return e instanceof HTMLImageElement}catch{return!1}}function Un(e){try{return e instanceof SVGImageElement}catch{return!1}}function Vn(e){try{return e instanceof HTMLVideoElement}catch{return!1}}function Hn(e){try{return e instanceof HTMLCanvasElement}catch{return!1}}function Wn(e){try{return e instanceof ImageBitmap}catch{return!1}}function qn(e){try{return e instanceof OffscreenCanvas}catch{return!1}}function zn(e){try{return e instanceof VideoFrame}catch{return!1}}function Jn(e){try{return e instanceof Blob}catch{return!1}}function Ds(e){try{return e instanceof ImageData}catch{return!1}}function Is(e,n){try{const o=new OffscreenCanvas(e,n);if(o.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return o;throw void 0}catch{const i=document.createElement("canvas");return i.width=e,i.height=n,i}}async function Yn(e){if(Ln(e)&&!await Ns(e))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Un(e)&&!await js(e))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(zn(e)&&Fs(e))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Vn(e)&&(e.readyState===0||e.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Wn(e)&&Ls(e))throw new DOMException("The image source is detached.","InvalidStateError");const{width:n,height:o}=Rs(e);if(n===0||o===0)return null;const i=Is(n,o).getContext("2d");i.drawImage(e,0,0);try{return i.getImageData(0,0,n,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Os(e){let n;try{if(globalThis.createImageBitmap)n=await createImageBitmap(e);else if(globalThis.Image){n=new Image;let o="";try{o=URL.createObjectURL(e),n.src=o,await n.decode()}finally{URL.revokeObjectURL(o)}}else return e}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Yn(n)}function Bs(e){const{width:n,height:o}=e;if(n===0||o===0)return null;const i=e.getContext("2d");try{return i.getImageData(0,0,n,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ks(e){if(Jn(e))return await Os(e);if(Ds(e)){if(xs(e))throw new DOMException("The image data has been detached.","InvalidStateError");return e}return Hn(e)||qn(e)?Bs(e):await Yn(e)}async function Ns(e){try{return await e.decode(),!0}catch{return!1}}async function js(e){var n;try{return await((n=e.decode)==null?void 0:n.call(e)),!0}catch{return!1}}function Fs(e){return e.format===null}function xs(e){return e.data.buffer.byteLength===0}function Ls(e){return e.width===0&&e.height===0}function cn(e,n){return e instanceof DOMException?new DOMException(`${n}: ${e.message}`,e.name):e instanceof Error?new e.constructor(`${n}: ${e.message}`):new Error(`${n}: ${e}`)}const ln=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function Us(e){return e.join("|")}function Vs(e){const n=dn(e);let o=0,i=ln.length-1;for(;o<=i;){const s=Math.floor((o+i)/2),u=ln[s],d=dn(u);if(d===n)return u;d<n?o=s+1:i=s-1}return"None"}function dn(e){return e.toLowerCase().replace(/_-\[\]/g,"")}function Hs(e,n){return e.Binarizer[n]}function Ws(e,n){return e.CharacterSet[n]}const qs=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function zs(e){return qs[e.value]}function Js(e,n){return e.EanAddOnSymbol[n]}function Ys(e,n){return e.TextMode[n]}const Je={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Gn(e,n){return{...n,formats:Us(n.formats),binarizer:Hs(e,n.binarizer),eanAddOnSymbol:Js(e,n.eanAddOnSymbol),textMode:Ys(e,n.textMode),characterSet:Ws(e,n.characterSet)}}function Qn(e){return{...e,format:Vs(e.format),eccLevel:e.eccLevel,contentType:zs(e.contentType)}}const Gs={locateFile:(e,n)=>{const o=e.match(/_(.+?)\.wasm$/);return o?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${o[1]}/${e}`:n+e}};let fn=new WeakMap;function _r(e,n){var o;const i=fn.get(e);if(i!=null&&i.modulePromise&&n===void 0)return i.modulePromise;const s=(o=i==null?void 0:i.moduleOverrides)!=null?o:Gs,u=e({...s});return fn.set(e,{moduleOverrides:s,modulePromise:u}),u}async function Qs(e,n,o=Je){const i={...Je,...o},s=await _r(e),{size:u}=n,d=new Uint8Array(await n.arrayBuffer()),f=s._malloc(u);s.HEAPU8.set(d,f);const l=s.readBarcodesFromImage(f,u,Gn(s,i));s._free(f);const m=[];for(let p=0;p<l.size();++p)m.push(Qn(l.get(p)));return m}async function Ks(e,n,o=Je){const i={...Je,...o},s=await _r(e),{data:u,width:d,height:f,data:{byteLength:l}}=n,m=s._malloc(l);s.HEAPU8.set(u,m);const p=s.readBarcodesFromPixmap(m,d,f,Gn(s,i));s._free(m);const w=[];for(let C=0;C<p.size();++C)w.push(Qn(p.get(C)));return w}({...Je,formats:[...Je.formats]});var $r=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n={}){var o=n,i,s;o.ready=new Promise((t,r)=>{i=t,s=r});var u=Object.assign({},o),d="./this.program",f=typeof window=="object",l=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var m="";function p(t){return o.locateFile?o.locateFile(t,m):m+t}var w;(f||l)&&(l?m=self.location.href:typeof document<"u"&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m.indexOf("blob:")!==0?m=m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):m="",l&&(w=t=>{var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)})),o.print||console.log.bind(console);var C=o.printErr||console.error.bind(console);Object.assign(o,u),u=null,o.arguments&&o.arguments,o.thisProgram&&(d=o.thisProgram),o.quit&&o.quit;var P;o.wasmBinary&&(P=o.wasmBinary),typeof WebAssembly!="object"&&se("no native wasm support detected");var $,D=!1,j,R,k,_,E,M,L,U;function X(){var t=$.buffer;o.HEAP8=j=new Int8Array(t),o.HEAP16=k=new Int16Array(t),o.HEAPU8=R=new Uint8Array(t),o.HEAPU16=_=new Uint16Array(t),o.HEAP32=E=new Int32Array(t),o.HEAPU32=M=new Uint32Array(t),o.HEAPF32=L=new Float32Array(t),o.HEAPF64=U=new Float64Array(t)}var ne=[],re=[],de=[];function Te(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Lt(o.preRun.shift());qt(ne)}function ie(){qt(re)}function xt(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)Ye(o.postRun.shift());qt(de)}function Lt(t){ne.unshift(t)}function Ut(t){re.unshift(t)}function Ye(t){de.unshift(t)}var he=0,Re=null;function Vt(t){var r;he++,(r=o.monitorRunDependencies)===null||r===void 0||r.call(o,he)}function Ee(t){var r;if(he--,(r=o.monitorRunDependencies)===null||r===void 0||r.call(o,he),he==0&&Re){var a=Re;Re=null,a()}}function se(t){var r;(r=o.onAbort)===null||r===void 0||r.call(o,t),t="Aborted("+t+")",C(t),D=!0,t+=". Build with -sASSERTIONS for more info.";var a=new WebAssembly.RuntimeError(t);throw s(a),a}var Ht="data:application/octet-stream;base64,",ut=t=>t.startsWith(Ht),Se;Se="zxing_reader.wasm",ut(Se)||(Se=p(Se));function ct(t){if(t==Se&&P)return new Uint8Array(P);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}function Wt(t){return!P&&(f||l)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+t+"'";return r.arrayBuffer()}).catch(()=>ct(t)):Promise.resolve().then(()=>ct(t))}function lt(t,r,a){return Wt(t).then(c=>WebAssembly.instantiate(c,r)).then(c=>c).then(a,c=>{C(`failed to asynchronously prepare wasm: ${c}`),se(c)})}function ho(t,r,a,c){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!ut(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(h=>{var g=WebAssembly.instantiateStreaming(h,a);return g.then(c,function(v){return C(`wasm streaming compile failed: ${v}`),C("falling back to ArrayBuffer instantiation"),lt(r,a,c)})}):lt(r,a,c)}function mo(){var t={a:ti};function r(c,h){return Q=c.exports,$=Q.ia,X(),jr=Q.ma,Ut(Q.ja),Ee(),Q}Vt();function a(c){r(c.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(t,r)}catch(c){C(`Module.instantiateWasm callback failed with error: ${c}`),s(c)}return ho(P,Se,t,a).catch(s),{}}var qt=t=>{for(;t.length>0;)t.shift()(o)};o.noExitRuntime;var dt=[],ft=0,go=t=>{var r=new zt(t);return r.get_caught()||(r.set_caught(!0),ft--),r.set_rethrown(!1),dt.push(r),Kr(r.excPtr),r.get_exception_ptr()},ye=0,po=()=>{H(0,0);var t=dt.pop();Qr(t.excPtr),ye=0};function zt(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(r){M[this.ptr+4>>2]=r},this.get_type=function(){return M[this.ptr+4>>2]},this.set_destructor=function(r){M[this.ptr+8>>2]=r},this.get_destructor=function(){return M[this.ptr+8>>2]},this.set_caught=function(r){r=r?1:0,j[this.ptr+12>>0]=r},this.get_caught=function(){return j[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,j[this.ptr+13>>0]=r},this.get_rethrown=function(){return j[this.ptr+13>>0]!=0},this.init=function(r,a){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(a)},this.set_adjusted_ptr=function(r){M[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return M[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=Zr(this.get_type());if(r)return M[this.excPtr>>2];var a=this.get_adjusted_ptr();return a!==0?a:this.excPtr}}var vo=t=>{throw ye||(ye=t),ye},Jt=t=>{var r=ye;if(!r)return tt(0),0;var a=new zt(r);a.set_adjusted_ptr(r);var c=a.get_type();if(!c)return tt(0),r;for(var h in t){var g=t[h];if(g===0||g===c)break;var v=a.ptr+16;if(Xr(g,c,v))return tt(g),r}return tt(c),r},yo=()=>Jt([]),wo=t=>Jt([t]),bo=(t,r)=>Jt([t,r]),Co=()=>{var t=dt.pop();t||se("no exception to throw");var r=t.excPtr;throw t.get_rethrown()||(dt.push(t),t.set_rethrown(!0),t.set_caught(!1),ft++),ye=r,ye},To=(t,r,a)=>{var c=new zt(t);throw c.init(r,a),ye=t,ft++,ye},Eo=()=>ft,ht={},Yt=t=>{for(;t.length;){var r=t.pop(),a=t.pop();a(r)}};function Gt(t){return this.fromWireType(E[t>>2])}var je={},De={},mt={},Ar,gt=t=>{throw new Ar(t)},Ie=(t,r,a)=>{t.forEach(function(y){mt[y]=r});function c(y){var b=a(y);b.length!==t.length&&gt("Mismatched type converter count");for(var S=0;S<t.length;++S)me(t[S],b[S])}var h=new Array(r.length),g=[],v=0;r.forEach((y,b)=>{De.hasOwnProperty(y)?h[b]=De[y]:(g.push(y),je.hasOwnProperty(y)||(je[y]=[]),je[y].push(()=>{h[b]=De[y],++v,v===g.length&&c(h)}))}),g.length===0&&c(h)},So=t=>{var r=ht[t];delete ht[t];var a=r.rawConstructor,c=r.rawDestructor,h=r.fields,g=h.map(v=>v.getterReturnType).concat(h.map(v=>v.setterArgumentType));Ie([t],g,v=>{var y={};return h.forEach((b,S)=>{var A=b.fieldName,O=v[S],B=b.getter,N=b.getterContext,W=v[S+h.length],Y=b.setter,V=b.setterContext;y[A]={read:ee=>O.fromWireType(B(N,ee)),write:(ee,T)=>{var I=[];Y(V,ee,W.toWireType(I,T)),Yt(I)}}}),[{name:r.name,fromWireType:b=>{var S={};for(var A in y)S[A]=y[A].read(b);return c(b),S},toWireType:(b,S)=>{for(var A in y)if(!(A in S))throw new TypeError(`Missing field: "${A}"`);var O=a();for(A in y)y[A].write(O,S[A]);return b!==null&&b.push(c,O),O},argPackAdvance:ge,readValueFromPointer:Gt,destructorFunction:c}]})},Po=(t,r,a,c,h)=>{},_o=()=>{for(var t=new Array(256),r=0;r<256;++r)t[r]=String.fromCharCode(r);Mr=t},Mr,Z=t=>{for(var r="",a=t;R[a];)r+=Mr[R[a++]];return r},Fe,x=t=>{throw new Fe(t)};function $o(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var c=r.name;if(t||x(`type "${c}" must have a positive integer typeid pointer`),De.hasOwnProperty(t)){if(a.ignoreDuplicateRegistrations)return;x(`Cannot register type '${c}' twice`)}if(De[t]=r,delete mt[t],je.hasOwnProperty(t)){var h=je[t];delete je[t],h.forEach(g=>g())}}function me(t,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return $o(t,r,a)}var ge=8,Ao=(t,r,a,c)=>{r=Z(r),me(t,{name:r,fromWireType:function(h){return!!h},toWireType:function(h,g){return g?a:c},argPackAdvance:ge,readValueFromPointer:function(h){return this.fromWireType(R[h])},destructorFunction:null})},Mo=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),Qt=t=>{function r(a){return a.$$.ptrType.registeredClass.name}x(r(t)+" instance already deleted")},Kt=!1,Rr=t=>{},Ro=t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)},Dr=t=>{t.count.value-=1;var r=t.count.value===0;r&&Ro(t)},Ir=(t,r,a)=>{if(r===a)return t;if(a.baseClass===void 0)return null;var c=Ir(t,r,a.baseClass);return c===null?null:a.downcast(c)},Or={},Do=()=>Object.keys(Ke).length,Io=()=>{var t=[];for(var r in Ke)Ke.hasOwnProperty(r)&&t.push(Ke[r]);return t},Ge=[],Xt=()=>{for(;Ge.length;){var t=Ge.pop();t.$$.deleteScheduled=!1,t.delete()}},Qe,Oo=t=>{Qe=t,Ge.length&&Qe&&Qe(Xt)},Bo=()=>{o.getInheritedInstanceCount=Do,o.getLiveInheritedInstances=Io,o.flushPendingDeletes=Xt,o.setDelayFunction=Oo},Ke={},ko=(t,r)=>{for(r===void 0&&x("ptr should not be undefined");t.baseClass;)r=t.upcast(r),t=t.baseClass;return r},No=(t,r)=>(r=ko(t,r),Ke[r]),pt=(t,r)=>{(!r.ptrType||!r.ptr)&&gt("makeClassHandle requires ptr and ptrType");var a=!!r.smartPtrType,c=!!r.smartPtr;return a!==c&&gt("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Xe(Object.create(t,{$$:{value:r,writable:!0}}))};function jo(t){var r=this.getPointee(t);if(!r)return this.destructor(t),null;var a=No(this.registeredClass,r);if(a!==void 0){if(a.$$.count.value===0)return a.$$.ptr=r,a.$$.smartPtr=t,a.clone();var c=a.clone();return this.destructor(t),c}function h(){return this.isSmartPointer?pt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:t}):pt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var g=this.registeredClass.getActualType(r),v=Or[g];if(!v)return h.call(this);var y;this.isConst?y=v.constPointerType:y=v.pointerType;var b=Ir(r,this.registeredClass,y.registeredClass);return b===null?h.call(this):this.isSmartPointer?pt(y.registeredClass.instancePrototype,{ptrType:y,ptr:b,smartPtrType:this,smartPtr:t}):pt(y.registeredClass.instancePrototype,{ptrType:y,ptr:b})}var Xe=t=>typeof FinalizationRegistry>"u"?(Xe=r=>r,t):(Kt=new FinalizationRegistry(r=>{Dr(r.$$)}),Xe=r=>{var a=r.$$,c=!!a.smartPtr;if(c){var h={$$:a};Kt.register(r,h,r)}return r},Rr=r=>Kt.unregister(r),Xe(t)),Fo=()=>{Object.assign(vt.prototype,{isAliasOf(t){if(!(this instanceof vt)||!(t instanceof vt))return!1;var r=this.$$.ptrType.registeredClass,a=this.$$.ptr;t.$$=t.$$;for(var c=t.$$.ptrType.registeredClass,h=t.$$.ptr;r.baseClass;)a=r.upcast(a),r=r.baseClass;for(;c.baseClass;)h=c.upcast(h),c=c.baseClass;return r===c&&a===h},clone(){if(this.$$.ptr||Qt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Xe(Object.create(Object.getPrototypeOf(this),{$$:{value:Mo(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||Qt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&x("Object already scheduled for deletion"),Rr(this),Dr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Qt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&x("Object already scheduled for deletion"),Ge.push(this),Ge.length===1&&Qe&&Qe(Xt),this.$$.deleteScheduled=!0,this}})};function vt(){}var Ze=(t,r)=>Object.defineProperty(r,"name",{value:t}),Br=(t,r,a)=>{if(t[r].overloadTable===void 0){var c=t[r];t[r]=function(){return t[r].overloadTable.hasOwnProperty(arguments.length)||x(`Function '${a}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[r].overloadTable})!`),t[r].overloadTable[arguments.length].apply(this,arguments)},t[r].overloadTable=[],t[r].overloadTable[c.argCount]=c}},Zt=(t,r,a)=>{o.hasOwnProperty(t)?((a===void 0||o[t].overloadTable!==void 0&&o[t].overloadTable[a]!==void 0)&&x(`Cannot register public name '${t}' twice`),Br(o,t,t),o.hasOwnProperty(a)&&x(`Cannot register multiple overloads of a function with the same number of arguments (${a})!`),o[t].overloadTable[a]=r):(o[t]=r,a!==void 0&&(o[t].numArguments=a))},xo=48,Lo=57,Uo=t=>{if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var r=t.charCodeAt(0);return r>=xo&&r<=Lo?`_${t}`:t};function Vo(t,r,a,c,h,g,v,y){this.name=t,this.constructor=r,this.instancePrototype=a,this.rawDestructor=c,this.baseClass=h,this.getActualType=g,this.upcast=v,this.downcast=y,this.pureVirtualFunctions=[]}var er=(t,r,a)=>{for(;r!==a;)r.upcast||x(`Expected null or instance of ${a.name}, got an instance of ${r.name}`),t=r.upcast(t),r=r.baseClass;return t};function Ho(t,r){if(r===null)return this.isReference&&x(`null is not a valid ${this.name}`),0;r.$$||x(`Cannot pass "${ar(r)}" as a ${this.name}`),r.$$.ptr||x(`Cannot pass deleted object as a pointer of type ${this.name}`);var a=r.$$.ptrType.registeredClass,c=er(r.$$.ptr,a,this.registeredClass);return c}function Wo(t,r){var a;if(r===null)return this.isReference&&x(`null is not a valid ${this.name}`),this.isSmartPointer?(a=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,a),a):0;(!r||!r.$$)&&x(`Cannot pass "${ar(r)}" as a ${this.name}`),r.$$.ptr||x(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&x(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var c=r.$$.ptrType.registeredClass;if(a=er(r.$$.ptr,c,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&x("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?a=r.$$.smartPtr:x(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:a=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)a=r.$$.smartPtr;else{var h=r.clone();a=this.rawShare(a,we.toHandle(()=>h.delete())),t!==null&&t.push(this.rawDestructor,a)}break;default:x("Unsupporting sharing policy")}return a}function qo(t,r){if(r===null)return this.isReference&&x(`null is not a valid ${this.name}`),0;r.$$||x(`Cannot pass "${ar(r)}" as a ${this.name}`),r.$$.ptr||x(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&x(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var a=r.$$.ptrType.registeredClass,c=er(r.$$.ptr,a,this.registeredClass);return c}function kr(t){return this.fromWireType(M[t>>2])}var zo=()=>{Object.assign(yt.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var r;(r=this.rawDestructor)===null||r===void 0||r.call(this,t)},argPackAdvance:ge,readValueFromPointer:kr,deleteObject(t){t!==null&&t.delete()},fromWireType:jo})};function yt(t,r,a,c,h,g,v,y,b,S,A){this.name=t,this.registeredClass=r,this.isReference=a,this.isConst=c,this.isSmartPointer=h,this.pointeeType=g,this.sharingPolicy=v,this.rawGetPointee=y,this.rawConstructor=b,this.rawShare=S,this.rawDestructor=A,!h&&r.baseClass===void 0?c?(this.toWireType=Ho,this.destructorFunction=null):(this.toWireType=qo,this.destructorFunction=null):this.toWireType=Wo}var Nr=(t,r,a)=>{o.hasOwnProperty(t)||gt("Replacing nonexistant public symbol"),o[t].overloadTable!==void 0&&a!==void 0?o[t].overloadTable[a]=r:(o[t]=r,o[t].argCount=a)},Jo=(t,r,a)=>{var c=o["dynCall_"+t];return a&&a.length?c.apply(null,[r].concat(a)):c.call(null,r)},wt=[],jr,q=t=>{var r=wt[t];return r||(t>=wt.length&&(wt.length=t+1),wt[t]=r=jr.get(t)),r},Yo=(t,r,a)=>{if(t.includes("j"))return Jo(t,r,a);var c=q(r).apply(null,a);return c},Go=(t,r)=>{var a=[];return function(){return a.length=0,Object.assign(a,arguments),Yo(t,r,a)}},fe=(t,r)=>{t=Z(t);function a(){return t.includes("j")?Go(t,r):q(r)}var c=a();return typeof c!="function"&&x(`unknown function pointer with signature ${t}: ${r}`),c},Qo=(t,r)=>{var a=Ze(r,function(c){this.name=r,this.message=c;var h=new Error(c).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},a},Fr,xr=t=>{var r=Gr(t),a=Z(r);return be(r),a},bt=(t,r)=>{var a=[],c={};function h(g){if(!c[g]&&!De[g]){if(mt[g]){mt[g].forEach(h);return}a.push(g),c[g]=!0}}throw r.forEach(h),new Fr(`${t}: `+a.map(xr).join([", "]))},Ko=(t,r,a,c,h,g,v,y,b,S,A,O,B)=>{A=Z(A),g=fe(h,g),y&&(y=fe(v,y)),S&&(S=fe(b,S)),B=fe(O,B);var N=Uo(A);Zt(N,function(){bt(`Cannot construct ${A} due to unbound types`,[c])}),Ie([t,r,a],c?[c]:[],function(W){W=W[0];var Y,V;c?(Y=W.registeredClass,V=Y.instancePrototype):V=vt.prototype;var ee=Ze(A,function(){if(Object.getPrototypeOf(this)!==T)throw new Fe("Use 'new' to construct "+A);if(I.constructor_body===void 0)throw new Fe(A+" has no accessible constructor");var nn=I.constructor_body[arguments.length];if(nn===void 0)throw new Fe(`Tried to invoke ctor of ${A} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(I.constructor_body).toString()}) parameters instead!`);return nn.apply(this,arguments)}),T=Object.create(V,{constructor:{value:ee}});ee.prototype=T;var I=new Vo(A,ee,T,B,Y,g,y,S);if(I.baseClass){var G,K;(K=(G=I.baseClass).__derivedClasses)!==null&&K!==void 0||(G.__derivedClasses=[]),I.baseClass.__derivedClasses.push(I)}var xe=new yt(A,I,!0,!1,!1),Et=new yt(A+"*",I,!1,!1,!1),rn=new yt(A+" const*",I,!1,!0,!1);return Or[t]={pointerType:Et,constPointerType:rn},Nr(N,ee),[xe,Et,rn]})},tr=(t,r)=>{for(var a=[],c=0;c<t;c++)a.push(M[r+c*4>>2]);return a};function Xo(t){for(var r=1;r<t.length;++r)if(t[r]!==null&&t[r].destructorFunction===void 0)return!0;return!1}function rr(t,r,a,c,h,g){var v=r.length;v<2&&x("argTypes array size mismatch! Must at least get return value and 'this' types!");var y=r[1]!==null&&a!==null,b=Xo(r),S=r[0].name!=="void",A=v-2,O=new Array(A),B=[],N=[],W=function(){arguments.length!==A&&x(`function ${t} called with ${arguments.length} arguments, expected ${A}`),N.length=0;var Y;B.length=y?2:1,B[0]=h,y&&(Y=r[1].toWireType(N,this),B[1]=Y);for(var V=0;V<A;++V)O[V]=r[V+2].toWireType(N,arguments[V]),B.push(O[V]);var ee=c.apply(null,B);function T(I){if(b)Yt(N);else for(var G=y?1:2;G<r.length;G++){var K=G===1?Y:O[G-2];r[G].destructorFunction!==null&&r[G].destructorFunction(K)}if(S)return r[0].fromWireType(I)}return T(ee)};return Ze(t,W)}var Zo=(t,r,a,c,h,g)=>{var v=tr(r,a);h=fe(c,h),Ie([],[t],function(y){y=y[0];var b=`constructor ${y.name}`;if(y.registeredClass.constructor_body===void 0&&(y.registeredClass.constructor_body=[]),y.registeredClass.constructor_body[r-1]!==void 0)throw new Fe(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${y.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return y.registeredClass.constructor_body[r-1]=()=>{bt(`Cannot construct ${y.name} due to unbound types`,v)},Ie([],v,S=>(S.splice(1,0,null),y.registeredClass.constructor_body[r-1]=rr(b,S,null,h,g),[])),[]})},Lr=t=>{t=t.trim();const r=t.indexOf("(");return r!==-1?t.substr(0,r):t},ea=(t,r,a,c,h,g,v,y,b)=>{var S=tr(a,c);r=Z(r),r=Lr(r),g=fe(h,g),Ie([],[t],function(A){A=A[0];var O=`${A.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),y&&A.registeredClass.pureVirtualFunctions.push(r);function B(){bt(`Cannot call ${O} due to unbound types`,S)}var N=A.registeredClass.instancePrototype,W=N[r];return W===void 0||W.overloadTable===void 0&&W.className!==A.name&&W.argCount===a-2?(B.argCount=a-2,B.className=A.name,N[r]=B):(Br(N,r,O),N[r].overloadTable[a-2]=B),Ie([],S,function(Y){var V=rr(O,Y,A,g,v);return N[r].overloadTable===void 0?(V.argCount=a-2,N[r]=V):N[r].overloadTable[a-2]=V,[]}),[]})};function ta(){Object.assign(Ur.prototype,{get(t){return this.allocated[t]},has(t){return this.allocated[t]!==void 0},allocate(t){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=t,r},free(t){this.allocated[t]=void 0,this.freelist.push(t)}})}function Ur(){this.allocated=[void 0],this.freelist=[]}var ce=new Ur,nr=t=>{t>=ce.reserved&&--ce.get(t).refcount===0&&ce.free(t)},ra=()=>{for(var t=0,r=ce.reserved;r<ce.allocated.length;++r)ce.allocated[r]!==void 0&&++t;return t},na=()=>{ce.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ce.reserved=ce.allocated.length,o.count_emval_handles=ra},we={toValue:t=>(t||x("Cannot use deleted val. handle = "+t),ce.get(t).value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ce.allocate({refcount:1,value:t})}}},oa=(t,r)=>{r=Z(r),me(t,{name:r,fromWireType:a=>{var c=we.toValue(a);return nr(a),c},toWireType:(a,c)=>we.toHandle(c),argPackAdvance:ge,readValueFromPointer:Gt,destructorFunction:null})},aa=(t,r,a)=>{switch(r){case 1:return a?function(c){return this.fromWireType(j[c>>0])}:function(c){return this.fromWireType(R[c>>0])};case 2:return a?function(c){return this.fromWireType(k[c>>1])}:function(c){return this.fromWireType(_[c>>1])};case 4:return a?function(c){return this.fromWireType(E[c>>2])}:function(c){return this.fromWireType(M[c>>2])};default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},ia=(t,r,a,c)=>{r=Z(r);function h(){}h.values={},me(t,{name:r,constructor:h,fromWireType:function(g){return this.constructor.values[g]},toWireType:(g,v)=>v.value,argPackAdvance:ge,readValueFromPointer:aa(r,a,c),destructorFunction:null}),Zt(r,h)},or=(t,r)=>{var a=De[t];return a===void 0&&x(r+" has unknown type "+xr(t)),a},sa=(t,r,a)=>{var c=or(t,"enum");r=Z(r);var h=c.constructor,g=Object.create(c.constructor.prototype,{value:{value:a},constructor:{value:Ze(`${c.name}_${r}`,function(){})}});h.values[a]=g,h[r]=g},ar=t=>{if(t===null)return"null";var r=typeof t;return r==="object"||r==="array"||r==="function"?t.toString():""+t},ua=(t,r)=>{switch(r){case 4:return function(a){return this.fromWireType(L[a>>2])};case 8:return function(a){return this.fromWireType(U[a>>3])};default:throw new TypeError(`invalid float width (${r}): ${t}`)}},ca=(t,r,a)=>{r=Z(r),me(t,{name:r,fromWireType:c=>c,toWireType:(c,h)=>h,argPackAdvance:ge,readValueFromPointer:ua(r,a),destructorFunction:null})},la=(t,r,a,c,h,g,v)=>{var y=tr(r,a);t=Z(t),t=Lr(t),h=fe(c,h),Zt(t,function(){bt(`Cannot call ${t} due to unbound types`,y)},r-1),Ie([],y,function(b){var S=[b[0],null].concat(b.slice(1));return Nr(t,rr(t,S,null,h,g),r-1),[]})},da=(t,r,a)=>{switch(r){case 1:return a?c=>j[c>>0]:c=>R[c>>0];case 2:return a?c=>k[c>>1]:c=>_[c>>1];case 4:return a?c=>E[c>>2]:c=>M[c>>2];default:throw new TypeError(`invalid integer width (${r}): ${t}`)}},fa=(t,r,a,c,h)=>{r=Z(r);var g=A=>A;if(c===0){var v=32-8*a;g=A=>A<<v>>>v}var y=r.includes("unsigned"),b=(A,O)=>{},S;y?S=function(A,O){return b(O,this.name),O>>>0}:S=function(A,O){return b(O,this.name),O},me(t,{name:r,fromWireType:g,toWireType:S,argPackAdvance:ge,readValueFromPointer:da(r,a,c!==0),destructorFunction:null})},ha=(t,r,a)=>{var c=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=c[r];function g(v){var y=M[v>>2],b=M[v+4>>2];return new h(j.buffer,b,y)}a=Z(a),me(t,{name:a,fromWireType:g,argPackAdvance:ge,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})},Vr=(t,r,a,c)=>{if(!(c>0))return 0;for(var h=a,g=a+c-1,v=0;v<t.length;++v){var y=t.charCodeAt(v);if(y>=55296&&y<=57343){var b=t.charCodeAt(++v);y=65536+((y&1023)<<10)|b&1023}if(y<=127){if(a>=g)break;r[a++]=y}else if(y<=2047){if(a+1>=g)break;r[a++]=192|y>>6,r[a++]=128|y&63}else if(y<=65535){if(a+2>=g)break;r[a++]=224|y>>12,r[a++]=128|y>>6&63,r[a++]=128|y&63}else{if(a+3>=g)break;r[a++]=240|y>>18,r[a++]=128|y>>12&63,r[a++]=128|y>>6&63,r[a++]=128|y&63}}return r[a]=0,a-h},ma=(t,r,a)=>Vr(t,R,r,a),Hr=t=>{for(var r=0,a=0;a<t.length;++a){var c=t.charCodeAt(a);c<=127?r++:c<=2047?r+=2:c>=55296&&c<=57343?(r+=4,++a):r+=3}return r},Wr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ga=(t,r,a)=>{for(var c=r+a,h=r;t[h]&&!(h>=c);)++h;if(h-r>16&&t.buffer&&Wr)return Wr.decode(t.subarray(r,h));for(var g="";r<h;){var v=t[r++];if(!(v&128)){g+=String.fromCharCode(v);continue}var y=t[r++]&63;if((v&224)==192){g+=String.fromCharCode((v&31)<<6|y);continue}var b=t[r++]&63;if((v&240)==224?v=(v&15)<<12|y<<6|b:v=(v&7)<<18|y<<12|b<<6|t[r++]&63,v<65536)g+=String.fromCharCode(v);else{var S=v-65536;g+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return g},ir=(t,r)=>t?ga(R,t,r):"",pa=(t,r)=>{r=Z(r);var a=r==="std::string";me(t,{name:r,fromWireType(c){var h=M[c>>2],g=c+4,v;if(a)for(var y=g,b=0;b<=h;++b){var S=g+b;if(b==h||R[S]==0){var A=S-y,O=ir(y,A);v===void 0?v=O:(v+="\0",v+=O),y=S+1}}else{for(var B=new Array(h),b=0;b<h;++b)B[b]=String.fromCharCode(R[g+b]);v=B.join("")}return be(c),v},toWireType(c,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var g,v=typeof h=="string";v||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||x("Cannot pass non-string to std::string"),a&&v?g=Hr(h):g=h.length;var y=cr(4+g+1),b=y+4;if(M[y>>2]=g,a&&v)ma(h,b,g+1);else if(v)for(var S=0;S<g;++S){var A=h.charCodeAt(S);A>255&&(be(b),x("String has UTF-16 code units that do not fit in 8 bits")),R[b+S]=A}else for(var S=0;S<g;++S)R[b+S]=h[S];return c!==null&&c.push(be,y),y},argPackAdvance:ge,readValueFromPointer:kr,destructorFunction(c){be(c)}})},qr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,va=(t,r)=>{for(var a=t,c=a>>1,h=c+r/2;!(c>=h)&&_[c];)++c;if(a=c<<1,a-t>32&&qr)return qr.decode(R.subarray(t,a));for(var g="",v=0;!(v>=r/2);++v){var y=k[t+v*2>>1];if(y==0)break;g+=String.fromCharCode(y)}return g},ya=(t,r,a)=>{var c;if((c=a)!==null&&c!==void 0||(a=2147483647),a<2)return 0;a-=2;for(var h=r,g=a<t.length*2?a/2:t.length,v=0;v<g;++v){var y=t.charCodeAt(v);k[r>>1]=y,r+=2}return k[r>>1]=0,r-h},wa=t=>t.length*2,ba=(t,r)=>{for(var a=0,c="";!(a>=r/4);){var h=E[t+a*4>>2];if(h==0)break;if(++a,h>=65536){var g=h-65536;c+=String.fromCharCode(55296|g>>10,56320|g&1023)}else c+=String.fromCharCode(h)}return c},Ca=(t,r,a)=>{var c;if((c=a)!==null&&c!==void 0||(a=2147483647),a<4)return 0;for(var h=r,g=h+a-4,v=0;v<t.length;++v){var y=t.charCodeAt(v);if(y>=55296&&y<=57343){var b=t.charCodeAt(++v);y=65536+((y&1023)<<10)|b&1023}if(E[r>>2]=y,r+=4,r+4>g)break}return E[r>>2]=0,r-h},Ta=t=>{for(var r=0,a=0;a<t.length;++a){var c=t.charCodeAt(a);c>=55296&&c<=57343&&++a,r+=4}return r},Ea=(t,r,a)=>{a=Z(a);var c,h,g,v,y;r===2?(c=va,h=ya,v=wa,g=()=>_,y=1):r===4&&(c=ba,h=Ca,v=Ta,g=()=>M,y=2),me(t,{name:a,fromWireType:b=>{for(var S=M[b>>2],A=g(),O,B=b+4,N=0;N<=S;++N){var W=b+4+N*r;if(N==S||A[W>>y]==0){var Y=W-B,V=c(B,Y);O===void 0?O=V:(O+="\0",O+=V),B=W+r}}return be(b),O},toWireType:(b,S)=>{typeof S!="string"&&x(`Cannot pass non-string to C++ string type ${a}`);var A=v(S),O=cr(4+A+r);return M[O>>2]=A>>y,h(S,O+4,A+r),b!==null&&b.push(be,O),O},argPackAdvance:ge,readValueFromPointer:Gt,destructorFunction(b){be(b)}})},Sa=(t,r,a,c,h,g)=>{ht[t]={name:Z(r),rawConstructor:fe(a,c),rawDestructor:fe(h,g),fields:[]}},Pa=(t,r,a,c,h,g,v,y,b,S)=>{ht[t].fields.push({fieldName:Z(r),getterReturnType:a,getter:fe(c,h),getterContext:g,setterArgumentType:v,setter:fe(y,b),setterContext:S})},_a=(t,r)=>{r=Z(r),me(t,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(a,c)=>{}})},sr=[],$a=(t,r,a,c)=>(t=sr[t],r=we.toValue(r),t(null,r,a,c)),Aa={},Ma=t=>{var r=Aa[t];return r===void 0?Z(t):r},zr=()=>{if(typeof globalThis=="object")return globalThis;function t(r){r.$$$embind_global$$$=r;var a=typeof $$$embind_global$$$=="object"&&r.$$$embind_global$$$==r;return a||delete r.$$$embind_global$$$,a}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&t(global)?$$$embind_global$$$=global:typeof self=="object"&&t(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Ra=t=>t===0?we.toHandle(zr()):(t=Ma(t),we.toHandle(zr()[t])),Da=t=>{var r=sr.length;return sr.push(t),r},Ia=(t,r)=>{for(var a=new Array(t),c=0;c<t;++c)a[c]=or(M[r+c*4>>2],"parameter "+c);return a},Oa=Reflect.construct,Ba=(t,r,a)=>{var c=[],h=t.toWireType(c,a);return c.length&&(M[r>>2]=we.toHandle(c)),h},ka=(t,r,a)=>{var c=Ia(t,r),h=c.shift();t--;var g=new Array(t),v=(b,S,A,O)=>{for(var B=0,N=0;N<t;++N)g[N]=c[N].readValueFromPointer(O+B),B+=c[N].argPackAdvance;for(var W=a===1?Oa(S,g):S.apply(b,g),N=0;N<t;++N){var Y,V;(Y=(V=c[N]).deleteObject)===null||Y===void 0||Y.call(V,g[N])}return Ba(h,A,W)},y=`methodCaller<(${c.map(b=>b.name).join(", ")}) => ${h.name}>`;return Da(Ze(y,v))},Na=t=>{t>4&&(ce.get(t).refcount+=1)},ja=t=>{var r=we.toValue(t);Yt(r),nr(t)},Fa=(t,r)=>{t=or(t,"_emval_take_value");var a=t.readValueFromPointer(r);return we.toHandle(a)},xa=()=>{se("")},La=(t,r,a)=>R.copyWithin(t,r,r+a),Ua=()=>2147483648,Va=t=>{var r=$.buffer,a=(t-r.byteLength+65535)/65536;try{return $.grow(a),X(),1}catch{}},Ha=t=>{var r=R.length;t>>>=0;var a=Ua();if(t>a)return!1;for(var c=(b,S)=>b+(S-b%S)%S,h=1;h<=4;h*=2){var g=r*(1+.2/h);g=Math.min(g,t+100663296);var v=Math.min(a,c(Math.max(t,g),65536)),y=Va(v);if(y)return!0}return!1},ur={},Wa=()=>d||"./this.program",et=()=>{if(!et.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:Wa()};for(var a in ur)ur[a]===void 0?delete r[a]:r[a]=ur[a];var c=[];for(var a in r)c.push(`${a}=${r[a]}`);et.strings=c}return et.strings},qa=(t,r)=>{for(var a=0;a<t.length;++a)j[r++>>0]=t.charCodeAt(a);j[r>>0]=0},za=(t,r)=>{var a=0;return et().forEach((c,h)=>{var g=r+a;M[t+h*4>>2]=g,qa(c,g),a+=c.length+1}),0},Ja=(t,r)=>{var a=et();M[t>>2]=a.length;var c=0;return a.forEach(h=>c+=h.length+1),M[r>>2]=c,0},Ya=t=>t,Ct=t=>t%4===0&&(t%100!==0||t%400===0),Ga=(t,r)=>{for(var a=0,c=0;c<=r;a+=t[c++]);return a},Jr=[31,29,31,30,31,30,31,31,30,31,30,31],Yr=[31,28,31,30,31,30,31,31,30,31,30,31],Qa=(t,r)=>{for(var a=new Date(t.getTime());r>0;){var c=Ct(a.getFullYear()),h=a.getMonth(),g=(c?Jr:Yr)[h];if(r>g-a.getDate())r-=g-a.getDate()+1,a.setDate(1),h<11?a.setMonth(h+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else return a.setDate(a.getDate()+r),a}return a};function Ka(t,r,a){var c=Hr(t)+1,h=new Array(c);return Vr(t,h,0,h.length),h}var Xa=(t,r)=>{j.set(t,r)},Za=(t,r,a,c)=>{var h=M[c+40>>2],g={tm_sec:E[c>>2],tm_min:E[c+4>>2],tm_hour:E[c+8>>2],tm_mday:E[c+12>>2],tm_mon:E[c+16>>2],tm_year:E[c+20>>2],tm_wday:E[c+24>>2],tm_yday:E[c+28>>2],tm_isdst:E[c+32>>2],tm_gmtoff:E[c+36>>2],tm_zone:h?ir(h):""},v=ir(a),y={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var b in y)v=v.replace(new RegExp(b,"g"),y[b]);var S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=["January","February","March","April","May","June","July","August","September","October","November","December"];function O(T,I,G){for(var K=typeof T=="number"?T.toString():T||"";K.length<I;)K=G[0]+K;return K}function B(T,I){return O(T,I,"0")}function N(T,I){function G(xe){return xe<0?-1:xe>0?1:0}var K;return(K=G(T.getFullYear()-I.getFullYear()))===0&&(K=G(T.getMonth()-I.getMonth()))===0&&(K=G(T.getDate()-I.getDate())),K}function W(T){switch(T.getDay()){case 0:return new Date(T.getFullYear()-1,11,29);case 1:return T;case 2:return new Date(T.getFullYear(),0,3);case 3:return new Date(T.getFullYear(),0,2);case 4:return new Date(T.getFullYear(),0,1);case 5:return new Date(T.getFullYear()-1,11,31);case 6:return new Date(T.getFullYear()-1,11,30)}}function Y(T){var I=Qa(new Date(T.tm_year+1900,0,1),T.tm_yday),G=new Date(I.getFullYear(),0,4),K=new Date(I.getFullYear()+1,0,4),xe=W(G),Et=W(K);return N(xe,I)<=0?N(Et,I)<=0?I.getFullYear()+1:I.getFullYear():I.getFullYear()-1}var V={"%a":T=>S[T.tm_wday].substring(0,3),"%A":T=>S[T.tm_wday],"%b":T=>A[T.tm_mon].substring(0,3),"%B":T=>A[T.tm_mon],"%C":T=>{var I=T.tm_year+1900;return B(I/100|0,2)},"%d":T=>B(T.tm_mday,2),"%e":T=>O(T.tm_mday,2," "),"%g":T=>Y(T).toString().substring(2),"%G":T=>Y(T),"%H":T=>B(T.tm_hour,2),"%I":T=>{var I=T.tm_hour;return I==0?I=12:I>12&&(I-=12),B(I,2)},"%j":T=>B(T.tm_mday+Ga(Ct(T.tm_year+1900)?Jr:Yr,T.tm_mon-1),3),"%m":T=>B(T.tm_mon+1,2),"%M":T=>B(T.tm_min,2),"%n":()=>`
`,"%p":T=>T.tm_hour>=0&&T.tm_hour<12?"AM":"PM","%S":T=>B(T.tm_sec,2),"%t":()=>"	","%u":T=>T.tm_wday||7,"%U":T=>{var I=T.tm_yday+7-T.tm_wday;return B(Math.floor(I/7),2)},"%V":T=>{var I=Math.floor((T.tm_yday+7-(T.tm_wday+6)%7)/7);if((T.tm_wday+371-T.tm_yday-2)%7<=2&&I++,I){if(I==53){var G=(T.tm_wday+371-T.tm_yday)%7;G!=4&&(G!=3||!Ct(T.tm_year))&&(I=1)}}else{I=52;var K=(T.tm_wday+7-T.tm_yday-1)%7;(K==4||K==5&&Ct(T.tm_year%400-1))&&I++}return B(I,2)},"%w":T=>T.tm_wday,"%W":T=>{var I=T.tm_yday+7-(T.tm_wday+6)%7;return B(Math.floor(I/7),2)},"%y":T=>(T.tm_year+1900).toString().substring(2),"%Y":T=>T.tm_year+1900,"%z":T=>{var I=T.tm_gmtoff,G=I>=0;return I=Math.abs(I)/60,I=I/60*100+I%60,(G?"+":"-")+("0000"+I).slice(-4)},"%Z":T=>T.tm_zone,"%%":()=>"%"};v=v.replace(/%%/g,"\0\0");for(var b in V)v.includes(b)&&(v=v.replace(new RegExp(b,"g"),V[b](g)));v=v.replace(/\0\0/g,"%");var ee=Ka(v);return ee.length>r?0:(Xa(ee,t),ee.length-1)},ei=(t,r,a,c,h)=>Za(t,r,a,c);Ar=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},_o(),Fe=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Fo(),Bo(),zo(),Fr=o.UnboundTypeError=Qo(Error,"UnboundTypeError"),ta(),na();var ti={s:go,u:po,b:yo,g:wo,q:bo,J:Co,f:To,V:Eo,d:vo,da:So,Q:Po,_:Ao,ca:Ko,ba:Zo,w:ea,Y:oa,x:ia,h:sa,L:ca,M:la,t:fa,o:ha,K:pa,C:Ea,A:Sa,ea:Pa,$:_a,R:$a,ha:nr,fa:Ra,Z:ka,N:Na,O:ja,aa:Fa,B:xa,X:La,W:Ha,T:za,U:Ja,E:vi,D:ii,F:pi,n:yi,a:ri,e:ui,m:ai,k:li,H:mi,v:fi,G:gi,z:bi,P:Ti,l:ci,j:si,c:oi,p:ni,I:hi,r:wi,i:di,y:Ci,ga:Ya,S:ei},Q=mo(),be=o._free=t=>(be=o._free=Q.ka)(t),cr=o._malloc=t=>(cr=o._malloc=Q.la)(t),Gr=t=>(Gr=Q.na)(t),H=(t,r)=>(H=Q.oa)(t,r),tt=t=>(tt=Q.pa)(t),z=()=>(z=Q.qa)(),J=t=>(J=Q.ra)(t),Qr=t=>(Qr=Q.sa)(t),Kr=t=>(Kr=Q.ta)(t),Xr=(t,r,a)=>(Xr=Q.ua)(t,r,a),Zr=t=>(Zr=Q.va)(t);o.dynCall_viijii=(t,r,a,c,h,g,v)=>(o.dynCall_viijii=Q.wa)(t,r,a,c,h,g,v);var en=o.dynCall_jiiii=(t,r,a,c,h)=>(en=o.dynCall_jiiii=Q.xa)(t,r,a,c,h);o.dynCall_iiiiij=(t,r,a,c,h,g,v)=>(o.dynCall_iiiiij=Q.ya)(t,r,a,c,h,g,v),o.dynCall_iiiiijj=(t,r,a,c,h,g,v,y,b)=>(o.dynCall_iiiiijj=Q.za)(t,r,a,c,h,g,v,y,b),o.dynCall_iiiiiijj=(t,r,a,c,h,g,v,y,b,S)=>(o.dynCall_iiiiiijj=Q.Aa)(t,r,a,c,h,g,v,y,b,S);function ri(t,r){var a=z();try{return q(t)(r)}catch(c){if(J(a),c!==c+0)throw c;H(1,0)}}function ni(t,r,a,c){var h=z();try{q(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function oi(t,r,a){var c=z();try{q(t)(r,a)}catch(h){if(J(c),h!==h+0)throw h;H(1,0)}}function ai(t,r,a,c){var h=z();try{return q(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function ii(t,r,a,c,h){var g=z();try{return q(t)(r,a,c,h)}catch(v){if(J(g),v!==v+0)throw v;H(1,0)}}function si(t,r){var a=z();try{q(t)(r)}catch(c){if(J(a),c!==c+0)throw c;H(1,0)}}function ui(t,r,a){var c=z();try{return q(t)(r,a)}catch(h){if(J(c),h!==h+0)throw h;H(1,0)}}function ci(t){var r=z();try{q(t)()}catch(a){if(J(r),a!==a+0)throw a;H(1,0)}}function li(t,r,a,c,h){var g=z();try{return q(t)(r,a,c,h)}catch(v){if(J(g),v!==v+0)throw v;H(1,0)}}function di(t,r,a,c,h,g,v,y,b,S,A){var O=z();try{q(t)(r,a,c,h,g,v,y,b,S,A)}catch(B){if(J(O),B!==B+0)throw B;H(1,0)}}function fi(t,r,a,c,h,g,v){var y=z();try{return q(t)(r,a,c,h,g,v)}catch(b){if(J(y),b!==b+0)throw b;H(1,0)}}function hi(t,r,a,c,h){var g=z();try{q(t)(r,a,c,h)}catch(v){if(J(g),v!==v+0)throw v;H(1,0)}}function mi(t,r,a,c,h,g){var v=z();try{return q(t)(r,a,c,h,g)}catch(y){if(J(v),y!==y+0)throw y;H(1,0)}}function gi(t,r,a,c,h,g,v,y){var b=z();try{return q(t)(r,a,c,h,g,v,y)}catch(S){if(J(b),S!==S+0)throw S;H(1,0)}}function pi(t,r,a,c){var h=z();try{return q(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function vi(t,r,a,c){var h=z();try{return q(t)(r,a,c)}catch(g){if(J(h),g!==g+0)throw g;H(1,0)}}function yi(t){var r=z();try{return q(t)()}catch(a){if(J(r),a!==a+0)throw a;H(1,0)}}function wi(t,r,a,c,h,g,v,y){var b=z();try{q(t)(r,a,c,h,g,v,y)}catch(S){if(J(b),S!==S+0)throw S;H(1,0)}}function bi(t,r,a,c,h,g,v,y,b,S,A,O){var B=z();try{return q(t)(r,a,c,h,g,v,y,b,S,A,O)}catch(N){if(J(B),N!==N+0)throw N;H(1,0)}}function Ci(t,r,a,c,h,g,v,y,b,S,A,O,B,N,W,Y){var V=z();try{q(t)(r,a,c,h,g,v,y,b,S,A,O,B,N,W,Y)}catch(ee){if(J(V),ee!==ee+0)throw ee;H(1,0)}}function Ti(t,r,a,c,h){var g=z();try{return en(t,r,a,c,h)}catch(v){if(J(g),v!==v+0)throw v;H(1,0)}}var Tt;Re=function t(){Tt||tn(),Tt||(Re=t)};function tn(){if(he>0||(Te(),he>0))return;function t(){Tt||(Tt=!0,o.calledRun=!0,!D&&(ie(),i(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),xt()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),t()},1)):t()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return tn(),n.ready}})();function Xs(e){return _r($r,e)}async function Zs(e,n){return Qs($r,e,n)}async function eu(e,n){return Ks($r,e,n)}var rt;class hn extends EventTarget{constructor(n={}){var o;super(),_s(this,rt,void 0);try{const i=(o=n==null?void 0:n.formats)==null?void 0:o.filter(s=>s!=="unknown");if((i==null?void 0:i.length)===0)throw new TypeError("Hint option provided, but is empty.");i==null||i.forEach(s=>{if(!At.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`)}),$s(this,rt,i!=null?i:[]),Xs().then(s=>{this.dispatchEvent(new CustomEvent("load",{detail:s}))}).catch(s=>{this.dispatchEvent(new CustomEvent("error",{detail:s}))})}catch(i){throw cn(i,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return As.filter(n=>n!=="unknown")}async detect(n){try{const o=await ks(n);if(o===null)return[];let i;try{Jn(o)?i=await Zs(o,{tryHarder:!0,formats:un(this,rt).map(s=>At.get(s))}):i=await eu(o,{tryHarder:!0,formats:un(this,rt).map(s=>At.get(s))})}catch(s){throw console.error(s),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return i.map(s=>{const{topLeft:{x:u,y:d},topRight:{x:f,y:l},bottomLeft:{x:m,y:p},bottomRight:{x:w,y:C}}=s.position,P=Math.min(u,f,m,w),$=Math.min(d,l,p,C),D=Math.max(u,f,m,w),j=Math.max(d,l,p,C);return{boundingBox:new DOMRectReadOnly(P,$,D-P,j-$),rawValue:s.text,format:Ms(s.format),cornerPoints:[{x:u,y:d},{x:f,y:l},{x:w,y:C},{x:m,y:p}]}})}catch(o){throw cn(o,"Failed to execute 'detect' on 'BarcodeDetector'")}}}rt=new WeakMap;const Kn=(e,n,o="error")=>{let i,s;const u=new Promise((d,f)=>{i=d,s=f,e.addEventListener(n,i),e.addEventListener(o,s)});return u.finally(()=>{e.removeEventListener(n,i),e.removeEventListener(o,s)}),u},mn=e=>new Promise(n=>setTimeout(n,e));class Xn extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class tu extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class ru extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let Zn;async function nu(e){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new hn({formats:e});const n=await window.BarcodeDetector.getSupportedFormats(),o=e.filter(i=>!n.includes(i));return o.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(o)}. Will use polyfill.`),new hn({formats:e})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:e}))}async function eo(e){Zn=await nu(e)}const ou=async(e,{detectHandler:n,locateHandler:o,minDelay:i,formats:s})=>{console.debug("[vue-qrcode-reader] start scanning"),await eo(s);const u=d=>async f=>{if(e.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:l,contentBefore:m,lastScanHadContent:p}=d;if(f-l<i)window.requestAnimationFrame(u(d));else{const w=await Zn.detect(e),C=w.some(D=>!m.includes(D.rawValue));C&&n(w);const P=w.length>0;P&&o(w),!P&&p&&o(w);const $={lastScanned:f,lastScanHadContent:P,contentBefore:C?w.map(D=>D.rawValue):m};window.requestAnimationFrame(u($))}}};u({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var to={},ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.compactObject=oo;ae.deprecated=hu;var au=ae.detectBrowser=mu;ae.disableLog=lu;ae.disableWarnings=du;ae.extractVersion=Mt;ae.filterStats=gu;ae.log=fu;ae.walkStats=Bt;ae.wrapPeerConnectionEvent=cu;function iu(e,n,o){return n=su(n),n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function su(e){var n=uu(e,"string");return $e(n)==="symbol"?n:String(n)}function uu(e,n){if($e(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var i=o.call(e,n||"default");if($e(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function $e(e){return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$e(e)}var ro=!0,no=!0;function Mt(e,n,o){var i=e.match(n);return i&&i.length>=o&&parseInt(i[o],10)}function cu(e,n,o){if(e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype,s=i.addEventListener;i.addEventListener=function(d,f){if(d!==n)return s.apply(this,arguments);var l=function(m){var p=o(m);p&&(f.handleEvent?f.handleEvent(p):f(p))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(f,l),s.apply(this,[d,l])};var u=i.removeEventListener;i.removeEventListener=function(d,f){if(d!==n||!this._eventMap||!this._eventMap[n])return u.apply(this,arguments);if(!this._eventMap[n].has(f))return u.apply(this,arguments);var l=this._eventMap[n].get(f);return this._eventMap[n].delete(f),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[d,l])},Object.defineProperty(i,"on"+n,{get:function(){return this["_on"+n]},set:function(d){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),d&&this.addEventListener(n,this["_on"+n]=d)},enumerable:!0,configurable:!0})}}function lu(e){return typeof e!="boolean"?new Error("Argument type: "+$e(e)+". Please use a boolean."):(ro=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function du(e){return typeof e!="boolean"?new Error("Argument type: "+$e(e)+". Please use a boolean."):(no=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function fu(){if((typeof window>"u"?"undefined":$e(window))==="object"){if(ro)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function hu(e,n){no&&console.warn(e+" is deprecated, please use "+n+" instead.")}function mu(e){var n={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return n.browser="Not a browser.",n;var o=e.navigator;if(o.mozGetUserMedia)n.browser="firefox",n.version=Mt(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)n.browser="chrome",n.version=Mt(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))n.browser="safari",n.version=Mt(o.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return n.browser="Not a supported browser.",n;return n}function gn(e){return Object.prototype.toString.call(e)==="[object Object]"}function oo(e){return gn(e)?Object.keys(e).reduce(function(n,o){var i=gn(e[o]),s=i?oo(e[o]):e[o],u=i&&!Object.keys(s).length;return s===void 0||u?n:Object.assign(n,iu({},o,s))},{}):e}function Bt(e,n,o){!n||o.has(n.id)||(o.set(n.id,n),Object.keys(n).forEach(function(i){i.endsWith("Id")?Bt(e,e.get(n[i]),o):i.endsWith("Ids")&&n[i].forEach(function(s){Bt(e,e.get(s),o)})}))}function gu(e,n,o){var i=o?"outbound-rtp":"inbound-rtp",s=new Map;if(n===null)return s;var u=[];return e.forEach(function(d){d.type==="track"&&d.trackIdentifier===n.id&&u.push(d)}),u.forEach(function(d){e.forEach(function(f){f.type===i&&f.trackId===d.id&&Bt(e,f,s)})}),s}Object.defineProperty(to,"__esModule",{value:!0});var pu=to.shimGetUserMedia=wu,vu=yu(ae);function ao(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(ao=function(i){return i?o:n})(e)}function yu(e,n){if(e&&e.__esModule)return e;if(e===null||Pe(e)!=="object"&&typeof e!="function")return{default:e};var o=ao(n);if(o&&o.has(e))return o.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(i,u,d):i[u]=e[u]}return i.default=e,o&&o.set(e,i),i}function Pe(e){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pe(e)}var pn=vu.log;function wu(e,n){var o=e&&e.navigator;if(o.mediaDevices){var i=function(l){if(Pe(l)!=="object"||l.mandatory||l.optional)return l;var m={};return Object.keys(l).forEach(function(p){if(!(p==="require"||p==="advanced"||p==="mediaSource")){var w=Pe(l[p])==="object"?l[p]:{ideal:l[p]};w.exact!==void 0&&typeof w.exact=="number"&&(w.min=w.max=w.exact);var C=function($,D){return $?$+D.charAt(0).toUpperCase()+D.slice(1):D==="deviceId"?"sourceId":D};if(w.ideal!==void 0){m.optional=m.optional||[];var P={};typeof w.ideal=="number"?(P[C("min",p)]=w.ideal,m.optional.push(P),P={},P[C("max",p)]=w.ideal,m.optional.push(P)):(P[C("",p)]=w.ideal,m.optional.push(P))}w.exact!==void 0&&typeof w.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[C("",p)]=w.exact):["min","max"].forEach(function($){w[$]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[C($,p)]=w[$])})}}),l.advanced&&(m.optional=(m.optional||[]).concat(l.advanced)),m},s=function(l,m){if(n.version>=61)return m(l);if(l=JSON.parse(JSON.stringify(l)),l&&Pe(l.audio)==="object"){var p=function($,D,j){D in $&&!(j in $)&&($[j]=$[D],delete $[D])};l=JSON.parse(JSON.stringify(l)),p(l.audio,"autoGainControl","googAutoGainControl"),p(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=i(l.audio)}if(l&&Pe(l.video)==="object"){var w=l.video.facingMode;w=w&&(Pe(w)==="object"?w:{ideal:w});var C=n.version<66;if(w&&(w.exact==="user"||w.exact==="environment"||w.ideal==="user"||w.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!C)){delete l.video.facingMode;var P;if(w.exact==="environment"||w.ideal==="environment"?P=["back","rear"]:(w.exact==="user"||w.ideal==="user")&&(P=["front"]),P)return o.mediaDevices.enumerateDevices().then(function($){$=$.filter(function(j){return j.kind==="videoinput"});var D=$.find(function(j){return P.some(function(R){return j.label.toLowerCase().includes(R)})});return!D&&$.length&&P.includes("back")&&(D=$[$.length-1]),D&&(l.video.deviceId=w.exact?{exact:D.deviceId}:{ideal:D.deviceId}),l.video=i(l.video),pn("chrome: "+JSON.stringify(l)),m(l)})}l.video=i(l.video)}return pn("chrome: "+JSON.stringify(l)),m(l)},u=function(l){return n.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},d=function(l,m,p){s(l,function(w){o.webkitGetUserMedia(w,m,function(C){p&&p(u(C))})})};if(o.getUserMedia=d.bind(o),o.mediaDevices.getUserMedia){var f=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(l){return s(l,function(m){return f(m).then(function(p){if(m.audio&&!p.getAudioTracks().length||m.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(function(w){w.stop()}),new DOMException("","NotFoundError");return p},function(p){return Promise.reject(u(p))})})}}}}var io={};Object.defineProperty(io,"__esModule",{value:!0});var bu=io.shimGetUserMedia=Eu,Cu=Tu(ae);function so(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(so=function(i){return i?o:n})(e)}function Tu(e,n){if(e&&e.__esModule)return e;if(e===null||Ue(e)!=="object"&&typeof e!="function")return{default:e};var o=so(n);if(o&&o.has(e))return o.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(i,u,d):i[u]=e[u]}return i.default=e,o&&o.set(e,i),i}function Ue(e){return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ue(e)}function Eu(e,n){var o=e&&e.navigator,i=e&&e.MediaStreamTrack;if(o.getUserMedia=function(l,m,p){Cu.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(l).then(m,p)},!(n.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){var s=function(l,m,p){m in l&&!(p in l)&&(l[p]=l[m],delete l[m])},u=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(l){return Ue(l)==="object"&&Ue(l.audio)==="object"&&(l=JSON.parse(JSON.stringify(l)),s(l.audio,"autoGainControl","mozAutoGainControl"),s(l.audio,"noiseSuppression","mozNoiseSuppression")),u(l)},i&&i.prototype.getSettings){var d=i.prototype.getSettings;i.prototype.getSettings=function(){var l=d.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(i&&i.prototype.applyConstraints){var f=i.prototype.applyConstraints;i.prototype.applyConstraints=function(l){return this.kind==="audio"&&Ue(l)==="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[l])}}}}var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.shimAudioContext=Ou;ve.shimCallbacksAPI=Au;ve.shimConstraints=lo;ve.shimCreateOfferLegacy=Iu;var Su=ve.shimGetUserMedia=Mu;ve.shimLocalStreamsAPI=_u;ve.shimRTCIceServerUrls=Ru;ve.shimRemoteStreamsAPI=$u;ve.shimTrackEventTransceiver=Du;var uo=Pu(ae);function co(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,o=new WeakMap;return(co=function(i){return i?o:n})(e)}function Pu(e,n){if(e&&e.__esModule)return e;if(e===null||Ae(e)!=="object"&&typeof e!="function")return{default:e};var o=co(n);if(o&&o.has(e))return o.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(u!=="default"&&Object.prototype.hasOwnProperty.call(e,u)){var d=s?Object.getOwnPropertyDescriptor(e,u):null;d&&(d.get||d.set)?Object.defineProperty(i,u,d):i[u]=e[u]}return i.default=e,o&&o.set(e,i),i}function Ae(e){return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ae(e)}function _u(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(o){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(function(s){return n.call(i,s,o)}),o.getVideoTracks().forEach(function(s){return n.call(i,s,o)})},e.RTCPeerConnection.prototype.addTrack=function(o){for(var i=this,s=arguments.length,u=new Array(s>1?s-1:0),d=1;d<s;d++)u[d-1]=arguments[d];return u&&u.forEach(function(f){i._localStreams?i._localStreams.includes(f)||i._localStreams.push(f):i._localStreams=[f]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(o){var i=this;this._localStreams||(this._localStreams=[]);var s=this._localStreams.indexOf(o);if(s!==-1){this._localStreams.splice(s,1);var u=o.getTracks();this.getSenders().forEach(function(d){u.includes(d.track)&&i.removeTrack(d)})}})}}function $u(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(o){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(function(u){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(u)){i._remoteStreams.push(u);var d=new Event("addstream");d.stream=u,i.dispatchEvent(d)}})})}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(s){if(o._remoteStreams||(o._remoteStreams=[]),!(o._remoteStreams.indexOf(s)>=0)){o._remoteStreams.push(s);var u=new Event("addstream");u.stream=s,o.dispatchEvent(u)}})}),n.apply(o,arguments)}}}function Au(e){if(!(Ae(e)!=="object"||!e.RTCPeerConnection)){var n=e.RTCPeerConnection.prototype,o=n.createOffer,i=n.createAnswer,s=n.setLocalDescription,u=n.setRemoteDescription,d=n.addIceCandidate;n.createOffer=function(l,m){var p=arguments.length>=2?arguments[2]:arguments[0],w=o.apply(this,[p]);return m?(w.then(l,m),Promise.resolve()):w},n.createAnswer=function(l,m){var p=arguments.length>=2?arguments[2]:arguments[0],w=i.apply(this,[p]);return m?(w.then(l,m),Promise.resolve()):w};var f=function(l,m,p){var w=s.apply(this,[l]);return p?(w.then(m,p),Promise.resolve()):w};n.setLocalDescription=f,f=function(l,m,p){var w=u.apply(this,[l]);return p?(w.then(m,p),Promise.resolve()):w},n.setRemoteDescription=f,f=function(l,m,p){var w=d.apply(this,[l]);return p?(w.then(m,p),Promise.resolve()):w},n.addIceCandidate=f}}function Mu(e){var n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){var o=n.mediaDevices,i=o.getUserMedia.bind(o);n.mediaDevices.getUserMedia=function(s){return i(lo(s))}}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=function(s,u,d){n.mediaDevices.getUserMedia(s).then(u,d)}.bind(n))}function lo(e){return e&&e.video!==void 0?Object.assign({},e,{video:uo.compactObject(e.video)}):e}function Ru(e){if(e.RTCPeerConnection){var n=e.RTCPeerConnection;e.RTCPeerConnection=function(o,i){if(o&&o.iceServers){for(var s=[],u=0;u<o.iceServers.length;u++){var d=o.iceServers[u];d.urls===void 0&&d.url?(uo.deprecated("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,s.push(d)):s.push(o.iceServers[u])}o.iceServers=s}return new n(o,i)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}}function Du(e){Ae(e)==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Iu(e){var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);var i=this.getTransceivers().find(function(u){return u.receiver.track.kind==="audio"});o.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):o.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);var s=this.getTransceivers().find(function(u){return u.receiver.track.kind==="video"});o.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):o.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function Ou(e){Ae(e)!=="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Bu=e=>{let n=!1,o;return(...i)=>(n||(o=e(i),n=!0),o)};function Ce(e,n){if(e===!1)throw new Error(n!=null?n:"assertion failure")}function vn(e){throw new Error("this code should be unreachable")}const ku=Bu(()=>{const e=au(window);switch(e.browser){case"chrome":pu(window,e);break;case"firefox":bu(window,e);break;case"safari":Su(window,e);break;default:throw new Xn}});let Ve=Promise.resolve({type:"stop",data:{}});async function yn(e,n,o){var i,s,u;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(n)),window.isSecureContext!==!0)throw new tu;if(((i=navigator==null?void 0:navigator.mediaDevices)==null?void 0:i.getUserMedia)===void 0)throw new Xn;ku(),console.debug("[vue-qrcode-reader] calling getUserMedia");const d=await navigator.mediaDevices.getUserMedia({audio:!1,video:n});e.srcObject!==void 0?e.srcObject=d:e.mozSrcObject!==void 0?e.mozSrcObject=d:window.URL.createObjectURL?e.src=window.URL.createObjectURL(d):window.webkitURL?e.src=window.webkitURL.createObjectURL(d):e.src=d.id,e.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([Kn(e,"loadeddata"),mn(6e3).then(()=>{throw new ru})]),console.debug("[vue-qrcode-reader] video element loaded"),await mn(500);const[f]=d.getVideoTracks(),l=(u=(s=f==null?void 0:f.getCapabilities)==null?void 0:s.call(f))!=null?u:{};let m=!1;return o&&l.torch&&(await f.applyConstraints({advanced:[{torch:!0}]}),m=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:e,stream:d,capabilities:l,constraints:n,isTorchOn:m}}}async function Nu(e,{constraints:n,torch:o,restart:i=!1}){Ve=Ve.then(u=>{if(u.type==="start"){const{data:{videoEl:d,stream:f,constraints:l,isTorchOn:m}}=u;return!i&&e===d&&n===l&&o===m?u:fo(d,f,m).then(()=>yn(e,n,o))}else if(u.type==="stop"||u.type==="failed")return yn(e,n,o);vn()}).catch(u=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${u}"`),{type:"failed",error:u}));const s=await Ve;if(s.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(s.type==="failed")throw s.error;if(s.type==="start")return s.data.capabilities;vn()}async function fo(e,n,o){console.debug("[vue-qrcode-reader] stopping camera"),e.src="",e.srcObject=null,e.load(),await Kn(e,"error");for(const i of n.getTracks())o!=null||await i.applyConstraints({advanced:[{torch:!1}]}),n.removeTrack(i),i.stop();return{type:"stop",data:{}}}async function $t(){if(Ve=Ve.then(e=>{if(e.type==="stop"||e.type==="failed")return e;const{data:{videoEl:n,stream:o,isTorchOn:i}}=e;return fo(n,o,i)}),(await Ve).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const ju=_i({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(e,{emit:n}){const o=e,i=n,s=le(o.constraints),u=le(o.formats);Be(()=>o.constraints,(_,E)=>{JSON.stringify(_)!==JSON.stringify(E)&&(s.value=_)},{deep:!0}),Be(()=>o.formats,(_,E)=>{JSON.stringify(_)!==JSON.stringify(E)&&(u.value=_)},{deep:!0});const d=le(),f=le(),l=le(),m=le(!1),p=le(!1);$i(()=>{p.value=!0}),Ai(()=>{$t()});const w=Ne(()=>({torch:o.torch,constraints:s.value,shouldStream:p.value&&!o.paused}));Be(w,async _=>{const E=l.value;Ce(E!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const M=d.value;Ce(M!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const L=M.getContext("2d");if(Ce(L!==null,"if cavnas is defined, canvas 2d context should also be non-null"),_.shouldStream){$t(),m.value=!1;try{const U=await Nu(E,_);p.value?(m.value=!0,i("camera-on",U)):await $t()}catch(U){i("error",U)}}else M.width=E.videoWidth,M.height=E.videoHeight,L.drawImage(E,0,0,E.videoWidth,E.videoHeight),$t(),m.value=!1,i("camera-off")},{deep:!0}),Be(u,async _=>{p.value&&await eo(_)});const C=Ne(()=>w.value.shouldStream&&m.value);Be(C,_=>{if(_){Ce(d.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),P(d.value),Ce(f.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),P(f.value);const E=()=>o.track===void 0?500:40;Ce(l.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),ou(l.value,{detectHandler:M=>i("detect",M),formats:u.value,locateHandler:$,minDelay:E()})}});const P=_=>{const E=_.getContext("2d");Ce(E!==null,"canvas 2d context should always be non-null"),E.clearRect(0,0,_.width,_.height)},$=_=>{const E=f.value;Ce(E!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const M=l.value;if(Ce(M!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),_.length===0||o.track===void 0)P(E);else{const L=M.offsetWidth,U=M.offsetHeight,X=M.videoWidth,ne=M.videoHeight,re=Math.max(L/X,U/ne),de=X*re,Te=ne*re,ie=de/X,xt=Te/ne,Lt=(L-de)/2,Ut=(U-Te)/2,Ye=({x:Ee,y:se})=>({x:Math.floor(Ee*ie),y:Math.floor(se*xt)}),he=({x:Ee,y:se})=>({x:Math.floor(Ee+Lt),y:Math.floor(se+Ut)}),Re=_.map(Ee=>{const{boundingBox:se,cornerPoints:Ht}=Ee,{x:ut,y:Se}=he(Ye({x:se.x,y:se.y})),{x:ct,y:Wt}=Ye({x:se.width,y:se.height});return{...Ee,cornerPoints:Ht.map(lt=>he(Ye(lt))),boundingBox:DOMRectReadOnly.fromRect({x:ut,y:Se,width:ct,height:Wt})}});E.width=M.offsetWidth,E.height=M.offsetHeight;const Vt=E.getContext("2d");o.track(Re,Vt)}},D={width:"100%",height:"100%",position:"relative","z-index":"0"},j={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},R={width:"100%",height:"100%","object-fit":"cover"},k=Ne(()=>C.value?R:{...R,visibility:"hidden",position:"absolute"});return(_,E)=>(ot(),br("div",{style:D},[St("video",{ref_key:"videoRef",ref:l,style:Mi(k.value),autoplay:"",muted:"",playsinline:""},null,4),Ri(St("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:d,style:R},null,512),[[Di,!C.value]]),St("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:f,style:j},null,512),St("div",{style:j},[Ii(_.$slots,"default")])]))}}),Fu={__name:"ReadQRCodeDialog",props:{modelValue:[String,Boolean,Object]},emits:["update:modelValue"],setup(e,{emit:n}){const o=e,i=n,s=Ne({get:()=>o.modelValue,set:l=>{i("update:modelValue",l)}}),u=Ne(()=>typeof s.value=="boolean"&&s.value===!0),d=l=>{if(l&&l.length>0){const m=l[0];m.rawValue&&(s.value=m.rawValue)}},f=l=>{l.catch(m=>{s.value=!0,$q.notify({message:m.message||m})})};return(l,m)=>(ot(),bn(Cn,{modelValue:u.value,"onUpdate:modelValue":m[1]||(m[1]=p=>u.value=p),persistent:""},{default:te(()=>[F(Rt,null,{default:te(()=>[F(Le,null,{default:te(()=>[F(oe(ju),{onDetect:d,onInit:f,class:"scanner"})]),_:1}),F(Dt,{align:"center"},{default:te(()=>[F(ke,{icon:"close",label:"Close",color:"red",class:"q-mt-md",onClick:m[0]||(m[0]=p=>s.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},qu={__name:"FirebaseSettingsPage",setup(e){const n=wn(),o=Oi(),i=ki(),s=le(null),u=le(null),d=le(""),f=le(""),l=()=>{if(!s.value){n.notify("String import is empty!");return}try{o.setNewConfig(JSON.parse(s.value)),s.value=null,n.notify("String import successful!")}catch(p){n.notify(p.message||p)}};Be(f,p=>{if(typeof p=="string"&&p.trim())try{o.setFbConfig(JSON.parse(p))}catch(w){n.notify({message:w.message||w}),f.value=null}},{immediate:!0});const m=async()=>{try{o.initFb(),i.push({name:"LoginPage"})}catch(p){n.notify({message:p.message||p})}};return(p,w)=>(ot(),br(Bi,null,[F(Ei,{class:"flex flex-center"},{default:te(()=>[F(Rt,{class:"q-pa-md q-mb-md",style:{width:"98%"}},{default:te(()=>[F(Le,{class:"text-center",style:{"font-size":"28px"}},{default:te(()=>w[12]||(w[12]=[gr(" Firebase Settings ")])),_:1}),F(ji,{onSubmit:Ni(m,["prevent"])},{default:te(()=>[F(Le,null,{default:te(()=>[F(Oe,{modelValue:oe(o).fbConfig.apiKey,"onUpdate:modelValue":w[0]||(w[0]=C=>oe(o).fbConfig.apiKey=C),label:"Api Key",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),F(Oe,{modelValue:oe(o).fbConfig.authDomain,"onUpdate:modelValue":w[1]||(w[1]=C=>oe(o).fbConfig.authDomain=C),label:"Auth Domain",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),F(Oe,{modelValue:oe(o).fbConfig.projectId,"onUpdate:modelValue":w[2]||(w[2]=C=>oe(o).fbConfig.projectId=C),label:"Project Id",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),F(Oe,{modelValue:oe(o).fbConfig.storageBucket,"onUpdate:modelValue":w[3]||(w[3]=C=>oe(o).fbConfig.storageBucket=C),label:"Storage Bucket",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),F(Oe,{modelValue:oe(o).fbConfig.messagingSenderId,"onUpdate:modelValue":w[4]||(w[4]=C=>oe(o).fbConfig.messagingSenderId=C),label:"Message Sender Id",required:"",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),F(Oe,{modelValue:oe(o).fbConfig.appId,"onUpdate:modelValue":w[5]||(w[5]=C=>oe(o).fbConfig.appId=C),label:"App Id",required:"",outlined:""},null,8,["modelValue"])]),_:1}),F(Dt,null,{default:te(()=>[F(ke,{icon:"send",label:"Submit",color:"primary",type:"submit",class:"full-width"})]),_:1})]),_:1})]),_:1}),F(Rt,{class:"q-pa-md",style:{width:"98%"}},{default:te(()=>[F(Dt,null,{default:te(()=>[F(ke,{icon:"qr_code",color:"secondary",label:"Share via QR Code / String",class:"full-width q-mb-md",onClick:w[6]||(w[6]=C=>d.value=JSON.stringify(oe(o).fbConfig))}),F(ke,{icon:"qr_code_scanner",label:"Import via QR code",color:"secondary",class:"full-width q-mb-md",onClick:w[7]||(w[7]=C=>f.value=!0)}),F(ke,{icon:"text_fields",label:"Import via String",color:"secondary",class:"full-width q-mb-md",onClick:l}),F(Oe,{ref_key:"stringRef",ref:u,class:"full-width q-mb-md",outlined:"",label:"String Import",modelValue:s.value,"onUpdate:modelValue":w[8]||(w[8]=C=>s.value=C),onFocus:w[9]||(w[9]=C=>u.value.select())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),F(Ps,{modelValue:d.value,"onUpdate:modelValue":w[10]||(w[10]=C=>d.value=C)},null,8,["modelValue"]),F(Fu,{modelValue:f.value,"onUpdate:modelValue":w[11]||(w[11]=C=>f.value=C)},null,8,["modelValue"])],64))}};export{qu as default};
