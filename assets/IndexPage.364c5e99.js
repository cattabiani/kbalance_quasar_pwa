import{Q as vt}from"./QToolbarTitle.086bb4d7.js";import{e as ye,r as T,a as k,f as Ge,o as Xe,i as ft,C as mt,R as bt,h as R,D as Ye,E as ue,F as gt,G as pt,Q as J,s as ht,g as me,H as yt,c as be,w as K,I as wt,J as Ct,b as ge,p as Tt,K as kt,L as re,n as St,M as qt,N as ve,O as we,P as Qe,S as Ce,T as _t,U as xt,V as Pt,W as Lt,u as X,v as se,x as g,y as s,X as _,Y as O,Z as Y,_ as At,$ as Te,a0 as ke,a1 as Vt,a2 as fe,a3 as ie,a4 as De,a5 as Me}from"./index.762fae14.js";import{c as It,Q as Rt,a as $t,b as Fe,d as Ne,e as Ee,f as Bt,_ as Qt}from"./PersonItem.61cbd700.js";import{u as Dt,a as Mt,b as Ft,c as Je,Q as ne,d as qe,e as Nt,f as Et}from"./QPage.16dfcd23.js";import{Q as Ut}from"./QResizeObserver.394f444b.js";import{u as Se,a as _e}from"./focusout.72126187.js";import{r as zt}from"./rtl.276c3f1b.js";import{g as Ue,s as ze,u as Wt,Q as We}from"./QSlideItem.346ee422.js";import{Q as Ze}from"./QCardActions.61a07ebd.js";import{Q as et}from"./QDialog.1e5c786e.js";import{_ as jt}from"./ShareString.9121308c.js";import{_ as je}from"./ReceiveString.9cc1cf55.js";import{_ as Ot}from"./plugin-vue_export-helper.21dcd24c.js";import"./scroll.eb071e13.js";let Kt=0;const Ht=["click","keydown"],Gt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Kt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Xt(e,o,h,u){const i=ft(Ye,ye);if(i===ye)return console.error("QTab/QRouteTab component needs to be child of QTabs"),ye;const{proxy:a}=me(),c=T(null),b=T(null),q=T(null),f=k(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),y=k(()=>i.currentModel.value===e.name),N=k(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(y.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(u!==void 0?u.linkClass.value:"")),w=k(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),S=k(()=>e.disable===!0||i.hasFocus.value===!0||y.value===!1&&i.hasActiveTab.value===!0?-1:e.tabindex||0);function x(d,A){if(A!==!0&&c.value!==null&&c.value.focus(),e.disable===!0){u!==void 0&&u.hasRouterLink.value===!0&&ue(d);return}if(u===void 0){i.updateModel({name:e.name}),h("click",d);return}if(u.hasRouterLink.value===!0){const B=(V={})=>{let M;const Q=V.to===void 0||yt(V.to,e.to)===!0?i.avoidRouteWatcher=Dt():null;return u.navigateToRouterLink(d,{...V,returnRouterError:!0}).catch(E=>{M=E}).then(E=>{if(Q===i.avoidRouteWatcher&&(i.avoidRouteWatcher=!1,M===void 0&&(E===void 0||E.message!==void 0&&E.message.startsWith("Avoided redundant navigation")===!0)&&i.updateModel({name:e.name})),V.returnRouterError===!0)return M!==void 0?Promise.reject(M):E})};h("click",d,B),d.defaultPrevented!==!0&&B();return}h("click",d)}function $(d){gt(d,[13,32])?x(d,!0):pt(d)!==!0&&d.keyCode>=35&&d.keyCode<=40&&d.altKey!==!0&&d.metaKey!==!0&&i.onKbdNavigate(d.keyCode,a.$el)===!0&&ue(d),h("keydown",d)}function D(){const d=i.tabProps.value.narrowIndicator,A=[],B=R("div",{ref:q,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});e.icon!==void 0&&A.push(R(J,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&A.push(R("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&A.push(e.alertIcon!==void 0?R(J,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):R("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),d===!0&&A.push(B);const V=[R("div",{class:"q-focus-helper",tabindex:-1,ref:c}),R("div",{class:w.value},ht(o.default,A))];return d===!1&&V.push(B),V}const z={name:k(()=>e.name),rootRef:b,tabIndicatorRef:q,routeData:u};Ge(()=>{i.unregisterTab(z)}),Xe(()=>{i.registerTab(z)});function W(d,A){const B={ref:b,class:N.value,tabindex:S.value,role:"tab","aria-selected":y.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:x,onKeydown:$,...A};return mt(R(d,B,D()),[[bt,f.value]])}return{renderTab:W,$tabs:i}}var Oe=be({name:"QTab",props:Gt,emits:Ht,setup(e,{slots:o,emit:h}){const{renderTab:u}=Xt(e,o,h);return()=>u("div")}});function Yt(e,o,h){const u=h===!0?["left","right"]:["top","bottom"];return`absolute-${o===!0?u[0]:u[1]}${e?` text-${e}`:""}`}const Jt=["left","center","right","justify"];var Zt=be({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Jt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:o,emit:h}){const{proxy:u}=me(),{$q:i}=u,{registerTick:a}=Se(),{registerTick:c}=Se(),{registerTick:b}=Se(),{registerTimeout:q,removeTimeout:f}=_e(),{registerTimeout:y,removeTimeout:N}=_e(),w=T(null),S=T(null),x=T(e.modelValue),$=T(!1),D=T(!0),z=T(!1),W=T(!1),d=[],A=T(0),B=T(!1);let V=null,M=null,Q;const E=k(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Yt(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),Z=k(()=>{const n=A.value,r=x.value;for(let v=0;v<n;v++)if(d[v].name.value===r)return!0;return!1}),le=k(()=>`q-tabs__content--align-${$.value===!0?"left":W.value===!0?"justify":e.align}`),ee=k(()=>`q-tabs row no-wrap items-center q-tabs--${$.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),m=k(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+le.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),t=k(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),l=k(()=>e.vertical!==!0&&i.lang.rtl===!0),I=k(()=>zt===!1&&l.value===!0);K(l,ae),K(()=>e.modelValue,n=>{U({name:n,setCurrent:!0,skipEmit:!0})}),K(()=>e.outsideArrows,ce);function U({name:n,setCurrent:r,skipEmit:v}){x.value!==n&&(v!==!0&&e["onUpdate:modelValue"]!==void 0&&h("update:modelValue",n),(r===!0||e["onUpdate:modelValue"]===void 0)&&(tt(x.value,n),x.value=n))}function ce(){a(()=>{xe({width:w.value.offsetWidth,height:w.value.offsetHeight})})}function xe(n){if(t.value===void 0||S.value===null)return;const r=n[t.value.container],v=Math.min(S.value[t.value.scroll],Array.prototype.reduce.call(S.value.children,(L,C)=>L+(C[t.value.content]||0),0)),P=r>0&&v>r;$.value=P,P===!0&&c(ae),W.value=r<parseInt(e.breakpoint,10)}function tt(n,r){const v=n!=null&&n!==""?d.find(L=>L.name.value===n):null,P=r!=null&&r!==""?d.find(L=>L.name.value===r):null;if(de===!0)de=!1;else if(v&&P){const L=v.tabIndicatorRef.value,C=P.tabIndicatorRef.value;V!==null&&(clearTimeout(V),V=null),L.style.transition="none",L.style.transform="none",C.style.transition="none",C.style.transform="none";const p=L.getBoundingClientRect(),F=C.getBoundingClientRect();C.style.transform=e.vertical===!0?`translate3d(0,${p.top-F.top}px,0) scale3d(1,${F.height?p.height/F.height:1},1)`:`translate3d(${p.left-F.left}px,0,0) scale3d(${F.width?p.width/F.width:1},1,1)`,b(()=>{V=setTimeout(()=>{V=null,C.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",C.style.transform="none"},70)})}P&&$.value===!0&&te(P.rootRef.value)}function te(n){const{left:r,width:v,top:P,height:L}=S.value.getBoundingClientRect(),C=n.getBoundingClientRect();let p=e.vertical===!0?C.top-P:C.left-r;if(p<0){S.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(p),ae();return}p+=e.vertical===!0?C.height-L:C.width-v,p>0&&(S.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(p),ae())}function ae(){const n=S.value;if(n===null)return;const r=n.getBoundingClientRect(),v=e.vertical===!0?n.scrollTop:Math.abs(n.scrollLeft);l.value===!0?(D.value=Math.ceil(v+r.width)<n.scrollWidth-1,z.value=v>0):(D.value=v>0,z.value=e.vertical===!0?Math.ceil(v+r.height)<n.scrollHeight:Math.ceil(v+r.width)<n.scrollWidth)}function Pe(n){M!==null&&clearInterval(M),M=setInterval(()=>{lt(n)===!0&&H()},5)}function Le(){Pe(I.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ae(){Pe(I.value===!0?0:Number.MAX_SAFE_INTEGER)}function H(){M!==null&&(clearInterval(M),M=null)}function at(n,r){const v=Array.prototype.filter.call(S.value.children,F=>F===r||F.matches&&F.matches(".q-tab.q-focusable")===!0),P=v.length;if(P===0)return;if(n===36)return te(v[0]),v[0].focus(),!0;if(n===35)return te(v[P-1]),v[P-1].focus(),!0;const L=n===(e.vertical===!0?38:37),C=n===(e.vertical===!0?40:39),p=L===!0?-1:C===!0?1:void 0;if(p!==void 0){const F=l.value===!0?-1:1,j=v.indexOf(r)+p*F;return j>=0&&j<P&&(te(v[j]),v[j].focus({preventScroll:!0})),!0}}const nt=k(()=>I.value===!0?{get:n=>Math.abs(n.scrollLeft),set:(n,r)=>{n.scrollLeft=-r}}:e.vertical===!0?{get:n=>n.scrollTop,set:(n,r)=>{n.scrollTop=r}}:{get:n=>n.scrollLeft,set:(n,r)=>{n.scrollLeft=r}});function lt(n){const r=S.value,{get:v,set:P}=nt.value;let L=!1,C=v(r);const p=n<C?-1:1;return C+=p*5,C<0?(L=!0,C=0):(p===-1&&C<=n||p===1&&C>=n)&&(L=!0,C=n),P(r,C),ae(),L}function Ve(n,r){for(const v in n)if(n[v]!==r[v])return!1;return!0}function ot(){let n=null,r={matchedLen:0,queryDiff:9999,hrefLen:0};const v=d.filter(p=>p.routeData!==void 0&&p.routeData.hasRouterLink.value===!0),{hash:P,query:L}=u.$route,C=Object.keys(L).length;for(const p of v){const F=p.routeData.exact.value===!0;if(p.routeData[F===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:j,query:pe,matched:ct,href:dt}=p.routeData.resolvedLink.value,he=Object.keys(pe).length;if(F===!0){if(j!==P||he!==C||Ve(L,pe)===!1)continue;n=p.name.value;break}if(j!==""&&j!==P||he!==0&&Ve(pe,L)===!1)continue;const G={matchedLen:ct.length,queryDiff:C-he,hrefLen:dt.length-j.length};if(G.matchedLen>r.matchedLen){n=p.name.value,r=G;continue}else if(G.matchedLen!==r.matchedLen)continue;if(G.queryDiff<r.queryDiff)n=p.name.value,r=G;else if(G.queryDiff!==r.queryDiff)continue;G.hrefLen>r.hrefLen&&(n=p.name.value,r=G)}if(n===null&&d.some(p=>p.routeData===void 0&&p.name.value===x.value)===!0){de=!1;return}U({name:n,setCurrent:!0})}function rt(n){if(f(),B.value!==!0&&w.value!==null&&n.target&&typeof n.target.closest=="function"){const r=n.target.closest(".q-tab");r&&w.value.contains(r)===!0&&(B.value=!0,$.value===!0&&te(r))}}function it(){q(()=>{B.value=!1},30)}function oe(){Re.avoidRouteWatcher===!1?y(ot):N()}function Ie(){if(Q===void 0){const n=K(()=>u.$route.fullPath,oe);Q=()=>{n(),Q=void 0}}}function st(n){d.push(n),A.value++,ce(),n.routeData===void 0||u.$route===void 0?y(()=>{if($.value===!0){const r=x.value,v=r!=null&&r!==""?d.find(P=>P.name.value===r):null;v&&te(v.rootRef.value)}}):(Ie(),n.routeData.hasRouterLink.value===!0&&oe())}function ut(n){d.splice(d.indexOf(n),1),A.value--,ce(),Q!==void 0&&n.routeData!==void 0&&(d.every(r=>r.routeData===void 0)===!0&&Q(),oe())}const Re={currentModel:x,tabProps:E,hasFocus:B,hasActiveTab:Z,registerTab:st,unregisterTab:ut,verifyRouteModel:oe,updateModel:U,onKbdNavigate:at,avoidRouteWatcher:!1};Tt(Ye,Re);function $e(){V!==null&&clearTimeout(V),H(),Q!==void 0&&Q()}let Be,de;return Ge($e),wt(()=>{Be=Q!==void 0,$e()}),Ct(()=>{Be===!0&&(Ie(),de=!0,oe()),ce()}),()=>R("div",{ref:w,class:ee.value,role:"tablist",onFocusin:rt,onFocusout:it},[R(Ut,{onResize:xe}),R("div",{ref:S,class:m.value,onScroll:ae},ge(o.default)),R(J,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(D.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||i.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Le,onTouchstartPassive:Le,onMouseupPassive:H,onMouseleavePassive:H,onTouchendPassive:H}),R(J,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(z.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||i.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Ae,onTouchstartPassive:Ae,onMouseupPassive:H,onMouseleavePassive:H,onTouchendPassive:H})])}});function ea(e){const o=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((h,u)=>{const i=parseFloat(h);i&&(o[u]=i)}),o}var ta=kt({name:"touch-swipe",beforeMount(e,{value:o,arg:h,modifiers:u}){if(u.mouse!==!0&&re.has.touch!==!0)return;const i=u.mouseCapture===!0?"Capture":"",a={handler:o,sensitivity:ea(h),direction:Ue(u),noop:St,mouseStart(c){ze(c,a)&&qt(c)&&(ve(a,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(c,!0))},touchStart(c){if(ze(c,a)){const b=c.target;ve(a,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),a.start(c)}},start(c,b){re.is.firefox===!0&&we(e,!0);const q=Qe(c);a.event={x:q.left,y:q.top,time:Date.now(),mouse:b===!0,dir:!1}},move(c){if(a.event===void 0)return;if(a.event.dir!==!1){ue(c);return}const b=Date.now()-a.event.time;if(b===0)return;const q=Qe(c),f=q.left-a.event.x,y=Math.abs(f),N=q.top-a.event.y,w=Math.abs(N);if(a.event.mouse!==!0){if(y<a.sensitivity[1]&&w<a.sensitivity[1]){a.end(c);return}}else if(window.getSelection().toString()!==""){a.end(c);return}else if(y<a.sensitivity[2]&&w<a.sensitivity[2])return;const S=y/b,x=w/b;a.direction.vertical===!0&&y<w&&y<100&&x>a.sensitivity[0]&&(a.event.dir=N<0?"up":"down"),a.direction.horizontal===!0&&y>w&&w<100&&S>a.sensitivity[0]&&(a.event.dir=f<0?"left":"right"),a.direction.up===!0&&y<w&&N<0&&y<100&&x>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&y<w&&N>0&&y<100&&x>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&y>w&&f<0&&w<100&&S>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&y>w&&f>0&&w<100&&S>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(ue(c),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),It(),a.styleCleanup=$=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const D=()=>{document.body.classList.remove("no-pointer-events--children")};$===!0?setTimeout(D,50):D()}),a.handler({evt:c,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:b,distance:{x:y,y:w}})):a.end(c)},end(c){a.event!==void 0&&(Ce(a,"temp"),re.is.firefox===!0&&we(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(!0),c!==void 0&&a.event.dir!==!1&&ue(c),a.event=void 0)}};if(e.__qtouchswipe=a,u.mouse===!0){const c=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";ve(a,"main",[[e,"mousedown","mouseStart",`passive${c}`]])}re.has.touch===!0&&ve(a,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const h=e.__qtouchswipe;h!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&h.end(),h.handler=o.value),h.direction=Ue(o.modifiers))},beforeUnmount(e){const o=e.__qtouchswipe;o!==void 0&&(Ce(o,"main"),Ce(o,"temp"),re.is.firefox===!0&&we(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete e.__qtouchswipe)}});const aa={name:{required:!0},disable:Boolean},Ke={setup(e,{slots:o}){return()=>R("div",{class:"q-panel scroll",role:"tabpanel"},ge(o.default))}},na={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},la=["update:modelValue","beforeTransition","transition"];function oa(){const{props:e,emit:o,proxy:h}=me(),{getCache:u}=Wt(),{registerTimeout:i}=_e();let a,c;const b=T(null),q=T(null);function f(t){const l=e.vertical===!0?"up":"left";Q((h.$q.lang.rtl===!0?-1:1)*(t.direction===l?1:-1))}const y=k(()=>[[ta,f,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),N=k(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),w=k(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),S=k(()=>`--q-transition-duration: ${e.transitionDuration}ms`),x=k(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),$=k(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),D=k(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);K(()=>e.modelValue,(t,l)=>{const I=A(t)===!0?B(t):-1;c!==!0&&M(I===-1?0:I<B(l)?-1:1),b.value!==I&&(b.value=I,o("beforeTransition",t,l),i(()=>{o("transition",t,l)},e.transitionDuration))});function z(){Q(1)}function W(){Q(-1)}function d(t){o("update:modelValue",t)}function A(t){return t!=null&&t!==""}function B(t){return a.findIndex(l=>l.props.name===t&&l.props.disable!==""&&l.props.disable!==!0)}function V(){return a.filter(t=>t.props.disable!==""&&t.props.disable!==!0)}function M(t){const l=t!==0&&e.animated===!0&&b.value!==-1?"q-transition--"+(t===-1?N.value:w.value):null;q.value!==l&&(q.value=l)}function Q(t,l=b.value){let I=l+t;for(;I!==-1&&I<a.length;){const U=a[I];if(U!==void 0&&U.props.disable!==""&&U.props.disable!==!0){M(t),c=!0,o("update:modelValue",U.props.name),setTimeout(()=>{c=!1});return}I+=t}e.infinite===!0&&a.length!==0&&l!==-1&&l!==a.length&&Q(t,t===-1?a.length:-1)}function E(){const t=B(e.modelValue);return b.value!==t&&(b.value=t),!0}function Z(){const t=A(e.modelValue)===!0&&E()&&a[b.value];return e.keepAlive===!0?[R(Pt,$.value,[R(D.value===!0?u(x.value,()=>({...Ke,name:x.value})):Ke,{key:x.value,style:S.value},()=>t)])]:[R("div",{class:"q-panel scroll",style:S.value,key:x.value,role:"tabpanel"},[t])]}function le(){if(a.length!==0)return e.animated===!0?[R(_t,{name:q.value},Z)]:Z()}function ee(t){return a=xt(ge(t.default,[])).filter(l=>l.props!==null&&l.props.slot===void 0&&A(l.props.name)===!0),a.length}function m(){return a}return Object.assign(h,{next:z,previous:W,goTo:d}),{panelIndex:b,panelDirectives:y,updatePanelsList:ee,updatePanelIndex:E,getPanelContent:le,getEnabledPanels:V,getPanels:m,isValidPanelName:A,keepAliveProps:$,needsUniqueKeepAliveWrapper:D,goToPanelByOffset:Q,goToPanel:d,nextPanel:z,previousPanel:W}}var He=be({name:"QTabPanel",props:aa,setup(e,{slots:o}){return()=>R("div",{class:"q-tab-panel",role:"tabpanel"},ge(o.default))}}),ra=be({name:"QTabPanels",props:{...na,...Mt},emits:la,setup(e,{slots:o}){const h=me(),u=Ft(e,h.proxy.$q),{updatePanelsList:i,getPanelContent:a,panelDirectives:c}=oa(),b=k(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(o),Lt("div",{class:b.value},a(),"pan",e.swipeable,()=>c.value))}});const ia={__name:"AboutContent",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:o}){const h=e,u=o,i=k({get:()=>h.modelValue,set:q=>{u("update:modelValue",q)}});function a(){i.value=!1}const c=Je();function b(){navigator.onLine||c.notify({message:"No internet connection. Some features may not work.",color:"negative",icon:"wifi_off"})}return Xe(()=>{b()}),(q,f)=>(X(),se(et,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=y=>i.value=y),persistent:""},{default:g(()=>[s(qe,{style:{width:"90%"}},{default:g(()=>[s(ne,null,{default:g(()=>[_("div",null,[f[4]||(f[4]=_("h5",null,"About kBalance",-1)),f[5]||(f[5]=_("p",null," A simple balance-tracking app to manage your finances with other users. ",-1)),f[6]||(f[6]=_("h6",null,"Usage Tips:",-1)),_("ul",null,[_("li",null,[f[1]||(f[1]=_("strong",null,"Add",-1)),f[2]||(f[2]=O(" a sheet: press ")),s(J,{name:"add",size:"md",class:"q-mr-sm"})]),f[3]||(f[3]=_("li",null,[_("strong",null,"Delete"),O(" a sheet: swipe right")],-1))]),f[7]||(f[7]=_("p",null,[_("strong",null,"License:"),_("a",{href:"https://github.com/cattabiani/kbalance_quasar_pwa/blob/main/LICENSE",target:"_blank",rel:"noopener"}," MIT ")],-1)),f[8]||(f[8]=_("p",null,[_("strong",null,"Repository:"),_("a",{href:"https://github.com/cattabiani/kbalance_quasar_pwa",target:"_blank",rel:"noopener"}," View on GitHub ")],-1)),f[9]||(f[9]=_("p",null,[_("strong",null,"Star:"),_("a",{href:"https://github.com/cattabiani/kbalance_quasar_pwa/stargazers",target:"_blank",rel:"noopener"}," Give a Star on GitHub! ")],-1)),f[10]||(f[10]=_("p",null,[_("strong",null,"Author:"),O(" Alessandro Cattabiani")],-1))])]),_:1}),s(Ze,{align:"center"},{default:g(()=>[s(Y,{icon:"close",color:"red",onClick:a})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};var sa=Ot(ia,[["__scopeId","data-v-0fa8e4ef"]]);const ua={style:{display:"flex","justify-content":"center","align-items":"center"}},ca={style:{display:"flex","justify-content":"center","align-items":"center"}},qa=Object.assign({name:"IndexPage"},{__name:"IndexPage",setup(e){const o=At(),h=Vt(),u=Je(),i=T(!1),a=T("Sheets"),c=T(""),b=T(!1),q=T(""),f=T(null),y=T(""),N=T(null),w=T(!1),S=T(null),x=T(null),$=T(null),D=T(null),z=k(()=>D.value!==null),W=async({reset:m},t)=>{try{$.value=await o.nUsers(t),D.value=t,B(m)}catch(l){u.notify({message:l.message||l,color:"negative"})}},d=()=>{$.value=null,D.value=null},A=async()=>{try{await o.removeSheet(D.value,$.value),d()}catch(m){u.notify({message:m.message||m,color:"negative"})}},B=m=>{x.value=setTimeout(()=>{m==null||m()},0)},V=async m=>{await o.subscribeCurrentSheet(m),h.push({name:"SheetPage"})},M=m=>{S.value=o.userLedger.friends[m].name,N.value=m,w.value=!0},Q=async m=>{try{await o.removeFriend(m)}catch(t){u.notify({message:t.message||t,color:"negative"})}},E=()=>{y.value=JSON.stringify(o.user)},Z=()=>{h.push({name:"NewSheetWizardPage"})},le=async()=>{try{await o.setUsername(q.value)}catch(m){u.notify({message:m.message||m,color:"negative"})}};K(()=>o.user.name,m=>{q.value=m},{immediate:!0}),K(c,async m=>{if(m)try{await o.addFriend(JSON.parse(m)),u.notify({message:"Friend added successfully!"})}catch(t){u.notify({message:t.message||t,color:"negative"})}},{immediate:!0}),K(S,m=>{if(m!==null)try{o.setFriendName(m,N.value)}catch(t){u.notify({message:t.message||t,color:"negative"})}},{immediate:!0});const ee=async()=>{try{await o.logout(),h.push({name:"LoginPage"})}catch(m){u.notify({message:m.message||m,color:"negative"});return}};return K(o.userLedger,async m=>{m===null&&await ee()},{immediate:!0}),(m,t)=>(X(),Te(ke,null,[s(Rt,{elevated:"",class:"bg-primary text-white"},{default:g(()=>[s($t,null,{default:g(()=>[s(vt,{style:{"font-size":"28px"}},{default:g(()=>t[13]||(t[13]=[O(" Index ")])),_:1}),s(Y,{flat:"",icon:"info",label:"About",onClick:t[0]||(t[0]=l=>i.value=!0),class:"q-ml-md bg-white text-primary","aria-label":"About kBalance"}),s(Y,{flat:"",icon:"logout",label:"Logout",onClick:ee,class:"q-ml-md bg-white text-primary","aria-label":"Log out"})]),_:1})]),_:1}),s(Nt,null,{default:g(()=>[s(qe,null,{default:g(()=>[s(ne,{class:"q-pt-xs q-pb-xs text-grey-7"},{default:g(()=>[O(fe(ie(o).user.email),1)]),_:1}),s(ne,{class:"row q-gutter-sm q-pt-none"},{default:g(()=>[s(Et,{ref_key:"usernameRef",ref:f,outlined:"",modelValue:q.value,"onUpdate:modelValue":t[1]||(t[1]=l=>q.value=l),class:"col",onBlur:le,onFocus:t[2]||(t[2]=l=>f.value.select()),label:"Username"},null,8,["modelValue"]),s(Y,{icon:"qr_code",label:"Share",color:"primary",class:"col-auto",onClick:E})]),_:1})]),_:1}),s(Zt,{modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value=l),"inline-label":"",class:"text-primary shadow-2",align:"center",stretch:""},{default:g(()=>[s(Oe,{name:"Sheets",label:"Sheets",icon:"description",class:"full-width"}),s(Oe,{name:"Friends",label:"Friends",icon:"group",class:"full-width"})]),_:1},8,["modelValue"]),s(ra,{modelValue:a.value,"onUpdate:modelValue":t[5]||(t[5]=l=>a.value=l),animated:""},{default:g(()=>[s(He,{name:"Sheets"},{default:g(()=>[s(Fe,{bordered:"",class:"q-mb-md"},{default:g(()=>[(X(!0),Te(ke,null,De(ie(o).userLedgerSheets,(l,I)=>(X(),se(We,{key:I,onLeft:U=>W(U,l),onClick:U=>V(l),"left-color":"red"},{left:g(()=>[s(J,{name:"delete"})]),default:g(()=>[s(Ne,{clickable:"",class:Me(I%2===0?"bg-grey-3":"bg-white")},{default:g(()=>[s(Ee,null,{default:g(()=>[s(Bt,null,{default:g(()=>[O(fe(ie(o).userLedger.sheets[l].name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["onLeft","onClick"]))),128))]),_:1}),_("div",ua,[s(Y,{icon:"note_add",label:"Add Sheet",color:"primary","aria-label":"Add a new balance sheet",onClick:Z})])]),_:1}),s(He,{name:"Friends"},{default:g(()=>[s(Fe,{bordered:"",class:"q-mb-md"},{default:g(()=>[(X(!0),Te(ke,null,De(ie(o).userLedgerFriends,(l,I)=>(X(),se(We,{key:I,onLeft:U=>Q(l),onClick:U=>M(l),"left-color":"red"},{left:g(()=>[s(J,{name:"delete"})]),default:g(()=>[s(Ne,{clickable:"",class:Me(I%2===0?"bg-grey-3":"bg-white")},{default:g(()=>[s(Ee,null,{default:g(()=>[s(Qt,{id:l,people:ie(o).friends},null,8,["id","people"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["onLeft","onClick"]))),128))]),_:1}),_("div",ca,[s(Y,{icon:"person",label:"Add Friend",color:"primary","aria-label":"Add a new friend",onClick:t[4]||(t[4]=l=>b.value=!0)})])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(jt,{modelValue:y.value,"onUpdate:modelValue":t[6]||(t[6]=l=>y.value=l)},null,8,["modelValue"]),s(sa,{modelValue:i.value,"onUpdate:modelValue":t[7]||(t[7]=l=>i.value=l)},null,8,["modelValue"]),s(je,{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=l=>c.value=l),isVisible:b.value,"onUpdate:isVisible":t[9]||(t[9]=l=>b.value=l)},null,8,["modelValue","isVisible"]),s(je,{hideScan:!0,modelValue:S.value,"onUpdate:modelValue":t[10]||(t[10]=l=>S.value=l),isVisible:w.value,"onUpdate:isVisible":t[11]||(t[11]=l=>w.value=l)},null,8,["modelValue","isVisible"]),s(et,{modelValue:z.value,"onUpdate:modelValue":t[12]||(t[12]=l=>z.value=l),persistent:""},{default:g(()=>[s(qe,{class:"q-my-md",style:{width:"100%",height:"auto"}},{default:g(()=>[s(ne,{class:"text-center",style:{"font-size":"28px"}},{default:g(()=>t[14]||(t[14]=[O(" Confirm Delete ")])),_:1}),$.value<=1?(X(),se(ne,{key:0,class:"flex flex-center"},{default:g(()=>t[15]||(t[15]=[O(fe("This sheet will be completely deleted. Do you want to proceed?"))])),_:1})):(X(),se(ne,{key:1,class:"flex flex-center"},{default:g(()=>t[16]||(t[16]=[O(fe("This sheet will be deleted only for you since there are still some users involved. Do you want to proceed?"))])),_:1})),s(Ze,{style:{display:"flex","justify-content":"center","align-items":"center"}},{default:g(()=>[s(Y,{icon:"close",label:"Cancel",color:"red",onClick:d}),s(Y,{color:"primary",icon:"content_copy",onClick:A,label:"Confirm"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{qa as default};
