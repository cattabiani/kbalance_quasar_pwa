import{Q as h,u as x,a as v,b as d,c as C}from"./use-quasar.3aea57e6.js";import{F as q,r as i,u as w,v as y,x as o,J as R,y as a,E as S,N as _,aG as F,H as k,K as m}from"./index.d1411320.js";import{Q as b}from"./QCardActions.a9b3bbce.js";import{Q as L}from"./QForm.645e1723.js";const E={__name:"LoginPage",setup(N){const u=q(),c=x(),f=R(),t=i(!1),n=i(""),r=i(""),p=i(""),P=[e=>!!e||"Please enter an email",e=>/.+@.+\..+/.test(e)||"Please enter a valid email"],V=[e=>!!e||"Please enter a password",e=>e.length>=6||"Password should be at least 6 characters"],Q=async()=>{try{t.value?await u.register(n.value,r.value):await u.login(n.value,r.value),f.push({name:"IndexPage"})}catch(e){c.notify({message:e.message||e}),e.code!=="auth/invalid-credential"&&(u.fbConfig=null,await g())}},g=async()=>{try{await u.clearFb(),f.push({name:"FirebaseSettingsPage"})}catch(e){c.notify({message:e.message||e})}};return(e,l)=>(w(),y(h,{class:"flex flex-center"},{default:o(()=>[a(C,{class:"q-pa-md",style:{width:"80%"}},{default:o(()=>[a(v,{class:"text-center",style:{"font-size":"28px"}},{default:o(()=>[S(_(t.value?"Register":"Login"),1)]),_:1}),a(L,{onSubmit:F(Q,["prevent"])},{default:o(()=>[a(v,null,{default:o(()=>[a(d,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=s=>n.value=s),label:"Email",type:"email",rules:P,required:"",outlined:""},null,8,["modelValue"]),a(d,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=s=>r.value=s),label:"Password",type:"password",rules:V,required:"",outlined:""},null,8,["modelValue"]),t.value?(w(),y(d,{key:0,modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=s=>p.value=s),label:"Confirm Password",rules:[s=>s===r.value||"Passwords do not match"],type:"password",requireds:"",outlined:""},null,8,["modelValue","rules"])):k("",!0)]),_:1}),a(b,null,{default:o(()=>[a(m,{label:t.value?"Register":"Login",color:"primary",type:"submit",class:"full-width"},null,8,["label"])]),_:1})]),_:1}),a(b,{class:"justify-center"},{default:o(()=>[a(m,{label:t.value?"Already have an account? Login":"Don't have an account? Register",color:"secondary",onClick:l[3]||(l[3]=s=>t.value=!t.value),class:"full-width q-mt-md"},null,8,["label"]),a(m,{label:"Firebase Settings",color:"secondary",onClick:g,class:"full-width q-mt-md"})]),_:1})]),_:1})]),_:1}))}};export{E as default};
