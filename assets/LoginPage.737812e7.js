import{Q as h,u as x,a as v,b as d,c as C}from"./use-quasar.aaa38ae4.js";import{F as _,r as i,u as w,v as y,x as o,J as q,y as a,E as F,N as R,aG as S,H as k,K as c,aH as L}from"./index.0384b3f1.js";import{Q as b}from"./QCardActions.3cd63715.js";import{Q as N}from"./QForm.bf7a536f.js";const H={__name:"LoginPage",setup(B){const n=_(),m=x(),f=q(),t=i(!1),u=i(""),r=i(""),p=i(""),P=[e=>!!e||"Please enter an email",e=>/.+@.+\..+/.test(e)||"Please enter a valid email"],V=[e=>!!e||"Please enter a password",e=>e.length>=6||"Password should be at least 6 characters"],Q=async()=>{try{t.value?await n.register(u.value,r.value):await n.login(u.value,r.value),f.push({name:"IndexPage"})}catch(e){m.notify({message:e.message||e}),e.code!=="auth/invalid-credential"&&(n.fbConfig=L.make(),await g())}},g=async()=>{try{await n.clearFb(),f.push({name:"FirebaseSettingsPage"})}catch(e){m.notify({message:e.message||e})}};return(e,s)=>(w(),y(h,{class:"flex flex-center"},{default:o(()=>[a(C,{class:"q-pa-md",style:{width:"80%"}},{default:o(()=>[a(v,{class:"text-center",style:{"font-size":"28px"}},{default:o(()=>[F(R(t.value?"Register":"Login"),1)]),_:1}),a(N,{onSubmit:S(Q,["prevent"])},{default:o(()=>[a(v,null,{default:o(()=>[a(d,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=l=>u.value=l),label:"Email",type:"email",rules:P,required:"",outlined:""},null,8,["modelValue"]),a(d,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=l=>r.value=l),label:"Password",type:"password",rules:V,required:"",outlined:""},null,8,["modelValue"]),t.value?(w(),y(d,{key:0,modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=l=>p.value=l),label:"Confirm Password",rules:[l=>l===r.value||"Passwords do not match"],type:"password",requireds:"",outlined:""},null,8,["modelValue","rules"])):k("",!0)]),_:1}),a(b,null,{default:o(()=>[a(c,{icon:"send",label:t.value?"Register":"Login",color:"primary",type:"submit",class:"full-width"},null,8,["label"])]),_:1})]),_:1}),a(b,{class:"justify-center"},{default:o(()=>[a(c,{label:t.value?"Already have an account? Login":"Don't have an account? Register",color:"secondary",onClick:s[3]||(s[3]=l=>t.value=!t.value),class:"full-width q-mt-md",icon:"account_circle"},null,8,["label"]),a(c,{label:"Firebase Settings",color:"secondary",onClick:g,class:"full-width q-mt-md",icon:"settings"})]),_:1})]),_:1})]),_:1}))}};export{H as default};
