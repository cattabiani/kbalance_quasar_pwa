import{e as x,c as _,Q as v,f as d,d as h}from"./QPage.eae4bdd2.js";import{_ as C,r as u,u as w,v as y,x as o,a1 as q,y as a,Y as R,a2 as S,aM as k,a6 as L,Z as c}from"./index.2ed0ead0.js";import{Q as b}from"./QCardActions.7accac92.js";import{Q as B}from"./QForm.4dc4c80a.js";const I=Object.assign({name:"LoginPage"},{__name:"LoginPage",setup(N){const n=C(),m=_(),g=q(),t=u(!1),i=u(""),r=u(""),f=u(""),P=[e=>!!e||"Please enter an email",e=>/.+@.+\..+/.test(e)||"Please enter a valid email"],V=[e=>!!e||"Please enter a password",e=>e.length>=6||"Password should be at least 6 characters"],Q=async()=>{try{t.value?await n.register(i.value,r.value):await n.login(i.value,r.value),await n.init(),g.push({name:"IndexPage"})}catch(e){m.notify({message:e.message||e,color:"negative"}),e.code!=="auth/invalid-credential"&&await p()}},p=async()=>{try{await n.clearFirebase(),g.push({name:"SettingsPage"})}catch(e){m.notify({message:e.message||e,color:"negative"})}};return(e,l)=>(w(),y(x,{class:"flex flex-center"},{default:o(()=>[a(h,{class:"q-pa-md",style:{width:"80%"}},{default:o(()=>[a(v,{class:"text-center",style:{"font-size":"28px"}},{default:o(()=>[R(S(t.value?"Register":"Login"),1)]),_:1}),a(B,{onSubmit:k(Q,["prevent"])},{default:o(()=>[a(v,null,{default:o(()=>[a(d,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=s=>i.value=s),label:"Email",type:"email",rules:P,required:"",outlined:""},null,8,["modelValue"]),a(d,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=s=>r.value=s),label:"Password",type:"password",rules:V,required:"",outlined:""},null,8,["modelValue"]),t.value?(w(),y(d,{key:0,modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=s=>f.value=s),label:"Confirm Password",rules:[s=>s===r.value||"Passwords do not match"],type:"password",requireds:"",outlined:""},null,8,["modelValue","rules"])):L("",!0)]),_:1}),a(b,null,{default:o(()=>[a(c,{icon:"send",label:t.value?"Register":"Login",color:"primary",type:"submit",class:"full-width"},null,8,["label"])]),_:1})]),_:1}),a(b,{class:"justify-center"},{default:o(()=>[a(c,{label:t.value?"Go to Login":"Go to Register",color:"secondary",onClick:l[3]||(l[3]=s=>t.value=!t.value),class:"full-width q-mt-md",icon:"account_circle"},null,8,["label"]),a(c,{label:"Settings",color:"secondary",onClick:p,class:"full-width q-mt-md",icon:"settings"})]),_:1})]),_:1})]),_:1}))}});export{I as default};
