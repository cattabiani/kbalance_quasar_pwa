import{L as Q,M as P,W as _,r as s,w as k,N as S,x as V,z as a,y as o,K as v,J as x,T as h}from"./index-CCxTOJyV.js";import{Q as N}from"./QToolbarTitle-sDUaP49g.js";import{Q as R,a as C}from"./QHeader-BVgXgM1V.js";import{Q as B,a as I,b as L}from"./QCard-CaOUDWmZ.js";import{Q as T}from"./QForm-BBtQ0jOa.js";import{b as z,Q as F}from"./QPage-E6N8TXrA.js";import{_ as $}from"./PeopleList-5HUgvyy-.js";import"./QResizeObserver--RQzJ84N.js";import"./QItemLabel-IxHZINt8.js";import"./selection-vJctmsM6.js";import"./focusout-Cp4VIzGU.js";import"./scroll-CKykQgin.js";import"./QSlideItem-R8m3rChH.js";import"./TouchPan-BRTLyM0P.js";import"./use-render-cache-rinsAykk.js";import"./ReceiveString-BYgyEy5T.js";import"./QCardActions-BZuIe5YM.js";import"./QDialog-BKj1YPVO.js";import"./PeopleDropdown-lECpsH5p.js";import"./PersonItem-CW87FHBT.js";const se=Object.assign({name:"PeoplePage"},{__name:"NewSheetWizardPage",setup(U){const l=Q(),n=P(),i=z(),u=_.user2person(l.user),p=s({[u.id]:u}),d=s(!0),m=s(""),c=s(null),f=s(null),g=s(null),y=()=>{n.go(-1)},b=async()=>{try{await l.logout(),n.push({name:"LoginPage"})}catch(r){i.notify({message:r.message||r,color:"negative"});return}};k(l.userLedger,async r=>{r===null&&await b()},{immediate:!0});const w=async()=>{if(await f.value.validate())try{const e=g.value.getPeople(),t=await l.addSheetFromNameAndPeople(m.value,e);i.notify(`Sheet ${t.name} added successfully`),await l.subscribeCurrentSheet(t.id),n.replace({name:"SheetPage"})}catch(e){i.notify({message:e.message||e,color:"negative"})}};return(r,e)=>(V(),S(h,null,[a(C,{elevated:"",class:"bg-primary text-white"},{default:o(()=>[a(R,null,{default:o(()=>[a(v,{flat:"",icon:"arrow_back",onClick:y,"aria-label":"Go Back",class:"bg-white text-primary"}),a(N,{style:{"font-size":"28px"}},{default:o(()=>[...e[4]||(e[4]=[x(" New Sheet Wizard ",-1)])]),_:1}),a(v,{flat:"",class:"q-ml-md bg-white text-primary",icon:"done",label:"Proceed",onClick:w})]),_:1})]),_:1}),a(F,null,{default:o(()=>[a(T,{ref_key:"formRef",ref:f},{default:o(()=>[a(B,null,{default:o(()=>[a(I,null,{default:o(()=>[a(L,{ref_key:"nameRef",ref:c,outlined:"",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),onFocus:e[1]||(e[1]=t=>c.value.select()),rules:[t=>t&&t.length>0||"Name cannot be empty"],label:"Sheet Name"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},512),a($,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),seeInactive:d.value,"onUpdate:seeInactive":e[3]||(e[3]=t=>d.value=t),ref_key:"peopleListRef",ref:g},null,8,["modelValue","seeInactive"])]),_:1})],64))}});export{se as default};
