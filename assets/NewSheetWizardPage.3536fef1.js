import{_ as Q,ay as _,r as l,w as P,u as k,$ as S,y as t,x as o,a0 as V,a1 as x,Z as y,Y as h}from"./index.0948903c.js";import{Q as N,a as R,b as C}from"./QList.9d098648.js";import{e as B,c as I,d as $,Q as F,f as L}from"./QPage.81d7c495.js";import{Q as T}from"./QForm.f81dc1f2.js";import{_ as z}from"./PeopleList.02ab3468.js";import"./QResizeObserver.79596f14.js";import"./QSlideItem.bca00074.js";import"./ReceiveString.7ff65acc.js";import"./QCardActions.69bee3b9.js";import"./QDialog.dae46bb1.js";import"./focusout.ce478b0b.js";import"./scroll.9f5594e6.js";import"./PeopleDropdown.f5e8e994.js";import"./PersonItem.a573abf8.js";const X=Object.assign({name:"PeoplePage"},{__name:"NewSheetWizardPage",setup(U){const r=Q(),n=x(),u=I(),m=_.user2person(r.user),d=l({[m.id]:m}),c=l(!0),i=l(""),p=l(null),f=l(null),g=l(null),v=()=>{n.go(-1)},w=async()=>{try{await r.logout(),n.push({name:"LoginPage"})}catch(s){u.notify({message:s.message||s,color:"negative"});return}};P(r.userLedger,async s=>{s===null&&await w()},{immediate:!0});const b=async()=>{if(!!await f.value.validate())try{const e=g.value.getPeople(),a=await r.addSheetFromNameAndPeople(i.value,e);u.notify(`Sheet ${a.name} added successfully`),await r.subscribeCurrentSheet(a.id),n.replace({name:"SheetPage"})}catch(e){u.notify({message:e.message||e,color:"negative"})}};return(s,e)=>(k(),S(V,null,[t(N,{elevated:"",class:"bg-primary text-white"},{default:o(()=>[t(R,null,{default:o(()=>[t(y,{flat:"",icon:"arrow_back",onClick:v,"aria-label":"Go Back",class:"bg-white text-primary"}),t(C,{style:{"font-size":"28px"}},{default:o(()=>e[4]||(e[4]=[h(" New Sheet Wizard ")])),_:1}),t(y,{flat:"",class:"q-ml-md bg-white text-primary",icon:"done",label:"Proceed",onClick:b})]),_:1})]),_:1}),t(B,null,{default:o(()=>[t(T,{ref_key:"formRef",ref:f},{default:o(()=>[t($,null,{default:o(()=>[t(F,null,{default:o(()=>[t(L,{ref_key:"nameRef",ref:p,outlined:"",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),onFocus:e[1]||(e[1]=a=>p.value.select()),rules:[a=>a&&a.length>0||"Name cannot be empty"],label:"Sheet Name"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},512),t(z,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),seeInactive:c.value,"onUpdate:seeInactive":e[3]||(e[3]=a=>c.value=a),ref_key:"peopleListRef",ref:g},null,8,["modelValue","seeInactive"])]),_:1})],64))}});export{X as default};
