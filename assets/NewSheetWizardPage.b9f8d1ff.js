import{O as Q,ay as P,r as s,w as _,u as S,P as k,y as a,x as o,S as V,T as x,N as y,M as h}from"./index.59b76f8e.js";import{Q as N}from"./QToolbarTitle.8bb6f8f1.js";import{Q as R,a as C}from"./QHeader.3e9f20f2.js";import{a as B,Q as I,b as T}from"./QCard.108a60f0.js";import{Q as F}from"./QForm.c411dab1.js";import{Q as L,b as $}from"./QPage.d4c5a6b8.js";import{_ as z}from"./PeopleList.1b1205e5.js";import"./QResizeObserver.28f90742.js";import"./QItemLabel.20f21824.js";import"./selection.ce1c01f4.js";import"./focusout.8d352daf.js";import"./scroll.f1c5cfbf.js";import"./QSlideItem.4a2abbc8.js";import"./use-render-cache.770e5fe8.js";import"./ReceiveString.82080c1d.js";import"./QCardActions.44e0abd0.js";import"./QDialog.8eefe6fc.js";import"./PeopleDropdown.ec41fdc6.js";import"./PersonItem.d6f13c24.js";const re=Object.assign({name:"PeoplePage"},{__name:"NewSheetWizardPage",setup(U){const l=Q(),n=x(),i=$(),m=P.user2person(l.user),p=s({[m.id]:m}),d=s(!0),u=s(""),c=s(null),f=s(null),g=s(null),v=()=>{n.go(-1)},b=async()=>{try{await l.logout(),n.push({name:"LoginPage"})}catch(r){i.notify({message:r.message||r,color:"negative"});return}};_(l.userLedger,async r=>{r===null&&await b()},{immediate:!0});const w=async()=>{if(!!await f.value.validate())try{const e=g.value.getPeople(),t=await l.addSheetFromNameAndPeople(u.value,e);i.notify(`Sheet ${t.name} added successfully`),await l.subscribeCurrentSheet(t.id),n.replace({name:"SheetPage"})}catch(e){i.notify({message:e.message||e,color:"negative"})}};return(r,e)=>(S(),k(V,null,[a(R,{elevated:"",class:"bg-primary text-white"},{default:o(()=>[a(C,null,{default:o(()=>[a(y,{flat:"",icon:"arrow_back",onClick:v,"aria-label":"Go Back",class:"bg-white text-primary"}),a(N,{style:{"font-size":"28px"}},{default:o(()=>e[4]||(e[4]=[h(" New Sheet Wizard ")])),_:1}),a(y,{flat:"",class:"q-ml-md bg-white text-primary",icon:"done",label:"Proceed",onClick:w})]),_:1})]),_:1}),a(L,null,{default:o(()=>[a(F,{ref_key:"formRef",ref:f},{default:o(()=>[a(B,null,{default:o(()=>[a(I,null,{default:o(()=>[a(T,{ref_key:"nameRef",ref:c,outlined:"",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),onFocus:e[1]||(e[1]=t=>c.value.select()),rules:[t=>t&&t.length>0||"Name cannot be empty"],label:"Sheet Name"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},512),a(z,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),seeInactive:d.value,"onUpdate:seeInactive":e[3]||(e[3]=t=>d.value=t),ref_key:"peopleListRef",ref:g},null,8,["modelValue","seeInactive"])]),_:1})],64))}});export{re as default};
