import{Q as j,a as M,b as H,c as $}from"./QItemLabel-vzBgqLzv.js";import{c as A,a as m,h as b,d as Q,ay as I,g as z,r as x,az as U,w as D,o as E,Q as F,K as C,ah as N,W,v as B,O as G,x as c,y as h,z as V,N as _,T,U as K,V as J,S as q}from"./index-CEeY9U5T.js";import{l as X}from"./QCard-CkE3Uy6W.js";import{a as Y}from"./focusout-CW8HhjRL.js";import{_ as P}from"./PersonItem-Da-v3Hdh.js";const Z=A({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const a=m(()=>{const n=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(i=>e[i]===!0).map(i=>`q-btn-group--${i}`).join(" ");return`q-btn-group row no-wrap${n.length!==0?" "+n:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>b("div",{class:a.value},Q(s.default))}}),ee=Object.keys(I);function ne(e){return ee.reduce((s,a)=>{const n=e[a];return n!==void 0&&(s[a]=n),s},{})}const oe=A({name:"QBtnDropdown",props:{...I,...Y,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:s,emit:a}){const{proxy:n}=z(),i=x(e.modelValue),f=x(null),p=X(),w=m(()=>{const o={"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true","aria-controls":p.value,"aria-label":e.toggleAriaLabel||n.$q.lang.label[i.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(o["aria-disabled"]="true"),o}),S=m(()=>"q-btn-dropdown__arrow"+(i.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),t=m(()=>U(e)),d=m(()=>ne(e));D(()=>e.modelValue,o=>{var u;(u=f.value)==null||u[o?"show":"hide"]()}),D(()=>e.split,k);function l(o){i.value=!0,a("beforeShow",o)}function r(o){a("show",o),a("update:modelValue",!0)}function g(o){i.value=!1,a("beforeHide",o)}function v(o){a("hide",o),a("update:modelValue",!1)}function y(o){a("click",o)}function O(o){N(o),k(),a("click",o)}function R(o){var u;(u=f.value)==null||u.toggle(o)}function L(o){var u;(u=f.value)==null||u.show(o)}function k(o){var u;(u=f.value)==null||u.hide(o)}return Object.assign(n,{show:L,hide:k,toggle:R}),E(()=>{e.modelValue===!0&&L()}),()=>{const o=[b(F,{class:S.value,name:e.dropdownIcon||n.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&o.push(b(j,{ref:f,id:p.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:l,onShow:r,onBeforeHide:g,onHide:v},s.default)),e.split===!1?b(C,{class:"q-btn-dropdown q-btn-dropdown--simple",...d.value,...w.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:y},{default:()=>Q(s.label,[]).concat(o),loading:s.loading}):b(Z,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...t.value,glossy:e.glossy,stretch:e.stretch},()=>[b(C,{class:"q-btn-dropdown--current",...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:O},{default:s.label,loading:s.loading}),b(C,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...w.value,...t.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>o)])}}}),te={key:0,style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},ae={key:2},le={key:1},ce={__name:"PeopleDropdown",props:{people:{type:Object,required:!0},sortedPeople:{type:Array,default:null},ignoredPeople:{type:Object,default:null},fixedLabel:{type:String,default:null},modelValue:{type:String,default:null},allLabel:{type:String,default:null},allValue:{type:String,default:"__ALL__"}},emits:["update:modelValue","itemClick"],setup(e,{emit:s}){const a=x(null),n=e,i=s,f=t=>t!=null&&t!==n.allValue&&t in n.people,p=t=>{var d;i("update:modelValue",t),i("itemClick",t),(d=a.value)==null||d.hide()},w=m(()=>{const t=[];n.allLabel&&t.push({id:n.allValue,label:n.allLabel,isPerson:!1});let d=Object.values(n.people).filter(l=>{var r;return!(l.id in((r=n==null?void 0:n.ignoredPeople)!=null?r:{}))});if(n.sortedPeople){const l=new Map(n.sortedPeople.map((r,g)=>[r,g]));d.sort((r,g)=>{var v,y;return((v=l.get(r.id))!=null?v:1/0)-((y=l.get(g.id))!=null?y:1/0)})}else d.sort((l,r)=>W.compare(l,r));return t.push(...d.map(l=>({id:l.id,isPerson:!0}))),t}),S=m(()=>{var t;return(t=n.allLabel)!=null?t:""});return(t,d)=>w.value.length?(c(),B(oe,{key:0,ref_key:"addUserRef",ref:a,color:n.fixedLabel?"primary":void 0,icon:n.fixedLabel?n.fixedLabel==="Upgrade"?"arrow_circle_up":"person":void 0},{label:h(()=>[n.fixedLabel?(c(),_("span",te,q(n.fixedLabel),1)):f(n.modelValue)?(c(),B(P,{key:1,id:n.modelValue,people:n.people,"max-length":13,style:{flex:"1 1 auto",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},null,8,["id","people"])):(c(),_("span",ae,q(S.value),1))]),default:h(()=>[V(M,null,{default:h(()=>[(c(!0),_(T,null,K(w.value,(l,r)=>(c(),B(H,{key:l.id,clickable:"",onClick:g=>p(l.id),class:J(r%2===0?"bg-grey-3":"bg-white")},{default:h(()=>[V($,null,{default:h(()=>[l.isPerson?(c(),B(P,{key:0,id:l.id,people:n.people,"max-length":13},null,8,["id","people"])):(c(),_("span",le,q(l.label),1))]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1},8,["color","icon"])):G("",!0)}};export{oe as Q,ce as _};
