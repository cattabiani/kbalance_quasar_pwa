import{Q as O,b as j,a as M}from"./QMenu.5b210074.js";import{_ as C,Q as H}from"./PersonItem.f246a6ac.js";import{c as x,a as f,h as c,b as A,aA as D,r as S,w as k,o as R,Q as $,N as v,g as U,aB as z,ad as N,ay as W,u as w,v as B,x as g,P as q,W as G,y,S as E,X as F,Y as T,V as X}from"./index.f3f8926c.js";import{e as Y}from"./QCard.009c7e2f.js";import{b as J}from"./focusout.fa8ea5f7.js";var K=x({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:l}){const a=f(()=>{const t=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${t.length!==0?" "+t:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>c("div",{class:a.value},A(l.default))}});const Z=Object.keys(D);function ee(e){return Z.reduce((l,a)=>{const t=e[a];return t!==void 0&&(l[a]=t),l},{})}var ne=x({name:"QBtnDropdown",props:{...D,...J,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:l,emit:a}){const{proxy:t}=U(),r=S(e.modelValue),i=S(null),b=Y(),u=f(()=>{const n={"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":b.value,"aria-label":e.toggleAriaLabel||t.$q.lang.label[r.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(n["aria-disabled"]="true"),n}),s=f(()=>"q-btn-dropdown__arrow"+(r.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),o=f(()=>z(e)),d=f(()=>ee(e));k(()=>e.modelValue,n=>{i.value!==null&&i.value[n?"show":"hide"]()}),k(()=>e.split,p);function m(n){r.value=!0,a("beforeShow",n)}function h(n){a("show",n),a("update:modelValue",!0)}function P(n){r.value=!1,a("beforeHide",n)}function Q(n){a("hide",n),a("update:modelValue",!1)}function V(n){a("click",n)}function L(n){N(n),p(),a("click",n)}function I(n){i.value!==null&&i.value.toggle(n)}function _(n){i.value!==null&&i.value.show(n)}function p(n){i.value!==null&&i.value.hide(n)}return Object.assign(t,{show:_,hide:p,toggle:I}),R(()=>{e.modelValue===!0&&_()}),()=>{const n=[c($,{class:s.value,name:e.dropdownIcon||t.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&n.push(c(O,{ref:i,id:b.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:m,onShow:h,onBeforeHide:P,onHide:Q},l.default)),e.split===!1?c(v,{class:"q-btn-dropdown q-btn-dropdown--simple",...d.value,...u.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:V},{default:()=>A(l.label,[]).concat(n),loading:l.loading}):c(K,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...o.value,glossy:e.glossy,stretch:e.stretch},()=>[c(v,{class:"q-btn-dropdown--current",...d.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:L},{default:l.label,loading:l.loading}),c(v,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...u.value,...o.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>n)])}}});const te={key:0,style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},se={__name:"PeopleDropdown",props:{people:{type:Object,required:!0},sortedPeople:{type:Array,default:null},ignoredPeople:{type:Object,default:null},fixedLabel:{type:String,default:null},modelValue:{type:String,default:null}},emits:["itemClick","update:modelValue"],setup(e,{emit:l}){const a=S(null),t=e,r=l,i=u=>{r("update:modelValue",u),r("itemClick",u),a.value.hide()},b=f(()=>{let u=Object.values(t.people).filter(s=>{var o;return!(s.id in((o=t==null?void 0:t.ignoredPeople)!=null?o:{}))});if(t.sortedPeople){const s=new Map(t.sortedPeople.map((o,d)=>[o,d]));u.sort((o,d)=>{var m,h;return((m=s.get(o.id))!=null?m:1/0)-((h=s.get(d.id))!=null?h:1/0)})}else u.sort((s,o)=>W.compare(s,o));return u.map(s=>s.id)});return(u,s)=>b.value.length?(w(),B(ne,{key:0,style:{width:"100%"},color:t.fixedLabel?"primary":void 0,icon:Boolean(t.fixedLabel)?t.fixedLabel==="Upgrade"?"arrow_circle_up":"person":void 0,ref_key:"addUserRef",ref:a},{label:g(()=>[e.fixedLabel?(w(),q("span",te,G(t.fixedLabel),1)):(w(),B(C,{key:1,id:t.modelValue,people:t.people,"max-length":13,style:{flex:"1 1 auto",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},null,8,["id","people"]))]),default:g(()=>[y(H,null,{default:g(()=>[(w(!0),q(E,null,F(b.value,(o,d)=>(w(),B(j,{key:o,onClick:m=>i(o),clickable:"",class:T(d%2===0?"bg-grey-3":"bg-white")},{default:g(()=>[y(M,null,{default:g(()=>[y(C,{id:o,people:t.people,"max-length":13},null,8,["id","people"])]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1},8,["color","icon"])):X("",!0)}};export{ne as Q,se as _};
