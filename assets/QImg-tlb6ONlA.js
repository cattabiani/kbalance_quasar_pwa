import{ai as J,aj as M,ak as N,al as V,n as Z,am as I,D as j,an as H,ao as ee,g as X,r as T,a as m,w as Y,h as p,az as G,aT as te,b as F,aU as ne,c as ie,k as ae,o as re,aS as oe,aC as O}from"./index-DmmOCoWn.js";import{g as K,s as U,u as ue}from"./use-render-cache-rinsAykk.js";import{c as le}from"./selection-sB4W6q3w.js";import{u as Q}from"./QHeader-CK1Yh_vd.js";function se(e){const i=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((u,f)=>{const h=parseFloat(u);h&&(i[f]=h)}),i}const ce=J({name:"touch-swipe",beforeMount(e,{value:i,arg:u,modifiers:f}){if(f.mouse!==!0&&N.has.touch!==!0)return;const h=f.mouseCapture===!0?"Capture":"",t={handler:i,sensitivity:se(u),direction:K(f),noop:Z,mouseStart(r){U(r,t)&&ee(r)&&(I(t,"temp",[[document,"mousemove","move",`notPassive${h}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(r,!0))},touchStart(r){if(U(r,t)){const l=r.target;I(t,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),t.start(r)}},start(r,l){N.is.firefox===!0&&V(e,!0);const d=H(r);t.event={x:d.left,y:d.top,time:Date.now(),mouse:l===!0,dir:!1}},move(r){if(t.event===void 0)return;if(t.event.dir!==!1){j(r);return}const l=Date.now()-t.event.time;if(l===0)return;const d=H(r),y=d.left-t.event.x,c=Math.abs(y),C=d.top-t.event.y,o=Math.abs(C);if(t.event.mouse!==!0){if(c<t.sensitivity[1]&&o<t.sensitivity[1]){t.end(r);return}}else if(window.getSelection().toString()!==""){t.end(r);return}else if(c<t.sensitivity[2]&&o<t.sensitivity[2])return;const v=c/l,g=o/l;t.direction.vertical===!0&&c<o&&c<100&&g>t.sensitivity[0]&&(t.event.dir=C<0?"up":"down"),t.direction.horizontal===!0&&c>o&&o<100&&v>t.sensitivity[0]&&(t.event.dir=y<0?"left":"right"),t.direction.up===!0&&c<o&&C<0&&c<100&&g>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&c<o&&C>0&&c<100&&g>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&c>o&&y<0&&o<100&&v>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&c>o&&y>0&&o<100&&v>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(j(r),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),le(),t.styleCleanup=S=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const w=()=>{document.body.classList.remove("no-pointer-events--children")};S===!0?setTimeout(w,50):w()}),t.handler({evt:r,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:l,distance:{x:c,y:o}})):t.end(r)},end(r){var l;t.event!==void 0&&(M(t,"temp"),N.is.firefox===!0&&V(e,!1),(l=t.styleCleanup)==null||l.call(t,!0),r!==void 0&&t.event.dir!==!1&&j(r),t.event=void 0)}};if(e.__qtouchswipe=t,f.mouse===!0){const r=f.mouseCapture===!0||f.mousecapture===!0?"Capture":"";I(t,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}N.has.touch===!0&&I(t,"main",[[e,"touchstart","touchStart",`passive${f.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,i){const u=e.__qtouchswipe;u!==void 0&&(i.oldValue!==i.value&&(typeof i.value!="function"&&u.end(),u.handler=i.value),u.direction=K(i.modifiers))},beforeUnmount(e){var u;const i=e.__qtouchswipe;i!==void 0&&(M(i,"main"),M(i,"temp"),N.is.firefox===!0&&V(e,!1),(u=i.styleCleanup)==null||u.call(i),delete e.__qtouchswipe)}}),ye={name:{required:!0},disable:Boolean},W={setup(e,{slots:i}){return()=>p("div",{class:"q-panel scroll",role:"tabpanel"},F(i.default))}},Se={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},be=["update:modelValue","beforeTransition","transition"];function Pe(){const{props:e,emit:i,proxy:u}=X(),{getCache:f}=ue(),{registerTimeout:h}=Q();let t,r;const l=T(null),d={value:null};function y(n){const s=e.vertical===!0?"up":"left";x((u.$q.lang.rtl===!0?-1:1)*(n.direction===s?1:-1))}const c=m(()=>[[ce,y,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),C=m(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),o=m(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),v=m(()=>`--q-transition-duration: ${e.transitionDuration}ms`),g=m(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),S=m(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),w=m(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Y(()=>e.modelValue,(n,s)=>{const P=q(n)===!0?_(n):-1;r!==!0&&k(P===-1?0:P<_(s)?-1:1),d.value!==P&&(d.value=P,i("beforeTransition",n,s),h(()=>{i("transition",n,s)},e.transitionDuration))});function D(){x(1)}function L(){x(-1)}function z(n){i("update:modelValue",n)}function q(n){return n!=null&&n!==""}function _(n){return t.findIndex(s=>s.props.name===n&&s.props.disable!==""&&s.props.disable!==!0)}function $(){return t.filter(n=>n.props.disable!==""&&n.props.disable!==!0)}function k(n){const s=n!==0&&e.animated===!0&&d.value!==-1?"q-transition--"+(n===-1?C.value:o.value):null;l.value!==s&&(l.value=s)}function x(n,s=d.value){let P=s+n;for(;P!==-1&&P<t.length;){const E=t[P];if(E!==void 0&&E.props.disable!==""&&E.props.disable!==!0){k(n),r=!0,i("update:modelValue",E.props.name),setTimeout(()=>{r=!1});return}P+=n}e.infinite===!0&&t.length!==0&&s!==-1&&s!==t.length&&x(n,n===-1?t.length:-1)}function B(){const n=_(e.modelValue);return d.value!==n&&(d.value=n),!0}function A(){const n=q(e.modelValue)===!0&&B()&&t[d.value];return e.keepAlive===!0?[p(ne,S.value,[p(w.value===!0?f(g.value,()=>({...W,name:g.value})):W,{key:g.value,style:v.value},()=>n)])]:[p("div",{class:"q-panel scroll",style:v.value,key:g.value,role:"tabpanel"},[n])]}function R(){if(t.length!==0)return e.animated===!0?[p(G,{name:l.value},A)]:A()}function a(n){return t=te(F(n.default,[])).filter(s=>s.props!==null&&s.props.slot===void 0&&q(s.props.name)===!0),t.length}function b(){return t}return Object.assign(u,{next:D,previous:L,goTo:z}),{panelIndex:d,panelDirectives:c,updatePanelsList:a,updatePanelIndex:B,getPanelContent:R,getEnabledPanels:$,getPanels:b,isValidPanelName:q,keepAliveProps:S,needsUniqueKeepAliveWrapper:w,goToPanelByOffset:x,goToPanel:z,nextPanel:D,previousPanel:L}}const de={ratio:[String,Number]};function ve(e,i){return m(()=>{const u=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(u)!==!0&&u>0?{paddingBottom:`${100/u}%`}:null})}const fe=1.7778,Ce=ie({name:"QImg",props:{...de,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:fe},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:u}){const f=T(e.initialRatio),h=ve(e,f),t=X(),{registerTimeout:r,removeTimeout:l}=Q(),{registerTimeout:d,removeTimeout:y}=Q(),c=m(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),C=m(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),o=[T(null),T(c.value)],v=T(0),g=T(!1),S=T(!1),w=m(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),D=m(()=>({width:e.width,height:e.height})),L=m(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),z=m(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function q(){if(y(),e.loadingShowDelay===0){g.value=!0;return}d(()=>{g.value=!0},e.loadingShowDelay)}function _(){y(),g.value=!1}function $({target:a}){O(t)===!1&&(l(),f.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,k(a,1))}function k(a,b){b===1e3||O(t)===!0||(a.complete===!0?x(a):r(()=>{k(a,b+1)},50))}function x(a){O(t)!==!0&&(v.value=v.value^1,o[v.value].value=null,_(),a.getAttribute("__qerror")!=="true"&&(S.value=!1),u("load",a.currentSrc||a.src))}function B(a){l(),_(),S.value=!0,o[v.value].value=C.value,o[v.value^1].value=c.value,u("error",a)}function A(a){const b=o[a].value,n={key:"img_"+a,class:L.value,style:z.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...b};return v.value===a?Object.assign(n,{class:n.class+"current",onLoad:$,onError:B}):n.class+="loaded",p("div",{class:"q-img__container absolute-full",key:"img"+a},p("img",n))}function R(){return g.value===!1?p("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},F(i[S.value===!0?"error":"default"])):p("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[p(oe,{color:e.spinnerColor,size:e.spinnerSize})])}{let a=function(){Y(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,b=>{l(),S.value=!1,b===null?(_(),o[v.value^1].value=c.value):q(),o[v.value].value=b},{immediate:!0})};ae.value===!0?re(a):a()}return()=>{const a=[];return h.value!==null&&a.push(p("div",{key:"filler",style:h.value})),o[0].value!==null&&a.push(A(0)),o[1].value!==null&&a.push(A(1)),a.push(p(G,{name:"q-transition--fade"},R)),p("div",{key:"main",class:w.value,style:D.value,role:"img","aria-label":e.alt},a)}}});export{Ce as Q,be as a,Se as b,Pe as c,ye as u};
