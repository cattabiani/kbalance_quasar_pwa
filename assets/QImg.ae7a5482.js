import{ae as J,a3 as N,n as Z,af as ee,a1 as z,ag as M,a4 as H,E as V,a2 as j,r as w,a as f,w as Y,g as U,h as g,a5 as G,at as te,b as F,au as ne,c as ie,k as ae,o as re,a7 as O,ac as oe}from"./index.81992853.js";import{g as K,s as W,u as ue}from"./use-render-cache.770e5fe8.js";import{c as le}from"./selection.b797f005.js";import{u as Q}from"./QHeader.0c2b66b3.js";function se(e){const i=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((c,v)=>{const h=parseFloat(c);h&&(i[v]=h)}),i}var ce=J({name:"touch-swipe",beforeMount(e,{value:i,arg:c,modifiers:v}){if(v.mouse!==!0&&N.has.touch!==!0)return;const h=v.mouseCapture===!0?"Capture":"",t={handler:i,sensitivity:se(c),direction:K(v),noop:Z,mouseStart(r){W(r,t)&&ee(r)&&(z(t,"temp",[[document,"mousemove","move",`notPassive${h}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(r,!0))},touchStart(r){if(W(r,t)){const u=r.target;z(t,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),t.start(r)}},start(r,u){N.is.firefox===!0&&M(e,!0);const p=H(r);t.event={x:p.left,y:p.top,time:Date.now(),mouse:u===!0,dir:!1}},move(r){if(t.event===void 0)return;if(t.event.dir!==!1){V(r);return}const u=Date.now()-t.event.time;if(u===0)return;const p=H(r),y=p.left-t.event.x,s=Math.abs(y),P=p.top-t.event.y,o=Math.abs(P);if(t.event.mouse!==!0){if(s<t.sensitivity[1]&&o<t.sensitivity[1]){t.end(r);return}}else if(window.getSelection().toString()!==""){t.end(r);return}else if(s<t.sensitivity[2]&&o<t.sensitivity[2])return;const d=s/u,m=o/u;t.direction.vertical===!0&&s<o&&s<100&&m>t.sensitivity[0]&&(t.event.dir=P<0?"up":"down"),t.direction.horizontal===!0&&s>o&&o<100&&d>t.sensitivity[0]&&(t.event.dir=y<0?"left":"right"),t.direction.up===!0&&s<o&&P<0&&s<100&&m>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&s<o&&P>0&&s<100&&m>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&s>o&&y<0&&o<100&&d>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&s>o&&y>0&&o<100&&d>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(V(r),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),le(),t.styleCleanup=S=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const x=()=>{document.body.classList.remove("no-pointer-events--children")};S===!0?setTimeout(x,50):x()}),t.handler({evt:r,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:u,distance:{x:s,y:o}})):t.end(r)},end(r){t.event!==void 0&&(j(t,"temp"),N.is.firefox===!0&&M(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),r!==void 0&&t.event.dir!==!1&&V(r),t.event=void 0)}};if(e.__qtouchswipe=t,v.mouse===!0){const r=v.mouseCapture===!0||v.mousecapture===!0?"Capture":"";z(t,"main",[[e,"mousedown","mouseStart",`passive${r}`]])}N.has.touch===!0&&z(t,"main",[[e,"touchstart","touchStart",`passive${v.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,i){const c=e.__qtouchswipe;c!==void 0&&(i.oldValue!==i.value&&(typeof i.value!="function"&&c.end(),c.handler=i.value),c.direction=K(i.modifiers))},beforeUnmount(e){const i=e.__qtouchswipe;i!==void 0&&(j(i,"main"),j(i,"temp"),N.is.firefox===!0&&M(e,!1),i.styleCleanup!==void 0&&i.styleCleanup(),delete e.__qtouchswipe)}});const ye={name:{required:!0},disable:Boolean},X={setup(e,{slots:i}){return()=>g("div",{class:"q-panel scroll",role:"tabpanel"},F(i.default))}},Se={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},be=["update:modelValue","beforeTransition","transition"];function Ce(){const{props:e,emit:i,proxy:c}=U(),{getCache:v}=ue(),{registerTimeout:h}=Q();let t,r;const u=w(null),p=w(null);function y(n){const l=e.vertical===!0?"up":"left";q((c.$q.lang.rtl===!0?-1:1)*(n.direction===l?1:-1))}const s=f(()=>[[ce,y,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),P=f(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),o=f(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),d=f(()=>`--q-transition-duration: ${e.transitionDuration}ms`),m=f(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),S=f(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),x=f(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Y(()=>e.modelValue,(n,l)=>{const C=T(n)===!0?_(n):-1;r!==!0&&k(C===-1?0:C<_(l)?-1:1),u.value!==C&&(u.value=C,i("beforeTransition",n,l),h(()=>{i("transition",n,l)},e.transitionDuration))});function D(){q(1)}function E(){q(-1)}function L(n){i("update:modelValue",n)}function T(n){return n!=null&&n!==""}function _(n){return t.findIndex(l=>l.props.name===n&&l.props.disable!==""&&l.props.disable!==!0)}function $(){return t.filter(n=>n.props.disable!==""&&n.props.disable!==!0)}function k(n){const l=n!==0&&e.animated===!0&&u.value!==-1?"q-transition--"+(n===-1?P.value:o.value):null;p.value!==l&&(p.value=l)}function q(n,l=u.value){let C=l+n;for(;C!==-1&&C<t.length;){const I=t[C];if(I!==void 0&&I.props.disable!==""&&I.props.disable!==!0){k(n),r=!0,i("update:modelValue",I.props.name),setTimeout(()=>{r=!1});return}C+=n}e.infinite===!0&&t.length!==0&&l!==-1&&l!==t.length&&q(n,n===-1?t.length:-1)}function B(){const n=_(e.modelValue);return u.value!==n&&(u.value=n),!0}function A(){const n=T(e.modelValue)===!0&&B()&&t[u.value];return e.keepAlive===!0?[g(ne,S.value,[g(x.value===!0?v(m.value,()=>({...X,name:m.value})):X,{key:m.value,style:d.value},()=>n)])]:[g("div",{class:"q-panel scroll",style:d.value,key:m.value,role:"tabpanel"},[n])]}function R(){if(t.length!==0)return e.animated===!0?[g(G,{name:p.value},A)]:A()}function a(n){return t=te(F(n.default,[])).filter(l=>l.props!==null&&l.props.slot===void 0&&T(l.props.name)===!0),t.length}function b(){return t}return Object.assign(c,{next:D,previous:E,goTo:L}),{panelIndex:u,panelDirectives:s,updatePanelsList:a,updatePanelIndex:B,getPanelContent:R,getEnabledPanels:$,getPanels:b,isValidPanelName:T,keepAliveProps:S,needsUniqueKeepAliveWrapper:x,goToPanelByOffset:q,goToPanel:L,nextPanel:D,previousPanel:E}}const de={ratio:[String,Number]};function ve(e,i){return f(()=>{const c=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(c)!==!0&&c>0?{paddingBottom:`${100/c}%`}:null})}const fe=1.7778;var Pe=ie({name:"QImg",props:{...de,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:fe},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:c}){const v=w(e.initialRatio),h=ve(e,v),t=U(),{registerTimeout:r,removeTimeout:u}=Q(),{registerTimeout:p,removeTimeout:y}=Q(),s=f(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),P=f(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),o=[w(null),w(s.value)],d=w(0),m=w(!1),S=w(!1),x=f(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),D=f(()=>({width:e.width,height:e.height})),E=f(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),L=f(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function T(){if(y(),e.loadingShowDelay===0){m.value=!0;return}p(()=>{m.value=!0},e.loadingShowDelay)}function _(){y(),m.value=!1}function $({target:a}){O(t)===!1&&(u(),v.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,k(a,1))}function k(a,b){b===1e3||O(t)===!0||(a.complete===!0?q(a):r(()=>{k(a,b+1)},50))}function q(a){O(t)!==!0&&(d.value=d.value^1,o[d.value].value=null,_(),a.getAttribute("__qerror")!=="true"&&(S.value=!1),c("load",a.currentSrc||a.src))}function B(a){u(),_(),S.value=!0,o[d.value].value=P.value,o[d.value^1].value=s.value,c("error",a)}function A(a){const b=o[a].value,n={key:"img_"+a,class:E.value,style:L.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...b};return d.value===a?Object.assign(n,{class:n.class+"current",onLoad:$,onError:B}):n.class+="loaded",g("div",{class:"q-img__container absolute-full",key:"img"+a},g("img",n))}function R(){return m.value===!1?g("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},F(i[S.value===!0?"error":"default"])):g("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[g(oe,{color:e.spinnerColor,size:e.spinnerSize})])}{let a=function(){Y(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,b=>{u(),S.value=!1,b===null?(_(),o[d.value^1].value=s.value):T(),o[d.value].value=b},{immediate:!0})};ae.value===!0?re(a):a()}return()=>{const a=[];return h.value!==null&&a.push(g("div",{key:"filler",style:h.value})),o[0].value!==null&&a.push(A(0)),o[1].value!==null&&a.push(A(1)),a.push(g(G,{name:"q-transition--fade"},R)),g("div",{key:"main",class:x.value,style:D.value,role:"img","aria-label":e.alt},a)}}});export{Pe as Q,Se as a,be as b,Ce as c,ye as u};
