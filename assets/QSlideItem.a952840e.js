import{ag as z,a3 as q,n as O,ah as T,a1 as S,ai as D,a0 as X,a9 as M,a4 as k,a2 as _,E as j,c as A,r as R,a as F,ab as I,f as Q,h as x,b as U,C as H,g as K}from"./index.4a6f8803.js";import{g as P,s as Y,u as V}from"./use-render-cache.770e5fe8.js";import{c as G}from"./selection.b889aa2b.js";import{u as J,a as W}from"./QPage.0858804a.js";function $(u,r,o){const p=k(u);let e,t=p.left-r.event.x,n=p.top-r.event.y,l=Math.abs(t),s=Math.abs(n);const i=r.direction;i.horizontal===!0&&i.vertical!==!0?e=t<0?"left":"right":i.horizontal!==!0&&i.vertical===!0?e=n<0?"up":"down":i.up===!0&&n<0?(e="up",l>s&&(i.left===!0&&t<0?e="left":i.right===!0&&t>0&&(e="right"))):i.down===!0&&n>0?(e="down",l>s&&(i.left===!0&&t<0?e="left":i.right===!0&&t>0&&(e="right"))):i.left===!0&&t<0?(e="left",l<s&&(i.up===!0&&n<0?e="up":i.down===!0&&n>0&&(e="down"))):i.right===!0&&t>0&&(e="right",l<s&&(i.up===!0&&n<0?e="up":i.down===!0&&n>0&&(e="down")));let C=!1;if(e===void 0&&o===!1){if(r.event.isFirst===!0||r.event.lastDir===void 0)return{};e=r.event.lastDir,C=!0,e==="left"||e==="right"?(p.left-=t,l=0,t=0):(p.top-=n,s=0,n=0)}return{synthetic:C,payload:{evt:u,touch:r.event.mouse!==!0,mouse:r.event.mouse===!0,position:p,direction:e,isFirst:r.event.isFirst,isFinal:o===!0,duration:Date.now()-r.event.time,distance:{x:l,y:s},offset:{x:t,y:n},delta:{x:p.left-r.event.lastX,y:p.top-r.event.lastY}}}}let Z=0;var N=z({name:"touch-pan",beforeMount(u,{value:r,modifiers:o}){if(o.mouse!==!0&&q.has.touch!==!0)return;function p(t,n){o.mouse===!0&&n===!0?j(t):(o.stop===!0&&M(t),o.prevent===!0&&X(t))}const e={uid:"qvtp_"+Z++,handler:r,modifiers:o,direction:P(o),noop:O,mouseStart(t){Y(t,e)&&T(t)&&(S(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(t,!0))},touchStart(t){if(Y(t,e)){const n=t.target;S(e,"temp",[[n,"touchmove","move","notPassiveCapture"],[n,"touchcancel","end","passiveCapture"],[n,"touchend","end","passiveCapture"]]),e.start(t)}},start(t,n){if(q.is.firefox===!0&&D(u,!0),e.lastEvt=t,n===!0||o.stop===!0){if(e.direction.all!==!0&&(n!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const i=t.type.indexOf("mouse")!==-1?new MouseEvent(t.type,t):new TouchEvent(t.type,t);t.defaultPrevented===!0&&X(i),t.cancelBubble===!0&&M(i),Object.assign(i,{qKeyEvent:t.qKeyEvent,qClickOutside:t.qClickOutside,qAnchorHandled:t.qAnchorHandled,qClonedBy:t.qClonedBy===void 0?[e.uid]:t.qClonedBy.concat(e.uid)}),e.initialEvent={target:t.target,event:i}}M(t)}const{left:l,top:s}=k(t);e.event={x:l,y:s,time:Date.now(),mouse:n===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:s}},move(t){if(e.event===void 0)return;const n=k(t),l=n.left-e.event.x,s=n.top-e.event.y;if(l===0&&s===0)return;e.lastEvt=t;const i=e.event.mouse===!0,C=()=>{p(t,i);let g;o.preserveCursor!==!0&&o.preservecursor!==!0&&(g=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),i===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),G(),e.styleCleanup=b=>{if(e.styleCleanup=void 0,g!==void 0&&(document.documentElement.style.cursor=g),document.body.classList.remove("non-selectable"),i===!0){const E=()=>{document.body.classList.remove("no-pointer-events--children")};b!==void 0?setTimeout(()=>{E(),b()},50):E()}else b!==void 0&&b()}};if(e.event.detected===!0){e.event.isFirst!==!0&&p(t,e.event.mouse);const{payload:g,synthetic:b}=$(t,e,!1);g!==void 0&&(e.handler(g)===!1?e.end(t):(e.styleCleanup===void 0&&e.event.isFirst===!0&&C(),e.event.lastX=g.position.left,e.event.lastY=g.position.top,e.event.lastDir=b===!0?void 0:g.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||i===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){C(),e.event.detected=!0,e.move(t);return}const h=Math.abs(l),c=Math.abs(s);h!==c&&(e.direction.horizontal===!0&&h>c||e.direction.vertical===!0&&h<c||e.direction.up===!0&&h<c&&s<0||e.direction.down===!0&&h<c&&s>0||e.direction.left===!0&&h>c&&l<0||e.direction.right===!0&&h>c&&l>0?(e.event.detected=!0,e.move(t)):e.end(t,!0))},end(t,n){if(e.event!==void 0){if(_(e,"temp"),q.is.firefox===!0&&D(u,!1),n===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler($(t===void 0?e.lastEvt:t,e).payload);const{payload:l}=$(t===void 0?e.lastEvt:t,e,!0),s=()=>{e.handler(l)};e.styleCleanup!==void 0?e.styleCleanup(s):s()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(u.__qtouchpan=e,o.mouse===!0){const t=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";S(e,"main",[[u,"mousedown","mouseStart",`passive${t}`]])}q.has.touch===!0&&S(e,"main",[[u,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[u,"touchmove","noop","notPassiveCapture"]])},updated(u,r){const o=u.__qtouchpan;o!==void 0&&(r.oldValue!==r.value&&(typeof value!="function"&&o.end(),o.handler=r.value),o.direction=P(r.modifiers))},beforeUnmount(u){const r=u.__qtouchpan;r!==void 0&&(r.event!==void 0&&r.end(),_(r,"main"),_(r,"temp"),q.is.firefox===!0&&D(u,!1),r.styleCleanup!==void 0&&r.styleCleanup(),delete u.__qtouchpan)}});const B=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];var ne=A({name:"QSlideItem",props:{...J,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(u,{slots:r,emit:o}){const{proxy:p}=K(),{$q:e}=p,t=W(u,e),{getCache:n}=V(),l=R(null);let s=null,i={},C={},h={};const c=F(()=>e.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),g=F(()=>"q-slide-item q-item-type overflow-hidden"+(t.value===!0?" q-slide-item--dark q-dark":""));function b(){l.value.style.transform="translate(0,0)"}function E(a,y,f){u.onSlide!==void 0&&o("slide",{side:a,ratio:y,isReset:f})}function L(a){const y=l.value;if(a.isFirst)i={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},y.classList.add("no-transition"),B.forEach(d=>{if(r[d[0]]!==void 0){const w=h[d[0]];w.style.transform="scale(1)",i.size[d[0]]=w.getBoundingClientRect()[d[3]]}}),i.axis=a.direction==="up"||a.direction==="down"?"Y":"X";else if(a.isFinal){y.classList.remove("no-transition"),i.scale===1?(y.style.transform=`translate${i.axis}(${i.dir*100}%)`,s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,o(i.showing,{reset:b}),o("action",{side:i.showing,reset:b})},230)):(y.style.transform="translate(0,0)",E(i.showing,0,!0));return}else a.direction=i.axis==="X"?a.offset.x<0?"left":"right":a.offset.y<0?"up":"down";if(r.left===void 0&&a.direction===c.value.right||r.right===void 0&&a.direction===c.value.left||r.top===void 0&&a.direction==="down"||r.bottom===void 0&&a.direction==="up"){y.style.transform="translate(0,0)";return}let f,m,v;i.axis==="X"?(m=a.direction==="left"?-1:1,f=m===1?c.value.left:c.value.right,v=a.distance.x):(m=a.direction==="up"?-2:2,f=m===2?"top":"bottom",v=a.distance.y),!(i.dir!==null&&Math.abs(m)!==Math.abs(i.dir))&&(i.dir!==m&&(["left","right","top","bottom"].forEach(d=>{C[d]&&(C[d].style.visibility=f===d?"visible":"hidden")}),i.showing=f,i.dir=m),i.scale=Math.max(0,Math.min(1,(v-40)/i.size[f])),y.style.transform=`translate${i.axis}(${v*m/Math.abs(m)}px)`,h[f].style.transform=`scale(${i.scale})`,E(f,i.scale,!1))}return I(()=>{C={},h={}}),Q(()=>{s!==null&&clearTimeout(s)}),Object.assign(p,{reset:b}),()=>{const a=[],y={left:r[c.value.right]!==void 0,right:r[c.value.left]!==void 0,up:r.bottom!==void 0,down:r.top!==void 0},f=Object.keys(y).filter(v=>y[v]===!0);B.forEach(v=>{const d=v[0];r[d]!==void 0&&a.push(x("div",{key:d,ref:w=>{C[d]=w},class:`q-slide-item__${d} absolute-full row no-wrap items-${v[1]} justify-${v[2]}`+(u[d+"Color"]!==void 0?` bg-${u[d+"Color"]}`:"")},[x("div",{ref:w=>{h[d]=w}},r[d]())]))});const m=x("div",{key:`${f.length===0?"only-":""} content`,ref:l,class:"q-slide-item__content"},U(r.default));return f.length===0?a.push(m):a.push(H(m,n("dir#"+f.join(""),()=>{const v={prevent:!0,stop:!0,mouse:!0};return f.forEach(d=>{v[d]=!0}),[[N,L,void 0,v]]}))),x("div",{class:g.value},a)}}});export{ne as Q};
