import{d as V,c as x,Q as h}from"./QPage.1e81f41b.js";import{_ as S,r as p,w as q,f as B,u as l,$ as Q,y as a,x as r,a0 as E,a1 as N,Y as c,a2 as i,v as g,X as w,a3 as b,Z as y,aP as m}from"./index.d112f7b7.js";import{Q as P}from"./QCardActions.a9f37625.js";import{_ as F}from"./ShareString.73ae8bd2.js";import{_ as $}from"./ReceiveString.9bcf0b32.js";import{u as D}from"./use-quasar.f2977d2c.js";import"./QDialog.d96e7325.js";import"./focusout.ac2deb84.js";import"./scroll.724e710d.js";const j=Object.assign({name:"SettingsPage"},{__name:"SettingsPage",setup(I){const n=D(),o=S(),C=N(),u=p(""),f=p(""),d=p(!1),k=()=>{m.isCompatible(o.config)?u.value=JSON.stringify(o.config):n.notify({message:"The current config is corrupted or empty!",color:"negative"})};q(f,t=>{if(t)try{o.setConfig(JSON.parse(t)),n.notify({message:"Config set successfully!"})}catch(e){n.notify({message:e.message||e,color:"negative"})}},{immediate:!0});const _=async()=>{try{await o.init(),C.push({name:"IndexPage"})}catch(t){n.notify({message:t.message||t,color:"negative"})}},v=t=>{t.preventDefault(),notification=n.notify({actions:[{label:"Install",color:"white",handler:()=>{t&&(t.prompt(),notification.close())}},{label:"Dismiss",color:"white",handler:()=>{notification.close()}}],timeout:0})};return window.addEventListener("beforeinstallprompt",v),B(()=>{window.removeEventListener("beforeinstallprompt",v)}),(t,e)=>(l(),Q(E,null,[a(V,{class:"flex flex-center"},{default:r(()=>[a(x,{class:"q-pa-md q-mb-md",style:{width:"80%"}},{default:r(()=>[a(h,{class:"text-center",style:{"font-size":"28px"}},{default:r(()=>e[4]||(e[4]=[c(" Settings ")])),_:1}),i(m).isCompatible(i(o).config)?b("",!0):(l(),g(h,{key:0},{default:r(()=>e[5]||(e[5]=[c(" Welcome to kBalance! First, you need to set up your Firebase account. You can either "),w("strong",null,"import",-1),c(" a friend's settings (and rely on their Firebase account) or create your own. For more info on this second method, check the "),w("a",{href:"https://github.com/cattabiani/kbalance_quasar_pwa/blob/main/README.md",target:"_blank",class:"text-primary"},"kBalance README",-1),c(". ")])),_:1})),a(P,null,{default:r(()=>[i(m).isCompatible(i(o).config)?(l(),g(y,{key:0,icon:"qr_code",color:"secondary",label:"Share",class:"full-width q-mb-md",onClick:k})):b("",!0),a(y,{icon:"qr_code_scanner",label:"Import",color:"secondary",class:"full-width q-mb-md",onClick:e[0]||(e[0]=s=>d.value=!0)}),i(m).isCompatible(i(o).config)?(l(),g(y,{key:1,icon:"send",label:"Go to Log In",color:"primary",class:"full-width",onClick:_})):b("",!0)]),_:1})]),_:1})]),_:1}),a(F,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s)},null,8,["modelValue"]),a($,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),isVisible:d.value,"onUpdate:isVisible":e[3]||(e[3]=s=>d.value=s)},null,8,["modelValue","isVisible"])],64))}});export{j as default};
