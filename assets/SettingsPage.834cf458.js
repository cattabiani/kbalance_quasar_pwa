import{e as V,c as x,d as S,Q as h}from"./QPage.3cc5750a.js";import{_ as q,r as p,w as B,f as Q,u as l,$ as E,y as o,x as r,a0 as N,a1 as F,Y as c,a2 as i,v as g,X as w,a3 as b,Z as y,aN as m}from"./index.4c594b8b.js";import{Q as P}from"./QCardActions.dcadff1a.js";import{_ as $}from"./ShareString.34cd97c1.js";import{_ as D}from"./ReceiveString.65a5020b.js";import"./QDialog.146dbd42.js";import"./focusout.d2014ae3.js";import"./scroll.65bcb462.js";const Y=Object.assign({name:"SettingsPage"},{__name:"SettingsPage",setup(I){const n=x(),a=q(),C=F(),u=p(""),f=p(""),d=p(!1),k=()=>{m.isCompatible(a.config)?u.value=JSON.stringify(a.config):n.notify({message:"The current config is corrupted or empty!",color:"negative"})};B(f,t=>{if(t)try{a.setConfig(JSON.parse(t)),n.notify({message:"Config set successfully!"})}catch(e){n.notify({message:e.message||e,color:"negative"})}},{immediate:!0});const _=async()=>{try{await a.init(),C.push({name:"IndexPage"})}catch(t){n.notify({message:t.message||t,color:"negative"})}},v=t=>{t.preventDefault(),notification=n.notify({actions:[{label:"Install",color:"white",handler:()=>{t&&(t.prompt(),notification.close())}},{label:"Dismiss",color:"white",handler:()=>{notification.close()}}],timeout:0})};return window.addEventListener("beforeinstallprompt",v),Q(()=>{window.removeEventListener("beforeinstallprompt",v)}),(t,e)=>(l(),E(N,null,[o(V,{class:"flex flex-center"},{default:r(()=>[o(S,{class:"q-pa-md q-mb-md",style:{width:"80%"}},{default:r(()=>[o(h,{class:"text-center",style:{"font-size":"28px"}},{default:r(()=>e[4]||(e[4]=[c(" Settings ")])),_:1}),i(m).isCompatible(i(a).config)?b("",!0):(l(),g(h,{key:0},{default:r(()=>e[5]||(e[5]=[c(" Welcome to kBalance! First, you need to set up your Firebase account. You can either "),w("strong",null,"import",-1),c(" a friend's settings (and rely on their Firebase account) or create your own. For more info on this second method, check the "),w("a",{href:"https://github.com/cattabiani/kbalance_quasar_pwa/blob/main/README.md",target:"_blank",class:"text-primary"},"kBalance README",-1),c(". ")])),_:1})),o(P,null,{default:r(()=>[i(m).isCompatible(i(a).config)?(l(),g(y,{key:0,icon:"qr_code",color:"secondary",label:"Share",class:"full-width q-mb-md",onClick:k})):b("",!0),o(y,{icon:"qr_code_scanner",label:"Import",color:"secondary",class:"full-width q-mb-md",onClick:e[0]||(e[0]=s=>d.value=!0)}),i(m).isCompatible(i(a).config)?(l(),g(y,{key:1,icon:"send",label:"Go to Log In",color:"primary",class:"full-width",onClick:_})):b("",!0)]),_:1})]),_:1})]),_:1}),o($,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s)},null,8,["modelValue"]),o(D,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),isVisible:d.value,"onUpdate:isVisible":e[3]||(e[3]=s=>d.value=s)},null,8,["modelValue","isVisible"])],64))}});export{Y as default};
