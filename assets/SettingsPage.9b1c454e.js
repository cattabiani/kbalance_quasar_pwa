import{e as w,c as C,d as _,Q as S}from"./QPage.2aa1e3b6.js";import{_ as V,r as c,w as x,f as h,u as d,$ as Q,y as o,x as n,a0 as k,a1 as q,Y as N,Z as u,a3 as p,v as B,aa as P,aN as g}from"./index.88816873.js";import{Q as $}from"./QCardActions.5da937ce.js";import{_ as I}from"./ShareString.32bf5084.js";import{_ as U}from"./ReceiveString.1f93aac6.js";import"./QDialog.7414030b.js";import"./focusout.77fdfad8.js";import"./scroll.ddbaf92a.js";const A=Object.assign({name:"SettingsPage"},{__name:"SettingsPage",setup(E){const s=C(),i=V(),y=q(),l=c(""),r=c(""),m=c(!1),b=()=>{g.isCompatible(i.config)?l.value=JSON.stringify(i.config):s.notify({message:"The current config is corrupted or empty!",color:"negative"})};x(r,t=>{if(t)try{i.setConfig(JSON.parse(t)),s.notify({message:"Config set successfully!"})}catch(e){s.notify({message:e.message||e,color:"negative"})}},{immediate:!0});const v=async()=>{try{await i.init(),y.push({name:"IndexPage"})}catch(t){s.notify({message:t.message||t,color:"negative"})}},f=t=>{t.preventDefault(),notification=s.notify({actions:[{label:"Install",color:"white",handler:()=>{t&&(t.prompt(),notification.close())}},{label:"Dismiss",color:"white",handler:()=>{notification.close()}}],timeout:0})};return window.addEventListener("beforeinstallprompt",f),h(()=>{window.removeEventListener("beforeinstallprompt",f)}),(t,e)=>(d(),Q(k,null,[o(w,{class:"flex flex-center"},{default:n(()=>[o(_,{class:"q-pa-md q-mb-md",style:{width:"80%"}},{default:n(()=>[o(S,{class:"text-center",style:{"font-size":"28px"}},{default:n(()=>e[4]||(e[4]=[N(" Settings ")])),_:1}),o($,null,{default:n(()=>[o(u,{icon:"qr_code",color:"secondary",label:"Share",class:"full-width q-mb-md",onClick:b}),o(u,{icon:"qr_code_scanner",label:"Import",color:"secondary",class:"full-width q-mb-md",onClick:e[0]||(e[0]=a=>m.value=!0)}),p(g).isCompatible(p(i).config)?(d(),B(u,{key:0,icon:"send",label:"Go to Log In",color:"primary",class:"full-width",onClick:v})):P("",!0)]),_:1})]),_:1})]),_:1}),o(I,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a)},null,8,["modelValue"]),o(U,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a),isVisible:m.value,"onUpdate:isVisible":e[3]||(e[3]=a=>m.value=a)},null,8,["modelValue","isVisible"])],64))}});export{A as default};
