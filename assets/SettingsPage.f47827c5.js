import{e as v,c as w,d as C,Q as S}from"./QPage.52851323.js";import{_,r as c,w as x,f as V,u as h,$ as Q,y as s,x as l,a0 as q,a1 as k,Y as N,Z as u,a3 as d,aN as p}from"./index.cd060ed4.js";import{Q as P}from"./QCardActions.d82c6b85.js";import{_ as $}from"./ShareString.c81cdfbb.js";import{_ as B}from"./ReceiveString.efc5a9c8.js";import"./QDialog.8ce677e2.js";import"./focusout.d7eb1719.js";import"./scroll.c8fd8f6c.js";const j=Object.assign({name:"SettingsPage"},{__name:"SettingsPage",setup(U){const o=w(),i=_(),g=k(),n=c(""),r=c(""),m=c(!1),b=()=>{p.isCompatible(i.config)?n.value=JSON.stringify(i.config):o.notify({message:"The current config is corrupted or empty!",color:"negative"})};x(r,t=>{if(t)try{i.setConfig(JSON.parse(t)),o.notify({message:"Config set successfully!"})}catch(e){o.notify({message:e.message||e,color:"negative"})}},{immediate:!0});const y=async()=>{try{await i.init(),g.push({name:"IndexPage"})}catch(t){o.notify({message:t.message||t,color:"negative"})}},f=t=>{t.preventDefault(),notification=o.notify({actions:[{label:"Install",color:"white",handler:()=>{t&&(t.prompt(),notification.close())}},{label:"Dismiss",color:"white",handler:()=>{notification.close()}}],timeout:0})};return window.addEventListener("beforeinstallprompt",f),V(()=>{window.removeEventListener("beforeinstallprompt",f)}),(t,e)=>(h(),Q(q,null,[s(v,{class:"flex flex-center"},{default:l(()=>[s(C,{class:"q-pa-md q-mb-md",style:{width:"80%"}},{default:l(()=>[s(S,{class:"text-center",style:{"font-size":"28px"}},{default:l(()=>e[4]||(e[4]=[N(" Settings ")])),_:1}),s(P,null,{default:l(()=>[s(u,{icon:"qr_code",color:"secondary",label:"Share",class:"full-width q-mb-md",onClick:b}),s(u,{icon:"qr_code_scanner",label:"Import",color:"secondary",class:"full-width q-mb-md",onClick:e[0]||(e[0]=a=>m.value=!0)}),s(u,{icon:"send",label:"Submit",color:"primary",class:"full-width",onClick:y,disable:!d(p).isCompatible(d(i).config)},null,8,["disable"])]),_:1})]),_:1})]),_:1}),s($,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a)},null,8,["modelValue"]),s(B,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a),isVisible:m.value,"onUpdate:isVisible":e[3]||(e[3]=a=>m.value=a)},null,8,["modelValue","isVisible"])],64))}});export{j as default};
