import{Q,a as n}from"./QCard-DiGAP1jW.js";import{r as x,a as m,w as V,u as _,v as c,x as o,y as a,I as p,M as b,N as h,P as k,J as f}from"./index-OHqjMywm.js";import{Q as w}from"./QCardActions-BTqFEdQZ.js";import{Q as S}from"./QDialog-DFXu25dT.js";import{Q as B}from"./browser-B_M_4Lik.js";import{b as N}from"./QPage-BT8lmWDR.js";const R=["src"],z={__name:"ShareString",props:{modelValue:String},emits:["update:modelValue"],setup(y,{emit:v}){const r=N(),u=y,C=v,l=x(null),s=m({get:()=>u.modelValue,set:t=>{C("update:modelValue",t)}}),d=m(()=>!!s.value);V(()=>u.modelValue,async t=>{if(t)try{l.value=await B.toDataURL(t)}catch(e){r.notify({message:e.message||e}),l.value=null}else l.value=null},{immediate:!0});const g=t=>{navigator.clipboard.writeText(t).then(()=>{r.notify("Copied to clipboard!")}).catch(()=>{r.notify("Failed to copy!")})};return(t,e)=>(c(),_(S,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=i=>d.value=i),persistent:""},{default:o(()=>[a(Q,{class:"q-my-md",style:{width:"100%",height:"auto"}},{default:o(()=>[a(n,{class:"text-center",style:{"font-size":"28px"}},{default:o(()=>[...e[3]||(e[3]=[p(" Share ",-1)])]),_:1}),a(n,null,{default:o(()=>[l.value?(c(),b("img",{key:0,src:l.value,alt:"QR Code",style:{width:"100%",height:"auto"}},null,8,R)):h("",!0)]),_:1}),a(n,{class:"flex flex-center"},{default:o(()=>[p(k(s.value),1)]),_:1}),a(w,{style:{display:"flex","justify-content":"center","align-items":"center"}},{default:o(()=>[a(f,{icon:"close",label:"Close",color:"red",onClick:e[0]||(e[0]=i=>s.value=null)}),a(f,{color:"primary",icon:"content_copy",onClick:e[1]||(e[1]=i=>g(s.value)),label:"Copy"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{z as _};
