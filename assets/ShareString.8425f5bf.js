import{Q as n,a as V}from"./QCard.bb53101c.js";import{r as x,a as m,w as Q,u as c,v as b,x as o,y as a,M as p,P as _,V as h,W as w,N as f}from"./index.60e6e8a1.js";import{Q as k}from"./QCardActions.2a799585.js";import{Q as S}from"./QDialog.dcc50afc.js";import{b as B}from"./browser.445c5f4b.js";import{b as N}from"./QPage.d94a517d.js";const q=["src"],z={__name:"ShareString",props:{modelValue:String},emits:["update:modelValue"],setup(y,{emit:v}){const r=N(),u=y,C=v,l=x(null),s=m({get:()=>u.modelValue,set:t=>{C("update:modelValue",t)}}),d=m(()=>!!s.value);Q(()=>u.modelValue,async t=>{if(t)try{l.value=await B.toDataURL(t)}catch(e){r.notify({message:e.message||e}),l.value=null}else l.value=null},{immediate:!0});const g=t=>{navigator.clipboard.writeText(t).then(()=>{r.notify("Copied to clipboard!")}).catch(()=>{r.notify("Failed to copy!")})};return(t,e)=>(c(),b(S,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=i=>d.value=i),persistent:""},{default:o(()=>[a(V,{class:"q-my-md",style:{width:"100%",height:"auto"}},{default:o(()=>[a(n,{class:"text-center",style:{"font-size":"28px"}},{default:o(()=>e[3]||(e[3]=[p(" Share ")])),_:1}),a(n,null,{default:o(()=>[l.value?(c(),_("img",{key:0,src:l.value,alt:"QR Code",style:{width:"100%",height:"auto"}},null,8,q)):h("",!0)]),_:1}),a(n,{class:"flex flex-center"},{default:o(()=>[p(w(s.value),1)]),_:1}),a(k,{style:{display:"flex","justify-content":"center","align-items":"center"}},{default:o(()=>[a(f,{icon:"close",label:"Close",color:"red",onClick:e[0]||(e[0]=i=>s.value=null)}),a(f,{color:"primary",icon:"content_copy",onClick:e[1]||(e[1]=i=>g(s.value)),label:"Copy"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{z as _};
