import{g as Be,r as M,a,a4 as Je,a5 as fe,k as Ge,a6 as Ze,h as L,H as et,c as tt,w as at,E as lt,L as rt,M as nt,o as ot,_ as pe,a3 as qe,N as he,x as ae,z as d,y as C,K as be,J as st,P as Q,I as ge,T as ye,U as Te,v as Ve}from"./index-C-3qNLdi.js";import{Q as ut}from"./QToolbarTitle-BouJMTqs.js";import{Q as it}from"./QSpace-CJ8xiwoA.js";import{Q as ct,a as dt}from"./QHeader-9U2r1eQZ.js";import{u as mt,c as vt,d as ft,Q as le,a as X,b as xe}from"./QCard-CJVgVv7j.js";import{T as pt}from"./TouchPan-boAVZedI.js";import{u as ht,a as bt,b as gt,Q as yt}from"./QPage-DZLj19ZR.js";import{b as ee}from"./format-BvkBI9bc.js";import{Q as Le,a as Ie}from"./QCarousel-DkWL2Jzh.js";import{_ as xt}from"./PeopleDropdown-BNNOB4vA.js";import{_ as kt}from"./CurrencyDropdown-Bim9h-DI.js";import{m as ke}from"./vue3-apexcharts-3XgSRfxt.js";import"./QResizeObserver-iM4bpY_4.js";import"./use-render-cache-rinsAykk.js";import"./selection-vCgmlxrU.js";import"./use-panel-BnrR5xc1.js";import"./use-fullscreen-GLhHCWsP.js";import"./QItemLabel-Rb0KRFLf.js";import"./focusout-DNT5Bt5w.js";import"./scroll-BCWtTLsJ.js";import"./PersonItem-D8oCFOSK.js";import"./ClosePopup-MjfpZGTj.js";const De="q-slider__marker-labels",Ct=n=>({value:n}),wt=({marker:n})=>L("div",{key:n.value,style:n.style,class:n.classes},n.label),ze=[34,37,40,33,39,38],Mt={...ht,...mt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:n=>n>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},St=["pan","update:modelValue","change"];function $t({updateValue:n,updatePosition:u,getDragging:w,formAttrs:i}){const{props:e,emit:S,slots:k,proxy:{$q:x}}=Be(),I=bt(e,x),E=vt(i),Y=M(!1),B=M(!1),q=M(!1),D=M(!1),T=a(()=>e.vertical===!0?"--v":"--h"),H=a(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),z=a(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(x.lang.rtl===!0)),$=a(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),_=a(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),h=a(()=>e.disable!==!0&&e.readonly!==!0&&$.value<_.value),N=a(()=>{if(e.step===0)return s=>s;const t=(String(e.step).trim().split(".")[1]||"").length;return s=>parseFloat(s.toFixed(t))}),R=a(()=>e.step===0?1:e.step),A=a(()=>h.value===!0?e.tabindex||0:-1),J=a(()=>e.max-e.min),te=a(()=>_.value-$.value),G=a(()=>P($.value)),j=a(()=>P(_.value)),Z=a(()=>e.vertical===!0?z.value===!0?"bottom":"top":z.value===!0?"right":"left"),re=a(()=>e.vertical===!0?"height":"width"),oe=a(()=>e.vertical===!0?"width":"height"),ne=a(()=>e.vertical===!0?"vertical":"horizontal"),se=a(()=>{const t={role:"slider","aria-valuemin":$.value,"aria-valuemax":_.value,"aria-orientation":ne.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),ue=a(()=>`q-slider q-slider${T.value} q-slider--${Y.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(h.value===!0?" q-slider--editable":""))+(q.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(I.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+T.value:""));function l(t){const s="q-slider__"+t;return`${s} ${s}${T.value} ${s}${T.value}${H.value}`}function o(t){const s="q-slider__"+t;return`${s} ${s}${T.value}`}const r=a(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),m=a(()=>o("markers")+" absolute overflow-hidden"),f=a(()=>o("track-container")),c=a(()=>l("pin")),v=a(()=>l("label")),b=a(()=>l("text-container")),g=a(()=>l("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),V=a(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),O=a(()=>{const t={[oe.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),U=a(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),W=a(()=>{const t=j.value-G.value,s={[Z.value]:`${100*G.value}%`,[re.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(s.backgroundImage=`url(${e.innerTrackImg}) !important`),s});function ie(t){const{min:s,max:p,step:y}=e;let F=s+t*(p-s);if(y>0){const K=(F-$.value)%y;F+=(Math.abs(K)>=y/2?(K<0?-1:1)*y:0)-K}return F=N.value(F),ee(F,$.value,_.value)}function P(t){return J.value===0?0:(t-e.min)/J.value}function Ne(t,s){const p=Ze(t),y=e.vertical===!0?ee((p.top-s.top)/s.height,0,1):ee((p.left-s.left)/s.width,0,1);return ee(z.value===!0?1-y:y,G.value,j.value)}const we=a(()=>Je(e.markers)===!0?e.markers:R.value),Me=a(()=>{const t=[],s=we.value,p=e.max;let y=e.min;do t.push(y),y+=s;while(y<p);return t.push(p),t}),Se=a(()=>{const t=` ${De}${T.value}-`;return De+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${z.value===!0?"rtl":"ltr"}`}),ce=a(()=>e.markerLabels===!1?null:Re(e.markerLabels).map((t,s)=>({index:s,value:t.value,label:t.label||t.value,classes:Se.value+(t.classes!==void 0?" "+t.classes:""),style:{..._e(t.value),...t.style||{}}}))),$e=a(()=>({markerList:ce.value,markerMap:Pe.value,classes:Se.value,getStyle:_e})),Ae=a(()=>{const t=te.value===0?"2px":100*we.value/te.value;return{...W.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Re(t){if(t===!1)return null;if(t===!0)return Me.value.map(Ct);if(typeof t=="function")return Me.value.map(p=>{const y=t(p);return fe(y)===!0?{...y,value:p}:{value:p,label:y}});const s=({value:p})=>p>=e.min&&p<=e.max;return Array.isArray(t)===!0?t.map(p=>fe(p)===!0?p:{value:p}).filter(s):Object.keys(t).map(p=>{const y=t[p],F=Number(p);return fe(y)===!0?{...y,value:F}:{value:F,label:y}}).filter(s)}function _e(t){return{[Z.value]:`${100*(t-e.min)/J.value}%`}}const Pe=a(()=>{if(e.markerLabels===!1)return null;const t={};return ce.value.forEach(s=>{t[s.value]=s}),t});function Qe(){if(k["marker-label-group"]!==void 0)return k["marker-label-group"]($e.value);const t=k["marker-label"]||wt;return ce.value.map(s=>t({marker:s,...$e.value}))}const je=a(()=>[[pt,Oe,void 0,{[ne.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Oe(t){t.isFinal===!0?(D.value!==void 0&&(u(t.evt),t.touch===!0&&n(!0),D.value=void 0,S("pan","end")),Y.value=!1,q.value=!1):t.isFirst===!0?(D.value=w(t.evt),u(t.evt),n(),Y.value=!0,S("pan","start")):(u(t.evt),n())}function Fe(){q.value=!1}function Ue(t){u(t,w(t)),n(),B.value=!0,Y.value=!0,document.addEventListener("mouseup",de,!0)}function de(){B.value=!1,Y.value=!1,n(!0),Fe(),document.removeEventListener("mouseup",de,!0)}function Ke(t){u(t,w(t)),n(!0)}function Ee(t){ze.includes(t.keyCode)&&n(!0)}function He(t){if(e.vertical===!0)return null;const s=x.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*s-1} * ${e.thumbSize} / 2 + ${50-100*s}%))`}}function We(t){const s=a(()=>B.value===!1&&(q.value===t.focusValue||q.value==="both")?" q-slider--focus":""),p=a(()=>`q-slider__thumb q-slider__thumb${T.value} q-slider__thumb${T.value}-${z.value===!0?"rtl":"ltr"} absolute non-selectable`+s.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),y=a(()=>({width:e.thumbSize,height:e.thumbSize,[Z.value]:`${100*t.ratio.value}%`,zIndex:q.value===t.focusValue?2:void 0})),F=a(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),K=a(()=>He(t.ratio.value)),me=a(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const ve=[L("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[L("path",{d:e.thumbPath})]),L("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ve.push(L("div",{class:c.value+" absolute fit no-pointer-events"+F.value},[L("div",{class:v.value,style:{minWidth:e.thumbSize}},[L("div",{class:b.value,style:K.value},[L("span",{class:me.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&E(ve,"push")),L("div",{class:p.value,style:y.value,...t.getNodeData()},ve)}}function Xe(t,s,p,y){const F=[];e.innerTrackColor!=="transparent"&&F.push(L("div",{key:"inner",class:U.value,style:W.value})),e.selectionColor!=="transparent"&&F.push(L("div",{key:"selection",class:r.value,style:t.value})),e.markers!==!1&&F.push(L("div",{key:"marker",class:m.value,style:Ae.value})),y(F);const K=[et("div",{key:"trackC",class:f.value,tabindex:s.value,...p.value},[L("div",{class:V.value,style:O.value},F)],"slide",h.value,()=>je.value)];if(e.markerLabels!==!1){const me=e.switchMarkerLabelsSide===!0?"unshift":"push";K[me](L("div",{key:"markerL",class:g.value},Qe()))}return K}return Ge(()=>{document.removeEventListener("mouseup",de,!0)}),{state:{active:Y,focus:q,preventFocus:B,dragging:D,editable:h,classes:ue,tabindex:A,attributes:se,roundValueFn:N,keyStep:R,trackLen:J,innerMin:$,innerMinRatio:G,innerMax:_,innerMaxRatio:j,positionProp:Z,sizeProp:re,isReversed:z},methods:{onActivate:Ue,onMobileClick:Ke,onBlur:Fe,onKeyup:Ee,getContent:Xe,getThumbRenderFn:We,convertRatioToModel:ie,convertModelToRatio:P,getDraggingRatio:Ne}}}const _t=()=>({}),Ye=tt({name:"QSlider",props:{...Mt,modelValue:{required:!0,default:null,validator:n=>typeof n=="number"||n===null},labelValue:[String,Number]},emits:St,setup(n,{emit:u}){const{proxy:{$q:w}}=Be(),{state:i,methods:e}=$t({updateValue:T,updatePosition:z,getDragging:H,formAttrs:ft(n)}),S=M(null),k=M(0),x=M(0);function I(){x.value=n.modelValue===null?i.innerMin.value:ee(n.modelValue,i.innerMin.value,i.innerMax.value)}at(()=>`${n.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,I),I();const E=a(()=>e.convertModelToRatio(x.value)),Y=a(()=>i.active.value===!0?k.value:E.value),B=a(()=>{const h={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(Y.value-i.innerMinRatio.value)}%`};return n.selectionImg!==void 0&&(h.backgroundImage=`url(${n.selectionImg}) !important`),h}),q=e.getThumbRenderFn({focusValue:!0,getNodeData:_t,ratio:Y,label:a(()=>n.labelValue!==void 0?n.labelValue:x.value),thumbColor:a(()=>n.thumbColor||n.color),labelColor:a(()=>n.labelColor),labelTextColor:a(()=>n.labelTextColor)}),D=a(()=>i.editable.value!==!0?{}:w.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:$,onBlur:e.onBlur,onKeydown:_,onKeyup:e.onKeyup});function T(h){x.value!==n.modelValue&&u("update:modelValue",x.value),h===!0&&u("change",x.value)}function H(){return S.value.getBoundingClientRect()}function z(h,N=i.dragging.value){const R=e.getDraggingRatio(h,N);x.value=e.convertRatioToModel(R),k.value=n.snap!==!0||n.step===0?R:e.convertModelToRatio(x.value)}function $(){i.focus.value=!0}function _(h){if(ze.includes(h.keyCode)===!1)return;lt(h);const N=([34,33].includes(h.keyCode)?10:1)*i.keyStep.value,R=([34,37,40].includes(h.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(n.vertical===!0?-1:1)*N;x.value=ee(i.roundValueFn.value(x.value+R),i.innerMin.value,i.innerMax.value),T()}return()=>{const h=e.getContent(B,i.tabindex,D,N=>{N.push(q())});return L("div",{ref:S,class:i.classes.value+(n.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":n.modelValue},h)}}}),Ce={getTotalMonths(n,u){if(!n||!u)return{totalMonths:0,monthIndexMap:{}};const w=new Date(n),i=new Date(u),e=w.getFullYear(),S=w.getMonth(),k=i.getFullYear(),x=i.getMonth();return(k-e)*12+(x-S)+1},getTotalYears(n,u){if(!n||!u)return{totalMonths:0,monthIndexMap:{}};const w=new Date(n),i=new Date(u),e=w.getFullYear();return i.getFullYear()-e+1},getMonthIndexMap(n,u){const w=new Date(n),i=w.getFullYear(),e=w.getMonth(),S={};for(let k=0;k<u;k++){const x=i+Math.floor((e+k)/12),I=(e+k)%12;S[`${x}-${I}`]=k}return S},monthIdx2date(n,u){const w=new Date(n),i=w.getFullYear(),e=w.getMonth(),S=i+Math.floor((e+u)/12),k=(e+u)%12;return new Date(S,k,1).toLocaleString("en-US",{month:"short",year:"numeric"})}},Ft={class:"row",style:{flex:"1"}},qt={class:"full-height full-width"},Gt=Object.assign({name:"StatisticsPage"},{__name:"StatisticsPage",setup(n){const u=rt(),w=nt();gt();const i=()=>w.go(-1),e=M(u.user.id),S=a(()=>e.value==="__ALL__"?-1:u.personId2Idx(e.value)),k=u.currentSheet.transactions[u.currentSheetTransactions[u.currentSheetTransactions.length-1]],x=u.currentSheet.transactions[u.currentSheetTransactions[0]],I=Ce.getTotalMonths(k.timestamp,x.timestamp),E=Ce.getTotalYears(k.timestamp,x.timestamp),Y=Ce.getMonthIndexMap(k.timestamp,I),B=M(0),q=M(0),D=M(u.referenceCurrency||u.lastCurrency),T=M(""),H=M(""),z=M(""),$=M(u.convertCurrency),_=M(!0),h=M(1),N=M(1),R=()=>{$.value=$.value?null:u.convertCurrency};ot(()=>{B.value=I-1,q.value=E-1});const A=a(()=>{const l=T.value.split(" ").map(c=>c.trim().toLowerCase()).filter(c=>c.length>0),o=H.value.split(" ").map(c=>c.trim().toLowerCase()).filter(c=>c.length>0),r=z.value.split(" ").map(c=>c.trim().toLowerCase()).filter(c=>c.length>0),m=u.currentSheetTransactions.filter(c=>{const v=u.currentSheet.transactions[c];pe.update(v);const b=(v.name||"").toLowerCase();return!(o.some(g=>b.includes(g))||l.length>0&&!l.concat(r).some(g=>b.includes(g)))}).map(c=>{const v=u.currentSheet.transactions[c];pe.update(v);const b=v.currency;if(b!==D&&!$)return null;let g=0;S.value<0?g=pe.credit(v):S.value<v.credits.length&&(g=v.credits[S.value]);const V=r.some(U=>(v.name||"").toLowerCase().includes(U))?-1:1;g*=V;let O=b;return b!==D.value&&$.value&&(g=$.value(g,b,D.value),O=D),{name:v.name,currency:O,value:g,timestamp:v.timestamp}}).filter(c=>c!==null);let f=0;return m.reverse().map(c=>(f+=c.value,{...c,partialSum:f}))}),J=a(()=>{if(!A.value.length)return 1;let l=I;return _.value||(l=Math.floor(l/12)+1),Math.min(l,12)}),te=a(()=>{if(A.value.length===0)return[];const l=new Date(k.timestamp),o=l.getFullYear(),r=l.getMonth(),m=Array.from({length:I},(v,b)=>{const g=o+Math.floor((r+b)/12),V=(r+b)%12;return{name:`${qe.getMonth(new Date(g,V).getTime())} ${qe.getYear(new Date(g,V).getTime())}`,year:g,month:V,data:[]}});let f=0,c=0;return A.value.forEach((v,b)=>{const g=new Date(v.timestamp),V=`${g.getFullYear()}-${g.getMonth()}`;Y[V]!==f&&(c=b>0?A.value[b-1].partialSum:0),f=Y[V],f!=null&&f<m.length&&m[f].data.push([v.timestamp,(v.partialSum-c)/100,b])}),m}),G=a(()=>{const l=[],o=_.value?1:12;let r=B.value;const m=te.value[r];if(!m)return l;const f=new Date(m.year,m.month,1).getTime();l.push({name:m.name,year:m.year,month:m.month,data:m.data}),r-=o;for(let c=1;c<h.value&&r>=0;c++){const v=te.value[r];if(!v){r-=o;continue}const b=new Date(v.year,v.month,1).getTime(),g=f-b,V=v.data.map(([O,U,W])=>[O+g,U,W]);l.push({name:v.name,year:v.year,month:v.month,data:V}),r-=o}return l.reverse()}),j=a(()=>{if(!A.value.length)return[];const l={};return A.value.forEach(o=>{const r=new Date(o.timestamp),m=r.getFullYear(),f=r.getMonth();l[m]||(l[m]=Array(12).fill(0)),l[m][f]+=o.value/100}),l}),Z=a(()=>{if(!A.value.length)return[];const l=Object.keys(j.value).sort((f,c)=>f-c),o=q.value+1,r=Math.max(0,o-N.value);return l.slice(r,o).reverse().map(f=>({name:f,data:j.value[f]}))}),re=a(()=>{const l=j.value;return!l||!Object.keys(l).length?[]:[{name:"Yearly total",data:Object.keys(l).sort((r,m)=>r-m).map(r=>l[r].reduce((m,f)=>m+f,0))}]}),oe=a(()=>Object.keys(j.value).sort((l,o)=>l-o)),ne=a(()=>({chart:{type:"bar",stacked:!1,toolbar:{show:!1},animations:{enabled:!1},padding:{left:0,right:0,top:0,bottom:0}},plotOptions:{bar:{horizontal:!1,columnWidth:"50%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:oe.value,labels:{show:!0,rotate:-30,trim:!1,style:{fontSize:"12px",fontWeight:500},offsetX:0,offsetY:0,minHeight:25},tickPlacement:"on"},yaxis:{labels:{formatter:l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"k":l.toFixed(0),style:{fontSize:"10px"}}},tooltip:{y:{formatter:l=>l.toFixed(2)}},legend:{show:!1},grid:{padding:{left:0,right:0},row:{colors:["#f3f3f3","transparent"],opacity:.5}},responsive:[{breakpoint:480,options:{xaxis:{labels:{rotate:-45,style:{fontSize:"10px"},minHeight:30}}}}]})),se=a(()=>({chart:{type:"bar",stacked:!1,toolbar:{show:!1},animations:{enabled:!1},padding:{left:0,right:0,top:0,bottom:0}},plotOptions:{bar:{horizontal:!1,columnWidth:"80%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{rotate:-45,trim:!0,style:{fontSize:"10px",fontWeight:500},offsetX:0,offsetY:0,minHeight:30},tickPlacement:"on"},yaxis:{labels:{formatter:l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"k":l.toFixed(0),style:{fontSize:"10px"}}},tooltip:{y:{formatter:l=>l.toFixed(2)}},legend:{show:!0,showForSingleSeries:!0,offsetY:0,offsetX:0},grid:{padding:{left:0,right:0},row:{colors:["#f3f3f3","transparent"],opacity:.5}},responsive:[{breakpoint:480,options:{xaxis:{labels:{rotate:-60,style:{fontSize:"8px"},minHeight:35}}}}]})),ue=a(()=>({chart:{type:"line",zoom:{enabled:!1},toolbar:{show:!1}},xaxis:{type:"datetime",labels:{datetimeUTC:!1,rotate:-45,format:h.value===1?"dd MMM":"dd",trim:!0,style:{fontSize:"10px"}},tickAmount:h.value===1?void 0:31,tooltip:{enabled:!0,formatter:(l,{seriesIndex:o,w:r})=>{var v;const m=(v=r.globals.initialSeries)==null?void 0:v[o];if(!m)return"";const f=new Date(l).getDate().toString().padStart(2,"0"),c=new Date(2e3,m.month).toLocaleDateString(void 0,{month:"short"});return`${f} ${c}`}}},yaxis:{labels:{formatter:l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"k":l.toFixed(0),style:{fontSize:"10px"}}},tooltip:{shared:!1,custom:({seriesIndex:l,dataPointIndex:o,w:r})=>{var U,W;const m=(U=r.globals.initialSeries)==null?void 0:U[l],f=m==null?void 0:m.data;if(!f||!f[o])return'<div style="padding:6px 10px;">No data</div>';const[,,c]=f[o],v=(W=f[0])==null?void 0:W[2],b=A.value[c],g=A.value[v];if(!b||!g)return'<div style="padding:6px 10px;">No data</div>';const V=ie=>{const P=ie/100;return P>=1e6?(P/1e6).toFixed(1)+"M":P>=1e3?(P/1e3).toFixed(1)+"k":P.toFixed(0)},O=b.partialSum-g.partialSum+b.value;return`
      <div style="
        line-height:1.3;
        text-align:left;
        font-size:12px;
        padding:6px 10px;
        border-radius:4px;
        background:#fff;
        color:#000;
        box-shadow:0 2px 6px rgba(0,0,0,0.15);
      ">
        <div style="font-weight:600;">
          ${b.name||"N/A"}
        </div>
        Val: ${V(b.value)}, Tot: ${V(O)}
      </div>
    `}},stroke:{curve:"smooth",width:2},markers:{size:5},legend:{show:!0,showForSingleSeries:!0,offsetY:0,offsetX:0},grid:{padding:{left:10,right:10,top:0,bottom:0}}}));return(l,o)=>(ae(),he(ye,null,[d(dt,{elevated:"",class:"bg-primary text-white"},{default:C(()=>[d(ct,null,{default:C(()=>[d(be,{flat:"",icon:"arrow_back",onClick:i,"aria-label":"Go Back",class:"bg-white text-primary"}),d(ut,{style:{"font-size":"28px"}},{default:C(()=>[...o[10]||(o[10]=[st(" Stats ",-1)])]),_:1}),d(it)]),_:1})]),_:1}),d(yt,{padding:""},{default:C(()=>[d(le,{flat:"",bordered:"",class:"q-mb-md"},{default:C(()=>[d(X,{class:"row items-center justify-center q-gutter-md"},{default:C(()=>[d(xt,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value=r),people:Q(u).currentSheet.people,"sorted-people":Q(u).currentSheetPeople,"all-label":"Cumulative"},null,8,["modelValue","people","sorted-people"])]),_:1}),d(X,{class:"row items-center justify-center q-gutter-md"},{default:C(()=>[d(kt,{modelValue:D.value,"onUpdate:modelValue":o[1]||(o[1]=r=>D.value=r),usedCurrencies:Q(u).currencies,class:"text-subtitle1 full-height",expandable:!1},null,8,["modelValue","usedCurrencies"]),d(be,{icon:$.value!==null?"toggle_on":"toggle_off",label:"Convert",color:$.value!==null?"secondary":"negative",class:"text-white",unelevated:"",onClick:R},null,8,["icon","color"])]),_:1})]),_:1}),d(le,{flat:"",bordered:"",class:"q-mb-md"},{default:C(()=>[d(X,null,{default:C(()=>[o[11]||(o[11]=ge("div",{class:"text-subtitle1 q-mb-sm"},"Filter Keywords",-1)),d(xe,{modelValue:T.value,"onUpdate:modelValue":o[2]||(o[2]=r=>T.value=r),dense:"",outlined:"",label:"Include",placeholder:"Include",class:"q-mb-sm"},null,8,["modelValue"]),d(xe,{modelValue:H.value,"onUpdate:modelValue":o[3]||(o[3]=r=>H.value=r),dense:"",outlined:"",label:"Exclude",placeholder:"Exclude",class:"q-mb-sm"},null,8,["modelValue"]),d(xe,{modelValue:z.value,"onUpdate:modelValue":o[4]||(o[4]=r=>z.value=r),dense:"",outlined:"",label:"Invert",placeholder:"Invert"},null,8,["modelValue"])]),_:1})]),_:1}),d(le,{flat:"",bordered:""},{default:C(()=>[d(X,{class:"row items-center justify-center q-gutter-md q-pb-none"},{default:C(()=>[d(be,{color:_.value?"primary":"secondary",label:_.value?"Last Months":"Years Ago",icon:_.value?"event_repeat":"calendar_today",class:"text-white",unelevated:"",onClick:o[5]||(o[5]=r=>_.value=!_.value)},null,8,["color","label","icon"]),ge("div",Ft,[d(Ye,{modelValue:h.value,"onUpdate:modelValue":o[6]||(o[6]=r=>h.value=r),modelModifiers:{number:!0},min:1,max:J.value,step:1,snap:"",label:"","label-always":"",markers:"",color:"primary",style:{width:"100%"}},null,8,["modelValue","max"])])]),_:1}),ge("div",qt,[d(Le,{modelValue:B.value,"onUpdate:modelValue":o[7]||(o[7]=r=>B.value=r),swipeable:"",animated:"",arrows:"","transition-prev":"slide-right","transition-next":"slide-left","control-color":"primary",class:"no-padding-carousel q-pa-none q-ma-none",style:{height:"220px",overflow:"hidden"}},{default:C(()=>[(ae(!0),he(ye,null,Te(Q(I),r=>(ae(),Ve(Ie,{key:r-1,name:r-1,class:"q-pa-none flex w-full h-full items-center justify-center"},{default:C(()=>[d(Q(ke),{type:"line",options:ue.value,series:B.value===r-1?G.value:[],height:"100%",width:"100%",class:"w-full h-full"},null,8,["options","series"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),_:1}),d(le,{flat:"",bordered:"",class:"q-mt-md"},{default:C(()=>[d(X,null,{default:C(()=>[d(Ye,{modelValue:N.value,"onUpdate:modelValue":o[8]||(o[8]=r=>N.value=r),modelModifiers:{number:!0},min:1,max:Math.min(4,Q(E)),step:1,snap:"",label:"","label-always":"",markers:"",color:"primary",style:{width:"100%"}},null,8,["modelValue","max"])]),_:1}),d(X,null,{default:C(()=>[d(Le,{modelValue:q.value,"onUpdate:modelValue":o[9]||(o[9]=r=>q.value=r),swipeable:"",animated:"",arrows:"","transition-prev":"slide-right","transition-next":"slide-left","control-color":"primary",class:"no-padding-carousel q-pa-none q-ma-none",style:{height:"220px",overflow:"hidden"}},{default:C(()=>[(ae(!0),he(ye,null,Te(Q(E),r=>(ae(),Ve(Ie,{key:r-1,name:r-1,class:"q-pa-none flex w-full h-full items-center justify-center"},{default:C(()=>[d(Q(ke),{type:"bar",options:se.value,series:q.value===r-1?Z.value:[],height:"100%",width:"100%"},null,8,["options","series"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),d(le,{flat:"",bordered:"",class:"q-mt-md"},{default:C(()=>[d(X,null,{default:C(()=>[d(Q(ke),{type:"bar",options:ne.value,series:re.value,height:"100%",width:"100%"},null,8,["options","series"])]),_:1})]),_:1})]),_:1})],64))}});export{Gt as default};
