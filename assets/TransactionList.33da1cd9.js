import{a as x,Q as O}from"./QCard.69fbfe9b.js";import{O as j,a as N,u as r,P as I,v as y,x as s,L as c,U as l,V as t,a9 as C,S as T,W as w,al as B,aD as p,X as V,aE as M,y as f,M as k,Q as z}from"./index.c885f364.js";import{U as q}from"./selection.aea60c8c.js";import{c as U,b as h,d as b,a as E}from"./PersonItem.81a6914e.js";import{Q as R}from"./QSlideItem.76d464ae.js";const $={class:"q-pa-md"},A={key:0,style:{color:"green"}},F={key:1,style:{color:"red"}},W={class:"q-pa-md"},Y={__name:"SummaryCard",props:{summaries:{type:Object,required:!0},selectedPerson:{type:[String],required:!0}},setup(e){const u=j(),g=e,v=N(()=>{const{ans:d,totals:a}=g.summaries;return{detail:d.map((P,m)=>({...P,id:m})),totals:a}}),S=N(()=>Object.entries(v.value.totals).filter(([d,a])=>a>0).map(([d,a])=>q.displayCurrency(d,a)).join(" + ")),i=N(()=>Object.entries(v.value.totals).filter(([d,a])=>a<0).map(([d,a])=>q.displayCurrency(d,-a)).join(" + "));return(d,a)=>(r(),I("div",null,[i.value||S.value?(r(),y(x,{key:0,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>[c("div",$,[i.value?(r(),I("div",A,l(t(u).getName(e.selectedPerson))+" is owed "+l(i.value),1)):C("",!0),S.value?(r(),I("div",F,l(t(u).getName(e.selectedPerson))+" owes "+l(S.value),1)):C("",!0)])]),_:1})):(r(),y(x,{key:1,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>a[0]||(a[0]=[c("div",{class:"q-pa-md"},[c("div",null,"All Settled!")],-1)])),_:1})),v.value&&v.value.detail.length>0?(r(),y(x,{key:2,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>[c("div",W,[(r(!0),I(T,null,w(v.value.detail,o=>(r(),I("div",{key:o.id},[c("div",null,[c("span",null,l(o.amount>0?t(u).getName(e.selectedPerson):t(u).getName(t(u).personIdx2Id(o.person))),1),a[1]||(a[1]=c("span",null," owes ",-1)),c("span",null,l(o.amount<0?t(u).getName(e.selectedPerson):t(u).getName(t(u).personIdx2Id(o.person)))+" \xA0 ",1),c("span",{style:B({color:o.amount>0?"red":"green"})},l(t(q).displayCurrency(o.currency,Math.abs(o.amount))),5)])]))),128))])]),_:1})):C("",!0)]))}},Z={__name:"TransactionList",props:{transactions:{type:Object,required:!0},selectedPerson:{type:String,required:!0},disableRemove:{type:Boolean,default:!1}},emits:["edit","remove"],setup(e,{emit:u}){const g=j(),v=e,S=m=>{setTimeout(()=>m==null?void 0:m(),0)},i=N(()=>g.personId2Idx(v.selectedPerson)),d=N(()=>p.getTransactionList(v.transactions)),a=u,o=m=>{a("edit",m)},P=({reset:m},Q)=>{a("remove",()=>S(m),Q)};return(m,Q)=>(r(),y(E,null,{default:s(()=>[(r(!0),I(T,null,w(d.value,(n,D)=>(r(),y(R,{key:n,clickable:"",class:V(D%2===0?"bg-grey-3":"bg-white"),onClick:L=>o(n),onLeft:L=>P(L,n),"left-color":"red","read-only":""},M({default:s(()=>[f(U,null,{default:s(()=>[f(x,{flat:"",bordered:"",class:"q-ml-sm q-mr-sm q-pl-sm q-pr-sm"},{default:s(()=>[f(O,{class:"column q-pa-none flex justify-center items-center"},{default:s(()=>[c("div",null,l(t(q).getMonth(e.transactions[n].timestamp)),1),c("div",null,l(t(q).getDay(e.transactions[n].timestamp)),1)]),_:2},1024)]),_:2},1024),f(h,null,{default:s(()=>[f(b,null,{default:s(()=>[k(l(t(p).name(e.transactions[n])),1)]),_:2},1024),f(b,{caption:""},{default:s(()=>[k(l(t(g).getName(t(g).personId2Idx(e.transactions[n].payer)))+" paid "+l(t(q).displayCurrency(e.transactions[n].currency,e.transactions[n].amount)),1)]),_:2},1024)]),_:2},1024),f(h,{side:""},{default:s(()=>[t(p).position(e.transactions[n],i.value)>0?(r(),y(b,{key:0,caption:"",style:{color:"green"}},{default:s(()=>[k(l(t(g).getName(e.selectedPerson))+" lent ",1)]),_:1})):C("",!0),t(p).position(e.transactions[n],i.value)<0?(r(),y(b,{key:1,caption:"",style:{color:"red"}},{default:s(()=>[k(l(t(g).getName(e.selectedPerson))+" borrowed ",1)]),_:1})):C("",!0),t(p).position(e.transactions[n],i.value)===0?(r(),y(b,{key:2},{default:s(()=>[k(l(i.value!==e.transactions[n].payer?"Not Involved":"Personal"),1)]),_:2},1024)):(r(),y(b,{key:3,style:B({color:t(p).position(e.transactions[n],i.value)>=0?"green":"red"})},{default:s(()=>[k(l(t(q).displayCurrency(e.transactions[n].currency,Math.abs(t(p).position(e.transactions[n],i.value)))),1)]),_:2},1032,["style"]))]),_:2},1024)]),_:2},1024)]),_:2},[e.disableRemove?void 0:{name:"left",fn:s(()=>[f(z,{name:"delete"})]),key:"0"}]),1032,["class","onClick","onLeft"]))),128))]),_:1}))}};export{Y as _,Z as a};
