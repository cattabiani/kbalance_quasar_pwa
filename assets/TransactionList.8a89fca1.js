import{c as x,Q as O}from"./QPage.9f023bc7.js";import{_ as j,a as S,ag as q,u as r,$ as b,v as y,x as s,X as c,a4 as l,a2 as t,a3 as C,a0 as T,a5 as w,an as B,aE as p,a6 as V,aF as z,y as f,Y as k,Q as M}from"./index.a37d1ab0.js";import{f as $,e as L,g as I,d as E}from"./PersonItem.1bee8759.js";import{Q as F}from"./QSlideItem.05d97f2e.js";const R={class:"q-pa-md"},A={key:0,style:{color:"green"}},U={key:1,style:{color:"red"}},X={class:"q-pa-md"},K={__name:"SummaryCard",props:{summaries:{type:Object,required:!0},selectedPerson:{type:[String],required:!0}},setup(e){const u=j(),g=e,v=S(()=>{const{ans:d,totals:a}=g.summaries;return{detail:d.map((P,m)=>({...P,id:m})),totals:a}}),N=S(()=>Object.entries(v.value.totals).filter(([d,a])=>a>0).map(([d,a])=>q.displayCurrency(d,a)).join(" + ")),i=S(()=>Object.entries(v.value.totals).filter(([d,a])=>a<0).map(([d,a])=>q.displayCurrency(d,-a)).join(" + "));return(d,a)=>(r(),b("div",null,[i.value||N.value?(r(),y(x,{key:0,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>[c("div",R,[i.value?(r(),b("div",A,l(t(u).getName(e.selectedPerson))+" is owed "+l(i.value),1)):C("",!0),N.value?(r(),b("div",U,l(t(u).getName(e.selectedPerson))+" owes "+l(N.value),1)):C("",!0)])]),_:1})):(r(),y(x,{key:1,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>a[0]||(a[0]=[c("div",{class:"q-pa-md"},[c("div",null,"All Settled!")],-1)])),_:1})),v.value&&v.value.detail.length>0?(r(),y(x,{key:2,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>[c("div",X,[(r(!0),b(T,null,w(v.value.detail,o=>(r(),b("div",{key:o.id},[c("div",null,[c("span",null,l(o.amount>0?t(u).getName(e.selectedPerson):t(u).getName(t(u).personIdx2Id(o.person))),1),a[1]||(a[1]=c("span",null," owes ",-1)),c("span",null,l(o.amount<0?t(u).getName(e.selectedPerson):t(u).getName(t(u).personIdx2Id(o.person)))+" \xA0 ",1),c("span",{style:B({color:o.amount>0?"red":"green"})},l(t(q).displayCurrency(o.currency,Math.abs(o.amount))),5)])]))),128))])]),_:1})):C("",!0)]))}},W={__name:"TransactionList",props:{transactions:{type:Object,required:!0},selectedPerson:{type:String,required:!0},disableRemove:{type:Boolean,default:!1}},emits:["edit","remove"],setup(e,{emit:u}){const g=j(),v=e,N=m=>{setTimeout(()=>m==null?void 0:m(),0)},i=S(()=>g.personId2Idx(v.selectedPerson)),d=S(()=>p.getTransactionList(v.transactions)),a=u,o=m=>{a("edit",m)},P=({reset:m},Q)=>{a("remove",()=>N(m),Q)};return(m,Q)=>(r(),y(E,null,{default:s(()=>[(r(!0),b(T,null,w(d.value,(n,D)=>(r(),y(F,{key:n,clickable:"",class:V(D%2===0?"bg-grey-3":"bg-white"),onClick:h=>o(n),onLeft:h=>P(h,n),"left-color":"red","read-only":""},z({default:s(()=>[f($,null,{default:s(()=>[f(x,{flat:"",bordered:"",class:"q-ml-sm q-mr-sm q-pl-sm q-pr-sm"},{default:s(()=>[f(O,{class:"column q-pa-none flex justify-center items-center"},{default:s(()=>[c("div",null,l(t(q).getMonth(e.transactions[n].timestamp)),1),c("div",null,l(t(q).getDay(e.transactions[n].timestamp)),1)]),_:2},1024)]),_:2},1024),f(L,null,{default:s(()=>[f(I,null,{default:s(()=>[k(l(t(p).name(e.transactions[n])),1)]),_:2},1024),f(I,{caption:""},{default:s(()=>[k(l(t(g).getName(t(g).personId2Idx(e.transactions[n].payer)))+" payed "+l(t(q).displayCurrency(e.transactions[n].currency,e.transactions[n].amount)),1)]),_:2},1024)]),_:2},1024),f(L,{side:""},{default:s(()=>[t(p).position(e.transactions[n],i.value)>0?(r(),y(I,{key:0,caption:"",style:{color:"green"}},{default:s(()=>[k(l(t(g).getName(e.selectedPerson))+" lent ",1)]),_:1})):C("",!0),t(p).position(e.transactions[n],i.value)<0?(r(),y(I,{key:1,caption:"",style:{color:"red"}},{default:s(()=>[k(l(t(g).getName(e.selectedPerson))+" borrowed ",1)]),_:1})):C("",!0),t(p).position(e.transactions[n],i.value)===0?(r(),y(I,{key:2},{default:s(()=>[k(l(i.value!==e.transactions[n].payer?"Not Involved":"Personal"),1)]),_:2},1024)):(r(),y(I,{key:3,style:B({color:t(p).position(e.transactions[n],i.value)>=0?"green":"red"})},{default:s(()=>[k(l(t(q).displayCurrency(e.transactions[n].currency,Math.abs(t(p).position(e.transactions[n],i.value)))),1)]),_:2},1032,["style"]))]),_:2},1024)]),_:2},1024)]),_:2},[e.disableRemove?void 0:{name:"left",fn:s(()=>[f(M,{name:"delete"})]),key:"0"}]),1032,["class","onClick","onLeft"]))),128))]),_:1}))}};export{K as _,W as a};
