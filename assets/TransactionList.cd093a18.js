import{a as P,Q as D}from"./QCard.2d65752c.js";import{O as h,a as N,u as r,P as I,v as m,x as a,L as u,W as l,U as t,V as C,S as j,X as w,an as T,aD as g,Y as O,aE as V,y as v,M as k,Q as M}from"./index.0eb7440f.js";import{U as p}from"./selection.a9ae5d48.js";import{c as U,b as L,d as b,a as z}from"./PersonItem.875107dc.js";import{Q as E}from"./QSlideItem.f6a01303.js";const R={class:"q-pa-md"},$={key:0,style:{color:"green"}},A={key:1,style:{color:"red"}},F={class:"q-pa-md"},J={__name:"SummaryCard",props:{summaries:{type:Object,required:!0},selectedPerson:{type:[String],required:!0}},setup(e){const i=h(),f=e,y=N(()=>{const{ans:o,totals:s}=f.summaries;return{detail:o.map((q,x)=>({...q,id:x})),totals:s}}),d=N(()=>Object.entries(y.value.totals).filter(([o,s])=>s>0).map(([o,s])=>p.displayCurrency(o,s)).join(" + ")),S=N(()=>Object.entries(y.value.totals).filter(([o,s])=>s<0).map(([o,s])=>p.displayCurrency(o,-s)).join(" + "));return(o,s)=>(r(),I("div",null,[S.value||d.value?(r(),m(P,{key:0,class:"q-my-md q-mr-md q-ml-md"},{default:a(()=>[u("div",R,[S.value?(r(),I("div",$,l(t(i).getName(e.selectedPerson))+" is owed "+l(S.value),1)):C("",!0),d.value?(r(),I("div",A,l(t(i).getName(e.selectedPerson))+" owes "+l(d.value),1)):C("",!0)])]),_:1})):(r(),m(P,{key:1,class:"q-my-md q-mr-md q-ml-md"},{default:a(()=>s[0]||(s[0]=[u("div",{class:"q-pa-md"},[u("div",null,"All Settled!")],-1)])),_:1})),y.value&&y.value.detail.length>0?(r(),m(P,{key:2,class:"q-my-md q-mr-md q-ml-md"},{default:a(()=>[u("div",F,[(r(!0),I(j,null,w(y.value.detail,c=>(r(),I("div",{key:c.id},[u("div",null,[u("span",null,l(c.amount>0?t(i).getName(e.selectedPerson):t(i).getName(t(i).personIdx2Id(c.person))),1),s[1]||(s[1]=u("span",null," owes ",-1)),u("span",null,l(c.amount<0?t(i).getName(e.selectedPerson):t(i).getName(t(i).personIdx2Id(c.person)))+" \xA0 ",1),u("span",{style:T({color:c.amount>0?"red":"green"})},l(t(p).displayCurrency(c.currency,Math.abs(c.amount))),5)])]))),128))])]),_:1})):C("",!0)]))}},K={__name:"TransactionList",props:{transactions:{type:Object,required:!0},selectedPerson:{type:String,required:!0},disableRemove:{type:Boolean,default:!1}},emits:["edit","remove"],setup(e,{emit:i}){const f=h(),y=e,d=N(()=>f.personId2Idx(y.selectedPerson)),S=N(()=>g.getTransactionList(y.transactions)),o=i,s=q=>{o("edit",q)},c=({reset:q},x)=>{o("remove",()=>q(),x)};return(q,x)=>(r(),m(z,null,{default:a(()=>[(r(!0),I(j,null,w(S.value,(n,B)=>(r(),m(E,{key:n,clickable:"",class:O(B%2===0?"bg-grey-3":"bg-white"),onClick:Q=>s(n),onLeft:Q=>c(Q,n),"left-color":"red","read-only":""},V({default:a(()=>[v(U,null,{default:a(()=>[v(P,{flat:"",bordered:"",class:"q-ml-sm q-mr-sm q-pl-sm q-pr-sm"},{default:a(()=>[v(D,{class:"column q-pa-none flex justify-center items-center"},{default:a(()=>[u("div",null,l(t(p).getMonth(e.transactions[n].timestamp)),1),u("div",null,l(t(p).getDay(e.transactions[n].timestamp)),1)]),_:2},1024)]),_:2},1024),v(L,null,{default:a(()=>[v(b,null,{default:a(()=>[k(l(t(g).name(e.transactions[n])),1)]),_:2},1024),v(b,{caption:""},{default:a(()=>[k(l(t(f).getName(t(f).personId2Idx(e.transactions[n].payer)))+" paid "+l(t(p).displayCurrency(e.transactions[n].currency,e.transactions[n].amount)),1)]),_:2},1024)]),_:2},1024),v(L,{side:""},{default:a(()=>[t(g).position(e.transactions[n],d.value)>0?(r(),m(b,{key:0,caption:"",style:{color:"green"}},{default:a(()=>[k(l(t(f).getName(e.selectedPerson))+" lent ",1)]),_:1})):C("",!0),t(g).position(e.transactions[n],d.value)<0?(r(),m(b,{key:1,caption:"",style:{color:"red"}},{default:a(()=>[k(l(t(f).getName(e.selectedPerson))+" borrowed ",1)]),_:1})):C("",!0),t(g).position(e.transactions[n],d.value)===0?(r(),m(b,{key:2},{default:a(()=>[k(l(d.value!==e.transactions[n].payer?"Not Involved":"Personal"),1)]),_:2},1024)):(r(),m(b,{key:3,style:T({color:t(g).position(e.transactions[n],d.value)>=0?"green":"red"})},{default:a(()=>[k(l(t(p).displayCurrency(e.transactions[n].currency,Math.abs(t(g).position(e.transactions[n],d.value)))),1)]),_:2},1032,["style"]))]),_:2},1024)]),_:2},1024)]),_:2},[e.disableRemove?void 0:{name:"left",fn:a(()=>[v(M,{name:"delete"})]),key:"0"}]),1032,["class","onClick","onLeft"]))),128))]),_:1}))}};export{J as _,K as a};
