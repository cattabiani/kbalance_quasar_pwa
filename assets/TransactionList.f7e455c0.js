import{a as P,Q as O}from"./QCard.aa206edc.js";import{O as j,a as N,u as l,P as b,v as m,x as s,L as u,W as r,U as e,V as x,S as T,X as w,an as B,aD as g,Y as h,aE as V,y as f,M as k,Q as M}from"./index.a21627e7.js";import{U as p}from"./selection.8b17a8a7.js";import{c as U,b as L,d as I,a as z}from"./PersonItem.37e70309.js";import{Q as E}from"./QSlideItem.938f93ef.js";const R={class:"q-pa-md"},$={key:0,style:{color:"green"}},A={key:1,style:{color:"red"}},F={class:"q-pa-md"},J={__name:"SummaryCard",props:{summaries:{type:Object,required:!0},selectedPerson:{type:[String],required:!0}},setup(t){const i=j(),y=t,v=N(()=>{const{ans:o,totals:n}=y.summaries;return{detail:o.map((q,C)=>({...q,id:C})),totals:n}}),d=N(()=>Object.entries(v.value.totals).filter(([o,n])=>n>0).map(([o,n])=>p.displayCurrency(o,n)).join(" + ")),S=N(()=>Object.entries(v.value.totals).filter(([o,n])=>n<0).map(([o,n])=>p.displayCurrency(o,-n)).join(" + "));return(o,n)=>(l(),b("div",null,[S.value||d.value?(l(),m(P,{key:0,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>[u("div",R,[S.value?(l(),b("div",$,r(e(i).getName(t.selectedPerson))+" is owed "+r(S.value),1)):x("",!0),d.value?(l(),b("div",A,r(e(i).getName(t.selectedPerson))+" owes "+r(d.value),1)):x("",!0)])]),_:1})):(l(),m(P,{key:1,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>n[0]||(n[0]=[u("div",{class:"q-pa-md"},[u("div",null,"All Settled!")],-1)])),_:1})),v.value&&v.value.detail.length>0?(l(),m(P,{key:2,class:"q-my-md q-mr-md q-ml-md"},{default:s(()=>[u("div",F,[(l(!0),b(T,null,w(v.value.detail,c=>(l(),b("div",{key:c.id},[u("div",null,[u("span",null,r(c.amount>0?e(i).getName(t.selectedPerson):e(i).getName(e(i).personIdx2Id(c.person))),1),n[1]||(n[1]=u("span",null," owes ",-1)),u("span",null,r(c.amount<0?e(i).getName(t.selectedPerson):e(i).getName(e(i).personIdx2Id(c.person)))+" \xA0 ",1),u("span",{style:B({color:c.amount>0?"red":"green"})},r(e(p).displayCurrency(c.currency,Math.abs(c.amount))),5)])]))),128))])]),_:1})):x("",!0)]))}},K={__name:"TransactionList",props:{transactions:{type:Object,required:!0},selectedPerson:{type:String,required:!0},disableRemove:{type:Boolean,default:!1}},emits:["edit","remove"],setup(t,{emit:i}){const y=j(),v=t,d=N(()=>y.personId2Idx(v.selectedPerson)),S=N(()=>g.getTransactionList(v.transactions)),o=i,n=q=>{o("edit",q)},c=({reset:q},C)=>{o("remove",()=>q(),C)};return(q,C)=>(l(),m(z,null,{default:s(()=>[(l(!0),b(T,null,w(S.value,(a,D)=>(l(),m(E,{key:a,clickable:"",class:h(D%2===0?"bg-grey-3":"bg-white"),onClick:Q=>n(a),onLeft:Q=>c(Q,a),"left-color":"red","read-only":""},V({default:s(()=>[f(U,null,{default:s(()=>[f(P,{flat:"",bordered:"",class:"q-ml-sm q-mr-sm q-pl-sm q-pr-sm"},{default:s(()=>[f(O,{class:"column q-pa-none flex justify-center items-center"},{default:s(()=>[u("div",null,r(e(p).getMonth(t.transactions[a].timestamp)),1),u("div",null,r(e(p).getDay(t.transactions[a].timestamp)),1)]),_:2},1024)]),_:2},1024),f(L,null,{default:s(()=>[f(I,{class:h({"text-grey":e(y).pendingTransactionIds.has(a)})},{default:s(()=>[k(r(e(g).name(t.transactions[a])),1)]),_:2},1032,["class"]),f(I,{caption:""},{default:s(()=>[k(r(e(y).getName(e(y).personId2Idx(t.transactions[a].payer)))+" paid "+r(e(p).displayCurrency(t.transactions[a].currency,t.transactions[a].amount)),1)]),_:2},1024)]),_:2},1024),f(L,{side:""},{default:s(()=>[e(g).position(t.transactions[a],d.value)>0?(l(),m(I,{key:0,caption:"",style:{color:"green"}},{default:s(()=>[k(r(e(y).getName(t.selectedPerson))+" lent ",1)]),_:1})):x("",!0),e(g).position(t.transactions[a],d.value)<0?(l(),m(I,{key:1,caption:"",style:{color:"red"}},{default:s(()=>[k(r(e(y).getName(t.selectedPerson))+" borrowed ",1)]),_:1})):x("",!0),e(g).position(t.transactions[a],d.value)===0?(l(),m(I,{key:2},{default:s(()=>[k(r(d.value!==t.transactions[a].payer?"Not Involved":"Personal"),1)]),_:2},1024)):(l(),m(I,{key:3,style:B({color:e(g).position(t.transactions[a],d.value)>=0?"green":"red"})},{default:s(()=>[k(r(e(p).displayCurrency(t.transactions[a].currency,Math.abs(e(g).position(t.transactions[a],d.value)))),1)]),_:2},1032,["style"]))]),_:2},1024)]),_:2},1024)]),_:2},[t.disableRemove?void 0:{name:"left",fn:s(()=>[f(M,{name:"delete"})]),key:"0"}]),1032,["class","onClick","onLeft"]))),128))]),_:1}))}};export{J as _,K as a};
