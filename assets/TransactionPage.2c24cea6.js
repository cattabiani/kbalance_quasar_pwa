import{r as N,a as F,h as D,c as re,aF as pe,aG as be,Q as ye,s as xe,b as Se,g as ee,E as Z,aK as L,w as J,aL as qe,u as _,v as O,U as C,aM as Ee,x as b,y as m,P as T,S as ae,X as Ve,C as X,Y as le,M as me,W as M,V as A,N as G,O as Pe,o as Ne,T as Oe,L as q,aD as K,am as Me}from"./index.d430fed9.js";import{Q as Re}from"./QSpace.b27a6f50.js";import{Q as Ae,a as Te}from"./QHeader.50b6229a.js";import{j as Fe,n as _e,b as oe,a as te,Q as W}from"./QCard.856f8ba7.js";import{e as Le,a as se,c as B,b as Q,Q as Be,_ as Qe}from"./PersonItem.28e93747.js";import{u as ue,a as ce,Q as ze,b as Ge}from"./QPage.11878be1.js";import{C as H}from"./ClosePopup.c0a72f04.js";import{_ as he}from"./PeopleDropdown.7c775115.js";import{c as Ue}from"./index.56516dd5.js";import{U as fe}from"./selection.29893b92.js";import"./QResizeObserver.f23801ef.js";import"./focusout.e573f33a.js";import"./scroll.92c3c71a.js";function ke(n,t){const e=N(null),a=F(()=>n.disable===!0?null:D("span",{ref:e,class:"no-outline",tabindex:-1}));function i(c){const s=t.value;c!==void 0&&c.type.indexOf("key")===0?s!==null&&document.activeElement!==s&&s.contains(document.activeElement)===!0&&s.focus():e.value!==null&&(c===void 0||s!==null&&s.contains(c.target)===!0)&&e.value.focus()}return{refocusTargetEl:a,refocusTarget:i}}var De={xs:30,sm:35,md:40,lg:50,xl:60};const je=()=>D("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[D("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),D("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var We=re({name:"QRadio",props:{...ue,...pe,...Fe,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(n,{slots:t,emit:e}){const{proxy:a}=ee(),i=ce(n,a.$q),c=be(n,De),s=N(null),{refocusTargetEl:v,refocusTarget:d}=ke(n,s),h=F(()=>L(n.modelValue)===L(n.val)),l=F(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(n.disable===!0?" disabled":"")+(i.value===!0?" q-radio--dark":"")+(n.dense===!0?" q-radio--dense":"")+(n.leftLabel===!0?" reverse":"")),r=F(()=>{const S=n.color!==void 0&&(n.keepColor===!0||h.value===!0)?` text-${n.color}`:"";return`q-radio__inner relative-position q-radio__inner--${h.value===!0?"truthy":"falsy"}${S}`}),u=F(()=>(h.value===!0?n.checkedIcon:n.uncheckedIcon)||null),f=F(()=>n.disable===!0?-1:n.tabindex||0),g=F(()=>{const S={type:"radio"};return n.name!==void 0&&Object.assign(S,{".checked":h.value===!0,"^checked":h.value===!0?"checked":void 0,name:n.name,value:n.val}),S}),k=_e(g);function I(S){S!==void 0&&(Z(S),d(S)),n.disable!==!0&&h.value!==!0&&e("update:modelValue",n.val,S)}function P(S){(S.keyCode===13||S.keyCode===32)&&Z(S)}function y(S){(S.keyCode===13||S.keyCode===32)&&I(S)}Object.assign(a,{set:I});const E=je();return()=>{const S=u.value!==null?[D("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[D(ye,{class:"q-radio__icon",name:u.value})])]:[E];n.disable!==!0&&k(S,"unshift"," q-radio__native q-ma-none q-pa-none");const w=[D("div",{class:r.value,style:c.value,"aria-hidden":"true"},S)];v.value!==null&&w.push(v.value);const p=n.label!==void 0?xe(t.default,[n.label]):Se(t.default);return p!==void 0&&w.push(D("div",{class:"q-radio__label q-anchor--skip"},p)),D("div",{ref:s,class:l.value,tabindex:f.value,role:"radio","aria-label":n.label,"aria-checked":h.value===!0?"true":"false","aria-disabled":n.disable===!0?"true":void 0,onClick:I,onKeydown:P,onKeyup:y},w)}}});const Xe={...ue,...pe,...Fe,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:n=>n==="tf"||n==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Ke=["update:modelValue"];function He(n,t){const{props:e,slots:a,emit:i,proxy:c}=ee(),{$q:s}=c,v=ce(e,s),d=N(null),{refocusTargetEl:h,refocusTarget:l}=ke(e,d),r=be(e,De),u=F(()=>e.val!==void 0&&Array.isArray(e.modelValue)),f=F(()=>{const V=L(e.val);return u.value===!0?e.modelValue.findIndex(z=>L(z)===V):-1}),g=F(()=>u.value===!0?f.value!==-1:L(e.modelValue)===L(e.trueValue)),k=F(()=>u.value===!0?f.value===-1:L(e.modelValue)===L(e.falseValue)),I=F(()=>g.value===!1&&k.value===!1),P=F(()=>e.disable===!0?-1:e.tabindex||0),y=F(()=>`q-${n} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(v.value===!0?` q-${n}--dark`:"")+(e.dense===!0?` q-${n}--dense`:"")+(e.leftLabel===!0?" reverse":"")),E=F(()=>{const V=g.value===!0?"truthy":k.value===!0?"falsy":"indet",z=e.color!==void 0&&(e.keepColor===!0||(n==="toggle"?g.value===!0:k.value!==!0))?` text-${e.color}`:"";return`q-${n}__inner relative-position non-selectable q-${n}__inner--${V}${z}`}),S=F(()=>{const V={type:"checkbox"};return e.name!==void 0&&Object.assign(V,{".checked":g.value,"^checked":g.value===!0?"checked":void 0,name:e.name,value:u.value===!0?e.val:e.trueValue}),V}),w=_e(S),p=F(()=>{const V={tabindex:P.value,role:n==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":I.value===!0?"mixed":g.value===!0?"true":"false"};return e.disable===!0&&(V["aria-disabled"]="true"),V});function o(V){V!==void 0&&(Z(V),l(V)),e.disable!==!0&&i("update:modelValue",x(),V)}function x(){if(u.value===!0){if(g.value===!0){const V=e.modelValue.slice();return V.splice(f.value,1),V}return e.modelValue.concat([e.val])}if(g.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(k.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function $(V){(V.keyCode===13||V.keyCode===32)&&Z(V)}function R(V){(V.keyCode===13||V.keyCode===32)&&o(V)}const we=t(g,I);return Object.assign(c,{toggle:o}),()=>{const V=we();e.disable!==!0&&w(V,"unshift",` q-${n}__native absolute q-ma-none q-pa-none`);const z=[D("div",{class:E.value,style:r.value,"aria-hidden":"true"},V)];h.value!==null&&z.push(h.value);const de=e.label!==void 0?xe(a.default,[e.label]):Se(a.default);return de!==void 0&&z.push(D("div",{class:`q-${n}__label q-anchor--skip`},de)),D("div",{ref:d,class:y.value,...p.value,onClick:o,onKeydown:$,onKeyup:R},z)}}const Ye=()=>D("div",{key:"svg",class:"q-checkbox__bg absolute"},[D("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[D("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),D("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ze=re({name:"QCheckbox",props:Xe,emits:Ke,setup(n){const t=Ye();function e(a,i){const c=F(()=>(a.value===!0?n.checkedIcon:i.value===!0?n.indeterminateIcon:n.uncheckedIcon)||null);return()=>c.value!==null?[D("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[D(ye,{class:"q-checkbox__icon",name:c.value})])]:[t]}return He("checkbox",e)}});/**
 * Vue Currency Input 3.1.0
 * (c) 2018-2024 Matthias Stiller
 * @license MIT
 */var j;(function(n){n.symbol="symbol",n.narrowSymbol="narrowSymbol",n.code="code",n.name="name",n.hidden="hidden"})(j||(j={}));var U;(function(n){n.precision="precision",n.thousands="thousands",n.millions="millions",n.billions="billions"})(U||(U={}));const Y=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ce=n=>n.replace(/^0+(0$|[^0])/,"$1"),ie=(n,t)=>(n.match(new RegExp(Y(t),"g"))||[]).length,Je=(n,t)=>n.substring(0,n.indexOf(t)),Ie=[",",".","\u066B","\u3002"],ve="(0|[1-9]\\d*)";class et{constructor(t){var e,a,i,c,s,v;const{currency:d,currencyDisplay:h,locale:l,precision:r,accountingSign:u,useGrouping:f}=t;this.locale=l,this.options={currency:d,useGrouping:f,style:"currency",currencySign:u?"accounting":void 0,currencyDisplay:h!==j.hidden?h:void 0};const g=new Intl.NumberFormat(l,this.options),k=g.formatToParts(123456);this.currency=(e=k.find(({type:y})=>y==="currency"))===null||e===void 0?void 0:e.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(y=>y.toLocaleString(l)),this.decimalSymbol=(a=k.find(({type:y})=>y==="decimal"))===null||a===void 0?void 0:a.value,this.groupingSymbol=(i=k.find(({type:y})=>y==="group"))===null||i===void 0?void 0:i.value,this.minusSign=(c=g.formatToParts(-1).find(({type:y})=>y==="minusSign"))===null||c===void 0?void 0:c.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof r=="number"?this.minimumFractionDigits=this.maximumFractionDigits=r:(this.minimumFractionDigits=(s=r==null?void 0:r.min)!==null&&s!==void 0?s:g.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(v=r==null?void 0:r.max)!==null&&v!==void 0?v:g.resolvedOptions().maximumFractionDigits);const I=y=>Je(y,this.digits[1]),P=y=>y.substring(y.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=I(g.format(1)),this.suffix=P(g.format(1)),this.negativePrefix=I(g.format(-1)),this.negativeSuffix=P(g.format(-1))}parse(t){if(t){const e=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrency(t,e),t=this.stripSignLiterals(t);const a=this.decimalSymbol?`(?:${Y(this.decimalSymbol)}(\\d*))?`:"",i=this.stripGroupingSeparator(t).match(new RegExp(`^${ve}${a}$`));if(i&&this.isValidIntegerFormat(this.decimalSymbol?t.split(this.decimalSymbol)[0]:t,Number(i[1])))return Number(`${e?"-":""}${this.onlyDigits(i[1])}.${this.onlyDigits(i[2]||"")}`)}return null}isValidIntegerFormat(t,e){const a={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...a,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...a,useGrouping:!1})),!1)].includes(t)}format(t,e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return t!=null?t.toLocaleString(this.locale,{...this.options,...e}):""}toFraction(t){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(t.substring(1)).substring(0,this.maximumFractionDigits)}`}isFractionIncomplete(t){return!!this.normalizeDigits(this.stripGroupingSeparator(t)).match(new RegExp(`^${ve}${Y(this.decimalSymbol)}$`))}isNegative(t){return t.startsWith(this.negativePrefix)||this.minusSign===void 0&&(t.startsWith("(")||t.startsWith("-"))||this.minusSign!==void 0&&t.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(t,e){return`${e?this.negativePrefix:this.prefix}${t}${e?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(t){return this.groupingSymbol!==void 0?t.replace(new RegExp(Y(this.groupingSymbol),"g"),""):t}stripSignLiterals(t){return this.minusSign!==void 0?t.replace("-",this.minusSign).replace(this.minusSign,""):t.replace(/[-()]/g,"")}stripCurrency(t,e){return t.replace(e?this.negativePrefix:this.prefix,"").replace(e?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(t,e){return Ie.forEach(a=>{t=t.substring(0,e)+t.substring(e).replace(a,this.decimalSymbol)}),t}normalizeDigits(t){return this.digits[0]!=="0"&&this.digits.forEach((e,a)=>{t=t.replace(new RegExp(e,"g"),String(a))}),t}onlyDigits(t){return this.normalizeDigits(t).replace(/\D+/g,"")}onlyLocaleDigits(t){return t.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class $e{constructor(t){this.currencyFormat=t}}class tt extends $e{conformToMask(t,e=""){const a=this.currencyFormat.isNegative(t),i=g=>g===""&&a&&!(this.currencyFormat.minusSign===void 0?e===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:e===this.currencyFormat.negativePrefix),c=g=>{if(i(g))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(g))return g;if(g.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(g)}return null};let s=t;s=this.currencyFormat.stripCurrency(s,a),s=this.currencyFormat.stripSignLiterals(s);const v=c(s);if(v!=null)return this.currencyFormat.insertCurrency(v,a);const[d,...h]=s.split(this.currencyFormat.decimalSymbol),l=Ce(this.currencyFormat.onlyDigits(d)),r=this.currencyFormat.onlyDigits(h.join("")).substring(0,this.currencyFormat.maximumFractionDigits),u=h.length>0&&r.length===0,f=l===""&&a&&(this.currencyFormat.minusSign===void 0?e===t.slice(0,-2)+this.currencyFormat.negativeSuffix:e===t.slice(0,-1));return u||f||i(l)?e:l.match(/\d+/)?{numberValue:Number(`${a?"-":""}${l}.${r}`),fractionDigits:r}:""}}class it extends $e{conformToMask(t,e=""){if(t===""||this.currencyFormat.parse(e)===0&&this.currencyFormat.stripCurrency(e,!0).slice(0,-1)===this.currencyFormat.stripCurrency(t,!0))return"";const a=this.currencyFormat.isNegative(t),i=this.currencyFormat.stripSignLiterals(t)===""?-0:Number(`${a?"-":""}${Ce(this.currencyFormat.onlyDigits(t))}`)/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:i,fractionDigits:i.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const nt={locale:void 0,currency:void 0,currencyDisplay:void 0,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,useGrouping:void 0,valueScaling:void 0};class at{constructor(t){this.el=t.el,this.onInput=t.onInput,this.onChange=t.onChange,this.addEventListener(),this.init(t.options)}setOptions(t){this.init(t),this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.onChange(this.getValue())}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(t){const e=this.valueScaling!==void 0&&t!=null?this.toFloat(t,this.valueScaling):t;e!==this.numberValue&&(this.format(this.currencyFormat.format(this.validateValueRange(e))),this.onChange(this.getValue()))}init(t){this.options={...nt,...t},this.options.autoDecimalDigits&&(this.options.hideNegligibleDecimalDigitsOnFocus=!1),this.el.getAttribute("inputmode")||this.el.setAttribute("inputmode",this.options.autoDecimalDigits?"numeric":"decimal"),this.currencyFormat=new et(this.options),this.numberMask=this.options.autoDecimalDigits?new it(this.currencyFormat):new tt(this.currencyFormat);const e={[U.precision]:this.currencyFormat.maximumFractionDigits,[U.thousands]:3,[U.millions]:6,[U.billions]:9};this.valueScaling=this.options.valueScaling?e[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==U.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var t,e;let a=this.toFloat(-Number.MAX_SAFE_INTEGER);return((t=this.options.valueRange)===null||t===void 0?void 0:t.min)!==void 0&&(a=Math.max((e=this.options.valueRange)===null||e===void 0?void 0:e.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),a}getMaxValue(){var t,e;let a=this.toFloat(Number.MAX_SAFE_INTEGER);return((t=this.options.valueRange)===null||t===void 0?void 0:t.max)!==void 0&&(a=Math.min((e=this.options.valueRange)===null||e===void 0?void 0:e.max,this.toFloat(Number.MAX_SAFE_INTEGER))),a}toFloat(t,e){return t/Math.pow(10,e!=null?e:this.valueScalingFractionDigits)}toInteger(t,e){return Number(t.toFixed(e!=null?e:this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(t){return t!=null?Math.min(Math.max(t,this.minValue),this.maxValue):t}format(t,e=!1){if(t!=null){this.decimalSymbolInsertedAt!==void 0&&(t=this.currencyFormat.normalizeDecimalSeparator(t,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const a=this.numberMask.conformToMask(t,this.formattedValue);let i;if(typeof a=="object"){const{numberValue:c,fractionDigits:s}=a;let{maximumFractionDigits:v,minimumFractionDigits:d}=this.currencyFormat;this.focus?d=e?s.replace(/0+$/,"").length:Math.min(v,s.length):Number.isInteger(c)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||d===0)&&(d=v=0),i=this.toInteger(Math.abs(c))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(c,{useGrouping:this.options.useGrouping!==!1&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:d,maximumFractionDigits:v})}else i=a;this.maxValue<=0&&!this.currencyFormat.isNegative(i)&&this.currencyFormat.parse(i)!==0&&(i=i.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(i=i.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix)),(this.options.currencyDisplay===j.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(i=i.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=i,this.numberValue=this.currencyFormat.parse(i)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.onInput(this.getValue())}addEventListener(){this.el.addEventListener("input",t=>{const{value:e,selectionStart:a}=this.el,i=t;if(a&&i.data&&Ie.includes(i.data)&&(this.decimalSymbolInsertedAt=a-1),this.format(e),this.focus&&a!=null){const c=()=>{const{prefix:s,suffix:v,decimalSymbol:d,maximumFractionDigits:h,groupingSymbol:l}=this.currencyFormat;let r=e.length-a;const u=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(e.startsWith("(")||e.startsWith("-"))&&!e.endsWith(")"))return u-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(a).length:1;if(this.formattedValue.substring(a,1)===l&&ie(this.formattedValue,l)===ie(e,l)+1)return u-r-1;if(u<r)return a;if(d!==void 0&&e.indexOf(d)!==-1){const f=e.indexOf(d)+1;if(Math.abs(u-e.length)>1&&a<=f)return this.formattedValue.indexOf(d)+1;!this.options.autoDecimalDigits&&a>f&&this.currencyFormat.onlyDigits(e.substring(f)).length-1===h&&(r-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===j.hidden?u-r:Math.max(u-Math.max(r,v.length),s.length)};this.setCaretPosition(c())}}),this.el.addEventListener("focus",()=>{this.focus=!0,this.numberValueOnFocus=this.numberValue,setTimeout(()=>{const{value:t,selectionStart:e,selectionEnd:a}=this.el;if(this.format(t,this.options.hideNegligibleDecimalDigitsOnFocus),e!=null&&a!=null&&Math.abs(e-a)>0)this.setCaretPosition(0,this.el.value.length);else if(e!=null){const i=this.getCaretPositionOnFocus(t,e);this.setCaretPosition(i)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.numberValueOnFocus!==this.numberValue&&this.onChange(this.getValue())})}getCaretPositionOnFocus(t,e){if(this.numberValue==null)return e;const{prefix:a,negativePrefix:i,suffix:c,negativeSuffix:s,groupingSymbol:v,currency:d}=this.currencyFormat,h=this.numberValue<0,l=h?i:a,r=l.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===j.hidden){if(h){if(e<=1)return 1;if(t.endsWith(")")&&e>t.indexOf(")"))return this.formattedValue.length-1}}else{const f=h?s.length:c.length;if(e>=t.length-f)return this.formattedValue.length-f;if(e<r)return r}let u=e;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==j.hidden&&e>=r&&d!==void 0&&l.includes(d)&&(u-=r,h&&(u+=1)),this.options.hideGroupingSeparatorOnFocus&&v!==void 0&&(u-=ie(t.substring(0,e),v)),u}setCaretPosition(t,e=t){this.el.setSelectionRange(t,e)}}const lt=n=>n!=null&&n.matches("input")?n:n==null?void 0:n.querySelector("input");function st(n,t){var e,a,i,c;let s;const v=N(null),d=N(null),h=N(null),l=ee(),r=(l==null?void 0:l.emit)||((a=(e=l==null?void 0:l.proxy)===null||e===void 0?void 0:e.$emit)===null||a===void 0?void 0:a.bind(l==null?void 0:l.proxy)),u=(l==null?void 0:l.props)||((i=l==null?void 0:l.proxy)===null||i===void 0?void 0:i.$props),f=qe.startsWith("3"),g=f&&((c=l==null?void 0:l.attrs.modelModifiers)===null||c===void 0?void 0:c.lazy),k=F(()=>u==null?void 0:u[f?"modelValue":"value"]),I=f?"update:modelValue":"input",P=g?"update:modelValue":"change";return J(v,y=>{var E;if(y){const S=lt((E=y==null?void 0:y.$el)!==null&&E!==void 0?E:y);S?(s=new at({el:S,options:n,onInput:w=>{!g&&t!==!1&&k.value!==w.number&&(r==null||r(I,w.number)),h.value=w.number,d.value=w.formatted},onChange:w=>{t!==!1&&(r==null||r(P,w.number))}}),s.setValue(k.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')}else s=null}),{inputRef:v,numberValue:h,formattedValue:d,setValue:y=>s==null?void 0:s.setValue(y),setOptions:y=>s==null?void 0:s.setOptions(y)}}const ge={__name:"CurrencyInput",props:{modelValue:Number,currency:String,label:String},emits:["change","update:modelValue"],setup(n,{emit:t}){const e=n,{inputRef:a,formattedValue:i,setValue:c,setOptions:s}=st({currency:e.currency,currencyDisplay:"hidden",valueScaling:"precision",valueRange:{min:0,max:void 0},autoSign:!0});return J(()=>e.modelValue,v=>{c(v)}),J(()=>e.currency,v=>{s({currency:v})}),(v,d)=>(_(),O(oe,{ref_key:"inputRef",ref:a,modelValue:C(i),"onUpdate:modelValue":d[0]||(d[0]=h=>Ee(i)?i.value=h:null),outlined:"",label:e.label,onFocus:d[1]||(d[1]=h=>C(a).select())},null,8,["modelValue","label"]))}},rt={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},ne={xs:2,sm:4,md:8,lg:16,xl:24};var ot=re({name:"QSeparator",props:{...ue,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(n){const t=ee(),e=ce(n,t.proxy.$q),a=F(()=>n.vertical===!0?"vertical":"horizontal"),i=F(()=>` q-separator--${a.value}`),c=F(()=>n.inset!==!1?`${i.value}-${rt[n.inset]}`:""),s=F(()=>`q-separator${i.value}${c.value}`+(n.color!==void 0?` bg-${n.color}`:"")+(e.value===!0?" q-separator--dark":"")),v=F(()=>{const d={};if(n.size!==void 0&&(d[n.vertical===!0?"width":"height"]=n.size),n.spaced!==!1){const h=n.spaced===!0?`${ne.md}px`:n.spaced in ne?`${ne[n.spaced]}px`:n.spaced,l=n.vertical===!0?["Left","Right"]:["Top","Bottom"];d[`margin${l[0]}`]=d[`margin${l[1]}`]=h}return d});return()=>D("hr",{class:s.value,style:v.value,"aria-orientation":a.value})}});const ut={__name:"CurrencyDropdown",props:{modelValue:String,usedCurrencies:{type:Set,default:()=>new Set}},emits:["update:modelValue"],setup(n,{emit:t}){const e=n,a=t,i=N(e.modelValue),c=N(e.usedCurrencies.size>0),s=N(""),v=Ue.data.map(l=>({label:`${l.code} - ${l.currency}`,value:l.code})),d=F(()=>{var u;let l=e.usedCurrencies.size===0||!c.value?v:v.filter(({value:f})=>e.usedCurrencies.has(f));const r=(u=s.value)==null?void 0:u.toLowerCase();return r&&(l=l.filter(({label:f})=>f.toLowerCase().includes(r))),l});J(()=>e.modelValue,l=>{i.value=l});function h(l){i.value=l,a("update:modelValue",l)}return(l,r)=>(_(),O(G,{label:i.value||"Select currency",outline:"","icon-right":"arrow_drop_down",dense:"",class:"text-subtitle1",style:{height:"56px"}},{default:b(()=>[m(Le,{anchor:"bottom left",self:"top left",onBeforeShow:r[2]||(r[2]=u=>c.value=e.usedCurrencies.size>0)},{default:b(()=>[m(se,null,{default:b(()=>[m(B,null,{default:b(()=>[m(Q,null,{default:b(()=>[m(oe,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=u=>s.value=u),debounce:"300",label:"Search currencies",placeholder:"Type to filter",dense:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),(_(!0),T(ae,null,Ve(d.value,(u,f)=>X((_(),O(B,{key:u.value,class:le(f%2===0?"bg-white":"bg-grey-2"),clickable:"",onClick:g=>h(u.value)},{default:b(()=>[m(Q,null,{default:b(()=>[me(M(u.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[H]])),128)),c.value?(_(),O(ot,{key:0})):A("",!0),c.value?(_(),O(B,{key:1,clickable:"",onClick:r[1]||(r[1]=u=>c.value=!1)},{default:b(()=>[m(Q,null,{default:b(()=>r[3]||(r[3]=[me("More...")])),_:1})]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1},8,["label"]))}},ct={class:"q-gutter-none"},dt={class:"text-center"},mt={class:"q-gutter-none"},ht={class:"text-center"},ft={key:0,class:"text-center text-caption text-green"},vt={class:"q-gutter-none"},gt={class:"text-center"},pt={key:0,class:"text-center text-caption text-green"},bt={class:"q-gutter-none"},yt={class:"text-center"},xt={key:0,class:"text-center text-caption text-red"},St={class:"q-gutter-none"},Vt={class:"text-center"},Ft={key:0,class:"text-center text-caption text-red"},_t={class:"q-mr-sx",style:{display:"flex"}},At={__name:"TransactionPage",setup(n){const t=Ge(),e=Pe(),a=Oe(),i=N(e.getEditableTransaction()),c=N(!1),s=N(null),v=N(!1);Ne(()=>{var p;(p=s.value)==null||p.focus()});const d=F({get:()=>e.personIdx2Id(i.value.payer)||"",set:p=>{i.value.payer=e.personId2Idx(p)}}),h=F({get:()=>{const p=i.value.debts.map((o,x)=>o.isDebtor?x:-1).filter(o=>o!==-1);return p.length===1?e.personIdx2Id(p[0]):null},set:p=>{const o=e.personId2Idx(p);i.value.debts.forEach((x,$)=>{x.isDebtor=$===o}),E(!1)}}),l=()=>{if(h.value!==null){if(d.value===h.value)return;const p=e.personId2Idx(d.value),o=e.personId2Idx(h.value);i.value.payer=o,i.value.debts.forEach((x,$)=>{x.isDebtor=$===p}),E(!1)}},r=e.currentSheetPeople.find(p=>p!==e.user.id),u=e.currentSheetPeople.findIndex(p=>p!==e.user.id),f=e.currentSheetPeople.findIndex(p=>p===e.user.id),g=F(()=>K.state(i.value)),k=(p,o)=>{switch(p){case 0:return(o===f?"You are":`${e.getName(r)} is`)+" owed the full amount";case 1:return(o===f?"You":e.getName(r))+" paid, split equally";default:return"Custom"}},I=(p,o)=>{const x=p===0?i.value.amount:(i.value.amount+i.value.amount%2)/2;return o===f?`${e.getName(r)} owes you ${fe.displayCurrency(i.value.currency,x)}`:`You owe ${e.getName(r)} ${fe.displayCurrency(i.value.currency,x)}`},P=p=>{switch(p){case 0:i.value.payer=f,i.value.debts[0].isDebtor=!0,i.value.debts[1].isDebtor=!0;break;case 1:i.value.payer=f,i.value.debts[f].isDebtor=!1,i.value.debts[u].isDebtor=!0;break;case 2:i.value.payer=u,i.value.debts[0].isDebtor=!0,i.value.debts[1].isDebtor=!0;break;case 3:i.value.payer=u,i.value.debts[f].isDebtor=!0,i.value.debts[u].isDebtor=!1;break;default:return}E(!0)},y=p=>{v.value||(v.value=!0,K.clearOwedAmounts(i.value,p)),K.fillLastOwedAmount(i.value)&&t.notify("The amount has been increased to match the sum of the shares.")},E=p=>{(p||!v.value)&&(v.value=!1,K.split(i.value))},S=()=>{e.transactionId=null,a.go(-1)},w=async()=>{try{K.check(i.value),await e.addTransaction(i.value),e.transactionId=null,S()}catch(p){t.notify({message:p.message||p,color:"negative"});return}};return(p,o)=>(_(),T(ae,null,[m(Ae,{elevated:"",class:"bg-primary text-white"},{default:b(()=>[m(Te,null,{default:b(()=>[m(G,{flat:"",icon:"arrow_back",onClick:S,"aria-label":"Go Back",class:"bg-white text-primary"}),m(Re),m(G,{flat:"",icon:c.value?"visibility_off":"visibility",label:c.value?"Hide":"Show",onClick:o[0]||(o[0]=x=>c.value=!c.value),class:"q-ml-md bg-white text-primary","aria-label":"Toggle active state"},null,8,["icon","label"]),m(G,{flat:"",icon:"done",label:"Confirm",onClick:w,class:"q-ml-md bg-secondary text-white","aria-label":"Save"})]),_:1})]),_:1}),m(ze,null,{default:b(()=>[m(te,{class:"q-my-md q-mr-md q-ml-md"},{default:b(()=>[m(W,null,{default:b(()=>[m(oe,{ref_key:"nameInput",ref:s,modelValue:i.value.name,"onUpdate:modelValue":o[1]||(o[1]=x=>i.value.name=x),label:"Transaction Name",outlined:"",onFocus:o[2]||(o[2]=x=>s.value.select())},null,8,["modelValue"])]),_:1}),m(W,{class:"row",style:{"align-items":"center"}},{default:b(()=>[m(ut,{modelValue:i.value.currency,"onUpdate:modelValue":o[3]||(o[3]=x=>i.value.currency=x),usedCurrencies:C(e).currencies,class:"q-mr-md"},null,8,["modelValue","usedCurrencies"]),m(ge,{modelValue:i.value.amount,"onUpdate:modelValue":[o[4]||(o[4]=x=>i.value.amount=x),o[5]||(o[5]=x=>E(!0))],currency:"XXX",style:{flex:"1"},label:"Amount"},null,8,["modelValue"])]),_:1})]),_:1}),m(te,{class:"q-my-md q-mr-md q-ml-md"},{default:b(()=>[i.value.debts.length===2?(_(),O(W,{key:0,class:"column items-center"},{default:b(()=>[m(Be,{class:"full-width"},{label:b(()=>[q("div",ct,[q("div",dt,M(k(g.value,i.value.payer)),1),g.value!==-1&&i.value.amount!==0?(_(),T("div",{key:0,class:le(["text-center text-caption",i.value.payer===C(f)?"text-green":"text-red"])},M(I(g.value,i.value.payer)),3)):A("",!0)])]),default:b(()=>[m(se,null,{default:b(()=>[X((_(),O(B,{clickable:"",class:"bg-white",onClick:o[6]||(o[6]=x=>P(0))},{default:b(()=>[m(Q,null,{default:b(()=>[q("div",mt,[q("div",ht,M(k(1,C(f))),1),i.value.amount?(_(),T("div",ft,M(I(1,C(f))),1)):A("",!0)])]),_:1})]),_:1})),[[H]]),X((_(),O(B,{clickable:"",class:"bg-grey-3",onClick:o[7]||(o[7]=x=>P(1))},{default:b(()=>[m(Q,null,{default:b(()=>[q("div",vt,[q("div",gt,M(k(0,C(f))),1),i.value.amount?(_(),T("div",pt,M(I(0,C(f))),1)):A("",!0)])]),_:1})]),_:1})),[[H]]),X((_(),O(B,{clickable:"",class:"bg-white",onClick:o[8]||(o[8]=x=>P(2))},{default:b(()=>[m(Q,null,{default:b(()=>[q("div",bt,[q("div",yt,M(k(1,C(u))),1),i.value.amount?(_(),T("div",xt,M(I(1,C(u))),1)):A("",!0)])]),_:1})]),_:1})),[[H]]),X((_(),O(B,{clickable:"",class:"bg-grey-3",onClick:o[9]||(o[9]=x=>P(3))},{default:b(()=>[m(Q,null,{default:b(()=>[q("div",St,[q("div",Vt,M(k(0,C(u))),1),i.value.amount?(_(),T("div",Ft,M(I(0,C(u))),1)):A("",!0)])]),_:1})]),_:1})),[[H]])]),_:1})]),_:1})]),_:1})):A("",!0),i.value.debts.length>2?(_(),O(W,{key:1,class:"row justify-center items-center"},{default:b(()=>[m(he,{class:"col-auto q-mr-sm",modelValue:d.value,"onUpdate:modelValue":o[10]||(o[10]=x=>d.value=x),people:C(e).currentSheet.people,"sorted-people":C(e).currentSheetPeople,"fixed-label":"Payer",dense:""},null,8,["modelValue","people","sorted-people"]),m(G,{class:"col-auto q-mr-sm",icon:"swap_horiz",onClick:l}),m(he,{class:"col-auto",modelValue:h.value,"onUpdate:modelValue":o[11]||(o[11]=x=>h.value=x),people:C(e).currentSheet.people,"sorted-people":C(e).currentSheetPeople,"fixed-label":"Debtor",dense:""},null,8,["modelValue","people","sorted-people"])]),_:1})):A("",!0),m(W,{class:"row justify-center items-center"},{default:b(()=>[m(G,{flat:"",icon:"done",label:"Cancel",onClick:w,class:"q-mr-md bg-red text-white","aria-label":"Save"}),m(G,{flat:"",icon:"done",label:"Confirm",onClick:w,class:"bg-secondary text-white","aria-label":"Save"})]),_:1})]),_:1}),m(te,{class:"q-my-md q-mr-md q-ml-md q-mb-md"},{default:b(()=>[m(W,null,{default:b(()=>o[15]||(o[15]=[q("div",{class:"row text-bold"},[q("div",{class:"col-auto q-mr-md q-ml-sm"},"Payer"),q("div",{class:"col"},"Person"),q("div",{class:"col-auto q-mr-md"},"Owes"),q("div",{class:"col-auto q-mr-lg"},"Amount")],-1)])),_:1}),m(se,{class:"q-my-md q-mr-md q-ml-md"},{default:b(()=>[(_(!0),T(ae,null,Ve(C(e).currentSheetPeople,(x,$)=>X((_(),O(B,{key:$,class:le($%2===0?"bg-grey-1":"bg-white")},{default:b(()=>[q("div",_t,[m(We,{modelValue:i.value.payer,"onUpdate:modelValue":[o[12]||(o[12]=R=>i.value.payer=R),o[13]||(o[13]=R=>E(!1))],val:$},null,8,["modelValue","val"])]),m(Q,null,{default:b(()=>[m(Qe,{id:x,"max-length":13},null,8,["id"])]),_:2},1024),m(Ze,{modelValue:i.value.debts[$].isDebtor,"onUpdate:modelValue":[R=>i.value.debts[$].isDebtor=R,o[14]||(o[14]=R=>E(!0))],class:"q-mr-sx"},null,8,["modelValue","onUpdate:modelValue"]),m(ge,{modelValue:i.value.debts[$].owedAmount,"onUpdate:modelValue":R=>i.value.debts[$].owedAmount=R,currency:"XXX",style:{maxWidth:"100px"},onBlur:R=>y($)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["class"])),[[Me,C(e).currentSheet.people[x].active||c.value||i.value.payer===$||i.value.debts[$].owedAmount!==0||i.value.debts[$].isDebtor]])),128))]),_:1})]),_:1})]),_:1})],64))}};export{At as default};
