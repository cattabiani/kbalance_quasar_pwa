import{r as R,a as V,h as D,c as de,aG as me,aH as he,Q as fe,s as ve,b as ge,g as ie,E as J,aI as M,w as te,aJ as Ce,u as $,v as A,U as k,aK as qe,O as we,o as $e,P as L,y as v,x as F,S as ae,T as Ee,N as z,L as w,W as O,Y as se,V as B,C as j,X as Pe,aD as W,ao as Ne}from"./index.ec662202.js";import{Q as Oe}from"./QSpace.981c0074.js";import{Q as Re,a as Ae}from"./QHeader.cf1088a6.js";import{f as pe,g as be,b as ye,a as Z,Q as U}from"./QCard.4fdd370d.js";import{Q as Me,a as le,c as X,b as H,_ as Te}from"./PersonItem.d0098eb6.js";import{u as xe,a as Se,Q as Le,b as Be}from"./QPage.7b6fc516.js";import{_ as Qe,C as K}from"./CurrencyDropdown.c6386d12.js";import{_ as re}from"./PeopleDropdown.0fb9f9c1.js";import{U as oe}from"./selection.5c6da155.js";import"./QResizeObserver.718754a6.js";import"./focusout.9c96a0a1.js";import"./scroll.3e57f568.js";function Fe(n,t){const e=R(null),a=V(()=>n.disable===!0?null:D("span",{ref:e,class:"no-outline",tabindex:-1}));function i(u){const l=t.value;u!==void 0&&u.type.indexOf("key")===0?l!==null&&document.activeElement!==l&&l.contains(document.activeElement)===!0&&l.focus():e.value!==null&&(u===void 0||l!==null&&l.contains(u.target)===!0)&&e.value.focus()}return{refocusTargetEl:a,refocusTarget:i}}var Ve={xs:30,sm:35,md:40,lg:50,xl:60};const Ge=()=>D("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[D("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),D("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var ze=de({name:"QRadio",props:{...xe,...me,...pe,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(n,{slots:t,emit:e}){const{proxy:a}=ie(),i=Se(n,a.$q),u=he(n,Ve),l=R(null),{refocusTargetEl:g,refocusTarget:f}=Fe(n,l),m=V(()=>M(n.modelValue)===M(n.val)),r=V(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(n.disable===!0?" disabled":"")+(i.value===!0?" q-radio--dark":"")+(n.dense===!0?" q-radio--dense":"")+(n.leftLabel===!0?" reverse":"")),o=V(()=>{const x=n.color!==void 0&&(n.keepColor===!0||m.value===!0)?` text-${n.color}`:"";return`q-radio__inner relative-position q-radio__inner--${m.value===!0?"truthy":"falsy"}${x}`}),c=V(()=>(m.value===!0?n.checkedIcon:n.uncheckedIcon)||null),p=V(()=>n.disable===!0?-1:n.tabindex||0),h=V(()=>{const x={type:"radio"};return n.name!==void 0&&Object.assign(x,{".checked":m.value===!0,"^checked":m.value===!0?"checked":void 0,name:n.name,value:n.val}),x}),_=be(h);function I(x){x!==void 0&&(J(x),f(x)),n.disable!==!0&&m.value!==!0&&e("update:modelValue",n.val,x)}function P(x){(x.keyCode===13||x.keyCode===32)&&J(x)}function b(x){(x.keyCode===13||x.keyCode===32)&&I(x)}Object.assign(a,{set:I});const E=Ge();return()=>{const x=c.value!==null?[D("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[D(fe,{class:"q-radio__icon",name:c.value})])]:[E];n.disable!==!0&&_(x,"unshift"," q-radio__native q-ma-none q-pa-none");const q=[D("div",{class:o.value,style:u.value,"aria-hidden":"true"},x)];g.value!==null&&q.push(g.value);const d=n.label!==void 0?ve(t.default,[n.label]):ge(t.default);return d!==void 0&&q.push(D("div",{class:"q-radio__label q-anchor--skip"},d)),D("div",{ref:l,class:r.value,tabindex:p.value,role:"radio","aria-label":n.label,"aria-checked":m.value===!0?"true":"false","aria-disabled":n.disable===!0?"true":void 0,onClick:I,onKeydown:P,onKeyup:b},q)}}});const Ue={...xe,...me,...pe,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:n=>n==="tf"||n==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},je=["update:modelValue"];function We(n,t){const{props:e,slots:a,emit:i,proxy:u}=ie(),{$q:l}=u,g=Se(e,l),f=R(null),{refocusTargetEl:m,refocusTarget:r}=Fe(e,f),o=he(e,Ve),c=V(()=>e.val!==void 0&&Array.isArray(e.modelValue)),p=V(()=>{const S=M(e.val);return c.value===!0?e.modelValue.findIndex(T=>M(T)===S):-1}),h=V(()=>c.value===!0?p.value!==-1:M(e.modelValue)===M(e.trueValue)),_=V(()=>c.value===!0?p.value===-1:M(e.modelValue)===M(e.falseValue)),I=V(()=>h.value===!1&&_.value===!1),P=V(()=>e.disable===!0?-1:e.tabindex||0),b=V(()=>`q-${n} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(g.value===!0?` q-${n}--dark`:"")+(e.dense===!0?` q-${n}--dense`:"")+(e.leftLabel===!0?" reverse":"")),E=V(()=>{const S=h.value===!0?"truthy":_.value===!0?"falsy":"indet",T=e.color!==void 0&&(e.keepColor===!0||(n==="toggle"?h.value===!0:_.value!==!0))?` text-${e.color}`:"";return`q-${n}__inner relative-position non-selectable q-${n}__inner--${S}${T}`}),x=V(()=>{const S={type:"checkbox"};return e.name!==void 0&&Object.assign(S,{".checked":h.value,"^checked":h.value===!0?"checked":void 0,name:e.name,value:c.value===!0?e.val:e.trueValue}),S}),q=be(x),d=V(()=>{const S={tabindex:P.value,role:n==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":I.value===!0?"mixed":h.value===!0?"true":"false"};return e.disable===!0&&(S["aria-disabled"]="true"),S});function s(S){S!==void 0&&(J(S),r(S)),e.disable!==!0&&i("update:modelValue",y(),S)}function y(){if(c.value===!0){if(h.value===!0){const S=e.modelValue.slice();return S.splice(p.value,1),S}return e.modelValue.concat([e.val])}if(h.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(_.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function C(S){(S.keyCode===13||S.keyCode===32)&&J(S)}function N(S){(S.keyCode===13||S.keyCode===32)&&s(S)}const Ie=t(h,I);return Object.assign(u,{toggle:s}),()=>{const S=Ie();e.disable!==!0&&q(S,"unshift",` q-${n}__native absolute q-ma-none q-pa-none`);const T=[D("div",{class:E.value,style:o.value,"aria-hidden":"true"},S)];m.value!==null&&T.push(m.value);const ne=e.label!==void 0?ve(a.default,[e.label]):ge(a.default);return ne!==void 0&&T.push(D("div",{class:`q-${n}__label q-anchor--skip`},ne)),D("div",{ref:f,class:b.value,...d.value,onClick:s,onKeydown:C,onKeyup:N},T)}}const Xe=()=>D("div",{key:"svg",class:"q-checkbox__bg absolute"},[D("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[D("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),D("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var He=de({name:"QCheckbox",props:Ue,emits:je,setup(n){const t=Xe();function e(a,i){const u=V(()=>(a.value===!0?n.checkedIcon:i.value===!0?n.indeterminateIcon:n.uncheckedIcon)||null);return()=>u.value!==null?[D("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[D(fe,{class:"q-checkbox__icon",name:u.value})])]:[t]}return We("checkbox",e)}});/**
 * Vue Currency Input 3.1.0
 * (c) 2018-2024 Matthias Stiller
 * @license MIT
 */var G;(function(n){n.symbol="symbol",n.narrowSymbol="narrowSymbol",n.code="code",n.name="name",n.hidden="hidden"})(G||(G={}));var Q;(function(n){n.precision="precision",n.thousands="thousands",n.millions="millions",n.billions="billions"})(Q||(Q={}));const Y=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),_e=n=>n.replace(/^0+(0$|[^0])/,"$1"),ee=(n,t)=>(n.match(new RegExp(Y(t),"g"))||[]).length,Ke=(n,t)=>n.substring(0,n.indexOf(t)),ke=[",",".","\u066B","\u3002"],ue="(0|[1-9]\\d*)";class Ye{constructor(t){var e,a,i,u,l,g;const{currency:f,currencyDisplay:m,locale:r,precision:o,accountingSign:c,useGrouping:p}=t;this.locale=r,this.options={currency:f,useGrouping:p,style:"currency",currencySign:c?"accounting":void 0,currencyDisplay:m!==G.hidden?m:void 0};const h=new Intl.NumberFormat(r,this.options),_=h.formatToParts(123456);this.currency=(e=_.find(({type:b})=>b==="currency"))===null||e===void 0?void 0:e.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(b=>b.toLocaleString(r)),this.decimalSymbol=(a=_.find(({type:b})=>b==="decimal"))===null||a===void 0?void 0:a.value,this.groupingSymbol=(i=_.find(({type:b})=>b==="group"))===null||i===void 0?void 0:i.value,this.minusSign=(u=h.formatToParts(-1).find(({type:b})=>b==="minusSign"))===null||u===void 0?void 0:u.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof o=="number"?this.minimumFractionDigits=this.maximumFractionDigits=o:(this.minimumFractionDigits=(l=o==null?void 0:o.min)!==null&&l!==void 0?l:h.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(g=o==null?void 0:o.max)!==null&&g!==void 0?g:h.resolvedOptions().maximumFractionDigits);const I=b=>Ke(b,this.digits[1]),P=b=>b.substring(b.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=I(h.format(1)),this.suffix=P(h.format(1)),this.negativePrefix=I(h.format(-1)),this.negativeSuffix=P(h.format(-1))}parse(t){if(t){const e=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrency(t,e),t=this.stripSignLiterals(t);const a=this.decimalSymbol?`(?:${Y(this.decimalSymbol)}(\\d*))?`:"",i=this.stripGroupingSeparator(t).match(new RegExp(`^${ue}${a}$`));if(i&&this.isValidIntegerFormat(this.decimalSymbol?t.split(this.decimalSymbol)[0]:t,Number(i[1])))return Number(`${e?"-":""}${this.onlyDigits(i[1])}.${this.onlyDigits(i[2]||"")}`)}return null}isValidIntegerFormat(t,e){const a={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...a,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...a,useGrouping:!1})),!1)].includes(t)}format(t,e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return t!=null?t.toLocaleString(this.locale,{...this.options,...e}):""}toFraction(t){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(t.substring(1)).substring(0,this.maximumFractionDigits)}`}isFractionIncomplete(t){return!!this.normalizeDigits(this.stripGroupingSeparator(t)).match(new RegExp(`^${ue}${Y(this.decimalSymbol)}$`))}isNegative(t){return t.startsWith(this.negativePrefix)||this.minusSign===void 0&&(t.startsWith("(")||t.startsWith("-"))||this.minusSign!==void 0&&t.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(t,e){return`${e?this.negativePrefix:this.prefix}${t}${e?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(t){return this.groupingSymbol!==void 0?t.replace(new RegExp(Y(this.groupingSymbol),"g"),""):t}stripSignLiterals(t){return this.minusSign!==void 0?t.replace("-",this.minusSign).replace(this.minusSign,""):t.replace(/[-()]/g,"")}stripCurrency(t,e){return t.replace(e?this.negativePrefix:this.prefix,"").replace(e?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(t,e){return ke.forEach(a=>{t=t.substring(0,e)+t.substring(e).replace(a,this.decimalSymbol)}),t}normalizeDigits(t){return this.digits[0]!=="0"&&this.digits.forEach((e,a)=>{t=t.replace(new RegExp(e,"g"),String(a))}),t}onlyDigits(t){return this.normalizeDigits(t).replace(/\D+/g,"")}onlyLocaleDigits(t){return t.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class De{constructor(t){this.currencyFormat=t}}class Je extends De{conformToMask(t,e=""){const a=this.currencyFormat.isNegative(t),i=h=>h===""&&a&&!(this.currencyFormat.minusSign===void 0?e===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:e===this.currencyFormat.negativePrefix),u=h=>{if(i(h))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(h))return h;if(h.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(h)}return null};let l=t;l=this.currencyFormat.stripCurrency(l,a),l=this.currencyFormat.stripSignLiterals(l);const g=u(l);if(g!=null)return this.currencyFormat.insertCurrency(g,a);const[f,...m]=l.split(this.currencyFormat.decimalSymbol),r=_e(this.currencyFormat.onlyDigits(f)),o=this.currencyFormat.onlyDigits(m.join("")).substring(0,this.currencyFormat.maximumFractionDigits),c=m.length>0&&o.length===0,p=r===""&&a&&(this.currencyFormat.minusSign===void 0?e===t.slice(0,-2)+this.currencyFormat.negativeSuffix:e===t.slice(0,-1));return c||p||i(r)?e:r.match(/\d+/)?{numberValue:Number(`${a?"-":""}${r}.${o}`),fractionDigits:o}:""}}class Ze extends De{conformToMask(t,e=""){if(t===""||this.currencyFormat.parse(e)===0&&this.currencyFormat.stripCurrency(e,!0).slice(0,-1)===this.currencyFormat.stripCurrency(t,!0))return"";const a=this.currencyFormat.isNegative(t),i=this.currencyFormat.stripSignLiterals(t)===""?-0:Number(`${a?"-":""}${_e(this.currencyFormat.onlyDigits(t))}`)/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:i,fractionDigits:i.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const et={locale:void 0,currency:void 0,currencyDisplay:void 0,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,useGrouping:void 0,valueScaling:void 0};class tt{constructor(t){this.el=t.el,this.onInput=t.onInput,this.onChange=t.onChange,this.addEventListener(),this.init(t.options)}setOptions(t){this.init(t),this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.onChange(this.getValue())}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(t){const e=this.valueScaling!==void 0&&t!=null?this.toFloat(t,this.valueScaling):t;e!==this.numberValue&&(this.format(this.currencyFormat.format(this.validateValueRange(e))),this.onChange(this.getValue()))}init(t){this.options={...et,...t},this.options.autoDecimalDigits&&(this.options.hideNegligibleDecimalDigitsOnFocus=!1),this.el.getAttribute("inputmode")||this.el.setAttribute("inputmode",this.options.autoDecimalDigits?"numeric":"decimal"),this.currencyFormat=new Ye(this.options),this.numberMask=this.options.autoDecimalDigits?new Ze(this.currencyFormat):new Je(this.currencyFormat);const e={[Q.precision]:this.currencyFormat.maximumFractionDigits,[Q.thousands]:3,[Q.millions]:6,[Q.billions]:9};this.valueScaling=this.options.valueScaling?e[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==Q.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var t,e;let a=this.toFloat(-Number.MAX_SAFE_INTEGER);return((t=this.options.valueRange)===null||t===void 0?void 0:t.min)!==void 0&&(a=Math.max((e=this.options.valueRange)===null||e===void 0?void 0:e.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),a}getMaxValue(){var t,e;let a=this.toFloat(Number.MAX_SAFE_INTEGER);return((t=this.options.valueRange)===null||t===void 0?void 0:t.max)!==void 0&&(a=Math.min((e=this.options.valueRange)===null||e===void 0?void 0:e.max,this.toFloat(Number.MAX_SAFE_INTEGER))),a}toFloat(t,e){return t/Math.pow(10,e!=null?e:this.valueScalingFractionDigits)}toInteger(t,e){return Number(t.toFixed(e!=null?e:this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(t){return t!=null?Math.min(Math.max(t,this.minValue),this.maxValue):t}format(t,e=!1){if(t!=null){this.decimalSymbolInsertedAt!==void 0&&(t=this.currencyFormat.normalizeDecimalSeparator(t,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const a=this.numberMask.conformToMask(t,this.formattedValue);let i;if(typeof a=="object"){const{numberValue:u,fractionDigits:l}=a;let{maximumFractionDigits:g,minimumFractionDigits:f}=this.currencyFormat;this.focus?f=e?l.replace(/0+$/,"").length:Math.min(g,l.length):Number.isInteger(u)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||f===0)&&(f=g=0),i=this.toInteger(Math.abs(u))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(u,{useGrouping:this.options.useGrouping!==!1&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:f,maximumFractionDigits:g})}else i=a;this.maxValue<=0&&!this.currencyFormat.isNegative(i)&&this.currencyFormat.parse(i)!==0&&(i=i.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(i=i.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix)),(this.options.currencyDisplay===G.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(i=i.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=i,this.numberValue=this.currencyFormat.parse(i)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.onInput(this.getValue())}addEventListener(){this.el.addEventListener("input",t=>{const{value:e,selectionStart:a}=this.el,i=t;if(a&&i.data&&ke.includes(i.data)&&(this.decimalSymbolInsertedAt=a-1),this.format(e),this.focus&&a!=null){const u=()=>{const{prefix:l,suffix:g,decimalSymbol:f,maximumFractionDigits:m,groupingSymbol:r}=this.currencyFormat;let o=e.length-a;const c=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(e.startsWith("(")||e.startsWith("-"))&&!e.endsWith(")"))return c-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(a).length:1;if(this.formattedValue.substring(a,1)===r&&ee(this.formattedValue,r)===ee(e,r)+1)return c-o-1;if(c<o)return a;if(f!==void 0&&e.indexOf(f)!==-1){const p=e.indexOf(f)+1;if(Math.abs(c-e.length)>1&&a<=p)return this.formattedValue.indexOf(f)+1;!this.options.autoDecimalDigits&&a>p&&this.currencyFormat.onlyDigits(e.substring(p)).length-1===m&&(o-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===G.hidden?c-o:Math.max(c-Math.max(o,g.length),l.length)};this.setCaretPosition(u())}}),this.el.addEventListener("focus",()=>{this.focus=!0,this.numberValueOnFocus=this.numberValue,setTimeout(()=>{const{value:t,selectionStart:e,selectionEnd:a}=this.el;if(this.format(t,this.options.hideNegligibleDecimalDigitsOnFocus),e!=null&&a!=null&&Math.abs(e-a)>0)this.setCaretPosition(0,this.el.value.length);else if(e!=null){const i=this.getCaretPositionOnFocus(t,e);this.setCaretPosition(i)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.numberValueOnFocus!==this.numberValue&&this.onChange(this.getValue())})}getCaretPositionOnFocus(t,e){if(this.numberValue==null)return e;const{prefix:a,negativePrefix:i,suffix:u,negativeSuffix:l,groupingSymbol:g,currency:f}=this.currencyFormat,m=this.numberValue<0,r=m?i:a,o=r.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===G.hidden){if(m){if(e<=1)return 1;if(t.endsWith(")")&&e>t.indexOf(")"))return this.formattedValue.length-1}}else{const p=m?l.length:u.length;if(e>=t.length-p)return this.formattedValue.length-p;if(e<o)return o}let c=e;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==G.hidden&&e>=o&&f!==void 0&&r.includes(f)&&(c-=o,m&&(c+=1)),this.options.hideGroupingSeparatorOnFocus&&g!==void 0&&(c-=ee(t.substring(0,e),g)),c}setCaretPosition(t,e=t){this.el.setSelectionRange(t,e)}}const it=n=>n!=null&&n.matches("input")?n:n==null?void 0:n.querySelector("input");function nt(n,t){var e,a,i,u;let l;const g=R(null),f=R(null),m=R(null),r=ie(),o=(r==null?void 0:r.emit)||((a=(e=r==null?void 0:r.proxy)===null||e===void 0?void 0:e.$emit)===null||a===void 0?void 0:a.bind(r==null?void 0:r.proxy)),c=(r==null?void 0:r.props)||((i=r==null?void 0:r.proxy)===null||i===void 0?void 0:i.$props),p=Ce.startsWith("3"),h=p&&((u=r==null?void 0:r.attrs.modelModifiers)===null||u===void 0?void 0:u.lazy),_=V(()=>c==null?void 0:c[p?"modelValue":"value"]),I=p?"update:modelValue":"input",P=h?"update:modelValue":"change";return te(g,b=>{var E;if(b){const x=it((E=b==null?void 0:b.$el)!==null&&E!==void 0?E:b);x?(l=new tt({el:x,options:n,onInput:q=>{!h&&t!==!1&&_.value!==q.number&&(o==null||o(I,q.number)),m.value=q.number,f.value=q.formatted},onChange:q=>{t!==!1&&(o==null||o(P,q.number))}}),l.setValue(_.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')}else l=null}),{inputRef:g,numberValue:m,formattedValue:f,setValue:b=>l==null?void 0:l.setValue(b),setOptions:b=>l==null?void 0:l.setOptions(b)}}const ce={__name:"CurrencyInput",props:{modelValue:Number,currency:String,label:String},emits:["change","update:modelValue"],setup(n,{emit:t}){const e=n,{inputRef:a,formattedValue:i,setValue:u,setOptions:l}=nt({currency:e.currency,currencyDisplay:"hidden",valueScaling:"precision",valueRange:{min:0,max:void 0},autoSign:!0});return te(()=>e.modelValue,g=>{u(g)}),te(()=>e.currency,g=>{l({currency:g})}),(g,f)=>($(),A(ye,{ref_key:"inputRef",ref:a,modelValue:k(i),"onUpdate:modelValue":f[0]||(f[0]=m=>qe(i)?i.value=m:null),outlined:"",label:e.label,onFocus:f[1]||(f[1]=m=>k(a).select())},null,8,["modelValue","label"]))}},at={class:"q-gutter-none"},st={class:"text-center"},lt={class:"q-gutter-none"},rt={class:"text-center"},ot={key:0,class:"text-center text-caption text-green"},ut={class:"q-gutter-none"},ct={class:"text-center"},dt={key:0,class:"text-center text-caption text-green"},mt={class:"q-gutter-none"},ht={class:"text-center"},ft={key:0,class:"text-center text-caption text-red"},vt={class:"q-gutter-none"},gt={class:"text-center"},pt={key:0,class:"text-center text-caption text-red"},bt={class:"q-mr-sx",style:{display:"flex"}},$t={__name:"TransactionPage",setup(n){const t=Be(),e=we(),a=Ee(),i=R(e.getEditableTransaction()),u=R(!1),l=R(null),g=R(!1);$e(()=>{var d;(d=l.value)==null||d.focus()});const f=V({get:()=>e.personIdx2Id(i.value.payer)||"",set:d=>{i.value.payer=e.personId2Idx(d)}}),m=V({get:()=>{const d=i.value.debts.map((s,y)=>s.isDebtor?y:-1).filter(s=>s!==-1);return d.length===1?e.personIdx2Id(d[0]):null},set:d=>{const s=e.personId2Idx(d);i.value.debts.forEach((y,C)=>{y.isDebtor=C===s}),E(!1)}}),r=()=>{if(m.value!==null){if(f.value===m.value)return;const d=e.personId2Idx(f.value),s=e.personId2Idx(m.value);i.value.payer=s,i.value.debts.forEach((y,C)=>{y.isDebtor=C===d}),E(!1)}},o=e.currentSheetPeople.find(d=>d!==e.user.id),c=e.currentSheetPeople.findIndex(d=>d!==e.user.id),p=e.currentSheetPeople.findIndex(d=>d===e.user.id),h=V(()=>W.state(i.value)),_=(d,s)=>{switch(d){case 0:return(s===p?"You are":`${e.getName(o)} is`)+" owed the full amount";case 1:return(s===p?"You":e.getName(o))+" paid, split equally";default:return"Custom"}},I=(d,s)=>{const y=d===0?i.value.amount:(i.value.amount+i.value.amount%2)/2;return s===p?`${e.getName(o)} owes you ${oe.displayCurrency(i.value.currency,y)}`:`You owe ${e.getName(o)} ${oe.displayCurrency(i.value.currency,y)}`},P=d=>{switch(d){case 0:i.value.payer=p,i.value.debts[0].isDebtor=!0,i.value.debts[1].isDebtor=!0;break;case 1:i.value.payer=p,i.value.debts[p].isDebtor=!1,i.value.debts[c].isDebtor=!0;break;case 2:i.value.payer=c,i.value.debts[0].isDebtor=!0,i.value.debts[1].isDebtor=!0;break;case 3:i.value.payer=c,i.value.debts[p].isDebtor=!0,i.value.debts[c].isDebtor=!1;break;default:return}E(!0)},b=d=>{g.value||(g.value=!0,W.clearOwedAmounts(i.value,d)),W.fillLastOwedAmount(i.value)&&t.notify("The amount has been increased to match the sum of the shares.")},E=d=>{(d||!g.value)&&(g.value=!1,W.split(i.value))},x=()=>{e.transactionId=null,a.go(-1)},q=async()=>{try{W.check(i.value),await e.addTransaction(i.value),e.transactionId=null,x()}catch(d){t.notify({message:d.message||d,color:"negative"});return}};return(d,s)=>($(),L(ae,null,[v(Re,{elevated:"",class:"bg-primary text-white"},{default:F(()=>[v(Ae,null,{default:F(()=>[v(z,{flat:"",icon:"arrow_back",onClick:x,"aria-label":"Go Back",class:"bg-white text-primary"}),v(Oe),v(z,{flat:"",icon:u.value?"visibility_off":"visibility",label:u.value?"Hide":"Show",onClick:s[0]||(s[0]=y=>u.value=!u.value),class:"q-ml-md bg-white text-primary","aria-label":"Toggle active state"},null,8,["icon","label"]),v(z,{flat:"",icon:"done",label:"Confirm",onClick:q,class:"q-ml-md bg-secondary text-white","aria-label":"Save"})]),_:1})]),_:1}),v(Le,null,{default:F(()=>[v(Z,{class:"q-my-md q-mr-md q-ml-md"},{default:F(()=>[v(U,null,{default:F(()=>[v(ye,{ref_key:"nameInput",ref:l,modelValue:i.value.name,"onUpdate:modelValue":s[1]||(s[1]=y=>i.value.name=y),label:"Transaction Name",outlined:"",onFocus:s[2]||(s[2]=y=>l.value.select())},null,8,["modelValue"])]),_:1}),v(U,{class:"row",style:{"align-items":"center"}},{default:F(()=>[v(Qe,{modelValue:i.value.currency,"onUpdate:modelValue":s[3]||(s[3]=y=>i.value.currency=y),usedCurrencies:k(e).currencies,class:"q-mr-md text-subtitle1",style:{height:"56px"}},null,8,["modelValue","usedCurrencies"]),v(ce,{modelValue:i.value.amount,"onUpdate:modelValue":[s[4]||(s[4]=y=>i.value.amount=y),s[5]||(s[5]=y=>E(!0))],currency:"XXX",style:{flex:"1"},label:"Amount"},null,8,["modelValue"])]),_:1})]),_:1}),v(Z,{class:"q-my-md q-mr-md q-ml-md"},{default:F(()=>[i.value.debts.length===2?($(),A(U,{key:0,class:"column items-center"},{default:F(()=>[v(Me,{class:"full-width"},{label:F(()=>[w("div",at,[w("div",st,O(_(h.value,i.value.payer)),1),h.value!==-1&&i.value.amount!==0?($(),L("div",{key:0,class:se(["text-center text-caption",i.value.payer===k(p)?"text-green":"text-red"])},O(I(h.value,i.value.payer)),3)):B("",!0)])]),default:F(()=>[v(le,null,{default:F(()=>[j(($(),A(X,{clickable:"",class:"bg-white",onClick:s[6]||(s[6]=y=>P(0))},{default:F(()=>[v(H,null,{default:F(()=>[w("div",lt,[w("div",rt,O(_(1,k(p))),1),i.value.amount?($(),L("div",ot,O(I(1,k(p))),1)):B("",!0)])]),_:1})]),_:1})),[[K]]),j(($(),A(X,{clickable:"",class:"bg-grey-3",onClick:s[7]||(s[7]=y=>P(1))},{default:F(()=>[v(H,null,{default:F(()=>[w("div",ut,[w("div",ct,O(_(0,k(p))),1),i.value.amount?($(),L("div",dt,O(I(0,k(p))),1)):B("",!0)])]),_:1})]),_:1})),[[K]]),j(($(),A(X,{clickable:"",class:"bg-white",onClick:s[8]||(s[8]=y=>P(2))},{default:F(()=>[v(H,null,{default:F(()=>[w("div",mt,[w("div",ht,O(_(1,k(c))),1),i.value.amount?($(),L("div",ft,O(I(1,k(c))),1)):B("",!0)])]),_:1})]),_:1})),[[K]]),j(($(),A(X,{clickable:"",class:"bg-grey-3",onClick:s[9]||(s[9]=y=>P(3))},{default:F(()=>[v(H,null,{default:F(()=>[w("div",vt,[w("div",gt,O(_(0,k(c))),1),i.value.amount?($(),L("div",pt,O(I(0,k(c))),1)):B("",!0)])]),_:1})]),_:1})),[[K]])]),_:1})]),_:1})]),_:1})):B("",!0),i.value.debts.length>2?($(),A(U,{key:1,class:"row justify-center items-center"},{default:F(()=>[v(re,{class:"col-auto q-mr-sm",modelValue:f.value,"onUpdate:modelValue":s[10]||(s[10]=y=>f.value=y),people:k(e).currentSheet.people,"sorted-people":k(e).currentSheetPeople,"fixed-label":"Payer",dense:""},null,8,["modelValue","people","sorted-people"]),v(z,{class:"col-auto q-mr-sm",icon:"swap_horiz",onClick:r}),v(re,{class:"col-auto",modelValue:m.value,"onUpdate:modelValue":s[11]||(s[11]=y=>m.value=y),people:k(e).currentSheet.people,"sorted-people":k(e).currentSheetPeople,"fixed-label":"Debtor",dense:""},null,8,["modelValue","people","sorted-people"])]),_:1})):B("",!0),v(U,{class:"row justify-center items-center"},{default:F(()=>[v(z,{flat:"",icon:"done",label:"Cancel",onClick:q,class:"q-mr-md bg-red text-white","aria-label":"Save"}),v(z,{flat:"",icon:"done",label:"Confirm",onClick:q,class:"bg-secondary text-white","aria-label":"Save"})]),_:1})]),_:1}),v(Z,{class:"q-my-md q-mr-md q-ml-md q-mb-md"},{default:F(()=>[v(U,null,{default:F(()=>s[15]||(s[15]=[w("div",{class:"row text-bold"},[w("div",{class:"col-auto q-mr-md q-ml-sm"},"Payer"),w("div",{class:"col"},"Person"),w("div",{class:"col-auto q-mr-md"},"Owes"),w("div",{class:"col-auto q-mr-lg"},"Amount")],-1)])),_:1}),v(le,{class:"q-my-md q-mr-md q-ml-md"},{default:F(()=>[($(!0),L(ae,null,Pe(k(e).currentSheetPeople,(y,C)=>j(($(),A(X,{key:C,class:se(C%2===0?"bg-grey-1":"bg-white")},{default:F(()=>[w("div",bt,[v(ze,{modelValue:i.value.payer,"onUpdate:modelValue":[s[12]||(s[12]=N=>i.value.payer=N),s[13]||(s[13]=N=>E(!1))],val:C},null,8,["modelValue","val"])]),v(H,null,{default:F(()=>[v(Te,{id:y,"max-length":13},null,8,["id"])]),_:2},1024),v(He,{modelValue:i.value.debts[C].isDebtor,"onUpdate:modelValue":[N=>i.value.debts[C].isDebtor=N,s[14]||(s[14]=N=>E(!0))],class:"q-mr-sx"},null,8,["modelValue","onUpdate:modelValue"]),v(ce,{modelValue:i.value.debts[C].owedAmount,"onUpdate:modelValue":N=>i.value.debts[C].owedAmount=N,currency:"XXX",style:{maxWidth:"100px"},onBlur:N=>b(C)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["class"])),[[Ne,k(e).currentSheet.people[y].active||u.value||i.value.payer===C||i.value.debts[C].owedAmount!==0||i.value.debts[C].isDebtor]])),128))]),_:1})]),_:1})]),_:1})],64))}};export{$t as default};
