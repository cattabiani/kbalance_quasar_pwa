const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-DOEpRWtI.js","assets/scroll-D71Evjro.js","assets/QResizeObserver-BoJqacBm.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/IndexPage-Cnk5Di45.js","assets/QToolbarTitle-Dfh_mAoW.js","assets/QItemLabel-CKcdkpKK.js","assets/QPage-DGqtd_iJ.js","assets/selection-_pR76mky.js","assets/focusout-BgZVr1Hq.js","assets/QCard-B7RGkhDh.js","assets/QHeader-CsjxPL6g.js","assets/QBanner-clMXXd4U.js","assets/rtl-DFPa-2ov.js","assets/QSlideItem-Ro1TimLz.js","assets/use-render-cache-rinsAykk.js","assets/QImg-B4Khb4WM.js","assets/ShareString-BcXuIeaa.js","assets/QCardActions-CxbfsytK.js","assets/QDialog-Dd_Ew0IE.js","assets/browser-ykQVvkhD.js","assets/ReceiveString-BXL-X1Tp.js","assets/PersonItem-bIoTSMyQ.js","assets/IndexPage-D905FuJZ.css","assets/NewSheetWizardPage-0BlQ25N8.js","assets/QForm-B0Uis2S3.js","assets/PeopleList-C2aHPElr.js","assets/PeopleDropdown-B1T49cPt.js","assets/SheetPage-Ch2sRGLb.js","assets/QSpace-Dm0rdalr.js","assets/index-CMSkMIhu.js","assets/TransactionList-CMVWEdZP.js","assets/CurrencyDisplay-B4VyaTGU.js","assets/utils-bRICbQdu.js","assets/ConvertPage-C0opt5fx.js","assets/CurrencyDropdown-CmAAJkHu.js","assets/SettlePage-B1Cxl3jE.js","assets/ConversionRatesSettingsPage-D9GIEqnV.js","assets/QCheckbox-NvxWJOKO.js","assets/use-fullscreen-B3ymFBg9.js","assets/PeoplePage-B-DVcpcB.js","assets/TransactionPage-CLSEcUjp.js","assets/LoginPage-C10rcg6a.js","assets/SettingsPage--fVB59tH.js","assets/LandingPage-B1GxfynZ.js"])))=>i.map(i=>d[i]);
/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Km(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const It={},Ua=[],Zr=()=>{},pT=()=>!1,ad=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Gm=n=>n.startsWith("onUpdate:"),sn=Object.assign,Wm=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},KO=Object.prototype.hasOwnProperty,gt=(n,e)=>KO.call(n,e),Ve=Array.isArray,Ba=n=>hc(n)==="[object Map]",gT=n=>hc(n)==="[object Set]",GO=n=>hc(n)==="[object RegExp]",Ke=n=>typeof n=="function",Vt=n=>typeof n=="string",Ui=n=>typeof n=="symbol",At=n=>n!==null&&typeof n=="object",mT=n=>(At(n)||Ke(n))&&Ke(n.then)&&Ke(n.catch),_T=Object.prototype.toString,hc=n=>_T.call(n),WO=n=>hc(n).slice(8,-1),yT=n=>hc(n)==="[object Object]",Hm=n=>Vt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Il=Km(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ud=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},HO=/-\w/g,Rr=ud(n=>n.replace(HO,e=>e.slice(1).toUpperCase())),QO=/\B([A-Z])/g,zo=ud(n=>n.replace(QO,"-$1").toLowerCase()),ld=ud(n=>n.charAt(0).toUpperCase()+n.slice(1)),tg=ud(n=>n?`on${ld(n)}`:""),Ss=(n,e)=>!Object.is(n,e),Tl=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},vT=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},JO=n=>{const e=parseFloat(n);return isNaN(e)?n:e},YO=n=>{const e=Vt(n)?Number(n):NaN;return isNaN(e)?n:e};let uw;const cd=()=>uw||(uw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function Qm(n){if(Ve(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Vt(r)?tk(r):Qm(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Vt(n)||At(n))return n}const XO=/;(?![^(]*\))/g,ZO=/:([^]+)/,ek=/\/\*[^]*?\*\//g;function tk(n){const e={};return n.replace(ek,"").split(XO).forEach(t=>{if(t){const r=t.split(ZO);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Jm(n){let e="";if(Vt(n))e=n;else if(Ve(n))for(let t=0;t<n.length;t++){const r=Jm(n[t]);r&&(e+=r+" ")}else if(At(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const nk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rk=Km(nk);function wT(n){return!!n||n===""}const ET=n=>!!(n&&n.__v_isRef===!0),ik=n=>Vt(n)?n:n==null?"":Ve(n)||At(n)&&(n.toString===_T||!Ke(n.toString))?ET(n)?ik(n.value):JSON.stringify(n,IT,2):String(n),IT=(n,e)=>ET(e)?IT(n,e.value):Ba(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[ng(r,s)+" =>"]=i,t),{})}:gT(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>ng(t))}:Ui(e)?ng(e):At(e)&&!Ve(e)&&!yT(e)?String(e):e,ng=(n,e="")=>{var t;return Ui(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cn;class TT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Cn,!e&&Cn&&(this.index=(Cn.scopes||(Cn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Cn;try{return Cn=this,e()}finally{Cn=t}}}on(){++this._on===1&&(this.prevScope=Cn,Cn=this)}off(){this._on>0&&--this._on===0&&(Cn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function bT(n){return new TT(n)}function AT(){return Cn}function sk(n,e=!1){Cn&&Cn.cleanups.push(n)}let bt;const rg=new WeakSet;class ST{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Cn&&Cn.active&&Cn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rg.has(this)&&(rg.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||PT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,lw(this),CT(this);const e=bt,t=Vr;bt=this,Vr=!0;try{return this.fn()}finally{xT(this),bt=e,Vr=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Zm(e);this.deps=this.depsTail=void 0,lw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rg.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$g(this)&&this.run()}get dirty(){return $g(this)}}let RT=0,bl,Al;function PT(n,e=!1){if(n.flags|=8,e){n.next=Al,Al=n;return}n.next=bl,bl=n}function Ym(){RT++}function Xm(){if(--RT>0)return;if(Al){let e=Al;for(Al=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;bl;){let e=bl;for(bl=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function CT(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xT(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),Zm(r),ok(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function $g(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(DT(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function DT(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Ul)||(n.globalVersion=Ul,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!$g(n))))return;n.flags|=2;const e=n.dep,t=bt,r=Vr;bt=n,Vr=!0;try{CT(n);const i=n.fn(n._value);(e.version===0||Ss(i,n._value))&&(n.flags|=128,n._value=i,e.version++)}catch(i){throw e.version++,i}finally{bt=t,Vr=r,xT(n),n.flags&=-3}}function Zm(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)Zm(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function ok(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Vr=!0;const OT=[];function ki(){OT.push(Vr),Vr=!1}function Ni(){const n=OT.pop();Vr=n===void 0?!0:n}function lw(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=bt;bt=void 0;try{e()}finally{bt=t}}}let Ul=0;class ak{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class e_{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!bt||!Vr||bt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==bt)t=this.activeLink=new ak(bt,this),bt.deps?(t.prevDep=bt.depsTail,bt.depsTail.nextDep=t,bt.depsTail=t):bt.deps=bt.depsTail=t,kT(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=bt.depsTail,t.nextDep=void 0,bt.depsTail.nextDep=t,bt.depsTail=t,bt.deps===t&&(bt.deps=r)}return t}trigger(e){this.version++,Ul++,this.notify(e)}notify(e){Ym();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Xm()}}}function kT(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)kT(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Tf=new WeakMap,bo=Symbol(""),jg=Symbol(""),Bl=Symbol("");function Dn(n,e,t){if(Vr&&bt){let r=Tf.get(n);r||Tf.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new e_),i.map=r,i.key=t),i.track()}}function Ai(n,e,t,r,i,s){const a=Tf.get(n);if(!a){Ul++;return}const l=h=>{h&&h.trigger()};if(Ym(),e==="clear")a.forEach(l);else{const h=Ve(n),d=h&&Hm(t);if(h&&t==="length"){const p=Number(r);a.forEach((_,v)=>{(v==="length"||v===Bl||!Ui(v)&&v>=p)&&l(_)})}else switch((t!==void 0||a.has(void 0))&&l(a.get(t)),d&&l(a.get(Bl)),e){case"add":h?d&&l(a.get("length")):(l(a.get(bo)),Ba(n)&&l(a.get(jg)));break;case"delete":h||(l(a.get(bo)),Ba(n)&&l(a.get(jg)));break;case"set":Ba(n)&&l(a.get(bo));break}}Xm()}function uk(n,e){const t=Tf.get(n);return t&&t.get(e)}function wa(n){const e=at(n);return e===n?e:(Dn(e,"iterate",Bl),Sr(n)?e:e.map(mn))}function hd(n){return Dn(n=at(n),"iterate",Bl),n}const lk={__proto__:null,[Symbol.iterator](){return ig(this,Symbol.iterator,mn)},concat(...n){return wa(this).concat(...n.map(e=>Ve(e)?wa(e):e))},entries(){return ig(this,"entries",n=>(n[1]=mn(n[1]),n))},every(n,e){return wi(this,"every",n,e,void 0,arguments)},filter(n,e){return wi(this,"filter",n,e,t=>t.map(mn),arguments)},find(n,e){return wi(this,"find",n,e,mn,arguments)},findIndex(n,e){return wi(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return wi(this,"findLast",n,e,mn,arguments)},findLastIndex(n,e){return wi(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return wi(this,"forEach",n,e,void 0,arguments)},includes(...n){return sg(this,"includes",n)},indexOf(...n){return sg(this,"indexOf",n)},join(n){return wa(this).join(n)},lastIndexOf(...n){return sg(this,"lastIndexOf",n)},map(n,e){return wi(this,"map",n,e,void 0,arguments)},pop(){return Yu(this,"pop")},push(...n){return Yu(this,"push",n)},reduce(n,...e){return cw(this,"reduce",n,e)},reduceRight(n,...e){return cw(this,"reduceRight",n,e)},shift(){return Yu(this,"shift")},some(n,e){return wi(this,"some",n,e,void 0,arguments)},splice(...n){return Yu(this,"splice",n)},toReversed(){return wa(this).toReversed()},toSorted(n){return wa(this).toSorted(n)},toSpliced(...n){return wa(this).toSpliced(...n)},unshift(...n){return Yu(this,"unshift",n)},values(){return ig(this,"values",mn)}};function ig(n,e,t){const r=hd(n),i=r[e]();return r!==n&&!Sr(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=t(s.value)),s}),i}const ck=Array.prototype;function wi(n,e,t,r,i,s){const a=hd(n),l=a!==n&&!Sr(n),h=a[e];if(h!==ck[e]){const _=h.apply(n,s);return l?mn(_):_}let d=t;a!==n&&(l?d=function(_,v){return t.call(this,mn(_),v,n)}:t.length>2&&(d=function(_,v){return t.call(this,_,v,n)}));const p=h.call(a,d,r);return l&&i?i(p):p}function cw(n,e,t,r){const i=hd(n);let s=t;return i!==n&&(Sr(n)?t.length>3&&(s=function(a,l,h){return t.call(this,a,l,h,n)}):s=function(a,l,h){return t.call(this,a,mn(l),h,n)}),i[e](s,...r)}function sg(n,e,t){const r=at(n);Dn(r,"iterate",Bl);const i=r[e](...t);return(i===-1||i===!1)&&r_(t[0])?(t[0]=at(t[0]),r[e](...t)):i}function Yu(n,e,t=[]){ki(),Ym();const r=at(n)[e].apply(n,t);return Xm(),Ni(),r}const hk=Km("__proto__,__v_isRef,__isVue"),NT=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ui));function fk(n){Ui(n)||(n=String(n));const e=at(this);return Dn(e,"has",n),e.hasOwnProperty(n)}class VT{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?Ik:UT:s?FT:MT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Ve(e);if(!i){let h;if(a&&(h=lk[t]))return h;if(t==="hasOwnProperty")return fk}const l=Reflect.get(e,t,Gt(e)?e:r);if((Ui(t)?NT.has(t):hk(t))||(i||Dn(e,"get",t),s))return l;if(Gt(l)){const h=a&&Hm(t)?l:l.value;return i&&At(h)?Kg(h):h}return At(l)?i?Kg(l):Ko(l):l}}class LT extends VT{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const h=ks(s);if(!Sr(r)&&!ks(r)&&(s=at(s),r=at(r)),!Ve(e)&&Gt(s)&&!Gt(r))return h||(s.value=r),!0}const a=Ve(e)&&Hm(t)?Number(t)<e.length:gt(e,t),l=Reflect.set(e,t,r,Gt(e)?e:i);return e===at(i)&&(a?Ss(r,s)&&Ai(e,"set",t,r):Ai(e,"add",t,r)),l}deleteProperty(e,t){const r=gt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Ai(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Ui(t)||!NT.has(t))&&Dn(e,"has",t),r}ownKeys(e){return Dn(e,"iterate",Ve(e)?"length":bo),Reflect.ownKeys(e)}}class dk extends VT{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const pk=new LT,gk=new dk,mk=new LT(!0);const zg=n=>n,$h=n=>Reflect.getPrototypeOf(n);function _k(n,e,t){return function(...r){const i=this.__v_raw,s=at(i),a=Ba(s),l=n==="entries"||n===Symbol.iterator&&a,h=n==="keys"&&a,d=i[n](...r),p=t?zg:e?bf:mn;return!e&&Dn(s,"iterate",h?jg:bo),{next(){const{value:_,done:v}=d.next();return v?{value:_,done:v}:{value:l?[p(_[0]),p(_[1])]:p(_),done:v}},[Symbol.iterator](){return this}}}}function jh(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function yk(n,e){const t={get(i){const s=this.__v_raw,a=at(s),l=at(i);n||(Ss(i,l)&&Dn(a,"get",i),Dn(a,"get",l));const{has:h}=$h(a),d=e?zg:n?bf:mn;if(h.call(a,i))return d(s.get(i));if(h.call(a,l))return d(s.get(l));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!n&&Dn(at(i),"iterate",bo),i.size},has(i){const s=this.__v_raw,a=at(s),l=at(i);return n||(Ss(i,l)&&Dn(a,"has",i),Dn(a,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const a=this,l=a.__v_raw,h=at(l),d=e?zg:n?bf:mn;return!n&&Dn(h,"iterate",bo),l.forEach((p,_)=>i.call(s,d(p),d(_),a))}};return sn(t,n?{add:jh("add"),set:jh("set"),delete:jh("delete"),clear:jh("clear")}:{add(i){!e&&!Sr(i)&&!ks(i)&&(i=at(i));const s=at(this);return $h(s).has.call(s,i)||(s.add(i),Ai(s,"add",i,i)),this},set(i,s){!e&&!Sr(s)&&!ks(s)&&(s=at(s));const a=at(this),{has:l,get:h}=$h(a);let d=l.call(a,i);d||(i=at(i),d=l.call(a,i));const p=h.call(a,i);return a.set(i,s),d?Ss(s,p)&&Ai(a,"set",i,s):Ai(a,"add",i,s),this},delete(i){const s=at(this),{has:a,get:l}=$h(s);let h=a.call(s,i);h||(i=at(i),h=a.call(s,i)),l&&l.call(s,i);const d=s.delete(i);return h&&Ai(s,"delete",i,void 0),d},clear(){const i=at(this),s=i.size!==0,a=i.clear();return s&&Ai(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=_k(i,n,e)}),t}function t_(n,e){const t=yk(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(gt(t,i)&&i in r?t:r,i,s)}const vk={get:t_(!1,!1)},wk={get:t_(!1,!0)},Ek={get:t_(!0,!1)};const MT=new WeakMap,FT=new WeakMap,UT=new WeakMap,Ik=new WeakMap;function Tk(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bk(n){return n.__v_skip||!Object.isExtensible(n)?0:Tk(WO(n))}function Ko(n){return ks(n)?n:n_(n,!1,pk,vk,MT)}function BT(n){return n_(n,!1,mk,wk,FT)}function Kg(n){return n_(n,!0,gk,Ek,UT)}function n_(n,e,t,r,i){if(!At(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=bk(n);if(s===0)return n;const a=i.get(n);if(a)return a;const l=new Proxy(n,s===2?r:t);return i.set(n,l),l}function Rs(n){return ks(n)?Rs(n.__v_raw):!!(n&&n.__v_isReactive)}function ks(n){return!!(n&&n.__v_isReadonly)}function Sr(n){return!!(n&&n.__v_isShallow)}function r_(n){return n?!!n.__v_raw:!1}function at(n){const e=n&&n.__v_raw;return e?at(e):n}function Go(n){return!gt(n,"__v_skip")&&Object.isExtensible(n)&&vT(n,"__v_skip",!0),n}const mn=n=>At(n)?Ko(n):n,bf=n=>At(n)?Kg(n):n;function Gt(n){return n?n.__v_isRef===!0:!1}function xo(n){return qT(n,!1)}function Ak(n){return qT(n,!0)}function qT(n,e){return Gt(n)?n:new Sk(n,e)}class Sk{constructor(e,t){this.dep=new e_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:at(e),this._value=t?e:mn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Sr(e)||ks(e);e=r?e:at(e),Ss(e,t)&&(this._rawValue=e,this._value=r?e:mn(e),this.dep.trigger())}}function Ao(n){return Gt(n)?n.value:n}const Rk={get:(n,e,t)=>e==="__v_raw"?n:Ao(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return Gt(i)&&!Gt(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function $T(n){return Rs(n)?n:new Proxy(n,Rk)}function Pk(n){const e=Ve(n)?new Array(n.length):{};for(const t in n)e[t]=xk(n,t);return e}class Ck{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return uk(at(this._object),this._key)}}function xk(n,e,t){const r=n[e];return Gt(r)?r:new Ck(n,e,t)}class Dk{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new e_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ul-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return PT(this,!0),!0}get value(){const e=this.dep.track();return DT(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ok(n,e,t=!1){let r,i;return Ke(n)?r=n:(r=n.get,i=n.set),new Dk(r,i,t)}const zh={},Af=new WeakMap;let mo;function kk(n,e=!1,t=mo){if(t){let r=Af.get(t);r||Af.set(t,r=[]),r.push(n)}}function Nk(n,e,t=It){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:l,call:h}=t,d=G=>i?G:Sr(G)||i===!1||i===0?Si(G,1):Si(G);let p,_,v,E,N=!1,M=!1;if(Gt(n)?(_=()=>n.value,N=Sr(n)):Rs(n)?(_=()=>d(n),N=!0):Ve(n)?(M=!0,N=n.some(G=>Rs(G)||Sr(G)),_=()=>n.map(G=>{if(Gt(G))return G.value;if(Rs(G))return d(G);if(Ke(G))return h?h(G,2):G()})):Ke(n)?e?_=h?()=>h(n,2):n:_=()=>{if(v){ki();try{v()}finally{Ni()}}const G=mo;mo=p;try{return h?h(n,3,[E]):n(E)}finally{mo=G}}:_=Zr,e&&i){const G=_,J=i===!0?1/0:i;_=()=>Si(G(),J)}const F=AT(),Q=()=>{p.stop(),F&&F.active&&Wm(F.effects,p)};if(s&&e){const G=e;e=(...J)=>{G(...J),Q()}}let j=M?new Array(n.length).fill(zh):zh;const z=G=>{if(!(!(p.flags&1)||!p.dirty&&!G))if(e){const J=p.run();if(i||N||(M?J.some((oe,R)=>Ss(oe,j[R])):Ss(J,j))){v&&v();const oe=mo;mo=p;try{const R=[J,j===zh?void 0:M&&j[0]===zh?[]:j,E];j=J,h?h(e,3,R):e(...R)}finally{mo=oe}}}else p.run()};return l&&l(z),p=new ST(_),p.scheduler=a?()=>a(z,!1):z,E=G=>kk(G,!1,p),v=p.onStop=()=>{const G=Af.get(p);if(G){if(h)h(G,4);else for(const J of G)J();Af.delete(p)}},e?r?z(!0):j=p.run():a?a(z.bind(null,!0),!0):p.run(),Q.pause=p.pause.bind(p),Q.resume=p.resume.bind(p),Q.stop=Q,Q}function Si(n,e=1/0,t){if(e<=0||!At(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,Gt(n))Si(n.value,e,t);else if(Ve(n))for(let r=0;r<n.length;r++)Si(n[r],e,t);else if(gT(n)||Ba(n))n.forEach(r=>{Si(r,e,t)});else if(yT(n)){for(const r in n)Si(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Si(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fc(n,e,t,r){try{return r?n(...r):n()}catch(i){fd(i,e,t)}}function Mr(n,e,t,r){if(Ke(n)){const i=fc(n,e,t,r);return i&&mT(i)&&i.catch(s=>{fd(s,e,t)}),i}if(Ve(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Mr(n[s],e,t,r));return i}}function fd(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||It;if(e){let l=e.parent;const h=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const p=l.ec;if(p){for(let _=0;_<p.length;_++)if(p[_](n,h,d)===!1)return}l=l.parent}if(s){ki(),fc(s,null,10,[n,h,d]),Ni();return}}Vk(n,t,i,r,a)}function Vk(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const $n=[];let Hr=-1;const qa=[];let gs=null,Da=0;const jT=Promise.resolve();let Sf=null;function i_(n){const e=Sf||jT;return n?e.then(this?n.bind(this):n):e}function Lk(n){let e=Hr+1,t=$n.length;for(;e<t;){const r=e+t>>>1,i=$n[r],s=ql(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function s_(n){if(!(n.flags&1)){const e=ql(n),t=$n[$n.length-1];!t||!(n.flags&2)&&e>=ql(t)?$n.push(n):$n.splice(Lk(e),0,n),n.flags|=1,zT()}}function zT(){Sf||(Sf=jT.then(GT))}function Mk(n){Ve(n)?qa.push(...n):gs&&n.id===-1?gs.splice(Da+1,0,n):n.flags&1||(qa.push(n),n.flags|=1),zT()}function hw(n,e,t=Hr+1){for(;t<$n.length;t++){const r=$n[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;$n.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function KT(n){if(qa.length){const e=[...new Set(qa)].sort((t,r)=>ql(t)-ql(r));if(qa.length=0,gs){gs.push(...e);return}for(gs=e,Da=0;Da<gs.length;Da++){const t=gs[Da];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}gs=null,Da=0}}const ql=n=>n.id==null?n.flags&2?-1:1/0:n.id;function GT(n){try{for(Hr=0;Hr<$n.length;Hr++){const e=$n[Hr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Hr<$n.length;Hr++){const e=$n[Hr];e&&(e.flags&=-2)}Hr=-1,$n.length=0,KT(),Sf=null,($n.length||qa.length)&&GT()}}let yn=null,WT=null;function Rf(n){const e=yn;return yn=n,WT=n&&n.type.__scopeId||null,e}function Fk(n,e=yn,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&kf(-1);const s=Rf(e);let a;try{a=n(...i)}finally{Rf(s),r._d&&kf(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function HT(n,e){if(yn===null)return n;const t=_d(yn),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,l,h=It]=e[i];s&&(Ke(s)&&(s={mounted:s,updated:s}),s.deep&&Si(a),r.push({dir:s,instance:t,value:a,oldValue:void 0,arg:l,modifiers:h}))}return n}function ho(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const l=i[a];s&&(l.oldValue=s[a].value);let h=l.dir[r];h&&(ki(),Mr(h,t,8,[n.el,l,n,e]),Ni())}}const QT=Symbol("_vte"),JT=n=>n.__isTeleport,Sl=n=>n&&(n.disabled||n.disabled===""),fw=n=>n&&(n.defer||n.defer===""),dw=n=>typeof SVGElement!="undefined"&&n instanceof SVGElement,pw=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Gg=(n,e)=>{const t=n&&n.to;return Vt(t)?e?e(t):null:t},YT={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,a,l,h,d){const{mc:p,pc:_,pbc:v,o:{insert:E,querySelector:N,createText:M,createComment:F}}=d,Q=Sl(e.props);let{shapeFlag:j,children:z,dynamicChildren:G}=e;if(n==null){const J=e.el=M(""),oe=e.anchor=M("");E(J,t,r),E(oe,t,r);const R=(A,x)=>{j&16&&p(z,A,x,i,s,a,l,h)},S=()=>{const A=e.target=Gg(e.props,N),x=XT(A,e,M,E);A&&(a!=="svg"&&dw(A)?a="svg":a!=="mathml"&&pw(A)&&(a="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(A),Q||(R(A,x),rf(e,!1)))};Q&&(R(t,oe),rf(e,!0)),fw(e.props)?(e.el.__isMounted=!1,rn(()=>{S(),delete e.el.__isMounted},s)):S()}else{if(fw(e.props)&&n.el.__isMounted===!1){rn(()=>{YT.process(n,e,t,r,i,s,a,l,h,d)},s);return}e.el=n.el,e.targetStart=n.targetStart;const J=e.anchor=n.anchor,oe=e.target=n.target,R=e.targetAnchor=n.targetAnchor,S=Sl(n.props),A=S?t:oe,x=S?J:R;if(a==="svg"||dw(oe)?a="svg":(a==="mathml"||pw(oe))&&(a="mathml"),G?(v(n.dynamicChildren,G,A,i,s,a,l),f_(n,e,!0)):h||_(n,e,A,x,i,s,a,l,!1),Q)S?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):Kh(e,t,J,d,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const k=e.target=Gg(e.props,N);k&&Kh(e,k,null,d,0)}else S&&Kh(e,oe,R,d,1);rf(e,Q)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:l,anchor:h,targetStart:d,targetAnchor:p,target:_,props:v}=n;if(_&&(i(d),i(p)),s&&i(h),a&16){const E=s||!Sl(v);for(let N=0;N<l.length;N++){const M=l[N];r(M,e,t,E,!!M.dynamicChildren)}}},move:Kh,hydrate:Uk};function Kh(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:a,anchor:l,shapeFlag:h,children:d,props:p}=n,_=s===2;if(_&&r(a,e,t),(!_||Sl(p))&&h&16)for(let v=0;v<d.length;v++)i(d[v],e,t,2);_&&r(l,e,t)}function Uk(n,e,t,r,i,s,{o:{nextSibling:a,parentNode:l,querySelector:h,insert:d,createText:p}},_){function v(M,F,Q,j){F.anchor=_(a(M),F,l(M),t,r,i,s),F.targetStart=Q,F.targetAnchor=j}const E=e.target=Gg(e.props,h),N=Sl(e.props);if(E){const M=E._lpa||E.firstChild;if(e.shapeFlag&16)if(N)v(n,e,M,M&&a(M));else{e.anchor=a(n);let F=M;for(;F;){if(F&&F.nodeType===8){if(F.data==="teleport start anchor")e.targetStart=F;else if(F.data==="teleport anchor"){e.targetAnchor=F,E._lpa=e.targetAnchor&&a(e.targetAnchor);break}}F=a(F)}e.targetAnchor||XT(E,e,p,d),_(M&&a(M),e,E,t,r,i,s)}rf(e,N)}else N&&e.shapeFlag&16&&v(n,e,n,a(n));return e.anchor&&a(e.anchor)}const X9=YT;function rf(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function XT(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[QT]=s,n&&(r(i,n),r(s,n)),s}const bi=Symbol("_leaveCb"),Gh=Symbol("_enterCb");function ZT(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return u_(()=>{n.isMounted=!0}),dc(()=>{n.isUnmounting=!0}),n}const Tr=[Function,Array],e0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Tr,onEnter:Tr,onAfterEnter:Tr,onEnterCancelled:Tr,onBeforeLeave:Tr,onLeave:Tr,onAfterLeave:Tr,onLeaveCancelled:Tr,onBeforeAppear:Tr,onAppear:Tr,onAfterAppear:Tr,onAppearCancelled:Tr},t0=n=>{const e=n.subTree;return e.component?t0(e.component):e},Bk={name:"BaseTransition",props:e0,setup(n,{slots:e}){const t=Fs(),r=ZT();return()=>{const i=e.default&&o_(e.default(),!0);if(!i||!i.length)return;const s=n0(i),a=at(n),{mode:l}=a;if(r.isLeaving)return og(s);const h=gw(s);if(!h)return og(s);let d=$l(h,a,r,t,_=>d=_);h.type!==_n&&Ns(h,d);let p=t.subTree&&gw(t.subTree);if(p&&p.type!==_n&&!vs(p,h)&&t0(t).type!==_n){let _=$l(p,a,r,t);if(Ns(p,_),l==="out-in"&&h.type!==_n)return r.isLeaving=!0,_.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete _.afterLeave,p=void 0},og(s);l==="in-out"&&h.type!==_n?_.delayLeave=(v,E,N)=>{const M=r0(r,p);M[String(p.key)]=p,v[bi]=()=>{E(),v[bi]=void 0,delete d.delayedLeave,p=void 0},d.delayedLeave=()=>{N(),delete d.delayedLeave,p=void 0}}:p=void 0}else p&&(p=void 0);return s}}};function n0(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==_n){e=t;break}}return e}const qk=Bk;function r0(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function $l(n,e,t,r,i){const{appear:s,mode:a,persisted:l=!1,onBeforeEnter:h,onEnter:d,onAfterEnter:p,onEnterCancelled:_,onBeforeLeave:v,onLeave:E,onAfterLeave:N,onLeaveCancelled:M,onBeforeAppear:F,onAppear:Q,onAfterAppear:j,onAppearCancelled:z}=e,G=String(n.key),J=r0(t,n),oe=(A,x)=>{A&&Mr(A,r,9,x)},R=(A,x)=>{const k=x[1];oe(A,x),Ve(A)?A.every(O=>O.length<=1)&&k():A.length<=1&&k()},S={mode:a,persisted:l,beforeEnter(A){let x=h;if(!t.isMounted)if(s)x=F||h;else return;A[bi]&&A[bi](!0);const k=J[G];k&&vs(n,k)&&k.el[bi]&&k.el[bi](),oe(x,[A])},enter(A){let x=d,k=p,O=_;if(!t.isMounted)if(s)x=Q||d,k=j||p,O=z||_;else return;let P=!1;const ce=A[Gh]=qe=>{P||(P=!0,qe?oe(O,[A]):oe(k,[A]),S.delayedLeave&&S.delayedLeave(),A[Gh]=void 0)};x?R(x,[A,ce]):ce()},leave(A,x){const k=String(n.key);if(A[Gh]&&A[Gh](!0),t.isUnmounting)return x();oe(v,[A]);let O=!1;const P=A[bi]=ce=>{O||(O=!0,x(),ce?oe(M,[A]):oe(N,[A]),A[bi]=void 0,J[k]===n&&delete J[k])};J[k]=n,E?R(E,[A,P]):P()},clone(A){const x=$l(A,e,t,r,i);return i&&i(x),x}};return S}function og(n){if(dd(n))return n=Vi(n),n.children=null,n}function gw(n){if(!dd(n))return JT(n.type)&&n.children?n0(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ke(t.default))return t.default()}}function Ns(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Ns(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function o_(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let a=n[s];const l=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===Xn?(a.patchFlag&128&&i++,r=r.concat(o_(a.children,e,l))):(e||a.type!==_n)&&r.push(l!=null?Vi(a,{key:l}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function a_(n,e){return Ke(n)?sn({name:n.name},e,{setup:n}):n}function i0(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Pf=new WeakMap;function Rl(n,e,t,r,i=!1){if(Ve(n)){n.forEach((N,M)=>Rl(N,e&&(Ve(e)?e[M]:e),t,r,i));return}if(So(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Rl(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?_d(r.component):r.el,a=i?null:s,{i:l,r:h}=n,d=e&&e.r,p=l.refs===It?l.refs={}:l.refs,_=l.setupState,v=at(_),E=_===It?pT:N=>gt(v,N);if(d!=null&&d!==h){if(mw(e),Vt(d))p[d]=null,E(d)&&(_[d]=null);else if(Gt(d)){d.value=null;const N=e;N.k&&(p[N.k]=null)}}if(Ke(h))fc(h,l,12,[a,p]);else{const N=Vt(h),M=Gt(h);if(N||M){const F=()=>{if(n.f){const Q=N?E(h)?_[h]:p[h]:h.value;if(i)Ve(Q)&&Wm(Q,s);else if(Ve(Q))Q.includes(s)||Q.push(s);else if(N)p[h]=[s],E(h)&&(_[h]=p[h]);else{const j=[s];h.value=j,n.k&&(p[n.k]=j)}}else N?(p[h]=a,E(h)&&(_[h]=a)):M&&(h.value=a,n.k&&(p[n.k]=a))};if(a){const Q=()=>{F(),Pf.delete(n)};Q.id=-1,Pf.set(n,Q),rn(Q,t)}else mw(n),F()}}}function mw(n){const e=Pf.get(n);e&&(e.flags|=8,Pf.delete(n))}cd().requestIdleCallback;cd().cancelIdleCallback;const So=n=>!!n.type.__asyncLoader,dd=n=>n.type.__isKeepAlive,$k={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=Fs(),r=t.ctx;if(!r.renderer)return()=>{const j=e.default&&e.default();return j&&j.length===1?j[0]:j};const i=new Map,s=new Set;let a=null;const l=t.suspense,{renderer:{p:h,m:d,um:p,o:{createElement:_}}}=r,v=_("div");r.activate=(j,z,G,J,oe)=>{const R=j.component;d(j,z,G,0,l),h(R.vnode,j,z,G,R,l,J,j.slotScopeIds,oe),rn(()=>{R.isDeactivated=!1,R.a&&Tl(R.a);const S=j.props&&j.props.onVnodeMounted;S&&Ar(S,R.parent,j)},l)},r.deactivate=j=>{const z=j.component;xf(z.m),xf(z.a),d(j,v,null,1,l),rn(()=>{z.da&&Tl(z.da);const G=j.props&&j.props.onVnodeUnmounted;G&&Ar(G,z.parent,j),z.isDeactivated=!0},l)};function E(j){ag(j),p(j,t,l,!0)}function N(j){i.forEach((z,G)=>{const J=Xg(z.type);J&&!j(J)&&M(G)})}function M(j){const z=i.get(j);z&&(!a||!vs(z,a))?E(z):a&&ag(a),i.delete(j),s.delete(j)}$a(()=>[n.include,n.exclude],([j,z])=>{j&&N(G=>ll(j,G)),z&&N(G=>!ll(z,G))},{flush:"post",deep:!0});let F=null;const Q=()=>{F!=null&&(Df(t.subTree.type)?rn(()=>{i.set(F,Wh(t.subTree))},t.subTree.suspense):i.set(F,Wh(t.subTree)))};return u_(Q),l_(Q),dc(()=>{i.forEach(j=>{const{subTree:z,suspense:G}=t,J=Wh(z);if(j.type===J.type&&j.key===J.key){ag(J);const oe=J.component.da;oe&&rn(oe,G);return}E(j)})}),()=>{if(F=null,!e.default)return a=null;const j=e.default(),z=j[0];if(j.length>1)return a=null,j;if(!Wa(z)||!(z.shapeFlag&4)&&!(z.shapeFlag&128))return a=null,z;let G=Wh(z);if(G.type===_n)return a=null,G;const J=G.type,oe=Xg(So(G)?G.type.__asyncResolved||{}:J),{include:R,exclude:S,max:A}=n;if(R&&(!oe||!ll(R,oe))||S&&oe&&ll(S,oe))return G.shapeFlag&=-257,a=G,z;const x=G.key==null?J:G.key,k=i.get(x);return G.el&&(G=Vi(G),z.shapeFlag&128&&(z.ssContent=G)),F=x,k?(G.el=k.el,G.component=k.component,G.transition&&Ns(G,G.transition),G.shapeFlag|=512,s.delete(x),s.add(x)):(s.add(x),A&&s.size>parseInt(A,10)&&M(s.values().next().value)),G.shapeFlag|=256,a=G,Df(z.type)?z:G}}},Z9=$k;function ll(n,e){return Ve(n)?n.some(t=>ll(t,e)):Vt(n)?n.split(",").includes(e):GO(n)?(n.lastIndex=0,n.test(e)):!1}function jk(n,e){s0(n,"a",e)}function zk(n,e){s0(n,"da",e)}function s0(n,e,t=On){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(pd(e,r,t),t){let i=t.parent;for(;i&&i.parent;)dd(i.parent.vnode)&&Kk(r,e,t,i),i=i.parent}}function Kk(n,e,t,r){const i=pd(e,n,r,!0);o0(()=>{Wm(r[e],i)},t)}function ag(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Wh(n){return n.shapeFlag&128?n.ssContent:n}function pd(n,e,t=On,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{ki();const l=pc(t),h=Mr(e,t,n,a);return l(),Ni(),h});return r?i.unshift(s):i.push(s),s}}const Bi=n=>(e,t=On)=>{(!zl||n==="sp")&&pd(n,(...r)=>e(...r),t)},Gk=Bi("bm"),u_=Bi("m"),Wk=Bi("bu"),l_=Bi("u"),dc=Bi("bum"),o0=Bi("um"),Hk=Bi("sp"),Qk=Bi("rtg"),Jk=Bi("rtc");function Yk(n,e=On){pd("ec",n,e)}const Xk="components";function Zk(n,e){return tN(Xk,n,!0,e)||n}const eN=Symbol.for("v-ndc");function tN(n,e,t=!0,r=!1){const i=yn||On;if(i){const s=i.type;{const l=Xg(s,!1);if(l&&(l===e||l===Rr(e)||l===ld(Rr(e))))return s}const a=_w(i[n]||s[n],e)||_w(i.appContext[n],e);return!a&&r?s:a}}function _w(n,e){return n&&(n[e]||n[Rr(e)]||n[ld(Rr(e))])}function e6(n,e,t,r){let i;const s=t,a=Ve(n);if(a||Vt(n)){const l=a&&Rs(n);let h=!1,d=!1;l&&(h=!Sr(n),d=ks(n),n=hd(n)),i=new Array(n.length);for(let p=0,_=n.length;p<_;p++)i[p]=e(h?d?bf(mn(n[p])):mn(n[p]):n[p],p,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let l=0;l<n;l++)i[l]=e(l+1,l,void 0,s)}else if(At(n))if(n[Symbol.iterator])i=Array.from(n,(l,h)=>e(l,h,void 0,s));else{const l=Object.keys(n);i=new Array(l.length);for(let h=0,d=l.length;h<d;h++){const p=l[h];i[h]=e(n[p],p,h,s)}}else i=[];return i}function t6(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(Ve(r))for(let i=0;i<r.length;i++)n[r[i].name]=r[i].fn;else r&&(n[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return n}function n6(n,e,t={},r,i){if(yn.ce||yn.parent&&So(yn.parent)&&yn.parent.ce){const d=Object.keys(t).length>0;return Of(),Nf(Xn,null,[jn("slot",t,r)],d?-2:64)}let s=n[e];s&&s._c&&(s._d=!1),Of();const a=s&&a0(s(t)),l=t.key||a&&a.key,h=Nf(Xn,{key:(l&&!Ui(l)?l:`_${e}`)+(!a&&r?"_fb":"")},a||[],a&&n._===1?64:-2);return h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function a0(n){return n.some(e=>Wa(e)?!(e.type===_n||e.type===Xn&&!a0(e.children)):!0)?n:null}const Wg=n=>n?S0(n)?_d(n):Wg(n.parent):null,Pl=sn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Wg(n.parent),$root:n=>Wg(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>l0(n),$forceUpdate:n=>n.f||(n.f=()=>{s_(n.update)}),$nextTick:n=>n.n||(n.n=i_.bind(n.proxy)),$watch:n=>TN.bind(n)}),ug=(n,e)=>n!==It&&!n.__isScriptSetup&&gt(n,e),nN={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:a,type:l,appContext:h}=n;let d;if(e[0]!=="$"){const E=a[e];if(E!==void 0)switch(E){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(ug(r,e))return a[e]=1,r[e];if(i!==It&&gt(i,e))return a[e]=2,i[e];if((d=n.propsOptions[0])&&gt(d,e))return a[e]=3,s[e];if(t!==It&&gt(t,e))return a[e]=4,t[e];Hg&&(a[e]=0)}}const p=Pl[e];let _,v;if(p)return e==="$attrs"&&Dn(n.attrs,"get",""),p(n);if((_=l.__cssModules)&&(_=_[e]))return _;if(t!==It&&gt(t,e))return a[e]=4,t[e];if(v=h.config.globalProperties,gt(v,e))return v[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return ug(i,e)?(i[e]=t,!0):r!==It&&gt(r,e)?(r[e]=t,!0):gt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s,type:a}},l){let h,d;return!!(t[l]||n!==It&&l[0]!=="$"&&gt(n,l)||ug(e,l)||(h=s[0])&&gt(h,l)||gt(r,l)||gt(Pl,l)||gt(i.config.globalProperties,l)||(d=a.__cssModules)&&d[l])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:gt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function yw(n){return Ve(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Hg=!0;function rN(n){const e=l0(n),t=n.proxy,r=n.ctx;Hg=!1,e.beforeCreate&&vw(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:a,watch:l,provide:h,inject:d,created:p,beforeMount:_,mounted:v,beforeUpdate:E,updated:N,activated:M,deactivated:F,beforeDestroy:Q,beforeUnmount:j,destroyed:z,unmounted:G,render:J,renderTracked:oe,renderTriggered:R,errorCaptured:S,serverPrefetch:A,expose:x,inheritAttrs:k,components:O,directives:P,filters:ce}=e;if(d&&iN(d,r,null),a)for(const Te in a){const Be=a[Te];Ke(Be)&&(r[Te]=Be.bind(t))}if(i){const Te=i.call(t,t);At(Te)&&(n.data=Ko(Te))}if(Hg=!0,s)for(const Te in s){const Be=s[Te],Vn=Ke(Be)?Be.bind(t,t):Ke(Be.get)?Be.get.bind(t,t):Zr,wn=!Ke(Be)&&Ke(Be.set)?Be.set.bind(t):Zr,Dt=Ue({get:Vn,set:wn});Object.defineProperty(r,Te,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:Rt=>Dt.value=Rt})}if(l)for(const Te in l)u0(l[Te],r,t,Te);if(h){const Te=Ke(h)?h.call(t):h;Reflect.ownKeys(Te).forEach(Be=>{sf(Be,Te[Be])})}p&&vw(p,n,"c");function Ye(Te,Be){Ve(Be)?Be.forEach(Vn=>Te(Vn.bind(t))):Be&&Te(Be.bind(t))}if(Ye(Gk,_),Ye(u_,v),Ye(Wk,E),Ye(l_,N),Ye(jk,M),Ye(zk,F),Ye(Yk,S),Ye(Jk,oe),Ye(Qk,R),Ye(dc,j),Ye(o0,G),Ye(Hk,A),Ve(x))if(x.length){const Te=n.exposed||(n.exposed={});x.forEach(Be=>{Object.defineProperty(Te,Be,{get:()=>t[Be],set:Vn=>t[Be]=Vn,enumerable:!0})})}else n.exposed||(n.exposed={});J&&n.render===Zr&&(n.render=J),k!=null&&(n.inheritAttrs=k),O&&(n.components=O),P&&(n.directives=P),A&&i0(n)}function iN(n,e,t=Zr){Ve(n)&&(n=Qg(n));for(const r in n){const i=n[r];let s;At(i)?"default"in i?s=Lr(i.from||r,i.default,!0):s=Lr(i.from||r):s=Lr(i),Gt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function vw(n,e,t){Mr(Ve(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function u0(n,e,t,r){let i=r.includes(".")?E0(t,r):()=>t[r];if(Vt(n)){const s=e[n];Ke(s)&&$a(i,s)}else if(Ke(n))$a(i,n.bind(t));else if(At(n))if(Ve(n))n.forEach(s=>u0(s,e,t,r));else{const s=Ke(n.handler)?n.handler.bind(t):e[n.handler];Ke(s)&&$a(i,s,n)}}function l0(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,l=s.get(e);let h;return l?h=l:!i.length&&!t&&!r?h=e:(h={},i.length&&i.forEach(d=>Cf(h,d,a,!0)),Cf(h,e,a)),At(e)&&s.set(e,h),h}function Cf(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Cf(n,s,t,!0),i&&i.forEach(a=>Cf(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const l=sN[a]||t&&t[a];n[a]=l?l(n[a],e[a]):e[a]}return n}const sN={data:ww,props:Ew,emits:Ew,methods:cl,computed:cl,beforeCreate:Bn,created:Bn,beforeMount:Bn,mounted:Bn,beforeUpdate:Bn,updated:Bn,beforeDestroy:Bn,beforeUnmount:Bn,destroyed:Bn,unmounted:Bn,activated:Bn,deactivated:Bn,errorCaptured:Bn,serverPrefetch:Bn,components:cl,directives:cl,watch:aN,provide:ww,inject:oN};function ww(n,e){return e?n?function(){return sn(Ke(n)?n.call(this,this):n,Ke(e)?e.call(this,this):e)}:e:n}function oN(n,e){return cl(Qg(n),Qg(e))}function Qg(n){if(Ve(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Bn(n,e){return n?[...new Set([].concat(n,e))]:e}function cl(n,e){return n?sn(Object.create(null),n,e):e}function Ew(n,e){return n?Ve(n)&&Ve(e)?[...new Set([...n,...e])]:sn(Object.create(null),yw(n),yw(e!=null?e:{})):e}function aN(n,e){if(!n)return e;if(!e)return n;const t=sn(Object.create(null),n);for(const r in e)t[r]=Bn(n[r],e[r]);return t}function c0(){return{app:null,config:{isNativeTag:pT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uN=0;function lN(n,e){return function(r,i=null){Ke(r)||(r=sn({},r)),i!=null&&!At(i)&&(i=null);const s=c0(),a=new WeakSet,l=[];let h=!1;const d=s.app={_uid:uN++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:KN,get config(){return s.config},set config(p){},use(p,..._){return a.has(p)||(p&&Ke(p.install)?(a.add(p),p.install(d,..._)):Ke(p)&&(a.add(p),p(d,..._))),d},mixin(p){return s.mixins.includes(p)||s.mixins.push(p),d},component(p,_){return _?(s.components[p]=_,d):s.components[p]},directive(p,_){return _?(s.directives[p]=_,d):s.directives[p]},mount(p,_,v){if(!h){const E=d._ceVNode||jn(r,i);return E.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),n(E,p,v),h=!0,d._container=p,p.__vue_app__=d,_d(E.component)}},onUnmount(p){l.push(p)},unmount(){h&&(Mr(l,d._instance,16),n(null,d._container),delete d._container.__vue_app__)},provide(p,_){return s.provides[p]=_,d},runWithContext(p){const _=Ro;Ro=d;try{return p()}finally{Ro=_}}};return d}}let Ro=null;function sf(n,e){if(On){let t=On.provides;const r=On.parent&&On.parent.provides;r===t&&(t=On.provides=Object.create(r)),t[n]=e}}function Lr(n,e,t=!1){const r=Fs();if(r||Ro){let i=Ro?Ro._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Ke(e)?e.call(r&&r.proxy):e}}function cN(){return!!(Fs()||Ro)}const h0={},f0=()=>Object.create(h0),d0=n=>Object.getPrototypeOf(n)===h0;function hN(n,e,t,r=!1){const i={},s=f0();n.propsDefaults=Object.create(null),p0(n,e,i,s);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=r?i:BT(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function fN(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=n,l=at(i),[h]=n.propsOptions;let d=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=n.vnode.dynamicProps;for(let _=0;_<p.length;_++){let v=p[_];if(gd(n.emitsOptions,v))continue;const E=e[v];if(h)if(gt(s,v))E!==s[v]&&(s[v]=E,d=!0);else{const N=Rr(v);i[N]=Jg(h,l,N,E,n,!1)}else E!==s[v]&&(s[v]=E,d=!0)}}}else{p0(n,e,i,s)&&(d=!0);let p;for(const _ in l)(!e||!gt(e,_)&&((p=zo(_))===_||!gt(e,p)))&&(h?t&&(t[_]!==void 0||t[p]!==void 0)&&(i[_]=Jg(h,l,_,void 0,n,!0)):delete i[_]);if(s!==l)for(const _ in s)(!e||!gt(e,_))&&(delete s[_],d=!0)}d&&Ai(n.attrs,"set","")}function p0(n,e,t,r){const[i,s]=n.propsOptions;let a=!1,l;if(e)for(let h in e){if(Il(h))continue;const d=e[h];let p;i&&gt(i,p=Rr(h))?!s||!s.includes(p)?t[p]=d:(l||(l={}))[p]=d:gd(n.emitsOptions,h)||(!(h in r)||d!==r[h])&&(r[h]=d,a=!0)}if(s){const h=at(t),d=l||It;for(let p=0;p<s.length;p++){const _=s[p];t[_]=Jg(i,h,_,d[_],n,!gt(d,_))}}return a}function Jg(n,e,t,r,i,s){const a=n[t];if(a!=null){const l=gt(a,"default");if(l&&r===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&Ke(h)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const p=pc(i);r=d[t]=h.call(null,e),p()}}else r=h;i.ce&&i.ce._setProp(t,r)}a[0]&&(s&&!l?r=!1:a[1]&&(r===""||r===zo(t))&&(r=!0))}return r}const dN=new WeakMap;function g0(n,e,t=!1){const r=t?dN:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,a={},l=[];let h=!1;if(!Ke(n)){const p=_=>{h=!0;const[v,E]=g0(_,e,!0);sn(a,v),E&&l.push(...E)};!t&&e.mixins.length&&e.mixins.forEach(p),n.extends&&p(n.extends),n.mixins&&n.mixins.forEach(p)}if(!s&&!h)return At(n)&&r.set(n,Ua),Ua;if(Ve(s))for(let p=0;p<s.length;p++){const _=Rr(s[p]);Iw(_)&&(a[_]=It)}else if(s)for(const p in s){const _=Rr(p);if(Iw(_)){const v=s[p],E=a[_]=Ve(v)||Ke(v)?{type:v}:sn({},v),N=E.type;let M=!1,F=!0;if(Ve(N))for(let Q=0;Q<N.length;++Q){const j=N[Q],z=Ke(j)&&j.name;if(z==="Boolean"){M=!0;break}else z==="String"&&(F=!1)}else M=Ke(N)&&N.name==="Boolean";E[0]=M,E[1]=F,(M||gt(E,"default"))&&l.push(_)}}const d=[a,l];return At(n)&&r.set(n,d),d}function Iw(n){return n[0]!=="$"&&!Il(n)}const c_=n=>n==="_"||n==="_ctx"||n==="$stable",h_=n=>Ve(n)?n.map(Qr):[Qr(n)],pN=(n,e,t)=>{if(e._n)return e;const r=Fk((...i)=>h_(e(...i)),t);return r._c=!1,r},m0=(n,e,t)=>{const r=n._ctx;for(const i in n){if(c_(i))continue;const s=n[i];if(Ke(s))e[i]=pN(i,s,r);else if(s!=null){const a=h_(s);e[i]=()=>a}}},_0=(n,e)=>{const t=h_(e);n.slots.default=()=>t},y0=(n,e,t)=>{for(const r in e)(t||!c_(r))&&(n[r]=e[r])},gN=(n,e,t)=>{const r=n.slots=f0();if(n.vnode.shapeFlag&32){const i=e._;i?(y0(r,e,t),t&&vT(r,"_",i,!0)):m0(e,r)}else e&&_0(n,e)},mN=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,a=It;if(r.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:y0(i,e,t):(s=!e.$stable,m0(e,i)),a=e}else e&&(_0(n,e),a={default:1});if(s)for(const l in i)!c_(l)&&a[l]==null&&delete i[l]},rn=DN;function _N(n){return yN(n)}function yN(n,e){const t=cd();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:l,createComment:h,setText:d,setElementText:p,parentNode:_,nextSibling:v,setScopeId:E=Zr,insertStaticContent:N}=n,M=(C,V,B,Z=null,re=null,Y=null,pe=void 0,fe=null,le=!!V.dynamicChildren)=>{if(C===V)return;C&&!vs(C,V)&&(Z=ee(C),Rt(C,re,Y,!0),C=null),V.patchFlag===-2&&(le=!1,V.dynamicChildren=null);const{type:se,ref:Se,shapeFlag:ge}=V;switch(se){case md:F(C,V,B,Z);break;case _n:Q(C,V,B,Z);break;case cg:C==null&&j(V,B,Z,pe);break;case Xn:O(C,V,B,Z,re,Y,pe,fe,le);break;default:ge&1?J(C,V,B,Z,re,Y,pe,fe,le):ge&6?P(C,V,B,Z,re,Y,pe,fe,le):(ge&64||ge&128)&&se.process(C,V,B,Z,re,Y,pe,fe,le,be)}Se!=null&&re?Rl(Se,C&&C.ref,Y,V||C,!V):Se==null&&C&&C.ref!=null&&Rl(C.ref,null,Y,C,!0)},F=(C,V,B,Z)=>{if(C==null)r(V.el=l(V.children),B,Z);else{const re=V.el=C.el;V.children!==C.children&&d(re,V.children)}},Q=(C,V,B,Z)=>{C==null?r(V.el=h(V.children||""),B,Z):V.el=C.el},j=(C,V,B,Z)=>{[C.el,C.anchor]=N(C.children,V,B,Z,C.el,C.anchor)},z=({el:C,anchor:V},B,Z)=>{let re;for(;C&&C!==V;)re=v(C),r(C,B,Z),C=re;r(V,B,Z)},G=({el:C,anchor:V})=>{let B;for(;C&&C!==V;)B=v(C),i(C),C=B;i(V)},J=(C,V,B,Z,re,Y,pe,fe,le)=>{V.type==="svg"?pe="svg":V.type==="math"&&(pe="mathml"),C==null?oe(V,B,Z,re,Y,pe,fe,le):A(C,V,re,Y,pe,fe,le)},oe=(C,V,B,Z,re,Y,pe,fe)=>{let le,se;const{props:Se,shapeFlag:ge,transition:Re,dirs:Ce}=C;if(le=C.el=a(C.type,Y,Se&&Se.is,Se),ge&8?p(le,C.children):ge&16&&S(C.children,le,null,Z,re,lg(C,Y),pe,fe),Ce&&ho(C,null,Z,"created"),R(le,C,C.scopeId,pe,Z),Se){for(const Le in Se)Le!=="value"&&!Il(Le)&&s(le,Le,null,Se[Le],Y,Z);"value"in Se&&s(le,"value",null,Se.value,Y),(se=Se.onVnodeBeforeMount)&&Ar(se,Z,C)}Ce&&ho(C,null,Z,"beforeMount");const De=vN(re,Re);De&&Re.beforeEnter(le),r(le,V,B),((se=Se&&Se.onVnodeMounted)||De||Ce)&&rn(()=>{se&&Ar(se,Z,C),De&&Re.enter(le),Ce&&ho(C,null,Z,"mounted")},re)},R=(C,V,B,Z,re)=>{if(B&&E(C,B),Z)for(let Y=0;Y<Z.length;Y++)E(C,Z[Y]);if(re){let Y=re.subTree;if(V===Y||Df(Y.type)&&(Y.ssContent===V||Y.ssFallback===V)){const pe=re.vnode;R(C,pe,pe.scopeId,pe.slotScopeIds,re.parent)}}},S=(C,V,B,Z,re,Y,pe,fe,le=0)=>{for(let se=le;se<C.length;se++){const Se=C[se]=fe?ms(C[se]):Qr(C[se]);M(null,Se,V,B,Z,re,Y,pe,fe)}},A=(C,V,B,Z,re,Y,pe)=>{const fe=V.el=C.el;let{patchFlag:le,dynamicChildren:se,dirs:Se}=V;le|=C.patchFlag&16;const ge=C.props||It,Re=V.props||It;let Ce;if(B&&fo(B,!1),(Ce=Re.onVnodeBeforeUpdate)&&Ar(Ce,B,V,C),Se&&ho(V,C,B,"beforeUpdate"),B&&fo(B,!0),(ge.innerHTML&&Re.innerHTML==null||ge.textContent&&Re.textContent==null)&&p(fe,""),se?x(C.dynamicChildren,se,fe,B,Z,lg(V,re),Y):pe||Be(C,V,fe,null,B,Z,lg(V,re),Y,!1),le>0){if(le&16)k(fe,ge,Re,B,re);else if(le&2&&ge.class!==Re.class&&s(fe,"class",null,Re.class,re),le&4&&s(fe,"style",ge.style,Re.style,re),le&8){const De=V.dynamicProps;for(let Le=0;Le<De.length;Le++){const We=De[Le],Bt=ge[We],qt=Re[We];(qt!==Bt||We==="value")&&s(fe,We,Bt,qt,re,B)}}le&1&&C.children!==V.children&&p(fe,V.children)}else!pe&&se==null&&k(fe,ge,Re,B,re);((Ce=Re.onVnodeUpdated)||Se)&&rn(()=>{Ce&&Ar(Ce,B,V,C),Se&&ho(V,C,B,"updated")},Z)},x=(C,V,B,Z,re,Y,pe)=>{for(let fe=0;fe<V.length;fe++){const le=C[fe],se=V[fe],Se=le.el&&(le.type===Xn||!vs(le,se)||le.shapeFlag&198)?_(le.el):B;M(le,se,Se,null,Z,re,Y,pe,!0)}},k=(C,V,B,Z,re)=>{if(V!==B){if(V!==It)for(const Y in V)!Il(Y)&&!(Y in B)&&s(C,Y,V[Y],null,re,Z);for(const Y in B){if(Il(Y))continue;const pe=B[Y],fe=V[Y];pe!==fe&&Y!=="value"&&s(C,Y,fe,pe,re,Z)}"value"in B&&s(C,"value",V.value,B.value,re)}},O=(C,V,B,Z,re,Y,pe,fe,le)=>{const se=V.el=C?C.el:l(""),Se=V.anchor=C?C.anchor:l("");let{patchFlag:ge,dynamicChildren:Re,slotScopeIds:Ce}=V;Ce&&(fe=fe?fe.concat(Ce):Ce),C==null?(r(se,B,Z),r(Se,B,Z),S(V.children||[],B,Se,re,Y,pe,fe,le)):ge>0&&ge&64&&Re&&C.dynamicChildren?(x(C.dynamicChildren,Re,B,re,Y,pe,fe),(V.key!=null||re&&V===re.subTree)&&f_(C,V,!0)):Be(C,V,B,Se,re,Y,pe,fe,le)},P=(C,V,B,Z,re,Y,pe,fe,le)=>{V.slotScopeIds=fe,C==null?V.shapeFlag&512?re.ctx.activate(V,B,Z,pe,le):ce(V,B,Z,re,Y,pe,le):qe(C,V,le)},ce=(C,V,B,Z,re,Y,pe)=>{const fe=C.component=UN(C,Z,re);if(dd(C)&&(fe.ctx.renderer=be),BN(fe,!1,pe),fe.asyncDep){if(re&&re.registerDep(fe,Ye,pe),!C.el){const le=fe.subTree=jn(_n);Q(null,le,V,B),C.placeholder=le.el}}else Ye(fe,C,V,B,re,Y,pe)},qe=(C,V,B)=>{const Z=V.component=C.component;if(CN(C,V,B))if(Z.asyncDep&&!Z.asyncResolved){Te(Z,V,B);return}else Z.next=V,Z.update();else V.el=C.el,Z.vnode=V},Ye=(C,V,B,Z,re,Y,pe)=>{const fe=()=>{if(C.isMounted){let{next:ge,bu:Re,u:Ce,parent:De,vnode:Le}=C;{const Qt=v0(C);if(Qt){ge&&(ge.el=Le.el,Te(C,ge,pe)),Qt.asyncDep.then(()=>{C.isUnmounted||fe()});return}}let We=ge,Bt;fo(C,!1),ge?(ge.el=Le.el,Te(C,ge,pe)):ge=Le,Re&&Tl(Re),(Bt=ge.props&&ge.props.onVnodeBeforeUpdate)&&Ar(Bt,De,ge,Le),fo(C,!0);const qt=Tw(C),En=C.subTree;C.subTree=qt,M(En,qt,_(En.el),ee(En),C,re,Y),ge.el=qt.el,We===null&&xN(C,qt.el),Ce&&rn(Ce,re),(Bt=ge.props&&ge.props.onVnodeUpdated)&&rn(()=>Ar(Bt,De,ge,Le),re)}else{let ge;const{el:Re,props:Ce}=V,{bm:De,m:Le,parent:We,root:Bt,type:qt}=C,En=So(V);fo(C,!1),De&&Tl(De),!En&&(ge=Ce&&Ce.onVnodeBeforeMount)&&Ar(ge,We,V),fo(C,!0);{Bt.ce&&Bt.ce._def.shadowRoot!==!1&&Bt.ce._injectChildStyle(qt);const Qt=C.subTree=Tw(C);M(null,Qt,B,Z,C,re,Y),V.el=Qt.el}if(Le&&rn(Le,re),!En&&(ge=Ce&&Ce.onVnodeMounted)){const Qt=V;rn(()=>Ar(ge,We,Qt),re)}(V.shapeFlag&256||We&&So(We.vnode)&&We.vnode.shapeFlag&256)&&C.a&&rn(C.a,re),C.isMounted=!0,V=B=Z=null}};C.scope.on();const le=C.effect=new ST(fe);C.scope.off();const se=C.update=le.run.bind(le),Se=C.job=le.runIfDirty.bind(le);Se.i=C,Se.id=C.uid,le.scheduler=()=>s_(Se),fo(C,!0),se()},Te=(C,V,B)=>{V.component=C;const Z=C.vnode.props;C.vnode=V,C.next=null,fN(C,V.props,Z,B),mN(C,V.children,B),ki(),hw(C),Ni()},Be=(C,V,B,Z,re,Y,pe,fe,le=!1)=>{const se=C&&C.children,Se=C?C.shapeFlag:0,ge=V.children,{patchFlag:Re,shapeFlag:Ce}=V;if(Re>0){if(Re&128){wn(se,ge,B,Z,re,Y,pe,fe,le);return}else if(Re&256){Vn(se,ge,B,Z,re,Y,pe,fe,le);return}}Ce&8?(Se&16&&Xt(se,re,Y),ge!==se&&p(B,ge)):Se&16?Ce&16?wn(se,ge,B,Z,re,Y,pe,fe,le):Xt(se,re,Y,!0):(Se&8&&p(B,""),Ce&16&&S(ge,B,Z,re,Y,pe,fe,le))},Vn=(C,V,B,Z,re,Y,pe,fe,le)=>{C=C||Ua,V=V||Ua;const se=C.length,Se=V.length,ge=Math.min(se,Se);let Re;for(Re=0;Re<ge;Re++){const Ce=V[Re]=le?ms(V[Re]):Qr(V[Re]);M(C[Re],Ce,B,null,re,Y,pe,fe,le)}se>Se?Xt(C,re,Y,!0,!1,ge):S(V,B,Z,re,Y,pe,fe,le,ge)},wn=(C,V,B,Z,re,Y,pe,fe,le)=>{let se=0;const Se=V.length;let ge=C.length-1,Re=Se-1;for(;se<=ge&&se<=Re;){const Ce=C[se],De=V[se]=le?ms(V[se]):Qr(V[se]);if(vs(Ce,De))M(Ce,De,B,null,re,Y,pe,fe,le);else break;se++}for(;se<=ge&&se<=Re;){const Ce=C[ge],De=V[Re]=le?ms(V[Re]):Qr(V[Re]);if(vs(Ce,De))M(Ce,De,B,null,re,Y,pe,fe,le);else break;ge--,Re--}if(se>ge){if(se<=Re){const Ce=Re+1,De=Ce<Se?V[Ce].el:Z;for(;se<=Re;)M(null,V[se]=le?ms(V[se]):Qr(V[se]),B,De,re,Y,pe,fe,le),se++}}else if(se>Re)for(;se<=ge;)Rt(C[se],re,Y,!0),se++;else{const Ce=se,De=se,Le=new Map;for(se=De;se<=Re;se++){const $t=V[se]=le?ms(V[se]):Qr(V[se]);$t.key!=null&&Le.set($t.key,se)}let We,Bt=0;const qt=Re-De+1;let En=!1,Qt=0;const hr=new Array(qt);for(se=0;se<qt;se++)hr[se]=0;for(se=Ce;se<=ge;se++){const $t=C[se];if(Bt>=qt){Rt($t,re,Y,!0);continue}let In;if($t.key!=null)In=Le.get($t.key);else for(We=De;We<=Re;We++)if(hr[We-De]===0&&vs($t,V[We])){In=We;break}In===void 0?Rt($t,re,Y,!0):(hr[In-De]=se+1,In>=Qt?Qt=In:En=!0,M($t,V[In],B,null,re,Y,pe,fe,le),Bt++)}const ii=En?wN(hr):Ua;for(We=ii.length-1,se=qt-1;se>=0;se--){const $t=De+se,In=V[$t],Ki=V[$t+1],Gi=$t+1<Se?Ki.el||Ki.placeholder:Z;hr[se]===0?M(null,In,B,Gi,re,Y,pe,fe,le):En&&(We<0||se!==ii[We]?Dt(In,B,Gi,2):We--)}}},Dt=(C,V,B,Z,re=null)=>{const{el:Y,type:pe,transition:fe,children:le,shapeFlag:se}=C;if(se&6){Dt(C.component.subTree,V,B,Z);return}if(se&128){C.suspense.move(V,B,Z);return}if(se&64){pe.move(C,V,B,be);return}if(pe===Xn){r(Y,V,B);for(let ge=0;ge<le.length;ge++)Dt(le[ge],V,B,Z);r(C.anchor,V,B);return}if(pe===cg){z(C,V,B);return}if(Z!==2&&se&1&&fe)if(Z===0)fe.beforeEnter(Y),r(Y,V,B),rn(()=>fe.enter(Y),re);else{const{leave:ge,delayLeave:Re,afterLeave:Ce}=fe,De=()=>{C.ctx.isUnmounted?i(Y):r(Y,V,B)},Le=()=>{Y._isLeaving&&Y[bi](!0),ge(Y,()=>{De(),Ce&&Ce()})};Re?Re(Y,De,Le):Le()}else r(Y,V,B)},Rt=(C,V,B,Z=!1,re=!1)=>{const{type:Y,props:pe,ref:fe,children:le,dynamicChildren:se,shapeFlag:Se,patchFlag:ge,dirs:Re,cacheIndex:Ce}=C;if(ge===-2&&(re=!1),fe!=null&&(ki(),Rl(fe,null,B,C,!0),Ni()),Ce!=null&&(V.renderCache[Ce]=void 0),Se&256){V.ctx.deactivate(C);return}const De=Se&1&&Re,Le=!So(C);let We;if(Le&&(We=pe&&pe.onVnodeBeforeUnmount)&&Ar(We,V,C),Se&6)Ht(C.component,B,Z);else{if(Se&128){C.suspense.unmount(B,Z);return}De&&ho(C,null,V,"beforeUnmount"),Se&64?C.type.remove(C,V,B,be,Z):se&&!se.hasOnce&&(Y!==Xn||ge>0&&ge&64)?Xt(se,V,B,!1,!0):(Y===Xn&&ge&384||!re&&Se&16)&&Xt(le,V,B),Z&&Pt(C)}(Le&&(We=pe&&pe.onVnodeUnmounted)||De)&&rn(()=>{We&&Ar(We,V,C),De&&ho(C,null,V,"unmounted")},B)},Pt=C=>{const{type:V,el:B,anchor:Z,transition:re}=C;if(V===Xn){Br(B,Z);return}if(V===cg){G(C);return}const Y=()=>{i(B),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(C.shapeFlag&1&&re&&!re.persisted){const{leave:pe,delayLeave:fe}=re,le=()=>pe(B,Y);fe?fe(C.el,Y,le):le()}else Y()},Br=(C,V)=>{let B;for(;C!==V;)B=v(C),i(C),C=B;i(V)},Ht=(C,V,B)=>{const{bum:Z,scope:re,job:Y,subTree:pe,um:fe,m:le,a:se}=C;xf(le),xf(se),Z&&Tl(Z),re.stop(),Y&&(Y.flags|=8,Rt(pe,C,V,B)),fe&&rn(fe,V),rn(()=>{C.isUnmounted=!0},V)},Xt=(C,V,B,Z=!1,re=!1,Y=0)=>{for(let pe=Y;pe<C.length;pe++)Rt(C[pe],V,B,Z,re)},ee=C=>{if(C.shapeFlag&6)return ee(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const V=v(C.anchor||C.el),B=V&&V[QT];return B?v(B):V};let _e=!1;const de=(C,V,B)=>{C==null?V._vnode&&Rt(V._vnode,null,null,!0):M(V._vnode||null,C,V,null,null,null,B),V._vnode=C,_e||(_e=!0,hw(),KT(),_e=!1)},be={p:M,um:Rt,m:Dt,r:Pt,mt:ce,mc:S,pc:Be,pbc:x,n:ee,o:n};return{render:de,hydrate:void 0,createApp:lN(de)}}function lg({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function fo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function vN(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function f_(n,e,t=!1){const r=n.children,i=e.children;if(Ve(r)&&Ve(i))for(let s=0;s<r.length;s++){const a=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=ms(i[s]),l.el=a.el),!t&&l.patchFlag!==-2&&f_(a,l)),l.type===md&&l.patchFlag!==-1&&(l.el=a.el),l.type===_n&&!l.el&&(l.el=a.el)}}function wN(n){const e=n.slice(),t=[0];let r,i,s,a,l;const h=n.length;for(r=0;r<h;r++){const d=n[r];if(d!==0){if(i=t[t.length-1],n[i]<d){e[r]=i,t.push(r);continue}for(s=0,a=t.length-1;s<a;)l=s+a>>1,n[t[l]]<d?s=l+1:a=l;d<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function v0(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:v0(e)}function xf(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const EN=Symbol.for("v-scx"),IN=()=>Lr(EN);function $a(n,e,t){return w0(n,e,t)}function w0(n,e,t=It){const{immediate:r,deep:i,flush:s,once:a}=t,l=sn({},t),h=e&&r||!e&&s!=="post";let d;if(zl){if(s==="sync"){const E=IN();d=E.__watcherHandles||(E.__watcherHandles=[])}else if(!h){const E=()=>{};return E.stop=Zr,E.resume=Zr,E.pause=Zr,E}}const p=On;l.call=(E,N,M)=>Mr(E,p,N,M);let _=!1;s==="post"?l.scheduler=E=>{rn(E,p&&p.suspense)}:s!=="sync"&&(_=!0,l.scheduler=(E,N)=>{N?E():s_(E)}),l.augmentJob=E=>{e&&(E.flags|=4),_&&(E.flags|=2,p&&(E.id=p.uid,E.i=p))};const v=Nk(n,e,l);return zl&&(d?d.push(v):h&&v()),v}function TN(n,e,t){const r=this.proxy,i=Vt(n)?n.includes(".")?E0(r,n):()=>r[n]:n.bind(r,r);let s;Ke(e)?s=e:(s=e.handler,t=e);const a=pc(this),l=w0(i,s.bind(r),t);return a(),l}function E0(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const bN=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Rr(e)}Modifiers`]||n[`${zo(e)}Modifiers`];function AN(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||It;let i=t;const s=e.startsWith("update:"),a=s&&bN(r,e.slice(7));a&&(a.trim&&(i=t.map(p=>Vt(p)?p.trim():p)),a.number&&(i=t.map(JO)));let l,h=r[l=tg(e)]||r[l=tg(Rr(e))];!h&&s&&(h=r[l=tg(zo(e))]),h&&Mr(h,n,6,i);const d=r[l+"Once"];if(d){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,Mr(d,n,6,i)}}const SN=new WeakMap;function I0(n,e,t=!1){const r=t?SN:e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let a={},l=!1;if(!Ke(n)){const h=d=>{const p=I0(d,e,!0);p&&(l=!0,sn(a,p))};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}return!s&&!l?(At(n)&&r.set(n,null),null):(Ve(s)?s.forEach(h=>a[h]=null):sn(a,s),At(n)&&r.set(n,a),a)}function gd(n,e){return!n||!ad(e)?!1:(e=e.slice(2).replace(/Once$/,""),gt(n,e[0].toLowerCase()+e.slice(1))||gt(n,zo(e))||gt(n,e))}function Tw(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:l,emit:h,render:d,renderCache:p,props:_,data:v,setupState:E,ctx:N,inheritAttrs:M}=n,F=Rf(n);let Q,j;try{if(t.shapeFlag&4){const G=i||r,J=G;Q=Qr(d.call(J,G,p,_,E,v,N)),j=l}else{const G=e;Q=Qr(G.length>1?G(_,{attrs:l,slots:a,emit:h}):G(_,null)),j=e.props?l:RN(l)}}catch(G){Cl.length=0,fd(G,n,1),Q=jn(_n)}let z=Q;if(j&&M!==!1){const G=Object.keys(j),{shapeFlag:J}=z;G.length&&J&7&&(s&&G.some(Gm)&&(j=PN(j,s)),z=Vi(z,j,!1,!0))}return t.dirs&&(z=Vi(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(t.dirs):t.dirs),t.transition&&Ns(z,t.transition),Q=z,Rf(F),Q}const RN=n=>{let e;for(const t in n)(t==="class"||t==="style"||ad(t))&&((e||(e={}))[t]=n[t]);return e},PN=(n,e)=>{const t={};for(const r in n)(!Gm(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function CN(n,e,t){const{props:r,children:i,component:s}=n,{props:a,children:l,patchFlag:h}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&h>=0){if(h&1024)return!0;if(h&16)return r?bw(r,a,d):!!a;if(h&8){const p=e.dynamicProps;for(let _=0;_<p.length;_++){const v=p[_];if(a[v]!==r[v]&&!gd(d,v))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?bw(r,a,d):!0:!!a;return!1}function bw(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!gd(t,s))return!0}return!1}function xN({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Df=n=>n.__isSuspense;function DN(n,e){e&&e.pendingBranch?Ve(n)?e.effects.push(...n):e.effects.push(n):Mk(n)}const Xn=Symbol.for("v-fgt"),md=Symbol.for("v-txt"),_n=Symbol.for("v-cmt"),cg=Symbol.for("v-stc"),Cl=[];let or=null;function Of(n=!1){Cl.push(or=n?null:[])}function ON(){Cl.pop(),or=Cl[Cl.length-1]||null}let jl=1;function kf(n,e=!1){jl+=n,n<0&&or&&e&&(or.hasOnce=!0)}function T0(n){return n.dynamicChildren=jl>0?or||Ua:null,ON(),jl>0&&or&&or.push(n),n}function r6(n,e,t,r,i,s){return T0(A0(n,e,t,r,i,s,!0))}function Nf(n,e,t,r,i){return T0(jn(n,e,t,r,i,!0))}function Wa(n){return n?n.__v_isVNode===!0:!1}function vs(n,e){return n.type===e.type&&n.key===e.key}const b0=({key:n})=>n!=null?n:null,of=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Vt(n)||Gt(n)||Ke(n)?{i:yn,r:n,k:e,f:!!t}:n:null);function A0(n,e=null,t=null,r=0,i=null,s=n===Xn?0:1,a=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&b0(e),ref:e&&of(e),scopeId:WT,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:yn};return l?(d_(h,t),s&128&&n.normalize(h)):t&&(h.shapeFlag|=Vt(t)?8:16),jl>0&&!a&&or&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&or.push(h),h}const jn=kN;function kN(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===eN)&&(n=_n),Wa(n)){const l=Vi(n,e,!0);return t&&d_(l,t),jl>0&&!s&&or&&(l.shapeFlag&6?or[or.indexOf(n)]=l:or.push(l)),l.patchFlag=-2,l}if(zN(n)&&(n=n.__vccOpts),e){e=NN(e);let{class:l,style:h}=e;l&&!Vt(l)&&(e.class=Jm(l)),At(h)&&(r_(h)&&!Ve(h)&&(h=sn({},h)),e.style=Qm(h))}const a=Vt(n)?1:Df(n)?128:JT(n)?64:At(n)?4:Ke(n)?2:0;return A0(n,e,t,r,i,a,s,!0)}function NN(n){return n?r_(n)||d0(n)?sn({},n):n:null}function Vi(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:l,transition:h}=n,d=e?LN(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:n.type,props:d,key:d&&b0(d),ref:e&&e.ref?t&&s?Ve(s)?s.concat(of(e)):[s,of(e)]:of(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Xn?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:h,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Vi(n.ssContent),ssFallback:n.ssFallback&&Vi(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return h&&r&&Ns(p,h.clone(p)),p}function VN(n=" ",e=0){return jn(md,null,n,e)}function i6(n="",e=!1){return e?(Of(),Nf(_n,null,n)):jn(_n,null,n)}function Qr(n){return n==null||typeof n=="boolean"?jn(_n):Ve(n)?jn(Xn,null,n.slice()):Wa(n)?ms(n):jn(md,null,String(n))}function ms(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Vi(n)}function d_(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Ve(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),d_(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!d0(e)?e._ctx=yn:i===3&&yn&&(yn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:yn},t=32):(e=String(e),r&64?(t=16,e=[VN(e)]):t=8);n.children=e,n.shapeFlag|=t}function LN(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Jm([e.class,r.class]));else if(i==="style")e.style=Qm([e.style,r.style]);else if(ad(i)){const s=e[i],a=r[i];a&&s!==a&&!(Ve(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Ar(n,e,t,r=null){Mr(n,e,7,[t,r])}const MN=c0();let FN=0;function UN(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||MN,s={uid:FN++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new TT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:g0(r,i),emitsOptions:I0(r,i),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=AN.bind(null,s),n.ce&&n.ce(s),s}let On=null;const Fs=()=>On||yn;let Vf,Yg;{const n=cd(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};Vf=e("__VUE_INSTANCE_SETTERS__",t=>On=t),Yg=e("__VUE_SSR_SETTERS__",t=>zl=t)}const pc=n=>{const e=On;return Vf(n),n.scope.on(),()=>{n.scope.off(),Vf(e)}},Aw=()=>{On&&On.scope.off(),Vf(null)};function S0(n){return n.vnode.shapeFlag&4}let zl=!1;function BN(n,e=!1,t=!1){e&&Yg(e);const{props:r,children:i}=n.vnode,s=S0(n);hN(n,r,s,e),gN(n,i,t||e);const a=s?qN(n,e):void 0;return e&&Yg(!1),a}function qN(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,nN);const{setup:r}=t;if(r){ki();const i=n.setupContext=r.length>1?jN(n):null,s=pc(n),a=fc(r,n,0,[n.props,i]),l=mT(a);if(Ni(),s(),(l||n.sp)&&!So(n)&&i0(n),l){if(a.then(Aw,Aw),e)return a.then(h=>{Sw(n,h)}).catch(h=>{fd(h,n,0)});n.asyncDep=a}else Sw(n,a)}else R0(n)}function Sw(n,e,t){Ke(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:At(e)&&(n.setupState=$T(e)),R0(n)}function R0(n,e,t){const r=n.type;n.render||(n.render=r.render||Zr);{const i=pc(n);ki();try{rN(n)}finally{Ni(),i()}}}const $N={get(n,e){return Dn(n,"get",""),n[e]}};function jN(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,$N),slots:n.slots,emit:n.emit,expose:e}}function _d(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy($T(Go(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Pl)return Pl[t](n)},has(e,t){return t in e||t in Pl}})):n.proxy}function Xg(n,e=!0){return Ke(n)?n.displayName||n.name:n.name||e&&n.__name}function zN(n){return Ke(n)&&"__vccOpts"in n}const Ue=(n,e)=>Ok(n,e,zl);function Fe(n,e,t){try{kf(-1);const r=arguments.length;return r===2?At(e)&&!Ve(e)?Wa(e)?jn(n,null,[e]):jn(n,e):jn(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Wa(t)&&(t=[t]),jn(n,e,t))}finally{kf(1)}}const KN="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zg;const Rw=typeof window!="undefined"&&window.trustedTypes;if(Rw)try{Zg=Rw.createPolicy("vue",{createHTML:n=>n})}catch{}const P0=Zg?n=>Zg.createHTML(n):n=>n,GN="http://www.w3.org/2000/svg",WN="http://www.w3.org/1998/Math/MathML",Ti=typeof document!="undefined"?document:null,Pw=Ti&&Ti.createElement("template"),HN={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Ti.createElementNS(GN,n):e==="mathml"?Ti.createElementNS(WN,n):t?Ti.createElement(n,{is:t}):Ti.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Ti.createTextNode(n),createComment:n=>Ti.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ti.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const a=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{Pw.innerHTML=P0(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const l=Pw.content;if(r==="svg"||r==="mathml"){const h=l.firstChild;for(;h.firstChild;)l.appendChild(h.firstChild);l.removeChild(h)}e.insertBefore(l,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},us="transition",Xu="animation",Ha=Symbol("_vtc"),C0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},x0=sn({},e0,C0),QN=n=>(n.displayName="Transition",n.props=x0,n),JN=QN((n,{slots:e})=>Fe(qk,D0(n),e)),po=(n,e=[])=>{Ve(n)?n.forEach(t=>t(...e)):n&&n(...e)},Cw=n=>n?Ve(n)?n.some(e=>e.length>1):n.length>1:!1;function D0(n){const e={};for(const O in n)O in C0||(e[O]=n[O]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:h=s,appearActiveClass:d=a,appearToClass:p=l,leaveFromClass:_=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:E=`${t}-leave-to`}=n,N=YN(i),M=N&&N[0],F=N&&N[1],{onBeforeEnter:Q,onEnter:j,onEnterCancelled:z,onLeave:G,onLeaveCancelled:J,onBeforeAppear:oe=Q,onAppear:R=j,onAppearCancelled:S=z}=e,A=(O,P,ce,qe)=>{O._enterCancelled=qe,ds(O,P?p:l),ds(O,P?d:a),ce&&ce()},x=(O,P)=>{O._isLeaving=!1,ds(O,_),ds(O,E),ds(O,v),P&&P()},k=O=>(P,ce)=>{const qe=O?R:j,Ye=()=>A(P,O,ce);po(qe,[P,Ye]),xw(()=>{ds(P,O?h:s),Wr(P,O?p:l),Cw(qe)||Dw(P,r,M,Ye)})};return sn(e,{onBeforeEnter(O){po(Q,[O]),Wr(O,s),Wr(O,a)},onBeforeAppear(O){po(oe,[O]),Wr(O,h),Wr(O,d)},onEnter:k(!1),onAppear:k(!0),onLeave(O,P){O._isLeaving=!0;const ce=()=>x(O,P);Wr(O,_),O._enterCancelled?(Wr(O,v),em(O)):(em(O),Wr(O,v)),xw(()=>{O._isLeaving&&(ds(O,_),Wr(O,E),Cw(G)||Dw(O,r,F,ce))}),po(G,[O,ce])},onEnterCancelled(O){A(O,!1,void 0,!0),po(z,[O])},onAppearCancelled(O){A(O,!0,void 0,!0),po(S,[O])},onLeaveCancelled(O){x(O),po(J,[O])}})}function YN(n){if(n==null)return null;if(At(n))return[hg(n.enter),hg(n.leave)];{const e=hg(n);return[e,e]}}function hg(n){return YO(n)}function Wr(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ha]||(n[Ha]=new Set)).add(e)}function ds(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ha];t&&(t.delete(e),t.size||(n[Ha]=void 0))}function xw(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let XN=0;function Dw(n,e,t,r){const i=n._endId=++XN,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:l,propCount:h}=O0(n,e);if(!a)return r();const d=a+"end";let p=0;const _=()=>{n.removeEventListener(d,v),s()},v=E=>{E.target===n&&++p>=h&&_()};setTimeout(()=>{p<h&&_()},l+1),n.addEventListener(d,v)}function O0(n,e){const t=window.getComputedStyle(n),r=N=>(t[N]||"").split(", "),i=r(`${us}Delay`),s=r(`${us}Duration`),a=Ow(i,s),l=r(`${Xu}Delay`),h=r(`${Xu}Duration`),d=Ow(l,h);let p=null,_=0,v=0;e===us?a>0&&(p=us,_=a,v=s.length):e===Xu?d>0&&(p=Xu,_=d,v=h.length):(_=Math.max(a,d),p=_>0?a>d?us:Xu:null,v=p?p===us?s.length:h.length:0);const E=p===us&&/\b(?:transform|all)(?:,|$)/.test(r(`${us}Property`).toString());return{type:p,timeout:_,propCount:v,hasTransform:E}}function Ow(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>kw(t)+kw(n[r])))}function kw(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function em(n){return(n?n.ownerDocument:document).body.offsetHeight}function ZN(n,e,t){const r=n[Ha];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Lf=Symbol("_vod"),k0=Symbol("_vsh"),s6={name:"show",beforeMount(n,{value:e},{transition:t}){n[Lf]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Zu(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Zu(n,!0),r.enter(n)):r.leave(n,()=>{Zu(n,!1)}):Zu(n,e))},beforeUnmount(n,{value:e}){Zu(n,e)}};function Zu(n,e){n.style.display=e?n[Lf]:"none",n[k0]=!e}const eV=Symbol(""),tV=/(?:^|;)\s*display\s*:/;function nV(n,e,t){const r=n.style,i=Vt(t);let s=!1;if(t&&!i){if(e)if(Vt(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();t[l]==null&&af(r,l,"")}else for(const a in e)t[a]==null&&af(r,a,"");for(const a in t)a==="display"&&(s=!0),af(r,a,t[a])}else if(i){if(e!==t){const a=r[eV];a&&(t+=";"+a),r.cssText=t,s=tV.test(t)}}else e&&n.removeAttribute("style");Lf in n&&(n[Lf]=s?r.display:"",n[k0]&&(r.display="none"))}const Nw=/\s*!important$/;function af(n,e,t){if(Ve(t))t.forEach(r=>af(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=rV(n,e);Nw.test(t)?n.setProperty(zo(r),t.replace(Nw,""),"important"):n[r]=t}}const Vw=["Webkit","Moz","ms"],fg={};function rV(n,e){const t=fg[e];if(t)return t;let r=Rr(e);if(r!=="filter"&&r in n)return fg[e]=r;r=ld(r);for(let i=0;i<Vw.length;i++){const s=Vw[i]+r;if(s in n)return fg[e]=s}return e}const Lw="http://www.w3.org/1999/xlink";function Mw(n,e,t,r,i,s=rk(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Lw,e.slice(6,e.length)):n.setAttributeNS(Lw,e,t):t==null||s&&!wT(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Ui(t)?String(t):t)}function Fw(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?P0(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?n.getAttribute("value")||"":n.value,h=t==null?n.type==="checkbox"?"on":"":String(t);(l!==h||!("_value"in n))&&(n.value=h),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=wT(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(i||e)}function iV(n,e,t,r){n.addEventListener(e,t,r)}function sV(n,e,t,r){n.removeEventListener(e,t,r)}const Uw=Symbol("_vei");function oV(n,e,t,r,i=null){const s=n[Uw]||(n[Uw]={}),a=s[e];if(r&&a)a.value=r;else{const[l,h]=aV(e);if(r){const d=s[e]=cV(r,i);iV(n,l,d,h)}else a&&(sV(n,l,a,h),s[e]=void 0)}}const Bw=/(?:Once|Passive|Capture)$/;function aV(n){let e;if(Bw.test(n)){e={};let r;for(;r=n.match(Bw);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):zo(n.slice(2)),e]}let dg=0;const uV=Promise.resolve(),lV=()=>dg||(uV.then(()=>dg=0),dg=Date.now());function cV(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Mr(hV(r,t.value),e,5,[r])};return t.value=n,t.attached=lV(),t}function hV(n,e){if(Ve(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const qw=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,fV=(n,e,t,r,i,s)=>{const a=i==="svg";e==="class"?ZN(n,r,a):e==="style"?nV(n,t,r):ad(e)?Gm(e)||oV(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dV(n,e,r,a))?(Fw(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Mw(n,e,r,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Vt(r))?Fw(n,Rr(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Mw(n,e,r,a))};function dV(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&qw(e)&&Ke(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return qw(e)&&Vt(t)?!1:e in n}const N0=new WeakMap,V0=new WeakMap,Mf=Symbol("_moveCb"),$w=Symbol("_enterCb"),pV=n=>(delete n.props.mode,n),gV=pV({name:"TransitionGroup",props:sn({},x0,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Fs(),r=ZT();let i,s;return l_(()=>{if(!i.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!wV(i[0].el,t.vnode.el,a)){i=[];return}i.forEach(_V),i.forEach(yV);const l=i.filter(vV);em(t.vnode.el),l.forEach(h=>{const d=h.el,p=d.style;Wr(d,a),p.transform=p.webkitTransform=p.transitionDuration="";const _=d[Mf]=v=>{v&&v.target!==d||(!v||v.propertyName.endsWith("transform"))&&(d.removeEventListener("transitionend",_),d[Mf]=null,ds(d,a))};d.addEventListener("transitionend",_)}),i=[]}),()=>{const a=at(n),l=D0(a);let h=a.tag||Xn;if(i=[],s)for(let d=0;d<s.length;d++){const p=s[d];p.el&&p.el instanceof Element&&(i.push(p),Ns(p,$l(p,l,r,t)),N0.set(p,p.el.getBoundingClientRect()))}s=e.default?o_(e.default()):[];for(let d=0;d<s.length;d++){const p=s[d];p.key!=null&&Ns(p,$l(p,l,r,t))}return jn(h,null,s)}}}),mV=gV;function _V(n){const e=n.el;e[Mf]&&e[Mf](),e[$w]&&e[$w]()}function yV(n){V0.set(n,n.el.getBoundingClientRect())}function vV(n){const e=N0.get(n),t=V0.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function wV(n,e,t){const r=n.cloneNode(),i=n[Ha];i&&i.forEach(l=>{l.split(/\s+/).forEach(h=>h&&r.classList.remove(h))}),t.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:a}=O0(r);return s.removeChild(r),a}const EV=["ctrl","shift","alt","meta"],IV={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>EV.some(t=>n[`${t}Key`]&&!e.includes(t))},o6=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=((i,...s)=>{for(let a=0;a<e.length;a++){const l=IV[e[a]];if(l&&l(i,e))return}return n(i,...s)}))},TV=sn({patchProp:fV},HN);let jw;function bV(){return jw||(jw=_N(TV))}const L0=((...n)=>{const e=bV().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=SV(r);if(!i)return;const s=e._component;!Ke(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,AV(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e});function AV(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function SV(n){return Vt(n)?document.querySelector(n):n}function yd(n,e,t,r){return Object.defineProperty(n,e,{get:t,set:r,enumerable:!0}),n}function a6(n,e){for(const t in e)yd(n,t,e[t]);return n}const Do=xo(!1);let tm;function RV(n,e){const t=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(n)||/(opr)[\/]([\w.]+)/.exec(n)||/(vivaldi)[\/]([\w.]+)/.exec(n)||/(chrome|crios)[\/]([\w.]+)/.exec(n)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(firefox|fxios)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(n)||[];return{browser:t[5]||t[3]||t[1]||"",version:t[4]||t[2]||"0",platform:e[0]||""}}function PV(n){return/(ipad)/.exec(n)||/(ipod)/.exec(n)||/(windows phone)/.exec(n)||/(iphone)/.exec(n)||/(kindle)/.exec(n)||/(silk)/.exec(n)||/(android)/.exec(n)||/(win)/.exec(n)||/(mac)/.exec(n)||/(linux)/.exec(n)||/(cros)/.exec(n)||/(playbook)/.exec(n)||/(bb)/.exec(n)||/(blackberry)/.exec(n)||[]}const M0="ontouchstart"in window||window.navigator.maxTouchPoints>0;function CV(n){const e=n.toLowerCase(),t=PV(e),r=RV(e,t),i={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(i[r.browser]=!0,i.version=r.version,i.versionNumber=parseInt(r.version,10)),r.platform&&(i[r.platform]=!0);const s=i.android||i.ios||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"];if(s===!0||e.indexOf("mobile")!==-1?i.mobile=!0:i.desktop=!0,i["windows phone"]&&(i.winphone=!0,delete i["windows phone"]),i.edga||i.edgios||i.edg?(i.edge=!0,r.browser="edge"):i.crios?(i.chrome=!0,r.browser="chrome"):i.fxios&&(i.firefox=!0,r.browser="firefox"),(i.ipod||i.ipad||i.iphone)&&(i.ios=!0),i.vivaldi&&(r.browser="vivaldi",i.vivaldi=!0),(i.chrome||i.opr||i.safari||i.vivaldi||i.mobile===!0&&i.ios!==!0&&s!==!0)&&(i.webkit=!0),i.opr&&(r.browser="opera",i.opera=!0),i.safari&&(i.blackberry||i.bb?(r.browser="blackberry",i.blackberry=!0):i.playbook?(r.browser="playbook",i.playbook=!0):i.android?(r.browser="android",i.android=!0):i.kindle?(r.browser="kindle",i.kindle=!0):i.silk&&(r.browser="silk",i.silk=!0)),i.name=r.browser,i.platform=r.platform,e.indexOf("electron")!==-1)i.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)i.bex=!0;else{if(window.Capacitor!==void 0?(i.capacitor=!0,i.nativeMobile=!0,i.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(i.cordova=!0,i.nativeMobile=!0,i.nativeMobileWrapper="cordova"),Do.value===!0&&(tm={is:{...i}}),M0===!0&&i.mac===!0&&(i.desktop===!0&&i.safari===!0||i.nativeMobile===!0&&i.android!==!0&&i.ios!==!0&&i.ipad!==!0)){delete i.mac,delete i.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(i,{mobile:!0,ios:!0,platform:a,[a]:!0})}i.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete i.desktop,i.mobile=!0)}return i}const zw=navigator.userAgent||navigator.vendor||window.opera,xV={has:{touch:!1,webStorage:!1},within:{iframe:!1}},ei={userAgent:zw,is:CV(zw),has:{touch:M0},within:{iframe:window.self!==window.top}},nm={install(n){const{$q:e}=n;Do.value===!0?(n.onSSRHydrated.push(()=>{Object.assign(e.platform,ei),Do.value=!1}),e.platform=Ko(this)):e.platform=this}};{let n;yd(ei.has,"webStorage",()=>{if(n!==void 0)return n;try{if(window.localStorage)return n=!0,!0}catch{}return n=!1,!1}),Object.assign(nm,ei),Do.value===!0&&(Object.assign(nm,tm,xV),tm=null)}function gc(n){return Go(a_(n))}function DV(n){return Go(n)}const vd=(n,e)=>{const t=Ko(n);for(const r in n)yd(e,r,()=>t[r],i=>{t[r]=i});return e},Oo={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const n=Object.defineProperty({},"passive",{get(){Object.assign(Oo,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,n),window.removeEventListener("qtest",null,n)}catch{}function Kl(){}function u6(n){return n.button===0}function OV(n){return n.touches&&n.touches[0]?n=n.touches[0]:n.changedTouches&&n.changedTouches[0]?n=n.changedTouches[0]:n.targetTouches&&n.targetTouches[0]&&(n=n.targetTouches[0]),{top:n.clientY,left:n.clientX}}function l6(n){if(n.path)return n.path;if(n.composedPath)return n.composedPath();const e=[];let t=n.target;for(;t;){if(e.push(t),t.tagName==="HTML")return e.push(document),e.push(window),e;t=t.parentElement}}function F0(n){n.stopPropagation()}function rm(n){n.cancelable!==!1&&n.preventDefault()}function Ea(n){n.cancelable!==!1&&n.preventDefault(),n.stopPropagation()}function c6(n,e){if(n===void 0||e===!0&&n.__dragPrevented===!0)return;const t=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",rm,Oo.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",rm,Oo.notPassiveCapture)};n.querySelectorAll("a, img").forEach(t)}function kV(n,e,t){const r=`__q_${e}_evt`;n[r]=n[r]!==void 0?n[r].concat(t):t,t.forEach(i=>{i[0].addEventListener(i[1],n[i[2]],Oo[i[3]])})}function NV(n,e){const t=`__q_${e}_evt`;n[t]!==void 0&&(n[t].forEach(r=>{r[0].removeEventListener(r[1],n[r[2]],Oo[r[3]])}),n[t]=void 0)}function VV(n,e=250,t){let r=null;function i(){const s=arguments,a=()=>{r=null,n.apply(this,s)};r!==null&&clearTimeout(r),r=setTimeout(a,e)}return i.cancel=()=>{r!==null&&clearTimeout(r)},i}const pg=["sm","md","lg","xl"],{passive:Kw}=Oo,LV=vd({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Kl,setDebounce:Kl,install({$q:n,onSSRHydrated:e}){var _;if(n.screen=this,this.__installed===!0){n.config.screen!==void 0&&(n.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:t}=window,r=t||window,i=document.scrollingElement||document.documentElement,s=t===void 0||ei.is.mobile===!0?()=>[Math.max(window.innerWidth,i.clientWidth),Math.max(window.innerHeight,i.clientHeight)]:()=>[t.width*t.scale+window.innerWidth-i.clientWidth,t.height*t.scale+window.innerHeight-i.clientHeight],a=((_=n.config.screen)==null?void 0:_.bodyClasses)===!0;this.__update=v=>{const[E,N]=s();if(N!==this.height&&(this.height=N),E!==this.width)this.width=E;else if(v!==!0)return;let M=this.sizes;this.gt.xs=E>=M.sm,this.gt.sm=E>=M.md,this.gt.md=E>=M.lg,this.gt.lg=E>=M.xl,this.lt.sm=E<M.sm,this.lt.md=E<M.md,this.lt.lg=E<M.lg,this.lt.xl=E<M.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,M=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",M!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${M}`)),this.name=M)};let l,h={},d=16;this.setSizes=v=>{pg.forEach(E=>{v[E]!==void 0&&(h[E]=v[E])})},this.setDebounce=v=>{d=v};const p=()=>{const v=getComputedStyle(document.body);v.getPropertyValue("--q-size-sm")&&pg.forEach(E=>{this.sizes[E]=parseInt(v.getPropertyValue(`--q-size-${E}`),10)}),this.setSizes=E=>{pg.forEach(N=>{E[N]&&(this.sizes[N]=E[N])}),this.__update(!0)},this.setDebounce=E=>{l!==void 0&&r.removeEventListener("resize",l,Kw),l=E>0?VV(this.__update,E):this.__update,r.addEventListener("resize",l,Kw)},this.setDebounce(d),Object.keys(h).length!==0?(this.setSizes(h),h=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Do.value===!0?e.push(p):p()}}),Pn=vd({isActive:!1,mode:!1},{__media:void 0,set(n){Pn.mode=n,n==="auto"?(Pn.__media===void 0&&(Pn.__media=window.matchMedia("(prefers-color-scheme: dark)"),Pn.__updateMedia=()=>{Pn.set("auto")},Pn.__media.addListener(Pn.__updateMedia)),n=Pn.__media.matches):Pn.__media!==void 0&&(Pn.__media.removeListener(Pn.__updateMedia),Pn.__media=void 0),Pn.isActive=n===!0,document.body.classList.remove(`body--${n===!0?"light":"dark"}`),document.body.classList.add(`body--${n===!0?"dark":"light"}`)},toggle(){Pn.set(Pn.isActive===!1)},install({$q:n,ssrContext:e}){const t=n.config.dark;n.dark=this,this.__installed!==!0&&this.set(t!==void 0?t:!1)}});function MV(n,e,t=document.body){if(typeof n!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(t instanceof Element))throw new TypeError("Expected a DOM element");t.style.setProperty(`--q-${n}`,e)}let U0=!1;function FV(n){U0=n.isComposing===!0}function UV(n){return U0===!0||n!==Object(n)||n.isComposing===!0||n.qKeyEvent===!0}function im(n,e){return UV(n)===!0?!1:[].concat(e).includes(n.keyCode)}function B0(n){if(n.ios===!0)return"ios";if(n.android===!0)return"android"}function BV({is:n,has:e,within:t},r){const i=[n.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(n.mobile===!0){const s=B0(n);s!==void 0&&i.push("platform-"+s)}if(n.nativeMobile===!0){const s=n.nativeMobileWrapper;i.push(s),i.push("native-mobile"),n.ios===!0&&(r[s]===void 0||r[s].iosStatusBarPadding!==!1)&&i.push("q-ios-padding")}else n.electron===!0?i.push("electron"):n.bex===!0&&i.push("bex");return t.iframe===!0&&i.push("within-iframe"),i}function qV(){const{is:n}=ei,e=document.body.className,t=new Set(e.replace(/ {2}/g," ").split(" "));if(n.nativeMobile!==!0&&n.electron!==!0&&n.bex!==!0){if(n.desktop===!0)t.delete("mobile"),t.delete("platform-ios"),t.delete("platform-android"),t.add("desktop");else if(n.mobile===!0){t.delete("desktop"),t.add("mobile"),t.delete("platform-ios"),t.delete("platform-android");const i=B0(n);i!==void 0&&t.add(`platform-${i}`)}}ei.has.touch===!0&&(t.delete("no-touch"),t.add("touch")),ei.within.iframe===!0&&t.add("within-iframe");const r=Array.from(t).join(" ");e!==r&&(document.body.className=r)}function $V(n){for(const e in n)MV(e,n[e])}const jV={install(n){if(this.__installed!==!0){if(Do.value===!0)qV();else{const{$q:e}=n;e.config.brand!==void 0&&$V(e.config.brand);const t=BV(ei,e.config);document.body.classList.add.apply(document.body.classList,t)}ei.is.ios===!0&&document.body.addEventListener("touchstart",Kl),window.addEventListener("keydown",FV,!0)}}},q0=()=>!0;function zV(n){return typeof n=="string"&&n!==""&&n!=="/"&&n!=="#/"}function KV(n){return n.startsWith("#")===!0&&(n=n.substring(1)),n.startsWith("/")===!1&&(n="/"+n),n.endsWith("/")===!0&&(n=n.substring(0,n.length-1)),"#"+n}function GV(n){if(n.backButtonExit===!1)return()=>!1;if(n.backButtonExit==="*")return q0;const e=["#/"];return Array.isArray(n.backButtonExit)===!0&&e.push(...n.backButtonExit.filter(zV).map(KV)),()=>e.includes(window.location.hash)}const WV={__history:[],add:Kl,remove:Kl,install({$q:n}){if(this.__installed===!0)return;const{cordova:e,capacitor:t}=ei.is;if(e!==!0&&t!==!0)return;const r=n.config[e===!0?"cordova":"capacitor"];if((r==null?void 0:r.backButton)===!1||t===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=a=>{a.condition===void 0&&(a.condition=q0),this.__history.push(a)},this.remove=a=>{const l=this.__history.indexOf(a);l>=0&&this.__history.splice(l,1)};const i=GV(Object.assign({backButtonExit:!0},r)),s=()=>{if(this.__history.length){const a=this.__history[this.__history.length-1];a.condition()===!0&&(this.__history.pop(),a.handler())}else i()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",s,!1)}):window.Capacitor.Plugins.App.addListener("backButton",s)}},Gw={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:n=>n?`Expand "${n}"`:"Expand",collapse:n=>n?`Collapse "${n}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:n=>`Previous ${n} years`,nextRangeYears:n=>`Next ${n} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:n=>n===1?"1 record selected.":(n===0?"No":n)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(n,e,t)=>n+"-"+e+" of "+t,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Ww(){const n=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof n=="string")return n.split(/[-_]/).map((e,t)=>t===0?e.toLowerCase():t>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const _s=vd({__qLang:{}},{getLocale:Ww,set(n=Gw,e){const t={...n,rtl:n.rtl===!0,getLocale:Ww};{if(t.set=_s.set,_s.__langConfig===void 0||_s.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",t.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",t.isoName)}Object.assign(_s.__qLang,t)}},install({$q:n,lang:e,ssrContext:t}){n.lang=_s.__qLang,_s.__langConfig=n.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set"&&i!=="getLocale")}}),this.set(e||Gw))}}),HV={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},Ff=vd({iconMapFn:null,__qIconSet:{}},{set(n,e){const t={...n};t.set=Ff.set,Object.assign(Ff.__qIconSet,t)},install({$q:n,iconSet:e,ssrContext:t}){n.config.iconMapFn!==void 0&&(this.iconMapFn=n.config.iconMapFn),n.iconSet=this.__qIconSet,yd(n,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set")}}),this.set(e||HV))}}),QV="_q_",h6="_q_l_",f6="_q_pc_",d6="_q_fo_",p6="_q_tabs_";function g6(){}const Uf={};let $0=!1;function JV(){$0=!0}function gg(n,e){if(n===e)return!0;if(n!==null&&e!==null&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;let t,r;if(n.constructor===Array){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(gg(n[r],e[r])!==!0)return!1;return!0}if(n.constructor===Map){if(n.size!==e.size)return!1;let s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}for(s=n.entries(),r=s.next();r.done!==!0;){if(gg(r.value[1],e.get(r.value[0]))!==!0)return!1;r=s.next()}return!0}if(n.constructor===Set){if(n.size!==e.size)return!1;const s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}return!0}if(n.buffer!=null&&n.buffer.constructor===ArrayBuffer){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const i=Object.keys(n).filter(s=>n[s]!==void 0);if(t=i.length,t!==Object.keys(e).filter(s=>e[s]!==void 0).length)return!1;for(r=t;r--!==0;){const s=i[r];if(gg(n[s],e[s])!==!0)return!1}return!0}return n!==n&&e!==e}function Gl(n){return n!==null&&typeof n=="object"&&Array.isArray(n)!==!0}function m6(n){return Object.prototype.toString.call(n)==="[object Date]"}function _6(n){return typeof n=="number"&&isFinite(n)}const Hw=[nm,jV,Pn,LV,WV,_s,Ff];function YV(n,e){const t=L0(n);t.config.globalProperties=e.config.globalProperties;const{reload:r,...i}=e._context;return Object.assign(t._context,i),t}function Qw(n,e){e.forEach(t=>{t.install(n),t.__installed=!0})}function XV(n,e,t){n.config.globalProperties.$q=t.$q,n.provide(QV,t.$q),Qw(t,Hw),e.components!==void 0&&Object.values(e.components).forEach(r=>{Gl(r)===!0&&r.name!==void 0&&n.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{Gl(r)===!0&&r.name!==void 0&&n.directive(r.name,r)}),e.plugins!==void 0&&Qw(t,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&Hw.includes(r)===!1)),Do.value===!0&&(t.$q.onSSRHydrated=()=>{t.onSSRHydrated.forEach(r=>{r()}),t.$q.onSSRHydrated=()=>{}})}const ZV=function(n,e={}){const t={version:"2.18.5"};$0===!1?(e.config!==void 0&&Object.assign(Uf,e.config),t.config={...Uf},JV()):t.config=e.config||{},XV(n,e,{parentApp:n,$q:t,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},eL={name:"Quasar",version:"2.18.5",install:ZV,lang:_s,iconSet:Ff};/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let j0;const wd=n=>j0=n,z0=Symbol();function sm(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var xl;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(xl||(xl={}));function tL(){const n=bT(!0),e=n.run(()=>xo({}));let t=[],r=[];const i=Go({install(s){wd(i),i._a=s,s.provide(z0,i),s.config.globalProperties.$pinia=i,r.forEach(a=>t.push(a)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const K0=()=>{};function Jw(n,e,t,r=K0){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&AT()&&sk(i),i}function Ia(n,...e){n.slice().forEach(t=>{t(...e)})}const nL=n=>n(),Yw=Symbol(),mg=Symbol();function om(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];sm(i)&&sm(r)&&n.hasOwnProperty(t)&&!Gt(r)&&!Rs(r)?n[t]=om(i,r):n[t]=r}return n}const rL=Symbol();function iL(n){return!sm(n)||!Object.prototype.hasOwnProperty.call(n,rL)}const{assign:ps}=Object;function sL(n){return!!(Gt(n)&&n.effect)}function oL(n,e,t,r){const{state:i,actions:s,getters:a}=e,l=t.state.value[n];let h;function d(){l||(t.state.value[n]=i?i():{});const p=Pk(t.state.value[n]);return ps(p,s,Object.keys(a||{}).reduce((_,v)=>(_[v]=Go(Ue(()=>{wd(t);const E=t._s.get(n);return a[v].call(E,E)})),_),{}))}return h=G0(n,d,e,t,r,!0),h}function G0(n,e,t={},r,i,s){let a;const l=ps({actions:{}},t),h={deep:!0};let d,p,_=[],v=[],E;const N=r.state.value[n];!s&&!N&&(r.state.value[n]={}),xo({});let M;function F(S){let A;d=p=!1,typeof S=="function"?(S(r.state.value[n]),A={type:xl.patchFunction,storeId:n,events:E}):(om(r.state.value[n],S),A={type:xl.patchObject,payload:S,storeId:n,events:E});const x=M=Symbol();i_().then(()=>{M===x&&(d=!0)}),p=!0,Ia(_,A,r.state.value[n])}const Q=s?function(){const{state:A}=t,x=A?A():{};this.$patch(k=>{ps(k,x)})}:K0;function j(){a.stop(),_=[],v=[],r._s.delete(n)}const z=(S,A="")=>{if(Yw in S)return S[mg]=A,S;const x=function(){wd(r);const k=Array.from(arguments),O=[],P=[];function ce(Te){O.push(Te)}function qe(Te){P.push(Te)}Ia(v,{args:k,name:x[mg],store:J,after:ce,onError:qe});let Ye;try{Ye=S.apply(this&&this.$id===n?this:J,k)}catch(Te){throw Ia(P,Te),Te}return Ye instanceof Promise?Ye.then(Te=>(Ia(O,Te),Te)).catch(Te=>(Ia(P,Te),Promise.reject(Te))):(Ia(O,Ye),Ye)};return x[Yw]=!0,x[mg]=A,x},G={_p:r,$id:n,$onAction:Jw.bind(null,v),$patch:F,$reset:Q,$subscribe(S,A={}){const x=Jw(_,S,A.detached,()=>k()),k=a.run(()=>$a(()=>r.state.value[n],O=>{(A.flush==="sync"?p:d)&&S({storeId:n,type:xl.direct,events:E},O)},ps({},h,A)));return x},$dispose:j},J=Ko(G);r._s.set(n,J);const R=(r._a&&r._a.runWithContext||nL)(()=>r._e.run(()=>(a=bT()).run(()=>e({action:z}))));for(const S in R){const A=R[S];if(Gt(A)&&!sL(A)||Rs(A))s||(N&&iL(A)&&(Gt(A)?A.value=N[S]:om(A,N[S])),r.state.value[n][S]=A);else if(typeof A=="function"){const x=z(A,S);R[S]=x,l.actions[S]=A}}return ps(J,R),ps(at(J),R),Object.defineProperty(J,"$state",{get:()=>r.state.value[n],set:S=>{F(A=>{ps(A,S)})}}),r._p.forEach(S=>{ps(J,a.run(()=>S({store:J,app:r._a,pinia:r,options:l})))}),N&&s&&t.hydrate&&t.hydrate(J.$state,N),d=!0,p=!0,J}/*! #__NO_SIDE_EFFECTS__ */function aL(n,e,t){let r;const i=typeof e=="function";r=i?t:e;function s(a,l){const h=cN();return a=a||(h?Lr(z0,null):null),a&&wd(a),a=j0,a._s.has(n)||(i?G0(n,e,r,a):oL(n,r,a)),a._s.get(n)}return s.$id=n,s}var Xw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},uL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],l=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},H0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,l=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=s>>2,_=(s&3)<<4|l>>4;let v=(l&15)<<2|d>>6,E=d&63;h||(E=64,a||(v=64)),r.push(t[p],t[_],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(W0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||d==null||_==null)throw new lL;const v=s<<2|l>>4;if(r.push(v),d!==64){const E=l<<4&240|d>>2;if(r.push(E),_!==64){const N=d<<6&192|_;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(n){const e=W0(n);return H0.encodeByteArray(e,!0)},Q0=function(n){return cL(n).replace(/\./g,"")},J0=function(n){try{return H0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=()=>hL().__FIREBASE_DEFAULTS__,dL=()=>{if(typeof process=="undefined"||typeof Xw=="undefined")return;const n=Xw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pL=()=>{if(typeof document=="undefined")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&J0(n[1]);return e&&JSON.parse(e)},Ed=()=>{try{return fL()||dL()||pL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gL=n=>{var e,t;return(t=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Y0=()=>{var n;return(n=Ed())===null||n===void 0?void 0:n.config},X0=n=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _L(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function yL(){var n;const e=(n=Ed())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vL(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function wL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function EL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IL(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Z0(){return!yL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eb(){try{return typeof indexedDB=="object"}catch{return!1}}function TL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="FirebaseError";class qi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=bL,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?AL(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new qi(i,l,r)}}function AL(n,e){return n.replace(SL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const SL=/\{\$([^}]+)}/g;function RL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Zw(s)&&Zw(a)){if(!Wl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Zw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function PL(n,e){const t=new CL(n,e);return t.subscribe.bind(t)}class CL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");xL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=_g),i.error===void 0&&(i.error=_g),i.complete===void 0&&(i.complete=_g);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){return n&&n._delegate?n._delegate:n}class ko{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new mL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kL(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OL(n){return n===_o?void 0:n}function kL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const VL={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},LL=nt.INFO,ML={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},FL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ML[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class p_{constructor(e){this.name=e,this._logLevel=LL,this._logHandler=FL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const UL=(n,e)=>e.some(t=>n instanceof t);let eE,tE;function BL(){return eE||(eE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qL(){return tE||(tE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tb=new WeakMap,am=new WeakMap,nb=new WeakMap,yg=new WeakMap,g_=new WeakMap;function $L(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ps(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&tb.set(t,n)}).catch(()=>{}),g_.set(e,n),e}function jL(n){if(am.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});am.set(n,e)}let um={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return am.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ps(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zL(n){um=n(um)}function KL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(vg(this),e,...t);return nb.set(r,e.sort?e.sort():[e]),Ps(r)}:qL().includes(n)?function(...e){return n.apply(vg(this),e),Ps(tb.get(this))}:function(...e){return Ps(n.apply(vg(this),e))}}function GL(n){return typeof n=="function"?KL(n):(n instanceof IDBTransaction&&jL(n),UL(n,BL())?new Proxy(n,um):n)}function Ps(n){if(n instanceof IDBRequest)return $L(n);if(yg.has(n))return yg.get(n);const e=GL(n);return e!==n&&(yg.set(n,e),g_.set(e,n)),e}const vg=n=>g_.get(n);function WL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),l=Ps(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Ps(a.result),h.oldVersion,h.newVersion,Ps(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),l.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const HL=["get","getKey","getAll","getAllKeys","count"],QL=["put","add","delete","clear"],wg=new Map;function nE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wg.get(e))return wg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=QL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||HL.includes(t)))return;const s=async function(a,...l){const h=this.transaction(a,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[t](...l),i&&h.done]))[0]};return wg.set(e,s),s}zL(n=>({...n,get:(e,t,r)=>nE(e,t)||n.get(e,t,r),has:(e,t)=>!!nE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function YL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lm="@firebase/app",rE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new p_("@firebase/app"),XL="@firebase/app-compat",ZL="@firebase/analytics-compat",eM="@firebase/analytics",tM="@firebase/app-check-compat",nM="@firebase/app-check",rM="@firebase/auth",iM="@firebase/auth-compat",sM="@firebase/database",oM="@firebase/data-connect",aM="@firebase/database-compat",uM="@firebase/functions",lM="@firebase/functions-compat",cM="@firebase/installations",hM="@firebase/installations-compat",fM="@firebase/messaging",dM="@firebase/messaging-compat",pM="@firebase/performance",gM="@firebase/performance-compat",mM="@firebase/remote-config",_M="@firebase/remote-config-compat",yM="@firebase/storage",vM="@firebase/storage-compat",wM="@firebase/firestore",EM="@firebase/vertexai-preview",IM="@firebase/firestore-compat",TM="firebase",bM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="[DEFAULT]",AM={[lm]:"fire-core",[XL]:"fire-core-compat",[eM]:"fire-analytics",[ZL]:"fire-analytics-compat",[nM]:"fire-app-check",[tM]:"fire-app-check-compat",[rM]:"fire-auth",[iM]:"fire-auth-compat",[sM]:"fire-rtdb",[oM]:"fire-data-connect",[aM]:"fire-rtdb-compat",[uM]:"fire-fn",[lM]:"fire-fn-compat",[cM]:"fire-iid",[hM]:"fire-iid-compat",[fM]:"fire-fcm",[dM]:"fire-fcm-compat",[pM]:"fire-perf",[gM]:"fire-perf-compat",[mM]:"fire-rc",[_M]:"fire-rc-compat",[yM]:"fire-gcs",[vM]:"fire-gcs-compat",[wM]:"fire-fst",[IM]:"fire-fst-compat",[EM]:"fire-vertex","fire-js":"fire-js",[TM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new Map,hm=new Map,fm=new Map;function iE(n,e){try{n.container.addComponent(e)}catch(t){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qa(n){const e=n.name;if(fm.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;fm.set(e,n);for(const t of No.values())iE(t,n);for(const t of hm.values())iE(t,n);return!0}function m_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new mc("app","Firebase",SM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=bM;function rb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:cm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cs.create("bad-app-name",{appName:String(i)});if(t||(t=Y0()),!t)throw Cs.create("no-options");const s=No.get(i);if(s){if(Wl(t,s.options)&&Wl(r,s.config))return s;throw Cs.create("duplicate-app",{appName:i})}const a=new NL(i);for(const h of fm.values())a.addComponent(h);const l=new RM(t,r,a);return No.set(i,l),l}function PM(n=cm){const e=No.get(n);if(!e&&n===cm&&Y0())return rb();if(!e)throw Cs.create("no-app",{appName:n});return e}function CM(){return Array.from(No.values())}async function xM(n){let e=!1;const t=n.name;No.has(t)?(e=!0,No.delete(t)):hm.has(t)&&n.decRefCount()<=0&&(hm.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function xs(n,e,t){var r;let i=(r=AM[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(l.join(" "));return}Qa(new ko(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="firebase-heartbeat-database",OM=1,Hl="firebase-heartbeat-store";let Eg=null;function ib(){return Eg||(Eg=WL(DM,OM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cs.create("idb-open",{originalErrorMessage:n.message})})),Eg}async function kM(n){try{const t=(await ib()).transaction(Hl),r=await t.objectStore(Hl).get(sb(n));return await t.done,r}catch(e){if(e instanceof qi)Li.warn(e.message);else{const t=Cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(t.message)}}}async function sE(n,e){try{const r=(await ib()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,sb(n)),await r.done}catch(t){if(t instanceof qi)Li.warn(t.message);else{const r=Cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Li.warn(r.message)}}}function sb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=1024,VM=720*60*60*1e3;class LM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new FM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=oE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=VM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=oE(),{heartbeatsToSend:r,unsentEntries:i}=MM(this._heartbeatsCache.heartbeats),s=Q0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Li.warn(t),""}}}function oE(){return new Date().toISOString().substring(0,10)}function MM(n,e=NM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),aE(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),aE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class FM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eb()?TL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return sE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return sE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function aE(n){return Q0(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){Qa(new ko("platform-logger",e=>new JL(e),"PRIVATE")),Qa(new ko("heartbeat",e=>new LM(e),"PRIVATE")),xs(lm,rE,n),xs(lm,rE,"esm2017"),xs("fire-js","")}UM("");var uE=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,ob;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function A(){}A.prototype=S.prototype,R.D=S.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(x,k,O){for(var P=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)P[ce-2]=arguments[ce];return S.prototype[k].apply(x,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,S,A){A||(A=0);var x=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)x[k]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(k=0;16>k;++k)x[k]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=R.g[0],A=R.g[1],k=R.g[2];var O=R.g[3],P=S+(O^A&(k^O))+x[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[1]+3905402710&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[2]+606105819&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[3]+3250441966&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(O^A&(k^O))+x[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[5]+1200080426&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[6]+2821735955&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[7]+4249261313&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(O^A&(k^O))+x[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[9]+2336552879&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[10]+4294925233&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[11]+2304563134&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(O^A&(k^O))+x[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[13]+4254626195&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[14]+2792965006&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[15]+1236535329&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(k^O&(A^k))+x[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[6]+3225465664&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[11]+643717713&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[0]+3921069994&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(k^O&(A^k))+x[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[10]+38016083&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[15]+3634488961&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[4]+3889429448&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(k^O&(A^k))+x[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[14]+3275163606&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[3]+4107603335&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[8]+1163531501&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(k^O&(A^k))+x[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[2]+4243563512&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[7]+1735328473&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[12]+2368359562&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(A^k^O)+x[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[8]+2272392833&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[11]+1839030562&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[14]+4259657740&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(A^k^O)+x[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[4]+1272893353&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[7]+4139469664&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[10]+3200236656&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(A^k^O)+x[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[0]+3936430074&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[3]+3572445317&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[6]+76029189&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(A^k^O)+x[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[12]+3873151461&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[15]+530742520&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[2]+3299628645&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(k^(A|~O))+x[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[7]+1126891415&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[14]+2878612391&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[5]+4237533241&4294967295,A=k+(P<<21&4294967295|P>>>11),P=S+(k^(A|~O))+x[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[3]+2399980690&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[10]+4293915773&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[1]+2240044497&4294967295,A=k+(P<<21&4294967295|P>>>11),P=S+(k^(A|~O))+x[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[15]+4264355552&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[6]+2734768916&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[13]+1309151649&4294967295,A=k+(P<<21&4294967295|P>>>11),P=S+(k^(A|~O))+x[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[11]+3174756917&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[2]+718787259&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+O&4294967295}r.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var A=S-this.blockSize,x=this.B,k=this.h,O=0;O<S;){if(k==0)for(;O<=A;)i(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<S;)if(x[k++]=R.charCodeAt(O++),k==this.blockSize){i(this,x),k=0;break}}else for(;O<S;)if(x[k++]=R[O++],k==this.blockSize){i(this,x),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var A=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=A&255,A/=256;for(this.u(R),R=Array(16),S=A=0;4>S;++S)for(var x=0;32>x;x+=8)R[A++]=this.g[S]>>>x&255;return R};function s(R,S){var A=l;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=S(R)}function a(R,S){this.h=S;for(var A=[],x=!0,k=R.length-1;0<=k;k--){var O=R[k]|0;x&&O==S||(A[k]=O,x=!1)}this.g=A}var l={};function h(R){return-128<=R&&128>R?s(R,function(S){return new a([S|0],0>S?-1:0)}):new a([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return F(d(-R));for(var S=[],A=1,x=0;R>=A;x++)S[x]=R/A|0,A*=4294967296;return new a(S,0)}function p(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return F(p(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(S,8)),x=_,k=0;k<R.length;k+=8){var O=Math.min(8,R.length-k),P=parseInt(R.substring(k,k+O),S);8>O?(O=d(Math.pow(S,O)),x=x.j(O).add(d(P))):(x=x.j(A),x=x.add(d(P)))}return x}var _=h(0),v=h(1),E=h(16777216);n=a.prototype,n.m=function(){if(M(this))return-F(this).m();for(var R=0,S=1,A=0;A<this.g.length;A++){var x=this.i(A);R+=(0<=x?x:4294967296+x)*S,S*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(M(this))return"-"+F(this).toString(R);for(var S=d(Math.pow(R,6)),A=this,x="";;){var k=G(A,S).g;A=Q(A,k.j(S));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=k,N(A))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function M(R){return R.h==-1}n.l=function(R){return R=Q(this,R),M(R)?-1:N(R)?0:1};function F(R){for(var S=R.g.length,A=[],x=0;x<S;x++)A[x]=~R.g[x];return new a(A,~R.h).add(v)}n.abs=function(){return M(this)?F(this):this},n.add=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0,k=0;k<=S;k++){var O=x+(this.i(k)&65535)+(R.i(k)&65535),P=(O>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);x=P>>>16,O&=65535,P&=65535,A[k]=P<<16|O}return new a(A,A[A.length-1]&-2147483648?-1:0)};function Q(R,S){return R.add(F(S))}n.j=function(R){if(N(this)||N(R))return _;if(M(this))return M(R)?F(this).j(F(R)):F(F(this).j(R));if(M(R))return F(this.j(F(R)));if(0>this.l(E)&&0>R.l(E))return d(this.m()*R.m());for(var S=this.g.length+R.g.length,A=[],x=0;x<2*S;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<R.g.length;k++){var O=this.i(x)>>>16,P=this.i(x)&65535,ce=R.i(k)>>>16,qe=R.i(k)&65535;A[2*x+2*k]+=P*qe,j(A,2*x+2*k),A[2*x+2*k+1]+=O*qe,j(A,2*x+2*k+1),A[2*x+2*k+1]+=P*ce,j(A,2*x+2*k+1),A[2*x+2*k+2]+=O*ce,j(A,2*x+2*k+2)}for(x=0;x<S;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=S;x<2*S;x++)A[x]=0;return new a(A,0)};function j(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function z(R,S){this.g=R,this.h=S}function G(R,S){if(N(S))throw Error("division by zero");if(N(R))return new z(_,_);if(M(R))return S=G(F(R),S),new z(F(S.g),F(S.h));if(M(S))return S=G(R,F(S)),new z(F(S.g),S.h);if(30<R.g.length){if(M(R)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var A=v,x=S;0>=x.l(R);)A=J(A),x=J(x);var k=oe(A,1),O=oe(x,1);for(x=oe(x,2),A=oe(A,2);!N(x);){var P=O.add(x);0>=P.l(R)&&(k=k.add(A),O=P),x=oe(x,1),A=oe(A,1)}return S=Q(R,k.j(S)),new z(k,S)}for(k=_;0<=R.l(S);){for(A=Math.max(1,Math.floor(R.m()/S.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=d(A),P=O.j(S);M(P)||0<P.l(R);)A-=x,O=d(A),P=O.j(S);N(O)&&(O=v),k=k.add(O),R=Q(R,P)}return new z(k,R)}n.A=function(R){return G(this,R).h},n.and=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)&R.i(x);return new a(A,this.h&R.h)},n.or=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)|R.i(x);return new a(A,this.h|R.h)},n.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)^R.i(x);return new a(A,this.h^R.h)};function J(R){for(var S=R.g.length+1,A=[],x=0;x<S;x++)A[x]=R.i(x)<<1|R.i(x-1)>>>31;return new a(A,R.h)}function oe(R,S){var A=S>>5;S%=32;for(var x=R.g.length-A,k=[],O=0;O<x;O++)k[O]=0<S?R.i(O+A)>>>S|R.i(O+A+1)<<32-S:R.i(O+A);return new a(k,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ob=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Po=a}).apply(typeof uE!="undefined"?uE:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Hh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ab,dl,ub,uf,dm,lb,cb,hb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,y){return c==Array.prototype||c==Object.prototype||(c[g]=y.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var g=0;g<c.length;++g){var y=c[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(c,g){if(g)e:{var y=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var $=c[T];if(!($ in y))break e;y=y[$]}c=c[c.length-1],T=y[c],g=g(T),g!=T&&g!=null&&e(y,c,{configurable:!0,writable:!0,value:g})}}function s(c,g){c instanceof String&&(c+="");var y=0,T=!1,$={next:function(){if(!T&&y<c.length){var H=y++;return{value:g(H,c[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(c){return c||function(){return s(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function d(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function p(c,g,y){return c.call.apply(c.bind,arguments)}function _(c,g,y){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function v(c,g,y){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,v.apply(null,arguments)}function E(c,g){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function N(c,g){function y(){}y.prototype=g.prototype,c.aa=g.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(T,$,H){for(var he=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)he[ct-2]=arguments[ct];return g.prototype[$].apply(T,he)}}function M(c){const g=c.length;if(0<g){const y=Array(g);for(let T=0;T<g;T++)y[T]=c[T];return y}return[]}function F(c,g){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(h(T)){const $=c.length||0,H=T.length||0;c.length=$+H;for(let he=0;he<H;he++)c[$+he]=T[he]}else c.push(T)}}class Q{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function j(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var J=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function oe(c,g,y){for(const T in c)g.call(y,c[T],T,c)}function R(c,g){for(const y in c)g.call(void 0,c[y],y,c)}function S(c){const g={};for(const y in c)g[y]=c[y];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let y,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(y in T)c[y]=T[y];for(let H=0;H<A.length;H++)y=A[H],Object.prototype.hasOwnProperty.call(T,y)&&(c[y]=T[y])}}function k(c){var g=1;c=c.split(":");const y=[];for(;0<g&&c.length;)y.push(c.shift()),g--;return c.length&&y.push(c.join(":")),y}function O(c){l.setTimeout(()=>{throw c},0)}function P(){var c=Vn;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ce{constructor(){this.h=this.g=null}add(g,y){const T=qe.get();T.set(g,y),this.h?this.h.next=T:this.g=T,this.h=T}}var qe=new Q(()=>new Ye,c=>c.reset());class Ye{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Be=!1,Vn=new ce,wn=()=>{const c=l.Promise.resolve(void 0);Te=()=>{c.then(Dt)}};var Dt=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(y){O(y)}var g=qe;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}Be=!1};function Rt(){this.s=this.s,this.C=this.C}Rt.prototype.s=!1,Rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var Br=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};l.addEventListener("test",y,g),l.removeEventListener("test",y,g)}catch{}return c})();function Ht(c,g){if(Pt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(J){e:{try{G(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else y=="mouseover"?g=c.fromElement:y=="mouseout"&&(g=c.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Xt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ht.aa.h.call(this)}}N(Ht,Pt);var Xt={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),_e=0;function de(c,g,y,T,$){this.listener=c,this.proxy=null,this.src=g,this.type=y,this.capture=!!T,this.ha=$,this.key=++_e,this.da=this.fa=!1}function be(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $e(c){this.src=c,this.g={},this.h=0}$e.prototype.add=function(c,g,y,T,$){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var he=V(c,g,T,$);return-1<he?(g=c[he],y||(g.fa=!1)):(g=new de(g,this.src,H,!!T,$),g.fa=y,c.push(g)),g};function C(c,g){var y=g.type;if(y in c.g){var T=c.g[y],$=Array.prototype.indexOf.call(T,g,void 0),H;(H=0<=$)&&Array.prototype.splice.call(T,$,1),H&&(be(g),c.g[y].length==0&&(delete c.g[y],c.h--))}}function V(c,g,y,T){for(var $=0;$<c.length;++$){var H=c[$];if(!H.da&&H.listener==g&&H.capture==!!y&&H.ha==T)return $}return-1}var B="closure_lm_"+(1e6*Math.random()|0),Z={};function re(c,g,y,T,$){if(Array.isArray(g)){for(var H=0;H<g.length;H++)re(c,g[H],y,T,$);return null}return y=Ce(y),c&&c[ee]?c.K(g,y,d(T)?!!T.capture:!1,$):Y(c,g,y,!1,T,$)}function Y(c,g,y,T,$,H){if(!g)throw Error("Invalid event type");var he=d($)?!!$.capture:!!$,ct=ge(c);if(ct||(c[B]=ct=new $e(c)),y=ct.add(g,y,T,he,H),y.proxy)return y;if(T=pe(),y.proxy=T,T.src=c,T.listener=y,c.addEventListener)Br||($=he),$===void 0&&($=!1),c.addEventListener(g.toString(),T,$);else if(c.attachEvent)c.attachEvent(se(g.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function pe(){function c(y){return g.call(c.src,c.listener,y)}const g=Se;return c}function fe(c,g,y,T,$){if(Array.isArray(g))for(var H=0;H<g.length;H++)fe(c,g[H],y,T,$);else T=d(T)?!!T.capture:!!T,y=Ce(y),c&&c[ee]?(c=c.i,g=String(g).toString(),g in c.g&&(H=c.g[g],y=V(H,y,T,$),-1<y&&(be(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete c.g[g],c.h--)))):c&&(c=ge(c))&&(g=c.g[g.toString()],c=-1,g&&(c=V(g,y,T,$)),(y=-1<c?g[c]:null)&&le(y))}function le(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ee])C(g.i,c);else{var y=c.type,T=c.proxy;g.removeEventListener?g.removeEventListener(y,T,c.capture):g.detachEvent?g.detachEvent(se(y),T):g.addListener&&g.removeListener&&g.removeListener(T),(y=ge(g))?(C(y,c),y.h==0&&(y.src=null,g[B]=null)):be(c)}}}function se(c){return c in Z?Z[c]:Z[c]="on"+c}function Se(c,g){if(c.da)c=!0;else{g=new Ht(g,this);var y=c.listener,T=c.ha||c.src;c.fa&&le(c),c=y.call(T,g)}return c}function ge(c){return c=c[B],c instanceof $e?c:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(c){return typeof c=="function"?c:(c[Re]||(c[Re]=function(g){return c.handleEvent(g)}),c[Re])}function De(){Rt.call(this),this.i=new $e(this),this.M=this,this.F=null}N(De,Rt),De.prototype[ee]=!0,De.prototype.removeEventListener=function(c,g,y,T){fe(this,c,g,y,T)};function Le(c,g){var y,T=c.F;if(T)for(y=[];T;T=T.F)y.push(T);if(c=c.M,T=g.type||g,typeof g=="string")g=new Pt(g,c);else if(g instanceof Pt)g.target=g.target||c;else{var $=g;g=new Pt(T,c),x(g,$)}if($=!0,y)for(var H=y.length-1;0<=H;H--){var he=g.g=y[H];$=We(he,T,!0,g)&&$}if(he=g.g=c,$=We(he,T,!0,g)&&$,$=We(he,T,!1,g)&&$,y)for(H=0;H<y.length;H++)he=g.g=y[H],$=We(he,T,!1,g)&&$}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var y=c.g[g],T=0;T<y.length;T++)be(y[T]);delete c.g[g],c.h--}}this.F=null},De.prototype.K=function(c,g,y,T){return this.i.add(String(c),g,!1,y,T)},De.prototype.L=function(c,g,y,T){return this.i.add(String(c),g,!0,y,T)};function We(c,g,y,T){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,H=0;H<g.length;++H){var he=g[H];if(he&&!he.da&&he.capture==y){var ct=he.listener,Zt=he.ha||he.src;he.fa&&C(c.i,he),$=ct.call(Zt,T)!==!1&&$}}return $&&!T.defaultPrevented}function Bt(c,g,y){if(typeof c=="function")y&&(c=v(c,y));else if(c&&typeof c.handleEvent=="function")c=v(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(c,g||0)}function qt(c){c.g=Bt(()=>{c.g=null,c.i&&(c.i=!1,qt(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class En extends Rt{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(c){Rt.call(this),this.h=c,this.g={}}N(Qt,Rt);var hr=[];function ii(c){oe(c.g,function(g,y){this.g.hasOwnProperty(y)&&le(g)},c),c.g={}}Qt.prototype.N=function(){Qt.aa.N.call(this),ii(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=l.JSON.stringify,In=l.JSON.parse,Ki=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Gi(){}Gi.prototype.h=null;function Cc(c){return c.h||(c.h=c.i())}function xc(){}var Wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qo(){Pt.call(this,"d")}N(Qo,Pt);function _u(){Pt.call(this,"c")}N(_u,Pt);var si={},Dc=null;function Jo(){return Dc=Dc||new De}si.La="serverreachability";function yu(c){Pt.call(this,si.La,c)}N(yu,Pt);function zs(c){const g=Jo();Le(g,new yu(g))}si.STAT_EVENT="statevent";function Oc(c,g){Pt.call(this,si.STAT_EVENT,c),this.stat=g}N(Oc,Pt);function hn(c){const g=Jo();Le(g,new Oc(g,c))}si.Ma="timingevent";function Yo(c,g){Pt.call(this,si.Ma,c),this.size=g}N(Yo,Pt);function Ks(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},g)}function oi(){this.g=!0}oi.prototype.xa=function(){this.g=!1};function Gd(c,g,y,T,$,H){c.info(function(){if(c.g)if(H)for(var he="",ct=H.split("&"),Zt=0;Zt<ct.length;Zt++){var rt=ct[Zt].split("=");if(1<rt.length){var ft=rt[0];rt=rt[1];var Jt=ft.split("_");he=2<=Jt.length&&Jt[1]=="type"?he+(ft+"="+rt+"&"):he+(ft+"=redacted&")}}else he=null;else he=H;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+g+`
`+y+`
`+he})}function Wd(c,g,y,T,$,H,he){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+g+`
`+y+`
`+H+" "+he})}function Hi(c,g,y,T){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Qd(c,y)+(T?" "+T:"")})}function Hd(c,g){c.info(function(){return"TIMEOUT: "+g})}oi.prototype.info=function(){};function Qd(c,g){if(!c.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var T=y[c];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var H=$[0];if(H!="noop"&&H!="stop"&&H!="close")for(var he=1;he<$.length;he++)$[he]=""}}}}return $t(y)}catch{return g}}var Xo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vu;function Gs(){}N(Gs,Gi),Gs.prototype.g=function(){return new XMLHttpRequest},Gs.prototype.i=function(){return{}},vu=new Gs;function qr(c,g,y,T){this.j=c,this.i=g,this.l=y,this.R=T||1,this.U=new Qt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nc}function Nc(){this.i=null,this.g="",this.h=!1}var Vc={},wu={};function Eu(c,g,y){c.L=1,c.v=Ji(fr(g)),c.m=y,c.P=!0,Lc(c,null)}function Lc(c,g){c.F=Date.now(),ai(c),c.A=fr(c.v);var y=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),Cu(y.i,"t",T),c.C=0,y=c.j.J,c.h=new Nc,c.g=rh(c.j,y?g:null,!c.m),0<c.O&&(c.M=new En(v(c.Y,c,c.g),c.O)),g=c.U,y=c.g,T=c.ca;var $="readystatechange";Array.isArray($)||($&&(hr[0]=$.toString()),$=hr);for(var H=0;H<$.length;H++){var he=re(y,$[H],T||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),zs(),Gd(c.i,c.u,c.A,c.l,c.R,c.m)}qr.prototype.ca=function(c){c=c.target;const g=this.M;g&&fn(c)==3?g.j():this.Y(c)},qr.prototype.Y=function(c){try{if(c==this.g)e:{const Jt=fn(this.g);var g=this.g.Ba();const mr=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||Ou(this.g)))){this.J||Jt!=4||g==7||(g==8||0>=mr?zs(3):zs(2)),Iu(this);var y=this.g.Z();this.X=y;t:if(Ws(this)){var T=Ou(this.g);c="";var $=T.length,H=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){$r(this),Hs(this);var he="";break t}this.h.i=new l.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(T[g],{stream:!(H&&g==$-1)});T.length=0,this.h.g+=c,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=y==200,Wd(this.i,this.u,this.A,this.l,this.R,Jt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,Zt=this.g;if((ct=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(ct)){var rt=ct;break t}}rt=null}if(y=rt)Hi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zo(this,y);else{this.o=!1,this.s=3,hn(12),$r(this),Hs(this);break e}}if(this.P){y=!0;let Gn;for(;!this.J&&this.C<he.length;)if(Gn=Jd(this,he),Gn==wu){Jt==4&&(this.s=4,hn(14),y=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==Vc){this.s=4,hn(15),Hi(this.i,this.l,he,"[Invalid Chunk]"),y=!1;break}else Hi(this.i,this.l,Gn,null),Zo(this,Gn);if(Ws(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||he.length!=0||this.h.h||(this.s=1,hn(16),y=!1),this.o=this.o&&y,!y)Hi(this.i,this.l,he,"[Invalid Chunked Response]"),$r(this),Hs(this);else if(0<he.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),gr(ft),ft.M=!0,hn(11))}}else Hi(this.i,this.l,he,null),Zo(this,he);Jt==4&&$r(this),this.o&&!this.J&&(Jt==4?wt(this.j,this):(this.o=!1,ai(this)))}else ku(this.g),y==400&&0<he.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),$r(this),Hs(this)}}}catch{}finally{}};function Ws(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Jd(c,g){var y=c.C,T=g.indexOf(`
`,y);return T==-1?wu:(y=Number(g.substring(y,T)),isNaN(y)?Vc:(T+=1,T+y>g.length?wu:(g=g.slice(T,T+y),c.C=T+y,g)))}qr.prototype.cancel=function(){this.J=!0,$r(this)};function ai(c){c.S=Date.now()+c.I,Mc(c,c.I)}function Mc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ks(v(c.ba,c),g)}function Iu(c){c.B&&(l.clearTimeout(c.B),c.B=null)}qr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Hd(this.i,this.A),this.L!=2&&(zs(),hn(17)),$r(this),this.s=2,Hs(this)):Mc(this,this.S-c)};function Hs(c){c.j.G==0||c.J||wt(c.j,c)}function $r(c){Iu(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ii(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Zo(c,g){try{var y=c.j;if(y.G!=0&&(y.g==c||Tu(y.h,c))){if(!c.K&&Tu(y.h,c)&&y.G==3){try{var T=y.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Zi(y),Ys(y);else break e;sa(y),hn(18)}}else y.za=$[1],0<y.za-y.T&&37500>$[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ks(v(y.Za,y),6e3));if(1>=qc(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Cr(y,11)}else if((c.K||y.g==c)&&Zi(y),!j(g))for($=y.Da.g.parse(g),g=0;g<$.length;g++){let rt=$[g];if(y.T=rt[0],rt=rt[1],y.G==2)if(rt[0]=="c"){y.K=rt[1],y.ia=rt[2];const ft=rt[3];ft!=null&&(y.la=ft,y.j.info("VER="+y.la));const Jt=rt[4];Jt!=null&&(y.Aa=Jt,y.j.info("SVER="+y.Aa));const mr=rt[5];mr!=null&&typeof mr=="number"&&0<mr&&(T=1.5*mr,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Gn=c.g;if(Gn){const no=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(no){var H=T.h;H.g||no.indexOf("spdy")==-1&&no.indexOf("quic")==-1&&no.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ea(H,H.h),H.h=null))}if(T.D){const Lu=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lu&&(T.ya=Lu,_t(T.I,T.D,Lu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var he=c;if(T.qa=oa(T,T.J?T.ia:null,T.W),he.K){bu(T.h,he);var ct=he,Zt=T.L;Zt&&(ct.I=Zt),ct.B&&(Iu(ct),ai(ct)),T.g=he}else th(T);0<y.i.length&&Xs(y)}else rt[0]!="stop"&&rt[0]!="close"||Cr(y,7);else y.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Cr(y,7):ia(y):rt[0]!="noop"&&y.l&&y.l.ta(rt),y.v=0)}}zs(4)}catch{}}var Fc=class{constructor(c,g){this.g=c,this.map=g}};function Uc(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qc(c){return c.h?1:c.g?c.g.size:0}function Tu(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function ea(c,g){c.g?c.g.add(g):c.h=g}function bu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Uc.prototype.cancel=function(){if(this.i=Au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Au(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const y of c.g.values())g=g.concat(y.D);return g}return M(c.i)}function Su(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map!="undefined"&&c instanceof Map||typeof Set!="undefined"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(h(c)){for(var g=[],y=c.length,T=0;T<y;T++)g.push(c[T]);return g}g=[],y=0;for(T in c)g[y++]=c[T];return g}function Yd(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map!="undefined"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set!="undefined"&&c instanceof Set)){if(h(c)||typeof c=="string"){var g=[];c=c.length;for(var y=0;y<c;y++)g.push(y);return g}g=[],y=0;for(const T in c)g[y++]=T;return g}}}function Ru(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(h(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var y=Yd(c),T=Su(c),$=T.length,H=0;H<$;H++)g.call(void 0,T[H],y&&y[H],c)}var Qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $c(c,g){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var T=c[y].indexOf("="),$=null;if(0<=T){var H=c[y].substring(0,T);$=c[y].substring(T+1)}else H=c[y];g(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ui(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ui){this.h=c.h,Js(this,c.j),this.o=c.o,this.g=c.g,Qi(this,c.s),this.l=c.l;var g=c.i,y=new Yi;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),jc(this,y),this.m=c.m}else c&&(g=String(c).match(Qs))?(this.h=!1,Js(this,g[1]||"",!0),this.o=li(g[2]||""),this.g=li(g[3]||"",!0),Qi(this,g[4]),this.l=li(g[5]||"",!0),jc(this,g[6]||"",!0),this.m=li(g[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}ui.prototype.toString=function(){var c=[],g=this.j;g&&c.push(dr(g,Pu,!0),":");var y=this.g;return(y||g=="file")&&(c.push("//"),(g=this.o)&&c.push(dr(g,Pu,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(dr(y,y.charAt(0)=="/"?Kc:Xd,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",dr(y,Wc)),c.join("")};function fr(c){return new ui(c)}function Js(c,g,y){c.j=y?li(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Qi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function jc(c,g,y){g instanceof Yi?(c.i=g,Zd(c.i,c.h)):(y||(g=dr(g,Gc)),c.i=new Yi(g,c.h))}function _t(c,g,y){c.i.set(g,y)}function Ji(c){return _t(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function li(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function dr(c,g,y){return typeof c=="string"?(c=encodeURI(c).replace(g,zc),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function zc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Pu=/[#\/\?@]/g,Xd=/[#\?:]/g,Kc=/[#\?]/g,Gc=/[#\?@]/g,Wc=/#/g;function Yi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function jr(c){c.g||(c.g=new Map,c.h=0,c.i&&$c(c.i,function(g,y){c.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=Yi.prototype,n.add=function(c,g){jr(this),this.i=null,c=Xi(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(g),this.h+=1,this};function Hc(c,g){jr(c),g=Xi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Qc(c,g){return jr(c),g=Xi(c,g),c.g.has(g)}n.forEach=function(c,g){jr(this),this.g.forEach(function(y,T){y.forEach(function($){c.call(g,$,T,this)},this)},this)},n.na=function(){jr(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let T=0;T<g.length;T++){const $=c[T];for(let H=0;H<$.length;H++)y.push(g[T])}return y},n.V=function(c){jr(this);let g=[];if(typeof c=="string")Qc(this,c)&&(g=g.concat(this.g.get(Xi(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)g=g.concat(c[y])}return g},n.set=function(c,g){return jr(this),this.i=null,c=Xi(this,c),Qc(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Cu(c,g,y){Hc(c,g),0<y.length&&(c.i=null,c.g.set(Xi(c,g),M(y)),c.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var T=g[y];const H=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var $=H;he[T]!==""&&($+="="+encodeURIComponent(String(he[T]))),c.push($)}}return this.i=c.join("&")};function Xi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Zd(c,g){g&&!c.j&&(jr(c),c.i=null,c.g.forEach(function(y,T){var $=T.toLowerCase();T!=$&&(Hc(this,T),Cu(this,$,y))},c)),c.j=g}function ep(c,g){const y=new oi;if(l.Image){const T=new Image;T.onload=E(pr,y,"TestLoadImage: loaded",!0,g,T),T.onerror=E(pr,y,"TestLoadImage: error",!1,g,T),T.onabort=E(pr,y,"TestLoadImage: abort",!1,g,T),T.ontimeout=E(pr,y,"TestLoadImage: timeout",!1,g,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else g(!1)}function tp(c,g){const y=new oi,T=new AbortController,$=setTimeout(()=>{T.abort(),pr(y,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:T.signal}).then(H=>{clearTimeout($),H.ok?pr(y,"TestPingServer: ok",!0,g):pr(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),pr(y,"TestPingServer: error",!1,g)})}function pr(c,g,y,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(y)}catch{}}function np(){this.g=new Ki}function rp(c,g,y){const T=y||"";try{Ru(c,function($,H){let he=$;d($)&&(he=$t($)),g.push(T+H+"="+encodeURIComponent(he))})}catch($){throw g.push(T+"type="+encodeURIComponent("_badmap")),$}}function ta(c){this.l=c.Ub||null,this.j=c.eb||!1}N(ta,Gi),ta.prototype.g=function(){return new na(this.l,this.j)},ta.prototype.i=(function(c){return function(){return c}})({});function na(c,g){De.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(na,De),n=na.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,ut(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lt(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ut(this)),this.g&&(this.readyState=3,ut(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream!="undefined"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?lt(this):ut(this),this.readyState==3&&Jc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,lt(this))},n.Qa=function(c){this.g&&(this.response=c,lt(this))},n.ga=function(){this.g&&lt(this)};function lt(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ut(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=g.next();return c.join(`\r
`)};function ut(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yc(c){let g="";return oe(c,function(y,T){g+=T,g+=":",g+=y,g+=`\r
`}),g}function xu(c,g,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Yc(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):_t(c,g,y))}function Ct(c){De.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ct,De);var ip=/^https?$/i,sp=["POST","PUT"];n=Ct.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vu.g(),this.v=this.o?Cc(this.o):Cc(vu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(H){Xc(this,H);return}if(c=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)y.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())y.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),$=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(sp,g,void 0))||T||$||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,he]of y)this.g.setRequestHeader(H,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ra(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){Xc(this,H)}};function Xc(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Du(c),Lt(c)}function Du(c){c.A||(c.A=!0,Le(c,"complete"),Le(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Le(this,"complete"),Le(this,"abort"),Lt(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lt(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Zc(this):this.bb())},n.bb=function(){Zc(this)};function Zc(c){if(c.h&&typeof a!="undefined"&&(!c.v[1]||fn(c)!=4||c.Z()!=2)){if(c.u&&fn(c)==4)Bt(c.Ea,0,c);else if(Le(c,"readystatechange"),fn(c)==4){c.h=!1;try{const he=c.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var T;if(T=he===0){var $=String(c.D).match(Qs)[1]||null;!$&&l.self&&l.self.location&&($=l.self.location.protocol.slice(0,-1)),T=!ip.test($?$.toLowerCase():"")}y=T}if(y)Le(c,"complete"),Le(c,"success");else{c.m=6;try{var H=2<fn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Du(c)}}finally{Lt(c)}}}}function Lt(c,g){if(c.g){ra(c);const y=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Le(c,"ready");try{y.onreadystatechange=T}catch{}}}function ra(c){c.I&&(l.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function fn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),In(g)}};function Ou(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ku(c){const g={};c=(c.g&&2<=fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(j(c[T]))continue;var y=k(c[T]);const $=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=g[$]||[];g[$]=H,H.push(y)}R(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function un(c,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||g}function Nu(c){this.Aa=0,this.i=[],this.j=new oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=un("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=un("baseRetryDelayMs",5e3,c),this.cb=un("retryDelaySeedMs",1e4,c),this.Wa=un("forwardChannelMaxRetries",2,c),this.wa=un("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Uc(c&&c.concurrentRequestLimit),this.Da=new np,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nu.prototype,n.la=8,n.G=1,n.connect=function(c,g,y,T){hn(0),this.W=c,this.H=g||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=oa(this,null,this.W),Xs(this)};function ia(c){if(Vu(c),c.G==3){var g=c.U++,y=fr(c.I);if(_t(y,"SID",c.K),_t(y,"RID",g),_t(y,"TYPE","terminate"),Zs(c,y),g=new qr(c,c.j,g),g.L=2,g.v=Ji(fr(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=g.v,y=!0),y||(g.g=rh(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ai(g)}nh(c)}function Ys(c){c.g&&(gr(c),c.g.cancel(),c.g=null)}function Vu(c){Ys(c),c.u&&(l.clearTimeout(c.u),c.u=null),Zi(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Xs(c){if(!Bc(c.h)&&!c.s){c.s=!0;var g=c.Ga;Te||wn(),Be||(Te(),Be=!0),Vn.add(g,c),c.B=0}}function eh(c,g){return qc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ks(v(c.Ga,c,g),Pr(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new qr(this,this.j,c);let H=this.o;if(this.S&&(H?(H=S(H),x(H,this.S)):H=this.S),this.m!==null||this.O||($.H=H,H=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Ln(this,$,g),y=fr(this.I),_t(y,"RID",c),_t(y,"CVER",22),this.D&&_t(y,"X-HTTP-Session-Id",this.D),Zs(this,y),H&&(this.O?g="headers="+encodeURIComponent(String(Yc(H)))+"&"+g:this.m&&xu(y,this.m,H)),ea(this.h,$),this.Ua&&_t(y,"TYPE","init"),this.P?(_t(y,"$req",g),_t(y,"SID","null"),$.T=!0,Eu($,y,null)):Eu($,y,g),this.G=2}}else this.G==3&&(c?Tn(this,c):this.i.length==0||Bc(this.h)||Tn(this))};function Tn(c,g){var y;g?y=g.l:y=c.U++;const T=fr(c.I);_t(T,"SID",c.K),_t(T,"RID",y),_t(T,"AID",c.T),Zs(c,T),c.m&&c.o&&xu(T,c.m,c.o),y=new qr(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Ln(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ea(c.h,y),Eu(y,T,g)}function Zs(c,g){c.H&&oe(c.H,function(y,T){_t(g,T,y)}),c.l&&Ru({},function(y,T){_t(g,T,y)})}function Ln(c,g,y){y=Math.min(c.i.length,y);var T=c.l?v(c.l.Na,c.l,c):null;e:{var $=c.i;let H=-1;for(;;){const he=["count="+y];H==-1?0<y?(H=$[0].g,he.push("ofs="+H)):H=0:he.push("ofs="+H);let ct=!0;for(let Zt=0;Zt<y;Zt++){let rt=$[Zt].g;const ft=$[Zt].map;if(rt-=H,0>rt)H=Math.max(0,$[Zt].g-100),ct=!1;else try{rp(ft,he,"req"+rt+"_")}catch{T&&T(ft)}}if(ct){T=he.join("&");break e}}}return c=c.i.splice(0,y),g.D=c,T}function th(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Te||wn(),Be||(Te(),Be=!0),Vn.add(g,c),c.v=0}}function sa(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ks(v(c.Fa,c),Pr(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,eo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ks(v(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),Ys(this),eo(this))};function gr(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function eo(c){c.g=new qr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=fr(c.qa);_t(g,"RID","rpc"),_t(g,"SID",c.K),_t(g,"AID",c.T),_t(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&_t(g,"TO",c.ja),_t(g,"TYPE","xmlhttp"),Zs(c,g),c.m&&c.o&&xu(g,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Ji(fr(g)),y.m=null,y.P=!0,Lc(y,c)}n.Za=function(){this.C!=null&&(this.C=null,Ys(this),sa(this),hn(19))};function Zi(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function wt(c,g){var y=null;if(c.g==g){Zi(c),gr(c),c.g=null;var T=2}else if(Tu(c.h,g))y=g.D,bu(c.h,g),T=1;else return;if(c.G!=0){if(g.o)if(T==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;T=Jo(),Le(T,new Yo(T,y)),Xs(c)}else th(c);else if($=g.s,$==3||$==0&&0<g.X||!(T==1&&eh(c,g)||T==2&&sa(c)))switch(y&&0<y.length&&(g=c.h,g.i=g.i.concat(y)),$){case 1:Cr(c,5);break;case 4:Cr(c,10);break;case 3:Cr(c,6);break;default:Cr(c,2)}}}function Pr(c,g){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*g}function Cr(c,g){if(c.j.info("Error code "+g),g==2){var y=v(c.fb,c),T=c.Xa;const $=!T;T=new ui(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Js(T,"https"),Ji(T),$?ep(T.toString(),y):tp(T.toString(),y)}else hn(2);c.G=0,c.l&&c.l.sa(g),nh(c),Vu(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function nh(c){if(c.G=0,c.ka=[],c.l){const g=Au(c.h);(g.length!=0||c.i.length!=0)&&(F(c.ka,g),F(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function oa(c,g,y){var T=y instanceof ui?fr(y):new ui(y);if(T.g!="")g&&(T.g=g+"."+T.g),Qi(T,T.s);else{var $=l.location;T=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var H=new ui(null);T&&Js(H,T),g&&(H.g=g),$&&Qi(H,$),y&&(H.l=y),T=H}return y=c.D,g=c.ya,y&&g&&_t(T,y,g),_t(T,"VER",c.la),Zs(c,T),T}function rh(c,g,y){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ct(new ta({eb:y})):new Ct(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ih(){}n=ih.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function aa(){}aa.prototype.g=function(c,g){return new bn(c,g)};function bn(c,g){De.call(this),this.g=new Nu(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!j(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!j(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new es(this)}N(bn,De),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){ia(this.g)},bn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=$t(c),c=y);g.i.push(new Fc(g.Ya++,c)),g.G==3&&Xs(g)},bn.prototype.N=function(){this.g.l=null,delete this.j,ia(this.g),delete this.g,bn.aa.N.call(this)};function to(c){Qo.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const y in g){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}N(to,Qo);function ci(){_u.call(this),this.status=1}N(ci,_u);function es(c){this.g=c}N(es,ih),es.prototype.ua=function(){Le(this.g,"a")},es.prototype.ta=function(c){Le(this.g,new to(c))},es.prototype.sa=function(c){Le(this.g,new ci)},es.prototype.ra=function(){Le(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,hb=function(){return new aa},cb=function(){return Jo()},lb=si,dm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,uf=Xo,kc.COMPLETE="complete",ub=kc,xc.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",De.prototype.listen=De.prototype.K,dl=xc,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,ab=Ct}).apply(typeof Hh!="undefined"?Hh:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const lE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new p_("@firebase/firestore");function Oa(){return Vo.logLevel}function ue(n,...e){if(Vo.logLevel<=nt.DEBUG){const t=e.map(__);Vo.debug(`Firestore (${fu}): ${n}`,...t)}}function Kt(n,...e){if(Vo.logLevel<=nt.ERROR){const t=e.map(__);Vo.error(`Firestore (${fu}): ${n}`,...t)}}function Ql(n,...e){if(Vo.logLevel<=nt.WARN){const t=e.map(__);Vo.warn(`Firestore (${fu}): ${n}`,...t)}}function __(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n="Unexpected state"){const e=`FIRESTORE (${fu}) INTERNAL ASSERTION FAILED: `+n;throw Kt(e),new Error(e)}function Pe(n,e){n||Ee()}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends qi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(xn.UNAUTHENTICATED)))}shutdown(){}}class $M{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let s=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Di,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},l=h=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>l(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Di)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new BM(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new xn(e)}}class jM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Pe(this.o===void 0);const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pe(typeof t.token=="string"),this.R=t.token,new KM(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(n){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=WM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Ja(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function db(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Nt(0,0))}static max(){return new xe(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(),r===void 0?r=e.length-t:r>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Jl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tt extends Jl{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const HM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Jl{construct(e,t,r){return new kt(e,t,r)}static isValidIdentifier(e){return HM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ve(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ve(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new ve(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Tt.fromString(e))}static fromName(e){return new ye(Tt.fromString(e).popFirst(5))}static empty(){return new ye(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function pm(n){return n.fields.find((e=>e.kind===2))}function yo(n){return n.fields.filter((e=>e.kind!==2))}Bf.UNKNOWN_ID=-1;class lf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yl(0,cr.min())}}function pb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Nt(t+1,0):new Nt(t,r));return new cr(i,ye.empty(),e)}function gb(n){return new cr(n.readTime,n.key,-1)}class cr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cr(xe.min(),ye.empty(),-1)}static max(){return new cr(xe.max(),ye.empty(),-1)}}function y_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _b{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==mb)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,r)=>{t(e)}))}static reject(e){return new K(((t,r)=>{r(e)}))}static waitFor(e){return new K(((t,r)=>{let i=0,s=0,a=!1;e.forEach((l=>{++i,l.next((()=>{++s,a&&s===i&&t()}),(h=>r(h)))})),a=!0,s===i&&t()}))}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next((i=>i?K.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new K(((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let h=0;h<s;h++){const d=h;t(e[d]).next((p=>{a[d]=p,++l,l===s&&r(a)}),(p=>i(p)))}}))}static doWhile(e,t){return new K(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Di,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Dl(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=v_(r.target.error);this.V.reject(new Dl(e,i))}}static open(e,t,r,i){try{return new Id(t,e.transaction(i,r))}catch(s){throw new Dl(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JM(t)}}class Ds{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Ds.S(on())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),vo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!eb())return!1;if(Ds.v())return!0;const e=on(),t=Ds.S(e),r=0<t&&t<10,i=yb(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ue("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Dl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ve(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ve(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Dl(e,a))},i.onupgradeneeded=s=>{ue("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next((()=>{ue("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const l=Id.open(this.db,e,s?"readonly":"readwrite",r),h=i(l).next((d=>(l.g(),d))).catch((d=>(l.abort(d),K.reject(d)))).toPromise();return h.catch((()=>{})),await l.m,h}catch(l){const h=l,d=h.name!=="FirebaseError"&&a<3;if(ue("SimpleDb","Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yb(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class QM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return vo(this.B.delete())}}class Dl extends ve{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bs(n){return n.name==="IndexedDbTransactionError"}class JM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vo(r)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),vo(this.store.add(e))}get(e){return vo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),vo(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),vo(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new K(((a,l)=>{s.onerror=h=>{l(h.target.error)},s.onsuccess=h=>{a(h.target.result)}}))}{const s=this.cursor(r),a=[];return this.W(s,((l,h)=>{a.push(h)})).next((()=>a))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new K(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}j(e,t){ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,((s,a,l)=>l.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new K(((r,i)=>{t.onerror=s=>{const a=v_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((l=>{l?a.continue():r()})):r()}}))}W(e,t){const r=[];return new K(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const l=a.target.result;if(!l)return void i();const h=new QM(l),d=t(l.primaryKey,l.value,h);if(d instanceof K){const p=d.catch((_=>(h.done(),K.reject(_))));r.push(p)}h.isDone?i():h.K===null?l.continue():l.continue(h.K)}})).next((()=>K.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vo(n){return new K(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=v_(r.target.error);t(i)}}))}let cE=!1;function v_(n){const e=Ds.S(on());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cE||(cE=!0,setTimeout((()=>{throw r}),0)),r}}return n}class YM{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ue("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ue("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Bs(t)?ue("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Us(t)}await this.X(6e4)}))}}class XM{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let i=t,s=!0;return K.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return ue("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next((l=>{i-=l,r.add(a)}));s=!1})))).next((()=>t-i))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.re(i,s))).next((l=>(ue("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l)))).next((()=>a.size))}))))}re(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=gb(s);y_(a,r)>0&&(r=a)})),new cr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zn.oe=-1;function Td(n){return n==null}function Xl(n){return n===0&&1/n==-1/0}function vb(n){return typeof n=="number"&&Number.isInteger(n)&&!Xl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hE(e)),e=ZM(n.get(t),e);return hE(e)}function ZM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function hE(n){return n+""}function Yr(n){const e=n.length;if(Pe(e>=2),e===2)return Pe(n.charAt(0)===""&&n.charAt(1)===""),Tt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&Ee(),n.charAt(a+1)){case"":const l=n.substring(s,a);let h;i.length===0?h=l:(i+=l,h=i,i=""),r.push(h);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Ee()}s=a+2}return new Tt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n,e){return[n,zn(e)]}function wb(n,e,t){return[n,zn(e),t]}const eF={},tF=["prefixPath","collectionGroup","readTime","documentId"],nF=["prefixPath","collectionGroup","documentId"],rF=["collectionGroup","readTime","prefixPath","documentId"],iF=["canonicalId","targetId"],sF=["targetId","path"],oF=["path","targetId"],aF=["collectionId","parent"],uF=["indexId","uid"],lF=["uid","sequenceNumber"],cF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hF=["indexId","uid","orderedDocumentKey"],fF=["userId","collectionPath","documentId"],dF=["userId","collectionPath","largestBatchId"],pF=["userId","collectionGroup","largestBatchId"],Eb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gF=[...Eb,"documentOverlays"],Ib=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tb=Ib,w_=[...Tb,"indexConfiguration","indexState","indexEntries"],mF=w_,_F=[...w_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends _b{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function an(n,e){const t=Ie(n);return Ds.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r!=null?r:gn.RED,this.left=i!=null?i:gn.EMPTY,this.right=s!=null?s:gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new gn(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return gn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,r,i,s){return this}insert(e,t,r){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ta(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new er([])}unionWith(e){let t=new vt(kt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new Ab("Invalid base64 string: "+s):s}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const yF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(n){if(Pe(!!n),typeof n=="string"){let e=0;const t=yF.exec(n);if(Pe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vs(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function I_(n){const e=n.mapValue.fields.__previous_value__;return E_(e)?I_(e):e}function Zl(n){const e=Mi(n.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,t,r,i,s,a,l,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=d}}class Lo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hf={nullValue:"NULL_VALUE"};function Mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?E_(n)?4:Sb(n)?9007199254740991:bd(n)?10:11:Ee()}function ri(n,e){if(n===e)return!0;const t=Mo(n);if(t!==Mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zl(n).isEqual(Zl(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Mi(i.timestampValue),l=Mi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Vs(i.bytesValue).isEqual(Vs(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xt(i.doubleValue),l=xt(s.doubleValue);return a===l?Xl(a)===Xl(l):isNaN(a)&&isNaN(l)}return!1})(n,e);case 9:return Ja(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(dE(a)!==dE(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(l[h]===void 0||!ri(a[h],l[h])))return!1;return!0})(n,e);default:return Ee()}}function ec(n,e){return(n.values||[]).find((t=>ri(t,e)))!==void 0}function Ls(n,e){if(n===e)return 0;const t=Mo(n),r=Mo(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const l=xt(s.integerValue||s.doubleValue),h=xt(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1})(n,e);case 3:return gE(n.timestampValue,e.timestampValue);case 4:return gE(Zl(n),Zl(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return(function(s,a){const l=Vs(s),h=Vs(a);return l.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const l=s.split("/"),h=a.split("/");for(let d=0;d<l.length&&d<h.length;d++){const p=ze(l[d],h[d]);if(p!==0)return p}return ze(l.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const l=ze(xt(s.latitude),xt(a.latitude));return l!==0?l:ze(xt(s.longitude),xt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mE(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var l,h,d,p;const _=s.fields||{},v=a.fields||{},E=(l=_.value)===null||l===void 0?void 0:l.arrayValue,N=(h=v.value)===null||h===void 0?void 0:h.arrayValue,M=ze(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return M!==0?M:mE(E,N)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===As.mapValue&&a===As.mapValue)return 0;if(s===As.mapValue)return 1;if(a===As.mapValue)return-1;const l=s.fields||{},h=Object.keys(l),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let _=0;_<h.length&&_<p.length;++_){const v=ze(h[_],p[_]);if(v!==0)return v;const E=Ls(l[h[_]],d[p[_]]);if(E!==0)return E}return ze(h.length,p.length)})(n.mapValue,e.mapValue);default:throw Ee()}}function gE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Mi(n),r=Mi(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function mE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Ls(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function Ya(n){return mm(n)}function mm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Mi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Vs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=mm(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${mm(t.fields[a])}`;return i+"}"})(n.mapValue):Ee()}function T_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _m(n){return!!n&&"integerValue"in n}function tc(n){return!!n&&"arrayValue"in n}function _E(n){return!!n&&"nullValue"in n}function yE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ff(n){return!!n&&"mapValue"in n}function bd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ol(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Rb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function wF(n){return"nullValue"in n?hf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?T_(Lo.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?bd(n)?Rb:{mapValue:{}}:Ee()}function EF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?T_(Lo.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Rb:"mapValue"in n?bd(n)?{mapValue:{}}:As:Ee()}function vE(n,e){const t=Ls(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function wE(n,e){const t=Ls(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=kt.emptyPath(),r={},i=[];e.forEach(((a,l)=>{if(!t.isImmediateParentOf(l)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=l.popLast()}a?r[l.lastSegment()]=Ol(a):i.push(l.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ff(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wo(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new kn(Ol(this.value))}}function Pb(n){const e=[];return Wo(n.fields,((t,r)=>{const i=new kt([t]);if(ff(r)){const s=Pb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,r,i,s,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,xe.min(),xe.min(),xe.min(),kn.empty(),0)}static newFoundDocument(e,t,r,i){return new Ut(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new Ut(e,2,t,xe.min(),xe.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,xe.min(),xe.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t){this.position=e,this.inclusive=t}}function EE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),t.key):r=Ls(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function IE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t="asc"){this.field=e,this.dir=t}}function IF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{}class st extends Cb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TF(e,t,r):t==="array-contains"?new SF(e,r):t==="in"?new Vb(e,r):t==="not-in"?new RF(e,r):t==="array-contains-any"?new PF(e,r):new st(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bF(e,r):new AF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ls(t,this.value)):t!==null&&Mo(this.value)===Mo(t)&&this.matchesComparison(Ls(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yt extends Cb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new yt(e,t)}matches(e){return Za(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Za(n){return n.op==="and"}function ym(n){return n.op==="or"}function b_(n){return xb(n)&&Za(n)}function xb(n){for(const e of n.filters)if(e instanceof yt)return!1;return!0}function vm(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(b_(n))return n.filters.map((e=>vm(e))).join(",");{const e=n.filters.map((t=>vm(t))).join(",");return`${n.op}(${e})`}}function Db(n,e){return n instanceof st?(function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&ri(r.value,i.value)})(n,e):n instanceof yt?(function(r,i){return i instanceof yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,l)=>s&&Db(a,i.filters[l])),!0):!1})(n,e):void Ee()}function Ob(n,e){const t=n.filters.concat(e);return yt.create(t,n.op)}function kb(n){return n instanceof st?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`})(n):n instanceof yt?(function(t){return t.op.toString()+" {"+t.getFilters().map(kb).join(" ,")+"}"})(n):"Filter"}class TF extends st{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class bF extends st{constructor(e,t){super(e,"in",t),this.keys=Nb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class AF extends st{constructor(e,t){super(e,"not-in",t),this.keys=Nb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Nb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>ye.fromName(r.referenceValue)))}class SF extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tc(t)&&ec(t.arrayValue,this.value)}}class Vb extends st{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ec(this.value.arrayValue,t)}}class RF extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ec(this.value.arrayValue,t)}}class PF extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ec(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,t=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function wm(n,e=null,t=[],r=[],i=null,s=null,a=null){return new CF(n,e,t,r,i,s,a)}function Fo(n){const e=Ie(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>vm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Td(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ya(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ya(r))).join(",")),e.ue=t}return e.ue}function yc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!IF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Db(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IE(n.startAt,e.startAt)&&IE(n.endAt,e.endAt)}function $f(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function jf(n,e){return n.filters.filter((t=>t instanceof st&&t.field.isEqual(e)))}function TE(n,e,t){let r=hf,i=!0;for(const s of jf(n,e)){let a=hf,l=!0;switch(s.op){case"<":case"<=":a=wF(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,l=!1;break;case"!=":case"not-in":a=hf}vE({value:r,inclusive:i},{value:a,inclusive:l})<0&&(r=a,i=l)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];vE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function bE(n,e,t){let r=As,i=!0;for(const s of jf(n,e)){let a=As,l=!0;switch(s.op){case">=":case">":a=EF(s.value),l=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,l=!1;break;case"!=":case"not-in":a=As}wE({value:r,inclusive:i},{value:a,inclusive:l})>0&&(r=a,i=l)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];wE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t=null,r=[],i=[],s=null,a="F",l=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Lb(n,e,t,r,i,s,a,l){return new Ad(n,e,t,r,i,s,a,l)}function vc(n){return new Ad(n)}function AE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xF(n){return n.collectionGroup!==null}function kl(n){const e=Ie(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new vt(kt.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(l=l.add(d.field))}))})),l})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new qf(s,r))})),t.has(kt.keyField().canonicalString())||e.ce.push(new qf(kt.keyField(),r))}return e.ce}function ur(n){const e=Ie(n);return e.le||(e.le=DF(e,kl(n))),e.le}function DF(n,e){if(n.limitType==="F")return wm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new qf(i.field,s)}));const t=n.endAt?new Xa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Xa(n.startAt.position,n.startAt.inclusive):null;return wm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Em(n,e,t){return new Ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sd(n,e){return yc(ur(n),ur(e))&&n.limitType===e.limitType}function Mb(n){return`${Fo(ur(n))}|lt:${n.limitType}`}function ka(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>kb(i))).join(", ")}]`),Td(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Ya(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Ya(i))).join(",")),`Target(${r})`})(ur(n))}; limitType=${n.limitType})`}function wc(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of kl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,l,h){const d=EE(a,l,h);return a.inclusive?d<=0:d<0})(r.startAt,kl(r),i)||r.endAt&&!(function(a,l,h){const d=EE(a,l,h);return a.inclusive?d>=0:d>0})(r.endAt,kl(r),i))})(n,e)}function Fb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ub(n){return(e,t)=>{let r=!1;for(const i of kl(n)){const s=OF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function OF(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(s,a,l){const h=a.data.field(s),d=l.data.field(s);return h!==null&&d!==null?Ls(h,d):Ee()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return bb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=new St(ye.comparator);function ar(){return kF}const Bb=new St(ye.comparator);function pl(...n){let e=Bb;for(const t of n)e=e.insert(t.key,t);return e}function qb(n){let e=Bb;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Xr(){return Nl()}function $b(){return Nl()}function Nl(){return new qs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const NF=new St(ye.comparator),VF=new vt(ye.comparator);function Ze(...n){let e=VF;for(const t of n)e=e.add(t);return e}const LF=new vt(ze);function A_(){return LF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function jb(n){return{integerValue:""+n}}function MF(n,e){return vb(e)?jb(e):S_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this._=void 0}}function FF(n,e,t){return n instanceof nc?(function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&E_(s)&&(s=I_(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(t,e):n instanceof eu?Kb(n,e):n instanceof tu?Gb(n,e):(function(i,s){const a=zb(i,s),l=SE(a)+SE(i.Pe);return _m(a)&&_m(i.Pe)?jb(l):S_(i.serializer,l)})(n,e)}function UF(n,e,t){return n instanceof eu?Kb(n,e):n instanceof tu?Gb(n,e):t}function zb(n,e){return n instanceof rc?(function(r){return _m(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class nc extends Rd{}class eu extends Rd{constructor(e){super(),this.elements=e}}function Kb(n,e){const t=Wb(e);for(const r of n.elements)t.some((i=>ri(i,r)))||t.push(r);return{arrayValue:{values:t}}}class tu extends Rd{constructor(e){super(),this.elements=e}}function Gb(n,e){let t=Wb(e);for(const r of n.elements)t=t.filter((i=>!ri(i,r)));return{arrayValue:{values:t}}}class rc extends Rd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function SE(n){return xt(n.integerValue||n.doubleValue)}function Wb(n){return tc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t){this.field=e,this.transform=t}}function qF(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof eu&&i instanceof eu||r instanceof tu&&i instanceof tu?Ja(r.elements,i.elements,ri):r instanceof rc&&i instanceof rc?ri(r.Pe,i.Pe):r instanceof nc&&i instanceof nc})(n.transform,e.transform)}class $F{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pd{}function Hb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cd(n.key,Nn.none()):new du(n.key,n.data,Nn.none());{const t=n.data,r=kn.empty();let i=new vt(kt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new $i(n.key,r,new er(i.toArray()),Nn.none())}}function jF(n,e,t){n instanceof du?(function(i,s,a){const l=i.value.clone(),h=PE(i.fieldTransforms,s,a.transformResults);l.setAll(h),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):n instanceof $i?(function(i,s,a){if(!df(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=PE(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(Qb(i)),h.setAll(l),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Vl(n,e,t,r){return n instanceof du?(function(s,a,l,h){if(!df(s.precondition,a))return l;const d=s.value.clone(),p=CE(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof $i?(function(s,a,l,h){if(!df(s.precondition,a))return l;const d=CE(s.fieldTransforms,h,a),p=a.data;return p.setAll(Qb(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(s,a,l){return df(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(n,e,t)}function zF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=zb(r.transform,i||null);s!=null&&(t===null&&(t=kn.empty()),t.set(r.field,s))}return t||null}function RE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ja(r,i,((s,a)=>qF(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class du extends Pd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $i extends Pd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Qb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function PE(n,e,t){const r=new Map;Pe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,UF(a,l,t[i]))}return r}function CE(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,FF(s,a,e))}return r}class Cd extends Pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jb extends Pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&jF(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$b();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=t.has(i.key)?null:l;const h=Hb(a,l);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,((t,r)=>RE(t,r)))&&Ja(this.baseMutations,e.baseMutations,((t,r)=>RE(t,r)))}}class P_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length);let i=(function(){return NF})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new P_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,ot;function GF(n){switch(n){default:return Ee();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function Yb(n){if(n===void 0)return Kt("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Yt.OK:return ie.OK;case Yt.CANCELLED:return ie.CANCELLED;case Yt.UNKNOWN:return ie.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ie.INTERNAL;case Yt.UNAVAILABLE:return ie.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ie.NOT_FOUND;case Yt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Yt.ABORTED:return ie.ABORTED;case Yt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Yt.DATA_LOSS:return ie.DATA_LOSS;default:return Ee()}}(ot=Yt||(Yt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=new Po([4294967295,4294967295],0);function xE(n){const e=WF().encode(n),t=new ob;return t.update(e),new Uint8Array(t.digest())}function DE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Po([t,r],0),new Po([i,s],0)]}class x_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gl(`Invalid padding: ${t}`);if(r<0)throw new gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Po.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Po.fromNumber(r)));return i.compare(HF)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=xE(e),[r,i]=DE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new x_(s,i,t);return r.forEach((l=>a.insert(l))),a}insert(e){if(this.Ie===0)return;const t=xE(e),[r,i]=DE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ec(xe.min(),i,new St(ze),ar(),Ze())}}class Ic{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ic(r,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Xb{constructor(e,t){this.targetId=e,this.me=t}}class Zb{constructor(e,t,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class OE{constructor(){this.fe=0,this.ge=NE(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ze(),t=Ze(),r=Ze();return this.ge.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ee()}})),new Ic(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=NE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class QF{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=kE(),this.Qe=new St(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ee()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,i)=>{this.ze(i)&&t(i)}))}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if($f(s))if(r===0){const a=new ye(s.path);this.Ue(t,a,Ut.newNoDocument(a,xe.min()))}else Pe(r===1);else{const a=this.Ye(t);if(a!==r){const l=this.Ze(e),h=l?this.Xe(l,e,a):1;if(h!==0){this.je(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,l;try{a=Vs(r).toUint8Array()}catch(h){if(h instanceof Ab)return Ql("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{l=new x_(a,i,s)}catch(h){return Ql(h instanceof gl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return l.Ie===0?null:l}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,s,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((s,a)=>{const l=this.Je(a);if(l){if(s.current&&$f(l.target)){const h=new ye(l.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Ut.newNoDocument(h,e))}s.be&&(t.set(a,s.ve()),s.Ce())}}));let r=Ze();this.qe.forEach(((s,a)=>{let l=!0;a.forEachWhile((h=>{const d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(s))})),this.ke.forEach(((s,a)=>a.setReadTime(e)));const i=new Ec(e,t,this.Qe,this.ke,r);return this.ke=ar(),this.qe=kE(),this.Qe=new St(ze),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new OE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new OE),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function kE(){return new St(ye.comparator)}function NE(){return new St(ye.comparator)}const JF={asc:"ASCENDING",desc:"DESCENDING"},YF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XF={and:"AND",or:"OR"};class ZF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Im(n,e){return n.useProto3Json||Td(e)?e:{value:e}}function nu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eU(n,e){return nu(n,e.toTimestamp())}function Kn(n){return Pe(!!n),xe.fromTimestamp((function(t){const r=Mi(t);return new Nt(r.seconds,r.nanos)})(n))}function D_(n,e){return Tm(n,e).canonicalString()}function Tm(n,e){const t=(function(i){return new Tt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tA(n){const e=Tt.fromString(n);return Pe(cA(e)),e}function zf(n,e){return D_(n.databaseId,e.path)}function Co(n,e){const t=tA(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(iA(t))}function nA(n,e){return D_(n.databaseId,e)}function rA(n){const e=tA(n);return e.length===4?Tt.emptyPath():iA(e)}function bm(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iA(n){return Pe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function VE(n,e,t){return{name:zf(n,e),fields:t.value.mapValue.fields}}function tU(n,e,t){const r=Co(n,e.name),i=Kn(e.updateTime),s=e.createTime?Kn(e.createTime):xe.min(),a=new kn({mapValue:{fields:e.fields}}),l=Ut.newFoundDocument(r,i,s,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function nU(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ee()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,p){return d.useProto3Json?(Pe(p===void 0||typeof p=="string"),Wt.fromBase64String(p||"")):(Pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Wt.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(d){const p=d.code===void 0?ie.UNKNOWN:Yb(d.code);return new ve(p,d.message||"")})(a);t=new Zb(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Co(n,r.document.name),s=Kn(r.document.updateTime),a=r.document.createTime?Kn(r.document.createTime):xe.min(),l=new kn({mapValue:{fields:r.document.fields}}),h=Ut.newFoundDocument(i,s,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];t=new pf(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Co(n,r.document),s=r.readTime?Kn(r.readTime):xe.min(),a=Ut.newNoDocument(i,s),l=r.removedTargetIds||[];t=new pf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Co(n,r.document),s=r.removedTargetIds||[];t=new pf([],s,i,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new KF(i,s),l=r.targetId;t=new Xb(l,a)}}return t}function Kf(n,e){let t;if(e instanceof du)t={update:VE(n,e.key,e.value)};else if(e instanceof Cd)t={delete:zf(n,e.key)};else if(e instanceof $i)t={update:VE(n,e.key,e.data),updateMask:uU(e.fieldMask)};else{if(!(e instanceof Jb))return Ee();t={verify:zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const l=a.transform;if(l instanceof nc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof eu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof tu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rc)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Ee()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:eU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee()})(n,e.precondition)),t}function Am(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Nn.updateTime(Kn(s.updateTime)):s.exists!==void 0?Nn.exists(s.exists):Nn.none()})(e.currentDocument):Nn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,l){let h=null;if("setToServerValue"in l)Pe(l.setToServerValue==="REQUEST_TIME"),h=new nc;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];h=new eu(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];h=new tu(p)}else"increment"in l?h=new rc(a,l.increment):Ee();const d=kt.fromServerFormat(l.fieldPath);return new BF(d,h)})(n,i))):[];if(e.update){e.update.name;const i=Co(n,e.update.name),s=new kn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(h){const d=h.fieldPaths||[];return new er(d.map((p=>kt.fromServerFormat(p))))})(e.updateMask);return new $i(i,s,a,t,r)}return new du(i,s,t,r)}if(e.delete){const i=Co(n,e.delete);return new Cd(i,t)}if(e.verify){const i=Co(n,e.verify);return new Jb(i,t)}return Ee()}function rU(n,e){return n&&n.length>0?(Pe(e!==void 0),n.map((t=>(function(i,s){let a=i.updateTime?Kn(i.updateTime):Kn(s);return a.isEqual(xe.min())&&(a=Kn(s)),new $F(a,i.transformResults||[])})(t,e)))):[]}function sA(n,e){return{documents:[nA(n,e.path)]}}function oA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nA(n,i);const s=(function(d){if(d.length!==0)return lA(yt.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((p=>(function(v){return{field:Na(v.field),direction:sU(v.dir)}})(p)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=Im(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{_t:t,parent:i}}function aA(n){let e=rA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pe(r===1);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(_){const v=uA(_);return v instanceof yt&&b_(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(_){return _.map((v=>(function(N){return new qf(Va(N.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(v)))})(t.orderBy));let l=null;t.limit&&(l=(function(_){let v;return v=typeof _=="object"?_.value:_,Td(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(_){const v=!!_.before,E=_.values||[];return new Xa(E,v)})(t.startAt));let d=null;return t.endAt&&(d=(function(_){const v=!_.before,E=_.values||[];return new Xa(E,v)})(t.endAt)),Lb(e,i,a,s,l,"F",h,d)}function iU(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Va(t.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Va(t.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Va(t.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Va(t.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}})(n):n.fieldFilter!==void 0?(function(t){return st.create(Va(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yt.create(t.compositeFilter.filters.map((r=>uA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}})(t.compositeFilter.op))})(n):Ee()}function sU(n){return JF[n]}function oU(n){return YF[n]}function aU(n){return XF[n]}function Na(n){return{fieldPath:n.canonicalString()}}function Va(n){return kt.fromServerFormat(n.fieldPath)}function lA(n){return n instanceof st?(function(t){if(t.op==="=="){if(yE(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NAN"}};if(_E(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yE(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NOT_NAN"}};if(_E(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(t.field),op:oU(t.op),value:t.value}}})(n):n instanceof yt?(function(t){const r=t.getFilters().map((i=>lA(i)));return r.length===1?r[0]:{compositeFilter:{op:aU(t.op),filters:r}}})(n):Ee()}function uU(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,r,i,s=xe.min(),a=xe.min(),l=Wt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=h}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.ct=e}}function lU(n,e){let t;if(e.document)t=tU(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=Bo(e.noDocument.readTime);t=Ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{const r=ye.fromSegments(e.unknownDocument.path),i=Bo(e.unknownDocument.version);t=Ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new Nt(i[0],i[1]);return xe.fromTimestamp(s)})(e.readTime)),t}function LE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Gf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:zf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:nu(s,a.version.toTimestamp()),createTime:nu(s,a.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Uo(e.version)};else{if(!e.isUnknownDocument())return Ee();r.unknownDocument={path:t.path.toArray(),version:Uo(e.version)}}return r}function Gf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Uo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bo(n){const e=new Nt(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function wo(n,e){const t=(e.baseMutations||[]).map((s=>Am(n.ct,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];a.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>Am(n.ct,s))),i=Nt.fromMillis(e.localWriteTimeMs);return new R_(e.batchId,i,t,r)}function ml(n){const e=Bo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bo(n.lastLimboFreeSnapshotVersion):xe.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){return Pe(s.documents.length===1),ur(vc(rA(s.documents[0])))})(n.query):(function(s){return ur(aA(s))})(n.query),new Ri(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Wt.fromBase64String(n.resumeToken))}function fA(n,e){const t=Uo(e.snapshotVersion),r=Uo(e.lastLimboFreeSnapshotVersion);let i;i=$f(e.target)?sA(n.ct,e.target):oA(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dA(n){const e=aA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Em(e,e.limit,"L"):e}function Ig(n,e){return new C_(e.largestBatchId,Am(n.ct,e.overlayMutation))}function ME(n,e){const t=e.path.lastSegment();return[n,zn(e.path.popLast()),t]}function FE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Uo(r.readTime),documentKey:zn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{getBundleMetadata(e,t){return UE(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Bo(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return UE(e).put((function(i){return{bundleId:i.id,createTime:Uo(Kn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return BE(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:dA(s.bundledQuery),readTime:Bo(s.readTime)}})(r)}))}saveNamedQuery(e,t){return BE(e).put((function(i){return{name:i.name,readTime:Uo(Kn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function UE(n){return an(n,"bundles")}function BE(n){return an(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new xd(e,r)}getOverlay(e,t){return el(e).get(ME(this.userId,t)).next((r=>r?Ig(this.serializer,r):null))}getOverlays(e,t){const r=Xr();return K.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const l=new C_(t,a);i.push(this.ht(e,l))})),K.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(zn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(el(e).j("collectionPathOverlayIndex",l))})),K.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Xr(),s=zn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return el(e).U("collectionPathOverlayIndex",a).next((l=>{for(const h of l){const d=Ig(this.serializer,h);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=Xr();let a;const l=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return el(e).J({index:"collectionGroupOverlayIndex",range:l},((h,d,p)=>{const _=Ig(this.serializer,d);s.size()<i||_.largestBatchId===a?(s.set(_.getKey(),_),a=_.largestBatchId):p.done()})).next((()=>s))}ht(e,t){return el(e).put((function(i,s,a){const[l,h,d]=ME(s,a.mutation.key);return{userId:s,collectionPath:h,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Kf(i.ct,a.mutation)}})(this.serializer,this.userId,t))}}function el(n){return an(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{Pt(e){return an(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Wt.fromUint8Array(r):Wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(xt(e.integerValue));else if("doubleValue"in e){const r=xt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Xl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Mi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Vs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Sb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):bd(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ee()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",l=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(xt(l)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ye.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Eo.vt=new Eo;function fU(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function qE(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=fU(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class dU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=qE(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=qE(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class pU{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class gU{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class tl{constructor(){this.jt=new dU,this.Ht=new pU(this.jt),this.Jt=new gU(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Io(this.indexId,this.documentKey,this.arrayValue,r)}}function ls(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=$E(n.arrayValue,e.arrayValue),t!==0?t:(t=$E(n.directionalValue,e.directionalValue),t!==0?t:ye.comparator(n.documentKey,e.documentKey)))}function $E(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.Xt=new vt(((t,r)=>kt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Pe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=pm(e);if(t!==void 0&&!this.sn(t))return!1;const r=yo(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const h=r[s];if(!this.on(l,h)||!this._n(this.en[a++],h))return!1}++s}for(;s<r.length;++s){const l=r[s];if(a>=this.en.length||!this._n(this.en[a++],l))return!1}return!0}an(){if(this.nn)return null;let e=new vt(kt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new lf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new lf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new lf(r.field,r.dir==="asc"?0:1)));return new Bf(Bf.UNKNOWN_ID,this.collectionId,t,Yl.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){var e,t;if(Pe(n instanceof st||n instanceof yt),n instanceof st){if(n instanceof Vb){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((s=>st.create(n.field,"==",s))))||[];return yt.create(i,"or")}return n}const r=n.filters.map((i=>pA(i)));return yt.create(r,n.op)}function mU(n){if(n.getFilters().length===0)return[];const e=Pm(pA(n));return Pe(gA(e)),Sm(e)||Rm(e)?[e]:e.getFilters()}function Sm(n){return n instanceof st}function Rm(n){return n instanceof yt&&b_(n)}function gA(n){return Sm(n)||Rm(n)||(function(t){if(t instanceof yt&&ym(t)){for(const r of t.getFilters())if(!Sm(r)&&!Rm(r))return!1;return!0}return!1})(n)}function Pm(n){if(Pe(n instanceof st||n instanceof yt),n instanceof st)return n;if(n.filters.length===1)return Pm(n.filters[0]);const e=n.filters.map((r=>Pm(r)));let t=yt.create(e,n.op);return t=Wf(t),gA(t)?t:(Pe(t instanceof yt),Pe(Za(t)),Pe(t.filters.length>1),t.filters.reduce(((r,i)=>O_(r,i))))}function O_(n,e){let t;return Pe(n instanceof st||n instanceof yt),Pe(e instanceof st||e instanceof yt),t=n instanceof st?e instanceof st?(function(i,s){return yt.create([i,s],"and")})(n,e):zE(n,e):e instanceof st?zE(e,n):(function(i,s){if(Pe(i.filters.length>0&&s.filters.length>0),Za(i)&&Za(s))return Ob(i,s.getFilters());const a=ym(i)?i:s,l=ym(i)?s:i,h=a.filters.map((d=>O_(d,l)));return yt.create(h,"or")})(n,e),Wf(t)}function zE(n,e){if(Za(e))return Ob(e,n.getFilters());{const t=e.filters.map((r=>O_(n,r)));return yt.create(t,"or")}}function Wf(n){if(Pe(n instanceof st||n instanceof yt),n instanceof st)return n;const e=n.getFilters();if(e.length===1)return Wf(e[0]);if(xb(n))return n;const t=e.map((i=>Wf(i))),r=[];return t.forEach((i=>{i instanceof st?r.push(i):i instanceof yt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:yt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.un=new k_}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(cr.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class k_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vt(Tt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Uint8Array(0);class yU{constructor(e,t){this.databaseId=t,this.cn=new k_,this.ln=new qs((r=>Fo(r)),((r,i)=>yc(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const s={collectionId:r,parent:zn(i)};return KE(e).put(s)}return K.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[db(t),""],!1,!0);return KE(e).U(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Yr(a.parent))}return r}))}addFieldIndex(e,t){const r=nl(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Aa(e);return s.next((l=>{a.put(FE(l,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=nl(e),i=Aa(e),s=ba(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=nl(e),r=ba(e),i=Aa(e);return t.j().next((()=>r.j())).next((()=>i.j()))}createTargetIndexes(e,t){return K.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new jE(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=ba(e);let i=!0;const s=new Map;return K.forEach(this.hn(t),(a=>this.Pn(e,a).next((l=>{i&&(i=!!l),s.set(a,l)})))).next((()=>{if(i){let a=Ze();const l=[];return K.forEach(s,((h,d)=>{ue("IndexedDbIndexManager",`Using index ${(function(z){return`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map((G=>`${G.fieldPath}:${G.kind}`)).join(",")}`})(h)} to execute ${Fo(t)}`);const p=(function(z,G){const J=pm(G);if(J===void 0)return null;for(const oe of jf(z,J.fieldPath))switch(oe.op){case"array-contains-any":return oe.value.arrayValue.values||[];case"array-contains":return[oe.value]}return null})(d,h),_=(function(z,G){const J=new Map;for(const oe of yo(G))for(const R of jf(z,oe.fieldPath))switch(R.op){case"==":case"in":J.set(oe.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return J.set(oe.fieldPath.canonicalString(),R.value),Array.from(J.values())}return null})(d,h),v=(function(z,G){const J=[];let oe=!0;for(const R of yo(G)){const S=R.kind===0?TE(z,R.fieldPath,z.startAt):bE(z,R.fieldPath,z.startAt);J.push(S.value),oe&&(oe=S.inclusive)}return new Xa(J,oe)})(d,h),E=(function(z,G){const J=[];let oe=!0;for(const R of yo(G)){const S=R.kind===0?bE(z,R.fieldPath,z.endAt):TE(z,R.fieldPath,z.endAt);J.push(S.value),oe&&(oe=S.inclusive)}return new Xa(J,oe)})(d,h),N=this.In(h,d,v),M=this.In(h,d,E),F=this.Tn(h,d,_),Q=this.En(h.indexId,p,N,v.inclusive,M,E.inclusive,F);return K.forEach(Q,(j=>r.G(j,t.limit).next((z=>{z.forEach((G=>{const J=ye.fromSegments(G.documentKey);a.has(J)||(a=a.add(J),l.push(J))}))}))))})).next((()=>l))}return K.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=mU(yt.create(e.filters,"and")).map((r=>wm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,i,s,a,l){const h=(t!=null?t.length:1)*Math.max(r.length,s.length),d=h/(t!=null?t.length:1),p=[];for(let _=0;_<h;++_){const v=t?this.dn(t[_/d]):Jh,E=this.An(e,v,r[_%d],i),N=this.Rn(e,v,s[_%d],a),M=l.map((F=>this.An(e,v,F,!0)));p.push(...this.createRange(E,N,M))}return p}An(e,t,r,i){const s=new Io(e,ye.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Io(e,ye.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new jE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const l of s)r.rn(l)&&(!a||l.fields.length>a.fields.length)&&(a=l);return a}))}getIndexType(e,t){let r=2;const i=this.hn(t);return K.forEach(i,(s=>this.Pn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(h){let d=new vt(kt.comparator),p=!1;for(const _ of h.filters)for(const v of _.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:d=d.add(v.field));for(const _ of h.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Vn(e,t){const r=new tl;for(const i of yo(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);Eo.vt.It(s,a)}return r.zt()}dn(e){const t=new tl;return Eo.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new tl;return Eo.vt.It(T_(this.databaseId,t),r.Yt((function(s){const a=yo(s);return a.length===0?0:a[a.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new tl);let s=0;for(const a of yo(e)){const l=r[s++];for(const h of i)if(this.fn(t,a.fieldPath)&&tc(l))i=this.gn(i,a,l);else{const d=h.Yt(a.kind);Eo.vt.It(l,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const l of i){const h=new tl;h.seed(l.zt()),Eo.vt.It(a,h.Yt(t.kind)),s.push(h)}return s}fn(e,t){return!!e.filters.find((r=>r instanceof st&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=nl(e),i=Aa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((s=>{const a=[];return K.forEach(s,(l=>i.get([l.indexId,this.uid]).next((h=>{a.push((function(p,_){const v=_?new Yl(_.sequenceNumber,new cr(Bo(_.readTime),new ye(Yr(_.documentKey)),_.largestBatchId)):Yl.empty(),E=p.fields.map((([N,M])=>new lf(kt.fromServerFormat(N),M)));return new Bf(p.indexId,p.collectionGroup,E,v)})(l,h))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ze(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=nl(e),s=Aa(e);return this.yn(e).next((a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((l=>K.forEach(l,(h=>s.put(FE(h.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?K.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),K.forEach(l,(h=>this.wn(e,i,h).next((d=>{const p=this.Sn(s,h);return d.isEqual(p)?K.resolve():this.bn(e,s,h,d,p)})))))))}))}Dn(e,t,r,i){return ba(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ba(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=ba(e);let s=new vt(ls);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((a,l)=>{s=s.add(new Io(r.indexId,t,l.arrayValue,l.directionalValue))})).next((()=>s))}Sn(e,t){let r=new vt(ls);const i=this.Vn(t,e);if(i==null)return r;const s=pm(t);if(s!=null){const a=e.data.field(s.fieldPath);if(tc(a))for(const l of a.arrayValue.values||[])r=r.add(new Io(t.indexId,e.key,this.dn(l),i))}else r=r.add(new Io(t.indexId,e.key,Jh,i));return r}bn(e,t,r,i,s){ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return(function(h,d,p,_,v){const E=h.getIterator(),N=d.getIterator();let M=Ta(E),F=Ta(N);for(;M||F;){let Q=!1,j=!1;if(M&&F){const z=p(M,F);z<0?j=!0:z>0&&(Q=!0)}else M!=null?j=!0:Q=!0;Q?(_(F),F=Ta(N)):j?(v(M),M=Ta(E)):(M=Ta(E),F=Ta(N))}})(i,s,ls,(l=>{a.push(this.Dn(e,t,r,l))}),(l=>{a.push(this.vn(e,t,r,l))})),K.waitFor(a)}yn(e){let t=1;return Aa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,l)=>ls(a,l))).filter(((a,l,h)=>!l||ls(a,h[l-1])!==0));const i=[];i.push(e);for(const a of r){const l=ls(a,e),h=ls(a,t);if(l===0)i[0]=e.Zt();else if(l>0&&h<0)i.push(a),i.push(a.Zt());else if(h>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const l=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Jh,[]],h=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Jh,[]];s.push(IDBKeyRange.bound(l,h))}return s}Cn(e,t){return ls(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(GE)}getMinOffset(e,t){return K.mapArray(this.hn(t),(r=>this.Pn(e,r).next((i=>i||Ee())))).next(GE)}}function KE(n){return an(n,"collectionParents")}function ba(n){return an(n,"indexEntries")}function nl(n){return an(n,"indexConfiguration")}function Aa(n){return an(n,"indexState")}function GE(n){Pe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;y_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new cr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let l=0;const h=r.J({range:a},((p,_,v)=>(l++,v.delete())));s.push(h.next((()=>{Pe(l===1)})));const d=[];for(const p of t.mutations){const _=wb(e,p.key.path,t.batchId);s.push(i.delete(_)),d.push(p.key)}return K.waitFor(s).next((()=>d))}function Hf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(41943040,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);class Dd{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Pe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Dd(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cs(e).J({index:"userMutationsIndex",range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=La(e),a=cs(e);return a.add({}).next((l=>{Pe(typeof l=="number");const h=new R_(l,t,r,i),d=(function(E,N,M){const F=M.baseMutations.map((j=>Kf(E.ct,j))),Q=M.mutations.map((j=>Kf(E.ct,j)));return{userId:N,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:F,mutations:Q}})(this.serializer,this.userId,h),p=[];let _=new vt(((v,E)=>ze(v.canonicalString(),E.canonicalString())));for(const v of i){const E=wb(this.userId,v.key.path,l);_=_.add(v.key.path.popLast()),p.push(a.put(d)),p.push(s.put(E,eF))}return _.forEach((v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Fn[l]=h.keys()})),K.waitFor(p).next((()=>h))}))}lookupMutationBatch(e,t){return cs(e).get(t).next((r=>r?(Pe(r.userId===this.userId),wo(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?K.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return cs(e).J({index:"userMutationsIndex",range:i},((a,l,h)=>{l.userId===this.userId&&(Pe(l.batchId>=r),s=wo(this.serializer,l)),h.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return cs(e).J({index:"userMutationsIndex",range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cs(e).U("userMutationsIndex",t).next((r=>r.map((i=>wo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=cf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return La(e).J({range:i},((a,l,h)=>{const[d,p,_]=a,v=Yr(p);if(d===this.userId&&t.path.isEqual(v))return cs(e).get(_).next((E=>{if(!E)throw Ee();Pe(E.userId===this.userId),s.push(wo(this.serializer,E))}));h.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vt(ze);const i=[];return t.forEach((s=>{const a=cf(this.userId,s.path),l=IDBKeyRange.lowerBound(a),h=La(e).J({range:l},((d,p,_)=>{const[v,E,N]=d,M=Yr(E);v===this.userId&&s.path.isEqual(M)?r=r.add(N):_.done()}));i.push(h)})),K.waitFor(i).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=cf(this.userId,r),a=IDBKeyRange.lowerBound(s);let l=new vt(ze);return La(e).J({range:a},((h,d,p)=>{const[_,v,E]=h,N=Yr(v);_===this.userId&&r.isPrefixOf(N)?N.length===i&&(l=l.add(E)):p.done()})).next((()=>this.xn(e,l)))}xn(e,t){const r=[],i=[];return t.forEach((s=>{i.push(cs(e).get(s).next((a=>{if(a===null)throw Ee();Pe(a.userId===this.userId),r.push(wo(this.serializer,a))})))})),K.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return mA(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),K.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return La(e).J({range:r},((s,a,l)=>{if(s[0]===this.userId){const h=Yr(s[1]);i.push(h)}else l.done()})).next((()=>{Pe(i.length===0)}))}))}containsKey(e,t){return _A(e,this.userId,t)}Nn(e){return yA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function _A(n,e,t){const r=cf(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return La(n).J({range:s,H:!0},((l,h,d)=>{const[p,_,v]=l;p===e&&_===i&&(a=!0),d.done()})).next((()=>a))}function cs(n){return an(n,"mutations")}function La(n){return an(n,"documentMutations")}function yA(n){return an(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qo(0)}static kn(){return new qo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new qo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>xe.fromTimestamp(new Nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Sa(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(Pe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Sa(e).J(((a,l)=>{const h=ml(l);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,s.push(this.removeTargetData(e,h)))})).next((()=>K.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Sa(e).J(((r,i)=>{const s=ml(i);t(s)}))}qn(e){return HE(e).get("targetGlobalKey").next((t=>(Pe(t!==null),t)))}Qn(e,t){return HE(e).put("targetGlobalKey",t)}Kn(e,t){return Sa(e).put(fA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Fo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Sa(e).J({range:i,index:"queryTargetsIndex"},((a,l,h)=>{const d=ml(l);yc(t,d.target)&&(s=d,h.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=ws(e);return t.forEach((a=>{const l=zn(a.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,a))})),K.waitFor(i)}removeMatchingKeys(e,t,r){const i=ws(e);return K.forEach(t,(s=>{const a=zn(s.path);return K.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=ws(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ws(e);let s=Ze();return i.J({range:r,H:!0},((a,l,h)=>{const d=Yr(a[1]),p=new ye(d);s=s.add(p)})).next((()=>s))}containsKey(e,t){const r=zn(t.path),i=IDBKeyRange.bound([r],[db(r)],!1,!0);let s=0;return ws(e).J({index:"documentTargetsIndex",H:!0,range:i},(([a,l],h,d)=>{a!==0&&(s++,d.done())})).next((()=>s>0))}ot(e,t){return Sa(e).get(t).next((r=>r?ml(r):null))}}function Sa(n){return an(n,"targets")}function HE(n){return an(n,"targetGlobal")}function ws(n){return an(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE([n,e],[t,r]){const i=ze(n,t);return i===0?ze(e,r):i}class wU{constructor(e){this.Un=e,this.buffer=new vt(QE),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();QE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bs(t)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Us(t)}await this.Hn(3e5)}))}}class IU{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Zn.oe);const r=new wU(t);return this.Jn.forEachTarget(e,(i=>r.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>r.zn(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(WE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WE):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,l,h,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,a=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,l=Date.now(),this.removeTargets(e,r,t)))).next((_=>(s=_,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(d=Date.now(),Oa()<=nt.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(h-l)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-p}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:_}))))}}function TU(n,e){return new IU(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t){this.db=e,this.garbageCollector=TU(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,i)=>t(i)))}addReference(e,t,r){return Yh(e,r)}removeReference(e,t,r){return Yh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yh(e,t)}nr(e,t){return(function(i,s){let a=!1;return yA(i).Y((l=>_A(i,l,s).next((h=>(h&&(a=!0),K.resolve(!h)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,((a,l)=>{if(l<=t){const h=this.nr(e,a).next((d=>{if(!d)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,xe.min()),ws(e).delete((function(_){return[0,zn(_.path)]})(a)))))}));i.push(h)}})).next((()=>K.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yh(e,t)}tr(e,t){const r=ws(e);let i,s=Zn.oe;return r.J({index:"documentTargetsIndex"},(([a,l],{path:h,sequenceNumber:d})=>{a===0?(s!==Zn.oe&&t(new ye(Yr(i)),s),s=d,i=h):s=Zn.oe})).next((()=>{s!==Zn.oe&&t(new ye(Yr(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yh(n,e){return ws(n).put((function(r,i){return{targetId:0,path:zn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.changes=new qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return go(e).put(r)}removeEntry(e,t,r){return go(e).delete((function(s,a){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Gf(a),l[l.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=Ut.newInvalidDocument(t);return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rl(t))},((i,s)=>{r=this.ir(t,s)})).next((()=>r))}sr(e,t){let r={size:0,document:Ut.newInvalidDocument(t)};return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rl(t))},((i,s)=>{r={document:this.ir(t,s),size:Hf(s)}})).next((()=>r))}getEntries(e,t){let r=ar();return this._r(e,t,((i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)})).next((()=>r))}ar(e,t){let r=ar(),i=new St(ye.comparator);return this._r(e,t,((s,a)=>{const l=this.ir(s,a);r=r.insert(s,l),i=i.insert(s,Hf(a))})).next((()=>({documents:r,ur:i})))}_r(e,t,r){if(t.isEmpty())return K.resolve();let i=new vt(XE);t.forEach((h=>i=i.add(h)));const s=IDBKeyRange.bound(rl(i.first()),rl(i.last())),a=i.getIterator();let l=a.getNext();return go(e).J({index:"documentKeyIndex",range:s},((h,d,p)=>{const _=ye.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;l&&XE(l,_)<0;)r(l,null),l=a.getNext();l&&l.isEqual(_)&&(r(l,d),l=a.hasNext()?a.getNext():null),l?p.$(rl(l)):p.done()})).next((()=>{for(;l;)r(l,null),l=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),Gf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return go(e).U(IDBKeyRange.bound(l,h,!0)).next((d=>{s==null||s.incrementDocumentReadCount(d.length);let p=ar();for(const _ of d){const v=this.ir(ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);v.isFoundDocument()&&(wc(t,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p}))}getAllFromCollectionGroup(e,t,r,i){let s=ar();const a=YE(t,r),l=YE(t,cr.max());return go(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,l,!0)},((h,d,p)=>{const _=this.ir(ye.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(_.key,_),s.size===i&&p.done()})).next((()=>s))}newChangeBuffer(e){return new SU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return JE(e).get("remoteDocumentGlobalKey").next((t=>(Pe(!!t),t)))}rr(e,t){return JE(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=lU(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return Ut.newInvalidDocument(e)}}function wA(n){return new AU(n)}class SU extends vA{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new qs((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new vt(((s,a)=>ze(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const l=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,l.readTime)),a.isValidDocument()){const h=LE(this.cr.serializer,a);i=i.add(s.path.popLast());const d=Hf(h);r+=d-l.size,t.push(this.cr.addEntry(e,s,h))}else if(r-=l.size,this.trackRemovals){const h=LE(this.cr.serializer,a.convertToNoDocument(xe.min()));t.push(this.cr.addEntry(e,s,h))}})),i.forEach((s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.cr.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:i})=>(i.forEach(((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function JE(n){return an(n,"remoteDocumentGlobal")}function go(n){return an(n,"remoteDocumentsV14")}function rl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YE(n,e){const t=e.documentKey.path.toArray();return[n,Gf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ze(t[s],r[s]),i)return i;return i=ze(t.length,r.length),i||(i=ze(t[t.length-2],r[r.length-2]),i||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Vl(r.mutation,i,er.empty(),Nt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ze()){const i=Xr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=pl();return s.forEach(((l,h)=>{a=a.insert(l,h.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Xr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ze())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,l)=>{t.set(a,l)}))}))}computeViews(e,t,r,i){let s=ar();const a=Nl(),l=(function(){return Nl()})();return t.forEach(((h,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof $i)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Vl(p.mutation,d,p.mutation.getFieldMask(),Nt.now())):a.set(d.key,er.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((d,p)=>a.set(d,p))),t.forEach(((d,p)=>{var _;return l.set(d,new RU(p,(_=a.get(d))!==null&&_!==void 0?_:null))})),l)))}recalculateAndSaveOverlays(e,t){const r=Nl();let i=new St(((a,l)=>a-l)),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const l of a)l.keys().forEach((h=>{const d=t.get(h);if(d===null)return;let p=r.get(h)||er.empty();p=l.applyToLocalView(d,p),r.set(h,p);const _=(i.get(l.batchId)||Ze()).add(h);i=i.insert(l.batchId,_)}))})).next((()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const h=l.getNext(),d=h.key,p=h.value,_=$b();p.forEach((v=>{if(!s.has(v)){const E=Hb(t.get(v),r.get(v));E!==null&&_.set(v,E),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,_))}return K.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):K.resolve(Xr());let l=-1,h=s;return a.next((d=>K.forEach(d,((p,_)=>(l<_.largestBatchId&&(l=_.largestBatchId),s.get(p)?K.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,h,d,Ze()))).next((p=>({batchId:l,changes:qb(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let i=pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=pl();return this.indexManager.getCollectionParents(e,s).next((l=>K.forEach(l,(h=>{const d=(function(_,v){return new Ad(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((p=>{p.forEach(((_,v)=>{a=a.insert(_,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((h,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Ut.newInvalidDocument(p)))}));let l=pl();return a.forEach(((h,d)=>{const p=s.get(h);p!==void 0&&Vl(p.mutation,d,er.empty(),Nt.now()),wc(t,d)&&(l=l.insert(h,d))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Kn(i.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(i){return{name:i.name,query:dA(i.bundledQuery),readTime:Kn(i.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(){this.overlays=new St(ye.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xr();return K.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.ht(e,t,s)})),K.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const i=Xr(),s=t.length+1,a=new ye(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const h=l.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new St(((d,p)=>d-p));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Xr(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Xr(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,p)=>l.set(d,p))),!(l.size()>=i)););return K.resolve(l)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new C_(t,r));let s=this.Ir.get(t);s===void 0&&(s=Ze(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.Tr=new vt(cn.Er),this.dr=new vt(cn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new cn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new cn(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new ye(new Tt([])),r=new cn(t,e),i=new cn(t,e+1),s=[];return this.dr.forEachInRange([r,i],(a=>{this.Vr(a),s.push(a.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ye(new Tt([])),r=new cn(t,e),i=new cn(t,e+1);let s=Ze();return this.dr.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new cn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class cn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new vt(cn.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new R_(s,t,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new cn(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new cn(t,0),i=new cn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],(a=>{const l=this.Dr(a.wr);s.push(l)})),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vt(ze);return t.forEach((i=>{const s=new cn(i,0),a=new cn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],(l=>{r=r.add(l.wr)}))})),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new cn(new ye(s),0);let l=new vt(ze);return this.br.forEachWhile((h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(h.wr)),!0)}),a),K.resolve(this.Cr(l))}Cr(e){const t=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Pe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(t.mutations,(i=>{const s=new cn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new cn(t,0),i=this.br.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.Mr=e,this.docs=(function(){return new St(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=ar();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))})),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ar();const a=t.path,l=new ye(a.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||y_(gb(p),r)<=0||(i.has(p.key)||wc(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ee()}Or(e,t){return K.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new kU(this)}getSize(e){return K.resolve(this.size)}}class kU extends vA{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.persistence=e,this.Nr=new qs((t=>Fo(t)),yc),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new N_,this.targetCount=0,this.kr=qo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,i)=>t(i))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach(((a,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),K.waitFor(s).next((()=>i))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),K.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Zn(0),this.Kr=!1,this.Kr=!0,this.$r=new xU,this.referenceDelegate=e(this),this.Ur=new NU(this),this.indexManager=new _U,this.remoteDocumentCache=(function(i){return new OU(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new hA(t),this.Gr=new PU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new DU(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const i=new VU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((s=>this.referenceDelegate.jr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Hr(e,t){return K.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class VU extends _b{constructor(e){super(),this.currentSequenceNumber=e}}class Od{constructor(e){this.persistence=e,this.Jr=new N_,this.Yr=null}static Zr(e){return new Od(e)}get Xr(){if(this.Yr)return this.Yr;throw Ee()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.Xr.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,(r=>{const i=ye.fromPath(r);return this.ei(e,i).next((s=>{s||t.removeEntry(i,xe.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Id("createOrUpgrade",t);r<1&&i>=1&&((function(h){h.createObjectStore("owner")})(e),(function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fE,{unique:!0}),h.createObjectStore("documentMutations")})(e),ZE(e),(function(h){h.createObjectStore("remoteDocuments")})(e));let a=K.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")})(e),ZE(e)),a=a.next((()=>(function(h){const d=h.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(h,d){return d.store("mutations").U().next((p=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fE,{unique:!0});const _=d.store("mutations"),v=p.map((E=>_.put(E)));return K.waitFor(v)}))})(e,s)))),a=a.next((()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.ni(s)))),r<6&&i>=6&&(a=a.next((()=>((function(h){h.createObjectStore("remoteDocumentGlobal")})(e),this.ri(s))))),r<7&&i>=7&&(a=a.next((()=>this.ii(s)))),r<8&&i>=8&&(a=a.next((()=>this.si(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.oi(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(h){h.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(h){const d=h.createObjectStore("documentOverlays",{keyPath:fF});d.createIndex("collectionPathOverlayIndex",dF,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",pF,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(h){const d=h.createObjectStore("remoteDocumentsV14",{keyPath:tF});d.createIndex("documentKeyIndex",nF),d.createIndex("collectionGroupIndex",rF)})(e))).next((()=>this._i(e,s))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&i>=14&&(a=a.next((()=>this.ai(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:uF}).createIndex("sequenceNumberIndex",lF,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:cF}).createIndex("documentKeyIndex",hF,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)}))),a}ri(e){let t=0;return e.store("remoteDocuments").J(((r,i)=>{t+=Hf(i)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((i=>K.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next((l=>K.forEach(l,(h=>{Pe(h.userId===s.userId);const d=wo(this.serializer,h);return mA(e,s.userId,d).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const s=[];return r.J(((a,l)=>{const h=new Tt(a),d=(function(_){return[0,zn(_)]})(h);s.push(t.get(d).next((p=>p?K.resolve():(_=>t.put({targetId:0,path:zn(_),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>K.waitFor(s)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:aF});const r=t.store("collectionParents"),i=new k_,s=a=>{if(i.add(a)){const l=a.lastSegment(),h=a.popLast();return r.put({collectionId:l,parent:zn(h)})}};return t.store("remoteDocuments").J({H:!0},((a,l)=>{const h=new Tt(a);return s(h.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([a,l,h],d)=>{const p=Yr(l);return s(p.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,i)=>{const s=ml(i),a=fA(this.serializer,s);return t.put(a)}))}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J(((s,a)=>{const l=t.store("remoteDocumentsV14"),h=(function(_){return _.document?new ye(Tt.fromString(_.document.name).popFirst(5)):_.noDocument?ye.fromSegments(_.noDocument.path):_.unknownDocument?ye.fromSegments(_.unknownDocument.path):Ee()})(a).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(l.put(d))})).next((()=>K.waitFor(i)))}ai(e,t){const r=t.store("mutations"),i=wA(this.serializer),s=new IA(Od.Zr,this.serializer.ct);return r.U().next((a=>{const l=new Map;return a.forEach((h=>{var d;let p=(d=l.get(h.userId))!==null&&d!==void 0?d:Ze();wo(this.serializer,h).keys().forEach((_=>p=p.add(_))),l.set(h.userId,p)})),K.forEach(l,((h,d)=>{const p=new xn(d),_=xd.lt(this.serializer,p),v=s.getIndexManager(p),E=Dd.lt(p,this.serializer,v,s.referenceDelegate);return new EA(i,E,_,v).recalculateAndSaveOverlaysForDocumentKeys(new gm(t,Zn.oe),h).next()}))}))}}function ZE(n){n.createObjectStore("targetDocuments",{keyPath:sF}).createIndex("documentTargetsIndex",oF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iF,{unique:!0}),n.createObjectStore("targetGlobal")}const Tg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class V_{constructor(e,t,r,i,s,a,l,h,d,p,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=l,this.ci=d,this.li=p,this.hi=_,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!V_.D())throw new ve(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bU(this,i),this.Ai=t+"main",this.serializer=new hA(h),this.Ri=new Ds(this.Ai,this.hi,new LU(this.serializer)),this.$r=new hU,this.Ur=new vU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wA(this.serializer),this.Gr=new cU,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ie.FAILED_PRECONDITION,Tg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Zn(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Bs(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return il(e).get("owner").next((t=>K.resolve(this.vi(t))))}Ci(e){return Xh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=an(t,"clientMetadata");return r.U().next((i=>{const s=this.xi(i,18e5),a=i.filter((l=>s.indexOf(l)===-1));return K.forEach(a,(l=>r.delete(l.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?K.resolve(!0):il(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ve(ie.FAILED_PRECONDITION,Tg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xh(e).U().next((r=>this.xi(r,5e3).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||a&&l)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new gm(e,Zn.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Xh(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Dd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ue("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(h){return h===17?_F:h===16?mF:h===15?w_:h===14?Tb:h===13?Ib:h===12?gF:h===11?Eb:void Ee()})(this.hi);let a;return this.Ri.runTransaction(e,i,s,(l=>(a=new gm(l,this.Qr?this.Qr.next():Zn.oe),t==="readwrite-primary"?this.wi(a).next((h=>!!h||this.Si(a))).next((h=>{if(!h)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ve(ie.FAILED_PRECONDITION,mb);return r(a)})).next((h=>this.Di(a).next((()=>h)))):this.Ki(a).next((()=>r(a)))))).then((l=>(a.raiseOnCommittedEvent(),l)))}Ki(e){return il(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ie.FAILED_PRECONDITION,Tg)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return il(e).put("owner",t)}static D(){return Ds.D()}bi(e){const t=il(e);return t.get("owner").next((r=>this.vi(r)?(ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):K.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;Z0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function il(n){return an(n,"owner")}function Xh(n){return an(n,"clientMetadata")}function TA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ze(),i=Ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new L_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Z0()?8:yb(on())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.Zi(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new MU;return this.Xi(e,t,a).next((l=>{if(s.result=l,this.zi)return this.es(e,t,a,l.size)}))})).next((()=>s.result))}es(e,t,r,i){return r.documentReadCount<this.ji?(Oa()<=nt.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(Oa()<=nt.DEBUG&&ue("QueryEngine","Query:",ka(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Oa()<=nt.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):K.resolve())}Yi(e,t){if(AE(t))return K.resolve(null);let r=ur(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Em(t,null,"F"),r=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Ze(...s);return this.Ji.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,r).next((h=>{const d=this.ts(t,l);return this.ns(t,d,a,h.readTime)?this.Yi(e,Em(t,null,"F")):this.rs(e,d,t,h)}))))})))))}Zi(e,t,r,i){return AE(t)||i.isEqual(xe.min())?K.resolve(null):this.Ji.getDocuments(e,r).next((s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?K.resolve(null):(Oa()<=nt.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ka(t)),this.rs(e,a,t,pb(i,-1)).next((l=>l)))}))}ts(e,t){let r=new vt(Ub(e));return t.forEach(((i,s)=>{wc(e,s)&&(r=r.add(s))})),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Oa()<=nt.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",ka(t)),this.Ji.getDocumentsMatchingQuery(e,t,cr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new St(ze),this._s=new qs((s=>Fo(s)),yc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function AA(n,e,t,r){return new FU(n,e,t,r)}async function SA(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],l=[];let h=Ze();for(const d of i){a.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}for(const d of s){l.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next((d=>({hs:d,removedBatchIds:a,addedBatchIds:l})))}))}))}function UU(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return(function(l,h,d,p){const _=d.batch,v=_.keys();let E=K.resolve();return v.forEach((N=>{E=E.next((()=>p.getEntry(h,N))).next((M=>{const F=d.docVersions.get(N);Pe(F!==null),M.version.compareTo(F)<0&&(_.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),p.addEntry(M)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(h,_)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let h=Ze();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(h=h.add(l.batch.mutations[d].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function RA(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function BU(n,e){const t=Ie(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const l=[];e.targetChanges.forEach(((p,_)=>{const v=i.get(_);if(!v)return;l.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,_).next((()=>t.Ur.addMatchingKeys(s,p.addedDocuments,_))));let E=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(Wt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(_,E),(function(M,F,Q){return M.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(v,E,p)&&l.push(t.Ur.updateTargetData(s,E))}));let h=ar(),d=Ze();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))})),l.push(qU(s,a,e.documentUpdates).next((p=>{h=p.Ps,d=p.Is}))),!r.isEqual(xe.min())){const p=t.Ur.getLastRemoteSnapshotVersion(s).next((_=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r)));l.push(p)}return K.waitFor(l).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,h,d))).next((()=>h))})).then((s=>(t.os=i,s)))}function qU(n,e,t){let r=Ze(),i=Ze();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=ar();return t.forEach(((l,h)=>{const d=s.get(l);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),h.isNoDocument()&&h.version.isEqual(xe.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):ue("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",h.version)})),{Ps:a,Is:i}}))}function $U(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Qf(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Ur.getTargetData(r,e).next((s=>s?(i=s,K.resolve(i)):t.Ur.allocateTargetId(r).next((a=>(i=new Ri(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function ru(n,e,t){const r=Ie(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Bs(a))throw a;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Cm(n,e,t){const r=Ie(n);let i=xe.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(h,d,p){const _=Ie(h),v=_._s.get(p);return v!==void 0?K.resolve(_.os.get(v)):_.Ur.getTargetData(d,p)})(r,a,ur(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next((h=>{s=h}))})).next((()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:xe.min(),t?s:Ze()))).next((l=>(xA(r,Fb(e),l),{documents:l,Ts:s})))))}function PA(n,e){const t=Ie(n),r=Ie(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.ot(s,e).next((a=>a?a.target:null))))}function CA(n,e){const t=Ie(n),r=t.us.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.cs.getAllFromCollectionGroup(i,e,pb(r,-1),Number.MAX_SAFE_INTEGER))).then((i=>(xA(t,e,i),i)))}function xA(n,e,t){let r=n.us.get(e)||xe.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.us.set(e,r)}function eI(n,e){return`firestore_clients_${n}_${e}`}function tI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function bg(n,e){return`firestore_targets_${n}_${e}`}class Jf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ve(i.error.code,i.error.message))),a?new Jf(e,t,i.state,s):(Kt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ll{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ve(r.error.code,r.error.message))),s?new Ll(e,r.state,i):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=A_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=vb(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Yf(e,s):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class M_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new M_(t.clientId,t.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xm{constructor(){this.activeTargetIds=A_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ag{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new St(ze),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=eI(this.persistenceKey,this.ps),this.vs=(function(h){return`firestore_sequence_number_${h}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new xm),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=(function(h){return`firestore_online_state_${h}`})(this.persistenceKey),this.Os=(function(h){return`firestore_bundle_loaded_v2_${h}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(eI(this.persistenceKey,r));if(i){const s=Yf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(bg(this.persistenceKey,e));if(i){const s=Ll.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Qs(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue("SharedClientState","READ",e,t),t}setItem(e,t){ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ue("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(s){let a=Zn.oe;if(s!=null)try{const l=JSON.parse(s);Pe(typeof l=="number"),a=l}catch(l){Kt("SharedClientState","Failed to read sequence number from WebStorage",l)}return a})(t.newValue);r!==Zn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Jf(this.currentUser,e,t,r),s=tI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=tI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=bg(this.persistenceKey,e),s=new Ll(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Yf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Jf.Rs(new xn(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Ll.Rs(i,t)}Ls(e){return M_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],l=[];return s.forEach((h=>{i.has(h)||a.push(h)})),i.forEach((h=>{s.has(h)||l.push(h)})),this.syncEngine.io(a,l).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=A_();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class DA{constructor(){this.so=new xm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh=null;function Sg(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class GU extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const l=Sg(),h=this.xo(t,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${t}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,h,d,i).then((p=>(ue("RestConnection",`Received RPC '${t}' ${l}: `,p),p)),(p=>{throw Ql("RestConnection",`RPC '${t}' ${l} failed with error: `,p,"url: ",h,"request:",i),p}))}Lo(t,r,i,s,a,l){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fu})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((s,a)=>t[a]=s)),i&&i.headers.forEach(((s,a)=>t[a]=s))}xo(t,r){const i=zU[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=Sg();return new Promise(((a,l)=>{const h=new ab;h.setWithCredentials(!0),h.listenOnce(ub.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case uf.NO_ERROR:const p=h.getResponseJson();ue(Rn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case uf.TIMEOUT:ue(Rn,`RPC '${e}' ${s} timed out`),l(new ve(ie.DEADLINE_EXCEEDED,"Request time out"));break;case uf.HTTP_ERROR:const _=h.getStatus();if(ue(Rn,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v==null?void 0:v.error;if(E&&E.status&&E.message){const N=(function(F){const Q=F.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Q)>=0?Q:ie.UNKNOWN})(E.status);l(new ve(N,E.message))}else l(new ve(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ve(ie.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ue(Rn,`RPC '${e}' ${s} completed.`)}}));const d=JSON.stringify(i);ue(Rn,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",d,r,15)}))}Bo(e,t,r){const i=Sg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hb(),l=cb(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=s.join("");ue(Rn,`Creating RPC '${e}' stream ${i}: ${p}`,h);const _=a.createWebChannel(p,h);let v=!1,E=!1;const N=new KU({Io:F=>{E?ue(Rn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(v||(ue(Rn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),v=!0),ue(Rn,`RPC '${e}' stream ${i} sending:`,F),_.send(F))},To:()=>_.close()}),M=(F,Q,j)=>{F.listen(Q,(z=>{try{j(z)}catch(G){setTimeout((()=>{throw G}),0)}}))};return M(_,dl.EventType.OPEN,(()=>{E||(ue(Rn,`RPC '${e}' stream ${i} transport opened.`),N.yo())})),M(_,dl.EventType.CLOSE,(()=>{E||(E=!0,ue(Rn,`RPC '${e}' stream ${i} transport closed`),N.So())})),M(_,dl.EventType.ERROR,(F=>{E||(E=!0,Ql(Rn,`RPC '${e}' stream ${i} transport errored:`,F),N.So(new ve(ie.UNAVAILABLE,"The operation could not be completed")))})),M(_,dl.EventType.MESSAGE,(F=>{var Q;if(!E){const j=F.data[0];Pe(!!j);const z=j,G=z.error||((Q=z[0])===null||Q===void 0?void 0:Q.error);if(G){ue(Rn,`RPC '${e}' stream ${i} received error:`,G);const J=G.status;let oe=(function(A){const x=Yt[A];if(x!==void 0)return Yb(x)})(J),R=G.message;oe===void 0&&(oe=ie.INTERNAL,R="Unknown error status: "+J+" with message "+G.message),E=!0,N.So(new ve(oe,R)),_.close()}else ue(Rn,`RPC '${e}' stream ${i} received:`,j),N.bo(j)}})),M(l,lb.STAT_EVENT,(F=>{F.stat===dm.PROXY?ue(Rn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===dm.NOPROXY&&ue(Rn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return typeof window!="undefined"?window:null}function gf(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n){return new ZF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t,r,i,s,a,l,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kA(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===t&&this.P_(r,i)}),(r=>{e((()=>{const i=new ve(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WU extends NA{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=nU(this.serializer,e),r=(function(s){if(!("targetChange"in s))return xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?Kn(a.readTime):xe.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=bm(this.serializer),t.addTarget=(function(s,a){let l;const h=a.target;if(l=$f(h)?{documents:sA(s,h)}:{query:oA(s,h)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=eA(s,a.resumeToken);const d=Im(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){l.readTime=nu(s,a.snapshotVersion.toTimestamp());const d=Im(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l})(this.serializer,e);const r=iU(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=bm(this.serializer),t.removeTarget=e,this.a_(t)}}class HU extends NA{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=rU(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=bm(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Kf(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Mo(e,Tm(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ie.UNKNOWN,s.toString())}))}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Lo(e,Tm(t,r),i,a,l,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(ie.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class JU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kt(t),this.D_=!1):ue("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((a=>{r.enqueueAndForget((async()=>{Ho(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const d=Ie(h);d.L_.add(4),await Tc(d),d.q_.set("Unknown"),d.L_.delete(4),await Nd(d)})(this))}))})),this.q_=new JU(r,i)}}async function Nd(n){if(Ho(n))for(const e of n.B_)await e(!0)}async function Tc(n){for(const e of n.B_)await e(!1)}function Vd(n,e){const t=Ie(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),B_(t)?U_(t):gu(t).r_()&&F_(t,e))}function iu(n,e){const t=Ie(n),r=gu(t);t.N_.delete(e),r.r_()&&VA(t,e),t.N_.size===0&&(r.r_()?r.o_():Ho(t)&&t.q_.set("Unknown"))}function F_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gu(n).A_(e)}function VA(n,e){n.Q_.xe(e),gu(n).R_(e)}function U_(n){n.Q_=new QF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),gu(n).start(),n.q_.v_()}function B_(n){return Ho(n)&&!gu(n).n_()&&n.N_.size>0}function Ho(n){return Ie(n).L_.size===0}function LA(n){n.Q_=void 0}async function XU(n){n.q_.set("Online")}async function ZU(n){n.N_.forEach(((e,t)=>{F_(n,e)}))}async function e2(n,e){LA(n),B_(n)?(n.q_.M_(e),U_(n)):n.q_.set("Unknown")}async function t2(n,e,t){if(n.q_.set("Online"),e instanceof Zb&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))})(n,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xf(n,r)}else if(e instanceof pf?n.Q_.Ke(e):e instanceof Xb?n.Q_.He(e):n.Q_.We(e),!t.isEqual(xe.min()))try{const r=await RA(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(h.resumeToken,a))}})),l.targetMismatches.forEach(((h,d)=>{const p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(Wt.EMPTY_BYTE_STRING,p.snapshotVersion)),VA(s,h);const _=new Ri(p.target,h,d,p.sequenceNumber);F_(s,_)})),s.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await Xf(n,r)}}async function Xf(n,e,t){if(!Bs(e))throw e;n.L_.add(1),await Tc(n),n.q_.set("Offline"),t||(t=()=>RA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Nd(n)}))}function MA(n,e){return e().catch((t=>Xf(n,t,e)))}async function pu(n){const e=Ie(n),t=Ms(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;n2(e);)try{const i=await $U(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,r2(e,i)}catch(i){await Xf(e,i)}FA(e)&&UA(e)}function n2(n){return Ho(n)&&n.O_.length<10}function r2(n,e){n.O_.push(e);const t=Ms(n);t.r_()&&t.V_&&t.m_(e.mutations)}function FA(n){return Ho(n)&&!Ms(n).n_()&&n.O_.length>0}function UA(n){Ms(n).start()}async function i2(n){Ms(n).p_()}async function s2(n){const e=Ms(n);for(const t of n.O_)e.m_(t.mutations)}async function o2(n,e,t){const r=n.O_.shift(),i=P_.from(r,e,t);await MA(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await pu(n)}async function a2(n,e){e&&Ms(n).V_&&await(async function(r,i){if((function(a){return GF(a)&&a!==ie.ABORTED})(i.code)){const s=r.O_.shift();Ms(r).s_(),await MA(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await pu(r)}})(n,e),FA(n)&&UA(n)}async function rI(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=Ho(t);t.L_.add(3),await Tc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Nd(t)}async function Dm(n,e){const t=Ie(n);e?(t.L_.delete(2),await Nd(t)):e||(t.L_.add(2),await Tc(t),t.q_.set("Unknown"))}function gu(n){return n.K_||(n.K_=(function(t,r,i){const s=Ie(t);return s.w_(),new WU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Eo:XU.bind(null,n),Ro:ZU.bind(null,n),mo:e2.bind(null,n),d_:t2.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),B_(n)?U_(n):n.q_.set("Unknown")):(await n.K_.stop(),LA(n))}))),n.K_}function Ms(n){return n.U_||(n.U_=(function(t,r,i){const s=Ie(t);return s.w_(),new HU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:i2.bind(null,n),mo:a2.bind(null,n),f_:s2.bind(null,n),g_:o2.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await pu(n)):(await n.U_.stop(),n.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,l=new q_(e,t,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $_(n,e){if(Kt("AsyncQueue",`${e}: ${n}`),Bs(n))return new ve(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=pl(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new ja(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ja)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.W_=new St(ye.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ee():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class su{constructor(e,t,r,i,s,a,l,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((l=>{a.push({type:0,doc:l})})),new su(e,t,ja.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class l2{constructor(){this.queries=sI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Ie(t),s=i.queries;i.queries=sI(),s.forEach(((a,l)=>{for(const h of l.j_)h.onError(r)}))})(this,new ve(ie.ABORTED,"Firestore shutting down"))}}function sI(){return new qs((n=>Mb(n)),Sd)}async function BA(n,e){const t=Ie(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new u2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const l=$_(a,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&j_(t)}async function qA(n,e){const t=Ie(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function c2(n,e){const t=Ie(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&j_(t)}function h2(n,e,t){const r=Ie(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function j_(n){n.Y_.forEach((e=>{e.next()}))}var Om,oI;(oI=Om||(Om={})).ea="default",oI.Cache="cache";class $A{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new su(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.key=e}}class zA{constructor(e){this.key=e}}class f2{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ze(),this.mutatedKeys=Ze(),this.Aa=Ub(e),this.Ra=new ja(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new iI,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,l=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,_)=>{const v=i.get(p),E=wc(this.query,_)?_:null,N=!!v&&this.mutatedKeys.has(v.key),M=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let F=!1;v&&E?v.data.isEqual(E.data)?N!==M&&(r.track({type:3,doc:E}),F=!0):this.ga(v,E)||(r.track({type:2,doc:E}),F=!0,(h&&this.Aa(E,h)>0||d&&this.Aa(E,d)<0)&&(l=!0)):!v&&E?(r.track({type:0,doc:E}),F=!0):v&&!E&&(r.track({type:1,doc:v}),F=!0,(h||d)&&(l=!0)),F&&(E?(a=a.add(E),s=M?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((p,_)=>(function(E,N){const M=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return M(E)-M(N)})(p.type,_.type)||this.Aa(p.doc,_.doc))),this.pa(r),i=i!=null&&i;const l=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new su(this.query,e.Ra,s,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ze(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new zA(r))})),this.da.forEach((r=>{e.has(r)||t.push(new jA(r))})),t}ba(e){this.Ta=e.Ts,this.da=Ze();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return su.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class d2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class p2{constructor(e){this.key=e,this.va=!1}}class g2{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new qs((l=>Mb(l)),Sd),this.Ma=new Map,this.xa=new Set,this.Oa=new St(ye.comparator),this.Na=new Map,this.La=new N_,this.Ba={},this.ka=new Map,this.qa=qo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function m2(n,e,t=!0){const r=Ld(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await KA(r,e,t,!0),i}async function _2(n,e){const t=Ld(n);await KA(t,e,!0,!1)}async function KA(n,e,t,r){const i=await Qf(n.localStore,ur(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let l;return r&&(l=await z_(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Vd(n.remoteStore,i),l}async function z_(n,e,t,r,i){n.Ka=(_,v,E)=>(async function(M,F,Q,j){let z=F.view.ma(Q);z.ns&&(z=await Cm(M.localStore,F.query,!1).then((({documents:R})=>F.view.ma(R,z))));const G=j&&j.targetChanges.get(F.targetId),J=j&&j.targetMismatches.get(F.targetId)!=null,oe=F.view.applyChanges(z,M.isPrimaryClient,G,J);return km(M,F.targetId,oe.wa),oe.snapshot})(n,_,v,E);const s=await Cm(n.localStore,e,!0),a=new f2(e,s.Ts),l=a.ma(s.documents),h=Ic.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(l,n.isPrimaryClient,h);km(n,t,d.wa);const p=new d2(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}async function y2(n,e,t){const r=Ie(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((a=>!Sd(a,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ru(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&iu(r.remoteStore,i.targetId),ou(r,i.targetId)})).catch(Us)):(ou(r,i.targetId),await ru(r.localStore,i.targetId,!0))}async function v2(n,e){const t=Ie(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),iu(t.remoteStore,r.targetId))}async function w2(n,e,t){const r=H_(n);try{const i=await(function(a,l){const h=Ie(a),d=Nt.now(),p=l.reduce(((E,N)=>E.add(N.key)),Ze());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let N=ar(),M=Ze();return h.cs.getEntries(E,p).next((F=>{N=F,N.forEach(((Q,j)=>{j.isValidDocument()||(M=M.add(Q))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,N))).next((F=>{_=F;const Q=[];for(const j of l){const z=zF(j,_.get(j.key).overlayedDocument);z!=null&&Q.push(new $i(j.key,z,Pb(z.value.mapValue),Nn.exists(!0)))}return h.mutationQueue.addMutationBatch(E,d,Q,l)})).next((F=>{v=F;const Q=F.applyToLocalDocumentSet(_,M);return h.documentOverlayCache.saveOverlays(E,F.batchId,Q)}))})).then((()=>({batchId:v.batchId,changes:qb(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,l,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new St(ze)),d=d.insert(l,h),a.Ba[a.currentUser.toKey()]=d})(r,i.batchId,t),await $s(r,i.changes),await pu(r.remoteStore)}catch(i){const s=$_(i,"Failed to persist write");t.reject(s)}}async function GA(n,e){const t=Ie(n);try{const r=await BU(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Na.get(s);a&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Pe(a.va):i.removedDocuments.size>0&&(Pe(a.va),a.va=!1))})),await $s(t,r,e)}catch(r){await Us(r)}}function aI(n,e,t){const r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach(((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)})),(function(a,l){const h=Ie(a);h.onlineState=l;let d=!1;h.queries.forEach(((p,_)=>{for(const v of _.j_)v.Z_(l)&&(d=!0)})),d&&j_(h)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E2(n,e,t){const r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new St(ye.comparator);a=a.insert(s,Ut.newNoDocument(s,xe.min()));const l=Ze().add(s),h=new Ec(xe.min(),new Map,new St(ze),a,l);await GA(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),W_(r)}else await ru(r.localStore,e,!1).then((()=>ou(r,e,t))).catch(Us)}async function I2(n,e){const t=Ie(n),r=e.batch.batchId;try{const i=await UU(t.localStore,e);G_(t,r,null),K_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await $s(t,i)}catch(i){await Us(i)}}async function T2(n,e,t){const r=Ie(n);try{const i=await(function(a,l){const h=Ie(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return h.mutationQueue.lookupMutationBatch(d,l).next((_=>(Pe(_!==null),p=_.keys(),h.mutationQueue.removeMutationBatch(d,_)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,l))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>h.localDocuments.getDocuments(d,p)))}))})(r.localStore,e);G_(r,e,t),K_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await $s(r,i)}catch(i){await Us(i)}}function K_(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function G_(n,e,t){const r=Ie(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ou(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||WA(n,r)}))}function WA(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(iu(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),W_(n))}function km(n,e,t){for(const r of t)r instanceof jA?(n.La.addReference(r.key,e),b2(n,r)):r instanceof zA?(ue("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||WA(n,r.key)):Ee()}function b2(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ue("SyncEngine","New document in limbo: "+t),n.xa.add(r),W_(n))}function W_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ye(Tt.fromString(e)),r=n.qa.next();n.Na.set(r,new p2(t)),n.Oa=n.Oa.insert(t,r),Vd(n.remoteStore,new Ri(ur(vc(t.path)),r,"TargetPurposeLimboResolution",Zn.oe))}}async function $s(n,e,t){const r=Ie(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((l,h)=>{a.push(r.Ka(h,e,t).then((d=>{var p;if((d||t)&&r.isPrimaryClient){const _=d?!d.fromCache:(p=t==null?void 0:t.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=L_.Wi(h.targetId,d);s.push(_)}})))})),await Promise.all(a),r.Ca.d_(i),await(async function(h,d){const p=Ie(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>K.forEach(d,(v=>K.forEach(v.$i,(E=>p.persistence.referenceDelegate.addReference(_,v.targetId,E))).next((()=>K.forEach(v.Ui,(E=>p.persistence.referenceDelegate.removeReference(_,v.targetId,E)))))))))}catch(_){if(!Bs(_))throw _;ue("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const E=p.os.get(v),N=E.snapshotVersion,M=E.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(v,M)}}})(r.localStore,s))}async function A2(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await SA(t.localStore,e);t.currentUser=e,(function(s,a){s.ka.forEach((l=>{l.forEach((h=>{h.reject(new ve(ie.CANCELLED,a))}))})),s.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $s(t,r.hs)}}function S2(n,e){const t=Ie(n),r=t.Na.get(e);if(r&&r.va)return Ze().add(r.key);{let i=Ze();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const l=t.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}async function R2(n,e){const t=Ie(n),r=await Cm(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&km(t,e.targetId,i.wa),i}async function P2(n,e){const t=Ie(n);return CA(t.localStore,e).then((r=>$s(t,r)))}async function C2(n,e,t,r){const i=Ie(n),s=await(function(l,h){const d=Ie(l),p=Ie(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",(_=>p.Mn(_,h).next((v=>v?d.localDocuments.getDocuments(_,v):K.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await pu(i.remoteStore):t==="acknowledged"||t==="rejected"?(G_(i,e,r||null),K_(i,e),(function(l,h){Ie(Ie(l).mutationQueue).On(h)})(i.localStore,e)):Ee(),await $s(i,s)):ue("SyncEngine","Cannot apply mutation batch with id: "+e)}async function x2(n,e){const t=Ie(n);if(Ld(t),H_(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await uI(t,r.toArray());t.Qa=!0,await Dm(t.remoteStore,!0);for(const s of i)Vd(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(ou(t,a),ru(t.localStore,a,!0)))),iu(t.remoteStore,a)})),await i,await uI(t,r),(function(a){const l=Ie(a);l.Na.forEach(((h,d)=>{iu(l.remoteStore,d)})),l.La.pr(),l.Na=new Map,l.Oa=new St(ye.comparator)})(t),t.Qa=!1,await Dm(t.remoteStore,!1)}}async function uI(n,e,t){const r=Ie(n),i=[],s=[];for(const a of e){let l;const h=r.Ma.get(a);if(h&&h.length!==0){l=await Qf(r.localStore,ur(h[0]));for(const d of h){const p=r.Fa.get(d),_=await R2(r,p);_.snapshot&&s.push(_.snapshot)}}else{const d=await PA(r.localStore,a);l=await Qf(r.localStore,d),await z_(r,HA(d),a,!1,l.resumeToken)}i.push(l)}return r.Ca.d_(s),i}function HA(n){return Lb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function D2(n){return(function(t){return Ie(Ie(t).persistence).Qi()})(Ie(n).localStore)}async function O2(n,e,t,r){const i=Ie(n);if(i.Qa)return void ue("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await CA(i.localStore,Fb(s[0])),l=Ec.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Wt.EMPTY_BYTE_STRING);await $s(i,a,l);break}case"rejected":await ru(i.localStore,e,!0),ou(i,e,r);break;default:Ee()}}async function k2(n,e,t){const r=Ld(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ue("SyncEngine","Adding an already active target "+i);continue}const s=await PA(r.localStore,i),a=await Qf(r.localStore,s);await z_(r,HA(s),a.targetId,!1,a.resumeToken),Vd(r.remoteStore,a)}for(const i of t)r.Ma.has(i)&&await ru(r.localStore,i,!1).then((()=>{iu(r.remoteStore,i),ou(r,i)})).catch(Us)}}function Ld(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E2.bind(null,e),e.Ca.d_=c2.bind(null,e.eventManager),e.Ca.$a=h2.bind(null,e.eventManager),e}function H_(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T2.bind(null,e),e}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return AA(this.persistence,new bA,e.initialUser,this.serializer)}Ga(e){return new IA(Od.Zr,this.serializer)}Wa(e){return new DA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class QA extends ic{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await H_(this.Ja.syncEngine),await pu(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return AA(this.persistence,new bA,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new EU(r,e.asyncQueue,t)}Ha(e,t){const r=new XM(t,this.persistence);return new YM(e.asyncQueue,r)}Ga(e){const t=TA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new V_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OA(),gf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new DA}}class N2 extends QA{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Ag&&(this.sharedClientState.syncEngine={no:C2.bind(null,t),ro:O2.bind(null,t),io:k2.bind(null,t),Qi:D2.bind(null,t),eo:P2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await x2(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=OA();if(!Ag.D(t))throw new ve(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=TA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ag(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A2.bind(null,this.syncEngine),await Dm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new l2})()}createDatastore(e){const t=kd(e.databaseInfo.databaseId),r=(function(s){return new GU(s)})(e.databaseInfo);return(function(s,a,l,h){return new QU(s,a,l,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,l){return new YU(r,i,s,a,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>aI(this.syncEngine,t,0)),(function(){return nI.D()?new nI:new jU})())}createSyncEngine(e,t){return(function(i,s,a,l,h,d,p){const _=new g2(i,s,a,l,h,d);return p&&(_.Qa=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const s=Ie(i);ue("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Tc(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sc.provider={build:()=>new sc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xn.UNAUTHENTICATED,this.clientId=fb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{ue("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ue("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=$_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Rg(n,e){n.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await SA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function lI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await L2(n);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>rI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>rI(e.remoteStore,i))),n._onlineComponents=e}async function L2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ql("Error using user provided cache. Falling back to memory cache: "+t),await Rg(n,new ic)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Rg(n,new ic);return n._offlineComponents}async function YA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await lI(n,n._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await lI(n,new sc))),n._onlineComponents}function M2(n){return YA(n).then((e=>e.syncEngine))}async function Nm(n){const e=await YA(n),t=e.eventManager;return t.onListen=m2.bind(null,e.syncEngine),t.onUnlisten=y2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=v2.bind(null,e.syncEngine),t}function F2(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,l,h,d){const p=new JA({next:v=>{p.Za(),a.enqueueAndForget((()=>qA(s,_)));const E=v.docs.has(l);!E&&v.fromCache?d.reject(new ve(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&h&&h.source==="server"?d.reject(new ve(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),_=new $A(vc(l.path),p,{includeMetadataChanges:!0,_a:!0});return BA(s,_)})(await Nm(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n,e,t){if(!t)throw new ve(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function B2(n,e,t,r){if(e===!0&&r===!0)throw new ve(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hI(n){if(!ye.isDocumentKey(n))throw new ve(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee()}function Os(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Q_(n);throw new ve(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ZA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fI(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qM;switch(r.type){case"firstParty":return new zM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=cI.get(t);r&&(ue("ComponentProvider","Removing Datastore"),cI.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Md(this.firestore,e,this._query)}}class lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class oc extends Md{constructor(e,t,r){super(e,t,vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new ye(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function dI(n,e,...t){if(n=vn(n),arguments.length===1&&(e=fb.newId()),U2("doc","path",e),n instanceof ZA){const r=Tt.fromString(e,...t);return hI(r),new lr(n,null,new ye(r))}{if(!(n instanceof lr||n instanceof oc))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return hI(r),new lr(n.firestore,n instanceof oc?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kA(this,"async_queue_retry"),this.Vu=()=>{const r=gf();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=gf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=gf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Di;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Bs(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l})(r);throw Kt("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=q_.createAndSchedule(this,e,t,r,(s=>this.yu(s)));return this.Tu.push(i),i}fu(){this.Eu&&Ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function gI(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}class au extends ZA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new pI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pI(e),this._firestoreClient=void 0,await e}}}function q2(n,e,t){t||(t="(default)");const r=m_(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(Wl(s,e))return i;throw new ve(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function Fd(n){if(n._terminated)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$2(n),n._firestoreClient}function $2(n){var e,t,r;const i=n._freezeSettings(),s=(function(l,h,d,p){return new vF(l,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,XA(p.experimentalLongPollingOptions),p.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new V2(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(l){const h=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uu(Wt.fromBase64String(e))}catch(t){throw new ve(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uu(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=/^__.*__$/;class z2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class eS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Z_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Z_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(tS(this.Cu)&&j2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class K2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kd(e)}Qu(e,t,r,i=!1){return new Z_({Cu:e,methodName:t,qu:r,path:kt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nS(n){const e=n._freezeSettings(),t=kd(n._databaseId);return new K2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rS(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);ey("Data must be an object, but it was:",a,r);const l=iS(r,a);let h,d;if(s.merge)h=new er(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const _ of s.mergeFields){const v=Vm(e,_,t);if(!a.contains(v))throw new ve(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);oS(p,v)||p.push(v)}h=new er(p),d=a.fieldTransforms.filter((_=>h.covers(_.field)))}else h=null,d=a.fieldTransforms;return new z2(new kn(l),h,d)}class bc extends J_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}function G2(n,e,t,r){const i=n.Qu(1,e,t);ey("Data must be an object, but it was:",i,r);const s=[],a=kn.empty();Wo(r,((h,d)=>{const p=ty(e,h,t);d=vn(d);const _=i.Nu(p);if(d instanceof bc)s.push(p);else{const v=Bd(d,_);v!=null&&(s.push(p),a.set(p,v))}}));const l=new er(s);return new eS(a,l,i.fieldTransforms)}function W2(n,e,t,r,i,s){const a=n.Qu(1,e,t),l=[Vm(e,r,t)],h=[i];if(s.length%2!=0)throw new ve(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(Vm(e,s[v])),h.push(s[v+1]);const d=[],p=kn.empty();for(let v=l.length-1;v>=0;--v)if(!oS(d,l[v])){const E=l[v];let N=h[v];N=vn(N);const M=a.Nu(E);if(N instanceof bc)d.push(E);else{const F=Bd(N,M);F!=null&&(d.push(E),p.set(E,F))}}const _=new er(d);return new eS(p,_,a.fieldTransforms)}function Bd(n,e){if(sS(n=vn(n)))return ey("Unsupported field value:",e,n),iS(n,e);if(n instanceof J_)return(function(r,i){if(!tS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const l of r){let h=Bd(l,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Nt.fromDate(r);return{timestampValue:nu(i.serializer,s)}}if(r instanceof Nt){const s=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nu(i.serializer,s)}}if(r instanceof Y_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof uu)return{bytesValue:eA(i.serializer,r._byteString)};if(r instanceof lr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:D_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof X_)return(function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw l.Bu("VectorValues must only contain numeric values.");return S_(l.serializer,h)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Q_(r)}`)})(n,e)}function iS(n,e){const t={};return bb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(n,((r,i)=>{const s=Bd(i,e.Mu(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function sS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof Y_||n instanceof uu||n instanceof lr||n instanceof J_||n instanceof X_)}function ey(n,e,t){if(!sS(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){const r=Q_(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Vm(n,e,t){if((e=vn(e))instanceof Ud)return e._internalPath;if(typeof e=="string")return ty(n,e);throw Zf("Field path arguments must be of type string or ",n,!1,void 0,t)}const H2=new RegExp("[~\\*/\\[\\]]");function ty(n,e,t){if(e.search(H2)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ud(...e.split("."))._internalPath}catch{throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zf(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new ve(ie.INVALID_ARGUMENT,l+n+h)}function oS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Q2 extends aS{data(){return super.data()}}function uS(n,e){return typeof e=="string"?ty(n,e):e instanceof Ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y2{convertValue(e,t="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Wo(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((a=>xt(a.doubleValue)));return new X_(s)}convertGeoPoint(e){return new Y_(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=I_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const t=Mi(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);Pe(cA(r));const i=new Lo(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||Kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cS extends aS{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(uS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class mf extends cS{data(e={}){return super.data(e)}}class X2{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _l(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new mf(this._firestore,this._userDataWriter,r.key,r,new _l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((l=>{const h=new mf(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _l(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>s||l.type!==3)).map((l=>{const h=new mf(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _l(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:Z2(l.type),doc:h,oldIndex:d,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Z2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(n){n=Os(n,lr);const e=Os(n.firestore,au);return F2(Fd(e),n._key).then((t=>dS(e,n,t)))}class hS extends Y2{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}function tB(n,e,t){n=Os(n,lr);const r=Os(n.firestore,au),i=lS(n.converter,e,t);return fS(r,[rS(nS(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Nn.none())])}function mI(n,...e){var t,r,i;n=vn(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||gI(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(gI(e[a])){const _=e[a];e[a]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let h,d,p;if(n instanceof lr)d=Os(n.firestore,au),p=vc(n._key.path),h={next:_=>{e[a]&&e[a](dS(d,n,_))},error:e[a+1],complete:e[a+2]};else{const _=Os(n,Md);d=Os(_.firestore,au),p=_._query;const v=new hS(d);h={next:E=>{e[a]&&e[a](new X2(d,v,_,E))},error:e[a+1],complete:e[a+2]},J2(n._query)}return(function(v,E,N,M){const F=new JA(M),Q=new $A(E,F,N);return v.asyncQueue.enqueueAndForget((async()=>BA(await Nm(v),Q))),()=>{F.Za(),v.asyncQueue.enqueueAndForget((async()=>qA(await Nm(v),Q)))}})(Fd(d),p,l,h)}function fS(n,e){return(function(r,i){const s=new Di;return r.asyncQueue.enqueueAndForget((async()=>w2(await M2(r),i,s))),s.promise})(Fd(n),e)}function dS(n,e,t){const r=t.docs.get(e._key),i=new hS(n);return new cS(n,i,e._key,r,new _l(t.hasPendingWrites,t.fromCache),e.converter)}class nB{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=oB(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function rB(n){return new nB(n)}class iB{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=sc.provider,this._offlineComponentProvider={build:t=>new QA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class sB{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=sc.provider,this._offlineComponentProvider={build:t=>new N2(t,e==null?void 0:e.cacheSizeBytes)}}}function oB(n){return new iB(void 0)}function aB(){return new sB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nS(e)}set(e,t,r){this._verifyNotCommitted();const i=Pg(e,this._firestore),s=lS(i.converter,t,r),a=rS(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Nn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Pg(e,this._firestore);let a;return a=typeof(t=vn(t))=="string"||t instanceof Ud?W2(this._dataReader,"WriteBatch.update",s._key,t,r,i):G2(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pg(e,this._firestore);return this._mutations=this._mutations.concat(new Cd(t._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pg(n,e){if((n=vn(n)).firestore!==e)throw new ve(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){return new bc("deleteField")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(n){return Fd(n=Os(n,au)),new uB(n,(e=>fS(n,e)))}(function(e,t=!0){(function(i){fu=i})(hu),Qa(new ko("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new au(new $M(r.getProvider("auth-internal")),new GM(r.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(d.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l}),"PUBLIC").setMultipleInstances(!0)),xs(lE,"4.7.3",e),xs(lE,"4.7.3","esm2017")})();function ny(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function pS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cB=pS,gS=new mc("auth","Firebase",pS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new p_("@firebase/auth");function hB(n,...e){ed.logLevel<=nt.WARN&&ed.warn(`Auth (${hu}): ${n}`,...e)}function _f(n,...e){ed.logLevel<=nt.ERROR&&ed.error(`Auth (${hu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,...e){throw ry(n,...e)}function ti(n,...e){return ry(n,...e)}function mS(n,e,t){const r=Object.assign(Object.assign({},cB()),{[e]:t});return new mc("auth","Firebase",r).create(e,{appName:n.name})}function Oi(n){return mS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ry(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gS.create(n,...e)}function Me(n,e,...t){if(!n)throw ry(e,...t)}function Pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _f(e),new Error(e)}function Fi(n,e){n||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function fB(){return _I()==="http:"||_I()==="https:"}function _I(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fB()||wL()||"connection"in navigator)?navigator.onLine:!0}function pB(){if(typeof navigator=="undefined")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fi(t>e,"Short delay should be less than long delay!"),this.isMobile=_L()||EL()}get(){return dB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n,e){Fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=new Ac(3e4,6e4);function ji(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function zi(n,e,t,r,i={}){return yS(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=_c(Object.assign({key:n.config.apiKey},a)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:h},s);return vL()||(d.referrerPolicy="no-referrer"),_S.fetch()(vS(n,n.config.apiHost,t,l),d)})}async function yS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},gB),e);try{const i=new yB(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw tf(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[h,d]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw tf(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw tf(n,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw mS(n,p,d);Fr(n,p)}}catch(i){if(i instanceof qi)throw i;Fr(n,"network-request-failed",{message:String(i)})}}async function Sc(n,e,t,r,i={}){const s=await zi(n,e,t,r,i);return"mfaPendingCredential"in s&&Fr(n,"multi-factor-auth-required",{_serverResponse:s}),s}function vS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?iy(n.config,i):`${n.config.apiScheme}://${i}`}function _B(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),mB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ti(n,e,r);return i.customData._tokenResponse=t,i}function yI(n){return n!==void 0&&n.enterprise!==void 0}class vB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _B(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function wB(n,e){return zi(n,"GET","/v2/recaptchaConfig",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EB(n,e){return zi(n,"POST","/v1/accounts:delete",e)}async function wS(n,e){return zi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IB(n,e=!1){const t=vn(n),r=await t.getIdToken(e),i=sy(r);Me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ml(Cg(i.auth_time)),issuedAtTime:Ml(Cg(i.iat)),expirationTime:Ml(Cg(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Cg(n){return Number(n)*1e3}function sy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _f("JWT malformed, contained fewer than 3 sections"),null;try{const i=J0(t);return i?JSON.parse(i):(_f("Failed to decode base64 JWT payload"),null)}catch(i){return _f("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vI(n){const e=sy(n);return Me(e,"internal-error"),Me(typeof e.exp!="undefined","internal-error"),Me(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qi&&TB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function TB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ac(n,wS(t,{idToken:r}));Me(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ES(s.providerUserInfo):[],l=SB(n.providerData,a),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Mm(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function AB(n){const e=vn(n);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ES(n){return n.map(e=>{var{providerId:t}=e,r=ny(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(n,e){const t=await yS(n,{},async()=>{const r=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=vS(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",_S.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PB(n,e){return zi(n,"POST","/v2/accounts:revokeToken",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken!="undefined","internal-error"),Me(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):vI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=vI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await RB(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new za;return r&&(Me(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Me(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n,e){Me(typeof n=="string"||typeof n=="undefined","internal-error",{appName:e})}class Ci{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ny(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ac(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return IB(this,e)}reload(){return AB(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jr(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await ac(this,EB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,l,h,d,p;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,E=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,M=(l=t.tenantId)!==null&&l!==void 0?l:void 0,F=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,Q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,j=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:z,emailVerified:G,isAnonymous:J,providerData:oe,stsTokenManager:R}=t;Me(z&&R,e,"internal-error");const S=za.fromJSON(this.name,R);Me(typeof z=="string",e,"internal-error"),hs(_,e.name),hs(v,e.name),Me(typeof G=="boolean",e,"internal-error"),Me(typeof J=="boolean",e,"internal-error"),hs(E,e.name),hs(N,e.name),hs(M,e.name),hs(F,e.name),hs(Q,e.name),hs(j,e.name);const A=new Ci({uid:z,auth:e,email:v,emailVerified:G,displayName:_,isAnonymous:J,photoURL:N,phoneNumber:E,tenantId:M,stsTokenManager:S,createdAt:Q,lastLoginAt:j});return oe&&Array.isArray(oe)&&(A.providerData=oe.map(x=>Object.assign({},x))),F&&(A._redirectEventId=F),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new za;i.updateFromServerResponse(t);const s=new Ci({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await td(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ES(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new za;l.updateFromIdToken(r);const h=new Ci({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Map;function xi(n){Fi(n instanceof Function,"Expected a class definition");let e=wI.get(n);return e?(Fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IS.type="NONE";const EI=IS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ka{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yf(this.userKey,i.apiKey,s),this.fullPersistenceKey=yf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ka(xi(EI),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||xi(EI);const a=yf(r,e.config.apiKey,e.name);let l=null;for(const d of t)try{const p=await d._get(a);if(p){const _=Ci._fromJSON(e,p);d!==s&&(l=_),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ka(s,e,r):(s=h[0],l&&await s._set(a,l.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Ka(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PS(e))return"Blackberry";if(CS(e))return"Webos";if(bS(e))return"Safari";if((e.includes("chrome/")||AS(e))&&!e.includes("edge/"))return"Chrome";if(RS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TS(n=on()){return/firefox\//i.test(n)}function bS(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AS(n=on()){return/crios\//i.test(n)}function SS(n=on()){return/iemobile/i.test(n)}function RS(n=on()){return/android/i.test(n)}function PS(n=on()){return/blackberry/i.test(n)}function CS(n=on()){return/webos/i.test(n)}function oy(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function CB(n=on()){var e;return oy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xB(){return IL()&&document.documentMode===10}function xS(n=on()){return oy(n)||RS(n)||CS(n)||PS(n)||/windows phone/i.test(n)||SS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(n,e=[]){let t;switch(n){case"Browser":t=II(on());break;case"Worker":t=`${II(on())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,l)=>{try{const h=e(s);a(h)}catch(h){l(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OB(n,e={}){return zi(n,"GET","/v2/passwordPolicy",ji(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=6;class NB{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:kB,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,l;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TI(this),this.idTokenSubscription=new TI(this),this.beforeStateQueue=new DB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xi(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ka.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wS(this,{idToken:e}),r=await Ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Jr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jr(this.app))return Promise.reject(Oi(this));const t=e?vn(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jr(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jr(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OB(this),t=new NB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await PB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xi(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[xi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&hB(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function js(n){return vn(n)}class TI{constructor(e){this.auth=e,this.observer=null,this.addObserver=PL(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LB(n){qd=n}function OS(n){return qd.loadJS(n)}function MB(){return qd.recaptchaEnterpriseScript}function FB(){return qd.gapiScript}function UB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const BB="recaptcha-enterprise",qB="NO_RECAPTCHA";class $B{constructor(e){this.type=BB,this.auth=js(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{wB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new vB(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(h=>{l(h)})})}function i(s,a,l){const h=window.grecaptcha;yI(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(qB)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(l=>{if(!t&&yI(window.grecaptcha))i(l,s,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=MB();h.length!==0&&(h+=l),OS(h).then(()=>{i(l,s,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function bI(n,e,t,r=!1){const i=new $B(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function nd(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await bI(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await bI(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(n,e){const t=m_(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Wl(s,e!=null?e:{}))return i;Fr(i,"already-initialized")}return t.initialize({options:e})}function zB(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(xi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KB(n,e,t){const r=js(n);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=kS(e),{host:a,port:l}=GB(e),h=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),WB()}function kS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function GB(n){const e=kS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:AI(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:AI(a)}}}function AI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function WB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function HB(n,e){return zi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(n,e){return Sc(n,"POST","/v1/accounts:signInWithPassword",ji(n,e))}async function NS(n,e){return zi(n,"POST","/v1/accounts:sendOobCode",ji(n,e))}async function JB(n,e){return NS(n,e)}async function YB(n,e){return NS(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(n,e){return Sc(n,"POST","/v1/accounts:signInWithEmailLink",ji(n,e))}async function ZB(n,e){return Sc(n,"POST","/v1/accounts:signInWithEmailLink",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends ay{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new uc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new uc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,t,"signInWithPassword",QB);case"emailLink":return XB(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,r,"signUpPassword",HB);case"emailLink":return ZB(e,{idToken:t,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n,e){return Sc(n,"POST","/v1/accounts:signInWithIdp",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq="http://localhost";class $o extends ay{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ny(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new $o(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Ga(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ga(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ga(e,t)}buildRequest(){const e={requestUri:eq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nq(n){const e=hl(fl(n)).link,t=e?hl(fl(e)).deep_link_id:null,r=hl(fl(n)).deep_link_id;return(r?hl(fl(r)).link:null)||r||t||e||n}class uy{constructor(e){var t,r,i,s,a,l;const h=hl(fl(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,_=tq((i=h.mode)!==null&&i!==void 0?i:null);Me(d&&p&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=h.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=nq(e);try{return new uy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.providerId=mu.PROVIDER_ID}static credential(e,t){return uc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=uy.parseLink(t);return Me(r,"argument-error"),uc._fromEmailAndCode(e,r.code,r.tenantId)}}mu.PROVIDER_ID="password";mu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends VS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Rc{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Is.credential(t,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Rc{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Rc{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bs.credential(t,r)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rq(n,e){return Sc(n,"POST","/v1/accounts:signUp",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ci._fromIdTokenResponse(e,r,i),a=SI(r);return new jo({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=SI(r);return new jo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function SI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends qi{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new rd(e,t,r,i)}}function LS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(n,s,e,r):s})}async function iq(n,e,t=!1){const r=await ac(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return jo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sq(n,e,t=!1){const{auth:r}=n;if(Jr(r.app))return Promise.reject(Oi(r));const i="reauthenticate";try{const s=await ac(n,LS(r,i,e,n),t);Me(s.idToken,r,"internal-error");const a=sy(s.idToken);Me(a,r,"internal-error");const{sub:l}=a;return Me(n.uid===l,r,"user-mismatch"),jo._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(n,e,t=!1){if(Jr(n.app))return Promise.reject(Oi(n));const r="signIn",i=await LS(n,r,e),s=await jo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function oq(n,e){return MS(js(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(n){const e=js(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aq(n,e,t){const r=js(n);await nd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",YB)}async function uq(n,e,t){if(Jr(n.app))return Promise.reject(Oi(n));const r=js(n),a=await nd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rq).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&FS(n),h}),l=await jo._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function lq(n,e,t){return Jr(n.app)?Promise.reject(Oi(n)):oq(vn(n),mu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FS(n),r})}async function cq(n,e){const t=vn(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:s}=await JB(t.auth,i);s!==n.email&&await n.reload()}function hq(n,e,t,r){return vn(n).onIdTokenChanged(e,t,r)}function fq(n,e,t){return vn(n).beforeAuthStateChanged(e,t)}const id="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(id,"1"),this.storage.removeItem(id),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq=1e3,pq=10;class BS extends US{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,h)=>{this.notifyListeners(a,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);xB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pq):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BS.type="LOCAL";const gq=BS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends US{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qS.type="SESSION";const $S=qS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new $d(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async d=>d(t.origin,s)),h=await mq(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,h)=>{const d=ly("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){const v=_;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function yq(n){ni().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){return typeof ni().WorkerGlobalScope!="undefined"&&typeof ni().importScripts=="function"}async function vq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wq(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Eq(){return jS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="firebaseLocalStorageDb",Iq=1,sd="firebaseLocalStorage",KS="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jd(n,e){return n.transaction([sd],e?"readwrite":"readonly").objectStore(sd)}function Tq(){const n=indexedDB.deleteDatabase(zS);return new Pc(n).toPromise()}function Fm(){const n=indexedDB.open(zS,Iq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(sd,{keyPath:KS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(sd)?e(r):(r.close(),await Tq(),e(await Fm()))})})}async function RI(n,e,t){const r=jd(n,!0).put({[KS]:e,value:t});return new Pc(r).toPromise()}async function bq(n,e){const t=jd(n,!1).get(e),r=await new Pc(t).toPromise();return r===void 0?null:r.value}function PI(n,e){const t=jd(n,!0).delete(e);return new Pc(t).toPromise()}const Aq=800,Sq=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Sq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(Eq()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vq(),!this.activeServiceWorker)return;this.sender=new _q(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fm();return await RI(e,id,"1"),await PI(e,id),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>RI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>bq(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>PI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=jd(i,!1).getAll();return new Pc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Aq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const Rq=GS;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(n,e){return e?xi(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy extends ay{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Cq(n){return MS(n.auth,new cy(n),n.bypassAuthState)}function xq(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),sq(t,new cy(n),n.bypassAuthState)}async function Dq(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),iq(t,new cy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cq;case"linkViaPopup":case"linkViaRedirect":return Dq;case"reauthViaPopup":case"reauthViaRedirect":return xq;default:Fr(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq=new Ac(2e3,1e4);class Fa extends WS{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=ly();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Oq.get())};e()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq="pendingRedirect",vf=new Map;class Nq extends WS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vf.get(this.auth._key());if(!e){try{const r=await Vq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vf.set(this.auth._key(),e)}return this.bypassAuthState||vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vq(n,e){const t=Fq(e),r=Mq(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Lq(n,e){vf.set(n._key(),e)}function Mq(n){return xi(n._redirectPersistence)}function Fq(n){return yf(kq,n.config.apiKey,n.name)}async function Uq(n,e,t=!1){if(Jr(n.app))return Promise.reject(Oi(n));const r=js(n),i=Pq(r,e),a=await new Nq(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=600*1e3;class qq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!HS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bq&&this.cachedEventUids.clear(),this.cachedEventUids.has(CI(e))}saveEventToCache(e){this.cachedEventUids.add(CI(e)),this.lastProcessedEventTime=Date.now()}}function CI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function HS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zq(n,e={}){return zi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gq=/^https?/;async function Wq(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zq(n);for(const t of e)try{if(Hq(t))return}catch{}Fr(n,"unauthorized-domain")}function Hq(n){const e=Lm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Gq.test(t))return!1;if(Kq.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=new Ac(3e4,6e4);function xI(){const n=ni().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Jq(n){return new Promise((e,t)=>{var r,i,s;function a(){xI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xI(),t(ti(n,"network-request-failed"))},timeout:Qq.get()})}if(!((i=(r=ni().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ni().gapi)===null||s===void 0)&&s.load)a();else{const l=UB("iframefcb");return ni()[l]=()=>{gapi.load?a():t(ti(n,"network-request-failed"))},OS(`${FB()}?onload=${l}`).catch(h=>t(h))}}).catch(e=>{throw wf=null,e})}let wf=null;function Yq(n){return wf=wf||Jq(n),wf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq=new Ac(5e3,15e3),Zq="__/auth/iframe",e4="emulator/auth/iframe",t4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r4(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iy(e,e4):`https://${n.config.authDomain}/${Zq}`,r={apiKey:e.apiKey,appName:n.name,v:hu},i=n4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${_c(r).slice(1)}`}async function i4(n){const e=await Yq(n),t=ni().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:r4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ti(n,"network-request-failed"),l=ni().setTimeout(()=>{s(a)},Xq.get());function h(){ni().clearTimeout(l),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o4=500,a4=600,u4="_blank",l4="http://localhost";class DI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c4(n,e,t,r=o4,i=a4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const h=Object.assign(Object.assign({},s4),{width:r.toString(),height:i.toString(),top:s,left:a}),d=on().toLowerCase();t&&(l=AS(d)?u4:t),TS(d)&&(e=e||l4,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[E,N])=>`${v}${E}=${N},`,"");if(CB(d)&&l!=="_self")return h4(e||"",l),new DI(null);const _=window.open(e||"",l,p);Me(_,n,"popup-blocked");try{_.focus()}catch{}return new DI(_)}function h4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="__/auth/handler",d4="emulator/auth/handler",p4=encodeURIComponent("fac");async function OI(n,e,t,r,i,s){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hu,eventId:i};if(e instanceof VS){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",RL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,_]of Object.entries({}))a[p]=_}if(e instanceof Rc){const p=e.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const h=await n._getAppCheckToken(),d=h?`#${p4}=${encodeURIComponent(h)}`:"";return`${g4(n)}?${_c(l).slice(1)}${d}`}function g4({config:n}){return n.emulator?iy(n,d4):`https://${n.authDomain}/${f4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="webStorageSupport";class m4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=Uq,this._overrideRedirectResult=Lq}async _openPopup(e,t,r,i){var s;Fi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await OI(e,t,r,Lm(),i);return c4(e,a,ly())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await OI(e,t,r,Lm(),i);return yq(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Fi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await i4(e),r=new qq(e);return t.register("authEvent",i=>(Me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xg,{type:xg},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[xg];a!==void 0&&t(!!a),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xS()||bS()||oy()}}const _4=m4;var kI="@firebase/auth",NI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w4(n){Qa(new ko("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Me(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DS(n)},d=new VB(r,i,s,h);return zB(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qa(new ko("auth-internal",e=>{const t=js(e.getProvider("auth").getImmediate());return(r=>new y4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(kI,NI,v4(n)),xs(kI,NI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=300,I4=X0("authIdTokenMaxAge")||E4;let VI=null;const T4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>I4)return;const i=t==null?void 0:t.token;VI!==i&&(VI=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function b4(n=PM()){const e=m_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=jB(n,{popupRedirectResolver:_4,persistence:[Rq,gq,$S]}),r=X0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=T4(s.toString());fq(t,a,()=>a(t.currentUser)),hq(t,l=>a(l))}}const i=gL("auth");return i&&KB(t,`http://${i}`),t}function A4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}LB({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ti("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",A4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w4("Browser");var S4="firebase",R4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(S4,R4,"app");const pn=[];for(let n=0;n<256;++n)pn.push((n+256).toString(16).slice(1));function P4(n,e=0){return(pn[n[e+0]]+pn[n[e+1]]+pn[n[e+2]]+pn[n[e+3]]+"-"+pn[n[e+4]]+pn[n[e+5]]+"-"+pn[n[e+6]]+pn[n[e+7]]+"-"+pn[n[e+8]]+pn[n[e+9]]+"-"+pn[n[e+10]]+pn[n[e+11]]+pn[n[e+12]]+pn[n[e+13]]+pn[n[e+14]]+pn[n[e+15]]).toLowerCase()}let Dg;const C4=new Uint8Array(16);function x4(){if(!Dg){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Dg=crypto.getRandomValues.bind(crypto)}return Dg(C4)}const D4=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),LI={randomUUID:D4};function hy(n,e,t){var i,s,a;if(LI.randomUUID&&!n)return LI.randomUUID();n=n||{};const r=(a=(s=n.random)!=null?s:(i=n.rng)==null?void 0:i.call(n))!=null?a:x4();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,P4(r)}const O4={make(n,e,t){const r=hy(),i=Date.now();return{name:n,users:t,id:r,people:e,transactions:{},timestamp:i}}},k4={make(n=""){return{name:n,friends:{},sheets:{}}}},yl={make(n,e,t){const r=Array.isArray(n)?n.length:n;let i="";const s=hy();let a=0,l=t>=0&&t<r?t:r>0?0:-1;const h=Array.from({length:r},(p,_)=>({isDebtor:Array.isArray(n)?n[_]:!0,owedAmount:0}));let d=Date.now();return{name:i,id:s,amount:a,payer:l,currency:e,debts:h,timestamp:d}},makeBatch(n,e,t,r,i){const s={},a=this.make(n,e,t);r.forEach((h,d)=>{if(h!==0)if(h>0)a.debts[d].isDebtor=!0,a.debts[d].owedAmount=h,a.amount+=h;else{const p=this.make(n,e,d);p.debts[t].isDebtor=!0,p.debts[t].owedAmount=-h,p.amount=-h,s[p.id]=p}}),a.amount>0&&(s[a.id]=a);let l=0;for(const h of Object.values(s))h.name=`${i} (${l})`,l++;return s},name(n){return n.name||"New Transaction"},position(n,e){return n.payer===e?n.amount-n.debts[e].owedAmount:-n.debts[e].owedAmount},updatePeople(n,e){for(let t=n.debts.length;t<e;t++)n.debts.push({isDebtor:!1,owedAmount:0})},check(n){let e=0;if(n.debts.forEach((t,r)=>{if(t.owedAmount>0&&!t.isDebtor)throw new Error(`The person ${r} is not a debtor but owes money!`);e+=t.owedAmount}),e!==n.amount)throw new Error(`The owed amounts: ${e/100} do not sum up to the transaction amount: ${n.amount/100}! Probably you need to fix either the shares or the total amount.`)},clearNonDebtorAmounts(n){n.debts.forEach(e=>{e.isDebtor||(e.owedAmount=0)})},effectiveDebtors(n,e){return n.debts.map((t,r)=>t.isDebtor&&!e.has(r)?r:-1).filter(t=>t!==-1)},split(n,e=new Set){this.clearNonDebtorAmounts(n);const t=n.debts,r=[...e].reduce((h,d)=>h+t[d].owedAmount,0),i=n.amount-r;if(i<0)return n.amount=r,t.forEach((h,d)=>{e.has(d)||(h.owedAmount=0)}),1;const s=this.effectiveDebtors(n,e);if(s.length===0)return i>0?(n.amount=r,2):0;const a=Math.floor(i/s.length);let l=i%s.length;return t.forEach((h,d)=>{e.has(d)||(h.isDebtor?(h.owedAmount=a,l>0&&d!==n.payer&&(h.owedAmount+=1,--l)):h.owedAmount=0)}),0},state(n){if(n.debts.length!==2)return-1;if(n.debts[0].isDebtor&&!n.debts[1].isDebtor&&n.payer===1&&n.debts[0].owedAmount===n.amount||n.debts[1].isDebtor&&!n.debts[0].isDebtor&&n.payer===0&&n.debts[1].owedAmount===n.amount)return 0;if(n.debts[0].isDebtor&&n.debts[1].isDebtor){const e=1-n.payer,t=(n.amount+n.amount%2)/2,r=(n.amount-n.amount%2)/2;if(n.debts[n.payer].owedAmount===r&&n.debts[e].owedAmount===t)return 1}return-1},getTransactionList(n){return n?Object.entries(n).sort(([,e],[,t])=>t.timestamp-e.timestamp).map(([e])=>e):[]},csvHeader(n=[]){return["id","name","payer","amount","currency",...n,"timestamp","date"]},toCsvLine(n,e=[]){var s;const t=(s=e[n.payer])!=null?s:`Person${n.payer}`,r=n.debts.map((a,l)=>a.owedAmount);new Date(n.timestamp);const i=new Intl.DateTimeFormat("en-GB").format(new Date(n.timestamp));return[n.id,n.name,t,n.amount,n.currency,...r,n.timestamp,i]},searchString(n){const e=(n.name||"").toLowerCase(),t=String(n.amount||"").toLowerCase(),r=(n.debts||[]).map(i=>String(i.owedAmount||"").toLowerCase()).join(" ");return`${e}|${t}|${r}`}},Ra={make(n=0){const r={mat:[],ntransactions:0};for(let i=0;i<n;++i)this.addPeople(r,n);return r},isEmpty(n){if(n.ntransactions===0)return!0;for(const e of n.mat)for(const t of e)if(t!==0)return!1;return!0},addPeople(n,e){for(let t=n.mat.length;t<e;++t)n.mat.push(Array(n.mat.length).fill(0))},_minCashFlow(n){const e=n.length,t=Array(e).fill(0);for(let s=0;s<e;s++)for(let a=0;a<s;a++){const l=n[s][a];t[s]-=l,t[a]+=l}const r=[];let i=t.map((s,a)=>({index:a,balance:s})).filter(({balance:s})=>s!==0);for(;i.length>0;){let s=0,a=0;for(let p=1;p<i.length;p++)i[p].balance<i[s].balance&&(s=p),i[p].balance>i[a].balance&&(a=p);const l=i[s],h=i[a],d=Math.min(-l.balance,h.balance);r.push([l.index,h.index,d]),l.balance+=d,h.balance-=d,i=i.filter(p=>p.balance!==0)}return r},_simplify(n){if(n.mat.length<3)return;const e=[];for(let r=0;r<n.mat.length;r++)e.push(Array(r).fill(0));const t=this._minCashFlow(n.mat);for(const[r,i,s]of t)this._apply(e,r,i,s);n.mat=e},getSummary(n,e){if(e==null||e<0||e>=n.mat.length)return[];const t=[];for(let r=0;r<n.mat[e].length;r++)n.mat[e][r]!==0&&t.push({person:r,amount:n.mat[e][r]});for(let r=e+1;r<n.mat.length;r++)n.mat[r][e]!==0&&t.push({person:r,amount:-n.mat[r][e]});return t},applyTransaction(n,e,t){const r=e.payer;for(let i=0;i<e.debts.length;++i)this._apply(n.mat,i,r,t*e.debts[i].owedAmount);n.ntransactions+=t},_apply(n,e,t,r){e!==t&&(e<t&&([e,t]=[t,e],r=-r),n[e][t]+=r)},makeEquivalentTransactionBatch(n,e,t,r,i=1,s=null){if(t==null||t<0||t>=n.mat.length)return[];s=s||e;const a=n.mat.length,l=new Array(a).fill(0);for(let h=0;h<t;h++)l[h]=Math.round(i*n.mat[t][h]);for(let h=t+1;h<a;h++)l[h]=-Math.round(i*n.mat[h][t]);return yl.makeBatch(a,s,t,l,r)}},Og={make(n={},e=0,t=!0){const a={nPeople:e,nTransactions:0,nCurrencies:0,mats:{}};return this.applyTransactions(a,n,e),t&&this._simplify(a),a},_simplify(n){Object.values(n.mats).forEach(e=>{Ra._simplify(e)})},getCurrencies(n){return Object.entries(n.mats).filter(([e,t])=>!Ra.isEmpty(t)).map(([e])=>e)},applyTransactions(n,e,t){n.nPeople=t,t&&Object.values(e).forEach(r=>{r.currency in n.mats||(n.mats[r.currency]=Ra.make(t),++n.nCurrencies),Ra.applyTransaction(n.mats[r.currency],r,1),++n.nTransactions})},getSummary(n,e){const t=[],r={};return e<0||!(n!=null&&n.nPeople)||e>=n.nPeople?{ans:t,totals:r}:(Object.entries(n.mats).forEach(([i,s])=>{const a=Ra.getSummary(s,e);let l=0;a.length>0&&a.forEach(h=>{t.push({currency:i,person:h.person,amount:h.amount}),l+=h.amount}),l!=0&&(r[i]=l)}),{ans:t,totals:r})},makeEquivalentTransactionBatch(n,e,t,r,i=1,s=null){return Ra.makeEquivalentTransactionBatch(n.mats[e],e,t,r,i,s)}},sl={make(n="",e="",t="",r=null){n||(n=hy());let i=!0;return r||(r=Date.now()),{id:n,name:e,active:i,email:t,timestamp:r}},user2person(n){return this.make(n.id,n.name,n.email)},makeUser(n="",e="",t="",r=!1){return{id:n,name:e,email:t,emailVerified:r}},username(n){return(n==null?void 0:n.name)||(n==null?void 0:n.email)},compare(n,e){const t=this.username(n).toLowerCase(),r=this.username(e).toLowerCase();return t.localeCompare(r)}},kg={make(){return{apiKey:null,authDomain:null,projectId:null,storageBucket:null,messagingSenderId:null,appId:null}},isCompatible(n){return n?["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].every(t=>n[t]&&n[t].trim()!==""):!1}};var nf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function N4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var V4=vl.exports,MI;function L4(){return MI||(MI=1,(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,v=2,E=4,N=1,M=2,F=1,Q=2,j=4,z=8,G=16,J=32,oe=64,R=128,S=256,A=512,x=30,k="...",O=800,P=16,ce=1,qe=2,Ye=3,Te=1/0,Be=9007199254740991,Vn=17976931348623157e292,wn=NaN,Dt=4294967295,Rt=Dt-1,Pt=Dt>>>1,Br=[["ary",R],["bind",F],["bindKey",Q],["curry",z],["curryRight",G],["flip",A],["partial",J],["partialRight",oe],["rearg",S]],Ht="[object Arguments]",Xt="[object Array]",ee="[object AsyncFunction]",_e="[object Boolean]",de="[object Date]",be="[object DOMException]",$e="[object Error]",C="[object Function]",V="[object GeneratorFunction]",B="[object Map]",Z="[object Number]",re="[object Null]",Y="[object Object]",pe="[object Promise]",fe="[object Proxy]",le="[object RegExp]",se="[object Set]",Se="[object String]",ge="[object Symbol]",Re="[object Undefined]",Ce="[object WeakMap]",De="[object WeakSet]",Le="[object ArrayBuffer]",We="[object DataView]",Bt="[object Float32Array]",qt="[object Float64Array]",En="[object Int8Array]",Qt="[object Int16Array]",hr="[object Int32Array]",ii="[object Uint8Array]",$t="[object Uint8ClampedArray]",In="[object Uint16Array]",Ki="[object Uint32Array]",Gi=/\b__p \+= '';/g,Cc=/\b(__p \+=) '' \+/g,xc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wi=/&(?:amp|lt|gt|quot|#39);/g,Qo=/[&<>"']/g,_u=RegExp(Wi.source),si=RegExp(Qo.source),Dc=/<%-([\s\S]+?)%>/g,Jo=/<%([\s\S]+?)%>/g,yu=/<%=([\s\S]+?)%>/g,zs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oc=/^\w*$/,hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yo=/[\\^$.*+?()[\]{}|]/g,Ks=RegExp(Yo.source),oi=/^\s+/,Gd=/\s/,Wd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hi=/\{\n\/\* \[wrapped with (.+)\] \*/,Hd=/,? & /,Qd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xo=/[()=,{}\[\]\/\s]/,kc=/\\(\\)?/g,vu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gs=/\w*$/,qr=/^[-+]0x[0-9a-f]+$/i,Nc=/^0b[01]+$/i,Vc=/^\[object .+?Constructor\]$/,wu=/^0o[0-7]+$/i,Eu=/^(?:0|[1-9]\d*)$/,Lc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ws=/($^)/,Jd=/['\n\r\u2028\u2029\\]/g,ai="\\ud800-\\udfff",Mc="\\u0300-\\u036f",Iu="\\ufe20-\\ufe2f",Hs="\\u20d0-\\u20ff",$r=Mc+Iu+Hs,Zo="\\u2700-\\u27bf",Fc="a-z\\xdf-\\xf6\\xf8-\\xff",Uc="\\xac\\xb1\\xd7\\xf7",Bc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qc="\\u2000-\\u206f",Tu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ea="A-Z\\xc0-\\xd6\\xd8-\\xde",bu="\\ufe0e\\ufe0f",Au=Uc+Bc+qc+Tu,Su="[']",Yd="["+ai+"]",Ru="["+Au+"]",Qs="["+$r+"]",$c="\\d+",ui="["+Zo+"]",fr="["+Fc+"]",Js="[^"+ai+Au+$c+Zo+Fc+ea+"]",Qi="\\ud83c[\\udffb-\\udfff]",jc="(?:"+Qs+"|"+Qi+")",_t="[^"+ai+"]",Ji="(?:\\ud83c[\\udde6-\\uddff]){2}",li="[\\ud800-\\udbff][\\udc00-\\udfff]",dr="["+ea+"]",zc="\\u200d",Pu="(?:"+fr+"|"+Js+")",Xd="(?:"+dr+"|"+Js+")",Kc="(?:"+Su+"(?:d|ll|m|re|s|t|ve))?",Gc="(?:"+Su+"(?:D|LL|M|RE|S|T|VE))?",Wc=jc+"?",Yi="["+bu+"]?",jr="(?:"+zc+"(?:"+[_t,Ji,li].join("|")+")"+Yi+Wc+")*",Hc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cu=Yi+Wc+jr,Xi="(?:"+[ui,Ji,li].join("|")+")"+Cu,Zd="(?:"+[_t+Qs+"?",Qs,Ji,li,Yd].join("|")+")",ep=RegExp(Su,"g"),tp=RegExp(Qs,"g"),pr=RegExp(Qi+"(?="+Qi+")|"+Zd+Cu,"g"),np=RegExp([dr+"?"+fr+"+"+Kc+"(?="+[Ru,dr,"$"].join("|")+")",Xd+"+"+Gc+"(?="+[Ru,dr+Pu,"$"].join("|")+")",dr+"?"+Pu+"+"+Kc,dr+"+"+Gc,Qc,Hc,$c,Xi].join("|"),"g"),rp=RegExp("["+zc+ai+$r+bu+"]"),ta=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,na=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jc=-1,lt={};lt[Bt]=lt[qt]=lt[En]=lt[Qt]=lt[hr]=lt[ii]=lt[$t]=lt[In]=lt[Ki]=!0,lt[Ht]=lt[Xt]=lt[Le]=lt[_e]=lt[We]=lt[de]=lt[$e]=lt[C]=lt[B]=lt[Z]=lt[Y]=lt[le]=lt[se]=lt[Se]=lt[Ce]=!1;var ut={};ut[Ht]=ut[Xt]=ut[Le]=ut[We]=ut[_e]=ut[de]=ut[Bt]=ut[qt]=ut[En]=ut[Qt]=ut[hr]=ut[B]=ut[Z]=ut[Y]=ut[le]=ut[se]=ut[Se]=ut[ge]=ut[ii]=ut[$t]=ut[In]=ut[Ki]=!0,ut[$e]=ut[C]=ut[Ce]=!1;var Yc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},xu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ct={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ip={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sp=parseFloat,Xc=parseInt,Du=typeof nf=="object"&&nf&&nf.Object===Object&&nf,Zc=typeof self=="object"&&self&&self.Object===Object&&self,Lt=Du||Zc||Function("return this")(),ra=e&&!e.nodeType&&e,fn=ra&&!0&&n&&!n.nodeType&&n,Ou=fn&&fn.exports===ra,ku=Ou&&Du.process,un=(function(){try{var U=fn&&fn.require&&fn.require("util").types;return U||ku&&ku.binding&&ku.binding("util")}catch{}})(),Nu=un&&un.isArrayBuffer,ia=un&&un.isDate,Ys=un&&un.isMap,Vu=un&&un.isRegExp,Xs=un&&un.isSet,eh=un&&un.isTypedArray;function Tn(U,X,W){switch(W.length){case 0:return U.call(X);case 1:return U.call(X,W[0]);case 2:return U.call(X,W[0],W[1]);case 3:return U.call(X,W[0],W[1],W[2])}return U.apply(X,W)}function Zs(U,X,W,we){for(var je=-1,ht=U==null?0:U.length;++je<ht;){var en=U[je];X(we,en,W(en),U)}return we}function Ln(U,X){for(var W=-1,we=U==null?0:U.length;++W<we&&X(U[W],W,U)!==!1;);return U}function th(U,X){for(var W=U==null?0:U.length;W--&&X(U[W],W,U)!==!1;);return U}function sa(U,X){for(var W=-1,we=U==null?0:U.length;++W<we;)if(!X(U[W],W,U))return!1;return!0}function gr(U,X){for(var W=-1,we=U==null?0:U.length,je=0,ht=[];++W<we;){var en=U[W];X(en,W,U)&&(ht[je++]=en)}return ht}function eo(U,X){var W=U==null?0:U.length;return!!W&&ci(U,X,0)>-1}function Zi(U,X,W){for(var we=-1,je=U==null?0:U.length;++we<je;)if(W(X,U[we]))return!0;return!1}function wt(U,X){for(var W=-1,we=U==null?0:U.length,je=Array(we);++W<we;)je[W]=X(U[W],W,U);return je}function Pr(U,X){for(var W=-1,we=X.length,je=U.length;++W<we;)U[je+W]=X[W];return U}function Cr(U,X,W,we){var je=-1,ht=U==null?0:U.length;for(we&&ht&&(W=U[++je]);++je<ht;)W=X(W,U[je],je,U);return W}function nh(U,X,W,we){var je=U==null?0:U.length;for(we&&je&&(W=U[--je]);je--;)W=X(W,U[je],je,U);return W}function oa(U,X){for(var W=-1,we=U==null?0:U.length;++W<we;)if(X(U[W],W,U))return!0;return!1}var rh=y("length");function ih(U){return U.split("")}function aa(U){return U.match(Qd)||[]}function bn(U,X,W){var we;return W(U,function(je,ht,en){if(X(je,ht,en))return we=ht,!1}),we}function to(U,X,W,we){for(var je=U.length,ht=W+(we?1:-1);we?ht--:++ht<je;)if(X(U[ht],ht,U))return ht;return-1}function ci(U,X,W){return X===X?DR(U,X,W):to(U,c,W)}function es(U,X,W,we){for(var je=W-1,ht=U.length;++je<ht;)if(we(U[je],X))return je;return-1}function c(U){return U!==U}function g(U,X){var W=U==null?0:U.length;return W?he(U,X)/W:wn}function y(U){return function(X){return X==null?t:X[U]}}function T(U){return function(X){return U==null?t:U[X]}}function $(U,X,W,we,je){return je(U,function(ht,en,Et){W=we?(we=!1,ht):X(W,ht,en,Et)}),W}function H(U,X){var W=U.length;for(U.sort(X);W--;)U[W]=U[W].value;return U}function he(U,X){for(var W,we=-1,je=U.length;++we<je;){var ht=X(U[we]);ht!==t&&(W=W===t?ht:W+ht)}return W}function ct(U,X){for(var W=-1,we=Array(U);++W<U;)we[W]=X(W);return we}function Zt(U,X){return wt(X,function(W){return[W,U[W]]})}function rt(U){return U&&U.slice(0,yy(U)+1).replace(oi,"")}function ft(U){return function(X){return U(X)}}function Jt(U,X){return wt(X,function(W){return U[W]})}function mr(U,X){return U.has(X)}function Gn(U,X){for(var W=-1,we=U.length;++W<we&&ci(X,U[W],0)>-1;);return W}function no(U,X){for(var W=U.length;W--&&ci(X,U[W],0)>-1;);return W}function Lu(U,X){for(var W=U.length,we=0;W--;)U[W]===X&&++we;return we}var bR=T(Yc),AR=T(xu);function SR(U){return"\\"+ip[U]}function RR(U,X){return U==null?t:U[X]}function ua(U){return rp.test(U)}function PR(U){return ta.test(U)}function CR(U){for(var X,W=[];!(X=U.next()).done;)W.push(X.value);return W}function op(U){var X=-1,W=Array(U.size);return U.forEach(function(we,je){W[++X]=[je,we]}),W}function _y(U,X){return function(W){return U(X(W))}}function ts(U,X){for(var W=-1,we=U.length,je=0,ht=[];++W<we;){var en=U[W];(en===X||en===p)&&(U[W]=p,ht[je++]=W)}return ht}function sh(U){var X=-1,W=Array(U.size);return U.forEach(function(we){W[++X]=we}),W}function xR(U){var X=-1,W=Array(U.size);return U.forEach(function(we){W[++X]=[we,we]}),W}function DR(U,X,W){for(var we=W-1,je=U.length;++we<je;)if(U[we]===X)return we;return-1}function OR(U,X,W){for(var we=W+1;we--;)if(U[we]===X)return we;return we}function la(U){return ua(U)?NR(U):rh(U)}function xr(U){return ua(U)?VR(U):ih(U)}function yy(U){for(var X=U.length;X--&&Gd.test(U.charAt(X)););return X}var kR=T(Ct);function NR(U){for(var X=pr.lastIndex=0;pr.test(U);)++X;return X}function VR(U){return U.match(pr)||[]}function LR(U){return U.match(np)||[]}var MR=(function U(X){X=X==null?Lt:ca.defaults(Lt.Object(),X,ca.pick(Lt,na));var W=X.Array,we=X.Date,je=X.Error,ht=X.Function,en=X.Math,Et=X.Object,ap=X.RegExp,FR=X.String,_r=X.TypeError,oh=W.prototype,UR=ht.prototype,ha=Et.prototype,ah=X["__core-js_shared__"],uh=UR.toString,mt=ha.hasOwnProperty,BR=0,vy=(function(){var o=/[^.]+$/.exec(ah&&ah.keys&&ah.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""})(),lh=ha.toString,qR=uh.call(Et),$R=Lt._,jR=ap("^"+uh.call(mt).replace(Yo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ch=Ou?X.Buffer:t,ns=X.Symbol,hh=X.Uint8Array,wy=ch?ch.allocUnsafe:t,fh=_y(Et.getPrototypeOf,Et),Ey=Et.create,Iy=ha.propertyIsEnumerable,dh=oh.splice,Ty=ns?ns.isConcatSpreadable:t,Mu=ns?ns.iterator:t,ro=ns?ns.toStringTag:t,ph=(function(){try{var o=uo(Et,"defineProperty");return o({},"",{}),o}catch{}})(),zR=X.clearTimeout!==Lt.clearTimeout&&X.clearTimeout,KR=we&&we.now!==Lt.Date.now&&we.now,GR=X.setTimeout!==Lt.setTimeout&&X.setTimeout,gh=en.ceil,mh=en.floor,up=Et.getOwnPropertySymbols,WR=ch?ch.isBuffer:t,by=X.isFinite,HR=oh.join,QR=_y(Et.keys,Et),tn=en.max,An=en.min,JR=we.now,YR=X.parseInt,Ay=en.random,XR=oh.reverse,lp=uo(X,"DataView"),Fu=uo(X,"Map"),cp=uo(X,"Promise"),fa=uo(X,"Set"),Uu=uo(X,"WeakMap"),Bu=uo(Et,"create"),_h=Uu&&new Uu,da={},ZR=lo(lp),eP=lo(Fu),tP=lo(cp),nP=lo(fa),rP=lo(Uu),yh=ns?ns.prototype:t,qu=yh?yh.valueOf:t,Sy=yh?yh.toString:t;function I(o){if(Mt(o)&&!Ge(o)&&!(o instanceof tt)){if(o instanceof yr)return o;if(mt.call(o,"__wrapped__"))return Rv(o)}return new yr(o)}var pa=(function(){function o(){}return function(u){if(!Ot(u))return{};if(Ey)return Ey(u);o.prototype=u;var f=new o;return o.prototype=t,f}})();function vh(){}function yr(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=t}I.templateSettings={escape:Dc,evaluate:Jo,interpolate:yu,variable:"",imports:{_:I}},I.prototype=vh.prototype,I.prototype.constructor=I,yr.prototype=pa(vh.prototype),yr.prototype.constructor=yr;function tt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function iP(){var o=new tt(this.__wrapped__);return o.__actions__=Wn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Wn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Wn(this.__views__),o}function sP(){if(this.__filtered__){var o=new tt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function oP(){var o=this.__wrapped__.value(),u=this.__dir__,f=Ge(o),m=u<0,w=f?o.length:0,b=yC(0,w,this.__views__),D=b.start,L=b.end,q=L-D,te=m?L:D-1,ne=this.__iteratees__,ae=ne.length,me=0,Ae=An(q,this.__takeCount__);if(!f||!m&&w==q&&Ae==q)return Jy(o,this.__actions__);var ke=[];e:for(;q--&&me<Ae;){te+=u;for(var Je=-1,Ne=o[te];++Je<ae;){var et=ne[Je],it=et.iteratee,rr=et.type,Un=it(Ne);if(rr==qe)Ne=Un;else if(!Un){if(rr==ce)continue e;break e}}ke[me++]=Ne}return ke}tt.prototype=pa(vh.prototype),tt.prototype.constructor=tt;function io(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function aP(){this.__data__=Bu?Bu(null):{},this.size=0}function uP(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function lP(o){var u=this.__data__;if(Bu){var f=u[o];return f===h?t:f}return mt.call(u,o)?u[o]:t}function cP(o){var u=this.__data__;return Bu?u[o]!==t:mt.call(u,o)}function hP(o,u){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=Bu&&u===t?h:u,this}io.prototype.clear=aP,io.prototype.delete=uP,io.prototype.get=lP,io.prototype.has=cP,io.prototype.set=hP;function hi(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function fP(){this.__data__=[],this.size=0}function dP(o){var u=this.__data__,f=wh(u,o);if(f<0)return!1;var m=u.length-1;return f==m?u.pop():dh.call(u,f,1),--this.size,!0}function pP(o){var u=this.__data__,f=wh(u,o);return f<0?t:u[f][1]}function gP(o){return wh(this.__data__,o)>-1}function mP(o,u){var f=this.__data__,m=wh(f,o);return m<0?(++this.size,f.push([o,u])):f[m][1]=u,this}hi.prototype.clear=fP,hi.prototype.delete=dP,hi.prototype.get=pP,hi.prototype.has=gP,hi.prototype.set=mP;function fi(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function _P(){this.size=0,this.__data__={hash:new io,map:new(Fu||hi),string:new io}}function yP(o){var u=Oh(this,o).delete(o);return this.size-=u?1:0,u}function vP(o){return Oh(this,o).get(o)}function wP(o){return Oh(this,o).has(o)}function EP(o,u){var f=Oh(this,o),m=f.size;return f.set(o,u),this.size+=f.size==m?0:1,this}fi.prototype.clear=_P,fi.prototype.delete=yP,fi.prototype.get=vP,fi.prototype.has=wP,fi.prototype.set=EP;function so(o){var u=-1,f=o==null?0:o.length;for(this.__data__=new fi;++u<f;)this.add(o[u])}function IP(o){return this.__data__.set(o,h),this}function TP(o){return this.__data__.has(o)}so.prototype.add=so.prototype.push=IP,so.prototype.has=TP;function Dr(o){var u=this.__data__=new hi(o);this.size=u.size}function bP(){this.__data__=new hi,this.size=0}function AP(o){var u=this.__data__,f=u.delete(o);return this.size=u.size,f}function SP(o){return this.__data__.get(o)}function RP(o){return this.__data__.has(o)}function PP(o,u){var f=this.__data__;if(f instanceof hi){var m=f.__data__;if(!Fu||m.length<i-1)return m.push([o,u]),this.size=++f.size,this;f=this.__data__=new fi(m)}return f.set(o,u),this.size=f.size,this}Dr.prototype.clear=bP,Dr.prototype.delete=AP,Dr.prototype.get=SP,Dr.prototype.has=RP,Dr.prototype.set=PP;function Ry(o,u){var f=Ge(o),m=!f&&co(o),w=!f&&!m&&as(o),b=!f&&!m&&!w&&ya(o),D=f||m||w||b,L=D?ct(o.length,FR):[],q=L.length;for(var te in o)(u||mt.call(o,te))&&!(D&&(te=="length"||w&&(te=="offset"||te=="parent")||b&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||mi(te,q)))&&L.push(te);return L}function Py(o){var u=o.length;return u?o[Ep(0,u-1)]:t}function CP(o,u){return kh(Wn(o),oo(u,0,o.length))}function xP(o){return kh(Wn(o))}function hp(o,u,f){(f!==t&&!Or(o[u],f)||f===t&&!(u in o))&&di(o,u,f)}function $u(o,u,f){var m=o[u];(!(mt.call(o,u)&&Or(m,f))||f===t&&!(u in o))&&di(o,u,f)}function wh(o,u){for(var f=o.length;f--;)if(Or(o[f][0],u))return f;return-1}function DP(o,u,f,m){return rs(o,function(w,b,D){u(m,w,f(w),D)}),m}function Cy(o,u){return o&&Kr(u,ln(u),o)}function OP(o,u){return o&&Kr(u,Qn(u),o)}function di(o,u,f){u=="__proto__"&&ph?ph(o,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[u]=f}function fp(o,u){for(var f=-1,m=u.length,w=W(m),b=o==null;++f<m;)w[f]=b?t:Gp(o,u[f]);return w}function oo(o,u,f){return o===o&&(f!==t&&(o=o<=f?o:f),u!==t&&(o=o>=u?o:u)),o}function vr(o,u,f,m,w,b){var D,L=u&_,q=u&v,te=u&E;if(f&&(D=w?f(o,m,w,b):f(o)),D!==t)return D;if(!Ot(o))return o;var ne=Ge(o);if(ne){if(D=wC(o),!L)return Wn(o,D)}else{var ae=Sn(o),me=ae==C||ae==V;if(as(o))return Zy(o,L);if(ae==Y||ae==Ht||me&&!w){if(D=q||me?{}:yv(o),!L)return q?lC(o,OP(D,o)):uC(o,Cy(D,o))}else{if(!ut[ae])return w?o:{};D=EC(o,ae,L)}}b||(b=new Dr);var Ae=b.get(o);if(Ae)return Ae;b.set(o,D),Wv(o)?o.forEach(function(Ne){D.add(vr(Ne,u,f,Ne,o,b))}):Kv(o)&&o.forEach(function(Ne,et){D.set(et,vr(Ne,u,f,et,o,b))});var ke=te?q?Op:Dp:q?Qn:ln,Je=ne?t:ke(o);return Ln(Je||o,function(Ne,et){Je&&(et=Ne,Ne=o[et]),$u(D,et,vr(Ne,u,f,et,o,b))}),D}function kP(o){var u=ln(o);return function(f){return xy(f,o,u)}}function xy(o,u,f){var m=f.length;if(o==null)return!m;for(o=Et(o);m--;){var w=f[m],b=u[w],D=o[w];if(D===t&&!(w in o)||!b(D))return!1}return!0}function Dy(o,u,f){if(typeof o!="function")throw new _r(a);return Qu(function(){o.apply(t,f)},u)}function ju(o,u,f,m){var w=-1,b=eo,D=!0,L=o.length,q=[],te=u.length;if(!L)return q;f&&(u=wt(u,ft(f))),m?(b=Zi,D=!1):u.length>=i&&(b=mr,D=!1,u=new so(u));e:for(;++w<L;){var ne=o[w],ae=f==null?ne:f(ne);if(ne=m||ne!==0?ne:0,D&&ae===ae){for(var me=te;me--;)if(u[me]===ae)continue e;q.push(ne)}else b(u,ae,m)||q.push(ne)}return q}var rs=iv(zr),Oy=iv(pp,!0);function NP(o,u){var f=!0;return rs(o,function(m,w,b){return f=!!u(m,w,b),f}),f}function Eh(o,u,f){for(var m=-1,w=o.length;++m<w;){var b=o[m],D=u(b);if(D!=null&&(L===t?D===D&&!nr(D):f(D,L)))var L=D,q=b}return q}function VP(o,u,f,m){var w=o.length;for(f=He(f),f<0&&(f=-f>w?0:w+f),m=m===t||m>w?w:He(m),m<0&&(m+=w),m=f>m?0:Qv(m);f<m;)o[f++]=u;return o}function ky(o,u){var f=[];return rs(o,function(m,w,b){u(m,w,b)&&f.push(m)}),f}function dn(o,u,f,m,w){var b=-1,D=o.length;for(f||(f=TC),w||(w=[]);++b<D;){var L=o[b];u>0&&f(L)?u>1?dn(L,u-1,f,m,w):Pr(w,L):m||(w[w.length]=L)}return w}var dp=sv(),Ny=sv(!0);function zr(o,u){return o&&dp(o,u,ln)}function pp(o,u){return o&&Ny(o,u,ln)}function Ih(o,u){return gr(u,function(f){return _i(o[f])})}function ao(o,u){u=ss(u,o);for(var f=0,m=u.length;o!=null&&f<m;)o=o[Gr(u[f++])];return f&&f==m?o:t}function Vy(o,u,f){var m=u(o);return Ge(o)?m:Pr(m,f(o))}function Mn(o){return o==null?o===t?Re:re:ro&&ro in Et(o)?_C(o):xC(o)}function gp(o,u){return o>u}function LP(o,u){return o!=null&&mt.call(o,u)}function MP(o,u){return o!=null&&u in Et(o)}function FP(o,u,f){return o>=An(u,f)&&o<tn(u,f)}function mp(o,u,f){for(var m=f?Zi:eo,w=o[0].length,b=o.length,D=b,L=W(b),q=1/0,te=[];D--;){var ne=o[D];D&&u&&(ne=wt(ne,ft(u))),q=An(ne.length,q),L[D]=!f&&(u||w>=120&&ne.length>=120)?new so(D&&ne):t}ne=o[0];var ae=-1,me=L[0];e:for(;++ae<w&&te.length<q;){var Ae=ne[ae],ke=u?u(Ae):Ae;if(Ae=f||Ae!==0?Ae:0,!(me?mr(me,ke):m(te,ke,f))){for(D=b;--D;){var Je=L[D];if(!(Je?mr(Je,ke):m(o[D],ke,f)))continue e}me&&me.push(ke),te.push(Ae)}}return te}function UP(o,u,f,m){return zr(o,function(w,b,D){u(m,f(w),b,D)}),m}function zu(o,u,f){u=ss(u,o),o=Iv(o,u);var m=o==null?o:o[Gr(Er(u))];return m==null?t:Tn(m,o,f)}function Ly(o){return Mt(o)&&Mn(o)==Ht}function BP(o){return Mt(o)&&Mn(o)==Le}function qP(o){return Mt(o)&&Mn(o)==de}function Ku(o,u,f,m,w){return o===u?!0:o==null||u==null||!Mt(o)&&!Mt(u)?o!==o&&u!==u:$P(o,u,f,m,Ku,w)}function $P(o,u,f,m,w,b){var D=Ge(o),L=Ge(u),q=D?Xt:Sn(o),te=L?Xt:Sn(u);q=q==Ht?Y:q,te=te==Ht?Y:te;var ne=q==Y,ae=te==Y,me=q==te;if(me&&as(o)){if(!as(u))return!1;D=!0,ne=!1}if(me&&!ne)return b||(b=new Dr),D||ya(o)?gv(o,u,f,m,w,b):gC(o,u,q,f,m,w,b);if(!(f&N)){var Ae=ne&&mt.call(o,"__wrapped__"),ke=ae&&mt.call(u,"__wrapped__");if(Ae||ke){var Je=Ae?o.value():o,Ne=ke?u.value():u;return b||(b=new Dr),w(Je,Ne,f,m,b)}}return me?(b||(b=new Dr),mC(o,u,f,m,w,b)):!1}function jP(o){return Mt(o)&&Sn(o)==B}function _p(o,u,f,m){var w=f.length,b=w,D=!m;if(o==null)return!b;for(o=Et(o);w--;){var L=f[w];if(D&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++w<b;){L=f[w];var q=L[0],te=o[q],ne=L[1];if(D&&L[2]){if(te===t&&!(q in o))return!1}else{var ae=new Dr;if(m)var me=m(te,ne,q,o,u,ae);if(!(me===t?Ku(ne,te,N|M,m,ae):me))return!1}}return!0}function My(o){if(!Ot(o)||AC(o))return!1;var u=_i(o)?jR:Vc;return u.test(lo(o))}function zP(o){return Mt(o)&&Mn(o)==le}function KP(o){return Mt(o)&&Sn(o)==se}function GP(o){return Mt(o)&&Uh(o.length)&&!!lt[Mn(o)]}function Fy(o){return typeof o=="function"?o:o==null?Jn:typeof o=="object"?Ge(o)?qy(o[0],o[1]):By(o):ow(o)}function yp(o){if(!Hu(o))return QR(o);var u=[];for(var f in Et(o))mt.call(o,f)&&f!="constructor"&&u.push(f);return u}function WP(o){if(!Ot(o))return CC(o);var u=Hu(o),f=[];for(var m in o)m=="constructor"&&(u||!mt.call(o,m))||f.push(m);return f}function vp(o,u){return o<u}function Uy(o,u){var f=-1,m=Hn(o)?W(o.length):[];return rs(o,function(w,b,D){m[++f]=u(w,b,D)}),m}function By(o){var u=Np(o);return u.length==1&&u[0][2]?wv(u[0][0],u[0][1]):function(f){return f===o||_p(f,o,u)}}function qy(o,u){return Lp(o)&&vv(u)?wv(Gr(o),u):function(f){var m=Gp(f,o);return m===t&&m===u?Wp(f,o):Ku(u,m,N|M)}}function Th(o,u,f,m,w){o!==u&&dp(u,function(b,D){if(w||(w=new Dr),Ot(b))HP(o,u,D,f,Th,m,w);else{var L=m?m(Fp(o,D),b,D+"",o,u,w):t;L===t&&(L=b),hp(o,D,L)}},Qn)}function HP(o,u,f,m,w,b,D){var L=Fp(o,f),q=Fp(u,f),te=D.get(q);if(te){hp(o,f,te);return}var ne=b?b(L,q,f+"",o,u,D):t,ae=ne===t;if(ae){var me=Ge(q),Ae=!me&&as(q),ke=!me&&!Ae&&ya(q);ne=q,me||Ae||ke?Ge(L)?ne=L:jt(L)?ne=Wn(L):Ae?(ae=!1,ne=Zy(q,!0)):ke?(ae=!1,ne=ev(q,!0)):ne=[]:Ju(q)||co(q)?(ne=L,co(L)?ne=Jv(L):(!Ot(L)||_i(L))&&(ne=yv(q))):ae=!1}ae&&(D.set(q,ne),w(ne,q,m,b,D),D.delete(q)),hp(o,f,ne)}function $y(o,u){var f=o.length;if(f)return u+=u<0?f:0,mi(u,f)?o[u]:t}function jy(o,u,f){u.length?u=wt(u,function(b){return Ge(b)?function(D){return ao(D,b.length===1?b[0]:b)}:b}):u=[Jn];var m=-1;u=wt(u,ft(Oe()));var w=Uy(o,function(b,D,L){var q=wt(u,function(te){return te(b)});return{criteria:q,index:++m,value:b}});return H(w,function(b,D){return aC(b,D,f)})}function QP(o,u){return zy(o,u,function(f,m){return Wp(o,m)})}function zy(o,u,f){for(var m=-1,w=u.length,b={};++m<w;){var D=u[m],L=ao(o,D);f(L,D)&&Gu(b,ss(D,o),L)}return b}function JP(o){return function(u){return ao(u,o)}}function wp(o,u,f,m){var w=m?es:ci,b=-1,D=u.length,L=o;for(o===u&&(u=Wn(u)),f&&(L=wt(o,ft(f)));++b<D;)for(var q=0,te=u[b],ne=f?f(te):te;(q=w(L,ne,q,m))>-1;)L!==o&&dh.call(L,q,1),dh.call(o,q,1);return o}function Ky(o,u){for(var f=o?u.length:0,m=f-1;f--;){var w=u[f];if(f==m||w!==b){var b=w;mi(w)?dh.call(o,w,1):bp(o,w)}}return o}function Ep(o,u){return o+mh(Ay()*(u-o+1))}function YP(o,u,f,m){for(var w=-1,b=tn(gh((u-o)/(f||1)),0),D=W(b);b--;)D[m?b:++w]=o,o+=f;return D}function Ip(o,u){var f="";if(!o||u<1||u>Be)return f;do u%2&&(f+=o),u=mh(u/2),u&&(o+=o);while(u);return f}function Xe(o,u){return Up(Ev(o,u,Jn),o+"")}function XP(o){return Py(va(o))}function ZP(o,u){var f=va(o);return kh(f,oo(u,0,f.length))}function Gu(o,u,f,m){if(!Ot(o))return o;u=ss(u,o);for(var w=-1,b=u.length,D=b-1,L=o;L!=null&&++w<b;){var q=Gr(u[w]),te=f;if(q==="__proto__"||q==="constructor"||q==="prototype")return o;if(w!=D){var ne=L[q];te=m?m(ne,q,L):t,te===t&&(te=Ot(ne)?ne:mi(u[w+1])?[]:{})}$u(L,q,te),L=L[q]}return o}var Gy=_h?function(o,u){return _h.set(o,u),o}:Jn,eC=ph?function(o,u){return ph(o,"toString",{configurable:!0,enumerable:!1,value:Qp(u),writable:!0})}:Jn;function tC(o){return kh(va(o))}function wr(o,u,f){var m=-1,w=o.length;u<0&&(u=-u>w?0:w+u),f=f>w?w:f,f<0&&(f+=w),w=u>f?0:f-u>>>0,u>>>=0;for(var b=W(w);++m<w;)b[m]=o[m+u];return b}function nC(o,u){var f;return rs(o,function(m,w,b){return f=u(m,w,b),!f}),!!f}function bh(o,u,f){var m=0,w=o==null?m:o.length;if(typeof u=="number"&&u===u&&w<=Pt){for(;m<w;){var b=m+w>>>1,D=o[b];D!==null&&!nr(D)&&(f?D<=u:D<u)?m=b+1:w=b}return w}return Tp(o,u,Jn,f)}function Tp(o,u,f,m){var w=0,b=o==null?0:o.length;if(b===0)return 0;u=f(u);for(var D=u!==u,L=u===null,q=nr(u),te=u===t;w<b;){var ne=mh((w+b)/2),ae=f(o[ne]),me=ae!==t,Ae=ae===null,ke=ae===ae,Je=nr(ae);if(D)var Ne=m||ke;else te?Ne=ke&&(m||me):L?Ne=ke&&me&&(m||!Ae):q?Ne=ke&&me&&!Ae&&(m||!Je):Ae||Je?Ne=!1:Ne=m?ae<=u:ae<u;Ne?w=ne+1:b=ne}return An(b,Rt)}function Wy(o,u){for(var f=-1,m=o.length,w=0,b=[];++f<m;){var D=o[f],L=u?u(D):D;if(!f||!Or(L,q)){var q=L;b[w++]=D===0?0:D}}return b}function Hy(o){return typeof o=="number"?o:nr(o)?wn:+o}function tr(o){if(typeof o=="string")return o;if(Ge(o))return wt(o,tr)+"";if(nr(o))return Sy?Sy.call(o):"";var u=o+"";return u=="0"&&1/o==-Te?"-0":u}function is(o,u,f){var m=-1,w=eo,b=o.length,D=!0,L=[],q=L;if(f)D=!1,w=Zi;else if(b>=i){var te=u?null:dC(o);if(te)return sh(te);D=!1,w=mr,q=new so}else q=u?[]:L;e:for(;++m<b;){var ne=o[m],ae=u?u(ne):ne;if(ne=f||ne!==0?ne:0,D&&ae===ae){for(var me=q.length;me--;)if(q[me]===ae)continue e;u&&q.push(ae),L.push(ne)}else w(q,ae,f)||(q!==L&&q.push(ae),L.push(ne))}return L}function bp(o,u){return u=ss(u,o),o=Iv(o,u),o==null||delete o[Gr(Er(u))]}function Qy(o,u,f,m){return Gu(o,u,f(ao(o,u)),m)}function Ah(o,u,f,m){for(var w=o.length,b=m?w:-1;(m?b--:++b<w)&&u(o[b],b,o););return f?wr(o,m?0:b,m?b+1:w):wr(o,m?b+1:0,m?w:b)}function Jy(o,u){var f=o;return f instanceof tt&&(f=f.value()),Cr(u,function(m,w){return w.func.apply(w.thisArg,Pr([m],w.args))},f)}function Ap(o,u,f){var m=o.length;if(m<2)return m?is(o[0]):[];for(var w=-1,b=W(m);++w<m;)for(var D=o[w],L=-1;++L<m;)L!=w&&(b[w]=ju(b[w]||D,o[L],u,f));return is(dn(b,1),u,f)}function Yy(o,u,f){for(var m=-1,w=o.length,b=u.length,D={};++m<w;){var L=m<b?u[m]:t;f(D,o[m],L)}return D}function Sp(o){return jt(o)?o:[]}function Rp(o){return typeof o=="function"?o:Jn}function ss(o,u){return Ge(o)?o:Lp(o,u)?[o]:Sv(dt(o))}var rC=Xe;function os(o,u,f){var m=o.length;return f=f===t?m:f,!u&&f>=m?o:wr(o,u,f)}var Xy=zR||function(o){return Lt.clearTimeout(o)};function Zy(o,u){if(u)return o.slice();var f=o.length,m=wy?wy(f):new o.constructor(f);return o.copy(m),m}function Pp(o){var u=new o.constructor(o.byteLength);return new hh(u).set(new hh(o)),u}function iC(o,u){var f=u?Pp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function sC(o){var u=new o.constructor(o.source,Gs.exec(o));return u.lastIndex=o.lastIndex,u}function oC(o){return qu?Et(qu.call(o)):{}}function ev(o,u){var f=u?Pp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function tv(o,u){if(o!==u){var f=o!==t,m=o===null,w=o===o,b=nr(o),D=u!==t,L=u===null,q=u===u,te=nr(u);if(!L&&!te&&!b&&o>u||b&&D&&q&&!L&&!te||m&&D&&q||!f&&q||!w)return 1;if(!m&&!b&&!te&&o<u||te&&f&&w&&!m&&!b||L&&f&&w||!D&&w||!q)return-1}return 0}function aC(o,u,f){for(var m=-1,w=o.criteria,b=u.criteria,D=w.length,L=f.length;++m<D;){var q=tv(w[m],b[m]);if(q){if(m>=L)return q;var te=f[m];return q*(te=="desc"?-1:1)}}return o.index-u.index}function nv(o,u,f,m){for(var w=-1,b=o.length,D=f.length,L=-1,q=u.length,te=tn(b-D,0),ne=W(q+te),ae=!m;++L<q;)ne[L]=u[L];for(;++w<D;)(ae||w<b)&&(ne[f[w]]=o[w]);for(;te--;)ne[L++]=o[w++];return ne}function rv(o,u,f,m){for(var w=-1,b=o.length,D=-1,L=f.length,q=-1,te=u.length,ne=tn(b-L,0),ae=W(ne+te),me=!m;++w<ne;)ae[w]=o[w];for(var Ae=w;++q<te;)ae[Ae+q]=u[q];for(;++D<L;)(me||w<b)&&(ae[Ae+f[D]]=o[w++]);return ae}function Wn(o,u){var f=-1,m=o.length;for(u||(u=W(m));++f<m;)u[f]=o[f];return u}function Kr(o,u,f,m){var w=!f;f||(f={});for(var b=-1,D=u.length;++b<D;){var L=u[b],q=m?m(f[L],o[L],L,f,o):t;q===t&&(q=o[L]),w?di(f,L,q):$u(f,L,q)}return f}function uC(o,u){return Kr(o,Vp(o),u)}function lC(o,u){return Kr(o,mv(o),u)}function Sh(o,u){return function(f,m){var w=Ge(f)?Zs:DP,b=u?u():{};return w(f,o,Oe(m,2),b)}}function ga(o){return Xe(function(u,f){var m=-1,w=f.length,b=w>1?f[w-1]:t,D=w>2?f[2]:t;for(b=o.length>3&&typeof b=="function"?(w--,b):t,D&&Fn(f[0],f[1],D)&&(b=w<3?t:b,w=1),u=Et(u);++m<w;){var L=f[m];L&&o(u,L,m,b)}return u})}function iv(o,u){return function(f,m){if(f==null)return f;if(!Hn(f))return o(f,m);for(var w=f.length,b=u?w:-1,D=Et(f);(u?b--:++b<w)&&m(D[b],b,D)!==!1;);return f}}function sv(o){return function(u,f,m){for(var w=-1,b=Et(u),D=m(u),L=D.length;L--;){var q=D[o?L:++w];if(f(b[q],q,b)===!1)break}return u}}function cC(o,u,f){var m=u&F,w=Wu(o);function b(){var D=this&&this!==Lt&&this instanceof b?w:o;return D.apply(m?f:this,arguments)}return b}function ov(o){return function(u){u=dt(u);var f=ua(u)?xr(u):t,m=f?f[0]:u.charAt(0),w=f?os(f,1).join(""):u.slice(1);return m[o]()+w}}function ma(o){return function(u){return Cr(iw(rw(u).replace(ep,"")),o,"")}}function Wu(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var f=pa(o.prototype),m=o.apply(f,u);return Ot(m)?m:f}}function hC(o,u,f){var m=Wu(o);function w(){for(var b=arguments.length,D=W(b),L=b,q=_a(w);L--;)D[L]=arguments[L];var te=b<3&&D[0]!==q&&D[b-1]!==q?[]:ts(D,q);if(b-=te.length,b<f)return hv(o,u,Rh,w.placeholder,t,D,te,t,t,f-b);var ne=this&&this!==Lt&&this instanceof w?m:o;return Tn(ne,this,D)}return w}function av(o){return function(u,f,m){var w=Et(u);if(!Hn(u)){var b=Oe(f,3);u=ln(u),f=function(L){return b(w[L],L,w)}}var D=o(u,f,m);return D>-1?w[b?u[D]:D]:t}}function uv(o){return gi(function(u){var f=u.length,m=f,w=yr.prototype.thru;for(o&&u.reverse();m--;){var b=u[m];if(typeof b!="function")throw new _r(a);if(w&&!D&&Dh(b)=="wrapper")var D=new yr([],!0)}for(m=D?m:f;++m<f;){b=u[m];var L=Dh(b),q=L=="wrapper"?kp(b):t;q&&Mp(q[0])&&q[1]==(R|z|J|S)&&!q[4].length&&q[9]==1?D=D[Dh(q[0])].apply(D,q[3]):D=b.length==1&&Mp(b)?D[L]():D.thru(b)}return function(){var te=arguments,ne=te[0];if(D&&te.length==1&&Ge(ne))return D.plant(ne).value();for(var ae=0,me=f?u[ae].apply(this,te):ne;++ae<f;)me=u[ae].call(this,me);return me}})}function Rh(o,u,f,m,w,b,D,L,q,te){var ne=u&R,ae=u&F,me=u&Q,Ae=u&(z|G),ke=u&A,Je=me?t:Wu(o);function Ne(){for(var et=arguments.length,it=W(et),rr=et;rr--;)it[rr]=arguments[rr];if(Ae)var Un=_a(Ne),ir=Lu(it,Un);if(m&&(it=nv(it,m,w,Ae)),b&&(it=rv(it,b,D,Ae)),et-=ir,Ae&&et<te){var zt=ts(it,Un);return hv(o,u,Rh,Ne.placeholder,f,it,zt,L,q,te-et)}var kr=ae?f:this,vi=me?kr[o]:o;return et=it.length,L?it=DC(it,L):ke&&et>1&&it.reverse(),ne&&q<et&&(it.length=q),this&&this!==Lt&&this instanceof Ne&&(vi=Je||Wu(vi)),vi.apply(kr,it)}return Ne}function lv(o,u){return function(f,m){return UP(f,o,u(m),{})}}function Ph(o,u){return function(f,m){var w;if(f===t&&m===t)return u;if(f!==t&&(w=f),m!==t){if(w===t)return m;typeof f=="string"||typeof m=="string"?(f=tr(f),m=tr(m)):(f=Hy(f),m=Hy(m)),w=o(f,m)}return w}}function Cp(o){return gi(function(u){return u=wt(u,ft(Oe())),Xe(function(f){var m=this;return o(u,function(w){return Tn(w,m,f)})})})}function Ch(o,u){u=u===t?" ":tr(u);var f=u.length;if(f<2)return f?Ip(u,o):u;var m=Ip(u,gh(o/la(u)));return ua(u)?os(xr(m),0,o).join(""):m.slice(0,o)}function fC(o,u,f,m){var w=u&F,b=Wu(o);function D(){for(var L=-1,q=arguments.length,te=-1,ne=m.length,ae=W(ne+q),me=this&&this!==Lt&&this instanceof D?b:o;++te<ne;)ae[te]=m[te];for(;q--;)ae[te++]=arguments[++L];return Tn(me,w?f:this,ae)}return D}function cv(o){return function(u,f,m){return m&&typeof m!="number"&&Fn(u,f,m)&&(f=m=t),u=yi(u),f===t?(f=u,u=0):f=yi(f),m=m===t?u<f?1:-1:yi(m),YP(u,f,m,o)}}function xh(o){return function(u,f){return typeof u=="string"&&typeof f=="string"||(u=Ir(u),f=Ir(f)),o(u,f)}}function hv(o,u,f,m,w,b,D,L,q,te){var ne=u&z,ae=ne?D:t,me=ne?t:D,Ae=ne?b:t,ke=ne?t:b;u|=ne?J:oe,u&=~(ne?oe:J),u&j||(u&=-4);var Je=[o,u,w,Ae,ae,ke,me,L,q,te],Ne=f.apply(t,Je);return Mp(o)&&Tv(Ne,Je),Ne.placeholder=m,bv(Ne,o,u)}function xp(o){var u=en[o];return function(f,m){if(f=Ir(f),m=m==null?0:An(He(m),292),m&&by(f)){var w=(dt(f)+"e").split("e"),b=u(w[0]+"e"+(+w[1]+m));return w=(dt(b)+"e").split("e"),+(w[0]+"e"+(+w[1]-m))}return u(f)}}var dC=fa&&1/sh(new fa([,-0]))[1]==Te?function(o){return new fa(o)}:Xp;function fv(o){return function(u){var f=Sn(u);return f==B?op(u):f==se?xR(u):Zt(u,o(u))}}function pi(o,u,f,m,w,b,D,L){var q=u&Q;if(!q&&typeof o!="function")throw new _r(a);var te=m?m.length:0;if(te||(u&=-97,m=w=t),D=D===t?D:tn(He(D),0),L=L===t?L:He(L),te-=w?w.length:0,u&oe){var ne=m,ae=w;m=w=t}var me=q?t:kp(o),Ae=[o,u,f,m,w,ne,ae,b,D,L];if(me&&PC(Ae,me),o=Ae[0],u=Ae[1],f=Ae[2],m=Ae[3],w=Ae[4],L=Ae[9]=Ae[9]===t?q?0:o.length:tn(Ae[9]-te,0),!L&&u&(z|G)&&(u&=-25),!u||u==F)var ke=cC(o,u,f);else u==z||u==G?ke=hC(o,u,L):(u==J||u==(F|J))&&!w.length?ke=fC(o,u,f,m):ke=Rh.apply(t,Ae);var Je=me?Gy:Tv;return bv(Je(ke,Ae),o,u)}function dv(o,u,f,m){return o===t||Or(o,ha[f])&&!mt.call(m,f)?u:o}function pv(o,u,f,m,w,b){return Ot(o)&&Ot(u)&&(b.set(u,o),Th(o,u,t,pv,b),b.delete(u)),o}function pC(o){return Ju(o)?t:o}function gv(o,u,f,m,w,b){var D=f&N,L=o.length,q=u.length;if(L!=q&&!(D&&q>L))return!1;var te=b.get(o),ne=b.get(u);if(te&&ne)return te==u&&ne==o;var ae=-1,me=!0,Ae=f&M?new so:t;for(b.set(o,u),b.set(u,o);++ae<L;){var ke=o[ae],Je=u[ae];if(m)var Ne=D?m(Je,ke,ae,u,o,b):m(ke,Je,ae,o,u,b);if(Ne!==t){if(Ne)continue;me=!1;break}if(Ae){if(!oa(u,function(et,it){if(!mr(Ae,it)&&(ke===et||w(ke,et,f,m,b)))return Ae.push(it)})){me=!1;break}}else if(!(ke===Je||w(ke,Je,f,m,b))){me=!1;break}}return b.delete(o),b.delete(u),me}function gC(o,u,f,m,w,b,D){switch(f){case We:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Le:return!(o.byteLength!=u.byteLength||!b(new hh(o),new hh(u)));case _e:case de:case Z:return Or(+o,+u);case $e:return o.name==u.name&&o.message==u.message;case le:case Se:return o==u+"";case B:var L=op;case se:var q=m&N;if(L||(L=sh),o.size!=u.size&&!q)return!1;var te=D.get(o);if(te)return te==u;m|=M,D.set(o,u);var ne=gv(L(o),L(u),m,w,b,D);return D.delete(o),ne;case ge:if(qu)return qu.call(o)==qu.call(u)}return!1}function mC(o,u,f,m,w,b){var D=f&N,L=Dp(o),q=L.length,te=Dp(u),ne=te.length;if(q!=ne&&!D)return!1;for(var ae=q;ae--;){var me=L[ae];if(!(D?me in u:mt.call(u,me)))return!1}var Ae=b.get(o),ke=b.get(u);if(Ae&&ke)return Ae==u&&ke==o;var Je=!0;b.set(o,u),b.set(u,o);for(var Ne=D;++ae<q;){me=L[ae];var et=o[me],it=u[me];if(m)var rr=D?m(it,et,me,u,o,b):m(et,it,me,o,u,b);if(!(rr===t?et===it||w(et,it,f,m,b):rr)){Je=!1;break}Ne||(Ne=me=="constructor")}if(Je&&!Ne){var Un=o.constructor,ir=u.constructor;Un!=ir&&"constructor"in o&&"constructor"in u&&!(typeof Un=="function"&&Un instanceof Un&&typeof ir=="function"&&ir instanceof ir)&&(Je=!1)}return b.delete(o),b.delete(u),Je}function gi(o){return Up(Ev(o,t,xv),o+"")}function Dp(o){return Vy(o,ln,Vp)}function Op(o){return Vy(o,Qn,mv)}var kp=_h?function(o){return _h.get(o)}:Xp;function Dh(o){for(var u=o.name+"",f=da[u],m=mt.call(da,u)?f.length:0;m--;){var w=f[m],b=w.func;if(b==null||b==o)return w.name}return u}function _a(o){var u=mt.call(I,"placeholder")?I:o;return u.placeholder}function Oe(){var o=I.iteratee||Jp;return o=o===Jp?Fy:o,arguments.length?o(arguments[0],arguments[1]):o}function Oh(o,u){var f=o.__data__;return bC(u)?f[typeof u=="string"?"string":"hash"]:f.map}function Np(o){for(var u=ln(o),f=u.length;f--;){var m=u[f],w=o[m];u[f]=[m,w,vv(w)]}return u}function uo(o,u){var f=RR(o,u);return My(f)?f:t}function _C(o){var u=mt.call(o,ro),f=o[ro];try{o[ro]=t;var m=!0}catch{}var w=lh.call(o);return m&&(u?o[ro]=f:delete o[ro]),w}var Vp=up?function(o){return o==null?[]:(o=Et(o),gr(up(o),function(u){return Iy.call(o,u)}))}:Zp,mv=up?function(o){for(var u=[];o;)Pr(u,Vp(o)),o=fh(o);return u}:Zp,Sn=Mn;(lp&&Sn(new lp(new ArrayBuffer(1)))!=We||Fu&&Sn(new Fu)!=B||cp&&Sn(cp.resolve())!=pe||fa&&Sn(new fa)!=se||Uu&&Sn(new Uu)!=Ce)&&(Sn=function(o){var u=Mn(o),f=u==Y?o.constructor:t,m=f?lo(f):"";if(m)switch(m){case ZR:return We;case eP:return B;case tP:return pe;case nP:return se;case rP:return Ce}return u});function yC(o,u,f){for(var m=-1,w=f.length;++m<w;){var b=f[m],D=b.size;switch(b.type){case"drop":o+=D;break;case"dropRight":u-=D;break;case"take":u=An(u,o+D);break;case"takeRight":o=tn(o,u-D);break}}return{start:o,end:u}}function vC(o){var u=o.match(Hi);return u?u[1].split(Hd):[]}function _v(o,u,f){u=ss(u,o);for(var m=-1,w=u.length,b=!1;++m<w;){var D=Gr(u[m]);if(!(b=o!=null&&f(o,D)))break;o=o[D]}return b||++m!=w?b:(w=o==null?0:o.length,!!w&&Uh(w)&&mi(D,w)&&(Ge(o)||co(o)))}function wC(o){var u=o.length,f=new o.constructor(u);return u&&typeof o[0]=="string"&&mt.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function yv(o){return typeof o.constructor=="function"&&!Hu(o)?pa(fh(o)):{}}function EC(o,u,f){var m=o.constructor;switch(u){case Le:return Pp(o);case _e:case de:return new m(+o);case We:return iC(o,f);case Bt:case qt:case En:case Qt:case hr:case ii:case $t:case In:case Ki:return ev(o,f);case B:return new m;case Z:case Se:return new m(o);case le:return sC(o);case se:return new m;case ge:return oC(o)}}function IC(o,u){var f=u.length;if(!f)return o;var m=f-1;return u[m]=(f>1?"& ":"")+u[m],u=u.join(f>2?", ":" "),o.replace(Wd,`{
/* [wrapped with `+u+`] */
`)}function TC(o){return Ge(o)||co(o)||!!(Ty&&o&&o[Ty])}function mi(o,u){var f=typeof o;return u=u==null?Be:u,!!u&&(f=="number"||f!="symbol"&&Eu.test(o))&&o>-1&&o%1==0&&o<u}function Fn(o,u,f){if(!Ot(f))return!1;var m=typeof u;return(m=="number"?Hn(f)&&mi(u,f.length):m=="string"&&u in f)?Or(f[u],o):!1}function Lp(o,u){if(Ge(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||nr(o)?!0:Oc.test(o)||!zs.test(o)||u!=null&&o in Et(u)}function bC(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Mp(o){var u=Dh(o),f=I[u];if(typeof f!="function"||!(u in tt.prototype))return!1;if(o===f)return!0;var m=kp(f);return!!m&&o===m[0]}function AC(o){return!!vy&&vy in o}var SC=ah?_i:eg;function Hu(o){var u=o&&o.constructor,f=typeof u=="function"&&u.prototype||ha;return o===f}function vv(o){return o===o&&!Ot(o)}function wv(o,u){return function(f){return f==null?!1:f[o]===u&&(u!==t||o in Et(f))}}function RC(o){var u=Mh(o,function(m){return f.size===d&&f.clear(),m}),f=u.cache;return u}function PC(o,u){var f=o[1],m=u[1],w=f|m,b=w<(F|Q|R),D=m==R&&f==z||m==R&&f==S&&o[7].length<=u[8]||m==(R|S)&&u[7].length<=u[8]&&f==z;if(!(b||D))return o;m&F&&(o[2]=u[2],w|=f&F?0:j);var L=u[3];if(L){var q=o[3];o[3]=q?nv(q,L,u[4]):L,o[4]=q?ts(o[3],p):u[4]}return L=u[5],L&&(q=o[5],o[5]=q?rv(q,L,u[6]):L,o[6]=q?ts(o[5],p):u[6]),L=u[7],L&&(o[7]=L),m&R&&(o[8]=o[8]==null?u[8]:An(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=w,o}function CC(o){var u=[];if(o!=null)for(var f in Et(o))u.push(f);return u}function xC(o){return lh.call(o)}function Ev(o,u,f){return u=tn(u===t?o.length-1:u,0),function(){for(var m=arguments,w=-1,b=tn(m.length-u,0),D=W(b);++w<b;)D[w]=m[u+w];w=-1;for(var L=W(u+1);++w<u;)L[w]=m[w];return L[u]=f(D),Tn(o,this,L)}}function Iv(o,u){return u.length<2?o:ao(o,wr(u,0,-1))}function DC(o,u){for(var f=o.length,m=An(u.length,f),w=Wn(o);m--;){var b=u[m];o[m]=mi(b,f)?w[b]:t}return o}function Fp(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Tv=Av(Gy),Qu=GR||function(o,u){return Lt.setTimeout(o,u)},Up=Av(eC);function bv(o,u,f){var m=u+"";return Up(o,IC(m,OC(vC(m),f)))}function Av(o){var u=0,f=0;return function(){var m=JR(),w=P-(m-f);if(f=m,w>0){if(++u>=O)return arguments[0]}else u=0;return o.apply(t,arguments)}}function kh(o,u){var f=-1,m=o.length,w=m-1;for(u=u===t?m:u;++f<u;){var b=Ep(f,w),D=o[b];o[b]=o[f],o[f]=D}return o.length=u,o}var Sv=RC(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(hn,function(f,m,w,b){u.push(w?b.replace(kc,"$1"):m||f)}),u});function Gr(o){if(typeof o=="string"||nr(o))return o;var u=o+"";return u=="0"&&1/o==-Te?"-0":u}function lo(o){if(o!=null){try{return uh.call(o)}catch{}try{return o+""}catch{}}return""}function OC(o,u){return Ln(Br,function(f){var m="_."+f[0];u&f[1]&&!eo(o,m)&&o.push(m)}),o.sort()}function Rv(o){if(o instanceof tt)return o.clone();var u=new yr(o.__wrapped__,o.__chain__);return u.__actions__=Wn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function kC(o,u,f){(f?Fn(o,u,f):u===t)?u=1:u=tn(He(u),0);var m=o==null?0:o.length;if(!m||u<1)return[];for(var w=0,b=0,D=W(gh(m/u));w<m;)D[b++]=wr(o,w,w+=u);return D}function NC(o){for(var u=-1,f=o==null?0:o.length,m=0,w=[];++u<f;){var b=o[u];b&&(w[m++]=b)}return w}function VC(){var o=arguments.length;if(!o)return[];for(var u=W(o-1),f=arguments[0],m=o;m--;)u[m-1]=arguments[m];return Pr(Ge(f)?Wn(f):[f],dn(u,1))}var LC=Xe(function(o,u){return jt(o)?ju(o,dn(u,1,jt,!0)):[]}),MC=Xe(function(o,u){var f=Er(u);return jt(f)&&(f=t),jt(o)?ju(o,dn(u,1,jt,!0),Oe(f,2)):[]}),FC=Xe(function(o,u){var f=Er(u);return jt(f)&&(f=t),jt(o)?ju(o,dn(u,1,jt,!0),t,f):[]});function UC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:He(u),wr(o,u<0?0:u,m)):[]}function BC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:He(u),u=m-u,wr(o,0,u<0?0:u)):[]}function qC(o,u){return o&&o.length?Ah(o,Oe(u,3),!0,!0):[]}function $C(o,u){return o&&o.length?Ah(o,Oe(u,3),!0):[]}function jC(o,u,f,m){var w=o==null?0:o.length;return w?(f&&typeof f!="number"&&Fn(o,u,f)&&(f=0,m=w),VP(o,u,f,m)):[]}function Pv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:He(f);return w<0&&(w=tn(m+w,0)),to(o,Oe(u,3),w)}function Cv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m-1;return f!==t&&(w=He(f),w=f<0?tn(m+w,0):An(w,m-1)),to(o,Oe(u,3),w,!0)}function xv(o){var u=o==null?0:o.length;return u?dn(o,1):[]}function zC(o){var u=o==null?0:o.length;return u?dn(o,Te):[]}function KC(o,u){var f=o==null?0:o.length;return f?(u=u===t?1:He(u),dn(o,u)):[]}function GC(o){for(var u=-1,f=o==null?0:o.length,m={};++u<f;){var w=o[u];m[w[0]]=w[1]}return m}function Dv(o){return o&&o.length?o[0]:t}function WC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:He(f);return w<0&&(w=tn(m+w,0)),ci(o,u,w)}function HC(o){var u=o==null?0:o.length;return u?wr(o,0,-1):[]}var QC=Xe(function(o){var u=wt(o,Sp);return u.length&&u[0]===o[0]?mp(u):[]}),JC=Xe(function(o){var u=Er(o),f=wt(o,Sp);return u===Er(f)?u=t:f.pop(),f.length&&f[0]===o[0]?mp(f,Oe(u,2)):[]}),YC=Xe(function(o){var u=Er(o),f=wt(o,Sp);return u=typeof u=="function"?u:t,u&&f.pop(),f.length&&f[0]===o[0]?mp(f,t,u):[]});function XC(o,u){return o==null?"":HR.call(o,u)}function Er(o){var u=o==null?0:o.length;return u?o[u-1]:t}function ZC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m;return f!==t&&(w=He(f),w=w<0?tn(m+w,0):An(w,m-1)),u===u?OR(o,u,w):to(o,c,w,!0)}function ex(o,u){return o&&o.length?$y(o,He(u)):t}var tx=Xe(Ov);function Ov(o,u){return o&&o.length&&u&&u.length?wp(o,u):o}function nx(o,u,f){return o&&o.length&&u&&u.length?wp(o,u,Oe(f,2)):o}function rx(o,u,f){return o&&o.length&&u&&u.length?wp(o,u,t,f):o}var ix=gi(function(o,u){var f=o==null?0:o.length,m=fp(o,u);return Ky(o,wt(u,function(w){return mi(w,f)?+w:w}).sort(tv)),m});function sx(o,u){var f=[];if(!(o&&o.length))return f;var m=-1,w=[],b=o.length;for(u=Oe(u,3);++m<b;){var D=o[m];u(D,m,o)&&(f.push(D),w.push(m))}return Ky(o,w),f}function Bp(o){return o==null?o:XR.call(o)}function ox(o,u,f){var m=o==null?0:o.length;return m?(f&&typeof f!="number"&&Fn(o,u,f)?(u=0,f=m):(u=u==null?0:He(u),f=f===t?m:He(f)),wr(o,u,f)):[]}function ax(o,u){return bh(o,u)}function ux(o,u,f){return Tp(o,u,Oe(f,2))}function lx(o,u){var f=o==null?0:o.length;if(f){var m=bh(o,u);if(m<f&&Or(o[m],u))return m}return-1}function cx(o,u){return bh(o,u,!0)}function hx(o,u,f){return Tp(o,u,Oe(f,2),!0)}function fx(o,u){var f=o==null?0:o.length;if(f){var m=bh(o,u,!0)-1;if(Or(o[m],u))return m}return-1}function dx(o){return o&&o.length?Wy(o):[]}function px(o,u){return o&&o.length?Wy(o,Oe(u,2)):[]}function gx(o){var u=o==null?0:o.length;return u?wr(o,1,u):[]}function mx(o,u,f){return o&&o.length?(u=f||u===t?1:He(u),wr(o,0,u<0?0:u)):[]}function _x(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:He(u),u=m-u,wr(o,u<0?0:u,m)):[]}function yx(o,u){return o&&o.length?Ah(o,Oe(u,3),!1,!0):[]}function vx(o,u){return o&&o.length?Ah(o,Oe(u,3)):[]}var wx=Xe(function(o){return is(dn(o,1,jt,!0))}),Ex=Xe(function(o){var u=Er(o);return jt(u)&&(u=t),is(dn(o,1,jt,!0),Oe(u,2))}),Ix=Xe(function(o){var u=Er(o);return u=typeof u=="function"?u:t,is(dn(o,1,jt,!0),t,u)});function Tx(o){return o&&o.length?is(o):[]}function bx(o,u){return o&&o.length?is(o,Oe(u,2)):[]}function Ax(o,u){return u=typeof u=="function"?u:t,o&&o.length?is(o,t,u):[]}function qp(o){if(!(o&&o.length))return[];var u=0;return o=gr(o,function(f){if(jt(f))return u=tn(f.length,u),!0}),ct(u,function(f){return wt(o,y(f))})}function kv(o,u){if(!(o&&o.length))return[];var f=qp(o);return u==null?f:wt(f,function(m){return Tn(u,t,m)})}var Sx=Xe(function(o,u){return jt(o)?ju(o,u):[]}),Rx=Xe(function(o){return Ap(gr(o,jt))}),Px=Xe(function(o){var u=Er(o);return jt(u)&&(u=t),Ap(gr(o,jt),Oe(u,2))}),Cx=Xe(function(o){var u=Er(o);return u=typeof u=="function"?u:t,Ap(gr(o,jt),t,u)}),xx=Xe(qp);function Dx(o,u){return Yy(o||[],u||[],$u)}function Ox(o,u){return Yy(o||[],u||[],Gu)}var kx=Xe(function(o){var u=o.length,f=u>1?o[u-1]:t;return f=typeof f=="function"?(o.pop(),f):t,kv(o,f)});function Nv(o){var u=I(o);return u.__chain__=!0,u}function Nx(o,u){return u(o),o}function Nh(o,u){return u(o)}var Vx=gi(function(o){var u=o.length,f=u?o[0]:0,m=this.__wrapped__,w=function(b){return fp(b,o)};return u>1||this.__actions__.length||!(m instanceof tt)||!mi(f)?this.thru(w):(m=m.slice(f,+f+(u?1:0)),m.__actions__.push({func:Nh,args:[w],thisArg:t}),new yr(m,this.__chain__).thru(function(b){return u&&!b.length&&b.push(t),b}))});function Lx(){return Nv(this)}function Mx(){return new yr(this.value(),this.__chain__)}function Fx(){this.__values__===t&&(this.__values__=Hv(this.value()));var o=this.__index__>=this.__values__.length,u=o?t:this.__values__[this.__index__++];return{done:o,value:u}}function Ux(){return this}function Bx(o){for(var u,f=this;f instanceof vh;){var m=Rv(f);m.__index__=0,m.__values__=t,u?w.__wrapped__=m:u=m;var w=m;f=f.__wrapped__}return w.__wrapped__=o,u}function qx(){var o=this.__wrapped__;if(o instanceof tt){var u=o;return this.__actions__.length&&(u=new tt(this)),u=u.reverse(),u.__actions__.push({func:Nh,args:[Bp],thisArg:t}),new yr(u,this.__chain__)}return this.thru(Bp)}function $x(){return Jy(this.__wrapped__,this.__actions__)}var jx=Sh(function(o,u,f){mt.call(o,f)?++o[f]:di(o,f,1)});function zx(o,u,f){var m=Ge(o)?sa:NP;return f&&Fn(o,u,f)&&(u=t),m(o,Oe(u,3))}function Kx(o,u){var f=Ge(o)?gr:ky;return f(o,Oe(u,3))}var Gx=av(Pv),Wx=av(Cv);function Hx(o,u){return dn(Vh(o,u),1)}function Qx(o,u){return dn(Vh(o,u),Te)}function Jx(o,u,f){return f=f===t?1:He(f),dn(Vh(o,u),f)}function Vv(o,u){var f=Ge(o)?Ln:rs;return f(o,Oe(u,3))}function Lv(o,u){var f=Ge(o)?th:Oy;return f(o,Oe(u,3))}var Yx=Sh(function(o,u,f){mt.call(o,f)?o[f].push(u):di(o,f,[u])});function Xx(o,u,f,m){o=Hn(o)?o:va(o),f=f&&!m?He(f):0;var w=o.length;return f<0&&(f=tn(w+f,0)),Bh(o)?f<=w&&o.indexOf(u,f)>-1:!!w&&ci(o,u,f)>-1}var Zx=Xe(function(o,u,f){var m=-1,w=typeof u=="function",b=Hn(o)?W(o.length):[];return rs(o,function(D){b[++m]=w?Tn(u,D,f):zu(D,u,f)}),b}),e1=Sh(function(o,u,f){di(o,f,u)});function Vh(o,u){var f=Ge(o)?wt:Uy;return f(o,Oe(u,3))}function t1(o,u,f,m){return o==null?[]:(Ge(u)||(u=u==null?[]:[u]),f=m?t:f,Ge(f)||(f=f==null?[]:[f]),jy(o,u,f))}var n1=Sh(function(o,u,f){o[f?0:1].push(u)},function(){return[[],[]]});function r1(o,u,f){var m=Ge(o)?Cr:$,w=arguments.length<3;return m(o,Oe(u,4),f,w,rs)}function i1(o,u,f){var m=Ge(o)?nh:$,w=arguments.length<3;return m(o,Oe(u,4),f,w,Oy)}function s1(o,u){var f=Ge(o)?gr:ky;return f(o,Fh(Oe(u,3)))}function o1(o){var u=Ge(o)?Py:XP;return u(o)}function a1(o,u,f){(f?Fn(o,u,f):u===t)?u=1:u=He(u);var m=Ge(o)?CP:ZP;return m(o,u)}function u1(o){var u=Ge(o)?xP:tC;return u(o)}function l1(o){if(o==null)return 0;if(Hn(o))return Bh(o)?la(o):o.length;var u=Sn(o);return u==B||u==se?o.size:yp(o).length}function c1(o,u,f){var m=Ge(o)?oa:nC;return f&&Fn(o,u,f)&&(u=t),m(o,Oe(u,3))}var h1=Xe(function(o,u){if(o==null)return[];var f=u.length;return f>1&&Fn(o,u[0],u[1])?u=[]:f>2&&Fn(u[0],u[1],u[2])&&(u=[u[0]]),jy(o,dn(u,1),[])}),Lh=KR||function(){return Lt.Date.now()};function f1(o,u){if(typeof u!="function")throw new _r(a);return o=He(o),function(){if(--o<1)return u.apply(this,arguments)}}function Mv(o,u,f){return u=f?t:u,u=o&&u==null?o.length:u,pi(o,R,t,t,t,t,u)}function Fv(o,u){var f;if(typeof u!="function")throw new _r(a);return o=He(o),function(){return--o>0&&(f=u.apply(this,arguments)),o<=1&&(u=t),f}}var $p=Xe(function(o,u,f){var m=F;if(f.length){var w=ts(f,_a($p));m|=J}return pi(o,m,u,f,w)}),Uv=Xe(function(o,u,f){var m=F|Q;if(f.length){var w=ts(f,_a(Uv));m|=J}return pi(u,m,o,f,w)});function Bv(o,u,f){u=f?t:u;var m=pi(o,z,t,t,t,t,t,u);return m.placeholder=Bv.placeholder,m}function qv(o,u,f){u=f?t:u;var m=pi(o,G,t,t,t,t,t,u);return m.placeholder=qv.placeholder,m}function $v(o,u,f){var m,w,b,D,L,q,te=0,ne=!1,ae=!1,me=!0;if(typeof o!="function")throw new _r(a);u=Ir(u)||0,Ot(f)&&(ne=!!f.leading,ae="maxWait"in f,b=ae?tn(Ir(f.maxWait)||0,u):b,me="trailing"in f?!!f.trailing:me);function Ae(zt){var kr=m,vi=w;return m=w=t,te=zt,D=o.apply(vi,kr),D}function ke(zt){return te=zt,L=Qu(et,u),ne?Ae(zt):D}function Je(zt){var kr=zt-q,vi=zt-te,aw=u-kr;return ae?An(aw,b-vi):aw}function Ne(zt){var kr=zt-q,vi=zt-te;return q===t||kr>=u||kr<0||ae&&vi>=b}function et(){var zt=Lh();if(Ne(zt))return it(zt);L=Qu(et,Je(zt))}function it(zt){return L=t,me&&m?Ae(zt):(m=w=t,D)}function rr(){L!==t&&Xy(L),te=0,m=q=w=L=t}function Un(){return L===t?D:it(Lh())}function ir(){var zt=Lh(),kr=Ne(zt);if(m=arguments,w=this,q=zt,kr){if(L===t)return ke(q);if(ae)return Xy(L),L=Qu(et,u),Ae(q)}return L===t&&(L=Qu(et,u)),D}return ir.cancel=rr,ir.flush=Un,ir}var d1=Xe(function(o,u){return Dy(o,1,u)}),p1=Xe(function(o,u,f){return Dy(o,Ir(u)||0,f)});function g1(o){return pi(o,A)}function Mh(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new _r(a);var f=function(){var m=arguments,w=u?u.apply(this,m):m[0],b=f.cache;if(b.has(w))return b.get(w);var D=o.apply(this,m);return f.cache=b.set(w,D)||b,D};return f.cache=new(Mh.Cache||fi),f}Mh.Cache=fi;function Fh(o){if(typeof o!="function")throw new _r(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function m1(o){return Fv(2,o)}var _1=rC(function(o,u){u=u.length==1&&Ge(u[0])?wt(u[0],ft(Oe())):wt(dn(u,1),ft(Oe()));var f=u.length;return Xe(function(m){for(var w=-1,b=An(m.length,f);++w<b;)m[w]=u[w].call(this,m[w]);return Tn(o,this,m)})}),jp=Xe(function(o,u){var f=ts(u,_a(jp));return pi(o,J,t,u,f)}),jv=Xe(function(o,u){var f=ts(u,_a(jv));return pi(o,oe,t,u,f)}),y1=gi(function(o,u){return pi(o,S,t,t,t,u)});function v1(o,u){if(typeof o!="function")throw new _r(a);return u=u===t?u:He(u),Xe(o,u)}function w1(o,u){if(typeof o!="function")throw new _r(a);return u=u==null?0:tn(He(u),0),Xe(function(f){var m=f[u],w=os(f,0,u);return m&&Pr(w,m),Tn(o,this,w)})}function E1(o,u,f){var m=!0,w=!0;if(typeof o!="function")throw new _r(a);return Ot(f)&&(m="leading"in f?!!f.leading:m,w="trailing"in f?!!f.trailing:w),$v(o,u,{leading:m,maxWait:u,trailing:w})}function I1(o){return Mv(o,1)}function T1(o,u){return jp(Rp(u),o)}function b1(){if(!arguments.length)return[];var o=arguments[0];return Ge(o)?o:[o]}function A1(o){return vr(o,E)}function S1(o,u){return u=typeof u=="function"?u:t,vr(o,E,u)}function R1(o){return vr(o,_|E)}function P1(o,u){return u=typeof u=="function"?u:t,vr(o,_|E,u)}function C1(o,u){return u==null||xy(o,u,ln(u))}function Or(o,u){return o===u||o!==o&&u!==u}var x1=xh(gp),D1=xh(function(o,u){return o>=u}),co=Ly((function(){return arguments})())?Ly:function(o){return Mt(o)&&mt.call(o,"callee")&&!Iy.call(o,"callee")},Ge=W.isArray,O1=Nu?ft(Nu):BP;function Hn(o){return o!=null&&Uh(o.length)&&!_i(o)}function jt(o){return Mt(o)&&Hn(o)}function k1(o){return o===!0||o===!1||Mt(o)&&Mn(o)==_e}var as=WR||eg,N1=ia?ft(ia):qP;function V1(o){return Mt(o)&&o.nodeType===1&&!Ju(o)}function L1(o){if(o==null)return!0;if(Hn(o)&&(Ge(o)||typeof o=="string"||typeof o.splice=="function"||as(o)||ya(o)||co(o)))return!o.length;var u=Sn(o);if(u==B||u==se)return!o.size;if(Hu(o))return!yp(o).length;for(var f in o)if(mt.call(o,f))return!1;return!0}function M1(o,u){return Ku(o,u)}function F1(o,u,f){f=typeof f=="function"?f:t;var m=f?f(o,u):t;return m===t?Ku(o,u,t,f):!!m}function zp(o){if(!Mt(o))return!1;var u=Mn(o);return u==$e||u==be||typeof o.message=="string"&&typeof o.name=="string"&&!Ju(o)}function U1(o){return typeof o=="number"&&by(o)}function _i(o){if(!Ot(o))return!1;var u=Mn(o);return u==C||u==V||u==ee||u==fe}function zv(o){return typeof o=="number"&&o==He(o)}function Uh(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Be}function Ot(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function Mt(o){return o!=null&&typeof o=="object"}var Kv=Ys?ft(Ys):jP;function B1(o,u){return o===u||_p(o,u,Np(u))}function q1(o,u,f){return f=typeof f=="function"?f:t,_p(o,u,Np(u),f)}function $1(o){return Gv(o)&&o!=+o}function j1(o){if(SC(o))throw new je(s);return My(o)}function z1(o){return o===null}function K1(o){return o==null}function Gv(o){return typeof o=="number"||Mt(o)&&Mn(o)==Z}function Ju(o){if(!Mt(o)||Mn(o)!=Y)return!1;var u=fh(o);if(u===null)return!0;var f=mt.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&uh.call(f)==qR}var Kp=Vu?ft(Vu):zP;function G1(o){return zv(o)&&o>=-Be&&o<=Be}var Wv=Xs?ft(Xs):KP;function Bh(o){return typeof o=="string"||!Ge(o)&&Mt(o)&&Mn(o)==Se}function nr(o){return typeof o=="symbol"||Mt(o)&&Mn(o)==ge}var ya=eh?ft(eh):GP;function W1(o){return o===t}function H1(o){return Mt(o)&&Sn(o)==Ce}function Q1(o){return Mt(o)&&Mn(o)==De}var J1=xh(vp),Y1=xh(function(o,u){return o<=u});function Hv(o){if(!o)return[];if(Hn(o))return Bh(o)?xr(o):Wn(o);if(Mu&&o[Mu])return CR(o[Mu]());var u=Sn(o),f=u==B?op:u==se?sh:va;return f(o)}function yi(o){if(!o)return o===0?o:0;if(o=Ir(o),o===Te||o===-Te){var u=o<0?-1:1;return u*Vn}return o===o?o:0}function He(o){var u=yi(o),f=u%1;return u===u?f?u-f:u:0}function Qv(o){return o?oo(He(o),0,Dt):0}function Ir(o){if(typeof o=="number")return o;if(nr(o))return wn;if(Ot(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=Ot(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=rt(o);var f=Nc.test(o);return f||wu.test(o)?Xc(o.slice(2),f?2:8):qr.test(o)?wn:+o}function Jv(o){return Kr(o,Qn(o))}function X1(o){return o?oo(He(o),-Be,Be):o===0?o:0}function dt(o){return o==null?"":tr(o)}var Z1=ga(function(o,u){if(Hu(u)||Hn(u)){Kr(u,ln(u),o);return}for(var f in u)mt.call(u,f)&&$u(o,f,u[f])}),Yv=ga(function(o,u){Kr(u,Qn(u),o)}),qh=ga(function(o,u,f,m){Kr(u,Qn(u),o,m)}),eD=ga(function(o,u,f,m){Kr(u,ln(u),o,m)}),tD=gi(fp);function nD(o,u){var f=pa(o);return u==null?f:Cy(f,u)}var rD=Xe(function(o,u){o=Et(o);var f=-1,m=u.length,w=m>2?u[2]:t;for(w&&Fn(u[0],u[1],w)&&(m=1);++f<m;)for(var b=u[f],D=Qn(b),L=-1,q=D.length;++L<q;){var te=D[L],ne=o[te];(ne===t||Or(ne,ha[te])&&!mt.call(o,te))&&(o[te]=b[te])}return o}),iD=Xe(function(o){return o.push(t,pv),Tn(Xv,t,o)});function sD(o,u){return bn(o,Oe(u,3),zr)}function oD(o,u){return bn(o,Oe(u,3),pp)}function aD(o,u){return o==null?o:dp(o,Oe(u,3),Qn)}function uD(o,u){return o==null?o:Ny(o,Oe(u,3),Qn)}function lD(o,u){return o&&zr(o,Oe(u,3))}function cD(o,u){return o&&pp(o,Oe(u,3))}function hD(o){return o==null?[]:Ih(o,ln(o))}function fD(o){return o==null?[]:Ih(o,Qn(o))}function Gp(o,u,f){var m=o==null?t:ao(o,u);return m===t?f:m}function dD(o,u){return o!=null&&_v(o,u,LP)}function Wp(o,u){return o!=null&&_v(o,u,MP)}var pD=lv(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=lh.call(u)),o[u]=f},Qp(Jn)),gD=lv(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=lh.call(u)),mt.call(o,u)?o[u].push(f):o[u]=[f]},Oe),mD=Xe(zu);function ln(o){return Hn(o)?Ry(o):yp(o)}function Qn(o){return Hn(o)?Ry(o,!0):WP(o)}function _D(o,u){var f={};return u=Oe(u,3),zr(o,function(m,w,b){di(f,u(m,w,b),m)}),f}function yD(o,u){var f={};return u=Oe(u,3),zr(o,function(m,w,b){di(f,w,u(m,w,b))}),f}var vD=ga(function(o,u,f){Th(o,u,f)}),Xv=ga(function(o,u,f,m){Th(o,u,f,m)}),wD=gi(function(o,u){var f={};if(o==null)return f;var m=!1;u=wt(u,function(b){return b=ss(b,o),m||(m=b.length>1),b}),Kr(o,Op(o),f),m&&(f=vr(f,_|v|E,pC));for(var w=u.length;w--;)bp(f,u[w]);return f});function ED(o,u){return Zv(o,Fh(Oe(u)))}var ID=gi(function(o,u){return o==null?{}:QP(o,u)});function Zv(o,u){if(o==null)return{};var f=wt(Op(o),function(m){return[m]});return u=Oe(u),zy(o,f,function(m,w){return u(m,w[0])})}function TD(o,u,f){u=ss(u,o);var m=-1,w=u.length;for(w||(w=1,o=t);++m<w;){var b=o==null?t:o[Gr(u[m])];b===t&&(m=w,b=f),o=_i(b)?b.call(o):b}return o}function bD(o,u,f){return o==null?o:Gu(o,u,f)}function AD(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:Gu(o,u,f,m)}var ew=fv(ln),tw=fv(Qn);function SD(o,u,f){var m=Ge(o),w=m||as(o)||ya(o);if(u=Oe(u,4),f==null){var b=o&&o.constructor;w?f=m?new b:[]:Ot(o)?f=_i(b)?pa(fh(o)):{}:f={}}return(w?Ln:zr)(o,function(D,L,q){return u(f,D,L,q)}),f}function RD(o,u){return o==null?!0:bp(o,u)}function PD(o,u,f){return o==null?o:Qy(o,u,Rp(f))}function CD(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:Qy(o,u,Rp(f),m)}function va(o){return o==null?[]:Jt(o,ln(o))}function xD(o){return o==null?[]:Jt(o,Qn(o))}function DD(o,u,f){return f===t&&(f=u,u=t),f!==t&&(f=Ir(f),f=f===f?f:0),u!==t&&(u=Ir(u),u=u===u?u:0),oo(Ir(o),u,f)}function OD(o,u,f){return u=yi(u),f===t?(f=u,u=0):f=yi(f),o=Ir(o),FP(o,u,f)}function kD(o,u,f){if(f&&typeof f!="boolean"&&Fn(o,u,f)&&(u=f=t),f===t&&(typeof u=="boolean"?(f=u,u=t):typeof o=="boolean"&&(f=o,o=t)),o===t&&u===t?(o=0,u=1):(o=yi(o),u===t?(u=o,o=0):u=yi(u)),o>u){var m=o;o=u,u=m}if(f||o%1||u%1){var w=Ay();return An(o+w*(u-o+sp("1e-"+((w+"").length-1))),u)}return Ep(o,u)}var ND=ma(function(o,u,f){return u=u.toLowerCase(),o+(f?nw(u):u)});function nw(o){return Hp(dt(o).toLowerCase())}function rw(o){return o=dt(o),o&&o.replace(Lc,bR).replace(tp,"")}function VD(o,u,f){o=dt(o),u=tr(u);var m=o.length;f=f===t?m:oo(He(f),0,m);var w=f;return f-=u.length,f>=0&&o.slice(f,w)==u}function LD(o){return o=dt(o),o&&si.test(o)?o.replace(Qo,AR):o}function MD(o){return o=dt(o),o&&Ks.test(o)?o.replace(Yo,"\\$&"):o}var FD=ma(function(o,u,f){return o+(f?"-":"")+u.toLowerCase()}),UD=ma(function(o,u,f){return o+(f?" ":"")+u.toLowerCase()}),BD=ov("toLowerCase");function qD(o,u,f){o=dt(o),u=He(u);var m=u?la(o):0;if(!u||m>=u)return o;var w=(u-m)/2;return Ch(mh(w),f)+o+Ch(gh(w),f)}function $D(o,u,f){o=dt(o),u=He(u);var m=u?la(o):0;return u&&m<u?o+Ch(u-m,f):o}function jD(o,u,f){o=dt(o),u=He(u);var m=u?la(o):0;return u&&m<u?Ch(u-m,f)+o:o}function zD(o,u,f){return f||u==null?u=0:u&&(u=+u),YR(dt(o).replace(oi,""),u||0)}function KD(o,u,f){return(f?Fn(o,u,f):u===t)?u=1:u=He(u),Ip(dt(o),u)}function GD(){var o=arguments,u=dt(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var WD=ma(function(o,u,f){return o+(f?"_":"")+u.toLowerCase()});function HD(o,u,f){return f&&typeof f!="number"&&Fn(o,u,f)&&(u=f=t),f=f===t?Dt:f>>>0,f?(o=dt(o),o&&(typeof u=="string"||u!=null&&!Kp(u))&&(u=tr(u),!u&&ua(o))?os(xr(o),0,f):o.split(u,f)):[]}var QD=ma(function(o,u,f){return o+(f?" ":"")+Hp(u)});function JD(o,u,f){return o=dt(o),f=f==null?0:oo(He(f),0,o.length),u=tr(u),o.slice(f,f+u.length)==u}function YD(o,u,f){var m=I.templateSettings;f&&Fn(o,u,f)&&(u=t),o=dt(o),u=qh({},u,m,dv);var w=qh({},u.imports,m.imports,dv),b=ln(w),D=Jt(w,b),L,q,te=0,ne=u.interpolate||Ws,ae="__p += '",me=ap((u.escape||Ws).source+"|"+ne.source+"|"+(ne===yu?vu:Ws).source+"|"+(u.evaluate||Ws).source+"|$","g"),Ae="//# sourceURL="+(mt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jc+"]")+`
`;o.replace(me,function(Ne,et,it,rr,Un,ir){return it||(it=rr),ae+=o.slice(te,ir).replace(Jd,SR),et&&(L=!0,ae+=`' +
__e(`+et+`) +
'`),Un&&(q=!0,ae+=`';
`+Un+`;
__p += '`),it&&(ae+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),te=ir+Ne.length,Ne}),ae+=`';
`;var ke=mt.call(u,"variable")&&u.variable;if(!ke)ae=`with (obj) {
`+ae+`
}
`;else if(Xo.test(ke))throw new je(l);ae=(q?ae.replace(Gi,""):ae).replace(Cc,"$1").replace(xc,"$1;"),ae="function("+(ke||"obj")+`) {
`+(ke?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ae+`return __p
}`;var Je=sw(function(){return ht(b,Ae+"return "+ae).apply(t,D)});if(Je.source=ae,zp(Je))throw Je;return Je}function XD(o){return dt(o).toLowerCase()}function ZD(o){return dt(o).toUpperCase()}function eO(o,u,f){if(o=dt(o),o&&(f||u===t))return rt(o);if(!o||!(u=tr(u)))return o;var m=xr(o),w=xr(u),b=Gn(m,w),D=no(m,w)+1;return os(m,b,D).join("")}function tO(o,u,f){if(o=dt(o),o&&(f||u===t))return o.slice(0,yy(o)+1);if(!o||!(u=tr(u)))return o;var m=xr(o),w=no(m,xr(u))+1;return os(m,0,w).join("")}function nO(o,u,f){if(o=dt(o),o&&(f||u===t))return o.replace(oi,"");if(!o||!(u=tr(u)))return o;var m=xr(o),w=Gn(m,xr(u));return os(m,w).join("")}function rO(o,u){var f=x,m=k;if(Ot(u)){var w="separator"in u?u.separator:w;f="length"in u?He(u.length):f,m="omission"in u?tr(u.omission):m}o=dt(o);var b=o.length;if(ua(o)){var D=xr(o);b=D.length}if(f>=b)return o;var L=f-la(m);if(L<1)return m;var q=D?os(D,0,L).join(""):o.slice(0,L);if(w===t)return q+m;if(D&&(L+=q.length-L),Kp(w)){if(o.slice(L).search(w)){var te,ne=q;for(w.global||(w=ap(w.source,dt(Gs.exec(w))+"g")),w.lastIndex=0;te=w.exec(ne);)var ae=te.index;q=q.slice(0,ae===t?L:ae)}}else if(o.indexOf(tr(w),L)!=L){var me=q.lastIndexOf(w);me>-1&&(q=q.slice(0,me))}return q+m}function iO(o){return o=dt(o),o&&_u.test(o)?o.replace(Wi,kR):o}var sO=ma(function(o,u,f){return o+(f?" ":"")+u.toUpperCase()}),Hp=ov("toUpperCase");function iw(o,u,f){return o=dt(o),u=f?t:u,u===t?PR(o)?LR(o):aa(o):o.match(u)||[]}var sw=Xe(function(o,u){try{return Tn(o,t,u)}catch(f){return zp(f)?f:new je(f)}}),oO=gi(function(o,u){return Ln(u,function(f){f=Gr(f),di(o,f,$p(o[f],o))}),o});function aO(o){var u=o==null?0:o.length,f=Oe();return o=u?wt(o,function(m){if(typeof m[1]!="function")throw new _r(a);return[f(m[0]),m[1]]}):[],Xe(function(m){for(var w=-1;++w<u;){var b=o[w];if(Tn(b[0],this,m))return Tn(b[1],this,m)}})}function uO(o){return kP(vr(o,_))}function Qp(o){return function(){return o}}function lO(o,u){return o==null||o!==o?u:o}var cO=uv(),hO=uv(!0);function Jn(o){return o}function Jp(o){return Fy(typeof o=="function"?o:vr(o,_))}function fO(o){return By(vr(o,_))}function dO(o,u){return qy(o,vr(u,_))}var pO=Xe(function(o,u){return function(f){return zu(f,o,u)}}),gO=Xe(function(o,u){return function(f){return zu(o,f,u)}});function Yp(o,u,f){var m=ln(u),w=Ih(u,m);f==null&&!(Ot(u)&&(w.length||!m.length))&&(f=u,u=o,o=this,w=Ih(u,ln(u)));var b=!(Ot(f)&&"chain"in f)||!!f.chain,D=_i(o);return Ln(w,function(L){var q=u[L];o[L]=q,D&&(o.prototype[L]=function(){var te=this.__chain__;if(b||te){var ne=o(this.__wrapped__),ae=ne.__actions__=Wn(this.__actions__);return ae.push({func:q,args:arguments,thisArg:o}),ne.__chain__=te,ne}return q.apply(o,Pr([this.value()],arguments))})}),o}function mO(){return Lt._===this&&(Lt._=$R),this}function Xp(){}function _O(o){return o=He(o),Xe(function(u){return $y(u,o)})}var yO=Cp(wt),vO=Cp(sa),wO=Cp(oa);function ow(o){return Lp(o)?y(Gr(o)):JP(o)}function EO(o){return function(u){return o==null?t:ao(o,u)}}var IO=cv(),TO=cv(!0);function Zp(){return[]}function eg(){return!1}function bO(){return{}}function AO(){return""}function SO(){return!0}function RO(o,u){if(o=He(o),o<1||o>Be)return[];var f=Dt,m=An(o,Dt);u=Oe(u),o-=Dt;for(var w=ct(m,u);++f<o;)u(f);return w}function PO(o){return Ge(o)?wt(o,Gr):nr(o)?[o]:Wn(Sv(dt(o)))}function CO(o){var u=++BR;return dt(o)+u}var xO=Ph(function(o,u){return o+u},0),DO=xp("ceil"),OO=Ph(function(o,u){return o/u},1),kO=xp("floor");function NO(o){return o&&o.length?Eh(o,Jn,gp):t}function VO(o,u){return o&&o.length?Eh(o,Oe(u,2),gp):t}function LO(o){return g(o,Jn)}function MO(o,u){return g(o,Oe(u,2))}function FO(o){return o&&o.length?Eh(o,Jn,vp):t}function UO(o,u){return o&&o.length?Eh(o,Oe(u,2),vp):t}var BO=Ph(function(o,u){return o*u},1),qO=xp("round"),$O=Ph(function(o,u){return o-u},0);function jO(o){return o&&o.length?he(o,Jn):0}function zO(o,u){return o&&o.length?he(o,Oe(u,2)):0}return I.after=f1,I.ary=Mv,I.assign=Z1,I.assignIn=Yv,I.assignInWith=qh,I.assignWith=eD,I.at=tD,I.before=Fv,I.bind=$p,I.bindAll=oO,I.bindKey=Uv,I.castArray=b1,I.chain=Nv,I.chunk=kC,I.compact=NC,I.concat=VC,I.cond=aO,I.conforms=uO,I.constant=Qp,I.countBy=jx,I.create=nD,I.curry=Bv,I.curryRight=qv,I.debounce=$v,I.defaults=rD,I.defaultsDeep=iD,I.defer=d1,I.delay=p1,I.difference=LC,I.differenceBy=MC,I.differenceWith=FC,I.drop=UC,I.dropRight=BC,I.dropRightWhile=qC,I.dropWhile=$C,I.fill=jC,I.filter=Kx,I.flatMap=Hx,I.flatMapDeep=Qx,I.flatMapDepth=Jx,I.flatten=xv,I.flattenDeep=zC,I.flattenDepth=KC,I.flip=g1,I.flow=cO,I.flowRight=hO,I.fromPairs=GC,I.functions=hD,I.functionsIn=fD,I.groupBy=Yx,I.initial=HC,I.intersection=QC,I.intersectionBy=JC,I.intersectionWith=YC,I.invert=pD,I.invertBy=gD,I.invokeMap=Zx,I.iteratee=Jp,I.keyBy=e1,I.keys=ln,I.keysIn=Qn,I.map=Vh,I.mapKeys=_D,I.mapValues=yD,I.matches=fO,I.matchesProperty=dO,I.memoize=Mh,I.merge=vD,I.mergeWith=Xv,I.method=pO,I.methodOf=gO,I.mixin=Yp,I.negate=Fh,I.nthArg=_O,I.omit=wD,I.omitBy=ED,I.once=m1,I.orderBy=t1,I.over=yO,I.overArgs=_1,I.overEvery=vO,I.overSome=wO,I.partial=jp,I.partialRight=jv,I.partition=n1,I.pick=ID,I.pickBy=Zv,I.property=ow,I.propertyOf=EO,I.pull=tx,I.pullAll=Ov,I.pullAllBy=nx,I.pullAllWith=rx,I.pullAt=ix,I.range=IO,I.rangeRight=TO,I.rearg=y1,I.reject=s1,I.remove=sx,I.rest=v1,I.reverse=Bp,I.sampleSize=a1,I.set=bD,I.setWith=AD,I.shuffle=u1,I.slice=ox,I.sortBy=h1,I.sortedUniq=dx,I.sortedUniqBy=px,I.split=HD,I.spread=w1,I.tail=gx,I.take=mx,I.takeRight=_x,I.takeRightWhile=yx,I.takeWhile=vx,I.tap=Nx,I.throttle=E1,I.thru=Nh,I.toArray=Hv,I.toPairs=ew,I.toPairsIn=tw,I.toPath=PO,I.toPlainObject=Jv,I.transform=SD,I.unary=I1,I.union=wx,I.unionBy=Ex,I.unionWith=Ix,I.uniq=Tx,I.uniqBy=bx,I.uniqWith=Ax,I.unset=RD,I.unzip=qp,I.unzipWith=kv,I.update=PD,I.updateWith=CD,I.values=va,I.valuesIn=xD,I.without=Sx,I.words=iw,I.wrap=T1,I.xor=Rx,I.xorBy=Px,I.xorWith=Cx,I.zip=xx,I.zipObject=Dx,I.zipObjectDeep=Ox,I.zipWith=kx,I.entries=ew,I.entriesIn=tw,I.extend=Yv,I.extendWith=qh,Yp(I,I),I.add=xO,I.attempt=sw,I.camelCase=ND,I.capitalize=nw,I.ceil=DO,I.clamp=DD,I.clone=A1,I.cloneDeep=R1,I.cloneDeepWith=P1,I.cloneWith=S1,I.conformsTo=C1,I.deburr=rw,I.defaultTo=lO,I.divide=OO,I.endsWith=VD,I.eq=Or,I.escape=LD,I.escapeRegExp=MD,I.every=zx,I.find=Gx,I.findIndex=Pv,I.findKey=sD,I.findLast=Wx,I.findLastIndex=Cv,I.findLastKey=oD,I.floor=kO,I.forEach=Vv,I.forEachRight=Lv,I.forIn=aD,I.forInRight=uD,I.forOwn=lD,I.forOwnRight=cD,I.get=Gp,I.gt=x1,I.gte=D1,I.has=dD,I.hasIn=Wp,I.head=Dv,I.identity=Jn,I.includes=Xx,I.indexOf=WC,I.inRange=OD,I.invoke=mD,I.isArguments=co,I.isArray=Ge,I.isArrayBuffer=O1,I.isArrayLike=Hn,I.isArrayLikeObject=jt,I.isBoolean=k1,I.isBuffer=as,I.isDate=N1,I.isElement=V1,I.isEmpty=L1,I.isEqual=M1,I.isEqualWith=F1,I.isError=zp,I.isFinite=U1,I.isFunction=_i,I.isInteger=zv,I.isLength=Uh,I.isMap=Kv,I.isMatch=B1,I.isMatchWith=q1,I.isNaN=$1,I.isNative=j1,I.isNil=K1,I.isNull=z1,I.isNumber=Gv,I.isObject=Ot,I.isObjectLike=Mt,I.isPlainObject=Ju,I.isRegExp=Kp,I.isSafeInteger=G1,I.isSet=Wv,I.isString=Bh,I.isSymbol=nr,I.isTypedArray=ya,I.isUndefined=W1,I.isWeakMap=H1,I.isWeakSet=Q1,I.join=XC,I.kebabCase=FD,I.last=Er,I.lastIndexOf=ZC,I.lowerCase=UD,I.lowerFirst=BD,I.lt=J1,I.lte=Y1,I.max=NO,I.maxBy=VO,I.mean=LO,I.meanBy=MO,I.min=FO,I.minBy=UO,I.stubArray=Zp,I.stubFalse=eg,I.stubObject=bO,I.stubString=AO,I.stubTrue=SO,I.multiply=BO,I.nth=ex,I.noConflict=mO,I.noop=Xp,I.now=Lh,I.pad=qD,I.padEnd=$D,I.padStart=jD,I.parseInt=zD,I.random=kD,I.reduce=r1,I.reduceRight=i1,I.repeat=KD,I.replace=GD,I.result=TD,I.round=qO,I.runInContext=U,I.sample=o1,I.size=l1,I.snakeCase=WD,I.some=c1,I.sortedIndex=ax,I.sortedIndexBy=ux,I.sortedIndexOf=lx,I.sortedLastIndex=cx,I.sortedLastIndexBy=hx,I.sortedLastIndexOf=fx,I.startCase=QD,I.startsWith=JD,I.subtract=$O,I.sum=jO,I.sumBy=zO,I.template=YD,I.times=RO,I.toFinite=yi,I.toInteger=He,I.toLength=Qv,I.toLower=XD,I.toNumber=Ir,I.toSafeInteger=X1,I.toString=dt,I.toUpper=ZD,I.trim=eO,I.trimEnd=tO,I.trimStart=nO,I.truncate=rO,I.unescape=iO,I.uniqueId=CO,I.upperCase=sO,I.upperFirst=Hp,I.each=Vv,I.eachRight=Lv,I.first=Dv,Yp(I,(function(){var o={};return zr(I,function(u,f){mt.call(I.prototype,f)||(o[f]=u)}),o})(),{chain:!1}),I.VERSION=r,Ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){I[o].placeholder=I}),Ln(["drop","take"],function(o,u){tt.prototype[o]=function(f){f=f===t?1:tn(He(f),0);var m=this.__filtered__&&!u?new tt(this):this.clone();return m.__filtered__?m.__takeCount__=An(f,m.__takeCount__):m.__views__.push({size:An(f,Dt),type:o+(m.__dir__<0?"Right":"")}),m},tt.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),Ln(["filter","map","takeWhile"],function(o,u){var f=u+1,m=f==ce||f==Ye;tt.prototype[o]=function(w){var b=this.clone();return b.__iteratees__.push({iteratee:Oe(w,3),type:f}),b.__filtered__=b.__filtered__||m,b}}),Ln(["head","last"],function(o,u){var f="take"+(u?"Right":"");tt.prototype[o]=function(){return this[f](1).value()[0]}}),Ln(["initial","tail"],function(o,u){var f="drop"+(u?"":"Right");tt.prototype[o]=function(){return this.__filtered__?new tt(this):this[f](1)}}),tt.prototype.compact=function(){return this.filter(Jn)},tt.prototype.find=function(o){return this.filter(o).head()},tt.prototype.findLast=function(o){return this.reverse().find(o)},tt.prototype.invokeMap=Xe(function(o,u){return typeof o=="function"?new tt(this):this.map(function(f){return zu(f,o,u)})}),tt.prototype.reject=function(o){return this.filter(Fh(Oe(o)))},tt.prototype.slice=function(o,u){o=He(o);var f=this;return f.__filtered__&&(o>0||u<0)?new tt(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),u!==t&&(u=He(u),f=u<0?f.dropRight(-u):f.take(u-o)),f)},tt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},tt.prototype.toArray=function(){return this.take(Dt)},zr(tt.prototype,function(o,u){var f=/^(?:filter|find|map|reject)|While$/.test(u),m=/^(?:head|last)$/.test(u),w=I[m?"take"+(u=="last"?"Right":""):u],b=m||/^find/.test(u);w&&(I.prototype[u]=function(){var D=this.__wrapped__,L=m?[1]:arguments,q=D instanceof tt,te=L[0],ne=q||Ge(D),ae=function(et){var it=w.apply(I,Pr([et],L));return m&&me?it[0]:it};ne&&f&&typeof te=="function"&&te.length!=1&&(q=ne=!1);var me=this.__chain__,Ae=!!this.__actions__.length,ke=b&&!me,Je=q&&!Ae;if(!b&&ne){D=Je?D:new tt(this);var Ne=o.apply(D,L);return Ne.__actions__.push({func:Nh,args:[ae],thisArg:t}),new yr(Ne,me)}return ke&&Je?o.apply(this,L):(Ne=this.thru(ae),ke?m?Ne.value()[0]:Ne.value():Ne)})}),Ln(["pop","push","shift","sort","splice","unshift"],function(o){var u=oh[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",m=/^(?:pop|shift)$/.test(o);I.prototype[o]=function(){var w=arguments;if(m&&!this.__chain__){var b=this.value();return u.apply(Ge(b)?b:[],w)}return this[f](function(D){return u.apply(Ge(D)?D:[],w)})}}),zr(tt.prototype,function(o,u){var f=I[u];if(f){var m=f.name+"";mt.call(da,m)||(da[m]=[]),da[m].push({name:u,func:f})}}),da[Rh(t,Q).name]=[{name:"wrapper",func:t}],tt.prototype.clone=iP,tt.prototype.reverse=sP,tt.prototype.value=oP,I.prototype.at=Vx,I.prototype.chain=Lx,I.prototype.commit=Mx,I.prototype.next=Fx,I.prototype.plant=Bx,I.prototype.reverse=qx,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=$x,I.prototype.first=I.prototype.head,Mu&&(I.prototype[Mu]=Ux),I}),ca=MR();fn?((fn.exports=ca)._=ca,ra._=ca):Lt._=ca}).call(V4)})(vl,vl.exports)),vl.exports}var M4=L4();const FI=N4(M4);let Ei=null,Qe=null,ol=null;const QS=aL("mainStore",{state:()=>({transactionId:null,currentSheetId:null,userLedger:null,currentSheet:null,referenceCurrency:null,conversionRates:null,conversionRatesUpdatedAt:null,conversionRatesAutoUpdateRate:1440*60*1e3,simplifiedTransactions:!0,firebaseReady:!1,authReady:!1,config:kg.make(),pendingTransactionIds:new Set,unsubscribeUserLedger:null,unsubscribeCurrentSheet:null,onlineHandler:null}),getters:{isSheet(){return this.currentSheet!==null},currencies(){return this.currentSheet?new Set(Og.getCurrencies(this.currentSheetResults)):new Set},lastCurrency(){var n;return this.currentSheet&&((n=this.currentSheetTransactions)!=null&&n.length)?this.currentSheet.transactions[this.currentSheetTransactions[0]].currency:"USD"},user(){var n,e,t,r;return sl.makeUser((n=Qe==null?void 0:Qe.currentUser)==null?void 0:n.uid,(e=this.userLedger)==null?void 0:e.name,(t=Qe==null?void 0:Qe.currentUser)==null?void 0:t.email,(r=Qe==null?void 0:Qe.currentUser)==null?void 0:r.emailVerified)},userLedgerFriends(){return!this.userLedger||!this.userLedger.friends?[]:Object.entries(this.userLedger.friends).sort(([,n],[,e])=>sl.compare(n,e)).map(([n])=>n)},userLedgerSheets(){return!this.userLedger||!this.userLedger.sheets?[]:Object.entries(this.userLedger.sheets).sort(([,n],[,e])=>n.timestamp-e.timestamp).map(([n])=>n)},currentSheetPeople(){return!this.currentSheet||!this.currentSheet.people?[]:Object.entries(this.currentSheet.people).sort(([,n],[,e])=>n.timestamp-e.timestamp).map(([n])=>n)},currentSheetTransactions(){return!this.currentSheet||!this.currentSheet.transactions?[]:Object.entries(this.currentSheet.transactions).sort(([,n],[,e])=>e.timestamp-n.timestamp).map(([n])=>n)},currentSheetResults(){return!this.currentSheet||!this.currentSheet.transactions||!this.currentSheetPeople?[]:Og.make(this.currentSheet.transactions,this.currentSheetPeople.length||0,this.simplifiedTransactions)}},actions:{personId2Idx(n){return this.currentSheetPeople.indexOf(n)},personIdx2Id(n){return this.currentSheetPeople[n]},async addTransaction(n,e=null){return navigator.onLine||this.pendingTransactionIds.add(n.id),await this.autoBatch(async(t,r)=>{await this.removeTransaction(this.transactionId,r);const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t.id}`]:t})},n,e)},async removeTransaction(n,e=null){if(n)return await this.autoBatch(async(t,r)=>{const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t}`]:ef()})},n,e)},async addTransactions(n,e=null){return await this.autoBatch(async(t,r)=>{for(const i of Object.values(t))await this.addTransaction(i,r)},n,e)},getEditableCurrentSheetResults(){return FI.cloneDeep(this.currentSheetResults)},makeEquivalentTransactionBatch(n,e,t,r=1,i=null){return Og.makeEquivalentTransactionBatch(this.currentSheetResults,n,e,t,r,i)},async settleCurrencyPerson(n,e,t){const r=this.makeEquivalentTransactionBatch(n,e,t);try{await this.addTransactions(r)}catch(i){$q.notify({message:i.message||i,color:"negative"})}},async setPeople(n,e=null){if(!this.currentSheet)throw new Error("Current sheet should be set here.");const t=Object.fromEntries(Object.keys(n).filter(i=>this.isUserOrFriend(i)).map(i=>[i,"owner"])),r=Object.keys(t).filter(i=>!(i in this.currentSheet.users));return await this.autoBatch(async(i,s,a,l)=>{const h={name:this.currentSheet.name,timestamp:this.currentSheet.timestamp};a.forEach(p=>{const _=this.getUserLedgerRef(p);l.update(_,{[`sheets.${this.currentSheet.id}`]:h})});const d=this.getSheetRef(this.currentSheet.id);l.update(d,{users:s}),l.update(d,{people:i})},n,t,r,e)},getEditableTransaction(n=this.transactionId){if(this.currentSheet&&n in this.currentSheet.transactions){const t=FI.cloneDeep(this.currentSheet.transactions[n]);return yl.updatePeople(t,this.currentSheetPeople.length),t}const e=this.currentSheetPeople.map(t=>this.currentSheet.people[t].active);return yl.make(e,this.lastCurrency,this.personId2Idx(Qe.currentUser.uid))},async setSheetName(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`sheets.${this.currentSheet.id}.name`]:t})},n,e)},getName(n,e=null){var t;return n===this.user.id?sl.username(this.user):n in this.userLedger.friends?sl.username(this.userLedger.friends[n]):(e===null&&(e=(t=this.currentSheet)==null?void 0:t.people),sl.username(e[n]))},isCaption(n,e=null){var t,r,i;return n===this.user.id?!!this.user.name:n in((t=this.userLedger)==null?void 0:t.friends)?!!this.userLedger.friends[n].name:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),!!((i=e[n])!=null&&i.name))},getEmail(n,e=null){var t,r,i;return n===this.user.id?this.user.email:n in((t=this.userLedger)==null?void 0:t.friends)?this.userLedger.friends[n].email:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),(i=e[n])==null?void 0:i.email)},isPersonFullyRemovable(n){if(n===this.user.id)return!1;if(!this.currentSheet)return!0;if(n in this.currentSheet.users)return!1;const e=this.currentSheetPeople.indexOf(n);return e===-1?!0:Object.values(this.currentSheet.transactions).every(t=>e>=t.debts.length)},async addSheetFromNameAndPeople(n,e,t=null){const r=Object.fromEntries(Object.keys(e).filter(s=>this.isUserOrFriend(s)).map(s=>[s,"owner"])),i=O4.make(n,e,r);return await this.autoBatch(async(s,a)=>{await this.addSheet(s,a)},i,t),i},currentSheetToCsv(){if(!this.currentSheet)return"";const n=this.currentSheetPeople.map(r=>this.getName(r,this.currentSheet.people));return[yl.csvHeader(n),...this.currentSheetTransactions.map(r=>yl.toCsvLine(this.currentSheet.transactions[r],n))].map(r=>r.join(",")).join(`
`)},async removeSheet(n,e,t=null){return await this.autoBatch(async(r,i,s)=>{const a=this.getSheetRef(r);i<=1?s.delete(a):(s.update(a,{[`users.${Qe.currentUser.uid}`]:ef()}),s.update(a,{[`people.${Qe.currentUser.uid}.active`]:!1}));const l=this.getUserLedgerRef();s.update(l,{[`sheets.${r}`]:ef()})},n,e,t)},async nUsers(n){const e=this.getSheetRef(n),t=await eB(e);if(!t.exists)throw new Error(`Document ${n} does not exist!`);return Object.keys(t.data().users).length},async addSheet(n,e=null){return await this.autoBatch(async(t,r)=>{const i={name:t.name,timestamp:t.timestamp};Object.keys(t.users).forEach(a=>{const l=this.getUserLedgerRef(a);r.update(l,{[`sheets.${t.id}`]:i})});const s=this.getSheetRef(t.id);r.set(s,t)},n,e)},isUserOrFriend(n){return n===Qe.currentUser.uid||n in this.userLedger.friends},async removeFriend(n,e=null){if(!(n in this.userLedger.friends))throw new Error("This user is not your friend!");return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${t}`]:ef()})},n,e)},async setFriendName(n,e,t=null){if(e in this.userLedger.friends)return await this.autoBatch(async(r,i,s)=>{const a=this.getUserLedgerRef();s.update(a,{[`friends.${i}.name`]:r})},n,e,t)},async addFriend(n,e=null){if(n.id in this.userLedger.friends)throw new Error("This user is already a friend!");if(n.id===Qe.currentUser.uid)throw new Error("You cannot add youself as friend!");return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${t.id}`]:t})},n,e)},isReady(){return this.firebaseReady&&this.authReady&&!!this.userLedger},async setUsername(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{name:t})},n,e)},async init(){if(this.setupOnlineListener(),Ei===null&&await this.initFirebase(),Ei===null)return!1;await(Qe==null?void 0:Qe.authStateReady()),Qe!=null&&Qe.currentUser&&!this.userLedger&&await this.subscribeUserLedger(),this.currentSheetId&&await this.subscribeCurrentSheet(this.currentSheetId),navigator.onLine&&this.conversionRatesAutoUpdateRate>0&&(!this.conversionRatesUpdatedAt||Date.now()-this.conversionRatesUpdatedAt>this.conversionRatesAutoUpdateRate)&&await this.fetchConversionRates()},setConfig(n){if(!kg.isCompatible(n))throw new Error("fbConfig not compatible!");this.config=n},async initFirebase(){if(kg.isCompatible(this.config)){if(await this.clearFirebase(),CM().length>0){this.firebaseReady=!0;return}Ei=rb(this.config),Qe=b4(Ei),ol=q2(Ei,{localCache:rB({tabManager:aB()})}),this.firebaseReady=!0,await new Promise(n=>{const e=Qe.onAuthStateChanged(()=>{this.authReady=!0,e(),n()})})}},async clearFirebase(){await this.logout(),ol=null,Ei&&await xM(Ei),Qe=null,Ei=null},async logout(){this.clearUserLedger(),Qe!=null&&Qe.currentUser&&await(Qe==null?void 0:Qe.signOut())},async login(n,e){var t;this.logout(),Ei===null&&await this.initFirebase(),await((t=Qe.authStateReady)==null?void 0:t.call(Qe)),await lq(Qe,n,e)},async register(n,e){var r;await this.logout(),this.isFirebaseReady||await this.initFirebase(),await((r=Qe.authStateReady)==null?void 0:r.call(Qe)),await uq(Qe,n,e);const t=this.getUserLedgerRef();await tB(t,k4.make())},async sendVerificationEmail(){await cq(Qe.currentUser)},async resetPassword(n){await aq(Qe,n)},setupOnlineListener(){if(this.onlineHandler)return;const n=()=>{this.pendingTransactionIds.clear()};window.addEventListener("online",n),this.onlineHandler=n},disposeOnlineListener(){this.onlineHandler&&(window.removeEventListener("online",this.onlineHandler),this.onlineHandler=null)},clearAll(){this.clearUserLedger(),this.clearCurrentSheet(),this.disposeOnlineListener()},clearUserLedger(){var n;(n=this.unsubscribeUserLedger)==null||n.call(this),this.unsubscribeUserLedger=null,this.userLedger=null},async subscribeUserLedger(){this.clearUserLedger();let n=!0;await new Promise(e=>{const t=this.getUserLedgerRef();this.unsubscribeUserLedger=mI(t,r=>{r.exists()&&(this.userLedger=r.data()),n&&(n=!1,e())})})},clearCurrentSheet(){var n;(n=this.unsubscribeCurrentSheet)==null||n.call(this),this.unsubscribeCurrentSheet=null,this.currentSheet=null,this.currentSheetId=null},async subscribeCurrentSheet(n){this.clearCurrentSheet();let e=!0;await new Promise(t=>{const r=this.getSheetRef(n);this.unsubscribeCurrentSheet=mI(r,async i=>{if(i.exists()){const s=i.data();this.currentSheet=s}await this.updateFriends(),e&&(e=!1,t())})}),this.currentSheetId=this.currentSheet.id||null},async updateFriends(n=null){const e=Object.keys(this.currentSheet.users).filter(r=>!(r in this.userLedger.friends)&&r!==Qe.currentUser.uid);if(!e.length)return;const t=e.map(r=>{var i,s;return{id:r,name:(i=this.currentSheet.people[r])==null?void 0:i.name,email:(s=this.currentSheet.people[r])==null?void 0:s.email}});await this.autoBatch(async(r,i)=>{for(const s of r)await this.addFriend(s,i)},t,n)},getUserLedgerRef(n=null){return n||(n=Qe.currentUser.uid),dI(ol,"users",n)},getSheetRef(n){return dI(ol,"sheets",n)},async autoBatch(n,...e){const t=!e[e.length-1];t&&(e[e.length-1]=lB(ol));const r=await n.apply(this,e);return t&&e[e.length-1].commit(),r},async fetchConversionRates(){if(!navigator.onLine)return;const e=await fetch("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/eur.json");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const t=await e.json();if(t.eur&&typeof t.eur=="object"){const r={};for(const i in t.eur)r[i.toUpperCase()]=t.eur[i];t.eur=r}this.conversionRates=t,this.conversionRatesUpdatedAt=Date.now()},convertCurrency(n,e,t){if(e===t)return n;if(!this.conversionRates||!this.conversionRates.eur)return null;const r=this.conversionRates.eur[e]||null,i=this.conversionRates.eur[t]||null;return!r||!i?null:n*i/r}},persist:{key:"sessionData",pick:["config","currentSheetId","transactionId","pendingTransactionIds","referenceCurrency","conversionRates","conversionRatesUpdatedAt","conversionRatesAutoUpdateRate","simplifiedTransactions"],serializer:{serialize:n=>JSON.stringify({...n,pendingTransactionIds:Array.from(n.pendingTransactionIds)}),deserialize:n=>{const e=JSON.parse(n);return{...e,pendingTransactionIds:new Set(e.pendingTransactionIds)}}}}}),F4={__name:"App",setup(n){const e=QS();return dc(()=>{e.clearAll()}),(t,r)=>{const i=Zk("router-view");return Of(),Nf(i)}}};const U4=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,B4=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,q4=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function $4(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){j4(n);return}return e}function j4(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function z4(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!q4.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(U4.test(n)||B4.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,$4)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function K4(n,e){if(n==null)return;let t=n;for(let r=0;r<e.length;r++){if(t==null||t[e[r]]==null)return;t=t[e[r]]}return t}function fy(n,e,t){if(t.length===0)return e;const r=t[0];return t.length>1&&(e=fy(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,r)?Number.isInteger(Number(t[1]))?[]:{}:n[r],e,Array.prototype.slice.call(t,1))),Number.isInteger(Number(r))&&Array.isArray(n)?n.slice()[r]:Object.assign({},n,{[r]:e})}function JS(n,e){if(n==null||e.length===0)return n;if(e.length===1){if(n==null)return n;if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(e[0],1);const t={};for(const r in n)t[r]=n[r];return delete t[e[0]],t}if(n[e[0]]==null){if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const t={};for(const r in n)t[r]=n[r];return t}return fy(n,JS(n[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function YS(n,e){return e.map(t=>t.split(".")).map(t=>[t,K4(n,t)]).filter(t=>t[1]!==void 0).reduce((t,r)=>fy(t,r[1],r[0]),{})}function XS(n,e){return e.map(t=>t.split(".")).reduce((t,r)=>JS(t,r),n)}function UI(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a,beforeHydrate:l,afterHydrate:h},d,p=!0){try{p&&(l==null||l(d));const _=e.getItem(r);if(_){const v=t.deserialize(_),E=s?YS(v,s):v,N=a?XS(E,a):E;n.$patch(N)}p&&(h==null||h(d))}catch(_){i&&console.error("[pinia-plugin-persistedstate]",_)}}function BI(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a}){try{const l=s?YS(n,s):n,h=a?XS(l,a):l,d=t.serialize(h);e.setItem(r,d)}catch(l){i&&console.error("[pinia-plugin-persistedstate]",l)}}function G4(n,e,t){const{pinia:r,store:i,options:{persist:s=t}}=n;if(!s)return;if(!(i.$id in r.state.value)){const h=r._s.get(i.$id.replace("__hot:",""));h&&Promise.resolve().then(()=>h.$persist());return}const l=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(e);i.$hydrate=({runHooks:h=!0}={})=>{l.forEach(d=>{UI(i,d,n,h)})},i.$persist=()=>{l.forEach(h=>{BI(i.$state,h)})},l.forEach(h=>{UI(i,h,n),i.$subscribe((d,p)=>BI(p,h),{detached:!0})})}function W4(n={}){return function(e){var t;G4(e,r=>{var i,s,a,l,h,d,p;return{key:(n.key?n.key:_=>_)((i=r.key)!=null?i:e.store.$id),debug:(a=(s=r.debug)!=null?s:n.debug)!=null?a:!1,serializer:(h=(l=r.serializer)!=null?l:n.serializer)!=null?h:{serialize:_=>JSON.stringify(_),deserialize:_=>z4(_)},storage:(p=(d=r.storage)!=null?d:n.storage)!=null?p:window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}},(t=n.auto)!=null?t:!1)}}var H4=W4();const Ng=()=>{const n=tL();return n.use(H4),n};/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ma=typeof document!="undefined";function ZS(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Q4(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&ZS(n.default)}const pt=Object.assign;function Vg(n,e){const t={};for(const r in e){const i=e[r];t[r]=Ur(i)?i.map(n):n(i)}return t}const Fl=()=>{},Ur=Array.isArray;function qI(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}const eR=/#/g,J4=/&/g,Y4=/\//g,X4=/=/g,Z4=/\?/g,tR=/\+/g,e$=/%5B/g,t$=/%5D/g,nR=/%5E/g,n$=/%60/g,rR=/%7B/g,r$=/%7C/g,iR=/%7D/g,i$=/%20/g;function dy(n){return n==null?"":encodeURI(""+n).replace(r$,"|").replace(e$,"[").replace(t$,"]")}function s$(n){return dy(n).replace(rR,"{").replace(iR,"}").replace(nR,"^")}function Um(n){return dy(n).replace(tR,"%2B").replace(i$,"+").replace(eR,"%23").replace(J4,"%26").replace(n$,"`").replace(rR,"{").replace(iR,"}").replace(nR,"^")}function o$(n){return Um(n).replace(X4,"%3D")}function a$(n){return dy(n).replace(eR,"%23").replace(Z4,"%3F")}function u$(n){return a$(n).replace(Y4,"%2F")}function lc(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const l$=/\/$/,c$=n=>n.replace(l$,"");function Lg(n,e,t="/"){let r,i={},s="",a="";const l=e.indexOf("#");let h=e.indexOf("?");return h=l>=0&&h>l?-1:h,h>=0&&(r=e.slice(0,h),s=e.slice(h,l>0?l:e.length),i=n(s.slice(1))),l>=0&&(r=r||e.slice(0,l),a=e.slice(l,e.length)),r=p$(r!=null?r:e,t),{fullPath:r+s+a,path:r,query:i,hash:lc(a)}}function h$(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function $I(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function f$(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&lu(e.matched[r],t.matched[i])&&sR(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function lu(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function sR(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!d$(n[t],e[t]))return!1;return!0}function d$(n,e){return Ur(n)?jI(n,e):Ur(e)?jI(e,n):n===e}function jI(n,e){return Ur(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function p$(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(a).join("/")}const fs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Bm=(function(n){return n.pop="pop",n.push="push",n})({}),Mg=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function g$(n){if(!n)if(Ma){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),c$(n)}const m$=/^[^#]+#/;function _$(n,e){return n.replace(m$,"#")+e}function y$(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const zd=()=>({left:window.scrollX,top:window.scrollY});function v$(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=y$(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function zI(n,e){return(history.state?history.state.position-e:-1)+n}const qm=new Map;function w$(n,e){qm.set(n,e)}function E$(n){const e=qm.get(n);return qm.delete(n),e}function I$(n){return typeof n=="string"||n&&typeof n=="object"}function oR(n){return typeof n=="string"||typeof n=="symbol"}let Ft=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const aR=Symbol("");Ft.MATCHER_NOT_FOUND+"",Ft.NAVIGATION_GUARD_REDIRECT+"",Ft.NAVIGATION_ABORTED+"",Ft.NAVIGATION_CANCELLED+"",Ft.NAVIGATION_DUPLICATED+"";function cu(n,e){return pt(new Error,{type:n,[aR]:!0},e)}function Ii(n,e){return n instanceof Error&&aR in n&&(e==null||!!(n.type&e))}const T$=["params","query","hash"];function b$(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of T$)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function A$(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<t.length;++r){const i=t[r].replace(tR," "),s=i.indexOf("="),a=lc(s<0?i:i.slice(0,s)),l=s<0?null:lc(i.slice(s+1));if(a in e){let h=e[a];Ur(h)||(h=e[a]=[h]),h.push(l)}else e[a]=l}return e}function KI(n){let e="";for(let t in n){const r=n[t];if(t=o$(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Ur(r)?r.map(i=>i&&Um(i)):[r&&Um(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function S$(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Ur(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const R$=Symbol(""),GI=Symbol(""),Kd=Symbol(""),uR=Symbol(""),$m=Symbol("");function al(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function ys(n,e,t,r,i,s=a=>a()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((l,h)=>{const d=v=>{v===!1?h(cu(Ft.NAVIGATION_ABORTED,{from:t,to:e})):v instanceof Error?h(v):I$(v)?h(cu(Ft.NAVIGATION_GUARD_REDIRECT,{from:e,to:v})):(a&&r.enterCallbacks[i]===a&&typeof v=="function"&&a.push(v),l())},p=s(()=>n.call(r&&r.instances[i],e,t,d));let _=Promise.resolve(p);n.length<3&&(_=_.then(d)),_.catch(v=>h(v))})}function Fg(n,e,t,r,i=s=>s()){const s=[];for(const a of n)for(const l in a.components){let h=a.components[l];if(!(e!=="beforeRouteEnter"&&!a.instances[l]))if(ZS(h)){const d=(h.__vccOpts||h)[e];d&&s.push(ys(d,t,r,a,l,i))}else{let d=h();s.push(()=>d.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const _=Q4(p)?p.default:p;a.mods[l]=p,a.components[l]=_;const v=(_.__vccOpts||_)[e];return v&&ys(v,t,r,a,l,i)()}))}}return s}function P$(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let a=0;a<s;a++){const l=e.matched[a];l&&(n.matched.find(d=>lu(d,l))?r.push(l):t.push(l));const h=n.matched[a];h&&(e.matched.find(d=>lu(d,h))||i.push(h))}return[t,r,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let C$=()=>location.protocol+"//"+location.host;function lR(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let a=i.includes(n.slice(s))?n.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),$I(l,"")}return $I(t,n)+r+i}function x$(n,e,t,r){let i=[],s=[],a=null;const l=({state:v})=>{const E=lR(n,location),N=t.value,M=e.value;let F=0;if(v){if(t.value=E,e.value=v,a&&a===N){a=null;return}F=M?v.position-M.position:0}else r(E);i.forEach(Q=>{Q(t.value,N,{delta:F,type:Bm.pop,direction:F?F>0?Mg.forward:Mg.back:Mg.unknown})})};function h(){a=t.value}function d(v){i.push(v);const E=()=>{const N=i.indexOf(v);N>-1&&i.splice(N,1)};return s.push(E),E}function p(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(pt({},v.state,{scroll:zd()}),"")}}function _(){for(const v of s)v();s=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",p),document.removeEventListener("visibilitychange",p)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",p),document.addEventListener("visibilitychange",p),{pauseListeners:h,listen:d,destroy:_}}function WI(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?zd():null}}function D$(n){const{history:e,location:t}=window,r={value:lR(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(h,d,p){const _=n.indexOf("#"),v=_>-1?(t.host&&document.querySelector("base")?n:n.slice(_))+h:C$()+n+h;try{e[p?"replaceState":"pushState"](d,"",v),i.value=d}catch(E){console.error(E),t[p?"replace":"assign"](v)}}function a(h,d){s(h,pt({},e.state,WI(i.value.back,h,i.value.forward,!0),d,{position:i.value.position}),!0),r.value=h}function l(h,d){const p=pt({},i.value,e.state,{forward:h,scroll:zd()});s(p.current,p,!0),s(h,pt({},WI(r.value,h,null),{position:p.position+1},d),!1),r.value=h}return{location:r,state:i,push:l,replace:a}}function O$(n){n=g$(n);const e=D$(n),t=x$(n,e.state,e.location,e.replace);function r(s,a=!0){a||t.pauseListeners(),history.go(s)}const i=pt({location:"",base:n,go:r,createHref:_$.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function k$(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),O$(n)}let To=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var nn=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(nn||{});const N$={type:To.Static,value:""},V$=/[a-zA-Z0-9_]/;function L$(n){if(!n)return[[]];if(n==="/")return[[N$]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(E){throw new Error(`ERR (${t})/"${d}": ${E}`)}let t=nn.Static,r=t;const i=[];let s;function a(){s&&i.push(s),s=[]}let l=0,h,d="",p="";function _(){d&&(t===nn.Static?s.push({type:To.Static,value:d}):t===nn.Param||t===nn.ParamRegExp||t===nn.ParamRegExpEnd?(s.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:To.Param,value:d,regexp:p,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=h}for(;l<n.length;){if(h=n[l++],h==="\\"&&t!==nn.ParamRegExp){r=t,t=nn.EscapeNext;continue}switch(t){case nn.Static:h==="/"?(d&&_(),a()):h===":"?(_(),t=nn.Param):v();break;case nn.EscapeNext:v(),t=r;break;case nn.Param:h==="("?t=nn.ParamRegExp:V$.test(h)?v():(_(),t=nn.Static,h!=="*"&&h!=="?"&&h!=="+"&&l--);break;case nn.ParamRegExp:h===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+h:t=nn.ParamRegExpEnd:p+=h;break;case nn.ParamRegExpEnd:_(),t=nn.Static,h!=="*"&&h!=="?"&&h!=="+"&&l--,p="";break;default:e("Unknown state");break}}return t===nn.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),_(),a(),i}const HI="[^/]+?",M$={sensitive:!1,strict:!1,start:!0,end:!0};var qn=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(qn||{});const F$=/[.+*?^${}()[\]/\\]/g;function U$(n,e){const t=pt({},M$,e),r=[];let i=t.start?"^":"";const s=[];for(const d of n){const p=d.length?[]:[qn.Root];t.strict&&!d.length&&(i+="/");for(let _=0;_<d.length;_++){const v=d[_];let E=qn.Segment+(t.sensitive?qn.BonusCaseSensitive:0);if(v.type===To.Static)_||(i+="/"),i+=v.value.replace(F$,"\\$&"),E+=qn.Static;else if(v.type===To.Param){const{value:N,repeatable:M,optional:F,regexp:Q}=v;s.push({name:N,repeatable:M,optional:F});const j=Q||HI;if(j!==HI){E+=qn.BonusCustomRegExp;try{`${j}`}catch(G){throw new Error(`Invalid custom RegExp for param "${N}" (${j}): `+G.message)}}let z=M?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;_||(z=F&&d.length<2?`(?:/${z})`:"/"+z),F&&(z+="?"),i+=z,E+=qn.Dynamic,F&&(E+=qn.BonusOptional),M&&(E+=qn.BonusRepeatable),j===".*"&&(E+=qn.BonusWildcard)}p.push(E)}r.push(p)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=qn.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function l(d){const p=d.match(a),_={};if(!p)return null;for(let v=1;v<p.length;v++){const E=p[v]||"",N=s[v-1];_[N.name]=E&&N.repeatable?E.split("/"):E}return _}function h(d){let p="",_=!1;for(const v of n){(!_||!p.endsWith("/"))&&(p+="/"),_=!1;for(const E of v)if(E.type===To.Static)p+=E.value;else if(E.type===To.Param){const{value:N,repeatable:M,optional:F}=E,Q=N in d?d[N]:"";if(Ur(Q)&&!M)throw new Error(`Provided param "${N}" is an array but it is not repeatable (* or + modifiers)`);const j=Ur(Q)?Q.join("/"):Q;if(!j)if(F)v.length<2&&(p.endsWith("/")?p=p.slice(0,-1):_=!0);else throw new Error(`Missing required param "${N}"`);p+=j}}return p||"/"}return{re:a,score:r,keys:s,parse:l,stringify:h}}function B$(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===qn.Static+qn.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===qn.Static+qn.Segment?1:-1:0}function cR(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=B$(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(QI(r))return 1;if(QI(i))return-1}return i.length-r.length}function QI(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const q$={strict:!1,end:!0,sensitive:!1};function $$(n,e,t){const r=U$(L$(n.path),t),i=pt(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function j$(n,e){const t=[],r=new Map;e=qI(q$,e);function i(_){return r.get(_)}function s(_,v,E){const N=!E,M=YI(_);M.aliasOf=E&&E.record;const F=qI(e,_),Q=[M];if("alias"in _){const G=typeof _.alias=="string"?[_.alias]:_.alias;for(const J of G)Q.push(YI(pt({},M,{components:E?E.record.components:M.components,path:J,aliasOf:E?E.record:M})))}let j,z;for(const G of Q){const{path:J}=G;if(v&&J[0]!=="/"){const oe=v.record.path,R=oe[oe.length-1]==="/"?"":"/";G.path=v.record.path+(J&&R+J)}if(j=$$(G,v,F),E?E.alias.push(j):(z=z||j,z!==j&&z.alias.push(j),N&&_.name&&!XI(j)&&a(_.name)),hR(j)&&h(j),M.children){const oe=M.children;for(let R=0;R<oe.length;R++)s(oe[R],j,E&&E.children[R])}E=E||j}return z?()=>{a(z)}:Fl}function a(_){if(oR(_)){const v=r.get(_);v&&(r.delete(_),t.splice(t.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=t.indexOf(_);v>-1&&(t.splice(v,1),_.record.name&&r.delete(_.record.name),_.children.forEach(a),_.alias.forEach(a))}}function l(){return t}function h(_){const v=G$(_,t);t.splice(v,0,_),_.record.name&&!XI(_)&&r.set(_.record.name,_)}function d(_,v){let E,N={},M,F;if("name"in _&&_.name){if(E=r.get(_.name),!E)throw cu(Ft.MATCHER_NOT_FOUND,{location:_});F=E.record.name,N=pt(JI(v.params,E.keys.filter(z=>!z.optional).concat(E.parent?E.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),_.params&&JI(_.params,E.keys.map(z=>z.name))),M=E.stringify(N)}else if(_.path!=null)M=_.path,E=t.find(z=>z.re.test(M)),E&&(N=E.parse(M),F=E.record.name);else{if(E=v.name?r.get(v.name):t.find(z=>z.re.test(v.path)),!E)throw cu(Ft.MATCHER_NOT_FOUND,{location:_,currentLocation:v});F=E.record.name,N=pt({},v.params,_.params),M=E.stringify(N)}const Q=[];let j=E;for(;j;)Q.unshift(j.record),j=j.parent;return{name:F,path:M,params:N,matched:Q,meta:K$(Q)}}n.forEach(_=>s(_));function p(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:a,clearRoutes:p,getRoutes:l,getRecordMatcher:i}}function JI(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function YI(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:z$(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function z$(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function XI(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function K$(n){return n.reduce((e,t)=>pt(e,t.meta),{})}function G$(n,e){let t=0,r=e.length;for(;t!==r;){const s=t+r>>1;cR(n,e[s])<0?r=s:t=s+1}const i=W$(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function W$(n){let e=n;for(;e=e.parent;)if(hR(e)&&cR(n,e)===0)return e}function hR({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function ZI(n){const e=Lr(Kd),t=Lr(uR),r=Ue(()=>{const h=Ao(n.to);return e.resolve(h)}),i=Ue(()=>{const{matched:h}=r.value,{length:d}=h,p=h[d-1],_=t.matched;if(!p||!_.length)return-1;const v=_.findIndex(lu.bind(null,p));if(v>-1)return v;const E=eT(h[d-2]);return d>1&&eT(p)===E&&_[_.length-1].path!==E?_.findIndex(lu.bind(null,h[d-2])):v}),s=Ue(()=>i.value>-1&&X$(t.params,r.value.params)),a=Ue(()=>i.value>-1&&i.value===t.matched.length-1&&sR(t.params,r.value.params));function l(h={}){if(Y$(h)){const d=e[Ao(n.replace)?"replace":"push"](Ao(n.to)).catch(Fl);return n.viewTransition&&typeof document!="undefined"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:Ue(()=>r.value.href),isActive:s,isExactActive:a,navigate:l}}function H$(n){return n.length===1?n[0]:n}const Q$=a_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ZI,setup(n,{slots:e}){const t=Ko(ZI(n)),{options:r}=Lr(Kd),i=Ue(()=>({[tT(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[tT(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&H$(e.default(t));return n.custom?s:Fe("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),J$=Q$;function Y$(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function X$(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Ur(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function eT(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const tT=(n,e,t)=>n!=null?n:e!=null?e:t,Z$=a_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=Lr($m),i=Ue(()=>n.route||r.value),s=Lr(GI,0),a=Ue(()=>{let d=Ao(s);const{matched:p}=i.value;let _;for(;(_=p[d])&&!_.components;)d++;return d}),l=Ue(()=>i.value.matched[a.value]);sf(GI,Ue(()=>a.value+1)),sf(R$,l),sf($m,i);const h=xo();return $a(()=>[h.value,l.value,n.name],([d,p,_],[v,E,N])=>{p&&(p.instances[_]=d,E&&E!==p&&d&&d===v&&(p.leaveGuards.size||(p.leaveGuards=E.leaveGuards),p.updateGuards.size||(p.updateGuards=E.updateGuards))),d&&p&&(!E||!lu(p,E)||!v)&&(p.enterCallbacks[_]||[]).forEach(M=>M(d))},{flush:"post"}),()=>{const d=i.value,p=n.name,_=l.value,v=_&&_.components[p];if(!v)return nT(t.default,{Component:v,route:d});const E=_.props[p],N=E?E===!0?d.params:typeof E=="function"?E(d):E:null,F=Fe(v,pt({},N,e,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(_.instances[p]=null)},ref:h}));return nT(t.default,{Component:F,route:d})||F}}});function nT(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const e9=Z$;function t9(n){const e=j$(n.routes,n),t=n.parseQuery||A$,r=n.stringifyQuery||KI,i=n.history,s=al(),a=al(),l=al(),h=Ak(fs);let d=fs;Ma&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Vg.bind(null,ee=>""+ee),_=Vg.bind(null,u$),v=Vg.bind(null,lc);function E(ee,_e){let de,be;return oR(ee)?(de=e.getRecordMatcher(ee),be=_e):be=ee,e.addRoute(be,de)}function N(ee){const _e=e.getRecordMatcher(ee);_e&&e.removeRoute(_e)}function M(){return e.getRoutes().map(ee=>ee.record)}function F(ee){return!!e.getRecordMatcher(ee)}function Q(ee,_e){if(_e=pt({},_e||h.value),typeof ee=="string"){const B=Lg(t,ee,_e.path),Z=e.resolve({path:B.path},_e),re=i.createHref(B.fullPath);return pt(B,Z,{params:v(Z.params),hash:lc(B.hash),redirectedFrom:void 0,href:re})}let de;if(ee.path!=null)de=pt({},ee,{path:Lg(t,ee.path,_e.path).path});else{const B=pt({},ee.params);for(const Z in B)B[Z]==null&&delete B[Z];de=pt({},ee,{params:_(B)}),_e.params=_(_e.params)}const be=e.resolve(de,_e),$e=ee.hash||"";be.params=p(v(be.params));const C=h$(r,pt({},ee,{hash:s$($e),path:be.path})),V=i.createHref(C);return pt({fullPath:C,hash:$e,query:r===KI?S$(ee.query):ee.query||{}},be,{redirectedFrom:void 0,href:V})}function j(ee){return typeof ee=="string"?Lg(t,ee,h.value.path):pt({},ee)}function z(ee,_e){if(d!==ee)return cu(Ft.NAVIGATION_CANCELLED,{from:_e,to:ee})}function G(ee){return R(ee)}function J(ee){return G(pt(j(ee),{replace:!0}))}function oe(ee,_e){const de=ee.matched[ee.matched.length-1];if(de&&de.redirect){const{redirect:be}=de;let $e=typeof be=="function"?be(ee,_e):be;return typeof $e=="string"&&($e=$e.includes("?")||$e.includes("#")?$e=j($e):{path:$e},$e.params={}),pt({query:ee.query,hash:ee.hash,params:$e.path!=null?{}:ee.params},$e)}}function R(ee,_e){const de=d=Q(ee),be=h.value,$e=ee.state,C=ee.force,V=ee.replace===!0,B=oe(de,be);if(B)return R(pt(j(B),{state:typeof B=="object"?pt({},$e,B.state):$e,force:C,replace:V}),_e||de);const Z=de;Z.redirectedFrom=_e;let re;return!C&&f$(r,be,de)&&(re=cu(Ft.NAVIGATION_DUPLICATED,{to:Z,from:be}),Dt(be,be,!0,!1)),(re?Promise.resolve(re):x(Z,be)).catch(Y=>Ii(Y)?Ii(Y,Ft.NAVIGATION_GUARD_REDIRECT)?Y:wn(Y):Be(Y,Z,be)).then(Y=>{if(Y){if(Ii(Y,Ft.NAVIGATION_GUARD_REDIRECT))return R(pt({replace:V},j(Y.to),{state:typeof Y.to=="object"?pt({},$e,Y.to.state):$e,force:C}),_e||Z)}else Y=O(Z,be,!0,V,$e);return k(Z,be,Y),Y})}function S(ee,_e){const de=z(ee,_e);return de?Promise.reject(de):Promise.resolve()}function A(ee){const _e=Br.values().next().value;return _e&&typeof _e.runWithContext=="function"?_e.runWithContext(ee):ee()}function x(ee,_e){let de;const[be,$e,C]=P$(ee,_e);de=Fg(be.reverse(),"beforeRouteLeave",ee,_e);for(const B of be)B.leaveGuards.forEach(Z=>{de.push(ys(Z,ee,_e))});const V=S.bind(null,ee,_e);return de.push(V),Xt(de).then(()=>{de=[];for(const B of s.list())de.push(ys(B,ee,_e));return de.push(V),Xt(de)}).then(()=>{de=Fg($e,"beforeRouteUpdate",ee,_e);for(const B of $e)B.updateGuards.forEach(Z=>{de.push(ys(Z,ee,_e))});return de.push(V),Xt(de)}).then(()=>{de=[];for(const B of C)if(B.beforeEnter)if(Ur(B.beforeEnter))for(const Z of B.beforeEnter)de.push(ys(Z,ee,_e));else de.push(ys(B.beforeEnter,ee,_e));return de.push(V),Xt(de)}).then(()=>(ee.matched.forEach(B=>B.enterCallbacks={}),de=Fg(C,"beforeRouteEnter",ee,_e,A),de.push(V),Xt(de))).then(()=>{de=[];for(const B of a.list())de.push(ys(B,ee,_e));return de.push(V),Xt(de)}).catch(B=>Ii(B,Ft.NAVIGATION_CANCELLED)?B:Promise.reject(B))}function k(ee,_e,de){l.list().forEach(be=>A(()=>be(ee,_e,de)))}function O(ee,_e,de,be,$e){const C=z(ee,_e);if(C)return C;const V=_e===fs,B=Ma?history.state:{};de&&(be||V?i.replace(ee.fullPath,pt({scroll:V&&B&&B.scroll},$e)):i.push(ee.fullPath,$e)),h.value=ee,Dt(ee,_e,de,V),wn()}let P;function ce(){P||(P=i.listen((ee,_e,de)=>{if(!Ht.listening)return;const be=Q(ee),$e=oe(be,Ht.currentRoute.value);if($e){R(pt($e,{replace:!0,force:!0}),be).catch(Fl);return}d=be;const C=h.value;Ma&&w$(zI(C.fullPath,de.delta),zd()),x(be,C).catch(V=>Ii(V,Ft.NAVIGATION_ABORTED|Ft.NAVIGATION_CANCELLED)?V:Ii(V,Ft.NAVIGATION_GUARD_REDIRECT)?(R(pt(j(V.to),{force:!0}),be).then(B=>{Ii(B,Ft.NAVIGATION_ABORTED|Ft.NAVIGATION_DUPLICATED)&&!de.delta&&de.type===Bm.pop&&i.go(-1,!1)}).catch(Fl),Promise.reject()):(de.delta&&i.go(-de.delta,!1),Be(V,be,C))).then(V=>{V=V||O(be,C,!1),V&&(de.delta&&!Ii(V,Ft.NAVIGATION_CANCELLED)?i.go(-de.delta,!1):de.type===Bm.pop&&Ii(V,Ft.NAVIGATION_ABORTED|Ft.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),k(be,C,V)}).catch(Fl)}))}let qe=al(),Ye=al(),Te;function Be(ee,_e,de){wn(ee);const be=Ye.list();return be.length?be.forEach($e=>$e(ee,_e,de)):console.error(ee),Promise.reject(ee)}function Vn(){return Te&&h.value!==fs?Promise.resolve():new Promise((ee,_e)=>{qe.add([ee,_e])})}function wn(ee){return Te||(Te=!ee,ce(),qe.list().forEach(([_e,de])=>ee?de(ee):_e()),qe.reset()),ee}function Dt(ee,_e,de,be){const{scrollBehavior:$e}=n;if(!Ma||!$e)return Promise.resolve();const C=!de&&E$(zI(ee.fullPath,0))||(be||!de)&&history.state&&history.state.scroll||null;return i_().then(()=>$e(ee,_e,C)).then(V=>V&&v$(V)).catch(V=>Be(V,ee,_e))}const Rt=ee=>i.go(ee);let Pt;const Br=new Set,Ht={currentRoute:h,listening:!0,addRoute:E,removeRoute:N,clearRoutes:e.clearRoutes,hasRoute:F,getRoutes:M,resolve:Q,options:n,push:G,replace:J,go:Rt,back:()=>Rt(-1),forward:()=>Rt(1),beforeEach:s.add,beforeResolve:a.add,afterEach:l.add,onError:Ye.add,isReady:Vn,install(ee){ee.component("RouterLink",J$),ee.component("RouterView",e9),ee.config.globalProperties.$router=Ht,Object.defineProperty(ee.config.globalProperties,"$route",{enumerable:!0,get:()=>Ao(h)}),Ma&&!Pt&&h.value===fs&&(Pt=!0,G(i.location).catch(be=>{}));const _e={};for(const be in fs)Object.defineProperty(_e,be,{get:()=>h.value[be],enumerable:!0});ee.provide(Kd,Ht),ee.provide(uR,BT(_e)),ee.provide($m,h);const de=ee.unmount;Br.add(ee),ee.unmount=function(){Br.delete(ee),Br.size<1&&(d=fs,P&&P(),P=null,h.value=fs,Pt=!1,Te=!1),de()}}};function Xt(ee){return ee.reduce((_e,de)=>_e.then(()=>A(de)),Promise.resolve())}return Ht}function E6(){return Lr(Kd)}const n9=(function(){const e=typeof document!="undefined"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),r9=function(n){return"/kbalance_quasar_pwa/"+n},rT={},sr=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let h=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=h(t.map(d=>{if(d=r9(d),d in rT)return;rT[d]=!0;const p=d.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${_}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":n9,p||(v.as="script"),v.crossOrigin="",v.href=d,l&&v.setAttribute("nonce",l),document.head.appendChild(v),p)return new Promise((E,N)=>{v.addEventListener("load",E),v.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},i9=[{path:"/",component:()=>sr(()=>import("./MainLayout-DOEpRWtI.js"),__vite__mapDeps([0,1,2,3])),children:[{path:"/",name:"IndexPage",component:()=>sr(()=>import("./IndexPage-Cnk5Di45.js"),__vite__mapDeps([4,5,6,7,8,9,10,11,2,1,12,13,14,15,16,17,18,19,20,21,3,22,23])),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/newSheetWizard",name:"NewSheetWizardPage",component:()=>sr(()=>import("./NewSheetWizardPage-0BlQ25N8.js"),__vite__mapDeps([24,5,11,2,10,7,25,26,6,8,9,1,14,15,21,18,19,27,22])),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/sheet",name:"SheetPage",component:()=>sr(()=>import("./SheetPage-Ch2sRGLb.js"),__vite__mapDeps([28,29,6,7,8,9,10,11,2,1,27,22,30,31,32,33,14,15])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/convert",name:"ConvertPage",component:()=>sr(()=>import("./ConvertPage-C0opt5fx.js"),__vite__mapDeps([34,29,11,2,10,7,27,6,8,9,1,22,35,30,31,32,33,14,15])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/settle",name:"SettlePage",component:()=>sr(()=>import("./SettlePage-B1Cxl3jE.js"),__vite__mapDeps([36,29,11,2,10,7,27,6,8,9,1,22,35,30,31,32,33,14,15])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/conversionRatesSettings",name:"ConversionRatesSettingsPage",component:()=>sr(()=>import("./ConversionRatesSettingsPage-D9GIEqnV.js"),__vite__mapDeps([37,5,11,2,10,7,6,8,9,1,19,13,30,38,39,35,33])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!1}},{path:"/sheet/people",name:"PeoplePage",component:()=>sr(()=>import("./PeoplePage-B-DVcpcB.js"),__vite__mapDeps([40,29,11,2,7,26,6,8,9,10,1,14,15,21,18,19,27,22])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/transaction",name:"TransactionPage",component:()=>sr(()=>import("./TransactionPage-CLSEcUjp.js"),__vite__mapDeps([41,29,11,2,10,7,6,8,9,1,27,22,38,30,32,33,35])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/login",name:"LoginPage",component:()=>sr(()=>import("./LoginPage-C10rcg6a.js"),__vite__mapDeps([42,10,7,12,18,25])),meta:{requiresFirebase:!0}},{path:"/settings",name:"SettingsPage",component:()=>sr(()=>import("./SettingsPage--fVB59tH.js"),__vite__mapDeps([43,29,11,2,10,7,18,17,19,9,1,20,21]))},{path:"/landing",name:"LandingPage",component:()=>sr(()=>import("./LandingPage-B1GxfynZ.js"),__vite__mapDeps([44,29,11,2,16,15,8,7,39,33,20]))}]},{path:"/:catchAll(.*)*",component:()=>sr(()=>import("./ErrorNotFound-C49cSlH-.js"),[])}],Ug=()=>{const e=t9({scrollBehavior:()=>({left:0,top:0}),routes:i9,history:k$("/kbalance_quasar_pwa/")}),t=QS();let r=!0;return e.beforeEach(async(i,s,a)=>{r&&(await t.init(),r=!1),i.matched.some(l=>l.meta.requiresFirebase)&&!t.firebaseReady?a({name:"SettingsPage"}):i.matched.some(l=>l.meta.requiresAuth)&&!t.isReady()?a({name:"LoginPage"}):i.matched.some(l=>l.meta.requiresSheet)&&!t.isSheet?a({name:"IndexPage"}):a()}),e};async function s9(n,e){const t=n(F4);t.use(eL,e);const r=typeof Ng=="function"?await Ng({}):Ng;t.use(r);const i=Go(typeof Ug=="function"?await Ug({store:r}):Ug);return r.use(({store:s})=>{s.router=i}),{app:t,store:r,router:i}}const jm={xs:18,sm:24,md:32,lg:38,xl:46},py={size:String};function gy(n,e=jm){return Ue(()=>n.size!==void 0?{fontSize:n.size in e?`${e[n.size]}px`:n.size}:null)}function o9(n,e){return n!==void 0&&n()||e}function I6(n,e){if(n!==void 0){const t=n();if(t!=null)return t.slice()}return e}function wl(n,e){return n!==void 0?e.concat(n()):e}function a9(n,e){return n===void 0?e:e!==void 0?e.concat(n()):n()}function T6(n,e,t,r,i,s){e.key=r+i;const a=Fe(n,e,t);return i===!0?HT(a,s()):a}const iT="0 0 24 24",Bg=n=>n,qg=n=>`ionicons ${n}`,fR={"mdi-":n=>`mdi ${n}`,"icon-":Bg,"bt-":n=>`bt ${n}`,"eva-":n=>`eva ${n}`,"ion-md":qg,"ion-ios":qg,"ion-logo":qg,"iconfont ":Bg,"ti-":n=>`themify-icon ${n}`,"bi-":n=>`bootstrap-icons ${n}`,"i-":Bg},dR={o_:"-outlined",r_:"-round",s_:"-sharp"},pR={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},u9=new RegExp("^("+Object.keys(fR).join("|")+")"),l9=new RegExp("^("+Object.keys(dR).join("|")+")"),sT=new RegExp("^("+Object.keys(pR).join("|")+")"),c9=/^[Mm]\s?[-+]?\.?\d/,h9=/^img:/,f9=/^svguse:/,d9=/^ion-/,p9=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,od=gc({name:"QIcon",props:{...py,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(n,{slots:e}){const{proxy:{$q:t}}=Fs(),r=gy(n),i=Ue(()=>"q-icon"+(n.left===!0?" on-left":"")+(n.right===!0?" on-right":"")+(n.color!==void 0?` text-${n.color}`:"")),s=Ue(()=>{let a,l=n.name;if(l==="none"||!l)return{none:!0};if(t.iconMapFn!==null){const p=t.iconMapFn(l);if(p!==void 0)if(p.icon!==void 0){if(l=p.icon,l==="none"||!l)return{none:!0}}else return{cls:p.cls,content:p.content!==void 0?p.content:" "}}if(c9.test(l)===!0){const[p,_=iT]=l.split("|");return{svg:!0,viewBox:_,nodes:p.split("&&").map(v=>{const[E,N,M]=v.split("@@");return Fe("path",{style:N,d:E,transform:M})})}}if(h9.test(l)===!0)return{img:!0,src:l.substring(4)};if(f9.test(l)===!0){const[p,_=iT]=l.split("|");return{svguse:!0,src:p.substring(7),viewBox:_}}let h=" ";const d=l.match(u9);if(d!==null)a=fR[d[1]](l);else if(p9.test(l)===!0)a=l;else if(d9.test(l)===!0)a=`ionicons ion-${t.platform.is.ios===!0?"ios":"md"}${l.substring(3)}`;else if(sT.test(l)===!0){a="notranslate material-symbols";const p=l.match(sT);p!==null&&(l=l.substring(6),a+=pR[p[1]]),h=l}else{a="notranslate material-icons";const p=l.match(l9);p!==null&&(l=l.substring(2),a+=dR[p[1]]),h=l}return{cls:a,content:h}});return()=>{const a={class:i.value,style:r.value,"aria-hidden":"true"};return s.value.none===!0?Fe(n.tag,a,o9(e.default)):s.value.img===!0?Fe(n.tag,a,wl(e.default,[Fe("img",{src:s.value.src})])):s.value.svg===!0?Fe(n.tag,a,wl(e.default,[Fe("svg",{viewBox:s.value.viewBox||"0 0 24 24"},s.value.nodes)])):s.value.svguse===!0?Fe(n.tag,a,wl(e.default,[Fe("svg",{viewBox:s.value.viewBox},[Fe("use",{"xlink:href":s.value.src})])])):(s.value.cls!==void 0&&(a.class+=" "+s.value.cls),Fe(n.tag,a,wl(e.default,[s.value.content])))}}}),g9=gc({name:"QAvatar",props:{...py,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(n,{slots:e}){const t=gy(n),r=Ue(()=>"q-avatar"+(n.color?` bg-${n.color}`:"")+(n.textColor?` text-${n.textColor} q-chip--colored`:"")+(n.square===!0?" q-avatar--square":n.rounded===!0?" rounded-borders":"")),i=Ue(()=>n.fontSize?{fontSize:n.fontSize}:null);return()=>{const s=n.icon!==void 0?[Fe(od,{name:n.icon})]:void 0;return Fe("div",{class:r.value,style:t.value},[Fe("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},a9(e.default,s))])}}}),m9={size:{type:[String,Number],default:"1em"},color:String};function _9(n){return{cSize:Ue(()=>n.size in jm?`${jm[n.size]}px`:n.size),classes:Ue(()=>"q-spinner"+(n.color?` text-${n.color}`:""))}}const gR=gc({name:"QSpinner",props:{...m9,thickness:{type:Number,default:5}},setup(n){const{cSize:e,classes:t}=_9(n);return()=>Fe("svg",{class:t.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Fe("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":n.thickness,"stroke-miterlimit":"10"})])}});function b6(n){return n===window?window.innerHeight:n.getBoundingClientRect().height}function y9(n,e){const t=n.style;for(const r in e)t[r]=e[r]}function A6(n){if(n==null)return;if(typeof n=="string")try{return document.querySelector(n)||void 0}catch{return}const e=Ao(n);if(e)return e.$el||e}function S6(n,e){if(n==null||n.contains(e)===!0)return!0;for(let t=n.nextElementSibling;t!==null;t=t.nextElementSibling)if(t.contains(e))return!0;return!1}function v9(n,e=250){let t=!1,r;return function(){return t===!1&&(t=!0,setTimeout(()=>{t=!1},e),r=n.apply(this,arguments)),r}}function oT(n,e,t,r){t.modifiers.stop===!0&&F0(n);const i=t.modifiers.color;let s=t.modifiers.center;s=s===!0||r===!0;const a=document.createElement("span"),l=document.createElement("span"),h=OV(n),{left:d,top:p,width:_,height:v}=e.getBoundingClientRect(),E=Math.sqrt(_*_+v*v),N=E/2,M=`${(_-E)/2}px`,F=s?M:`${h.left-d-N}px`,Q=`${(v-E)/2}px`,j=s?Q:`${h.top-p-N}px`;l.className="q-ripple__inner",y9(l,{height:`${E}px`,width:`${E}px`,transform:`translate3d(${F},${j},0) scale3d(.2,.2,1)`,opacity:0}),a.className=`q-ripple${i?" text-"+i:""}`,a.setAttribute("dir","ltr"),a.appendChild(l),e.appendChild(a);const z=()=>{a.remove(),clearTimeout(G)};t.abort.push(z);let G=setTimeout(()=>{l.classList.add("q-ripple__inner--enter"),l.style.transform=`translate3d(${M},${Q},0) scale3d(1,1,1)`,l.style.opacity=.2,G=setTimeout(()=>{l.classList.remove("q-ripple__inner--enter"),l.classList.add("q-ripple__inner--leave"),l.style.opacity=0,G=setTimeout(()=>{a.remove(),t.abort.splice(t.abort.indexOf(z),1)},275)},250)},50)}function aT(n,{modifiers:e,value:t,arg:r}){const i=Object.assign({},n.cfg.ripple,e,t);n.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||r,keyCodes:[].concat(i.keyCodes||13)}}const w9=DV({name:"ripple",beforeMount(n,e){const t=e.instance.$.appContext.config.globalProperties.$q.config||{};if(t.ripple===!1)return;const r={cfg:t,enabled:e.value!==!1,modifiers:{},abort:[],start(i){r.enabled===!0&&i.qSkipRipple!==!0&&i.type===(r.modifiers.early===!0?"pointerdown":"click")&&oT(i,n,r,i.qKeyEvent===!0)},keystart:v9(i=>{r.enabled===!0&&i.qSkipRipple!==!0&&im(i,r.modifiers.keyCodes)===!0&&i.type===`key${r.modifiers.early===!0?"down":"up"}`&&oT(i,n,r,!0)},300)};aT(r,e),n.__qripple=r,kV(r,"main",[[n,"pointerdown","start","passive"],[n,"click","start","passive"],[n,"keydown","keystart","passive"],[n,"keyup","keystart","passive"]])},updated(n,e){if(e.oldValue!==e.value){const t=n.__qripple;t!==void 0&&(t.enabled=e.value!==!1,t.enabled===!0&&Object(e.value)===e.value&&aT(t,e))}},beforeUnmount(n){const e=n.__qripple;e!==void 0&&(e.abort.forEach(t=>{t()}),NV(e,"main"),delete n._qripple)}}),mR={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},E9=Object.keys(mR),I9={align:{type:String,validator:n=>E9.includes(n)}};function T9(n){return Ue(()=>{const e=n.align===void 0?n.vertical===!0?"stretch":"left":n.align;return`${n.vertical===!0?"items":"justify"}-${mR[e]}`})}function R6(n){if(Object(n.$parent)===n.$parent)return n.$parent;let{parent:e}=n.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function _R(n,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(t=>{_R(n,t)}):n.add(e)}function P6(n){const e=new Set;return n.forEach(t=>{_R(e,t)}),Array.from(e)}function b9(n){return n.appContext.config.globalProperties.$router!==void 0}function C6(n){return n.isUnmounted===!0||n.isDeactivated===!0}function uT(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}function lT(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function A9(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(Array.isArray(i)===!1||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function cT(n,e){return Array.isArray(e)===!0?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function S9(n,e){return Array.isArray(n)===!0?cT(n,e):Array.isArray(e)===!0?cT(e,n):n===e}function R9(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(S9(n[t],e[t])===!1)return!1;return!0}const yR={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},x6={...yR,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function P9({fallbackTag:n,useDisableForRouterLinkProps:e=!0}={}){const t=Fs(),{props:r,proxy:i,emit:s}=t,a=b9(t),l=Ue(()=>r.disable!==!0&&r.href!==void 0),h=Ue(e===!0?()=>a===!0&&r.disable!==!0&&l.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>a===!0&&l.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),d=Ue(()=>h.value===!0?j(r.to):null),p=Ue(()=>d.value!==null),_=Ue(()=>l.value===!0||p.value===!0),v=Ue(()=>r.type==="a"||_.value===!0?"a":r.tag||n||"div"),E=Ue(()=>l.value===!0?{href:r.href,target:r.target}:p.value===!0?{href:d.value.href,target:r.target}:{}),N=Ue(()=>{if(p.value===!1)return-1;const{matched:J}=d.value,{length:oe}=J,R=J[oe-1];if(R===void 0)return-1;const S=i.$route.matched;if(S.length===0)return-1;const A=S.findIndex(lT.bind(null,R));if(A!==-1)return A;const x=uT(J[oe-2]);return oe>1&&uT(R)===x&&S[S.length-1].path!==x?S.findIndex(lT.bind(null,J[oe-2])):A}),M=Ue(()=>p.value===!0&&N.value!==-1&&A9(i.$route.params,d.value.params)),F=Ue(()=>M.value===!0&&N.value===i.$route.matched.length-1&&R9(i.$route.params,d.value.params)),Q=Ue(()=>p.value===!0?F.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":M.value===!0?` ${r.activeClass}`:"":"");function j(J){try{return i.$router.resolve(J)}catch{}return null}function z(J,{returnRouterError:oe,to:R=r.to,replace:S=r.replace}={}){if(r.disable===!0)return J.preventDefault(),Promise.resolve(!1);if(J.metaKey||J.altKey||J.ctrlKey||J.shiftKey||J.button!==void 0&&J.button!==0||r.target==="_blank")return Promise.resolve(!1);J.preventDefault();const A=i.$router[S===!0?"replace":"push"](R);return oe===!0?A:A.then(()=>{}).catch(()=>{})}function G(J){if(p.value===!0){const oe=R=>z(J,R);s("click",J,oe),J.defaultPrevented!==!0&&oe()}else s("click",J)}return{hasRouterLink:p,hasHrefLink:l,hasLink:_,linkTag:v,resolvedLink:d,linkIsActive:M,linkIsExactActive:F,linkClass:Q,linkAttrs:E,getLink:j,navigateToRouterLink:z,navigateOnClick:G}}const hT={none:0,xs:4,sm:8,md:16,lg:24,xl:32},C9={xs:8,sm:10,md:14,lg:20,xl:24},x9=["button","submit","reset"],D9=/[^\s]\/[^\s]/,O9=["flat","outline","push","unelevated"];function vR(n,e){return n.flat===!0?"flat":n.outline===!0?"outline":n.push===!0?"push":n.unelevated===!0?"unelevated":e}function D6(n){const e=vR(n);return e!==void 0?{[e]:!0}:{}}const k9={...py,...yR,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...O9.reduce((n,e)=>(n[e]=Boolean)&&n,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...I9.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},N9={...k9,round:Boolean};function V9(n){const e=gy(n,C9),t=T9(n),{hasRouterLink:r,hasLink:i,linkTag:s,linkAttrs:a,navigateOnClick:l}=P9({fallbackTag:"button"}),h=Ue(()=>{const F=n.fab===!1&&n.fabMini===!1?e.value:{};return n.padding!==void 0?Object.assign({},F,{padding:n.padding.split(/\s+/).map(Q=>Q in hT?hT[Q]+"px":Q).join(" "),minWidth:"0",minHeight:"0"}):F}),d=Ue(()=>n.rounded===!0||n.fab===!0||n.fabMini===!0),p=Ue(()=>n.disable!==!0&&n.loading!==!0),_=Ue(()=>p.value===!0?n.tabindex||0:-1),v=Ue(()=>vR(n,"standard")),E=Ue(()=>{const F={tabindex:_.value};return i.value===!0?Object.assign(F,a.value):x9.includes(n.type)===!0&&(F.type=n.type),s.value==="a"?(n.disable===!0?F["aria-disabled"]="true":F.href===void 0&&(F.role="button"),r.value!==!0&&D9.test(n.type)===!0&&(F.type=n.type)):n.disable===!0&&(F.disabled="",F["aria-disabled"]="true"),n.loading===!0&&n.percentage!==void 0&&Object.assign(F,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.percentage}),F}),N=Ue(()=>{let F;n.color!==void 0?n.flat===!0||n.outline===!0?F=`text-${n.textColor||n.color}`:F=`bg-${n.color} text-${n.textColor||"white"}`:n.textColor&&(F=`text-${n.textColor}`);const Q=n.round===!0?"round":`rectangle${d.value===!0?" q-btn--rounded":n.square===!0?" q-btn--square":""}`;return`q-btn--${v.value} q-btn--${Q}`+(F!==void 0?" "+F:"")+(p.value===!0?" q-btn--actionable q-focusable q-hoverable":n.disable===!0?" disabled":"")+(n.fab===!0?" q-btn--fab":n.fabMini===!0?" q-btn--fab-mini":"")+(n.noCaps===!0?" q-btn--no-uppercase":"")+(n.dense===!0?" q-btn--dense":"")+(n.stretch===!0?" no-border-radius self-stretch":"")+(n.glossy===!0?" glossy":"")+(n.square?" q-btn--square":"")}),M=Ue(()=>t.value+(n.stack===!0?" column":" row")+(n.noWrap===!0?" no-wrap text-no-wrap":"")+(n.loading===!0?" q-btn__content--hidden":""));return{classes:N,style:h,innerClasses:M,attributes:E,hasLink:i,linkTag:s,navigateOnClick:l,isActionable:p}}const{passiveCapture:br}=Oo;let Pa=null,Ca=null,xa=null;const L9=gc({name:"QBtn",props:{...N9,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(n,{slots:e,emit:t}){const{proxy:r}=Fs(),{classes:i,style:s,innerClasses:a,attributes:l,hasLink:h,linkTag:d,navigateOnClick:p,isActionable:_}=V9(n),v=xo(null),E=xo(null);let N=null,M,F=null;const Q=Ue(()=>n.label!==void 0&&n.label!==null&&n.label!==""),j=Ue(()=>n.disable===!0||n.ripple===!1?!1:{keyCodes:h.value===!0?[13,32]:[13],...n.ripple===!0?{}:n.ripple}),z=Ue(()=>({center:n.round})),G=Ue(()=>{const ce=Math.max(0,Math.min(100,n.percentage));return ce>0?{transition:"transform 0.6s",transform:`translateX(${ce-100}%)`}:{}}),J=Ue(()=>{if(n.loading===!0)return{onMousedown:P,onTouchstart:P,onClick:P,onKeydown:P,onKeyup:P};if(_.value===!0){const ce={onClick:R,onKeydown:S,onMousedown:x};if(r.$q.platform.has.touch===!0){const qe=n.onTouchstart!==void 0?"":"Passive";ce[`onTouchstart${qe}`]=A}return ce}return{onClick:Ea}}),oe=Ue(()=>({ref:v,class:"q-btn q-btn-item non-selectable no-outline "+i.value,style:s.value,...l.value,...J.value}));function R(ce){if(v.value!==null){if(ce!==void 0){if(ce.defaultPrevented===!0)return;const qe=document.activeElement;if(n.type==="submit"&&qe!==document.body&&v.value.contains(qe)===!1&&qe.contains(v.value)===!1){ce.qAvoidFocus!==!0&&v.value.focus();const Ye=()=>{var Te;document.removeEventListener("keydown",Ea,!0),document.removeEventListener("keyup",Ye,br),(Te=v.value)==null||Te.removeEventListener("blur",Ye,br)};document.addEventListener("keydown",Ea,!0),document.addEventListener("keyup",Ye,br),v.value.addEventListener("blur",Ye,br)}}p(ce)}}function S(ce){v.value!==null&&(t("keydown",ce),im(ce,[13,32])===!0&&Ca!==v.value&&(Ca!==null&&O(),ce.defaultPrevented!==!0&&(ce.qAvoidFocus!==!0&&v.value.focus(),Ca=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("keyup",k,!0),v.value.addEventListener("blur",k,br)),Ea(ce)))}function A(ce){v.value!==null&&(t("touchstart",ce),ce.defaultPrevented!==!0&&(Pa!==v.value&&(Pa!==null&&O(),Pa=v.value,N=ce.target,N.addEventListener("touchcancel",k,br),N.addEventListener("touchend",k,br)),M=!0,F!==null&&clearTimeout(F),F=setTimeout(()=>{F=null,M=!1},200)))}function x(ce){v.value!==null&&(ce.qSkipRipple=M===!0,t("mousedown",ce),ce.defaultPrevented!==!0&&xa!==v.value&&(xa!==null&&O(),xa=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("mouseup",k,br)))}function k(ce){if(v.value!==null&&!((ce==null?void 0:ce.type)==="blur"&&document.activeElement===v.value)){if((ce==null?void 0:ce.type)==="keyup"){if(Ca===v.value&&im(ce,[13,32])===!0){const qe=new MouseEvent("click",ce);qe.qKeyEvent=!0,ce.defaultPrevented===!0&&rm(qe),ce.cancelBubble===!0&&F0(qe),v.value.dispatchEvent(qe),Ea(ce),ce.qKeyEvent=!0}t("keyup",ce)}O()}}function O(ce){var Ye,Te;const qe=E.value;ce!==!0&&(Pa===v.value||xa===v.value)&&qe!==null&&qe!==document.activeElement&&(qe.setAttribute("tabindex",-1),qe.focus()),Pa===v.value&&(N!==null&&(N.removeEventListener("touchcancel",k,br),N.removeEventListener("touchend",k,br)),Pa=N=null),xa===v.value&&(document.removeEventListener("mouseup",k,br),xa=null),Ca===v.value&&(document.removeEventListener("keyup",k,!0),(Ye=v.value)==null||Ye.removeEventListener("blur",k,br),Ca=null),(Te=v.value)==null||Te.classList.remove("q-btn--active")}function P(ce){Ea(ce),ce.qSkipRipple=!0}return dc(()=>{O(!0)}),Object.assign(r,{click:ce=>{_.value===!0&&R(ce)}}),()=>{let ce=[];n.icon!==void 0&&ce.push(Fe(od,{name:n.icon,left:n.stack!==!0&&Q.value===!0,role:"img"})),Q.value===!0&&ce.push(Fe("span",{class:"block"},[n.label])),ce=wl(e.default,ce),n.iconRight!==void 0&&n.round===!1&&ce.push(Fe(od,{name:n.iconRight,right:n.stack!==!0&&Q.value===!0,role:"img"}));const qe=[Fe("span",{class:"q-focus-helper",ref:E})];return n.loading===!0&&n.percentage!==void 0&&qe.push(Fe("span",{class:"q-btn__progress absolute-full overflow-hidden"+(n.darkPercentage===!0?" q-btn__progress--dark":"")},[Fe("span",{class:"q-btn__progress-indicator fit block",style:G.value})])),qe.push(Fe("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+a.value},ce)),n.loading!==null&&qe.push(Fe(JN,{name:"q-transition--fade"},()=>n.loading===!0?[Fe("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Fe(gR)])]:null)),HT(Fe(d.value,oe.value,qe),[[w9,j.value,void 0,z.value]])}}});let M9=1,F9=document.body;function U9(n,e){const t=document.createElement("div");if(t.id=e!==void 0?`q-portal--${e}--${M9++}`:n,Uf.globalNodes!==void 0){const r=Uf.globalNodes.class;r!==void 0&&(t.className=r)}return F9.appendChild(t),t}function O6(n){n.remove()}let B9=0;const Ef={},If={},Nr={},wR={},q9=/^\s*$/,ER=[],$9=[void 0,null,!0,!1,""],my=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],j9=["top-left","top-right","bottom-left","bottom-right"],El={positive:{icon:n=>n.iconSet.type.positive,color:"positive"},negative:{icon:n=>n.iconSet.type.negative,color:"negative"},warning:{icon:n=>n.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:n=>n.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function IR(n,e,t){var h;if(!n)return ul("parameter required");let r;const i={textColor:"white"};if(n.ignoreDefaults!==!0&&Object.assign(i,Ef),Gl(n)===!1&&(i.type&&Object.assign(i,El[i.type]),n={message:n}),Object.assign(i,El[n.type||i.type],n),typeof i.icon=="function"&&(i.icon=i.icon(e)),i.spinner?(i.spinner===!0&&(i.spinner=gR),i.spinner=Go(i.spinner)):i.spinner=!1,i.meta={hasMedia:!!(i.spinner!==!1||i.icon||i.avatar),hasText:fT(i.message)||fT(i.caption)},i.position){if(my.includes(i.position)===!1)return ul("wrong position",n)}else i.position="bottom";if($9.includes(i.timeout)===!0)i.timeout=5e3;else{const d=Number(i.timeout);if(isNaN(d)||d<0)return ul("wrong timeout",n);i.timeout=Number.isFinite(d)?d:0}i.timeout===0?i.progress=!1:i.progress===!0&&(i.meta.progressClass="q-notification__progress"+(i.progressClass?` ${i.progressClass}`:""),i.meta.progressStyle={animationDuration:`${i.timeout+1e3}ms`});const s=(Array.isArray(n.actions)===!0?n.actions:[]).concat(n.ignoreDefaults!==!0&&Array.isArray(Ef.actions)===!0?Ef.actions:[]).concat(Array.isArray((h=El[n.type])==null?void 0:h.actions)===!0?El[n.type].actions:[]),{closeBtn:a}=i;if(a&&s.push({label:typeof a=="string"?a:e.lang.label.close}),i.actions=s.map(({handler:d,noDismiss:p,..._})=>({flat:!0,..._,onClick:typeof d=="function"?()=>{d(),p!==!0&&l()}:()=>{l()}})),i.multiLine===void 0&&(i.multiLine=i.actions.length>1),Object.assign(i.meta,{class:`q-notification row items-stretch q-notification--${i.multiLine===!0?"multi-line":"standard"}`+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:"")+(i.classes!==void 0?` ${i.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(i.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(i.multiLine===!0?"":" col"),leftClass:i.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...i.attrs}}),i.group===!1?(i.group=void 0,i.meta.group=void 0):((i.group===void 0||i.group===!0)&&(i.group=[i.message,i.caption,i.multiline].concat(i.actions.map(d=>`${d.label}*${d.icon}`)).join("|")),i.meta.group=i.group+"|"+i.position),i.actions.length===0?i.actions=void 0:i.meta.actionsClass="q-notification__actions row items-center "+(i.multiLine===!0?"justify-end":"col-auto")+(i.meta.hasMedia===!0?" q-notification__actions--with-media":""),t!==void 0){t.notif.meta.timer&&(clearTimeout(t.notif.meta.timer),t.notif.meta.timer=void 0),i.meta.uid=t.notif.meta.uid;const d=Nr[i.position].value.indexOf(t.notif);Nr[i.position].value[d]=i}else{const d=If[i.meta.group];if(d===void 0){if(i.meta.uid=B9++,i.meta.badge=1,["left","right","center"].indexOf(i.position)!==-1)Nr[i.position].value.splice(Math.floor(Nr[i.position].value.length/2),0,i);else{const p=i.position.indexOf("top")!==-1?"unshift":"push";Nr[i.position].value[p](i)}i.group!==void 0&&(If[i.meta.group]=i)}else{if(d.meta.timer&&(clearTimeout(d.meta.timer),d.meta.timer=void 0),i.badgePosition!==void 0){if(j9.includes(i.badgePosition)===!1)return ul("wrong badgePosition",n)}else i.badgePosition=`top-${i.position.indexOf("left")!==-1?"right":"left"}`;i.meta.uid=d.meta.uid,i.meta.badge=d.meta.badge+1,i.meta.badgeClass=`q-notification__badge q-notification__badge--${i.badgePosition}`+(i.badgeColor!==void 0?` bg-${i.badgeColor}`:"")+(i.badgeTextColor!==void 0?` text-${i.badgeTextColor}`:"")+(i.badgeClass?` ${i.badgeClass}`:"");const p=Nr[i.position].value.indexOf(d);Nr[i.position].value[p]=If[i.meta.group]=i}}const l=()=>{z9(i),r=void 0};if(i.timeout>0&&(i.meta.timer=setTimeout(()=>{i.meta.timer=void 0,l()},i.timeout+1e3)),i.group!==void 0)return d=>{d!==void 0?ul("trying to update a grouped one which is forbidden",n):l()};if(r={dismiss:l,config:n,notif:i},t!==void 0){Object.assign(t,r);return}return d=>{if(r!==void 0)if(d===void 0)r.dismiss();else{const p=Object.assign({},r.config,d,{group:!1,position:i.position});IR(p,e,r)}}}function z9(n){n.meta.timer&&(clearTimeout(n.meta.timer),n.meta.timer=void 0);const e=Nr[n.position].value.indexOf(n);if(e!==-1){n.group!==void 0&&delete If[n.meta.group];const t=ER[""+n.meta.uid];if(t){const{width:r,height:i}=getComputedStyle(t);t.style.left=`${t.offsetLeft}px`,t.style.width=r,t.style.height=i}Nr[n.position].value.splice(e,1),typeof n.onDismiss=="function"&&n.onDismiss()}}function fT(n){return n!=null&&q9.test(n)!==!0}function ul(n,e){return console.error(`Notify: ${n}`,e),!1}function K9(){return gc({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Fe("div",{class:"q-notifications"},my.map(n=>Fe(mV,{key:n,class:wR[n],tag:"div",name:`q-notification--${n}`},()=>Nr[n].value.map(e=>{const t=e.meta,r=[];if(t.hasMedia===!0&&(e.spinner!==!1?r.push(Fe(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+t.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(Fe(od,{class:"q-notification__icon q-notification__icon--"+t.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(Fe(g9,{class:"q-notification__avatar q-notification__avatar--"+t.leftClass},()=>Fe("img",{src:e.avatar,"aria-hidden":"true"})))),t.hasText===!0){let s;const a={class:"q-notification__message col"};if(e.html===!0)a.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const l=[e.message];s=e.caption?[Fe("div",l),Fe("div",{class:"q-notification__caption"},[e.caption])]:l}r.push(Fe("div",a,s))}const i=[Fe("div",{class:t.contentClass},r)];return e.progress===!0&&i.push(Fe("div",{key:`${t.uid}|p|${t.badge}`,class:t.progressClass,style:t.progressStyle})),e.actions!==void 0&&i.push(Fe("div",{class:t.actionsClass},e.actions.map(s=>Fe(L9,s)))),t.badge>1&&i.push(Fe("div",{key:`${t.uid}|${t.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[t.badge])),Fe("div",{ref:s=>{ER[""+t.uid]=s},key:t.uid,class:t.class,...t.attrs},[Fe("div",{class:t.wrapperClass},i)])}))))}})}const G9={setDefaults(n){Gl(n)===!0&&Object.assign(Ef,n)},registerType(n,e){Gl(e)===!0&&(El[n]=e)},install({$q:n,parentApp:e}){if(n.notify=this.create=t=>IR(t,n),n.notify.setDefaults=this.setDefaults,n.notify.registerType=this.registerType,n.config.notify!==void 0&&this.setDefaults(n.config.notify),this.__installed!==!0){my.forEach(r=>{Nr[r]=xo([]);const i=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",s=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",a=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${s}`;wR[r]=`q-notifications__list q-notifications__list--${i} fixed column no-wrap ${a}`});const t=U9("q-notify");YV(K9(),e).mount(t)}}},W9={config:{},plugins:{Notify:G9}};var H9=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},zm;typeof window!="undefined"&&(typeof Promise!="undefined"?zm=new Promise(function(n){return window.addEventListener("load",n)}):zm={then:function(n){return window.addEventListener("load",n)}});function Q9(n,e){e===void 0&&(e={});var t=e.registrationOptions;t===void 0&&(t={}),delete e.registrationOptions;var r=function(i){for(var s=[],a=arguments.length-1;a-- >0;)s[a]=arguments[a+1];e&&e[i]&&e[i].apply(e,s)};"serviceWorker"in navigator&&zm.then(function(){H9()?(J9(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return cc(r,i)})):(TR(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return cc(r,i)}))})}function cc(n,e){navigator.onLine||n("offline"),n("error",e)}function TR(n,e,t){navigator.serviceWorker.register(n,t).then(function(r){if(e("registered",r),r.waiting){e("updated",r);return}r.onupdatefound=function(){e("updatefound",r);var i=r.installing;i.onstatechange=function(){i.state==="installed"&&(navigator.serviceWorker.controller?e("updated",r):e("cached",r))}}}).catch(function(r){return cc(e,r)})}function J9(n,e,t){fetch(n).then(function(r){r.status===404?(e("error",new Error("Service worker not found at "+n)),dT()):r.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+n+" to have javascript content-type, but received "+r.headers.get("content-type"))),dT()):TR(n,e,t)}).catch(function(r){return cc(e,r)})}function dT(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()}).catch(function(n){return cc(emit,n)})}Q9("/kbalance_quasar_pwa/sw.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});async function Y9({app:n,router:e,store:t}){n.use(e),n.mount("#q-app")}s9(L0,W9).then(Y9);export{b6 as $,HT as A,im as B,UV as C,Ea as D,zk as E,jk as F,T6 as G,A0 as H,VN as I,L9 as J,QS as K,E6 as L,r6 as M,i6 as N,Ao as O,ik as P,od as Q,w9 as R,Xn as S,e6 as T,Jm as U,sl as V,Og as W,s6 as X,i_ as Y,yl as Z,I6 as _,Ue as a,VV as a0,t6 as a1,py as a2,gy as a3,a9 as a4,Gk as a5,gg as a6,rm as a7,Wk as a8,l_ as a9,o6 as aA,C6 as aB,d6 as aC,kg as aD,a_ as aE,n6 as aF,WV as aG,l6 as aH,b9 as aI,R6 as aJ,X9 as aK,U9 as aL,O6 as aM,A6 as aN,y9 as aO,I9 as aP,T9 as aQ,gR as aR,P6 as aS,Z9 as aT,nm as aU,QV as aV,F0 as aa,_6 as ab,m6 as ac,Gl as ad,a6 as ae,yd as af,FI as ag,DV as ah,NV as ai,ei as aj,c6 as ak,kV as al,OV as am,u6 as an,at as ao,KN as ap,Gt as aq,Qm as ar,LN as as,N4 as at,k9 as au,D6 as av,x6 as aw,P9 as ax,JN as ay,S6 as az,o9 as b,gc as c,f6 as d,g6 as e,Oo as f,Fs as g,Fe as h,Lr as i,dc as j,Do as k,h6 as l,Ko as m,Kl as n,u_ as o,sf as p,o0 as q,xo as r,wl as s,Zk as t,Nf as u,Of as v,$a as w,Fk as x,jn as y,p6 as z};
