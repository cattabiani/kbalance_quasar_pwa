const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-C7W6r9Wk.js","assets/scroll-DWSfQquo.js","assets/QResizeObserver-Icpt9xl9.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/IndexPage-DK57zc58.js","assets/QToolbarTitle-BkU6gVle.js","assets/QItemLabel-C9FkWUDN.js","assets/QPage-BqOAJucv.js","assets/selection-0I6KIV8i.js","assets/focusout-DSXTwOH3.js","assets/QCard-a4XOo-_T.js","assets/QHeader-CszIp553.js","assets/QBanner-BR6EozWh.js","assets/rtl-DFPa-2ov.js","assets/QSlideItem-BDo2JKnM.js","assets/TouchPan-D8ai2aKk.js","assets/use-render-cache-rinsAykk.js","assets/use-panel-DQJs52Pv.js","assets/ShareString-CFYOklFN.js","assets/QCardActions-DSrK8UPi.js","assets/QDialog-14M2O2Ab.js","assets/ReceiveString-C5m27Pqj.js","assets/QImg-Clafb4O5.js","assets/PersonItem-5qMX1WNM.js","assets/IndexPage-D905FuJZ.css","assets/NewSheetWizardPage-CPi1LX8O.js","assets/QForm-B0eLPwYh.js","assets/PeopleList-DeFaxUrk.js","assets/PeopleDropdown-DzFwOCHZ.js","assets/SheetPage-BwHsk7tO.js","assets/QSpace-Bqz40wXc.js","assets/ClosePopup-fIZWd16M.js","assets/TransactionList-TWrSR3J4.js","assets/CurrencyDisplay-C4Bu6HJE.js","assets/ConvertPage-BpFT7SES.js","assets/CurrencyDropdown-8-46uJcS.js","assets/SettlePage-DDyft3D2.js","assets/StatisticsPage-CLEqqfzV.js","assets/format-BvkBI9bc.js","assets/QCarousel-BLqMNIq5.js","assets/use-fullscreen-D8mmUIqZ.js","assets/vue3-apexcharts-i5RzMN5k.js","assets/ConversionRatesSettingsPage-D8j3oQT3.js","assets/QCheckbox-CHilDSxm.js","assets/PeoplePage-AmsMyTH8.js","assets/TransactionPage-bbgfNA1J.js","assets/LoginPage-Cju9_l7x.js","assets/SettingsPage-CnAni98_.js","assets/LandingPage-Dw2zrI_J.js","assets/apexcharts-DWTVUw9v.js"])))=>i.map(i=>d[i]);
const KO=(function(){const e=typeof document!="undefined"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),GO=function(t){return"/kbalance_quasar_pwa/"+t},uw={},qn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=h(n.map(d=>{if(d=GO(d),d in uw)return;uw[d]=!0;const p=d.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${_}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":KO,p||(v.as="script"),v.crossOrigin="",v.href=d,l&&v.setAttribute("nonce",l),document.head.appendChild(v),p)return new Promise((E,N)=>{v.addEventListener("load",E),v.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Gm(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const It={},Ba=[],ei=()=>{},pT=()=>!1,ud=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Wm=t=>t.startsWith("onUpdate:"),sn=Object.assign,Hm=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WO=Object.prototype.hasOwnProperty,gt=(t,e)=>WO.call(t,e),Ve=Array.isArray,qa=t=>hc(t)==="[object Map]",gT=t=>hc(t)==="[object Set]",HO=t=>hc(t)==="[object RegExp]",Ke=t=>typeof t=="function",Vt=t=>typeof t=="string",Bi=t=>typeof t=="symbol",At=t=>t!==null&&typeof t=="object",mT=t=>(At(t)||Ke(t))&&Ke(t.then)&&Ke(t.catch),_T=Object.prototype.toString,hc=t=>_T.call(t),QO=t=>hc(t).slice(8,-1),yT=t=>hc(t)==="[object Object]",Qm=t=>Vt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Il=Gm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ld=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},JO=/-\w/g,Pr=ld(t=>t.replace(JO,e=>e.slice(1).toUpperCase())),YO=/\B([A-Z])/g,Ko=ld(t=>t.replace(YO,"-$1").toLowerCase()),cd=ld(t=>t.charAt(0).toUpperCase()+t.slice(1)),ng=ld(t=>t?`on${cd(t)}`:""),Rs=(t,e)=>!Object.is(t,e),Tl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},vT=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},XO=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ZO=t=>{const e=Vt(t)?Number(t):NaN;return isNaN(e)?t:e};let lw;const hd=()=>lw||(lw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function Jm(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Vt(r)?rk(r):Jm(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Vt(t)||At(t))return t}const ek=/;(?![^(]*\))/g,tk=/:([^]+)/,nk=/\/\*[^]*?\*\//g;function rk(t){const e={};return t.replace(nk,"").split(ek).forEach(n=>{if(n){const r=n.split(tk);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ym(t){let e="";if(Vt(t))e=t;else if(Ve(t))for(let n=0;n<t.length;n++){const r=Ym(t[n]);r&&(e+=r+" ")}else if(At(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ik="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sk=Gm(ik);function wT(t){return!!t||t===""}const ET=t=>!!(t&&t.__v_isRef===!0),ok=t=>Vt(t)?t:t==null?"":Ve(t)||At(t)&&(t.toString===_T||!Ke(t.toString))?ET(t)?ok(t.value):JSON.stringify(t,IT,2):String(t),IT=(t,e)=>ET(e)?IT(t,e.value):qa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[rg(r,s)+" =>"]=i,n),{})}:gT(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>rg(n))}:Bi(e)?rg(e):At(e)&&!Ve(e)&&!yT(e)?String(e):e,rg=(t,e="")=>{var n;return Bi(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let xn;class TT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xn,!e&&xn&&(this.index=(xn.scopes||(xn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=xn;try{return xn=this,e()}finally{xn=n}}}on(){++this._on===1&&(this.prevScope=xn,xn=this)}off(){this._on>0&&--this._on===0&&(xn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function bT(t){return new TT(t)}function AT(){return xn}function ak(t,e=!1){xn&&xn.cleanups.push(t)}let bt;const ig=new WeakSet;class ST{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xn&&xn.active&&xn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ig.has(this)&&(ig.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||PT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cw(this),CT(this);const e=bt,n=Lr;bt=this,Lr=!0;try{return this.fn()}finally{xT(this),bt=e,Lr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)e_(e);this.deps=this.depsTail=void 0,cw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ig.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jg(this)&&this.run()}get dirty(){return jg(this)}}let RT=0,bl,Al;function PT(t,e=!1){if(t.flags|=8,e){t.next=Al,Al=t;return}t.next=bl,bl=t}function Xm(){RT++}function Zm(){if(--RT>0)return;if(Al){let e=Al;for(Al=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;bl;){let e=bl;for(bl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function CT(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xT(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),e_(r),uk(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function jg(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(DT(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function DT(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ul)||(t.globalVersion=Ul,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!jg(t))))return;t.flags|=2;const e=t.dep,n=bt,r=Lr;bt=t,Lr=!0;try{CT(t);const i=t.fn(t._value);(e.version===0||Rs(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{bt=n,Lr=r,xT(t),t.flags&=-3}}function e_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)e_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function uk(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Lr=!0;const OT=[];function Ni(){OT.push(Lr),Lr=!1}function Vi(){const t=OT.pop();Lr=t===void 0?!0:t}function cw(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=bt;bt=void 0;try{e()}finally{bt=n}}}let Ul=0;class lk{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class t_{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!bt||!Lr||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new lk(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,kT(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=r)}return n}trigger(e){this.version++,Ul++,this.notify(e)}notify(e){Xm();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Zm()}}}function kT(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)kT(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Tf=new WeakMap,Ao=Symbol(""),zg=Symbol(""),Bl=Symbol("");function On(t,e,n){if(Lr&&bt){let r=Tf.get(t);r||Tf.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new t_),i.map=r,i.key=n),i.track()}}function Si(t,e,n,r,i,s){const a=Tf.get(t);if(!a){Ul++;return}const l=h=>{h&&h.trigger()};if(Xm(),e==="clear")a.forEach(l);else{const h=Ve(t),d=h&&Qm(n);if(h&&n==="length"){const p=Number(r);a.forEach((_,v)=>{(v==="length"||v===Bl||!Bi(v)&&v>=p)&&l(_)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),d&&l(a.get(Bl)),e){case"add":h?d&&l(a.get("length")):(l(a.get(Ao)),qa(t)&&l(a.get(zg)));break;case"delete":h||(l(a.get(Ao)),qa(t)&&l(a.get(zg)));break;case"set":qa(t)&&l(a.get(Ao));break}}Zm()}function ck(t,e){const n=Tf.get(t);return n&&n.get(e)}function Ea(t){const e=at(t);return e===t?e:(On(e,"iterate",Bl),Rr(t)?e:e.map(_n))}function fd(t){return On(t=at(t),"iterate",Bl),t}const hk={__proto__:null,[Symbol.iterator](){return sg(this,Symbol.iterator,_n)},concat(...t){return Ea(this).concat(...t.map(e=>Ve(e)?Ea(e):e))},entries(){return sg(this,"entries",t=>(t[1]=_n(t[1]),t))},every(t,e){return Ei(this,"every",t,e,void 0,arguments)},filter(t,e){return Ei(this,"filter",t,e,n=>n.map(_n),arguments)},find(t,e){return Ei(this,"find",t,e,_n,arguments)},findIndex(t,e){return Ei(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ei(this,"findLast",t,e,_n,arguments)},findLastIndex(t,e){return Ei(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ei(this,"forEach",t,e,void 0,arguments)},includes(...t){return og(this,"includes",t)},indexOf(...t){return og(this,"indexOf",t)},join(t){return Ea(this).join(t)},lastIndexOf(...t){return og(this,"lastIndexOf",t)},map(t,e){return Ei(this,"map",t,e,void 0,arguments)},pop(){return Xu(this,"pop")},push(...t){return Xu(this,"push",t)},reduce(t,...e){return hw(this,"reduce",t,e)},reduceRight(t,...e){return hw(this,"reduceRight",t,e)},shift(){return Xu(this,"shift")},some(t,e){return Ei(this,"some",t,e,void 0,arguments)},splice(...t){return Xu(this,"splice",t)},toReversed(){return Ea(this).toReversed()},toSorted(t){return Ea(this).toSorted(t)},toSpliced(...t){return Ea(this).toSpliced(...t)},unshift(...t){return Xu(this,"unshift",t)},values(){return sg(this,"values",_n)}};function sg(t,e,n){const r=fd(t),i=r[e]();return r!==t&&!Rr(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const fk=Array.prototype;function Ei(t,e,n,r,i,s){const a=fd(t),l=a!==t&&!Rr(t),h=a[e];if(h!==fk[e]){const _=h.apply(t,s);return l?_n(_):_}let d=n;a!==t&&(l?d=function(_,v){return n.call(this,_n(_),v,t)}:n.length>2&&(d=function(_,v){return n.call(this,_,v,t)}));const p=h.call(a,d,r);return l&&i?i(p):p}function hw(t,e,n,r){const i=fd(t);let s=n;return i!==t&&(Rr(t)?n.length>3&&(s=function(a,l,h){return n.call(this,a,l,h,t)}):s=function(a,l,h){return n.call(this,a,_n(l),h,t)}),i[e](s,...r)}function og(t,e,n){const r=at(t);On(r,"iterate",Bl);const i=r[e](...n);return(i===-1||i===!1)&&i_(n[0])?(n[0]=at(n[0]),r[e](...n)):i}function Xu(t,e,n=[]){Ni(),Xm();const r=at(t)[e].apply(t,n);return Zm(),Vi(),r}const dk=Gm("__proto__,__v_isRef,__isVue"),NT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bi));function pk(t){Bi(t)||(t=String(t));const e=at(this);return On(e,"has",t),e.hasOwnProperty(t)}class VT{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?bk:UT:s?FT:MT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Ve(e);if(!i){let h;if(a&&(h=hk[n]))return h;if(n==="hasOwnProperty")return pk}const l=Reflect.get(e,n,Gt(e)?e:r);if((Bi(n)?NT.has(n):dk(n))||(i||On(e,"get",n),s))return l;if(Gt(l)){const h=a&&Qm(n)?l:l.value;return i&&At(h)?Gg(h):h}return At(l)?i?Gg(l):Go(l):l}}class LT extends VT{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const h=Ns(s);if(!Rr(r)&&!Ns(r)&&(s=at(s),r=at(r)),!Ve(e)&&Gt(s)&&!Gt(r))return h||(s.value=r),!0}const a=Ve(e)&&Qm(n)?Number(n)<e.length:gt(e,n),l=Reflect.set(e,n,r,Gt(e)?e:i);return e===at(i)&&(a?Rs(r,s)&&Si(e,"set",n,r):Si(e,"add",n,r)),l}deleteProperty(e,n){const r=gt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Si(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Bi(n)||!NT.has(n))&&On(e,"has",n),r}ownKeys(e){return On(e,"iterate",Ve(e)?"length":Ao),Reflect.ownKeys(e)}}class gk extends VT{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mk=new LT,_k=new gk,yk=new LT(!0);const Kg=t=>t,$h=t=>Reflect.getPrototypeOf(t);function vk(t,e,n){return function(...r){const i=this.__v_raw,s=at(i),a=qa(s),l=t==="entries"||t===Symbol.iterator&&a,h=t==="keys"&&a,d=i[t](...r),p=n?Kg:e?bf:_n;return!e&&On(s,"iterate",h?zg:Ao),{next(){const{value:_,done:v}=d.next();return v?{value:_,done:v}:{value:l?[p(_[0]),p(_[1])]:p(_),done:v}},[Symbol.iterator](){return this}}}}function jh(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function wk(t,e){const n={get(i){const s=this.__v_raw,a=at(s),l=at(i);t||(Rs(i,l)&&On(a,"get",i),On(a,"get",l));const{has:h}=$h(a),d=e?Kg:t?bf:_n;if(h.call(a,i))return d(s.get(i));if(h.call(a,l))return d(s.get(l));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!t&&On(at(i),"iterate",Ao),i.size},has(i){const s=this.__v_raw,a=at(s),l=at(i);return t||(Rs(i,l)&&On(a,"has",i),On(a,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const a=this,l=a.__v_raw,h=at(l),d=e?Kg:t?bf:_n;return!t&&On(h,"iterate",Ao),l.forEach((p,_)=>i.call(s,d(p),d(_),a))}};return sn(n,t?{add:jh("add"),set:jh("set"),delete:jh("delete"),clear:jh("clear")}:{add(i){!e&&!Rr(i)&&!Ns(i)&&(i=at(i));const s=at(this);return $h(s).has.call(s,i)||(s.add(i),Si(s,"add",i,i)),this},set(i,s){!e&&!Rr(s)&&!Ns(s)&&(s=at(s));const a=at(this),{has:l,get:h}=$h(a);let d=l.call(a,i);d||(i=at(i),d=l.call(a,i));const p=h.call(a,i);return a.set(i,s),d?Rs(s,p)&&Si(a,"set",i,s):Si(a,"add",i,s),this},delete(i){const s=at(this),{has:a,get:l}=$h(s);let h=a.call(s,i);h||(i=at(i),h=a.call(s,i)),l&&l.call(s,i);const d=s.delete(i);return h&&Si(s,"delete",i,void 0),d},clear(){const i=at(this),s=i.size!==0,a=i.clear();return s&&Si(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=vk(i,t,e)}),n}function n_(t,e){const n=wk(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(gt(n,i)&&i in r?n:r,i,s)}const Ek={get:n_(!1,!1)},Ik={get:n_(!1,!0)},Tk={get:n_(!0,!1)};const MT=new WeakMap,FT=new WeakMap,UT=new WeakMap,bk=new WeakMap;function Ak(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sk(t){return t.__v_skip||!Object.isExtensible(t)?0:Ak(QO(t))}function Go(t){return Ns(t)?t:r_(t,!1,mk,Ek,MT)}function BT(t){return r_(t,!1,yk,Ik,FT)}function Gg(t){return r_(t,!0,_k,Tk,UT)}function r_(t,e,n,r,i){if(!At(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Sk(t);if(s===0)return t;const a=i.get(t);if(a)return a;const l=new Proxy(t,s===2?r:n);return i.set(t,l),l}function Ps(t){return Ns(t)?Ps(t.__v_raw):!!(t&&t.__v_isReactive)}function Ns(t){return!!(t&&t.__v_isReadonly)}function Rr(t){return!!(t&&t.__v_isShallow)}function i_(t){return t?!!t.__v_raw:!1}function at(t){const e=t&&t.__v_raw;return e?at(e):t}function Wo(t){return!gt(t,"__v_skip")&&Object.isExtensible(t)&&vT(t,"__v_skip",!0),t}const _n=t=>At(t)?Go(t):t,bf=t=>At(t)?Gg(t):t;function Gt(t){return t?t.__v_isRef===!0:!1}function Do(t){return qT(t,!1)}function Rk(t){return qT(t,!0)}function qT(t,e){return Gt(t)?t:new Pk(t,e)}class Pk{constructor(e,n){this.dep=new t_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:at(e),this._value=n?e:_n(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Rr(e)||Ns(e);e=r?e:at(e),Rs(e,n)&&(this._rawValue=e,this._value=r?e:_n(e),this.dep.trigger())}}function So(t){return Gt(t)?t.value:t}const Ck={get:(t,e,n)=>e==="__v_raw"?t:So(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Gt(i)&&!Gt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function $T(t){return Ps(t)?t:new Proxy(t,Ck)}function xk(t){const e=Ve(t)?new Array(t.length):{};for(const n in t)e[n]=Ok(t,n);return e}class Dk{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ck(at(this._object),this._key)}}function Ok(t,e,n){const r=t[e];return Gt(r)?r:new Dk(t,e,n)}class kk{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new t_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ul-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return PT(this,!0),!0}get value(){const e=this.dep.track();return DT(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Nk(t,e,n=!1){let r,i;return Ke(t)?r=t:(r=t.get,i=t.set),new kk(r,i,n)}const zh={},Af=new WeakMap;let _o;function Vk(t,e=!1,n=_o){if(n){let r=Af.get(n);r||Af.set(n,r=[]),r.push(t)}}function Lk(t,e,n=It){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:l,call:h}=n,d=G=>i?G:Rr(G)||i===!1||i===0?Ri(G,1):Ri(G);let p,_,v,E,N=!1,M=!1;if(Gt(t)?(_=()=>t.value,N=Rr(t)):Ps(t)?(_=()=>d(t),N=!0):Ve(t)?(M=!0,N=t.some(G=>Ps(G)||Rr(G)),_=()=>t.map(G=>{if(Gt(G))return G.value;if(Ps(G))return d(G);if(Ke(G))return h?h(G,2):G()})):Ke(t)?e?_=h?()=>h(t,2):t:_=()=>{if(v){Ni();try{v()}finally{Vi()}}const G=_o;_o=p;try{return h?h(t,3,[E]):t(E)}finally{_o=G}}:_=ei,e&&i){const G=_,J=i===!0?1/0:i;_=()=>Ri(G(),J)}const F=AT(),Q=()=>{p.stop(),F&&F.active&&Hm(F.effects,p)};if(s&&e){const G=e;e=(...J)=>{G(...J),Q()}}let j=M?new Array(t.length).fill(zh):zh;const z=G=>{if(!(!(p.flags&1)||!p.dirty&&!G))if(e){const J=p.run();if(i||N||(M?J.some((oe,R)=>Rs(oe,j[R])):Rs(J,j))){v&&v();const oe=_o;_o=p;try{const R=[J,j===zh?void 0:M&&j[0]===zh?[]:j,E];j=J,h?h(e,3,R):e(...R)}finally{_o=oe}}}else p.run()};return l&&l(z),p=new ST(_),p.scheduler=a?()=>a(z,!1):z,E=G=>Vk(G,!1,p),v=p.onStop=()=>{const G=Af.get(p);if(G){if(h)h(G,4);else for(const J of G)J();Af.delete(p)}},e?r?z(!0):j=p.run():a?a(z.bind(null,!0),!0):p.run(),Q.pause=p.pause.bind(p),Q.resume=p.resume.bind(p),Q.stop=Q,Q}function Ri(t,e=1/0,n){if(e<=0||!At(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Gt(t))Ri(t.value,e,n);else if(Ve(t))for(let r=0;r<t.length;r++)Ri(t[r],e,n);else if(gT(t)||qa(t))t.forEach(r=>{Ri(r,e,n)});else if(yT(t)){for(const r in t)Ri(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Ri(t[r],e,n)}return t}function fc(t,e,n,r){try{return r?t(...r):t()}catch(i){dd(i,e,n)}}function Fr(t,e,n,r){if(Ke(t)){const i=fc(t,e,n,r);return i&&mT(i)&&i.catch(s=>{dd(s,e,n)}),i}if(Ve(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Fr(t[s],e,n,r));return i}}function dd(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||It;if(e){let l=e.parent;const h=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const p=l.ec;if(p){for(let _=0;_<p.length;_++)if(p[_](t,h,d)===!1)return}l=l.parent}if(s){Ni(),fc(s,null,10,[t,h,d]),Vi();return}}Mk(t,n,i,r,a)}function Mk(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const zn=[];let Qr=-1;const $a=[];let ms=null,Oa=0;const jT=Promise.resolve();let Sf=null;function s_(t){const e=Sf||jT;return t?e.then(this?t.bind(this):t):e}function Fk(t){let e=Qr+1,n=zn.length;for(;e<n;){const r=e+n>>>1,i=zn[r],s=ql(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function o_(t){if(!(t.flags&1)){const e=ql(t),n=zn[zn.length-1];!n||!(t.flags&2)&&e>=ql(n)?zn.push(t):zn.splice(Fk(e),0,t),t.flags|=1,zT()}}function zT(){Sf||(Sf=jT.then(GT))}function Uk(t){Ve(t)?$a.push(...t):ms&&t.id===-1?ms.splice(Oa+1,0,t):t.flags&1||($a.push(t),t.flags|=1),zT()}function fw(t,e,n=Qr+1){for(;n<zn.length;n++){const r=zn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;zn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function KT(t){if($a.length){const e=[...new Set($a)].sort((n,r)=>ql(n)-ql(r));if($a.length=0,ms){ms.push(...e);return}for(ms=e,Oa=0;Oa<ms.length;Oa++){const n=ms[Oa];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ms=null,Oa=0}}const ql=t=>t.id==null?t.flags&2?-1:1/0:t.id;function GT(t){try{for(Qr=0;Qr<zn.length;Qr++){const e=zn[Qr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Qr<zn.length;Qr++){const e=zn[Qr];e&&(e.flags&=-2)}Qr=-1,zn.length=0,KT(),Sf=null,(zn.length||$a.length)&&GT()}}let vn=null,WT=null;function Rf(t){const e=vn;return vn=t,WT=t&&t.type.__scopeId||null,e}function Bk(t,e=vn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&kf(-1);const s=Rf(e);let a;try{a=t(...i)}finally{Rf(s),r._d&&kf(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function HT(t,e){if(vn===null)return t;const n=yd(vn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,l,h=It]=e[i];s&&(Ke(s)&&(s={mounted:s,updated:s}),s.deep&&Ri(a),r.push({dir:s,instance:n,value:a,oldValue:void 0,arg:l,modifiers:h}))}return t}function fo(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const l=i[a];s&&(l.oldValue=s[a].value);let h=l.dir[r];h&&(Ni(),Fr(h,n,8,[t.el,l,t,e]),Vi())}}const QT=Symbol("_vte"),JT=t=>t.__isTeleport,Sl=t=>t&&(t.disabled||t.disabled===""),dw=t=>t&&(t.defer||t.defer===""),pw=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,gw=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Wg=(t,e)=>{const n=t&&t.to;return Vt(n)?e?e(n):null:n},YT={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,a,l,h,d){const{mc:p,pc:_,pbc:v,o:{insert:E,querySelector:N,createText:M,createComment:F}}=d,Q=Sl(e.props);let{shapeFlag:j,children:z,dynamicChildren:G}=e;if(t==null){const J=e.el=M(""),oe=e.anchor=M("");E(J,n,r),E(oe,n,r);const R=(A,x)=>{j&16&&p(z,A,x,i,s,a,l,h)},S=()=>{const A=e.target=Wg(e.props,N),x=XT(A,e,M,E);A&&(a!=="svg"&&pw(A)?a="svg":a!=="mathml"&&gw(A)&&(a="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(A),Q||(R(A,x),rf(e,!1)))};Q&&(R(n,oe),rf(e,!0)),dw(e.props)?(e.el.__isMounted=!1,rn(()=>{S(),delete e.el.__isMounted},s)):S()}else{if(dw(e.props)&&t.el.__isMounted===!1){rn(()=>{YT.process(t,e,n,r,i,s,a,l,h,d)},s);return}e.el=t.el,e.targetStart=t.targetStart;const J=e.anchor=t.anchor,oe=e.target=t.target,R=e.targetAnchor=t.targetAnchor,S=Sl(t.props),A=S?n:oe,x=S?J:R;if(a==="svg"||pw(oe)?a="svg":(a==="mathml"||gw(oe))&&(a="mathml"),G?(v(t.dynamicChildren,G,A,i,s,a,l),d_(t,e,!0)):h||_(t,e,A,x,i,s,a,l,!1),Q)S?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Kh(e,n,J,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const k=e.target=Wg(e.props,N);k&&Kh(e,k,null,d,0)}else S&&Kh(e,oe,R,d,1);rf(e,Q)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:l,anchor:h,targetStart:d,targetAnchor:p,target:_,props:v}=t;if(_&&(i(d),i(p)),s&&i(h),a&16){const E=s||!Sl(v);for(let N=0;N<l.length;N++){const M=l[N];r(M,e,n,E,!!M.dynamicChildren)}}},move:Kh,hydrate:qk};function Kh(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:a,anchor:l,shapeFlag:h,children:d,props:p}=t,_=s===2;if(_&&r(a,e,n),(!_||Sl(p))&&h&16)for(let v=0;v<d.length;v++)i(d[v],e,n,2);_&&r(l,e,n)}function qk(t,e,n,r,i,s,{o:{nextSibling:a,parentNode:l,querySelector:h,insert:d,createText:p}},_){function v(M,F,Q,j){F.anchor=_(a(M),F,l(M),n,r,i,s),F.targetStart=Q,F.targetAnchor=j}const E=e.target=Wg(e.props,h),N=Sl(e.props);if(E){const M=E._lpa||E.firstChild;if(e.shapeFlag&16)if(N)v(t,e,M,M&&a(M));else{e.anchor=a(t);let F=M;for(;F;){if(F&&F.nodeType===8){if(F.data==="teleport start anchor")e.targetStart=F;else if(F.data==="teleport anchor"){e.targetAnchor=F,E._lpa=e.targetAnchor&&a(e.targetAnchor);break}}F=a(F)}e.targetAnchor||XT(E,e,p,d),_(M&&a(M),e,E,n,r,i,s)}rf(e,N)}else N&&e.shapeFlag&16&&v(t,e,t,a(t));return e.anchor&&a(e.anchor)}const Q9=YT;function rf(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function XT(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[QT]=s,t&&(r(i,t),r(s,t)),s}const Ai=Symbol("_leaveCb"),Gh=Symbol("_enterCb");function ZT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return l_(()=>{t.isMounted=!0}),dc(()=>{t.isUnmounting=!0}),t}const br=[Function,Array],e0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:br,onEnter:br,onAfterEnter:br,onEnterCancelled:br,onBeforeLeave:br,onLeave:br,onAfterLeave:br,onLeaveCancelled:br,onBeforeAppear:br,onAppear:br,onAfterAppear:br,onAppearCancelled:br},t0=t=>{const e=t.subTree;return e.component?t0(e.component):e},$k={name:"BaseTransition",props:e0,setup(t,{slots:e}){const n=Us(),r=ZT();return()=>{const i=e.default&&a_(e.default(),!0);if(!i||!i.length)return;const s=n0(i),a=at(t),{mode:l}=a;if(r.isLeaving)return ag(s);const h=mw(s);if(!h)return ag(s);let d=$l(h,a,r,n,_=>d=_);h.type!==yn&&Vs(h,d);let p=n.subTree&&mw(n.subTree);if(p&&p.type!==yn&&!ws(p,h)&&t0(n).type!==yn){let _=$l(p,a,r,n);if(Vs(p,_),l==="out-in"&&h.type!==yn)return r.isLeaving=!0,_.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete _.afterLeave,p=void 0},ag(s);l==="in-out"&&h.type!==yn?_.delayLeave=(v,E,N)=>{const M=r0(r,p);M[String(p.key)]=p,v[Ai]=()=>{E(),v[Ai]=void 0,delete d.delayedLeave,p=void 0},d.delayedLeave=()=>{N(),delete d.delayedLeave,p=void 0}}:p=void 0}else p&&(p=void 0);return s}}};function n0(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==yn){e=n;break}}return e}const jk=$k;function r0(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function $l(t,e,n,r,i){const{appear:s,mode:a,persisted:l=!1,onBeforeEnter:h,onEnter:d,onAfterEnter:p,onEnterCancelled:_,onBeforeLeave:v,onLeave:E,onAfterLeave:N,onLeaveCancelled:M,onBeforeAppear:F,onAppear:Q,onAfterAppear:j,onAppearCancelled:z}=e,G=String(t.key),J=r0(n,t),oe=(A,x)=>{A&&Fr(A,r,9,x)},R=(A,x)=>{const k=x[1];oe(A,x),Ve(A)?A.every(O=>O.length<=1)&&k():A.length<=1&&k()},S={mode:a,persisted:l,beforeEnter(A){let x=h;if(!n.isMounted)if(s)x=F||h;else return;A[Ai]&&A[Ai](!0);const k=J[G];k&&ws(t,k)&&k.el[Ai]&&k.el[Ai](),oe(x,[A])},enter(A){let x=d,k=p,O=_;if(!n.isMounted)if(s)x=Q||d,k=j||p,O=z||_;else return;let P=!1;const ce=A[Gh]=qe=>{P||(P=!0,qe?oe(O,[A]):oe(k,[A]),S.delayedLeave&&S.delayedLeave(),A[Gh]=void 0)};x?R(x,[A,ce]):ce()},leave(A,x){const k=String(t.key);if(A[Gh]&&A[Gh](!0),n.isUnmounting)return x();oe(v,[A]);let O=!1;const P=A[Ai]=ce=>{O||(O=!0,x(),ce?oe(M,[A]):oe(N,[A]),A[Ai]=void 0,J[k]===t&&delete J[k])};J[k]=t,E?R(E,[A,P]):P()},clone(A){const x=$l(A,e,n,r,i);return i&&i(x),x}};return S}function ag(t){if(pd(t))return t=Li(t),t.children=null,t}function mw(t){if(!pd(t))return JT(t.type)&&t.children?n0(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ke(n.default))return n.default()}}function Vs(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Vs(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function a_(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let a=t[s];const l=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===er?(a.patchFlag&128&&i++,r=r.concat(a_(a.children,e,l))):(e||a.type!==yn)&&r.push(l!=null?Li(a,{key:l}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function u_(t,e){return Ke(t)?sn({name:t.name},e,{setup:t}):t}function i0(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Pf=new WeakMap;function Rl(t,e,n,r,i=!1){if(Ve(t)){t.forEach((N,M)=>Rl(N,e&&(Ve(e)?e[M]:e),n,r,i));return}if(Ro(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Rl(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?yd(r.component):r.el,a=i?null:s,{i:l,r:h}=t,d=e&&e.r,p=l.refs===It?l.refs={}:l.refs,_=l.setupState,v=at(_),E=_===It?pT:N=>gt(v,N);if(d!=null&&d!==h){if(_w(e),Vt(d))p[d]=null,E(d)&&(_[d]=null);else if(Gt(d)){d.value=null;const N=e;N.k&&(p[N.k]=null)}}if(Ke(h))fc(h,l,12,[a,p]);else{const N=Vt(h),M=Gt(h);if(N||M){const F=()=>{if(t.f){const Q=N?E(h)?_[h]:p[h]:h.value;if(i)Ve(Q)&&Hm(Q,s);else if(Ve(Q))Q.includes(s)||Q.push(s);else if(N)p[h]=[s],E(h)&&(_[h]=p[h]);else{const j=[s];h.value=j,t.k&&(p[t.k]=j)}}else N?(p[h]=a,E(h)&&(_[h]=a)):M&&(h.value=a,t.k&&(p[t.k]=a))};if(a){const Q=()=>{F(),Pf.delete(t)};Q.id=-1,Pf.set(t,Q),rn(Q,n)}else _w(t),F()}}}function _w(t){const e=Pf.get(t);e&&(e.flags|=8,Pf.delete(t))}hd().requestIdleCallback;hd().cancelIdleCallback;const Ro=t=>!!t.type.__asyncLoader,pd=t=>t.type.__isKeepAlive,zk={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Us(),r=n.ctx;if(!r.renderer)return()=>{const j=e.default&&e.default();return j&&j.length===1?j[0]:j};const i=new Map,s=new Set;let a=null;const l=n.suspense,{renderer:{p:h,m:d,um:p,o:{createElement:_}}}=r,v=_("div");r.activate=(j,z,G,J,oe)=>{const R=j.component;d(j,z,G,0,l),h(R.vnode,j,z,G,R,l,J,j.slotScopeIds,oe),rn(()=>{R.isDeactivated=!1,R.a&&Tl(R.a);const S=j.props&&j.props.onVnodeMounted;S&&Sr(S,R.parent,j)},l)},r.deactivate=j=>{const z=j.component;xf(z.m),xf(z.a),d(j,v,null,1,l),rn(()=>{z.da&&Tl(z.da);const G=j.props&&j.props.onVnodeUnmounted;G&&Sr(G,z.parent,j),z.isDeactivated=!0},l)};function E(j){ug(j),p(j,n,l,!0)}function N(j){i.forEach((z,G)=>{const J=Zg(z.type);J&&!j(J)&&M(G)})}function M(j){const z=i.get(j);z&&(!a||!ws(z,a))?E(z):a&&ug(a),i.delete(j),s.delete(j)}ja(()=>[t.include,t.exclude],([j,z])=>{j&&N(G=>cl(j,G)),z&&N(G=>!cl(z,G))},{flush:"post",deep:!0});let F=null;const Q=()=>{F!=null&&(Df(n.subTree.type)?rn(()=>{i.set(F,Wh(n.subTree))},n.subTree.suspense):i.set(F,Wh(n.subTree)))};return l_(Q),c_(Q),dc(()=>{i.forEach(j=>{const{subTree:z,suspense:G}=n,J=Wh(z);if(j.type===J.type&&j.key===J.key){ug(J);const oe=J.component.da;oe&&rn(oe,G);return}E(j)})}),()=>{if(F=null,!e.default)return a=null;const j=e.default(),z=j[0];if(j.length>1)return a=null,j;if(!Ha(z)||!(z.shapeFlag&4)&&!(z.shapeFlag&128))return a=null,z;let G=Wh(z);if(G.type===yn)return a=null,G;const J=G.type,oe=Zg(Ro(G)?G.type.__asyncResolved||{}:J),{include:R,exclude:S,max:A}=t;if(R&&(!oe||!cl(R,oe))||S&&oe&&cl(S,oe))return G.shapeFlag&=-257,a=G,z;const x=G.key==null?J:G.key,k=i.get(x);return G.el&&(G=Li(G),z.shapeFlag&128&&(z.ssContent=G)),F=x,k?(G.el=k.el,G.component=k.component,G.transition&&Vs(G,G.transition),G.shapeFlag|=512,s.delete(x),s.add(x)):(s.add(x),A&&s.size>parseInt(A,10)&&M(s.values().next().value)),G.shapeFlag|=256,a=G,Df(z.type)?z:G}}},J9=zk;function cl(t,e){return Ve(t)?t.some(n=>cl(n,e)):Vt(t)?t.split(",").includes(e):HO(t)?(t.lastIndex=0,t.test(e)):!1}function Kk(t,e){s0(t,"a",e)}function Gk(t,e){s0(t,"da",e)}function s0(t,e,n=kn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(gd(e,r,n),n){let i=n.parent;for(;i&&i.parent;)pd(i.parent.vnode)&&Wk(r,e,n,i),i=i.parent}}function Wk(t,e,n,r){const i=gd(e,t,r,!0);o0(()=>{Hm(r[e],i)},n)}function ug(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Wh(t){return t.shapeFlag&128?t.ssContent:t}function gd(t,e,n=kn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{Ni();const l=pc(n),h=Fr(e,n,t,a);return l(),Vi(),h});return r?i.unshift(s):i.push(s),s}}const qi=t=>(e,n=kn)=>{(!zl||t==="sp")&&gd(t,(...r)=>e(...r),n)},Hk=qi("bm"),l_=qi("m"),Qk=qi("bu"),c_=qi("u"),dc=qi("bum"),o0=qi("um"),Jk=qi("sp"),Yk=qi("rtg"),Xk=qi("rtc");function Zk(t,e=kn){gd("ec",t,e)}const eN="components";function tN(t,e){return rN(eN,t,!0,e)||t}const nN=Symbol.for("v-ndc");function rN(t,e,n=!0,r=!1){const i=vn||kn;if(i){const s=i.type;{const l=Zg(s,!1);if(l&&(l===e||l===Pr(e)||l===cd(Pr(e))))return s}const a=yw(i[t]||s[t],e)||yw(i.appContext[t],e);return!a&&r?s:a}}function yw(t,e){return t&&(t[e]||t[Pr(e)]||t[cd(Pr(e))])}function Y9(t,e,n,r){let i;const s=n,a=Ve(t);if(a||Vt(t)){const l=a&&Ps(t);let h=!1,d=!1;l&&(h=!Rr(t),d=Ns(t),t=fd(t)),i=new Array(t.length);for(let p=0,_=t.length;p<_;p++)i[p]=e(h?d?bf(_n(t[p])):_n(t[p]):t[p],p,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,s)}else if(At(t))if(t[Symbol.iterator])i=Array.from(t,(l,h)=>e(l,h,void 0,s));else{const l=Object.keys(t);i=new Array(l.length);for(let h=0,d=l.length;h<d;h++){const p=l[h];i[h]=e(t[p],p,h,s)}}else i=[];return i}function X9(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Ve(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function Z9(t,e,n={},r,i){if(vn.ce||vn.parent&&Ro(vn.parent)&&vn.parent.ce){const d=Object.keys(n).length>0;return Of(),Nf(er,null,[Kn("slot",n,r)],d?-2:64)}let s=t[e];s&&s._c&&(s._d=!1),Of();const a=s&&a0(s(n)),l=n.key||a&&a.key,h=Nf(er,{key:(l&&!Bi(l)?l:`_${e}`)+(!a&&r?"_fb":"")},a||[],a&&t._===1?64:-2);return h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function a0(t){return t.some(e=>Ha(e)?!(e.type===yn||e.type===er&&!a0(e.children)):!0)?t:null}const Hg=t=>t?S0(t)?yd(t):Hg(t.parent):null,Pl=sn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Hg(t.parent),$root:t=>Hg(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>l0(t),$forceUpdate:t=>t.f||(t.f=()=>{o_(t.update)}),$nextTick:t=>t.n||(t.n=s_.bind(t.proxy)),$watch:t=>AN.bind(t)}),lg=(t,e)=>t!==It&&!t.__isScriptSetup&&gt(t,e),iN={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:l,appContext:h}=t;let d;if(e[0]!=="$"){const E=a[e];if(E!==void 0)switch(E){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(lg(r,e))return a[e]=1,r[e];if(i!==It&&gt(i,e))return a[e]=2,i[e];if((d=t.propsOptions[0])&&gt(d,e))return a[e]=3,s[e];if(n!==It&&gt(n,e))return a[e]=4,n[e];Qg&&(a[e]=0)}}const p=Pl[e];let _,v;if(p)return e==="$attrs"&&On(t.attrs,"get",""),p(t);if((_=l.__cssModules)&&(_=_[e]))return _;if(n!==It&&gt(n,e))return a[e]=4,n[e];if(v=h.config.globalProperties,gt(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return lg(i,e)?(i[e]=n,!0):r!==It&&gt(r,e)?(r[e]=n,!0):gt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s,type:a}},l){let h,d;return!!(n[l]||t!==It&&l[0]!=="$"&&gt(t,l)||lg(e,l)||(h=s[0])&&gt(h,l)||gt(r,l)||gt(Pl,l)||gt(i.config.globalProperties,l)||(d=a.__cssModules)&&d[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:gt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function vw(t){return Ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Qg=!0;function sN(t){const e=l0(t),n=t.proxy,r=t.ctx;Qg=!1,e.beforeCreate&&ww(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:l,provide:h,inject:d,created:p,beforeMount:_,mounted:v,beforeUpdate:E,updated:N,activated:M,deactivated:F,beforeDestroy:Q,beforeUnmount:j,destroyed:z,unmounted:G,render:J,renderTracked:oe,renderTriggered:R,errorCaptured:S,serverPrefetch:A,expose:x,inheritAttrs:k,components:O,directives:P,filters:ce}=e;if(d&&oN(d,r,null),a)for(const Te in a){const Be=a[Te];Ke(Be)&&(r[Te]=Be.bind(n))}if(i){const Te=i.call(n,n);At(Te)&&(t.data=Go(Te))}if(Qg=!0,s)for(const Te in s){const Be=s[Te],Ln=Ke(Be)?Be.bind(n,n):Ke(Be.get)?Be.get.bind(n,n):ei,En=!Ke(Be)&&Ke(Be.set)?Be.set.bind(n):ei,Dt=Ue({get:Ln,set:En});Object.defineProperty(r,Te,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:Rt=>Dt.value=Rt})}if(l)for(const Te in l)u0(l[Te],r,n,Te);if(h){const Te=Ke(h)?h.call(n):h;Reflect.ownKeys(Te).forEach(Be=>{sf(Be,Te[Be])})}p&&ww(p,t,"c");function Ye(Te,Be){Ve(Be)?Be.forEach(Ln=>Te(Ln.bind(n))):Be&&Te(Be.bind(n))}if(Ye(Hk,_),Ye(l_,v),Ye(Qk,E),Ye(c_,N),Ye(Kk,M),Ye(Gk,F),Ye(Zk,S),Ye(Xk,oe),Ye(Yk,R),Ye(dc,j),Ye(o0,G),Ye(Jk,A),Ve(x))if(x.length){const Te=t.exposed||(t.exposed={});x.forEach(Be=>{Object.defineProperty(Te,Be,{get:()=>n[Be],set:Ln=>n[Be]=Ln,enumerable:!0})})}else t.exposed||(t.exposed={});J&&t.render===ei&&(t.render=J),k!=null&&(t.inheritAttrs=k),O&&(t.components=O),P&&(t.directives=P),A&&i0(t)}function oN(t,e,n=ei){Ve(t)&&(t=Jg(t));for(const r in t){const i=t[r];let s;At(i)?"default"in i?s=Mr(i.from||r,i.default,!0):s=Mr(i.from||r):s=Mr(i),Gt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function ww(t,e,n){Fr(Ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function u0(t,e,n,r){let i=r.includes(".")?E0(n,r):()=>n[r];if(Vt(t)){const s=e[t];Ke(s)&&ja(i,s)}else if(Ke(t))ja(i,t.bind(n));else if(At(t))if(Ve(t))t.forEach(s=>u0(s,e,n,r));else{const s=Ke(t.handler)?t.handler.bind(n):e[t.handler];Ke(s)&&ja(i,s,t)}}function l0(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let h;return l?h=l:!i.length&&!n&&!r?h=e:(h={},i.length&&i.forEach(d=>Cf(h,d,a,!0)),Cf(h,e,a)),At(e)&&s.set(e,h),h}function Cf(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Cf(t,s,n,!0),i&&i.forEach(a=>Cf(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const l=aN[a]||n&&n[a];t[a]=l?l(t[a],e[a]):e[a]}return t}const aN={data:Ew,props:Iw,emits:Iw,methods:hl,computed:hl,beforeCreate:$n,created:$n,beforeMount:$n,mounted:$n,beforeUpdate:$n,updated:$n,beforeDestroy:$n,beforeUnmount:$n,destroyed:$n,unmounted:$n,activated:$n,deactivated:$n,errorCaptured:$n,serverPrefetch:$n,components:hl,directives:hl,watch:lN,provide:Ew,inject:uN};function Ew(t,e){return e?t?function(){return sn(Ke(t)?t.call(this,this):t,Ke(e)?e.call(this,this):e)}:e:t}function uN(t,e){return hl(Jg(t),Jg(e))}function Jg(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function $n(t,e){return t?[...new Set([].concat(t,e))]:e}function hl(t,e){return t?sn(Object.create(null),t,e):e}function Iw(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:sn(Object.create(null),vw(t),vw(e!=null?e:{})):e}function lN(t,e){if(!t)return e;if(!e)return t;const n=sn(Object.create(null),t);for(const r in e)n[r]=$n(t[r],e[r]);return n}function c0(){return{app:null,config:{isNativeTag:pT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cN=0;function hN(t,e){return function(r,i=null){Ke(r)||(r=sn({},r)),i!=null&&!At(i)&&(i=null);const s=c0(),a=new WeakSet,l=[];let h=!1;const d=s.app={_uid:cN++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:WN,get config(){return s.config},set config(p){},use(p,..._){return a.has(p)||(p&&Ke(p.install)?(a.add(p),p.install(d,..._)):Ke(p)&&(a.add(p),p(d,..._))),d},mixin(p){return s.mixins.includes(p)||s.mixins.push(p),d},component(p,_){return _?(s.components[p]=_,d):s.components[p]},directive(p,_){return _?(s.directives[p]=_,d):s.directives[p]},mount(p,_,v){if(!h){const E=d._ceVNode||Kn(r,i);return E.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),t(E,p,v),h=!0,d._container=p,p.__vue_app__=d,yd(E.component)}},onUnmount(p){l.push(p)},unmount(){h&&(Fr(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(p,_){return s.provides[p]=_,d},runWithContext(p){const _=Po;Po=d;try{return p()}finally{Po=_}}};return d}}let Po=null;function sf(t,e){if(kn){let n=kn.provides;const r=kn.parent&&kn.parent.provides;r===n&&(n=kn.provides=Object.create(r)),n[t]=e}}function Mr(t,e,n=!1){const r=Us();if(r||Po){let i=Po?Po._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ke(e)?e.call(r&&r.proxy):e}}function fN(){return!!(Us()||Po)}const h0={},f0=()=>Object.create(h0),d0=t=>Object.getPrototypeOf(t)===h0;function dN(t,e,n,r=!1){const i={},s=f0();t.propsDefaults=Object.create(null),p0(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:BT(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function pN(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,l=at(i),[h]=t.propsOptions;let d=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=t.vnode.dynamicProps;for(let _=0;_<p.length;_++){let v=p[_];if(md(t.emitsOptions,v))continue;const E=e[v];if(h)if(gt(s,v))E!==s[v]&&(s[v]=E,d=!0);else{const N=Pr(v);i[N]=Yg(h,l,N,E,t,!1)}else E!==s[v]&&(s[v]=E,d=!0)}}}else{p0(t,e,i,s)&&(d=!0);let p;for(const _ in l)(!e||!gt(e,_)&&((p=Ko(_))===_||!gt(e,p)))&&(h?n&&(n[_]!==void 0||n[p]!==void 0)&&(i[_]=Yg(h,l,_,void 0,t,!0)):delete i[_]);if(s!==l)for(const _ in s)(!e||!gt(e,_))&&(delete s[_],d=!0)}d&&Si(t.attrs,"set","")}function p0(t,e,n,r){const[i,s]=t.propsOptions;let a=!1,l;if(e)for(let h in e){if(Il(h))continue;const d=e[h];let p;i&&gt(i,p=Pr(h))?!s||!s.includes(p)?n[p]=d:(l||(l={}))[p]=d:md(t.emitsOptions,h)||(!(h in r)||d!==r[h])&&(r[h]=d,a=!0)}if(s){const h=at(n),d=l||It;for(let p=0;p<s.length;p++){const _=s[p];n[_]=Yg(i,h,_,d[_],t,!gt(d,_))}}return a}function Yg(t,e,n,r,i,s){const a=t[n];if(a!=null){const l=gt(a,"default");if(l&&r===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&Ke(h)){const{propsDefaults:d}=i;if(n in d)r=d[n];else{const p=pc(i);r=d[n]=h.call(null,e),p()}}else r=h;i.ce&&i.ce._setProp(n,r)}a[0]&&(s&&!l?r=!1:a[1]&&(r===""||r===Ko(n))&&(r=!0))}return r}const gN=new WeakMap;function g0(t,e,n=!1){const r=n?gN:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,a={},l=[];let h=!1;if(!Ke(t)){const p=_=>{h=!0;const[v,E]=g0(_,e,!0);sn(a,v),E&&l.push(...E)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!s&&!h)return At(t)&&r.set(t,Ba),Ba;if(Ve(s))for(let p=0;p<s.length;p++){const _=Pr(s[p]);Tw(_)&&(a[_]=It)}else if(s)for(const p in s){const _=Pr(p);if(Tw(_)){const v=s[p],E=a[_]=Ve(v)||Ke(v)?{type:v}:sn({},v),N=E.type;let M=!1,F=!0;if(Ve(N))for(let Q=0;Q<N.length;++Q){const j=N[Q],z=Ke(j)&&j.name;if(z==="Boolean"){M=!0;break}else z==="String"&&(F=!1)}else M=Ke(N)&&N.name==="Boolean";E[0]=M,E[1]=F,(M||gt(E,"default"))&&l.push(_)}}const d=[a,l];return At(t)&&r.set(t,d),d}function Tw(t){return t[0]!=="$"&&!Il(t)}const h_=t=>t==="_"||t==="_ctx"||t==="$stable",f_=t=>Ve(t)?t.map(Jr):[Jr(t)],mN=(t,e,n)=>{if(e._n)return e;const r=Bk((...i)=>f_(e(...i)),n);return r._c=!1,r},m0=(t,e,n)=>{const r=t._ctx;for(const i in t){if(h_(i))continue;const s=t[i];if(Ke(s))e[i]=mN(i,s,r);else if(s!=null){const a=f_(s);e[i]=()=>a}}},_0=(t,e)=>{const n=f_(e);t.slots.default=()=>n},y0=(t,e,n)=>{for(const r in e)(n||!h_(r))&&(t[r]=e[r])},_N=(t,e,n)=>{const r=t.slots=f0();if(t.vnode.shapeFlag&32){const i=e._;i?(y0(r,e,n),n&&vT(r,"_",i,!0)):m0(e,r)}else e&&_0(t,e)},yN=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,a=It;if(r.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:y0(i,e,n):(s=!e.$stable,m0(e,i)),a=e}else e&&(_0(t,e),a={default:1});if(s)for(const l in i)!h_(l)&&a[l]==null&&delete i[l]},rn=kN;function vN(t){return wN(t)}function wN(t,e){const n=hd();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:l,createComment:h,setText:d,setElementText:p,parentNode:_,nextSibling:v,setScopeId:E=ei,insertStaticContent:N}=t,M=(C,V,B,Z=null,ie=null,Y=null,pe=void 0,fe=null,le=!!V.dynamicChildren)=>{if(C===V)return;C&&!ws(C,V)&&(Z=ee(C),Rt(C,ie,Y,!0),C=null),V.patchFlag===-2&&(le=!1,V.dynamicChildren=null);const{type:re,ref:Se,shapeFlag:ge}=V;switch(re){case _d:F(C,V,B,Z);break;case yn:Q(C,V,B,Z);break;case hg:C==null&&j(V,B,Z,pe);break;case er:O(C,V,B,Z,ie,Y,pe,fe,le);break;default:ge&1?J(C,V,B,Z,ie,Y,pe,fe,le):ge&6?P(C,V,B,Z,ie,Y,pe,fe,le):(ge&64||ge&128)&&re.process(C,V,B,Z,ie,Y,pe,fe,le,be)}Se!=null&&ie?Rl(Se,C&&C.ref,Y,V||C,!V):Se==null&&C&&C.ref!=null&&Rl(C.ref,null,Y,C,!0)},F=(C,V,B,Z)=>{if(C==null)r(V.el=l(V.children),B,Z);else{const ie=V.el=C.el;V.children!==C.children&&d(ie,V.children)}},Q=(C,V,B,Z)=>{C==null?r(V.el=h(V.children||""),B,Z):V.el=C.el},j=(C,V,B,Z)=>{[C.el,C.anchor]=N(C.children,V,B,Z,C.el,C.anchor)},z=({el:C,anchor:V},B,Z)=>{let ie;for(;C&&C!==V;)ie=v(C),r(C,B,Z),C=ie;r(V,B,Z)},G=({el:C,anchor:V})=>{let B;for(;C&&C!==V;)B=v(C),i(C),C=B;i(V)},J=(C,V,B,Z,ie,Y,pe,fe,le)=>{if(V.type==="svg"?pe="svg":V.type==="math"&&(pe="mathml"),C==null)oe(V,B,Z,ie,Y,pe,fe,le);else{const re=C.el&&C.el._isVueCE?C.el:null;try{re&&re._beginPatch(),A(C,V,ie,Y,pe,fe,le)}finally{re&&re._endPatch()}}},oe=(C,V,B,Z,ie,Y,pe,fe)=>{let le,re;const{props:Se,shapeFlag:ge,transition:Re,dirs:Ce}=C;if(le=C.el=a(C.type,Y,Se&&Se.is,Se),ge&8?p(le,C.children):ge&16&&S(C.children,le,null,Z,ie,cg(C,Y),pe,fe),Ce&&fo(C,null,Z,"created"),R(le,C,C.scopeId,pe,Z),Se){for(const Le in Se)Le!=="value"&&!Il(Le)&&s(le,Le,null,Se[Le],Y,Z);"value"in Se&&s(le,"value",null,Se.value,Y),(re=Se.onVnodeBeforeMount)&&Sr(re,Z,C)}Ce&&fo(C,null,Z,"beforeMount");const De=EN(ie,Re);De&&Re.beforeEnter(le),r(le,V,B),((re=Se&&Se.onVnodeMounted)||De||Ce)&&rn(()=>{re&&Sr(re,Z,C),De&&Re.enter(le),Ce&&fo(C,null,Z,"mounted")},ie)},R=(C,V,B,Z,ie)=>{if(B&&E(C,B),Z)for(let Y=0;Y<Z.length;Y++)E(C,Z[Y]);if(ie){let Y=ie.subTree;if(V===Y||Df(Y.type)&&(Y.ssContent===V||Y.ssFallback===V)){const pe=ie.vnode;R(C,pe,pe.scopeId,pe.slotScopeIds,ie.parent)}}},S=(C,V,B,Z,ie,Y,pe,fe,le=0)=>{for(let re=le;re<C.length;re++){const Se=C[re]=fe?_s(C[re]):Jr(C[re]);M(null,Se,V,B,Z,ie,Y,pe,fe)}},A=(C,V,B,Z,ie,Y,pe)=>{const fe=V.el=C.el;let{patchFlag:le,dynamicChildren:re,dirs:Se}=V;le|=C.patchFlag&16;const ge=C.props||It,Re=V.props||It;let Ce;if(B&&po(B,!1),(Ce=Re.onVnodeBeforeUpdate)&&Sr(Ce,B,V,C),Se&&fo(V,C,B,"beforeUpdate"),B&&po(B,!0),(ge.innerHTML&&Re.innerHTML==null||ge.textContent&&Re.textContent==null)&&p(fe,""),re?x(C.dynamicChildren,re,fe,B,Z,cg(V,ie),Y):pe||Be(C,V,fe,null,B,Z,cg(V,ie),Y,!1),le>0){if(le&16)k(fe,ge,Re,B,ie);else if(le&2&&ge.class!==Re.class&&s(fe,"class",null,Re.class,ie),le&4&&s(fe,"style",ge.style,Re.style,ie),le&8){const De=V.dynamicProps;for(let Le=0;Le<De.length;Le++){const We=De[Le],Bt=ge[We],qt=Re[We];(qt!==Bt||We==="value")&&s(fe,We,Bt,qt,ie,B)}}le&1&&C.children!==V.children&&p(fe,V.children)}else!pe&&re==null&&k(fe,ge,Re,B,ie);((Ce=Re.onVnodeUpdated)||Se)&&rn(()=>{Ce&&Sr(Ce,B,V,C),Se&&fo(V,C,B,"updated")},Z)},x=(C,V,B,Z,ie,Y,pe)=>{for(let fe=0;fe<V.length;fe++){const le=C[fe],re=V[fe],Se=le.el&&(le.type===er||!ws(le,re)||le.shapeFlag&198)?_(le.el):B;M(le,re,Se,null,Z,ie,Y,pe,!0)}},k=(C,V,B,Z,ie)=>{if(V!==B){if(V!==It)for(const Y in V)!Il(Y)&&!(Y in B)&&s(C,Y,V[Y],null,ie,Z);for(const Y in B){if(Il(Y))continue;const pe=B[Y],fe=V[Y];pe!==fe&&Y!=="value"&&s(C,Y,fe,pe,ie,Z)}"value"in B&&s(C,"value",V.value,B.value,ie)}},O=(C,V,B,Z,ie,Y,pe,fe,le)=>{const re=V.el=C?C.el:l(""),Se=V.anchor=C?C.anchor:l("");let{patchFlag:ge,dynamicChildren:Re,slotScopeIds:Ce}=V;Ce&&(fe=fe?fe.concat(Ce):Ce),C==null?(r(re,B,Z),r(Se,B,Z),S(V.children||[],B,Se,ie,Y,pe,fe,le)):ge>0&&ge&64&&Re&&C.dynamicChildren?(x(C.dynamicChildren,Re,B,ie,Y,pe,fe),(V.key!=null||ie&&V===ie.subTree)&&d_(C,V,!0)):Be(C,V,B,Se,ie,Y,pe,fe,le)},P=(C,V,B,Z,ie,Y,pe,fe,le)=>{V.slotScopeIds=fe,C==null?V.shapeFlag&512?ie.ctx.activate(V,B,Z,pe,le):ce(V,B,Z,ie,Y,pe,le):qe(C,V,le)},ce=(C,V,B,Z,ie,Y,pe)=>{const fe=C.component=qN(C,Z,ie);if(pd(C)&&(fe.ctx.renderer=be),$N(fe,!1,pe),fe.asyncDep){if(ie&&ie.registerDep(fe,Ye,pe),!C.el){const le=fe.subTree=Kn(yn);Q(null,le,V,B),C.placeholder=le.el}}else Ye(fe,C,V,B,ie,Y,pe)},qe=(C,V,B)=>{const Z=V.component=C.component;if(DN(C,V,B))if(Z.asyncDep&&!Z.asyncResolved){Te(Z,V,B);return}else Z.next=V,Z.update();else V.el=C.el,Z.vnode=V},Ye=(C,V,B,Z,ie,Y,pe)=>{const fe=()=>{if(C.isMounted){let{next:ge,bu:Re,u:Ce,parent:De,vnode:Le}=C;{const Qt=v0(C);if(Qt){ge&&(ge.el=Le.el,Te(C,ge,pe)),Qt.asyncDep.then(()=>{C.isUnmounted||fe()});return}}let We=ge,Bt;po(C,!1),ge?(ge.el=Le.el,Te(C,ge,pe)):ge=Le,Re&&Tl(Re),(Bt=ge.props&&ge.props.onVnodeBeforeUpdate)&&Sr(Bt,De,ge,Le),po(C,!0);const qt=bw(C),In=C.subTree;C.subTree=qt,M(In,qt,_(In.el),ee(In),C,ie,Y),ge.el=qt.el,We===null&&ON(C,qt.el),Ce&&rn(Ce,ie),(Bt=ge.props&&ge.props.onVnodeUpdated)&&rn(()=>Sr(Bt,De,ge,Le),ie)}else{let ge;const{el:Re,props:Ce}=V,{bm:De,m:Le,parent:We,root:Bt,type:qt}=C,In=Ro(V);po(C,!1),De&&Tl(De),!In&&(ge=Ce&&Ce.onVnodeBeforeMount)&&Sr(ge,We,V),po(C,!0);{Bt.ce&&Bt.ce._def.shadowRoot!==!1&&Bt.ce._injectChildStyle(qt);const Qt=C.subTree=bw(C);M(null,Qt,B,Z,C,ie,Y),V.el=Qt.el}if(Le&&rn(Le,ie),!In&&(ge=Ce&&Ce.onVnodeMounted)){const Qt=V;rn(()=>Sr(ge,We,Qt),ie)}(V.shapeFlag&256||We&&Ro(We.vnode)&&We.vnode.shapeFlag&256)&&C.a&&rn(C.a,ie),C.isMounted=!0,V=B=Z=null}};C.scope.on();const le=C.effect=new ST(fe);C.scope.off();const re=C.update=le.run.bind(le),Se=C.job=le.runIfDirty.bind(le);Se.i=C,Se.id=C.uid,le.scheduler=()=>o_(Se),po(C,!0),re()},Te=(C,V,B)=>{V.component=C;const Z=C.vnode.props;C.vnode=V,C.next=null,pN(C,V.props,Z,B),yN(C,V.children,B),Ni(),fw(C),Vi()},Be=(C,V,B,Z,ie,Y,pe,fe,le=!1)=>{const re=C&&C.children,Se=C?C.shapeFlag:0,ge=V.children,{patchFlag:Re,shapeFlag:Ce}=V;if(Re>0){if(Re&128){En(re,ge,B,Z,ie,Y,pe,fe,le);return}else if(Re&256){Ln(re,ge,B,Z,ie,Y,pe,fe,le);return}}Ce&8?(Se&16&&Xt(re,ie,Y),ge!==re&&p(B,ge)):Se&16?Ce&16?En(re,ge,B,Z,ie,Y,pe,fe,le):Xt(re,ie,Y,!0):(Se&8&&p(B,""),Ce&16&&S(ge,B,Z,ie,Y,pe,fe,le))},Ln=(C,V,B,Z,ie,Y,pe,fe,le)=>{C=C||Ba,V=V||Ba;const re=C.length,Se=V.length,ge=Math.min(re,Se);let Re;for(Re=0;Re<ge;Re++){const Ce=V[Re]=le?_s(V[Re]):Jr(V[Re]);M(C[Re],Ce,B,null,ie,Y,pe,fe,le)}re>Se?Xt(C,ie,Y,!0,!1,ge):S(V,B,Z,ie,Y,pe,fe,le,ge)},En=(C,V,B,Z,ie,Y,pe,fe,le)=>{let re=0;const Se=V.length;let ge=C.length-1,Re=Se-1;for(;re<=ge&&re<=Re;){const Ce=C[re],De=V[re]=le?_s(V[re]):Jr(V[re]);if(ws(Ce,De))M(Ce,De,B,null,ie,Y,pe,fe,le);else break;re++}for(;re<=ge&&re<=Re;){const Ce=C[ge],De=V[Re]=le?_s(V[Re]):Jr(V[Re]);if(ws(Ce,De))M(Ce,De,B,null,ie,Y,pe,fe,le);else break;ge--,Re--}if(re>ge){if(re<=Re){const Ce=Re+1,De=Ce<Se?V[Ce].el:Z;for(;re<=Re;)M(null,V[re]=le?_s(V[re]):Jr(V[re]),B,De,ie,Y,pe,fe,le),re++}}else if(re>Re)for(;re<=ge;)Rt(C[re],ie,Y,!0),re++;else{const Ce=re,De=re,Le=new Map;for(re=De;re<=Re;re++){const $t=V[re]=le?_s(V[re]):Jr(V[re]);$t.key!=null&&Le.set($t.key,re)}let We,Bt=0;const qt=Re-De+1;let In=!1,Qt=0;const fr=new Array(qt);for(re=0;re<qt;re++)fr[re]=0;for(re=Ce;re<=ge;re++){const $t=C[re];if(Bt>=qt){Rt($t,ie,Y,!0);continue}let Tn;if($t.key!=null)Tn=Le.get($t.key);else for(We=De;We<=Re;We++)if(fr[We-De]===0&&ws($t,V[We])){Tn=We;break}Tn===void 0?Rt($t,ie,Y,!0):(fr[Tn-De]=re+1,Tn>=Qt?Qt=Tn:In=!0,M($t,V[Tn],B,null,ie,Y,pe,fe,le),Bt++)}const si=In?IN(fr):Ba;for(We=si.length-1,re=qt-1;re>=0;re--){const $t=De+re,Tn=V[$t],Gi=V[$t+1],Wi=$t+1<Se?Gi.el||Gi.placeholder:Z;fr[re]===0?M(null,Tn,B,Wi,ie,Y,pe,fe,le):In&&(We<0||re!==si[We]?Dt(Tn,B,Wi,2):We--)}}},Dt=(C,V,B,Z,ie=null)=>{const{el:Y,type:pe,transition:fe,children:le,shapeFlag:re}=C;if(re&6){Dt(C.component.subTree,V,B,Z);return}if(re&128){C.suspense.move(V,B,Z);return}if(re&64){pe.move(C,V,B,be);return}if(pe===er){r(Y,V,B);for(let ge=0;ge<le.length;ge++)Dt(le[ge],V,B,Z);r(C.anchor,V,B);return}if(pe===hg){z(C,V,B);return}if(Z!==2&&re&1&&fe)if(Z===0)fe.beforeEnter(Y),r(Y,V,B),rn(()=>fe.enter(Y),ie);else{const{leave:ge,delayLeave:Re,afterLeave:Ce}=fe,De=()=>{C.ctx.isUnmounted?i(Y):r(Y,V,B)},Le=()=>{Y._isLeaving&&Y[Ai](!0),ge(Y,()=>{De(),Ce&&Ce()})};Re?Re(Y,De,Le):Le()}else r(Y,V,B)},Rt=(C,V,B,Z=!1,ie=!1)=>{const{type:Y,props:pe,ref:fe,children:le,dynamicChildren:re,shapeFlag:Se,patchFlag:ge,dirs:Re,cacheIndex:Ce}=C;if(ge===-2&&(ie=!1),fe!=null&&(Ni(),Rl(fe,null,B,C,!0),Vi()),Ce!=null&&(V.renderCache[Ce]=void 0),Se&256){V.ctx.deactivate(C);return}const De=Se&1&&Re,Le=!Ro(C);let We;if(Le&&(We=pe&&pe.onVnodeBeforeUnmount)&&Sr(We,V,C),Se&6)Ht(C.component,B,Z);else{if(Se&128){C.suspense.unmount(B,Z);return}De&&fo(C,null,V,"beforeUnmount"),Se&64?C.type.remove(C,V,B,be,Z):re&&!re.hasOnce&&(Y!==er||ge>0&&ge&64)?Xt(re,V,B,!1,!0):(Y===er&&ge&384||!ie&&Se&16)&&Xt(le,V,B),Z&&Pt(C)}(Le&&(We=pe&&pe.onVnodeUnmounted)||De)&&rn(()=>{We&&Sr(We,V,C),De&&fo(C,null,V,"unmounted")},B)},Pt=C=>{const{type:V,el:B,anchor:Z,transition:ie}=C;if(V===er){qr(B,Z);return}if(V===hg){G(C);return}const Y=()=>{i(B),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(C.shapeFlag&1&&ie&&!ie.persisted){const{leave:pe,delayLeave:fe}=ie,le=()=>pe(B,Y);fe?fe(C.el,Y,le):le()}else Y()},qr=(C,V)=>{let B;for(;C!==V;)B=v(C),i(C),C=B;i(V)},Ht=(C,V,B)=>{const{bum:Z,scope:ie,job:Y,subTree:pe,um:fe,m:le,a:re}=C;xf(le),xf(re),Z&&Tl(Z),ie.stop(),Y&&(Y.flags|=8,Rt(pe,C,V,B)),fe&&rn(fe,V),rn(()=>{C.isUnmounted=!0},V)},Xt=(C,V,B,Z=!1,ie=!1,Y=0)=>{for(let pe=Y;pe<C.length;pe++)Rt(C[pe],V,B,Z,ie)},ee=C=>{if(C.shapeFlag&6)return ee(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const V=v(C.anchor||C.el),B=V&&V[QT];return B?v(B):V};let _e=!1;const de=(C,V,B)=>{C==null?V._vnode&&Rt(V._vnode,null,null,!0):M(V._vnode||null,C,V,null,null,null,B),V._vnode=C,_e||(_e=!0,fw(),KT(),_e=!1)},be={p:M,um:Rt,m:Dt,r:Pt,mt:ce,mc:S,pc:Be,pbc:x,n:ee,o:t};return{render:de,hydrate:void 0,createApp:hN(de)}}function cg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function po({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function EN(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function d_(t,e,n=!1){const r=t.children,i=e.children;if(Ve(r)&&Ve(i))for(let s=0;s<r.length;s++){const a=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=_s(i[s]),l.el=a.el),!n&&l.patchFlag!==-2&&d_(a,l)),l.type===_d&&l.patchFlag!==-1&&(l.el=a.el),l.type===yn&&!l.el&&(l.el=a.el)}}function IN(t){const e=t.slice(),n=[0];let r,i,s,a,l;const h=t.length;for(r=0;r<h;r++){const d=t[r];if(d!==0){if(i=n[n.length-1],t[i]<d){e[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)l=s+a>>1,t[n[l]]<d?s=l+1:a=l;d<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}function v0(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:v0(e)}function xf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const TN=Symbol.for("v-scx"),bN=()=>Mr(TN);function ja(t,e,n){return w0(t,e,n)}function w0(t,e,n=It){const{immediate:r,deep:i,flush:s,once:a}=n,l=sn({},n),h=e&&r||!e&&s!=="post";let d;if(zl){if(s==="sync"){const E=bN();d=E.__watcherHandles||(E.__watcherHandles=[])}else if(!h){const E=()=>{};return E.stop=ei,E.resume=ei,E.pause=ei,E}}const p=kn;l.call=(E,N,M)=>Fr(E,p,N,M);let _=!1;s==="post"?l.scheduler=E=>{rn(E,p&&p.suspense)}:s!=="sync"&&(_=!0,l.scheduler=(E,N)=>{N?E():o_(E)}),l.augmentJob=E=>{e&&(E.flags|=4),_&&(E.flags|=2,p&&(E.id=p.uid,E.i=p))};const v=Lk(t,e,l);return zl&&(d?d.push(v):h&&v()),v}function AN(t,e,n){const r=this.proxy,i=Vt(t)?t.includes(".")?E0(r,t):()=>r[t]:t.bind(r,r);let s;Ke(e)?s=e:(s=e.handler,n=e);const a=pc(this),l=w0(i,s.bind(r),n);return a(),l}function E0(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const SN=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Pr(e)}Modifiers`]||t[`${Ko(e)}Modifiers`];function RN(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||It;let i=n;const s=e.startsWith("update:"),a=s&&SN(r,e.slice(7));a&&(a.trim&&(i=n.map(p=>Vt(p)?p.trim():p)),a.number&&(i=n.map(XO)));let l,h=r[l=ng(e)]||r[l=ng(Pr(e))];!h&&s&&(h=r[l=ng(Ko(e))]),h&&Fr(h,t,6,i);const d=r[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Fr(d,t,6,i)}}const PN=new WeakMap;function I0(t,e,n=!1){const r=n?PN:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let a={},l=!1;if(!Ke(t)){const h=d=>{const p=I0(d,e,!0);p&&(l=!0,sn(a,p))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!s&&!l?(At(t)&&r.set(t,null),null):(Ve(s)?s.forEach(h=>a[h]=null):sn(a,s),At(t)&&r.set(t,a),a)}function md(t,e){return!t||!ud(e)?!1:(e=e.slice(2).replace(/Once$/,""),gt(t,e[0].toLowerCase()+e.slice(1))||gt(t,Ko(e))||gt(t,e))}function bw(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:l,emit:h,render:d,renderCache:p,props:_,data:v,setupState:E,ctx:N,inheritAttrs:M}=t,F=Rf(t);let Q,j;try{if(n.shapeFlag&4){const G=i||r,J=G;Q=Jr(d.call(J,G,p,_,E,v,N)),j=l}else{const G=e;Q=Jr(G.length>1?G(_,{attrs:l,slots:a,emit:h}):G(_,null)),j=e.props?l:CN(l)}}catch(G){Cl.length=0,dd(G,t,1),Q=Kn(yn)}let z=Q;if(j&&M!==!1){const G=Object.keys(j),{shapeFlag:J}=z;G.length&&J&7&&(s&&G.some(Wm)&&(j=xN(j,s)),z=Li(z,j,!1,!0))}return n.dirs&&(z=Li(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&Vs(z,n.transition),Q=z,Rf(F),Q}const CN=t=>{let e;for(const n in t)(n==="class"||n==="style"||ud(n))&&((e||(e={}))[n]=t[n]);return e},xN=(t,e)=>{const n={};for(const r in t)(!Wm(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function DN(t,e,n){const{props:r,children:i,component:s}=t,{props:a,children:l,patchFlag:h}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?Aw(r,a,d):!!a;if(h&8){const p=e.dynamicProps;for(let _=0;_<p.length;_++){const v=p[_];if(a[v]!==r[v]&&!md(d,v))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Aw(r,a,d):!0:!!a;return!1}function Aw(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!md(n,s))return!0}return!1}function ON({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Df=t=>t.__isSuspense;function kN(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):Uk(t)}const er=Symbol.for("v-fgt"),_d=Symbol.for("v-txt"),yn=Symbol.for("v-cmt"),hg=Symbol.for("v-stc"),Cl=[];let ar=null;function Of(t=!1){Cl.push(ar=t?null:[])}function NN(){Cl.pop(),ar=Cl[Cl.length-1]||null}let jl=1;function kf(t,e=!1){jl+=t,t<0&&ar&&e&&(ar.hasOnce=!0)}function T0(t){return t.dynamicChildren=jl>0?ar||Ba:null,NN(),jl>0&&ar&&ar.push(t),t}function e6(t,e,n,r,i,s){return T0(A0(t,e,n,r,i,s,!0))}function Nf(t,e,n,r,i){return T0(Kn(t,e,n,r,i,!0))}function Ha(t){return t?t.__v_isVNode===!0:!1}function ws(t,e){return t.type===e.type&&t.key===e.key}const b0=({key:t})=>t!=null?t:null,of=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Vt(t)||Gt(t)||Ke(t)?{i:vn,r:t,k:e,f:!!n}:t:null);function A0(t,e=null,n=null,r=0,i=null,s=t===er?0:1,a=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&b0(e),ref:e&&of(e),scopeId:WT,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:vn};return l?(p_(h,n),s&128&&t.normalize(h)):n&&(h.shapeFlag|=Vt(n)?8:16),jl>0&&!a&&ar&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&ar.push(h),h}const Kn=VN;function VN(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===nN)&&(t=yn),Ha(t)){const l=Li(t,e,!0);return n&&p_(l,n),jl>0&&!s&&ar&&(l.shapeFlag&6?ar[ar.indexOf(t)]=l:ar.push(l)),l.patchFlag=-2,l}if(GN(t)&&(t=t.__vccOpts),e){e=LN(e);let{class:l,style:h}=e;l&&!Vt(l)&&(e.class=Ym(l)),At(h)&&(i_(h)&&!Ve(h)&&(h=sn({},h)),e.style=Jm(h))}const a=Vt(t)?1:Df(t)?128:JT(t)?64:At(t)?4:Ke(t)?2:0;return A0(t,e,n,r,i,a,s,!0)}function LN(t){return t?i_(t)||d0(t)?sn({},t):t:null}function Li(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:l,transition:h}=t,d=e?FN(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&b0(d),ref:e&&e.ref?n&&s?Ve(s)?s.concat(of(e)):[s,of(e)]:of(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==er?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Li(t.ssContent),ssFallback:t.ssFallback&&Li(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&r&&Vs(p,h.clone(p)),p}function MN(t=" ",e=0){return Kn(_d,null,t,e)}function t6(t="",e=!1){return e?(Of(),Nf(yn,null,t)):Kn(yn,null,t)}function Jr(t){return t==null||typeof t=="boolean"?Kn(yn):Ve(t)?Kn(er,null,t.slice()):Ha(t)?_s(t):Kn(_d,null,String(t))}function _s(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Li(t)}function p_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ve(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),p_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!d0(e)?e._ctx=vn:i===3&&vn&&(vn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:vn},n=32):(e=String(e),r&64?(n=16,e=[MN(e)]):n=8);t.children=e,t.shapeFlag|=n}function FN(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ym([e.class,r.class]));else if(i==="style")e.style=Jm([e.style,r.style]);else if(ud(i)){const s=e[i],a=r[i];a&&s!==a&&!(Ve(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Sr(t,e,n,r=null){Fr(t,e,7,[n,r])}const UN=c0();let BN=0;function qN(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||UN,s={uid:BN++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new TT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:g0(r,i),emitsOptions:I0(r,i),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=RN.bind(null,s),t.ce&&t.ce(s),s}let kn=null;const Us=()=>kn||vn;let Vf,Xg;{const t=hd(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};Vf=e("__VUE_INSTANCE_SETTERS__",n=>kn=n),Xg=e("__VUE_SSR_SETTERS__",n=>zl=n)}const pc=t=>{const e=kn;return Vf(t),t.scope.on(),()=>{t.scope.off(),Vf(e)}},Sw=()=>{kn&&kn.scope.off(),Vf(null)};function S0(t){return t.vnode.shapeFlag&4}let zl=!1;function $N(t,e=!1,n=!1){e&&Xg(e);const{props:r,children:i}=t.vnode,s=S0(t);dN(t,r,s,e),_N(t,i,n||e);const a=s?jN(t,e):void 0;return e&&Xg(!1),a}function jN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,iN);const{setup:r}=n;if(r){Ni();const i=t.setupContext=r.length>1?KN(t):null,s=pc(t),a=fc(r,t,0,[t.props,i]),l=mT(a);if(Vi(),s(),(l||t.sp)&&!Ro(t)&&i0(t),l){if(a.then(Sw,Sw),e)return a.then(h=>{Rw(t,h)}).catch(h=>{dd(h,t,0)});t.asyncDep=a}else Rw(t,a)}else R0(t)}function Rw(t,e,n){Ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:At(e)&&(t.setupState=$T(e)),R0(t)}function R0(t,e,n){const r=t.type;t.render||(t.render=r.render||ei);{const i=pc(t);Ni();try{sN(t)}finally{Vi(),i()}}}const zN={get(t,e){return On(t,"get",""),t[e]}};function KN(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,zN),slots:t.slots,emit:t.emit,expose:e}}function yd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy($T(Wo(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Pl)return Pl[n](t)},has(e,n){return n in e||n in Pl}})):t.proxy}function Zg(t,e=!0){return Ke(t)?t.displayName||t.name:t.name||e&&t.__name}function GN(t){return Ke(t)&&"__vccOpts"in t}const Ue=(t,e)=>Nk(t,e,zl);function Fe(t,e,n){try{kf(-1);const r=arguments.length;return r===2?At(e)&&!Ve(e)?Ha(e)?Kn(t,null,[e]):Kn(t,e):Kn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ha(n)&&(n=[n]),Kn(t,e,n))}finally{kf(1)}}const WN="3.5.23";let em;const Pw=typeof window!="undefined"&&window.trustedTypes;if(Pw)try{em=Pw.createPolicy("vue",{createHTML:t=>t})}catch{}const P0=em?t=>em.createHTML(t):t=>t,HN="http://www.w3.org/2000/svg",QN="http://www.w3.org/1998/Math/MathML",bi=typeof document!="undefined"?document:null,Cw=bi&&bi.createElement("template"),JN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?bi.createElementNS(HN,t):e==="mathml"?bi.createElementNS(QN,t):n?bi.createElement(t,{is:n}):bi.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>bi.createTextNode(t),createComment:t=>bi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>bi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const a=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Cw.innerHTML=P0(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Cw.content;if(r==="svg"||r==="mathml"){const h=l.firstChild;for(;h.firstChild;)l.appendChild(h.firstChild);l.removeChild(h)}e.insertBefore(l,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ls="transition",Zu="animation",Qa=Symbol("_vtc"),C0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},x0=sn({},e0,C0),YN=t=>(t.displayName="Transition",t.props=x0,t),XN=YN((t,{slots:e})=>Fe(jk,D0(t),e)),go=(t,e=[])=>{Ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},xw=t=>t?Ve(t)?t.some(e=>e.length>1):t.length>1:!1;function D0(t){const e={};for(const O in t)O in C0||(e[O]=t[O]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:h=s,appearActiveClass:d=a,appearToClass:p=l,leaveFromClass:_=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:E=`${n}-leave-to`}=t,N=ZN(i),M=N&&N[0],F=N&&N[1],{onBeforeEnter:Q,onEnter:j,onEnterCancelled:z,onLeave:G,onLeaveCancelled:J,onBeforeAppear:oe=Q,onAppear:R=j,onAppearCancelled:S=z}=e,A=(O,P,ce,qe)=>{O._enterCancelled=qe,ps(O,P?p:l),ps(O,P?d:a),ce&&ce()},x=(O,P)=>{O._isLeaving=!1,ps(O,_),ps(O,E),ps(O,v),P&&P()},k=O=>(P,ce)=>{const qe=O?R:j,Ye=()=>A(P,O,ce);go(qe,[P,Ye]),Dw(()=>{ps(P,O?h:s),Hr(P,O?p:l),xw(qe)||Ow(P,r,M,Ye)})};return sn(e,{onBeforeEnter(O){go(Q,[O]),Hr(O,s),Hr(O,a)},onBeforeAppear(O){go(oe,[O]),Hr(O,h),Hr(O,d)},onEnter:k(!1),onAppear:k(!0),onLeave(O,P){O._isLeaving=!0;const ce=()=>x(O,P);Hr(O,_),O._enterCancelled?(Hr(O,v),tm(O)):(tm(O),Hr(O,v)),Dw(()=>{O._isLeaving&&(ps(O,_),Hr(O,E),xw(G)||Ow(O,r,F,ce))}),go(G,[O,ce])},onEnterCancelled(O){A(O,!1,void 0,!0),go(z,[O])},onAppearCancelled(O){A(O,!0,void 0,!0),go(S,[O])},onLeaveCancelled(O){x(O),go(J,[O])}})}function ZN(t){if(t==null)return null;if(At(t))return[fg(t.enter),fg(t.leave)];{const e=fg(t);return[e,e]}}function fg(t){return ZO(t)}function Hr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Qa]||(t[Qa]=new Set)).add(e)}function ps(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Qa];n&&(n.delete(e),n.size||(t[Qa]=void 0))}function Dw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let eV=0;function Ow(t,e,n,r){const i=t._endId=++eV,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:a,timeout:l,propCount:h}=O0(t,e);if(!a)return r();const d=a+"end";let p=0;const _=()=>{t.removeEventListener(d,v),s()},v=E=>{E.target===t&&++p>=h&&_()};setTimeout(()=>{p<h&&_()},l+1),t.addEventListener(d,v)}function O0(t,e){const n=window.getComputedStyle(t),r=N=>(n[N]||"").split(", "),i=r(`${ls}Delay`),s=r(`${ls}Duration`),a=kw(i,s),l=r(`${Zu}Delay`),h=r(`${Zu}Duration`),d=kw(l,h);let p=null,_=0,v=0;e===ls?a>0&&(p=ls,_=a,v=s.length):e===Zu?d>0&&(p=Zu,_=d,v=h.length):(_=Math.max(a,d),p=_>0?a>d?ls:Zu:null,v=p?p===ls?s.length:h.length:0);const E=p===ls&&/\b(?:transform|all)(?:,|$)/.test(r(`${ls}Property`).toString());return{type:p,timeout:_,propCount:v,hasTransform:E}}function kw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Nw(n)+Nw(t[r])))}function Nw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function tm(t){return(t?t.ownerDocument:document).body.offsetHeight}function tV(t,e,n){const r=t[Qa];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Lf=Symbol("_vod"),k0=Symbol("_vsh"),n6={name:"show",beforeMount(t,{value:e},{transition:n}){t[Lf]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):el(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),el(t,!0),r.enter(t)):r.leave(t,()=>{el(t,!1)}):el(t,e))},beforeUnmount(t,{value:e}){el(t,e)}};function el(t,e){t.style.display=e?t[Lf]:"none",t[k0]=!e}const nV=Symbol(""),rV=/(?:^|;)\s*display\s*:/;function iV(t,e,n){const r=t.style,i=Vt(n);let s=!1;if(n&&!i){if(e)if(Vt(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&af(r,l,"")}else for(const a in e)n[a]==null&&af(r,a,"");for(const a in n)a==="display"&&(s=!0),af(r,a,n[a])}else if(i){if(e!==n){const a=r[nV];a&&(n+=";"+a),r.cssText=n,s=rV.test(n)}}else e&&t.removeAttribute("style");Lf in t&&(t[Lf]=s?r.display:"",t[k0]&&(r.display="none"))}const Vw=/\s*!important$/;function af(t,e,n){if(Ve(n))n.forEach(r=>af(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=sV(t,e);Vw.test(n)?t.setProperty(Ko(r),n.replace(Vw,""),"important"):t[r]=n}}const Lw=["Webkit","Moz","ms"],dg={};function sV(t,e){const n=dg[e];if(n)return n;let r=Pr(e);if(r!=="filter"&&r in t)return dg[e]=r;r=cd(r);for(let i=0;i<Lw.length;i++){const s=Lw[i]+r;if(s in t)return dg[e]=s}return e}const Mw="http://www.w3.org/1999/xlink";function Fw(t,e,n,r,i,s=sk(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Mw,e.slice(6,e.length)):t.setAttributeNS(Mw,e,n):n==null||s&&!wT(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Bi(n)?String(n):n)}function Uw(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?P0(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,h=n==null?t.type==="checkbox"?"on":"":String(n);(l!==h||!("_value"in t))&&(t.value=h),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=wT(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(i||e)}function oV(t,e,n,r){t.addEventListener(e,n,r)}function aV(t,e,n,r){t.removeEventListener(e,n,r)}const Bw=Symbol("_vei");function uV(t,e,n,r,i=null){const s=t[Bw]||(t[Bw]={}),a=s[e];if(r&&a)a.value=r;else{const[l,h]=lV(e);if(r){const d=s[e]=fV(r,i);oV(t,l,d,h)}else a&&(aV(t,l,a,h),s[e]=void 0)}}const qw=/(?:Once|Passive|Capture)$/;function lV(t){let e;if(qw.test(t)){e={};let r;for(;r=t.match(qw);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ko(t.slice(2)),e]}let pg=0;const cV=Promise.resolve(),hV=()=>pg||(cV.then(()=>pg=0),pg=Date.now());function fV(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Fr(dV(r,n.value),e,5,[r])};return n.value=t,n.attached=hV(),n}function dV(t,e){if(Ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const $w=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,pV=(t,e,n,r,i,s)=>{const a=i==="svg";e==="class"?tV(t,r,a):e==="style"?iV(t,n,r):ud(e)?Wm(e)||uV(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):gV(t,e,r,a))?(Uw(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Fw(t,e,r,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Vt(r))?Uw(t,Pr(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Fw(t,e,r,a))};function gV(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&$w(e)&&Ke(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return $w(e)&&Vt(n)?!1:e in t}const N0=new WeakMap,V0=new WeakMap,Mf=Symbol("_moveCb"),jw=Symbol("_enterCb"),mV=t=>(delete t.props.mode,t),_V=mV({name:"TransitionGroup",props:sn({},x0,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Us(),r=ZT();let i,s;return c_(()=>{if(!i.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!IV(i[0].el,n.vnode.el,a)){i=[];return}i.forEach(vV),i.forEach(wV);const l=i.filter(EV);tm(n.vnode.el),l.forEach(h=>{const d=h.el,p=d.style;Hr(d,a),p.transform=p.webkitTransform=p.transitionDuration="";const _=d[Mf]=v=>{v&&v.target!==d||(!v||v.propertyName.endsWith("transform"))&&(d.removeEventListener("transitionend",_),d[Mf]=null,ps(d,a))};d.addEventListener("transitionend",_)}),i=[]}),()=>{const a=at(t),l=D0(a);let h=a.tag||er;if(i=[],s)for(let d=0;d<s.length;d++){const p=s[d];p.el&&p.el instanceof Element&&(i.push(p),Vs(p,$l(p,l,r,n)),N0.set(p,{left:p.el.offsetLeft,top:p.el.offsetTop}))}s=e.default?a_(e.default()):[];for(let d=0;d<s.length;d++){const p=s[d];p.key!=null&&Vs(p,$l(p,l,r,n))}return Kn(h,null,s)}}}),yV=_V;function vV(t){const e=t.el;e[Mf]&&e[Mf](),e[jw]&&e[jw]()}function wV(t){V0.set(t,{left:t.el.offsetLeft,top:t.el.offsetTop})}function EV(t){const e=N0.get(t),n=V0.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function IV(t,e,n){const r=t.cloneNode(),i=t[Qa];i&&i.forEach(l=>{l.split(/\s+/).forEach(h=>h&&r.classList.remove(h))}),n.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:a}=O0(r);return s.removeChild(r),a}const TV=["ctrl","shift","alt","meta"],bV={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>TV.some(n=>t[`${n}Key`]&&!e.includes(n))},r6=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let a=0;a<e.length;a++){const l=bV[e[a]];if(l&&l(i,e))return}return t(i,...s)}))},AV=sn({patchProp:pV},JN);let zw;function SV(){return zw||(zw=vN(AV))}const L0=((...t)=>{const e=SV().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=PV(r);if(!i)return;const s=e._component;!Ke(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,RV(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e});function RV(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function PV(t){return Vt(t)?document.querySelector(t):t}function vd(t,e,n,r){return Object.defineProperty(t,e,{get:n,set:r,enumerable:!0}),t}function i6(t,e){for(const n in e)vd(t,n,e[n]);return t}const Oo=Do(!1);let nm;function CV(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function xV(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const M0="ontouchstart"in window||window.navigator.maxTouchPoints>0;function DV(t){const e=t.toLowerCase(),n=xV(e),r=CV(e,n),i={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(i[r.browser]=!0,i.version=r.version,i.versionNumber=parseInt(r.version,10)),r.platform&&(i[r.platform]=!0);const s=i.android||i.ios||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"];if(s===!0||e.indexOf("mobile")!==-1?i.mobile=!0:i.desktop=!0,i["windows phone"]&&(i.winphone=!0,delete i["windows phone"]),i.edga||i.edgios||i.edg?(i.edge=!0,r.browser="edge"):i.crios?(i.chrome=!0,r.browser="chrome"):i.fxios&&(i.firefox=!0,r.browser="firefox"),(i.ipod||i.ipad||i.iphone)&&(i.ios=!0),i.vivaldi&&(r.browser="vivaldi",i.vivaldi=!0),(i.chrome||i.opr||i.safari||i.vivaldi||i.mobile===!0&&i.ios!==!0&&s!==!0)&&(i.webkit=!0),i.opr&&(r.browser="opera",i.opera=!0),i.safari&&(i.blackberry||i.bb?(r.browser="blackberry",i.blackberry=!0):i.playbook?(r.browser="playbook",i.playbook=!0):i.android?(r.browser="android",i.android=!0):i.kindle?(r.browser="kindle",i.kindle=!0):i.silk&&(r.browser="silk",i.silk=!0)),i.name=r.browser,i.platform=r.platform,e.indexOf("electron")!==-1)i.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)i.bex=!0;else{if(window.Capacitor!==void 0?(i.capacitor=!0,i.nativeMobile=!0,i.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(i.cordova=!0,i.nativeMobile=!0,i.nativeMobileWrapper="cordova"),Oo.value===!0&&(nm={is:{...i}}),M0===!0&&i.mac===!0&&(i.desktop===!0&&i.safari===!0||i.nativeMobile===!0&&i.android!==!0&&i.ios!==!0&&i.ipad!==!0)){delete i.mac,delete i.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(i,{mobile:!0,ios:!0,platform:a,[a]:!0})}i.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete i.desktop,i.mobile=!0)}return i}const Kw=navigator.userAgent||navigator.vendor||window.opera,OV={has:{touch:!1,webStorage:!1},within:{iframe:!1}},ti={userAgent:Kw,is:DV(Kw),has:{touch:M0},within:{iframe:window.self!==window.top}},rm={install(t){const{$q:e}=t;Oo.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,ti),Oo.value=!1}),e.platform=Go(this)):e.platform=this}};{let t;vd(ti.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(rm,ti),Oo.value===!0&&(Object.assign(rm,nm,OV),nm=null)}function gc(t){return Wo(u_(t))}function kV(t){return Wo(t)}const wd=(t,e)=>{const n=Go(t);for(const r in t)vd(e,r,()=>n[r],i=>{n[r]=i});return e},ko={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(ko,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function Kl(){}function s6(t){return t.button===0}function NV(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function o6(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function F0(t){t.stopPropagation()}function im(t){t.cancelable!==!1&&t.preventDefault()}function Ia(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function a6(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",im,ko.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",im,ko.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function VV(t,e,n){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(n):n,n.forEach(i=>{i[0].addEventListener(i[1],t[i[2]],ko[i[3]])})}function LV(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],ko[r[3]])}),t[n]=void 0)}function MV(t,e=250,n){let r=null;function i(){const s=arguments,a=()=>{r=null,t.apply(this,s)};r!==null&&clearTimeout(r),r=setTimeout(a,e)}return i.cancel=()=>{r!==null&&clearTimeout(r)},i}const gg=["sm","md","lg","xl"],{passive:Gw}=ko,FV=wd({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Kl,setDebounce:Kl,install({$q:t,onSSRHydrated:e}){var _;if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,i=document.scrollingElement||document.documentElement,s=n===void 0||ti.is.mobile===!0?()=>[Math.max(window.innerWidth,i.clientWidth),Math.max(window.innerHeight,i.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-i.clientWidth,n.height*n.scale+window.innerHeight-i.clientHeight],a=((_=t.config.screen)==null?void 0:_.bodyClasses)===!0;this.__update=v=>{const[E,N]=s();if(N!==this.height&&(this.height=N),E!==this.width)this.width=E;else if(v!==!0)return;let M=this.sizes;this.gt.xs=E>=M.sm,this.gt.sm=E>=M.md,this.gt.md=E>=M.lg,this.gt.lg=E>=M.xl,this.lt.sm=E<M.sm,this.lt.md=E<M.md,this.lt.lg=E<M.lg,this.lt.xl=E<M.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,M=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",M!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${M}`)),this.name=M)};let l,h={},d=16;this.setSizes=v=>{gg.forEach(E=>{v[E]!==void 0&&(h[E]=v[E])})},this.setDebounce=v=>{d=v};const p=()=>{const v=getComputedStyle(document.body);v.getPropertyValue("--q-size-sm")&&gg.forEach(E=>{this.sizes[E]=parseInt(v.getPropertyValue(`--q-size-${E}`),10)}),this.setSizes=E=>{gg.forEach(N=>{E[N]&&(this.sizes[N]=E[N])}),this.__update(!0)},this.setDebounce=E=>{l!==void 0&&r.removeEventListener("resize",l,Gw),l=E>0?MV(this.__update,E):this.__update,r.addEventListener("resize",l,Gw)},this.setDebounce(d),Object.keys(h).length!==0?(this.setSizes(h),h=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Oo.value===!0?e.push(p):p()}}),Cn=wd({isActive:!1,mode:!1},{__media:void 0,set(t){Cn.mode=t,t==="auto"?(Cn.__media===void 0&&(Cn.__media=window.matchMedia("(prefers-color-scheme: dark)"),Cn.__updateMedia=()=>{Cn.set("auto")},Cn.__media.addListener(Cn.__updateMedia)),t=Cn.__media.matches):Cn.__media!==void 0&&(Cn.__media.removeListener(Cn.__updateMedia),Cn.__media=void 0),Cn.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Cn.set(Cn.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function UV(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let U0=!1;function BV(t){U0=t.isComposing===!0}function qV(t){return U0===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function sm(t,e){return qV(t)===!0?!1:[].concat(e).includes(t.keyCode)}function B0(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function $V({is:t,has:e,within:n},r){const i=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const s=B0(t);s!==void 0&&i.push("platform-"+s)}if(t.nativeMobile===!0){const s=t.nativeMobileWrapper;i.push(s),i.push("native-mobile"),t.ios===!0&&(r[s]===void 0||r[s].iosStatusBarPadding!==!1)&&i.push("q-ios-padding")}else t.electron===!0?i.push("electron"):t.bex===!0&&i.push("bex");return n.iframe===!0&&i.push("within-iframe"),i}function jV(){const{is:t}=ti,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const i=B0(t);i!==void 0&&n.add(`platform-${i}`)}}ti.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),ti.within.iframe===!0&&n.add("within-iframe");const r=Array.from(n).join(" ");e!==r&&(document.body.className=r)}function zV(t){for(const e in t)UV(e,t[e])}const KV={install(t){if(this.__installed!==!0){if(Oo.value===!0)jV();else{const{$q:e}=t;e.config.brand!==void 0&&zV(e.config.brand);const n=$V(ti,e.config);document.body.classList.add.apply(document.body.classList,n)}ti.is.ios===!0&&document.body.addEventListener("touchstart",Kl),window.addEventListener("keydown",BV,!0)}}},q0=()=>!0;function GV(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function WV(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function HV(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return q0;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(GV).map(WV)),()=>e.includes(window.location.hash)}const QV={__history:[],add:Kl,remove:Kl,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=ti.is;if(e!==!0&&n!==!0)return;const r=t.config[e===!0?"cordova":"capacitor"];if((r==null?void 0:r.backButton)===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=a=>{a.condition===void 0&&(a.condition=q0),this.__history.push(a)},this.remove=a=>{const l=this.__history.indexOf(a);l>=0&&this.__history.splice(l,1)};const i=HV(Object.assign({backButtonExit:!0},r)),s=()=>{if(this.__history.length){const a=this.__history[this.__history.length-1];a.condition()===!0&&(this.__history.pop(),a.handler())}else i()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",s,!1)}):window.Capacitor.Plugins.App.addListener("backButton",s)}},Ww={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Hw(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const ys=wd({__qLang:{}},{getLocale:Hw,set(t=Ww,e){const n={...t,rtl:t.rtl===!0,getLocale:Hw};{if(n.set=ys.set,ys.__langConfig===void 0||ys.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName)}Object.assign(ys.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=ys.__qLang,ys.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set"&&i!=="getLocale")}}),this.set(e||Ww))}}),JV={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},Ff=wd({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=Ff.set,Object.assign(Ff.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,vd(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set")}}),this.set(e||JV))}}),YV="_q_",u6="_q_l_",l6="_q_pc_",c6="_q_fo_",h6="_q_tabs_";function f6(){}const Uf={};let $0=!1;function XV(){$0=!0}function mg(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(mg(t[r],e[r])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let s=t.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}for(s=t.entries(),r=s.next();r.done!==!0;){if(mg(r.value[1],e.get(r.value[0]))!==!0)return!1;r=s.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const s=t.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const i=Object.keys(t).filter(s=>t[s]!==void 0);if(n=i.length,n!==Object.keys(e).filter(s=>e[s]!==void 0).length)return!1;for(r=n;r--!==0;){const s=i[r];if(mg(t[s],e[s])!==!0)return!1}return!0}return t!==t&&e!==e}function Gl(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function d6(t){return Object.prototype.toString.call(t)==="[object Date]"}function p6(t){return typeof t=="number"&&isFinite(t)}const Qw=[rm,KV,Cn,FV,QV,ys,Ff];function ZV(t,e){const n=L0(t);n.config.globalProperties=e.config.globalProperties;const{reload:r,...i}=e._context;return Object.assign(n._context,i),n}function Jw(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function eL(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(YV,n.$q),Jw(n,Qw),e.components!==void 0&&Object.values(e.components).forEach(r=>{Gl(r)===!0&&r.name!==void 0&&t.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{Gl(r)===!0&&r.name!==void 0&&t.directive(r.name,r)}),e.plugins!==void 0&&Jw(n,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&Qw.includes(r)===!1)),Oo.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}const tL=function(t,e={}){const n={version:"2.18.5"};$0===!1?(e.config!==void 0&&Object.assign(Uf,e.config),n.config={...Uf},XV()):n.config=e.config||{},eL(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},nL={name:"Quasar",version:"2.18.5",install:tL,lang:ys,iconSet:Ff};let j0;const Ed=t=>j0=t,z0=Symbol();function om(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var xl;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(xl||(xl={}));function rL(){const t=bT(!0),e=t.run(()=>Do({}));let n=[],r=[];const i=Wo({install(s){Ed(i),i._a=s,s.provide(z0,i),s.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const K0=()=>{};function Yw(t,e,n,r=K0){t.add(e);const i=()=>{t.delete(e)&&r()};return!n&&AT()&&ak(i),i}function Ta(t,...e){t.forEach(n=>{n(...e)})}const iL=t=>t(),Xw=Symbol(),_g=Symbol();function am(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];om(i)&&om(r)&&t.hasOwnProperty(n)&&!Gt(r)&&!Ps(r)?t[n]=am(i,r):t[n]=r}return t}const sL=Symbol();function oL(t){return!om(t)||!Object.prototype.hasOwnProperty.call(t,sL)}const{assign:gs}=Object;function aL(t){return!!(Gt(t)&&t.effect)}function uL(t,e,n,r){const{state:i,actions:s,getters:a}=e,l=n.state.value[t];let h;function d(){l||(n.state.value[t]=i?i():{});const p=xk(n.state.value[t]);return gs(p,s,Object.keys(a||{}).reduce((_,v)=>(_[v]=Wo(Ue(()=>{Ed(n);const E=n._s.get(t);return a[v].call(E,E)})),_),{}))}return h=G0(t,d,e,n,r,!0),h}function G0(t,e,n={},r,i,s){let a;const l=gs({actions:{}},n),h={deep:!0};let d,p,_=new Set,v=new Set,E;const N=r.state.value[t];!s&&!N&&(r.state.value[t]={}),Do({});let M;function F(S){let A;d=p=!1,typeof S=="function"?(S(r.state.value[t]),A={type:xl.patchFunction,storeId:t,events:E}):(am(r.state.value[t],S),A={type:xl.patchObject,payload:S,storeId:t,events:E});const x=M=Symbol();s_().then(()=>{M===x&&(d=!0)}),p=!0,Ta(_,A,r.state.value[t])}const Q=s?function(){const{state:A}=n,x=A?A():{};this.$patch(k=>{gs(k,x)})}:K0;function j(){a.stop(),_.clear(),v.clear(),r._s.delete(t)}const z=(S,A="")=>{if(Xw in S)return S[_g]=A,S;const x=function(){Ed(r);const k=Array.from(arguments),O=new Set,P=new Set;function ce(Te){O.add(Te)}function qe(Te){P.add(Te)}Ta(v,{args:k,name:x[_g],store:J,after:ce,onError:qe});let Ye;try{Ye=S.apply(this&&this.$id===t?this:J,k)}catch(Te){throw Ta(P,Te),Te}return Ye instanceof Promise?Ye.then(Te=>(Ta(O,Te),Te)).catch(Te=>(Ta(P,Te),Promise.reject(Te))):(Ta(O,Ye),Ye)};return x[Xw]=!0,x[_g]=A,x},G={_p:r,$id:t,$onAction:Yw.bind(null,v),$patch:F,$reset:Q,$subscribe(S,A={}){const x=Yw(_,S,A.detached,()=>k()),k=a.run(()=>ja(()=>r.state.value[t],O=>{(A.flush==="sync"?p:d)&&S({storeId:t,type:xl.direct,events:E},O)},gs({},h,A)));return x},$dispose:j},J=Go(G);r._s.set(t,J);const R=(r._a&&r._a.runWithContext||iL)(()=>r._e.run(()=>(a=bT()).run(()=>e({action:z}))));for(const S in R){const A=R[S];if(Gt(A)&&!aL(A)||Ps(A))s||(N&&oL(A)&&(Gt(A)?A.value=N[S]:am(A,N[S])),r.state.value[t][S]=A);else if(typeof A=="function"){const x=z(A,S);R[S]=x,l.actions[S]=A}}return gs(J,R),gs(at(J),R),Object.defineProperty(J,"$state",{get:()=>r.state.value[t],set:S=>{F(A=>{gs(A,S)})}}),r._p.forEach(S=>{gs(J,a.run(()=>S({store:J,app:r._a,pinia:r,options:l})))}),N&&s&&n.hydrate&&n.hydrate(J.$state,N),d=!0,p=!0,J}function lL(t,e,n){let r;const i=typeof e=="function";r=i?n:e;function s(a,l){const h=fN();return a=a||(h?Mr(z0,null):null),a&&Ed(a),a=j0,a._s.has(t)||(i?G0(t,e,r,a):uL(t,r,a)),a._s.get(t)}return s.$id=t,s}var Zw={};const W0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},H0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,h=i+2<t.length,d=h?t[i+2]:0,p=s>>2,_=(s&3)<<4|l>>4;let v=(l&15)<<2|d>>6,E=d&63;h||(E=64,a||(v=64)),r.push(n[p],n[_],n[v],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(W0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||_==null)throw new hL;const v=s<<2|l>>4;if(r.push(v),d!==64){const E=l<<4&240|d>>2;if(r.push(E),_!==64){const N=d<<6&192|_;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fL=function(t){const e=W0(t);return H0.encodeByteArray(e,!0)},Q0=function(t){return fL(t).replace(/\./g,"")},J0=function(t){try{return H0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dL(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}const pL=()=>dL().__FIREBASE_DEFAULTS__,gL=()=>{if(typeof process=="undefined"||typeof Zw=="undefined")return;const t=Zw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mL=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&J0(t[1]);return e&&JSON.parse(e)},Id=()=>{try{return pL()||gL()||mL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_L=t=>{var e,n;return(n=(e=Id())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Y0=()=>{var t;return(t=Id())===null||t===void 0?void 0:t.config},X0=t=>{var e;return(e=Id())===null||e===void 0?void 0:e[`_${t}`]};class yL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function on(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vL(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function wL(){var t;const e=(t=Id())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EL(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function IL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bL(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Z0(){return!wL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eb(){try{return typeof indexedDB=="object"}catch{return!1}}function AL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}const SL="FirebaseError";class $i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SL,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?RL(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new $i(i,l,r)}}function RL(t,e){return t.replace(PL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PL=/\{\$([^}]+)}/g;function CL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(eE(s)&&eE(a)){if(!Wl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function eE(t){return t!==null&&typeof t=="object"}function _c(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function dl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xL(t,e){const n=new DL(t,e);return n.subscribe.bind(n)}class DL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=yg),i.error===void 0&&(i.error=yg),i.complete===void 0&&(i.complete=yg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yg(){}function wn(t){return t&&t._delegate?t._delegate:t}class No{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yo="[DEFAULT]";class kL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VL(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NL(t){return t===yo?void 0:t}function VL(t){return t.instantiationMode==="EAGER"}class LL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const ML={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},FL=nt.INFO,UL={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},BL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=UL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g_{constructor(e){this.name=e,this._logLevel=FL,this._logHandler=BL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ML[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const qL=(t,e)=>e.some(n=>t instanceof n);let tE,nE;function $L(){return tE||(tE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jL(){return nE||(nE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tb=new WeakMap,um=new WeakMap,nb=new WeakMap,vg=new WeakMap,m_=new WeakMap;function zL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Cs(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&tb.set(n,t)}).catch(()=>{}),m_.set(e,t),e}function KL(t){if(um.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});um.set(t,e)}let lm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return um.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GL(t){lm=t(lm)}function WL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wg(this),e,...n);return nb.set(r,e.sort?e.sort():[e]),Cs(r)}:jL().includes(t)?function(...e){return t.apply(wg(this),e),Cs(tb.get(this))}:function(...e){return Cs(t.apply(wg(this),e))}}function HL(t){return typeof t=="function"?WL(t):(t instanceof IDBTransaction&&KL(t),qL(t,$L())?new Proxy(t,lm):t)}function Cs(t){if(t instanceof IDBRequest)return zL(t);if(vg.has(t))return vg.get(t);const e=HL(t);return e!==t&&(vg.set(t,e),m_.set(e,t)),e}const wg=t=>m_.get(t);function QL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Cs(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Cs(a.result),h.oldVersion,h.newVersion,Cs(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),l.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const JL=["get","getKey","getAll","getAllKeys","count"],YL=["put","add","delete","clear"],Eg=new Map;function rE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eg.get(e))return Eg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=YL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JL.includes(n)))return;const s=async function(a,...l){const h=this.transaction(a,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&h.done]))[0]};return Eg.set(e,s),s}GL(t=>({...t,get:(e,n,r)=>rE(e,n)||t.get(e,n,r),has:(e,n)=>!!rE(e,n)||t.has(e,n)}));class XL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ZL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cm="@firebase/app",iE="0.10.13";const Mi=new g_("@firebase/app"),eM="@firebase/app-compat",tM="@firebase/analytics-compat",nM="@firebase/analytics",rM="@firebase/app-check-compat",iM="@firebase/app-check",sM="@firebase/auth",oM="@firebase/auth-compat",aM="@firebase/database",uM="@firebase/data-connect",lM="@firebase/database-compat",cM="@firebase/functions",hM="@firebase/functions-compat",fM="@firebase/installations",dM="@firebase/installations-compat",pM="@firebase/messaging",gM="@firebase/messaging-compat",mM="@firebase/performance",_M="@firebase/performance-compat",yM="@firebase/remote-config",vM="@firebase/remote-config-compat",wM="@firebase/storage",EM="@firebase/storage-compat",IM="@firebase/firestore",TM="@firebase/vertexai-preview",bM="@firebase/firestore-compat",AM="firebase",SM="10.14.1";const hm="[DEFAULT]",RM={[cm]:"fire-core",[eM]:"fire-core-compat",[nM]:"fire-analytics",[tM]:"fire-analytics-compat",[iM]:"fire-app-check",[rM]:"fire-app-check-compat",[sM]:"fire-auth",[oM]:"fire-auth-compat",[aM]:"fire-rtdb",[uM]:"fire-data-connect",[lM]:"fire-rtdb-compat",[cM]:"fire-fn",[hM]:"fire-fn-compat",[fM]:"fire-iid",[dM]:"fire-iid-compat",[pM]:"fire-fcm",[gM]:"fire-fcm-compat",[mM]:"fire-perf",[_M]:"fire-perf-compat",[yM]:"fire-rc",[vM]:"fire-rc-compat",[wM]:"fire-gcs",[EM]:"fire-gcs-compat",[IM]:"fire-fst",[bM]:"fire-fst-compat",[TM]:"fire-vertex","fire-js":"fire-js",[AM]:"fire-js-all"};const Vo=new Map,fm=new Map,dm=new Map;function sE(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if(dm.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;dm.set(e,t);for(const n of Vo.values())sE(n,t);for(const n of fm.values())sE(n,t);return!0}function __(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yr(t){return t.settings!==void 0}const PM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new mc("app","Firebase",PM);class CM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}const fu=SM;function rb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xs.create("bad-app-name",{appName:String(i)});if(n||(n=Y0()),!n)throw xs.create("no-options");const s=Vo.get(i);if(s){if(Wl(n,s.options)&&Wl(r,s.config))return s;throw xs.create("duplicate-app",{appName:i})}const a=new LL(i);for(const h of dm.values())a.addComponent(h);const l=new CM(n,r,a);return Vo.set(i,l),l}function xM(t=hm){const e=Vo.get(t);if(!e&&t===hm&&Y0())return rb();if(!e)throw xs.create("no-app",{appName:t});return e}function DM(){return Array.from(Vo.values())}async function OM(t){let e=!1;const n=t.name;Vo.has(n)?(e=!0,Vo.delete(n)):fm.has(n)&&t.decRefCount()<=0&&(fm.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Ds(t,e,n){var r;let i=(r=RM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(l.join(" "));return}Ja(new No(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const kM="firebase-heartbeat-database",NM=1,Hl="firebase-heartbeat-store";let Ig=null;function ib(){return Ig||(Ig=QL(kM,NM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xs.create("idb-open",{originalErrorMessage:t.message})})),Ig}async function VM(t){try{const n=(await ib()).transaction(Hl),r=await n.objectStore(Hl).get(sb(t));return await n.done,r}catch(e){if(e instanceof $i)Mi.warn(e.message);else{const n=xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(n.message)}}}async function oE(t,e){try{const r=(await ib()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,sb(t)),await r.done}catch(n){if(n instanceof $i)Mi.warn(n.message);else{const r=xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mi.warn(r.message)}}}function sb(t){return`${t.name}!${t.options.appId}`}const LM=1024,MM=720*60*60*1e3;class FM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=aE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=MM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=aE(),{heartbeatsToSend:r,unsentEntries:i}=UM(this._heartbeatsCache.heartbeats),s=Q0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mi.warn(n),""}}}function aE(){return new Date().toISOString().substring(0,10)}function UM(t,e=LM){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),uE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),uE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eb()?AL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function uE(t){return Q0(JSON.stringify({version:2,heartbeats:t})).length}function qM(t){Ja(new No("platform-logger",e=>new XL(e),"PRIVATE")),Ja(new No("heartbeat",e=>new FM(e),"PRIVATE")),Ds(cm,iE,t),Ds(cm,iE,"esm2017"),Ds("fire-js","")}qM("");var lE=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};var Co,ob;(function(){var t;function e(R,S){function A(){}A.prototype=S.prototype,R.D=S.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(x,k,O){for(var P=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)P[ce-2]=arguments[ce];return S.prototype[k].apply(x,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,S,A){A||(A=0);var x=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)x[k]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(k=0;16>k;++k)x[k]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=R.g[0],A=R.g[1],k=R.g[2];var O=R.g[3],P=S+(O^A&(k^O))+x[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[1]+3905402710&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[2]+606105819&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[3]+3250441966&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(O^A&(k^O))+x[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[5]+1200080426&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[6]+2821735955&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[7]+4249261313&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(O^A&(k^O))+x[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[9]+2336552879&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[10]+4294925233&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[11]+2304563134&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(O^A&(k^O))+x[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(k^S&(A^k))+x[13]+4254626195&4294967295,O=S+(P<<12&4294967295|P>>>20),P=k+(A^O&(S^A))+x[14]+2792965006&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(S^k&(O^S))+x[15]+1236535329&4294967295,A=k+(P<<22&4294967295|P>>>10),P=S+(k^O&(A^k))+x[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[6]+3225465664&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[11]+643717713&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[0]+3921069994&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(k^O&(A^k))+x[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[10]+38016083&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[15]+3634488961&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[4]+3889429448&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(k^O&(A^k))+x[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[14]+3275163606&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[3]+4107603335&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[8]+1163531501&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(k^O&(A^k))+x[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(S^A))+x[2]+4243563512&4294967295,O=S+(P<<9&4294967295|P>>>23),P=k+(S^A&(O^S))+x[7]+1735328473&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(k^O))+x[12]+2368359562&4294967295,A=k+(P<<20&4294967295|P>>>12),P=S+(A^k^O)+x[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[8]+2272392833&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[11]+1839030562&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[14]+4259657740&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(A^k^O)+x[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[4]+1272893353&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[7]+4139469664&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[10]+3200236656&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(A^k^O)+x[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[0]+3936430074&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[3]+3572445317&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[6]+76029189&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(A^k^O)+x[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^k)+x[12]+3873151461&4294967295,O=S+(P<<11&4294967295|P>>>21),P=k+(O^S^A)+x[15]+530742520&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^S)+x[2]+3299628645&4294967295,A=k+(P<<23&4294967295|P>>>9),P=S+(k^(A|~O))+x[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[7]+1126891415&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[14]+2878612391&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[5]+4237533241&4294967295,A=k+(P<<21&4294967295|P>>>11),P=S+(k^(A|~O))+x[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[3]+2399980690&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[10]+4293915773&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[1]+2240044497&4294967295,A=k+(P<<21&4294967295|P>>>11),P=S+(k^(A|~O))+x[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[15]+4264355552&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[6]+2734768916&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[13]+1309151649&4294967295,A=k+(P<<21&4294967295|P>>>11),P=S+(k^(A|~O))+x[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~k))+x[11]+3174756917&4294967295,O=S+(P<<10&4294967295|P>>>22),P=k+(S^(O|~A))+x[2]+718787259&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~S))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+O&4294967295}r.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var A=S-this.blockSize,x=this.B,k=this.h,O=0;O<S;){if(k==0)for(;O<=A;)i(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<S;)if(x[k++]=R.charCodeAt(O++),k==this.blockSize){i(this,x),k=0;break}}else for(;O<S;)if(x[k++]=R[O++],k==this.blockSize){i(this,x),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var A=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=A&255,A/=256;for(this.u(R),R=Array(16),S=A=0;4>S;++S)for(var x=0;32>x;x+=8)R[A++]=this.g[S]>>>x&255;return R};function s(R,S){var A=l;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=S(R)}function a(R,S){this.h=S;for(var A=[],x=!0,k=R.length-1;0<=k;k--){var O=R[k]|0;x&&O==S||(A[k]=O,x=!1)}this.g=A}var l={};function h(R){return-128<=R&&128>R?s(R,function(S){return new a([S|0],0>S?-1:0)}):new a([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return F(d(-R));for(var S=[],A=1,x=0;R>=A;x++)S[x]=R/A|0,A*=4294967296;return new a(S,0)}function p(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return F(p(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(S,8)),x=_,k=0;k<R.length;k+=8){var O=Math.min(8,R.length-k),P=parseInt(R.substring(k,k+O),S);8>O?(O=d(Math.pow(S,O)),x=x.j(O).add(d(P))):(x=x.j(A),x=x.add(d(P)))}return x}var _=h(0),v=h(1),E=h(16777216);t=a.prototype,t.m=function(){if(M(this))return-F(this).m();for(var R=0,S=1,A=0;A<this.g.length;A++){var x=this.i(A);R+=(0<=x?x:4294967296+x)*S,S*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(M(this))return"-"+F(this).toString(R);for(var S=d(Math.pow(R,6)),A=this,x="";;){var k=G(A,S).g;A=Q(A,k.j(S));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=k,N(A))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function M(R){return R.h==-1}t.l=function(R){return R=Q(this,R),M(R)?-1:N(R)?0:1};function F(R){for(var S=R.g.length,A=[],x=0;x<S;x++)A[x]=~R.g[x];return new a(A,~R.h).add(v)}t.abs=function(){return M(this)?F(this):this},t.add=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0,k=0;k<=S;k++){var O=x+(this.i(k)&65535)+(R.i(k)&65535),P=(O>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);x=P>>>16,O&=65535,P&=65535,A[k]=P<<16|O}return new a(A,A[A.length-1]&-2147483648?-1:0)};function Q(R,S){return R.add(F(S))}t.j=function(R){if(N(this)||N(R))return _;if(M(this))return M(R)?F(this).j(F(R)):F(F(this).j(R));if(M(R))return F(this.j(F(R)));if(0>this.l(E)&&0>R.l(E))return d(this.m()*R.m());for(var S=this.g.length+R.g.length,A=[],x=0;x<2*S;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<R.g.length;k++){var O=this.i(x)>>>16,P=this.i(x)&65535,ce=R.i(k)>>>16,qe=R.i(k)&65535;A[2*x+2*k]+=P*qe,j(A,2*x+2*k),A[2*x+2*k+1]+=O*qe,j(A,2*x+2*k+1),A[2*x+2*k+1]+=P*ce,j(A,2*x+2*k+1),A[2*x+2*k+2]+=O*ce,j(A,2*x+2*k+2)}for(x=0;x<S;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=S;x<2*S;x++)A[x]=0;return new a(A,0)};function j(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function z(R,S){this.g=R,this.h=S}function G(R,S){if(N(S))throw Error("division by zero");if(N(R))return new z(_,_);if(M(R))return S=G(F(R),S),new z(F(S.g),F(S.h));if(M(S))return S=G(R,F(S)),new z(F(S.g),S.h);if(30<R.g.length){if(M(R)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var A=v,x=S;0>=x.l(R);)A=J(A),x=J(x);var k=oe(A,1),O=oe(x,1);for(x=oe(x,2),A=oe(A,2);!N(x);){var P=O.add(x);0>=P.l(R)&&(k=k.add(A),O=P),x=oe(x,1),A=oe(A,1)}return S=Q(R,k.j(S)),new z(k,S)}for(k=_;0<=R.l(S);){for(A=Math.max(1,Math.floor(R.m()/S.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=d(A),P=O.j(S);M(P)||0<P.l(R);)A-=x,O=d(A),P=O.j(S);N(O)&&(O=v),k=k.add(O),R=Q(R,P)}return new z(k,R)}t.A=function(R){return G(this,R).h},t.and=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)&R.i(x);return new a(A,this.h&R.h)},t.or=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)|R.i(x);return new a(A,this.h|R.h)},t.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)^R.i(x);return new a(A,this.h^R.h)};function J(R){for(var S=R.g.length+1,A=[],x=0;x<S;x++)A[x]=R.i(x)<<1|R.i(x-1)>>>31;return new a(A,R.h)}function oe(R,S){var A=S>>5;S%=32;for(var x=R.g.length-A,k=[],O=0;O<x;O++)k[O]=0<S?R.i(O+A)>>>S|R.i(O+A+1)<<32-S:R.i(O+A);return new a(k,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ob=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Co=a}).apply(typeof lE!="undefined"?lE:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Hh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};var ab,pl,ub,uf,pm,lb,cb,hb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,y){return c==Array.prototype||c==Object.prototype||(c[g]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var g=0;g<c.length;++g){var y=c[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(c,g){if(g)e:{var y=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var $=c[T];if(!($ in y))break e;y=y[$]}c=c[c.length-1],T=y[c],g=g(T),g!=T&&g!=null&&e(y,c,{configurable:!0,writable:!0,value:g})}}function s(c,g){c instanceof String&&(c+="");var y=0,T=!1,$={next:function(){if(!T&&y<c.length){var H=y++;return{value:g(H,c[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(c){return c||function(){return s(this,function(g,y){return y})}});var a=a||{},l=this||self;function h(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function d(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function p(c,g,y){return c.call.apply(c.bind,arguments)}function _(c,g,y){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function v(c,g,y){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,v.apply(null,arguments)}function E(c,g){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function N(c,g){function y(){}y.prototype=g.prototype,c.aa=g.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(T,$,H){for(var he=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)he[ct-2]=arguments[ct];return g.prototype[$].apply(T,he)}}function M(c){const g=c.length;if(0<g){const y=Array(g);for(let T=0;T<g;T++)y[T]=c[T];return y}return[]}function F(c,g){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(h(T)){const $=c.length||0,H=T.length||0;c.length=$+H;for(let he=0;he<H;he++)c[$+he]=T[he]}else c.push(T)}}class Q{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function j(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var J=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function oe(c,g,y){for(const T in c)g.call(y,c[T],T,c)}function R(c,g){for(const y in c)g.call(void 0,c[y],y,c)}function S(c){const g={};for(const y in c)g[y]=c[y];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let y,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(y in T)c[y]=T[y];for(let H=0;H<A.length;H++)y=A[H],Object.prototype.hasOwnProperty.call(T,y)&&(c[y]=T[y])}}function k(c){var g=1;c=c.split(":");const y=[];for(;0<g&&c.length;)y.push(c.shift()),g--;return c.length&&y.push(c.join(":")),y}function O(c){l.setTimeout(()=>{throw c},0)}function P(){var c=Ln;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ce{constructor(){this.h=this.g=null}add(g,y){const T=qe.get();T.set(g,y),this.h?this.h.next=T:this.g=T,this.h=T}}var qe=new Q(()=>new Ye,c=>c.reset());class Ye{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Be=!1,Ln=new ce,En=()=>{const c=l.Promise.resolve(void 0);Te=()=>{c.then(Dt)}};var Dt=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(y){O(y)}var g=qe;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}Be=!1};function Rt(){this.s=this.s,this.C=this.C}Rt.prototype.s=!1,Rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var qr=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};l.addEventListener("test",y,g),l.removeEventListener("test",y,g)}catch{}return c})();function Ht(c,g){if(Pt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(J){e:{try{G(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else y=="mouseover"?g=c.fromElement:y=="mouseout"&&(g=c.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Xt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ht.aa.h.call(this)}}N(Ht,Pt);var Xt={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),_e=0;function de(c,g,y,T,$){this.listener=c,this.proxy=null,this.src=g,this.type=y,this.capture=!!T,this.ha=$,this.key=++_e,this.da=this.fa=!1}function be(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $e(c){this.src=c,this.g={},this.h=0}$e.prototype.add=function(c,g,y,T,$){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var he=V(c,g,T,$);return-1<he?(g=c[he],y||(g.fa=!1)):(g=new de(g,this.src,H,!!T,$),g.fa=y,c.push(g)),g};function C(c,g){var y=g.type;if(y in c.g){var T=c.g[y],$=Array.prototype.indexOf.call(T,g,void 0),H;(H=0<=$)&&Array.prototype.splice.call(T,$,1),H&&(be(g),c.g[y].length==0&&(delete c.g[y],c.h--))}}function V(c,g,y,T){for(var $=0;$<c.length;++$){var H=c[$];if(!H.da&&H.listener==g&&H.capture==!!y&&H.ha==T)return $}return-1}var B="closure_lm_"+(1e6*Math.random()|0),Z={};function ie(c,g,y,T,$){if(Array.isArray(g)){for(var H=0;H<g.length;H++)ie(c,g[H],y,T,$);return null}return y=Ce(y),c&&c[ee]?c.K(g,y,d(T)?!!T.capture:!1,$):Y(c,g,y,!1,T,$)}function Y(c,g,y,T,$,H){if(!g)throw Error("Invalid event type");var he=d($)?!!$.capture:!!$,ct=ge(c);if(ct||(c[B]=ct=new $e(c)),y=ct.add(g,y,T,he,H),y.proxy)return y;if(T=pe(),y.proxy=T,T.src=c,T.listener=y,c.addEventListener)qr||($=he),$===void 0&&($=!1),c.addEventListener(g.toString(),T,$);else if(c.attachEvent)c.attachEvent(re(g.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function pe(){function c(y){return g.call(c.src,c.listener,y)}const g=Se;return c}function fe(c,g,y,T,$){if(Array.isArray(g))for(var H=0;H<g.length;H++)fe(c,g[H],y,T,$);else T=d(T)?!!T.capture:!!T,y=Ce(y),c&&c[ee]?(c=c.i,g=String(g).toString(),g in c.g&&(H=c.g[g],y=V(H,y,T,$),-1<y&&(be(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete c.g[g],c.h--)))):c&&(c=ge(c))&&(g=c.g[g.toString()],c=-1,g&&(c=V(g,y,T,$)),(y=-1<c?g[c]:null)&&le(y))}function le(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ee])C(g.i,c);else{var y=c.type,T=c.proxy;g.removeEventListener?g.removeEventListener(y,T,c.capture):g.detachEvent?g.detachEvent(re(y),T):g.addListener&&g.removeListener&&g.removeListener(T),(y=ge(g))?(C(y,c),y.h==0&&(y.src=null,g[B]=null)):be(c)}}}function re(c){return c in Z?Z[c]:Z[c]="on"+c}function Se(c,g){if(c.da)c=!0;else{g=new Ht(g,this);var y=c.listener,T=c.ha||c.src;c.fa&&le(c),c=y.call(T,g)}return c}function ge(c){return c=c[B],c instanceof $e?c:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(c){return typeof c=="function"?c:(c[Re]||(c[Re]=function(g){return c.handleEvent(g)}),c[Re])}function De(){Rt.call(this),this.i=new $e(this),this.M=this,this.F=null}N(De,Rt),De.prototype[ee]=!0,De.prototype.removeEventListener=function(c,g,y,T){fe(this,c,g,y,T)};function Le(c,g){var y,T=c.F;if(T)for(y=[];T;T=T.F)y.push(T);if(c=c.M,T=g.type||g,typeof g=="string")g=new Pt(g,c);else if(g instanceof Pt)g.target=g.target||c;else{var $=g;g=new Pt(T,c),x(g,$)}if($=!0,y)for(var H=y.length-1;0<=H;H--){var he=g.g=y[H];$=We(he,T,!0,g)&&$}if(he=g.g=c,$=We(he,T,!0,g)&&$,$=We(he,T,!1,g)&&$,y)for(H=0;H<y.length;H++)he=g.g=y[H],$=We(he,T,!1,g)&&$}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var y=c.g[g],T=0;T<y.length;T++)be(y[T]);delete c.g[g],c.h--}}this.F=null},De.prototype.K=function(c,g,y,T){return this.i.add(String(c),g,!1,y,T)},De.prototype.L=function(c,g,y,T){return this.i.add(String(c),g,!0,y,T)};function We(c,g,y,T){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,H=0;H<g.length;++H){var he=g[H];if(he&&!he.da&&he.capture==y){var ct=he.listener,Zt=he.ha||he.src;he.fa&&C(c.i,he),$=ct.call(Zt,T)!==!1&&$}}return $&&!T.defaultPrevented}function Bt(c,g,y){if(typeof c=="function")y&&(c=v(c,y));else if(c&&typeof c.handleEvent=="function")c=v(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(c,g||0)}function qt(c){c.g=Bt(()=>{c.g=null,c.i&&(c.i=!1,qt(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class In extends Rt{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(c){Rt.call(this),this.h=c,this.g={}}N(Qt,Rt);var fr=[];function si(c){oe(c.g,function(g,y){this.g.hasOwnProperty(y)&&le(g)},c),c.g={}}Qt.prototype.N=function(){Qt.aa.N.call(this),si(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=l.JSON.stringify,Tn=l.JSON.parse,Gi=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Wi(){}Wi.prototype.h=null;function Cc(c){return c.h||(c.h=c.i())}function xc(){}var Hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jo(){Pt.call(this,"d")}N(Jo,Pt);function yu(){Pt.call(this,"c")}N(yu,Pt);var oi={},Dc=null;function Yo(){return Dc=Dc||new De}oi.La="serverreachability";function vu(c){Pt.call(this,oi.La,c)}N(vu,Pt);function Ks(c){const g=Yo();Le(g,new vu(g))}oi.STAT_EVENT="statevent";function Oc(c,g){Pt.call(this,oi.STAT_EVENT,c),this.stat=g}N(Oc,Pt);function fn(c){const g=Yo();Le(g,new Oc(g,c))}oi.Ma="timingevent";function Xo(c,g){Pt.call(this,oi.Ma,c),this.size=g}N(Xo,Pt);function Gs(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},g)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function Wd(c,g,y,T,$,H){c.info(function(){if(c.g)if(H)for(var he="",ct=H.split("&"),Zt=0;Zt<ct.length;Zt++){var rt=ct[Zt].split("=");if(1<rt.length){var ft=rt[0];rt=rt[1];var Jt=ft.split("_");he=2<=Jt.length&&Jt[1]=="type"?he+(ft+"="+rt+"&"):he+(ft+"=redacted&")}}else he=null;else he=H;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+g+`
`+y+`
`+he})}function Hd(c,g,y,T,$,H,he){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+g+`
`+y+`
`+H+" "+he})}function Qi(c,g,y,T){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Jd(c,y)+(T?" "+T:"")})}function Qd(c,g){c.info(function(){return"TIMEOUT: "+g})}ai.prototype.info=function(){};function Jd(c,g){if(!c.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var T=y[c];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var H=$[0];if(H!="noop"&&H!="stop"&&H!="close")for(var he=1;he<$.length;he++)$[he]=""}}}}return $t(y)}catch{return g}}var Zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wu;function Ws(){}N(Ws,Wi),Ws.prototype.g=function(){return new XMLHttpRequest},Ws.prototype.i=function(){return{}},wu=new Ws;function $r(c,g,y,T){this.j=c,this.i=g,this.l=y,this.R=T||1,this.U=new Qt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nc}function Nc(){this.i=null,this.g="",this.h=!1}var Vc={},Eu={};function Iu(c,g,y){c.L=1,c.v=Yi(dr(g)),c.m=y,c.P=!0,Lc(c,null)}function Lc(c,g){c.F=Date.now(),ui(c),c.A=dr(c.v);var y=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),xu(y.i,"t",T),c.C=0,y=c.j.J,c.h=new Nc,c.g=rh(c.j,y?g:null,!c.m),0<c.O&&(c.M=new In(v(c.Y,c,c.g),c.O)),g=c.U,y=c.g,T=c.ca;var $="readystatechange";Array.isArray($)||($&&(fr[0]=$.toString()),$=fr);for(var H=0;H<$.length;H++){var he=ie(y,$[H],T||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Ks(),Wd(c.i,c.u,c.A,c.l,c.R,c.m)}$r.prototype.ca=function(c){c=c.target;const g=this.M;g&&dn(c)==3?g.j():this.Y(c)},$r.prototype.Y=function(c){try{if(c==this.g)e:{const Jt=dn(this.g);var g=this.g.Ba();const _r=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||ku(this.g)))){this.J||Jt!=4||g==7||(g==8||0>=_r?Ks(3):Ks(2)),Tu(this);var y=this.g.Z();this.X=y;t:if(Hs(this)){var T=ku(this.g);c="";var $=T.length,H=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){jr(this),Qs(this);var he="";break t}this.h.i=new l.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(T[g],{stream:!(H&&g==$-1)});T.length=0,this.h.g+=c,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=y==200,Hd(this.i,this.u,this.A,this.l,this.R,Jt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,Zt=this.g;if((ct=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(ct)){var rt=ct;break t}}rt=null}if(y=rt)Qi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ea(this,y);else{this.o=!1,this.s=3,fn(12),jr(this),Qs(this);break e}}if(this.P){y=!0;let Hn;for(;!this.J&&this.C<he.length;)if(Hn=Yd(this,he),Hn==Eu){Jt==4&&(this.s=4,fn(14),y=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Vc){this.s=4,fn(15),Qi(this.i,this.l,he,"[Invalid Chunk]"),y=!1;break}else Qi(this.i,this.l,Hn,null),ea(this,Hn);if(Hs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||he.length!=0||this.h.h||(this.s=1,fn(16),y=!1),this.o=this.o&&y,!y)Qi(this.i,this.l,he,"[Invalid Chunked Response]"),jr(this),Qs(this);else if(0<he.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),mr(ft),ft.M=!0,fn(11))}}else Qi(this.i,this.l,he,null),ea(this,he);Jt==4&&jr(this),this.o&&!this.J&&(Jt==4?wt(this.j,this):(this.o=!1,ui(this)))}else Nu(this.g),y==400&&0<he.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),jr(this),Qs(this)}}}catch{}finally{}};function Hs(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Yd(c,g){var y=c.C,T=g.indexOf(`
`,y);return T==-1?Eu:(y=Number(g.substring(y,T)),isNaN(y)?Vc:(T+=1,T+y>g.length?Eu:(g=g.slice(T,T+y),c.C=T+y,g)))}$r.prototype.cancel=function(){this.J=!0,jr(this)};function ui(c){c.S=Date.now()+c.I,Mc(c,c.I)}function Mc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Gs(v(c.ba,c),g)}function Tu(c){c.B&&(l.clearTimeout(c.B),c.B=null)}$r.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Qd(this.i,this.A),this.L!=2&&(Ks(),fn(17)),jr(this),this.s=2,Qs(this)):Mc(this,this.S-c)};function Qs(c){c.j.G==0||c.J||wt(c.j,c)}function jr(c){Tu(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,si(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ea(c,g){try{var y=c.j;if(y.G!=0&&(y.g==c||bu(y.h,c))){if(!c.K&&bu(y.h,c)&&y.G==3){try{var T=y.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)es(y),Xs(y);else break e;oa(y),fn(18)}}else y.za=$[1],0<y.za-y.T&&37500>$[2]&&y.F&&y.v==0&&!y.C&&(y.C=Gs(v(y.Za,y),6e3));if(1>=qc(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else xr(y,11)}else if((c.K||y.g==c)&&es(y),!j(g))for($=y.Da.g.parse(g),g=0;g<$.length;g++){let rt=$[g];if(y.T=rt[0],rt=rt[1],y.G==2)if(rt[0]=="c"){y.K=rt[1],y.ia=rt[2];const ft=rt[3];ft!=null&&(y.la=ft,y.j.info("VER="+y.la));const Jt=rt[4];Jt!=null&&(y.Aa=Jt,y.j.info("SVER="+y.Aa));const _r=rt[5];_r!=null&&typeof _r=="number"&&0<_r&&(T=1.5*_r,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Hn=c.g;if(Hn){const ro=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var H=T.h;H.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ta(H,H.h),H.h=null))}if(T.D){const Mu=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mu&&(T.ya=Mu,_t(T.I,T.D,Mu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var he=c;if(T.qa=aa(T,T.J?T.ia:null,T.W),he.K){Au(T.h,he);var ct=he,Zt=T.L;Zt&&(ct.I=Zt),ct.B&&(Tu(ct),ui(ct)),T.g=he}else th(T);0<y.i.length&&Zs(y)}else rt[0]!="stop"&&rt[0]!="close"||xr(y,7);else y.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?xr(y,7):sa(y):rt[0]!="noop"&&y.l&&y.l.ta(rt),y.v=0)}}Ks(4)}catch{}}var Fc=class{constructor(c,g){this.g=c,this.map=g}};function Uc(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qc(c){return c.h?1:c.g?c.g.size:0}function bu(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function ta(c,g){c.g?c.g.add(g):c.h=g}function Au(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Uc.prototype.cancel=function(){if(this.i=Su(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Su(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const y of c.g.values())g=g.concat(y.D);return g}return M(c.i)}function Ru(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map!="undefined"&&c instanceof Map||typeof Set!="undefined"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(h(c)){for(var g=[],y=c.length,T=0;T<y;T++)g.push(c[T]);return g}g=[],y=0;for(T in c)g[y++]=c[T];return g}function Xd(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map!="undefined"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set!="undefined"&&c instanceof Set)){if(h(c)||typeof c=="string"){var g=[];c=c.length;for(var y=0;y<c;y++)g.push(y);return g}g=[],y=0;for(const T in c)g[y++]=T;return g}}}function Pu(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(h(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var y=Xd(c),T=Ru(c),$=T.length,H=0;H<$;H++)g.call(void 0,T[H],y&&y[H],c)}var Js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $c(c,g){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var T=c[y].indexOf("="),$=null;if(0<=T){var H=c[y].substring(0,T);$=c[y].substring(T+1)}else H=c[y];g(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof li){this.h=c.h,Ys(this,c.j),this.o=c.o,this.g=c.g,Ji(this,c.s),this.l=c.l;var g=c.i,y=new Xi;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),jc(this,y),this.m=c.m}else c&&(g=String(c).match(Js))?(this.h=!1,Ys(this,g[1]||"",!0),this.o=ci(g[2]||""),this.g=ci(g[3]||"",!0),Ji(this,g[4]),this.l=ci(g[5]||"",!0),jc(this,g[6]||"",!0),this.m=ci(g[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}li.prototype.toString=function(){var c=[],g=this.j;g&&c.push(pr(g,Cu,!0),":");var y=this.g;return(y||g=="file")&&(c.push("//"),(g=this.o)&&c.push(pr(g,Cu,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(pr(y,y.charAt(0)=="/"?Kc:Zd,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",pr(y,Wc)),c.join("")};function dr(c){return new li(c)}function Ys(c,g,y){c.j=y?ci(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ji(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function jc(c,g,y){g instanceof Xi?(c.i=g,ep(c.i,c.h)):(y||(g=pr(g,Gc)),c.i=new Xi(g,c.h))}function _t(c,g,y){c.i.set(g,y)}function Yi(c){return _t(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ci(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function pr(c,g,y){return typeof c=="string"?(c=encodeURI(c).replace(g,zc),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function zc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cu=/[#\/\?@]/g,Zd=/[#\?:]/g,Kc=/[#\?]/g,Gc=/[#\?@]/g,Wc=/#/g;function Xi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function zr(c){c.g||(c.g=new Map,c.h=0,c.i&&$c(c.i,function(g,y){c.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Xi.prototype,t.add=function(c,g){zr(this),this.i=null,c=Zi(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(g),this.h+=1,this};function Hc(c,g){zr(c),g=Zi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Qc(c,g){return zr(c),g=Zi(c,g),c.g.has(g)}t.forEach=function(c,g){zr(this),this.g.forEach(function(y,T){y.forEach(function($){c.call(g,$,T,this)},this)},this)},t.na=function(){zr(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let T=0;T<g.length;T++){const $=c[T];for(let H=0;H<$.length;H++)y.push(g[T])}return y},t.V=function(c){zr(this);let g=[];if(typeof c=="string")Qc(this,c)&&(g=g.concat(this.g.get(Zi(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)g=g.concat(c[y])}return g},t.set=function(c,g){return zr(this),this.i=null,c=Zi(this,c),Qc(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function xu(c,g,y){Hc(c,g),0<y.length&&(c.i=null,c.g.set(Zi(c,g),M(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var T=g[y];const H=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var $=H;he[T]!==""&&($+="="+encodeURIComponent(String(he[T]))),c.push($)}}return this.i=c.join("&")};function Zi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function ep(c,g){g&&!c.j&&(zr(c),c.i=null,c.g.forEach(function(y,T){var $=T.toLowerCase();T!=$&&(Hc(this,T),xu(this,$,y))},c)),c.j=g}function tp(c,g){const y=new ai;if(l.Image){const T=new Image;T.onload=E(gr,y,"TestLoadImage: loaded",!0,g,T),T.onerror=E(gr,y,"TestLoadImage: error",!1,g,T),T.onabort=E(gr,y,"TestLoadImage: abort",!1,g,T),T.ontimeout=E(gr,y,"TestLoadImage: timeout",!1,g,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else g(!1)}function np(c,g){const y=new ai,T=new AbortController,$=setTimeout(()=>{T.abort(),gr(y,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:T.signal}).then(H=>{clearTimeout($),H.ok?gr(y,"TestPingServer: ok",!0,g):gr(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),gr(y,"TestPingServer: error",!1,g)})}function gr(c,g,y,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(y)}catch{}}function rp(){this.g=new Gi}function ip(c,g,y){const T=y||"";try{Pu(c,function($,H){let he=$;d($)&&(he=$t($)),g.push(T+H+"="+encodeURIComponent(he))})}catch($){throw g.push(T+"type="+encodeURIComponent("_badmap")),$}}function na(c){this.l=c.Ub||null,this.j=c.eb||!1}N(na,Wi),na.prototype.g=function(){return new ra(this.l,this.j)},na.prototype.i=(function(c){return function(){return c}})({});function ra(c,g){De.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ra,De),t=ra.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,ut(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lt(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ut(this)),this.g&&(this.readyState=3,ut(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream!="undefined"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?lt(this):ut(this),this.readyState==3&&Jc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,lt(this))},t.Qa=function(c){this.g&&(this.response=c,lt(this))},t.ga=function(){this.g&&lt(this)};function lt(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ut(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=g.next();return c.join(`\r
`)};function ut(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yc(c){let g="";return oe(c,function(y,T){g+=T,g+=":",g+=y,g+=`\r
`}),g}function Du(c,g,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Yc(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):_t(c,g,y))}function Ct(c){De.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ct,De);var sp=/^https?$/i,op=["POST","PUT"];t=Ct.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wu.g(),this.v=this.o?Cc(this.o):Cc(wu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(H){Xc(this,H);return}if(c=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)y.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())y.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),$=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(op,g,void 0))||T||$||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,he]of y)this.g.setRequestHeader(H,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){Xc(this,H)}};function Xc(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ou(c),Lt(c)}function Ou(c){c.A||(c.A=!0,Le(c,"complete"),Le(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Le(this,"complete"),Le(this,"abort"),Lt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lt(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zc(this):this.bb())},t.bb=function(){Zc(this)};function Zc(c){if(c.h&&typeof a!="undefined"&&(!c.v[1]||dn(c)!=4||c.Z()!=2)){if(c.u&&dn(c)==4)Bt(c.Ea,0,c);else if(Le(c,"readystatechange"),dn(c)==4){c.h=!1;try{const he=c.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var T;if(T=he===0){var $=String(c.D).match(Js)[1]||null;!$&&l.self&&l.self.location&&($=l.self.location.protocol.slice(0,-1)),T=!sp.test($?$.toLowerCase():"")}y=T}if(y)Le(c,"complete"),Le(c,"success");else{c.m=6;try{var H=2<dn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Ou(c)}}finally{Lt(c)}}}}function Lt(c,g){if(c.g){ia(c);const y=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Le(c,"ready");try{y.onreadystatechange=T}catch{}}}function ia(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function dn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Tn(g)}};function ku(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nu(c){const g={};c=(c.g&&2<=dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(j(c[T]))continue;var y=k(c[T]);const $=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=g[$]||[];g[$]=H,H.push(y)}R(g,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function un(c,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||g}function Vu(c){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=un("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=un("baseRetryDelayMs",5e3,c),this.cb=un("retryDelaySeedMs",1e4,c),this.Wa=un("forwardChannelMaxRetries",2,c),this.wa=un("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Uc(c&&c.concurrentRequestLimit),this.Da=new rp,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vu.prototype,t.la=8,t.G=1,t.connect=function(c,g,y,T){fn(0),this.W=c,this.H=g||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=aa(this,null,this.W),Zs(this)};function sa(c){if(Lu(c),c.G==3){var g=c.U++,y=dr(c.I);if(_t(y,"SID",c.K),_t(y,"RID",g),_t(y,"TYPE","terminate"),eo(c,y),g=new $r(c,c.j,g),g.L=2,g.v=Yi(dr(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=g.v,y=!0),y||(g.g=rh(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ui(g)}nh(c)}function Xs(c){c.g&&(mr(c),c.g.cancel(),c.g=null)}function Lu(c){Xs(c),c.u&&(l.clearTimeout(c.u),c.u=null),es(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Zs(c){if(!Bc(c.h)&&!c.s){c.s=!0;var g=c.Ga;Te||En(),Be||(Te(),Be=!0),Ln.add(g,c),c.B=0}}function eh(c,g){return qc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Gs(v(c.Ga,c,g),Cr(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new $r(this,this.j,c);let H=this.o;if(this.S&&(H?(H=S(H),x(H,this.S)):H=this.S),this.m!==null||this.O||($.H=H,H=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Mn(this,$,g),y=dr(this.I),_t(y,"RID",c),_t(y,"CVER",22),this.D&&_t(y,"X-HTTP-Session-Id",this.D),eo(this,y),H&&(this.O?g="headers="+encodeURIComponent(String(Yc(H)))+"&"+g:this.m&&Du(y,this.m,H)),ta(this.h,$),this.Ua&&_t(y,"TYPE","init"),this.P?(_t(y,"$req",g),_t(y,"SID","null"),$.T=!0,Iu($,y,null)):Iu($,y,g),this.G=2}}else this.G==3&&(c?bn(this,c):this.i.length==0||Bc(this.h)||bn(this))};function bn(c,g){var y;g?y=g.l:y=c.U++;const T=dr(c.I);_t(T,"SID",c.K),_t(T,"RID",y),_t(T,"AID",c.T),eo(c,T),c.m&&c.o&&Du(T,c.m,c.o),y=new $r(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Mn(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ta(c.h,y),Iu(y,T,g)}function eo(c,g){c.H&&oe(c.H,function(y,T){_t(g,T,y)}),c.l&&Pu({},function(y,T){_t(g,T,y)})}function Mn(c,g,y){y=Math.min(c.i.length,y);var T=c.l?v(c.l.Na,c.l,c):null;e:{var $=c.i;let H=-1;for(;;){const he=["count="+y];H==-1?0<y?(H=$[0].g,he.push("ofs="+H)):H=0:he.push("ofs="+H);let ct=!0;for(let Zt=0;Zt<y;Zt++){let rt=$[Zt].g;const ft=$[Zt].map;if(rt-=H,0>rt)H=Math.max(0,$[Zt].g-100),ct=!1;else try{ip(ft,he,"req"+rt+"_")}catch{T&&T(ft)}}if(ct){T=he.join("&");break e}}}return c=c.i.splice(0,y),g.D=c,T}function th(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Te||En(),Be||(Te(),Be=!0),Ln.add(g,c),c.v=0}}function oa(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Gs(v(c.Fa,c),Cr(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,to(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Gs(v(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Xs(this),to(this))};function mr(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function to(c){c.g=new $r(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=dr(c.qa);_t(g,"RID","rpc"),_t(g,"SID",c.K),_t(g,"AID",c.T),_t(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&_t(g,"TO",c.ja),_t(g,"TYPE","xmlhttp"),eo(c,g),c.m&&c.o&&Du(g,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Yi(dr(g)),y.m=null,y.P=!0,Lc(y,c)}t.Za=function(){this.C!=null&&(this.C=null,Xs(this),oa(this),fn(19))};function es(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function wt(c,g){var y=null;if(c.g==g){es(c),mr(c),c.g=null;var T=2}else if(bu(c.h,g))y=g.D,Au(c.h,g),T=1;else return;if(c.G!=0){if(g.o)if(T==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;T=Yo(),Le(T,new Xo(T,y)),Zs(c)}else th(c);else if($=g.s,$==3||$==0&&0<g.X||!(T==1&&eh(c,g)||T==2&&oa(c)))switch(y&&0<y.length&&(g=c.h,g.i=g.i.concat(y)),$){case 1:xr(c,5);break;case 4:xr(c,10);break;case 3:xr(c,6);break;default:xr(c,2)}}}function Cr(c,g){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*g}function xr(c,g){if(c.j.info("Error code "+g),g==2){var y=v(c.fb,c),T=c.Xa;const $=!T;T=new li(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ys(T,"https"),Yi(T),$?tp(T.toString(),y):np(T.toString(),y)}else fn(2);c.G=0,c.l&&c.l.sa(g),nh(c),Lu(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function nh(c){if(c.G=0,c.ka=[],c.l){const g=Su(c.h);(g.length!=0||c.i.length!=0)&&(F(c.ka,g),F(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function aa(c,g,y){var T=y instanceof li?dr(y):new li(y);if(T.g!="")g&&(T.g=g+"."+T.g),Ji(T,T.s);else{var $=l.location;T=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var H=new li(null);T&&Ys(H,T),g&&(H.g=g),$&&Ji(H,$),y&&(H.l=y),T=H}return y=c.D,g=c.ya,y&&g&&_t(T,y,g),_t(T,"VER",c.la),eo(c,T),T}function rh(c,g,y){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ct(new na({eb:y})):new Ct(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ih(){}t=ih.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ua(){}ua.prototype.g=function(c,g){return new An(c,g)};function An(c,g){De.call(this),this.g=new Vu(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!j(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!j(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ts(this)}N(An,De),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){sa(this.g)},An.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=$t(c),c=y);g.i.push(new Fc(g.Ya++,c)),g.G==3&&Zs(g)},An.prototype.N=function(){this.g.l=null,delete this.j,sa(this.g),delete this.g,An.aa.N.call(this)};function no(c){Jo.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const y in g){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}N(no,Jo);function hi(){yu.call(this),this.status=1}N(hi,yu);function ts(c){this.g=c}N(ts,ih),ts.prototype.ua=function(){Le(this.g,"a")},ts.prototype.ta=function(c){Le(this.g,new no(c))},ts.prototype.sa=function(c){Le(this.g,new hi)},ts.prototype.ra=function(){Le(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,hb=function(){return new ua},cb=function(){return Yo()},lb=oi,pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zo.NO_ERROR=0,Zo.TIMEOUT=8,Zo.HTTP_ERROR=6,uf=Zo,kc.COMPLETE="complete",ub=kc,xc.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",De.prototype.listen=De.prototype.K,pl=xc,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,ab=Ct}).apply(typeof Hh!="undefined"?Hh:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const cE="@firebase/firestore";class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");let du="10.14.0";const Lo=new g_("@firebase/firestore");function ka(){return Lo.logLevel}function ue(t,...e){if(Lo.logLevel<=nt.DEBUG){const n=e.map(y_);Lo.debug(`Firestore (${du}): ${t}`,...n)}}function Kt(t,...e){if(Lo.logLevel<=nt.ERROR){const n=e.map(y_);Lo.error(`Firestore (${du}): ${t}`,...n)}}function Ql(t,...e){if(Lo.logLevel<=nt.WARN){const n=e.map(y_);Lo.warn(`Firestore (${du}): ${t}`,...n)}}function y_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ee(t="Unexpected state"){const e=`FIRESTORE (${du}) INTERNAL ASSERTION FAILED: `+t;throw Kt(e),new Error(e)}function Pe(t,e){t||Ee()}function Ie(t,e){return t}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class $M{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Dn.UNAUTHENTICATED)))}shutdown(){}}class zM{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let s=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Oi,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},l=h=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>l(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Oi)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new $M(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new Dn(e)}}class KM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class GM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class WM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new WM(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QM(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class fb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=QM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ze(t,e){return t<e?-1:t>e?1:0}function Ya(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function db(t){return t+"\0"}class Nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Nt(0,0))}static max(){return new xe(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jl{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(),r===void 0?r=e.length-n:r>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jl?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Tt extends Jl{construct(e,n,r){return new Tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Tt(n)}static emptyPath(){return new Tt([])}}const JM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Jl{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return JM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ve(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ve(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new ve(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Tt.fromString(e))}static fromName(e){return new ye(Tt.fromString(e).popFirst(5))}static empty(){return new ye(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Tt(e.slice()))}}class Bf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function gm(t){return t.fields.find((e=>e.kind===2))}function vo(t){return t.fields.filter((e=>e.kind!==2))}Bf.UNKNOWN_ID=-1;class lf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Yl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yl(0,hr.min())}}function pb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new hr(i,ye.empty(),e)}function gb(t){return new hr(t.readTime,t.key,-1)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(xe.min(),ye.empty(),-1)}static max(){return new hr(xe.max(),ye.empty(),-1)}}function v_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}const mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _b{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bs(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==mb)throw t;ue("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):K.reject(n)}static resolve(e){return new K(((n,r)=>{n(e)}))}static reject(e){return new K(((n,r)=>{r(e)}))}static waitFor(e){return new K(((n,r)=>{let i=0,s=0,a=!1;e.forEach((l=>{++i,l.next((()=>{++s,a&&s===i&&n()}),(h=>r(h)))})),a=!0,s===i&&n()}))}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next((i=>i?K.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new K(((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let h=0;h<s;h++){const d=h;n(e[d]).next((p=>{a[d]=p,++l,l===s&&r(a)}),(p=>i(p)))}}))}static doWhile(e,n){return new K(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}class Td{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Oi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Dl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=w_(r.target.error);this.V.reject(new Dl(e,i))}}static open(e,n,r,i){try{return new Td(n,e.transaction(i,r))}catch(s){throw new Dl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new XM(n)}}class Os{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Os.S(on())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),wo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!eb())return!1;if(Os.v())return!0;const e=on(),n=Os.S(e),r=0<n&&n<10,i=yb(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ue("SimpleDb","Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;n(a)},i.onblocked=()=>{r(new Dl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ve(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ve(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Dl(e,a))},i.onupgradeneeded=s=>{ue("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next((()=>{ue("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const l=Td.open(this.db,e,s?"readonly":"readwrite",r),h=i(l).next((d=>(l.g(),d))).catch((d=>(l.abort(d),K.reject(d)))).toPromise();return h.catch((()=>{})),await l.m,h}catch(l){const h=l,d=h.name!=="FirebaseError"&&a<3;if(ue("SimpleDb","Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class YM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wo(this.B.delete())}}class Dl extends ve{constructor(e,n){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function qs(t){return t.name==="IndexedDbTransactionError"}class XM{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ue("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wo(r)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),wo(this.store.add(e))}get(e){return wo(this.store.get(e)).next((n=>(n===void 0&&(n=null),ue("SimpleDb","GET",this.store.name,e,n),n)))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),wo(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),wo(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new K(((a,l)=>{s.onerror=h=>{l(h.target.error)},s.onsuccess=h=>{a(h.target.result)}}))}{const s=this.cursor(r),a=[];return this.W(s,((l,h)=>{a.push(h)})).next((()=>a))}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new K(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}j(e,n){ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,((s,a,l)=>l.delete()))}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new K(((r,i)=>{n.onerror=s=>{const a=w_(s.target.error);i(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((l=>{l?a.continue():r()})):r()}}))}W(e,n){const r=[];return new K(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const l=a.target.result;if(!l)return void i();const h=new YM(l),d=n(l.primaryKey,l.value,h);if(d instanceof K){const p=d.catch((_=>(h.done(),K.reject(_))));r.push(p)}h.isDone?i():h.K===null?l.continue():l.continue(h.K)}})).next((()=>K.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function wo(t){return new K(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=w_(r.target.error);n(i)}}))}let hE=!1;function w_(t){const e=Os.S(on());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hE||(hE=!0,setTimeout((()=>{throw r}),0)),r}}return t}class ZM{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ue("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ue("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){qs(n)?ue("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Bs(n)}await this.X(6e4)}))}}class eF{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.te(n,e)))}te(e,n){const r=new Set;let i=n,s=!0;return K.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return ue("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next((l=>{i-=l,r.add(a)}));s=!1})))).next((()=>n-i))}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this.re(i,s))).next((l=>(ue("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l)))).next((()=>a.size))}))))}re(e,n){let r=e;return n.changes.forEach(((i,s)=>{const a=gb(s);v_(a,r)>0&&(r=a)})),new hr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class tr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tr.oe=-1;function bd(t){return t==null}function Xl(t){return t===0&&1/t==-1/0}function vb(t){return typeof t=="number"&&Number.isInteger(t)&&!Xl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Gn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fE(e)),e=tF(t.get(n),e);return fE(e)}function tF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function fE(t){return t+""}function Xr(t){const e=t.length;if(Pe(e>=2),e===2)return Pe(t.charAt(0)===""&&t.charAt(1)===""),Tt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const a=t.indexOf("",s);switch((a<0||a>n)&&Ee(),t.charAt(a+1)){case"":const l=t.substring(s,a);let h;i.length===0?h=l:(i+=l,h=i,i=""),r.push(h);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:Ee()}s=a+2}return new Tt(r)}const dE=["userId","batchId"];function cf(t,e){return[t,Gn(e)]}function wb(t,e,n){return[t,Gn(e),n]}const nF={},rF=["prefixPath","collectionGroup","readTime","documentId"],iF=["prefixPath","collectionGroup","documentId"],sF=["collectionGroup","readTime","prefixPath","documentId"],oF=["canonicalId","targetId"],aF=["targetId","path"],uF=["path","targetId"],lF=["collectionId","parent"],cF=["indexId","uid"],hF=["uid","sequenceNumber"],fF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dF=["indexId","uid","orderedDocumentKey"],pF=["userId","collectionPath","documentId"],gF=["userId","collectionPath","largestBatchId"],mF=["userId","collectionGroup","largestBatchId"],Eb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_F=[...Eb,"documentOverlays"],Ib=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tb=Ib,E_=[...Tb,"indexConfiguration","indexState","indexEntries"],yF=E_,vF=[...E_,"globals"];class mm extends _b{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function an(t,e){const n=Ie(t);return Os.F(n._e,e)}function pE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class St{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:mn.RED,this.left=i!=null?i:mn.EMPTY,this.right=s!=null?s:mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new mn(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gE(this.data.getIterator())}getIteratorFrom(e){return new gE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class gE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ba(t){return t.hasNext()?t.getNext():void 0}class nr{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new nr([])}unionWith(e){let n=new vt(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Ab extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new Ab("Invalid base64 string: "+s):s}})(e);return new Wt(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const wF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=wF.exec(t);if(Pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ls(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}function I_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function T_(t){const e=t.mapValue.fields.__previous_value__;return I_(e)?T_(e):e}function Zl(t){const e=Fi(t.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}class EF{constructor(e,n,r,i,s,a,l,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=d}}class Mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hf={nullValue:"NULL_VALUE"};function Fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?I_(t)?4:Sb(t)?9007199254740991:Ad(t)?10:11:Ee()}function ii(t,e){if(t===e)return!0;const n=Fo(t);if(n!==Fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Fi(i.timestampValue),l=Fi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Ls(i.bytesValue).isEqual(Ls(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xt(i.doubleValue),l=xt(s.doubleValue);return a===l?Xl(a)===Xl(l):isNaN(a)&&isNaN(l)}return!1})(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(pE(a)!==pE(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(l[h]===void 0||!ii(a[h],l[h])))return!1;return!0})(t,e);default:return Ee()}}function ec(t,e){return(t.values||[]).find((n=>ii(n,e)))!==void 0}function Ms(t,e){if(t===e)return 0;const n=Fo(t),r=Fo(e);if(n!==r)return ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const l=xt(s.integerValue||s.doubleValue),h=xt(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1})(t,e);case 3:return mE(t.timestampValue,e.timestampValue);case 4:return mE(Zl(t),Zl(e));case 5:return ze(t.stringValue,e.stringValue);case 6:return(function(s,a){const l=Ls(s),h=Ls(a);return l.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const l=s.split("/"),h=a.split("/");for(let d=0;d<l.length&&d<h.length;d++){const p=ze(l[d],h[d]);if(p!==0)return p}return ze(l.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const l=ze(xt(s.latitude),xt(a.latitude));return l!==0?l:ze(xt(s.longitude),xt(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return _E(t.arrayValue,e.arrayValue);case 10:return(function(s,a){var l,h,d,p;const _=s.fields||{},v=a.fields||{},E=(l=_.value)===null||l===void 0?void 0:l.arrayValue,N=(h=v.value)===null||h===void 0?void 0:h.arrayValue,M=ze(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return M!==0?M:_E(E,N)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Ss.mapValue&&a===Ss.mapValue)return 0;if(s===Ss.mapValue)return 1;if(a===Ss.mapValue)return-1;const l=s.fields||{},h=Object.keys(l),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let _=0;_<h.length&&_<p.length;++_){const v=ze(h[_],p[_]);if(v!==0)return v;const E=Ms(l[h[_]],d[p[_]]);if(E!==0)return E}return ze(h.length,p.length)})(t.mapValue,e.mapValue);default:throw Ee()}}function mE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=Fi(t),r=Fi(e),i=ze(n.seconds,r.seconds);return i!==0?i:ze(n.nanos,r.nanos)}function _E(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ms(n[i],r[i]);if(s)return s}return ze(n.length,r.length)}function Xa(t){return _m(t)}function _m(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Fi(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ls(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ye.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_m(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${_m(n.fields[a])}`;return i+"}"})(t.mapValue):Ee()}function b_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ym(t){return!!t&&"integerValue"in t}function tc(t){return!!t&&"arrayValue"in t}function yE(t){return!!t&&"nullValue"in t}function vE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ff(t){return!!t&&"mapValue"in t}function Ad(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ol(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ol(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ol(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Sb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Rb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function IF(t){return"nullValue"in t?hf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?b_(Mo.empty(),ye.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ad(t)?Rb:{mapValue:{}}:Ee()}function TF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?b_(Mo.empty(),ye.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Rb:"mapValue"in t?Ad(t)?{mapValue:{}}:Ss:Ee()}function wE(t,e){const n=Ms(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function EE(t,e){const n=Ms(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ff(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Ol(a):i.push(l.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ff(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ff(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ho(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Nn(Ol(this.value))}}function Pb(t){const e=[];return Ho(t.fields,((n,r)=>{const i=new kt([n]);if(ff(r)){const s=Pb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new nr(e)}class Ut{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,xe.min(),xe.min(),xe.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,xe.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,xe.min(),xe.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,xe.min(),xe.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Za{constructor(e,n){this.position=e,this.inclusive=n}}function IE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),n.key):r=Ms(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function TE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}class qf{constructor(e,n="asc"){this.field=e,this.dir=n}}function bF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Cb{}class st extends Cb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AF(e,n,r):n==="array-contains"?new PF(e,r):n==="in"?new Vb(e,r):n==="not-in"?new CF(e,r):n==="array-contains-any"?new xF(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SF(e,r):new RF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ms(n,this.value)):n!==null&&Fo(this.value)===Fo(n)&&this.matchesComparison(Ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yt extends Cb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yt(e,n)}matches(e){return eu(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eu(t){return t.op==="and"}function vm(t){return t.op==="or"}function A_(t){return xb(t)&&eu(t)}function xb(t){for(const e of t.filters)if(e instanceof yt)return!1;return!0}function wm(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Xa(t.value);if(A_(t))return t.filters.map((e=>wm(e))).join(",");{const e=t.filters.map((n=>wm(n))).join(",");return`${t.op}(${e})`}}function Db(t,e){return t instanceof st?(function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&ii(r.value,i.value)})(t,e):t instanceof yt?(function(r,i){return i instanceof yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,l)=>s&&Db(a,i.filters[l])),!0):!1})(t,e):void Ee()}function Ob(t,e){const n=t.filters.concat(e);return yt.create(n,t.op)}function kb(t){return t instanceof st?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`})(t):t instanceof yt?(function(n){return n.op.toString()+" {"+n.getFilters().map(kb).join(" ,")+"}"})(t):"Filter"}class AF extends st{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class SF extends st{constructor(e,n){super(e,"in",n),this.keys=Nb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class RF extends st{constructor(e,n){super(e,"not-in",n),this.keys=Nb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Nb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>ye.fromName(r.referenceValue)))}class PF extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tc(n)&&ec(n.arrayValue,this.value)}}class Vb extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class CF extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ec(this.value.arrayValue,n)}}class xF extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ec(this.value.arrayValue,r)))}}class DF{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function Em(t,e=null,n=[],r=[],i=null,s=null,a=null){return new DF(t,e,n,r,i,s,a)}function Uo(t){const e=Ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>wm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Xa(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Xa(r))).join(",")),e.ue=n}return e.ue}function yc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Db(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TE(t.startAt,e.startAt)&&TE(t.endAt,e.endAt)}function $f(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function jf(t,e){return t.filters.filter((n=>n instanceof st&&n.field.isEqual(e)))}function bE(t,e,n){let r=hf,i=!0;for(const s of jf(t,e)){let a=hf,l=!0;switch(s.op){case"<":case"<=":a=IF(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,l=!1;break;case"!=":case"not-in":a=hf}wE({value:r,inclusive:i},{value:a,inclusive:l})<0&&(r=a,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];wE({value:r,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function AE(t,e,n){let r=Ss,i=!0;for(const s of jf(t,e)){let a=Ss,l=!0;switch(s.op){case">=":case">":a=TF(s.value),l=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,l=!1;break;case"!=":case"not-in":a=Ss}EE({value:r,inclusive:i},{value:a,inclusive:l})>0&&(r=a,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];EE({value:r,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}class Sd{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Lb(t,e,n,r,i,s,a,l){return new Sd(t,e,n,r,i,s,a,l)}function vc(t){return new Sd(t)}function SE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OF(t){return t.collectionGroup!==null}function kl(t){const e=Ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new vt(kt.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(l=l.add(d.field))}))})),l})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new qf(s,r))})),n.has(kt.keyField().canonicalString())||e.ce.push(new qf(kt.keyField(),r))}return e.ce}function lr(t){const e=Ie(t);return e.le||(e.le=kF(e,kl(t))),e.le}function kF(t,e){if(t.limitType==="F")return Em(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new qf(i.field,s)}));const n=t.endAt?new Za(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Za(t.startAt.position,t.startAt.inclusive):null;return Em(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Im(t,e,n){return new Sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return yc(lr(t),lr(e))&&t.limitType===e.limitType}function Mb(t){return`${Uo(lr(t))}|lt:${t.limitType}`}function Na(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>kb(i))).join(", ")}]`),bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Xa(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Xa(i))).join(",")),`Target(${r})`})(lr(t))}; limitType=${t.limitType})`}function wc(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of kl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(a,l,h){const d=IE(a,l,h);return a.inclusive?d<=0:d<0})(r.startAt,kl(r),i)||r.endAt&&!(function(a,l,h){const d=IE(a,l,h);return a.inclusive?d>=0:d>0})(r.endAt,kl(r),i))})(t,e)}function Fb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ub(t){return(e,n)=>{let r=!1;for(const i of kl(t)){const s=NF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NF(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):(function(s,a,l){const h=a.data.field(s),d=l.data.field(s);return h!==null&&d!==null?Ms(h,d):Ee()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}class $s{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return bb(this.inner)}size(){return this.innerSize}}const VF=new St(ye.comparator);function ur(){return VF}const Bb=new St(ye.comparator);function gl(...t){let e=Bb;for(const n of t)e=e.insert(n.key,n);return e}function qb(t){let e=Bb;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Zr(){return Nl()}function $b(){return Nl()}function Nl(){return new $s((t=>t.toString()),((t,e)=>t.isEqual(e)))}const LF=new St(ye.comparator),MF=new vt(ye.comparator);function Ze(...t){let e=MF;for(const n of t)e=e.add(n);return e}const FF=new vt(ze);function S_(){return FF}function R_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function jb(t){return{integerValue:""+t}}function UF(t,e){return vb(e)?jb(e):R_(t,e)}class Pd{constructor(){this._=void 0}}function BF(t,e,n){return t instanceof nc?(function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&I_(s)&&(s=T_(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(n,e):t instanceof tu?Kb(t,e):t instanceof nu?Gb(t,e):(function(i,s){const a=zb(i,s),l=RE(a)+RE(i.Pe);return ym(a)&&ym(i.Pe)?jb(l):R_(i.serializer,l)})(t,e)}function qF(t,e,n){return t instanceof tu?Kb(t,e):t instanceof nu?Gb(t,e):n}function zb(t,e){return t instanceof rc?(function(r){return ym(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class nc extends Pd{}class tu extends Pd{constructor(e){super(),this.elements=e}}function Kb(t,e){const n=Wb(e);for(const r of t.elements)n.some((i=>ii(i,r)))||n.push(r);return{arrayValue:{values:n}}}class nu extends Pd{constructor(e){super(),this.elements=e}}function Gb(t,e){let n=Wb(e);for(const r of t.elements)n=n.filter((i=>!ii(i,r)));return{arrayValue:{values:n}}}class rc extends Pd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function RE(t){return xt(t.integerValue||t.doubleValue)}function Wb(t){return tc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class $F{constructor(e,n){this.field=e,this.transform=n}}function jF(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof tu&&i instanceof tu||r instanceof nu&&i instanceof nu?Ya(r.elements,i.elements,ii):r instanceof rc&&i instanceof rc?ii(r.Pe,i.Pe):r instanceof nc&&i instanceof nc})(t.transform,e.transform)}class zF{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cd{}function Hb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xd(t.key,Vn.none()):new pu(t.key,t.data,Vn.none());{const n=t.data,r=Nn.empty();let i=new vt(kt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ji(t.key,r,new nr(i.toArray()),Vn.none())}}function KF(t,e,n){t instanceof pu?(function(i,s,a){const l=i.value.clone(),h=CE(i.fieldTransforms,s,a.transformResults);l.setAll(h),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,n):t instanceof ji?(function(i,s,a){if(!df(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=CE(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(Qb(i)),h.setAll(l),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(t,e,n):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function Vl(t,e,n,r){return t instanceof pu?(function(s,a,l,h){if(!df(s.precondition,a))return l;const d=s.value.clone(),p=xE(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof ji?(function(s,a,l,h){if(!df(s.precondition,a))return l;const d=xE(s.fieldTransforms,h,a),p=a.data;return p.setAll(Qb(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(s,a,l){return df(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(t,e,n)}function GF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zb(r.transform,i||null);s!=null&&(n===null&&(n=Nn.empty()),n.set(r.field,s))}return n||null}function PE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ya(r,i,((s,a)=>jF(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pu extends Cd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends Cd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Qb(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function CE(t,e,n){const r=new Map;Pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,qF(a,l,n[i]))}return r}function xE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,BF(s,a,e))}return r}class xd extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jb extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class P_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$b();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const h=Hb(a,l);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(xe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,((n,r)=>PE(n,r)))&&Ya(this.baseMutations,e.baseMutations,((n,r)=>PE(n,r)))}}class C_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pe(e.mutations.length===r.length);let i=(function(){return LF})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new C_(e,n,r,i)}}class x_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WF{constructor(e,n){this.count=e,this.unchangedNames=n}}var Yt,ot;function HF(t){switch(t){default:return Ee();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function Yb(t){if(t===void 0)return Kt("GRPC error has no .code"),se.UNKNOWN;switch(t){case Yt.OK:return se.OK;case Yt.CANCELLED:return se.CANCELLED;case Yt.UNKNOWN:return se.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return se.INTERNAL;case Yt.UNAVAILABLE:return se.UNAVAILABLE;case Yt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Yt.NOT_FOUND:return se.NOT_FOUND;case Yt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Yt.ABORTED:return se.ABORTED;case Yt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Yt.DATA_LOSS:return se.DATA_LOSS;default:return Ee()}}(ot=Yt||(Yt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";function QF(){return new TextEncoder}const JF=new Co([4294967295,4294967295],0);function DE(t){const e=QF().encode(t),n=new ob;return n.update(e),new Uint8Array(n.digest())}function OE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Co([n,r],0),new Co([i,s],0)]}class D_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Co.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Co.fromNumber(r)));return i.compare(JF)===1&&(i=new Co([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=DE(e),[r,i]=OE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new D_(s,i,n);return r.forEach((l=>a.insert(l))),a}insert(e){if(this.Ie===0)return;const n=DE(e),[r,i]=OE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ec{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ec(xe.min(),i,new St(ze),ur(),Ze())}}class Ic{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ic(r,n,Ze(),Ze(),Ze())}}class pf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Xb{constructor(e,n){this.targetId=e,this.me=n}}class Zb{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class kE{constructor(){this.fe=0,this.ge=VE(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.ge.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ee()}})),new Ic(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=VE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class YF{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=NE(),this.Qe=new St(ze)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ee()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,i)=>{this.ze(i)&&n(i)}))}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if($f(s))if(r===0){const a=new ye(s.path);this.Ue(n,a,Ut.newNoDocument(a,xe.min()))}else Pe(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),h=l?this.Xe(l,e,a):1;if(h!==0){this.je(n);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=Ls(r).toUint8Array()}catch(h){if(h instanceof Ab)return Ql("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{l=new D_(a,i,s)}catch(h){return Ql(h instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)})),i}rt(e){const n=new Map;this.Be.forEach(((s,a)=>{const l=this.Je(a);if(l){if(s.current&&$f(l.target)){const h=new ye(l.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Ut.newNoDocument(h,e))}s.be&&(n.set(a,s.ve()),s.Ce())}}));let r=Ze();this.qe.forEach(((s,a)=>{let l=!0;a.forEachWhile((h=>{const d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(s))})),this.ke.forEach(((s,a)=>a.setReadTime(e)));const i=new Ec(e,n,this.Qe,this.ke,r);return this.ke=ur(),this.qe=NE(),this.Qe=new St(ze),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new kE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new vt(ze),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kE),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function NE(){return new St(ye.comparator)}function VE(){return new St(ye.comparator)}const XF={asc:"ASCENDING",desc:"DESCENDING"},ZF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eU={and:"AND",or:"OR"};class tU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tm(t,e){return t.useProto3Json||bd(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nU(t,e){return ru(t,e.toTimestamp())}function Wn(t){return Pe(!!t),xe.fromTimestamp((function(n){const r=Fi(n);return new Nt(r.seconds,r.nanos)})(t))}function O_(t,e){return bm(t,e).canonicalString()}function bm(t,e){const n=(function(i){return new Tt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function tA(t){const e=Tt.fromString(t);return Pe(cA(e)),e}function zf(t,e){return O_(t.databaseId,e.path)}function xo(t,e){const n=tA(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(iA(n))}function nA(t,e){return O_(t.databaseId,e)}function rA(t){const e=tA(t);return e.length===4?Tt.emptyPath():iA(e)}function Am(t){return new Tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iA(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LE(t,e,n){return{name:zf(t,e),fields:n.value.mapValue.fields}}function rU(t,e,n){const r=xo(t,e.name),i=Wn(e.updateTime),s=e.createTime?Wn(e.createTime):xe.min(),a=new Nn({mapValue:{fields:e.fields}}),l=Ut.newFoundDocument(r,i,s,a);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function iU(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ee()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,p){return d.useProto3Json?(Pe(p===void 0||typeof p=="string"),Wt.fromBase64String(p||"")):(Pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Wt.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(d){const p=d.code===void 0?se.UNKNOWN:Yb(d.code);return new ve(p,d.message||"")})(a);n=new Zb(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=xo(t,r.document.name),s=Wn(r.document.updateTime),a=r.document.createTime?Wn(r.document.createTime):xe.min(),l=new Nn({mapValue:{fields:r.document.fields}}),h=Ut.newFoundDocument(i,s,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new pf(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=xo(t,r.document),s=r.readTime?Wn(r.readTime):xe.min(),a=Ut.newNoDocument(i,s),l=r.removedTargetIds||[];n=new pf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=xo(t,r.document),s=r.removedTargetIds||[];n=new pf([],s,i,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new WF(i,s),l=r.targetId;n=new Xb(l,a)}}return n}function Kf(t,e){let n;if(e instanceof pu)n={update:LE(t,e.key,e.value)};else if(e instanceof xd)n={delete:zf(t,e.key)};else if(e instanceof ji)n={update:LE(t,e.key,e.data),updateMask:cU(e.fieldMask)};else{if(!(e instanceof Jb))return Ee();n={verify:zf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const l=a.transform;if(l instanceof nc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof tu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rc)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Ee()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:nU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee()})(t,e.precondition)),n}function Sm(t,e){const n=e.currentDocument?(function(s){return s.updateTime!==void 0?Vn.updateTime(Wn(s.updateTime)):s.exists!==void 0?Vn.exists(s.exists):Vn.none()})(e.currentDocument):Vn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,l){let h=null;if("setToServerValue"in l)Pe(l.setToServerValue==="REQUEST_TIME"),h=new nc;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];h=new tu(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];h=new nu(p)}else"increment"in l?h=new rc(a,l.increment):Ee();const d=kt.fromServerFormat(l.fieldPath);return new $F(d,h)})(t,i))):[];if(e.update){e.update.name;const i=xo(t,e.update.name),s=new Nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(h){const d=h.fieldPaths||[];return new nr(d.map((p=>kt.fromServerFormat(p))))})(e.updateMask);return new ji(i,s,a,n,r)}return new pu(i,s,n,r)}if(e.delete){const i=xo(t,e.delete);return new xd(i,n)}if(e.verify){const i=xo(t,e.verify);return new Jb(i,n)}return Ee()}function sU(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map((n=>(function(i,s){let a=i.updateTime?Wn(i.updateTime):Wn(s);return a.isEqual(xe.min())&&(a=Wn(s)),new zF(a,i.transformResults||[])})(n,e)))):[]}function sA(t,e){return{documents:[nA(t,e.path)]}}function oA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nA(t,i);const s=(function(d){if(d.length!==0)return lA(yt.create(d,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((p=>(function(v){return{field:Va(v.field),direction:aU(v.dir)}})(p)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Tm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{_t:n,parent:i}}function aA(t){let e=rA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pe(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=(function(_){const v=uA(_);return v instanceof yt&&A_(v)?v.getFilters():[v]})(n.where));let a=[];n.orderBy&&(a=(function(_){return _.map((v=>(function(N){return new qf(La(N.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(_){let v;return v=typeof _=="object"?_.value:_,bd(v)?null:v})(n.limit));let h=null;n.startAt&&(h=(function(_){const v=!!_.before,E=_.values||[];return new Za(E,v)})(n.startAt));let d=null;return n.endAt&&(d=(function(_){const v=!_.before,E=_.values||[];return new Za(E,v)})(n.endAt)),Lb(e,i,a,s,l,"F",h,d)}function oU(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=La(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=La(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=La(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=La(n.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}})(t):t.fieldFilter!==void 0?(function(n){return st.create(La(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return yt.create(n.compositeFilter.filters.map((r=>uA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}})(n.compositeFilter.op))})(t):Ee()}function aU(t){return XF[t]}function uU(t){return ZF[t]}function lU(t){return eU[t]}function Va(t){return{fieldPath:t.canonicalString()}}function La(t){return kt.fromServerFormat(t.fieldPath)}function lA(t){return t instanceof st?(function(n){if(n.op==="=="){if(vE(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NAN"}};if(yE(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vE(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NOT_NAN"}};if(yE(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(n.field),op:uU(n.op),value:n.value}}})(t):t instanceof yt?(function(n){const r=n.getFilters().map((i=>lA(i)));return r.length===1?r[0]:{compositeFilter:{op:lU(n.op),filters:r}}})(t):Ee()}function cU(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function cA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Pi{constructor(e,n,r,i,s=xe.min(),a=xe.min(),l=Wt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=h}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hA{constructor(e){this.ct=e}}function hU(t,e){let n;if(e.document)n=rU(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=qo(e.noDocument.readTime);n=Ut.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{const r=ye.fromSegments(e.unknownDocument.path),i=qo(e.unknownDocument.version);n=Ut.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const s=new Nt(i[0],i[1]);return xe.fromTimestamp(s)})(e.readTime)),n}function ME(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Gf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:zf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:ru(s,a.version.toTimestamp()),createTime:ru(s,a.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Bo(e.version)};else{if(!e.isUnknownDocument())return Ee();r.unknownDocument={path:n.path.toArray(),version:Bo(e.version)}}return r}function Gf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Bo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qo(t){const e=new Nt(t.seconds,t.nanoseconds);return xe.fromTimestamp(e)}function Eo(t,e){const n=(e.baseMutations||[]).map((s=>Sm(t.ct,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];a.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>Sm(t.ct,s))),i=Nt.fromMillis(e.localWriteTimeMs);return new P_(e.batchId,i,n,r)}function _l(t){const e=qo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?qo(t.lastLimboFreeSnapshotVersion):xe.min();let r;return r=(function(s){return s.documents!==void 0})(t.query)?(function(s){return Pe(s.documents.length===1),lr(vc(rA(s.documents[0])))})(t.query):(function(s){return lr(aA(s))})(t.query),new Pi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Wt.fromBase64String(t.resumeToken))}function fA(t,e){const n=Bo(e.snapshotVersion),r=Bo(e.lastLimboFreeSnapshotVersion);let i;i=$f(e.target)?sA(t.ct,e.target):oA(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dA(t){const e=aA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Im(e,e.limit,"L"):e}function Tg(t,e){return new x_(e.largestBatchId,Sm(t.ct,e.overlayMutation))}function FE(t,e){const n=e.path.lastSegment();return[t,Gn(e.path.popLast()),n]}function UE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Bo(r.readTime),documentKey:Gn(r.documentKey.path),largestBatchId:r.largestBatchId}}class fU{getBundleMetadata(e,n){return BE(e).get(n).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:qo(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,n){return BE(e).put((function(i){return{bundleId:i.id,createTime:Bo(Wn(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return qE(e).get(n).next((r=>{if(r)return(function(s){return{name:s.name,query:dA(s.bundledQuery),readTime:qo(s.readTime)}})(r)}))}saveNamedQuery(e,n){return qE(e).put((function(i){return{name:i.name,readTime:Bo(Wn(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function BE(t){return an(t,"bundles")}function qE(t){return an(t,"namedQueries")}class Dd{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Dd(e,r)}getOverlay(e,n){return tl(e).get(FE(this.userId,n)).next((r=>r?Tg(this.serializer,r):null))}getOverlays(e,n){const r=Zr();return K.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((s,a)=>{const l=new x_(n,a);i.push(this.ht(e,l))})),K.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((a=>i.add(Gn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(tl(e).j("collectionPathOverlayIndex",l))})),K.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Zr(),s=Gn(n),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return tl(e).U("collectionPathOverlayIndex",a).next((l=>{for(const h of l){const d=Tg(this.serializer,h);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const s=Zr();let a;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return tl(e).J({index:"collectionGroupOverlayIndex",range:l},((h,d,p)=>{const _=Tg(this.serializer,d);s.size()<i||_.largestBatchId===a?(s.set(_.getKey(),_),a=_.largestBatchId):p.done()})).next((()=>s))}ht(e,n){return tl(e).put((function(i,s,a){const[l,h,d]=FE(s,a.mutation.key);return{userId:s,collectionPath:h,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Kf(i.ct,a.mutation)}})(this.serializer,this.userId,n))}}function tl(t){return an(t,"documentOverlays")}class dU{Pt(e){return an(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?Wt.fromUint8Array(r):Wt.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Io{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(xt(e.integerValue));else if("doubleValue"in e){const r=xt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Xl(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Fi(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ls(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Sb(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Ad(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Ee()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const a="value",l=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(xt(l)),this.Vt(a,n),this.Tt(s[a],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),ye.fromName(e).path.forEach((r=>{this.dt(n,60),this.Dt(r,n)}))}dt(e,n){e.At(n)}ft(e){e.At(2)}}Io.vt=new Io;function pU(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function $E(t){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=pU(255&r[s]);if(i+=a,a!==8)break}return i})(t);return Math.ceil(e/8)}class gU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=$E(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=$E(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class mU{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class _U{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class nl{constructor(){this.jt=new gU,this.Ht=new mU(this.jt),this.Jt=new _U(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class To{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new To(this.indexId,this.documentKey,this.arrayValue,r)}}function cs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=jE(t.arrayValue,e.arrayValue),n!==0?n:(n=jE(t.directionalValue,e.directionalValue),n!==0?n:ye.comparator(t.documentKey,e.documentKey)))}function jE(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}class zE{constructor(e){this.Xt=new vt(((n,r)=>kt.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Pe(e.collectionGroup===this.collectionId),this.nn)return!1;const n=gm(e);if(n!==void 0&&!this.sn(n))return!1;const r=vo(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const h=r[s];if(!this.on(l,h)||!this._n(this.en[a++],h))return!1}++s}for(;s<r.length;++s){const l=r[s];if(a>=this.en.length||!this._n(this.en[a++],l))return!1}return!0}an(){if(this.nn)return null;let e=new vt(kt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new lf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new lf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new lf(r.field,r.dir==="asc"?0:1)));return new Bf(Bf.UNKNOWN_ID,this.collectionId,n,Yl.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function pA(t){var e,n;if(Pe(t instanceof st||t instanceof yt),t instanceof st){if(t instanceof Vb){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map((s=>st.create(t.field,"==",s))))||[];return yt.create(i,"or")}return t}const r=t.filters.map((i=>pA(i)));return yt.create(r,t.op)}function yU(t){if(t.getFilters().length===0)return[];const e=Cm(pA(t));return Pe(gA(e)),Rm(e)||Pm(e)?[e]:e.getFilters()}function Rm(t){return t instanceof st}function Pm(t){return t instanceof yt&&A_(t)}function gA(t){return Rm(t)||Pm(t)||(function(n){if(n instanceof yt&&vm(n)){for(const r of n.getFilters())if(!Rm(r)&&!Pm(r))return!1;return!0}return!1})(t)}function Cm(t){if(Pe(t instanceof st||t instanceof yt),t instanceof st)return t;if(t.filters.length===1)return Cm(t.filters[0]);const e=t.filters.map((r=>Cm(r)));let n=yt.create(e,t.op);return n=Wf(n),gA(n)?n:(Pe(n instanceof yt),Pe(eu(n)),Pe(n.filters.length>1),n.filters.reduce(((r,i)=>k_(r,i))))}function k_(t,e){let n;return Pe(t instanceof st||t instanceof yt),Pe(e instanceof st||e instanceof yt),n=t instanceof st?e instanceof st?(function(i,s){return yt.create([i,s],"and")})(t,e):KE(t,e):e instanceof st?KE(e,t):(function(i,s){if(Pe(i.filters.length>0&&s.filters.length>0),eu(i)&&eu(s))return Ob(i,s.getFilters());const a=vm(i)?i:s,l=vm(i)?s:i,h=a.filters.map((d=>k_(d,l)));return yt.create(h,"or")})(t,e),Wf(n)}function KE(t,e){if(eu(e))return Ob(e,t.getFilters());{const n=e.filters.map((r=>k_(t,r)));return yt.create(n,"or")}}function Wf(t){if(Pe(t instanceof st||t instanceof yt),t instanceof st)return t;const e=t.getFilters();if(e.length===1)return Wf(e[0]);if(xb(t))return t;const n=e.map((i=>Wf(i))),r=[];return n.forEach((i=>{i instanceof st?r.push(i):i instanceof yt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:yt.create(r,t.op)}class vU{constructor(){this.un=new N_}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(hr.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class N_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new vt(Tt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(Tt.comparator)).toArray()}}const Jh=new Uint8Array(0);class wU{constructor(e,n){this.databaseId=n,this.cn=new N_,this.ln=new $s((r=>Uo(r)),((r,i)=>yc(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.cn.add(n)}));const s={collectionId:r,parent:Gn(i)};return GE(e).put(s)}return K.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[db(n),""],!1,!0);return GE(e).U(i).next((s=>{for(const a of s){if(a.collectionId!==n)break;r.push(Xr(a.parent))}return r}))}addFieldIndex(e,n){const r=rl(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(n);delete i.indexId;const s=r.add(i);if(n.indexState){const a=Sa(e);return s.next((l=>{a.put(UE(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return s.next()}deleteFieldIndex(e,n){const r=rl(e),i=Sa(e),s=Aa(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=rl(e),r=Aa(e),i=Sa(e);return n.j().next((()=>r.j())).next((()=>i.j()))}createTargetIndexes(e,n){return K.forEach(this.hn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new zE(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,n){const r=Aa(e);let i=!0;const s=new Map;return K.forEach(this.hn(n),(a=>this.Pn(e,a).next((l=>{i&&(i=!!l),s.set(a,l)})))).next((()=>{if(i){let a=Ze();const l=[];return K.forEach(s,((h,d)=>{ue("IndexedDbIndexManager",`Using index ${(function(z){return`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map((G=>`${G.fieldPath}:${G.kind}`)).join(",")}`})(h)} to execute ${Uo(n)}`);const p=(function(z,G){const J=gm(G);if(J===void 0)return null;for(const oe of jf(z,J.fieldPath))switch(oe.op){case"array-contains-any":return oe.value.arrayValue.values||[];case"array-contains":return[oe.value]}return null})(d,h),_=(function(z,G){const J=new Map;for(const oe of vo(G))for(const R of jf(z,oe.fieldPath))switch(R.op){case"==":case"in":J.set(oe.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return J.set(oe.fieldPath.canonicalString(),R.value),Array.from(J.values())}return null})(d,h),v=(function(z,G){const J=[];let oe=!0;for(const R of vo(G)){const S=R.kind===0?bE(z,R.fieldPath,z.startAt):AE(z,R.fieldPath,z.startAt);J.push(S.value),oe&&(oe=S.inclusive)}return new Za(J,oe)})(d,h),E=(function(z,G){const J=[];let oe=!0;for(const R of vo(G)){const S=R.kind===0?AE(z,R.fieldPath,z.endAt):bE(z,R.fieldPath,z.endAt);J.push(S.value),oe&&(oe=S.inclusive)}return new Za(J,oe)})(d,h),N=this.In(h,d,v),M=this.In(h,d,E),F=this.Tn(h,d,_),Q=this.En(h.indexId,p,N,v.inclusive,M,E.inclusive,F);return K.forEach(Q,(j=>r.G(j,n.limit).next((z=>{z.forEach((G=>{const J=ye.fromSegments(G.documentKey);a.has(J)||(a=a.add(J),l.push(J))}))}))))})).next((()=>l))}return K.resolve(null)}))}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=yU(yt.create(e.filters,"and")).map((r=>Em(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,n),n)}En(e,n,r,i,s,a,l){const h=(n!=null?n.length:1)*Math.max(r.length,s.length),d=h/(n!=null?n.length:1),p=[];for(let _=0;_<h;++_){const v=n?this.dn(n[_/d]):Jh,E=this.An(e,v,r[_%d],i),N=this.Rn(e,v,s[_%d],a),M=l.map((F=>this.An(e,v,F,!0)));p.push(...this.createRange(E,N,M))}return p}An(e,n,r,i){const s=new To(e,ye.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new To(e,ye.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new zE(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const l of s)r.rn(l)&&(!a||l.fields.length>a.fields.length)&&(a=l);return a}))}getIndexType(e,n){let r=2;const i=this.hn(n);return K.forEach(i,(s=>this.Pn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(h){let d=new vt(kt.comparator),p=!1;for(const _ of h.filters)for(const v of _.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:d=d.add(v.field));for(const _ of h.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(n)&&i.length>1&&r===2?1:r))}Vn(e,n){const r=new nl;for(const i of vo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);Io.vt.It(s,a)}return r.zt()}dn(e){const n=new nl;return Io.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new nl;return Io.vt.It(b_(this.databaseId,n),r.Yt((function(s){const a=vo(s);return a.length===0?0:a[a.length-1].kind})(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new nl);let s=0;for(const a of vo(e)){const l=r[s++];for(const h of i)if(this.fn(n,a.fieldPath)&&tc(l))i=this.gn(i,a,l);else{const d=h.Yt(a.kind);Io.vt.It(l,d)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const l of i){const h=new nl;h.seed(l.zt()),Io.vt.It(a,h.Yt(n.kind)),s.push(h)}return s}fn(e,n){return!!e.filters.find((r=>r instanceof st&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=rl(e),i=Sa(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next((s=>{const a=[];return K.forEach(s,(l=>i.get([l.indexId,this.uid]).next((h=>{a.push((function(p,_){const v=_?new Yl(_.sequenceNumber,new hr(qo(_.readTime),new ye(Xr(_.documentKey)),_.largestBatchId)):Yl.empty(),E=p.fields.map((([N,M])=>new lf(kt.fromServerFormat(N),M)));return new Bf(p.indexId,p.collectionGroup,E,v)})(l,h))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ze(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=rl(e),s=Sa(e);return this.yn(e).next((a=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next((l=>K.forEach(l,(h=>s.put(UE(h.indexId,this.uid,a,r))))))))}updateIndexEntries(e,n){const r=new Map;return K.forEach(n,((i,s)=>{const a=r.get(i.collectionGroup);return(a?K.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),K.forEach(l,(h=>this.wn(e,i,h).next((d=>{const p=this.Sn(s,h);return d.isEqual(p)?K.resolve():this.bn(e,s,h,d,p)})))))))}))}Dn(e,n,r,i){return Aa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Aa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Aa(e);let s=new vt(cs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},((a,l)=>{s=s.add(new To(r.indexId,n,l.arrayValue,l.directionalValue))})).next((()=>s))}Sn(e,n){let r=new vt(cs);const i=this.Vn(n,e);if(i==null)return r;const s=gm(n);if(s!=null){const a=e.data.field(s.fieldPath);if(tc(a))for(const l of a.arrayValue.values||[])r=r.add(new To(n.indexId,e.key,this.dn(l),i))}else r=r.add(new To(n.indexId,e.key,Jh,i));return r}bn(e,n,r,i,s){ue("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return(function(h,d,p,_,v){const E=h.getIterator(),N=d.getIterator();let M=ba(E),F=ba(N);for(;M||F;){let Q=!1,j=!1;if(M&&F){const z=p(M,F);z<0?j=!0:z>0&&(Q=!0)}else M!=null?j=!0:Q=!0;Q?(_(F),F=ba(N)):j?(v(M),M=ba(E)):(M=ba(E),F=ba(N))}})(i,s,cs,(l=>{a.push(this.Dn(e,n,r,l))}),(l=>{a.push(this.vn(e,n,r,l))})),K.waitFor(a)}yn(e){let n=1;return Sa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((a,l)=>cs(a,l))).filter(((a,l,h)=>!l||cs(a,h[l-1])!==0));const i=[];i.push(e);for(const a of r){const l=cs(a,e),h=cs(a,n);if(l===0)i[0]=e.Zt();else if(l>0&&h<0)i.push(a),i.push(a.Zt());else if(h>0)break}i.push(n);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const l=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Jh,[]],h=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Jh,[]];s.push(IDBKeyRange.bound(l,h))}return s}Cn(e,n){return cs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(WE)}getMinOffset(e,n){return K.mapArray(this.hn(n),(r=>this.Pn(e,r).next((i=>i||Ee())))).next(WE)}}function GE(t){return an(t,"collectionParents")}function Aa(t){return an(t,"indexEntries")}function rl(t){return an(t,"indexConfiguration")}function Sa(t){return an(t,"indexState")}function WE(t){Pe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;v_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hr(e.readTime,e.documentKey,n)}const HE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mA(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let l=0;const h=r.J({range:a},((p,_,v)=>(l++,v.delete())));s.push(h.next((()=>{Pe(l===1)})));const d=[];for(const p of n.mutations){const _=wb(e,p.key.path,n.batchId);s.push(i.delete(_)),d.push(p.key)}return K.waitFor(s).next((()=>d))}function Hf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ee();e=t.noDocument}return JSON.stringify(e).length}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(41943040,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);class Od{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Pe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Od(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hs(e).J({index:"userMutationsIndex",range:r},((i,s,a)=>{n=!1,a.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const s=Ma(e),a=hs(e);return a.add({}).next((l=>{Pe(typeof l=="number");const h=new P_(l,n,r,i),d=(function(E,N,M){const F=M.baseMutations.map((j=>Kf(E.ct,j))),Q=M.mutations.map((j=>Kf(E.ct,j)));return{userId:N,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:F,mutations:Q}})(this.serializer,this.userId,h),p=[];let _=new vt(((v,E)=>ze(v.canonicalString(),E.canonicalString())));for(const v of i){const E=wb(this.userId,v.key.path,l);_=_.add(v.key.path.popLast()),p.push(a.put(d)),p.push(s.put(E,nF))}return _.forEach((v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Fn[l]=h.keys()})),K.waitFor(p).next((()=>h))}))}lookupMutationBatch(e,n){return hs(e).get(n).next((r=>r?(Pe(r.userId===this.userId),Eo(this.serializer,r)):null))}Mn(e,n){return this.Fn[n]?K.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return hs(e).J({index:"userMutationsIndex",range:i},((a,l,h)=>{l.userId===this.userId&&(Pe(l.batchId>=r),s=Eo(this.serializer,l)),h.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hs(e).J({index:"userMutationsIndex",range:n,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hs(e).U("userMutationsIndex",n).next((r=>r.map((i=>Eo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=cf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ma(e).J({range:i},((a,l,h)=>{const[d,p,_]=a,v=Xr(p);if(d===this.userId&&n.path.isEqual(v))return hs(e).get(_).next((E=>{if(!E)throw Ee();Pe(E.userId===this.userId),s.push(Eo(this.serializer,E))}));h.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(ze);const i=[];return n.forEach((s=>{const a=cf(this.userId,s.path),l=IDBKeyRange.lowerBound(a),h=Ma(e).J({range:l},((d,p,_)=>{const[v,E,N]=d,M=Xr(E);v===this.userId&&s.path.isEqual(M)?r=r.add(N):_.done()}));i.push(h)})),K.waitFor(i).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=cf(this.userId,r),a=IDBKeyRange.lowerBound(s);let l=new vt(ze);return Ma(e).J({range:a},((h,d,p)=>{const[_,v,E]=h,N=Xr(v);_===this.userId&&r.isPrefixOf(N)?N.length===i&&(l=l.add(E)):p.done()})).next((()=>this.xn(e,l)))}xn(e,n){const r=[],i=[];return n.forEach((s=>{i.push(hs(e).get(s).next((a=>{if(a===null)throw Ee();Pe(a.userId===this.userId),r.push(Eo(this.serializer,a))})))})),K.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return mA(e._e,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.On(n.batchId)})),K.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return K.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return Ma(e).J({range:r},((s,a,l)=>{if(s[0]===this.userId){const h=Xr(s[1]);i.push(h)}else l.done()})).next((()=>{Pe(i.length===0)}))}))}containsKey(e,n){return _A(e,this.userId,n)}Nn(e){return yA(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function _A(t,e,n){const r=cf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Ma(t).J({range:s,H:!0},((l,h,d)=>{const[p,_,v]=l;p===e&&_===i&&(a=!0),d.done()})).next((()=>a))}function hs(t){return an(t,"mutations")}function Ma(t){return an(t,"documentMutations")}function yA(t){return an(t,"mutationQueues")}class $o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $o(0)}static kn(){return new $o(-1)}}class EU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next((n=>{const r=new $o(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((n=>xe.fromTimestamp(new Nt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.qn(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i))))}addTargetData(e,n){return this.Kn(e,n).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Ra(e).delete(n.targetId))).next((()=>this.qn(e))).next((r=>(Pe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,n,r){let i=0;const s=[];return Ra(e).J(((a,l)=>{const h=_l(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(i++,s.push(this.removeTargetData(e,h)))})).next((()=>K.waitFor(s))).next((()=>i))}forEachTarget(e,n){return Ra(e).J(((r,i)=>{const s=_l(i);n(s)}))}qn(e){return QE(e).get("targetGlobalKey").next((n=>(Pe(n!==null),n)))}Qn(e,n){return QE(e).put("targetGlobalKey",n)}Kn(e,n){return Ra(e).put(fA(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Uo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ra(e).J({range:i,index:"queryTargetsIndex"},((a,l,h)=>{const d=_l(l);yc(n,d.target)&&(s=d,h.done())})).next((()=>s))}addMatchingKeys(e,n,r){const i=[],s=Es(e);return n.forEach((a=>{const l=Gn(a.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,a))})),K.waitFor(i)}removeMatchingKeys(e,n,r){const i=Es(e);return K.forEach(n,(s=>{const a=Gn(s.path);return K.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,n){const r=Es(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Es(e);let s=Ze();return i.J({range:r,H:!0},((a,l,h)=>{const d=Xr(a[1]),p=new ye(d);s=s.add(p)})).next((()=>s))}containsKey(e,n){const r=Gn(n.path),i=IDBKeyRange.bound([r],[db(r)],!1,!0);let s=0;return Es(e).J({index:"documentTargetsIndex",H:!0,range:i},(([a,l],h,d)=>{a!==0&&(s++,d.done())})).next((()=>s>0))}ot(e,n){return Ra(e).get(n).next((r=>r?_l(r):null))}}function Ra(t){return an(t,"targets")}function QE(t){return an(t,"targetGlobal")}function Es(t){return an(t,"targetDocuments")}function JE([t,e],[n,r]){const i=ze(t,n);return i===0?ze(e,r):i}class IU{constructor(e){this.Un=e,this.buffer=new vt(JE),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();JE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qs(n)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Bs(n)}await this.Hn(3e5)}))}}class bU{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return K.resolve(tr.oe);const r=new IU(n);return this.Jn.forEachTarget(e,(i=>r.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>r.zn(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(HE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HE):this.Xn(e,n)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,a,l,h,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,a=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,l=Date.now(),this.removeTargets(e,r,n)))).next((_=>(s=_,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(d=Date.now(),ka()<=nt.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(h-l)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-p}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:_}))))}}function AU(t,e){return new bU(t,e)}class SU{constructor(e,n){this.db=e,this.garbageCollector=AU(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}er(e){let n=0;return this.Zn(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,((r,i)=>n(i)))}addReference(e,n,r){return Yh(e,r)}removeReference(e,n,r){return Yh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Yh(e,n)}nr(e,n){return(function(i,s){let a=!1;return yA(i).Y((l=>_A(i,l,s).next((h=>(h&&(a=!0),K.resolve(!h)))))).next((()=>a))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,((a,l)=>{if(l<=n){const h=this.nr(e,a).next((d=>{if(!d)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,xe.min()),Es(e).delete((function(_){return[0,Gn(_.path)]})(a)))))}));i.push(h)}})).next((()=>K.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Yh(e,n)}tr(e,n){const r=Es(e);let i,s=tr.oe;return r.J({index:"documentTargetsIndex"},(([a,l],{path:h,sequenceNumber:d})=>{a===0?(s!==tr.oe&&n(new ye(Xr(i)),s),s=d,i=h):s=tr.oe})).next((()=>{s!==tr.oe&&n(new ye(Xr(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yh(t,e){return Es(t).put((function(r,i){return{targetId:0,path:Gn(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class vA{constructor(){this.changes=new $s((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mo(e).put(r)}removeEntry(e,n,r){return mo(e).delete((function(s,a){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Gf(a),l[l.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.rr(e,r))))}getEntry(e,n){let r=Ut.newInvalidDocument(n);return mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(il(n))},((i,s)=>{r=this.ir(n,s)})).next((()=>r))}sr(e,n){let r={size:0,document:Ut.newInvalidDocument(n)};return mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(il(n))},((i,s)=>{r={document:this.ir(n,s),size:Hf(s)}})).next((()=>r))}getEntries(e,n){let r=ur();return this._r(e,n,((i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)})).next((()=>r))}ar(e,n){let r=ur(),i=new St(ye.comparator);return this._r(e,n,((s,a)=>{const l=this.ir(s,a);r=r.insert(s,l),i=i.insert(s,Hf(a))})).next((()=>({documents:r,ur:i})))}_r(e,n,r){if(n.isEmpty())return K.resolve();let i=new vt(ZE);n.forEach((h=>i=i.add(h)));const s=IDBKeyRange.bound(il(i.first()),il(i.last())),a=i.getIterator();let l=a.getNext();return mo(e).J({index:"documentKeyIndex",range:s},((h,d,p)=>{const _=ye.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;l&&ZE(l,_)<0;)r(l,null),l=a.getNext();l&&l.isEqual(_)&&(r(l,d),l=a.hasNext()?a.getNext():null),l?p.$(il(l)):p.done()})).next((()=>{for(;l;)r(l,null),l=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,s){const a=n.path,l=[a.popLast().toArray(),a.lastSegment(),Gf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mo(e).U(IDBKeyRange.bound(l,h,!0)).next((d=>{s==null||s.incrementDocumentReadCount(d.length);let p=ur();for(const _ of d){const v=this.ir(ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);v.isFoundDocument()&&(wc(n,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p}))}getAllFromCollectionGroup(e,n,r,i){let s=ur();const a=XE(n,r),l=XE(n,hr.max());return mo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,l,!0)},((h,d,p)=>{const _=this.ir(ye.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(_.key,_),s.size===i&&p.done()})).next((()=>s))}newChangeBuffer(e){return new PU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return YE(e).get("remoteDocumentGlobalKey").next((n=>(Pe(!!n),n)))}rr(e,n){return YE(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=hU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return Ut.newInvalidDocument(e)}}function wA(t){return new RU(t)}class PU extends vA{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new $s((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new vt(((s,a)=>ze(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const l=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,l.readTime)),a.isValidDocument()){const h=ME(this.cr.serializer,a);i=i.add(s.path.popLast());const d=Hf(h);r+=d-l.size,n.push(this.cr.addEntry(e,s,h))}else if(r-=l.size,this.trackRemovals){const h=ME(this.cr.serializer,a.convertToNoDocument(xe.min()));n.push(this.cr.addEntry(e,s,h))}})),i.forEach((s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))})),n.push(this.cr.updateMetadata(e,r)),K.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next((r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.cr.ar(e,n).next((({documents:r,ur:i})=>(i.forEach(((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function YE(t){return an(t,"remoteDocumentGlobal")}function mo(t){return an(t,"remoteDocumentsV14")}function il(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XE(t,e){const n=e.documentKey.path.toArray();return[t,Gf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ZE(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ze(n[s],r[s]),i)return i;return i=ze(n.length,r.length),i||(i=ze(n[n.length-2],r[r.length-2]),i||ze(n[n.length-1],r[r.length-1]))}class CU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class EA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Vl(r.mutation,i,nr.empty(),Nt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ze()){const i=Zr();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let a=gl();return s.forEach(((l,h)=>{a=a.insert(l,h.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ze())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(e,n,r,i){let s=ur();const a=Nl(),l=(function(){return Nl()})();return n.forEach(((h,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof ji)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Vl(p.mutation,d,p.mutation.getFieldMask(),Nt.now())):a.set(d.key,nr.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((d,p)=>a.set(d,p))),n.forEach(((d,p)=>{var _;return l.set(d,new CU(p,(_=a.get(d))!==null&&_!==void 0?_:null))})),l)))}recalculateAndSaveOverlays(e,n){const r=Nl();let i=new St(((a,l)=>a-l)),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const l of a)l.keys().forEach((h=>{const d=n.get(h);if(d===null)return;let p=r.get(h)||nr.empty();p=l.applyToLocalView(d,p),r.set(h,p);const _=(i.get(l.batchId)||Ze()).add(h);i=i.insert(l.batchId,_)}))})).next((()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const h=l.getNext(),d=h.key,p=h.value,_=$b();p.forEach((v=>{if(!s.has(v)){const E=Hb(n.get(v),r.get(v));E!==null&&_.set(v,E),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,_))}return K.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):K.resolve(Zr());let l=-1,h=s;return a.next((d=>K.forEach(d,((p,_)=>(l<_.largestBatchId&&(l=_.largestBatchId),s.get(p)?K.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,h,d,Ze()))).next((p=>({batchId:l,changes:qb(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((r=>{let i=gl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=gl();return this.indexManager.getCollectionParents(e,s).next((l=>K.forEach(l,(h=>{const d=(function(_,v){return new Sd(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((p=>{p.forEach(((_,v)=>{a=a.insert(_,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((a=>{s.forEach(((h,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Ut.newInvalidDocument(p)))}));let l=gl();return a.forEach(((h,d)=>{const p=s.get(h);p!==void 0&&Vl(p.mutation,d,nr.empty(),Nt.now()),wc(n,d)&&(l=l.insert(h,d))})),l}))}}class xU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Wn(i.createTime)}})(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(i){return{name:i.name,query:dA(i.bundledQuery),readTime:Wn(i.readTime)}})(n)),K.resolve()}}class DU{constructor(){this.overlays=new St(ye.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return K.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.ht(e,n,s)})),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=Zr(),s=n.length+1,a=new ye(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const h=l.getNext().value,d=h.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new St(((d,p)=>d-p));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Zr(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Zr(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,p)=>l.set(d,p))),!(l.size()>=i)););return K.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new x_(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ze(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}class OU{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}class V_{constructor(){this.Tr=new vt(cn.Er),this.dr=new vt(cn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new cn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new cn(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new ye(new Tt([])),r=new cn(n,e),i=new cn(n,e+1),s=[];return this.dr.forEachInRange([r,i],(a=>{this.Vr(a),s.push(a.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ye(new Tt([])),r=new cn(n,e),i=new cn(n,e+1);let s=Ze();return this.dr.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const n=new cn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class cn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ye.comparator(e.key,n.key)||ze(e.wr,n.wr)}static Ar(e,n){return ze(e.wr,n.wr)||ye.comparator(e.key,n.key)}}class kU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new vt(cn.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new P_(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new cn(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cn(n,0),i=new cn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],(a=>{const l=this.Dr(a.wr);s.push(l)})),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(ze);return n.forEach((i=>{const s=new cn(i,0),a=new cn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],(l=>{r=r.add(l.wr)}))})),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new cn(new ye(s),0);let l=new vt(ze);return this.br.forEachWhile((h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(h.wr)),!0)}),a),K.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(n.mutations,(i=>{const s=new cn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new cn(n,0),i=this.br.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class NU{constructor(e){this.Mr=e,this.docs=(function(){return new St(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))})),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ur();const a=n.path,l=new ye(a.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||v_(gb(p),r)<=0||(i.has(p.key)||wc(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ee()}Or(e,n){return K.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new VU(this)}getSize(e){return K.resolve(this.size)}}class VU extends vA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}class LU{constructor(e){this.persistence=e,this.Nr=new $s((n=>Uo(n)),yc),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new V_,this.targetCount=0,this.kr=$o.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,i)=>n(i))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),K.waitFor(s).next((()=>i))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}class IA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tr(0),this.Kr=!1,this.Kr=!0,this.$r=new OU,this.referenceDelegate=e(this),this.Ur=new LU(this),this.indexManager=new vU,this.remoteDocumentCache=(function(i){return new NU(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new hA(n),this.Gr=new xU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new kU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const i=new MU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((s=>this.referenceDelegate.jr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Hr(e,n){return K.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class MU extends _b{constructor(e){super(),this.currentSequenceNumber=e}}class kd{constructor(e){this.persistence=e,this.Jr=new V_,this.Yr=null}static Zr(e){return new kd(e)}get Xr(){if(this.Yr)return this.Yr;throw Ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.Xr.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,(r=>{const i=ye.fromPath(r);return this.ei(e,i).next((s=>{s||n.removeEntry(i,xe.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class FU{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Td("createOrUpgrade",n);r<1&&i>=1&&((function(h){h.createObjectStore("owner")})(e),(function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dE,{unique:!0}),h.createObjectStore("documentMutations")})(e),eI(e),(function(h){h.createObjectStore("remoteDocuments")})(e));let a=K.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")})(e),eI(e)),a=a.next((()=>(function(h){const d=h.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(h,d){return d.store("mutations").U().next((p=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dE,{unique:!0});const _=d.store("mutations"),v=p.map((E=>_.put(E)));return K.waitFor(v)}))})(e,s)))),a=a.next((()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.ni(s)))),r<6&&i>=6&&(a=a.next((()=>((function(h){h.createObjectStore("remoteDocumentGlobal")})(e),this.ri(s))))),r<7&&i>=7&&(a=a.next((()=>this.ii(s)))),r<8&&i>=8&&(a=a.next((()=>this.si(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.oi(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(h){h.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(h){const d=h.createObjectStore("documentOverlays",{keyPath:pF});d.createIndex("collectionPathOverlayIndex",gF,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",mF,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(h){const d=h.createObjectStore("remoteDocumentsV14",{keyPath:rF});d.createIndex("documentKeyIndex",iF),d.createIndex("collectionGroupIndex",sF)})(e))).next((()=>this._i(e,s))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&i>=14&&(a=a.next((()=>this.ai(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:cF}).createIndex("sequenceNumberIndex",hF,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:fF}).createIndex("documentKeyIndex",dF,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{n.objectStore("indexState").clear()})).next((()=>{n.objectStore("indexEntries").clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)}))),a}ri(e){let n=0;return e.store("remoteDocuments").J(((r,i)=>{n+=Hf(i)})).next((()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next((i=>K.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next((l=>K.forEach(l,(h=>{Pe(h.userId===s.userId);const d=Eo(this.serializer,h);return mA(e,s.userId,d).next((()=>{}))}))))}))))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const s=[];return r.J(((a,l)=>{const h=new Tt(a),d=(function(_){return[0,Gn(_)]})(h);s.push(n.get(d).next((p=>p?K.resolve():(_=>n.put({targetId:0,path:Gn(_),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>K.waitFor(s)))}))}si(e,n){e.createObjectStore("collectionParents",{keyPath:lF});const r=n.store("collectionParents"),i=new N_,s=a=>{if(i.add(a)){const l=a.lastSegment(),h=a.popLast();return r.put({collectionId:l,parent:Gn(h)})}};return n.store("remoteDocuments").J({H:!0},((a,l)=>{const h=new Tt(a);return s(h.popLast())})).next((()=>n.store("documentMutations").J({H:!0},(([a,l,h],d)=>{const p=Xr(l);return s(p.popLast())}))))}oi(e){const n=e.store("targets");return n.J(((r,i)=>{const s=_l(i),a=fA(this.serializer,s);return n.put(a)}))}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J(((s,a)=>{const l=n.store("remoteDocumentsV14"),h=(function(_){return _.document?new ye(Tt.fromString(_.document.name).popFirst(5)):_.noDocument?ye.fromSegments(_.noDocument.path):_.unknownDocument?ye.fromSegments(_.unknownDocument.path):Ee()})(a).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(l.put(d))})).next((()=>K.waitFor(i)))}ai(e,n){const r=n.store("mutations"),i=wA(this.serializer),s=new IA(kd.Zr,this.serializer.ct);return r.U().next((a=>{const l=new Map;return a.forEach((h=>{var d;let p=(d=l.get(h.userId))!==null&&d!==void 0?d:Ze();Eo(this.serializer,h).keys().forEach((_=>p=p.add(_))),l.set(h.userId,p)})),K.forEach(l,((h,d)=>{const p=new Dn(d),_=Dd.lt(this.serializer,p),v=s.getIndexManager(p),E=Od.lt(p,this.serializer,v,s.referenceDelegate);return new EA(i,E,_,v).recalculateAndSaveOverlaysForDocumentKeys(new mm(n,tr.oe),h).next()}))}))}}function eI(t){t.createObjectStore("targetDocuments",{keyPath:aF}).createIndex("documentTargetsIndex",uF,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oF,{unique:!0}),t.createObjectStore("targetGlobal")}const bg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class L_{constructor(e,n,r,i,s,a,l,h,d,p,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=a,this.document=l,this.ci=d,this.li=p,this.hi=_,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!L_.D())throw new ve(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SU(this,i),this.Ai=n+"main",this.serializer=new hA(h),this.Ri=new Os(this.Ai,this.hi,new FU(this.serializer)),this.$r=new dU,this.Ur=new EU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wA(this.serializer),this.Gr=new fU,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(se.FAILED_PRECONDITION,bg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new tr(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((n=>this.isPrimary&&!n?this.bi(e).next((()=>!1)):!!n&&this.Di(e).next((()=>!0)))))).catch((e=>{if(qs(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return sl(e).get("owner").next((n=>K.resolve(this.vi(n))))}Ci(e){return Xh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=an(n,"clientMetadata");return r.U().next((i=>{const s=this.xi(i,18e5),a=i.filter((l=>s.indexOf(l)===-1));return K.forEach(a,(l=>r.delete(l.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?K.resolve(!0):sl(e).get("owner").next((n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ve(se.FAILED_PRECONDITION,bg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xh(e).U().next((r=>this.xi(r,5e3).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||a&&l)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ue("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const n=new mm(e,tr.oe);return this.bi(n).next((()=>this.Ci(n)))})),this.Ri.close(),this.qi()}xi(e,n){return e.filter((r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Xh(e).U().next((n=>this.xi(n,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Od.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Dd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){ue("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(function(h){return h===17?vF:h===16?yF:h===15?E_:h===14?Tb:h===13?Ib:h===12?_F:h===11?Eb:void Ee()})(this.hi);let a;return this.Ri.runTransaction(e,i,s,(l=>(a=new mm(l,this.Qr?this.Qr.next():tr.oe),n==="readwrite-primary"?this.wi(a).next((h=>!!h||this.Si(a))).next((h=>{if(!h)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ve(se.FAILED_PRECONDITION,mb);return r(a)})).next((h=>this.Di(a).next((()=>h)))):this.Ki(a).next((()=>r(a)))))).then((l=>(a.raiseOnCommittedEvent(),l)))}Ki(e){return sl(e).get("owner").next((n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ve(se.FAILED_PRECONDITION,bg)}))}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sl(e).put("owner",n)}static D(){return Os.D()}bi(e){const n=sl(e);return n.get("owner").next((r=>this.vi(r)?(ue("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):K.resolve()))}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;Z0()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sl(t){return an(t,"owner")}function Xh(t){return an(t,"clientMetadata")}function TA(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class M_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ze(),i=Ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new M_(e,n.fromCache,r,i)}}class UU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Z0()?8:yb(on())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.Zi(e,n,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new UU;return this.Xi(e,n,a).next((l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)}))})).next((()=>s.result))}es(e,n,r,i){return r.documentReadCount<this.ji?(ka()<=nt.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Na(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(ka()<=nt.DEBUG&&ue("QueryEngine","Query:",Na(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ka()<=nt.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Na(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(n))):K.resolve())}Yi(e,n){if(SE(n))return K.resolve(null);let r=lr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Im(n,null,"F"),r=lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Ze(...s);return this.Ji.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,r).next((h=>{const d=this.ts(n,l);return this.ns(n,d,a,h.readTime)?this.Yi(e,Im(n,null,"F")):this.rs(e,d,n,h)}))))})))))}Zi(e,n,r,i){return SE(n)||i.isEqual(xe.min())?K.resolve(null):this.Ji.getDocuments(e,r).next((s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?K.resolve(null):(ka()<=nt.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Na(n)),this.rs(e,a,n,pb(i,-1)).next((l=>l)))}))}ts(e,n){let r=new vt(Ub(e));return n.forEach(((i,s)=>{wc(e,s)&&(r=r.add(s))})),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ka()<=nt.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Na(n)),this.Ji.getDocumentsMatchingQuery(e,n,hr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((a=>{s=s.insert(a.key,a)})),s)))}}class BU{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new St(ze),this._s=new $s((s=>Uo(s)),yc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function AA(t,e,n,r){return new BU(t,e,n,r)}async function SA(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],l=[];let h=Ze();for(const d of i){a.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}for(const d of s){l.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next((d=>({hs:d,removedBatchIds:a,addedBatchIds:l})))}))}))}function qU(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return(function(l,h,d,p){const _=d.batch,v=_.keys();let E=K.resolve();return v.forEach((N=>{E=E.next((()=>p.getEntry(h,N))).next((M=>{const F=d.docVersions.get(N);Pe(F!==null),M.version.compareTo(F)<0&&(_.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),p.addEntry(M)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(h,_)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let h=Ze();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(h=h.add(l.batch.mutations[d].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function RA(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function $U(t,e){const n=Ie(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach(((p,_)=>{const v=i.get(_);if(!v)return;l.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,_).next((()=>n.Ur.addMatchingKeys(s,p.addedDocuments,_))));let E=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(Wt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(_,E),(function(M,F,Q){return M.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(v,E,p)&&l.push(n.Ur.updateTargetData(s,E))}));let h=ur(),d=Ze();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))})),l.push(jU(s,a,e.documentUpdates).next((p=>{h=p.Ps,d=p.Is}))),!r.isEqual(xe.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next((_=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r)));l.push(p)}return K.waitFor(l).next((()=>a.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,h,d))).next((()=>h))})).then((s=>(n.os=i,s)))}function jU(t,e,n){let r=Ze(),i=Ze();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let a=ur();return n.forEach(((l,h)=>{const d=s.get(l);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),h.isNoDocument()&&h.version.isEqual(xe.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):ue("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",h.version)})),{Ps:a,Is:i}}))}function zU(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Qf(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Ur.getTargetData(r,e).next((s=>s?(i=s,K.resolve(i)):n.Ur.allocateTargetId(r).next((a=>(i=new Pi(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function iu(t,e,n){const r=Ie(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!qs(a))throw a;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function xm(t,e,n){const r=Ie(t);let i=xe.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(h,d,p){const _=Ie(h),v=_._s.get(p);return v!==void 0?K.resolve(_.os.get(v)):_.Ur.getTargetData(d,p)})(r,a,lr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next((h=>{s=h}))})).next((()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:xe.min(),n?s:Ze()))).next((l=>(xA(r,Fb(e),l),{documents:l,Ts:s})))))}function PA(t,e){const n=Ie(t),r=Ie(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(s=>r.ot(s,e).next((a=>a?a.target:null))))}function CA(t,e){const n=Ie(t),r=n.us.get(e)||xe.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.cs.getAllFromCollectionGroup(i,e,pb(r,-1),Number.MAX_SAFE_INTEGER))).then((i=>(xA(n,e,i),i)))}function xA(t,e,n){let r=t.us.get(e)||xe.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.us.set(e,r)}function tI(t,e){return`firestore_clients_${t}_${e}`}function nI(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ag(t,e){return`firestore_targets_${t}_${e}`}class Jf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ve(i.error.code,i.error.message))),a?new Jf(e,n,i.state,s):(Kt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ll{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ve(r.error.code,r.error.message))),s?new Ll(e,r.state,i):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=S_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=vb(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Yf(e,s):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class F_{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new F_(n.clientId,n.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Dm{constructor(){this.activeTargetIds=S_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sg{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new St(ze),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=tI(this.persistenceKey,this.ps),this.vs=(function(h){return`firestore_sequence_number_${h}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Dm),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=(function(h){return`firestore_online_state_${h}`})(this.persistenceKey),this.Os=(function(h){return`firestore_bundle_loaded_v2_${h}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(tI(this.persistenceKey,r));if(i){const s=Yf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ag(this.persistenceKey,e));if(i){const s=Ll.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ag(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Qs(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ue("SharedClientState","READ",e,n),n}setItem(e,n){ue("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(ue("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=(function(s){let a=tr.oe;if(s!=null)try{const l=JSON.parse(s);Pe(typeof l=="number"),a=l}catch(l){Kt("SharedClientState","Failed to read sequence number from WebStorage",l)}return a})(n.newValue);r!==tr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Jf(this.currentUser,e,n,r),s=nI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=nI(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Ag(this.persistenceKey,e),s=new Ll(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Yf.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Jf.Rs(new Dn(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Ll.Rs(i,n)}Ls(e){return F_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],l=[];return s.forEach((h=>{i.has(h)||a.push(h)})),i.forEach((h=>{s.has(h)||l.push(h)})),this.syncEngine.io(a,l).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=S_();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class DA{constructor(){this.so=new Dm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KU{_o(e){}shutdown(){}}class rI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zh=null;function Rg(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}const GU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Pn="WebChannelConnection";class HU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=Rg(),h=this.xo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(n,h,d,i).then((p=>(ue("RestConnection",`Received RPC '${n}' ${l}: `,p),p)),(p=>{throw Ql("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",h,"request:",i),p}))}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+du})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((s,a)=>n[a]=s)),i&&i.headers.forEach(((s,a)=>n[a]=s))}xo(n,r){const i=GU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Rg();return new Promise(((a,l)=>{const h=new ab;h.setWithCredentials(!0),h.listenOnce(ub.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case uf.NO_ERROR:const p=h.getResponseJson();ue(Pn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case uf.TIMEOUT:ue(Pn,`RPC '${e}' ${s} timed out`),l(new ve(se.DEADLINE_EXCEEDED,"Request time out"));break;case uf.HTTP_ERROR:const _=h.getStatus();if(ue(Pn,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v==null?void 0:v.error;if(E&&E.status&&E.message){const N=(function(F){const Q=F.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(Q)>=0?Q:se.UNKNOWN})(E.status);l(new ve(N,E.message))}else l(new ve(se.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ve(se.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ue(Pn,`RPC '${e}' ${s} completed.`)}}));const d=JSON.stringify(i);ue(Pn,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",d,r,15)}))}Bo(e,n,r){const i=Rg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hb(),l=cb(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const p=s.join("");ue(Pn,`Creating RPC '${e}' stream ${i}: ${p}`,h);const _=a.createWebChannel(p,h);let v=!1,E=!1;const N=new WU({Io:F=>{E?ue(Pn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(v||(ue(Pn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),v=!0),ue(Pn,`RPC '${e}' stream ${i} sending:`,F),_.send(F))},To:()=>_.close()}),M=(F,Q,j)=>{F.listen(Q,(z=>{try{j(z)}catch(G){setTimeout((()=>{throw G}),0)}}))};return M(_,pl.EventType.OPEN,(()=>{E||(ue(Pn,`RPC '${e}' stream ${i} transport opened.`),N.yo())})),M(_,pl.EventType.CLOSE,(()=>{E||(E=!0,ue(Pn,`RPC '${e}' stream ${i} transport closed`),N.So())})),M(_,pl.EventType.ERROR,(F=>{E||(E=!0,Ql(Pn,`RPC '${e}' stream ${i} transport errored:`,F),N.So(new ve(se.UNAVAILABLE,"The operation could not be completed")))})),M(_,pl.EventType.MESSAGE,(F=>{var Q;if(!E){const j=F.data[0];Pe(!!j);const z=j,G=z.error||((Q=z[0])===null||Q===void 0?void 0:Q.error);if(G){ue(Pn,`RPC '${e}' stream ${i} received error:`,G);const J=G.status;let oe=(function(A){const x=Yt[A];if(x!==void 0)return Yb(x)})(J),R=G.message;oe===void 0&&(oe=se.INTERNAL,R="Unknown error status: "+J+" with message "+G.message),E=!0,N.So(new ve(oe,R)),_.close()}else ue(Pn,`RPC '${e}' stream ${i} received:`,j),N.bo(j)}})),M(l,lb.STAT_EVENT,(F=>{F.stat===pm.PROXY?ue(Pn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===pm.NOPROXY&&ue(Pn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function OA(){return typeof window!="undefined"?window:null}function gf(){return typeof document!="undefined"?document:null}function Nd(t){return new tU(t,!0)}class kA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class NA{constructor(e,n,r,i,s,a,l,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Kt(n.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===n&&this.P_(r,i)}),(r=>{e((()=>{const i=new ve(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QU extends NA{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iU(this.serializer,e),r=(function(s){if(!("targetChange"in s))return xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?Wn(a.readTime):xe.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Am(this.serializer),n.addTarget=(function(s,a){let l;const h=a.target;if(l=$f(h)?{documents:sA(s,h)}:{query:oA(s,h)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=eA(s,a.resumeToken);const d=Tm(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){l.readTime=ru(s,a.snapshotVersion.toTimestamp());const d=Tm(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l})(this.serializer,e);const r=oU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Am(this.serializer),n.removeTarget=e,this.a_(n)}}class JU extends NA{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sU(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Am(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Kf(this.serializer,r)))};this.a_(n)}}class YU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Mo(e,bm(n,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(se.UNKNOWN,s.toString())}))}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Lo(e,bm(n,r),i,a,l,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(se.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class XU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kt(n),this.D_=!1):ue("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class ZU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((a=>{r.enqueueAndForget((async()=>{Qo(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const d=Ie(h);d.L_.add(4),await Tc(d),d.q_.set("Unknown"),d.L_.delete(4),await Vd(d)})(this))}))})),this.q_=new XU(r,i)}}async function Vd(t){if(Qo(t))for(const e of t.B_)await e(!0)}async function Tc(t){for(const e of t.B_)await e(!1)}function Ld(t,e){const n=Ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),q_(n)?B_(n):mu(n).r_()&&U_(n,e))}function su(t,e){const n=Ie(t),r=mu(n);n.N_.delete(e),r.r_()&&VA(n,e),n.N_.size===0&&(r.r_()?r.o_():Qo(n)&&n.q_.set("Unknown"))}function U_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mu(t).A_(e)}function VA(t,e){t.Q_.xe(e),mu(t).R_(e)}function B_(t){t.Q_=new YF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mu(t).start(),t.q_.v_()}function q_(t){return Qo(t)&&!mu(t).n_()&&t.N_.size>0}function Qo(t){return Ie(t).L_.size===0}function LA(t){t.Q_=void 0}async function e2(t){t.q_.set("Online")}async function t2(t){t.N_.forEach(((e,n)=>{U_(t,e)}))}async function n2(t,e){LA(t),q_(t)?(t.q_.M_(e),B_(t)):t.q_.set("Unknown")}async function r2(t,e,n){if(t.q_.set("Online"),e instanceof Zb&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))})(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xf(t,r)}else if(e instanceof pf?t.Q_.Ke(e):e instanceof Xb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(xe.min()))try{const r=await RA(t.localStore);n.compareTo(r)>=0&&await(function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(h.resumeToken,a))}})),l.targetMismatches.forEach(((h,d)=>{const p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(Wt.EMPTY_BYTE_STRING,p.snapshotVersion)),VA(s,h);const _=new Pi(p.target,h,d,p.sequenceNumber);U_(s,_)})),s.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await Xf(t,r)}}async function Xf(t,e,n){if(!qs(e))throw e;t.L_.add(1),await Tc(t),t.q_.set("Offline"),n||(n=()=>RA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vd(t)}))}function MA(t,e){return e().catch((n=>Xf(t,n,e)))}async function gu(t){const e=Ie(t),n=Fs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;i2(e);)try{const i=await zU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,s2(e,i)}catch(i){await Xf(e,i)}FA(e)&&UA(e)}function i2(t){return Qo(t)&&t.O_.length<10}function s2(t,e){t.O_.push(e);const n=Fs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function FA(t){return Qo(t)&&!Fs(t).n_()&&t.O_.length>0}function UA(t){Fs(t).start()}async function o2(t){Fs(t).p_()}async function a2(t){const e=Fs(t);for(const n of t.O_)e.m_(n.mutations)}async function u2(t,e,n){const r=t.O_.shift(),i=C_.from(r,e,n);await MA(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await gu(t)}async function l2(t,e){e&&Fs(t).V_&&await(async function(r,i){if((function(a){return HF(a)&&a!==se.ABORTED})(i.code)){const s=r.O_.shift();Fs(r).s_(),await MA(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await gu(r)}})(t,e),FA(t)&&UA(t)}async function iI(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=Qo(n);n.L_.add(3),await Tc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vd(n)}async function Om(t,e){const n=Ie(t);e?(n.L_.delete(2),await Vd(n)):e||(n.L_.add(2),await Tc(n),n.q_.set("Unknown"))}function mu(t){return t.K_||(t.K_=(function(n,r,i){const s=Ie(n);return s.w_(),new QU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:e2.bind(null,t),Ro:t2.bind(null,t),mo:n2.bind(null,t),d_:r2.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),q_(t)?B_(t):t.q_.set("Unknown")):(await t.K_.stop(),LA(t))}))),t.K_}function Fs(t){return t.U_||(t.U_=(function(n,r,i){const s=Ie(n);return s.w_(),new JU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:o2.bind(null,t),mo:l2.bind(null,t),f_:a2.bind(null,t),g_:u2.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await gu(t)):(await t.U_.stop(),t.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}class $_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new $_(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j_(t,e){if(Kt("AsyncQueue",`${e}: ${t}`),qs(t))return new ve(se.UNAVAILABLE,`${e}: ${t}`);throw t}class za{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=gl(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new za(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class sI{constructor(){this.W_=new St(ye.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ou{constructor(e,n,r,i,s,a,l,h,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new ou(e,n,za.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class c2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class h2{constructor(){this.queries=oI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ie(n),s=i.queries;i.queries=oI(),s.forEach(((a,l)=>{for(const h of l.j_)h.onError(r)}))})(this,new ve(se.ABORTED,"Firestore shutting down"))}}function oI(){return new $s((t=>Mb(t)),Rd)}async function BA(t,e){const n=Ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new c2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=j_(a,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&z_(n)}async function qA(t,e){const n=Ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function f2(t,e){const n=Ie(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&z_(n)}function d2(t,e,n){const r=Ie(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function z_(t){t.Y_.forEach((e=>{e.next()}))}var km,aI;(aI=km||(km={})).ea="default",aI.Cache="cache";class $A{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ou(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==km.Cache}}class jA{constructor(e){this.key=e}}class zA{constructor(e){this.key=e}}class p2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ze(),this.mutatedKeys=Ze(),this.Aa=Ub(e),this.Ra=new za(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new sI,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,_)=>{const v=i.get(p),E=wc(this.query,_)?_:null,N=!!v&&this.mutatedKeys.has(v.key),M=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let F=!1;v&&E?v.data.isEqual(E.data)?N!==M&&(r.track({type:3,doc:E}),F=!0):this.ga(v,E)||(r.track({type:2,doc:E}),F=!0,(h&&this.Aa(E,h)>0||d&&this.Aa(E,d)<0)&&(l=!0)):!v&&E?(r.track({type:0,doc:E}),F=!0):v&&!E&&(r.track({type:1,doc:v}),F=!0,(h||d)&&(l=!0)),F&&(E?(a=a.add(E),s=M?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((p,_)=>(function(E,N){const M=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return M(E)-M(N)})(p.type,_.type)||this.Aa(p.doc,_.doc))),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new ou(this.query,e.Ra,s,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ze(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new zA(r))})),this.da.forEach((r=>{e.has(r)||n.push(new jA(r))})),n}ba(e){this.Ta=e.Ts,this.da=Ze();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ou.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class g2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class m2{constructor(e){this.key=e,this.va=!1}}class _2{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new $s((l=>Mb(l)),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new St(ye.comparator),this.Na=new Map,this.La=new V_,this.Ba={},this.ka=new Map,this.qa=$o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function y2(t,e,n=!0){const r=Md(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await KA(r,e,n,!0),i}async function v2(t,e){const n=Md(t);await KA(n,e,!0,!1)}async function KA(t,e,n,r){const i=await Qf(t.localStore,lr(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await K_(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ld(t.remoteStore,i),l}async function K_(t,e,n,r,i){t.Ka=(_,v,E)=>(async function(M,F,Q,j){let z=F.view.ma(Q);z.ns&&(z=await xm(M.localStore,F.query,!1).then((({documents:R})=>F.view.ma(R,z))));const G=j&&j.targetChanges.get(F.targetId),J=j&&j.targetMismatches.get(F.targetId)!=null,oe=F.view.applyChanges(z,M.isPrimaryClient,G,J);return Nm(M,F.targetId,oe.wa),oe.snapshot})(t,_,v,E);const s=await xm(t.localStore,e,!0),a=new p2(e,s.Ts),l=a.ma(s.documents),h=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,h);Nm(t,n,d.wa);const p=new g2(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function w2(t,e,n){const r=Ie(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((a=>!Rd(a,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await iu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&su(r.remoteStore,i.targetId),au(r,i.targetId)})).catch(Bs)):(au(r,i.targetId),await iu(r.localStore,i.targetId,!0))}async function E2(t,e){const n=Ie(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),su(n.remoteStore,r.targetId))}async function I2(t,e,n){const r=Q_(t);try{const i=await(function(a,l){const h=Ie(a),d=Nt.now(),p=l.reduce(((E,N)=>E.add(N.key)),Ze());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let N=ur(),M=Ze();return h.cs.getEntries(E,p).next((F=>{N=F,N.forEach(((Q,j)=>{j.isValidDocument()||(M=M.add(Q))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,N))).next((F=>{_=F;const Q=[];for(const j of l){const z=GF(j,_.get(j.key).overlayedDocument);z!=null&&Q.push(new ji(j.key,z,Pb(z.value.mapValue),Vn.exists(!0)))}return h.mutationQueue.addMutationBatch(E,d,Q,l)})).next((F=>{v=F;const Q=F.applyToLocalDocumentSet(_,M);return h.documentOverlayCache.saveOverlays(E,F.batchId,Q)}))})).then((()=>({batchId:v.batchId,changes:qb(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,l,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new St(ze)),d=d.insert(l,h),a.Ba[a.currentUser.toKey()]=d})(r,i.batchId,n),await js(r,i.changes),await gu(r.remoteStore)}catch(i){const s=j_(i,"Failed to persist write");n.reject(s)}}async function GA(t,e){const n=Ie(t);try{const r=await $U(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=n.Na.get(s);a&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Pe(a.va):i.removedDocuments.size>0&&(Pe(a.va),a.va=!1))})),await js(n,r,e)}catch(r){await Bs(r)}}function uI(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach(((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)})),(function(a,l){const h=Ie(a);h.onlineState=l;let d=!1;h.queries.forEach(((p,_)=>{for(const v of _.j_)v.Z_(l)&&(d=!0)})),d&&z_(h)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function T2(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new St(ye.comparator);a=a.insert(s,Ut.newNoDocument(s,xe.min()));const l=Ze().add(s),h=new Ec(xe.min(),new Map,new St(ze),a,l);await GA(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),H_(r)}else await iu(r.localStore,e,!1).then((()=>au(r,e,n))).catch(Bs)}async function b2(t,e){const n=Ie(t),r=e.batch.batchId;try{const i=await qU(n.localStore,e);W_(n,r,null),G_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await js(n,i)}catch(i){await Bs(i)}}async function A2(t,e,n){const r=Ie(t);try{const i=await(function(a,l){const h=Ie(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return h.mutationQueue.lookupMutationBatch(d,l).next((_=>(Pe(_!==null),p=_.keys(),h.mutationQueue.removeMutationBatch(d,_)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,l))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>h.localDocuments.getDocuments(d,p)))}))})(r.localStore,e);W_(r,e,n),G_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await js(r,i)}catch(i){await Bs(i)}}function G_(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function W_(t,e,n){const r=Ie(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function au(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||WA(t,r)}))}function WA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(su(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),H_(t))}function Nm(t,e,n){for(const r of n)r instanceof jA?(t.La.addReference(r.key,e),S2(t,r)):r instanceof zA?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||WA(t,r.key)):Ee()}function S2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.xa.add(r),H_(t))}function H_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ye(Tt.fromString(e)),r=t.qa.next();t.Na.set(r,new m2(n)),t.Oa=t.Oa.insert(n,r),Ld(t.remoteStore,new Pi(lr(vc(n.path)),r,"TargetPurposeLimboResolution",tr.oe))}}async function js(t,e,n){const r=Ie(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((l,h)=>{a.push(r.Ka(h,e,n).then((d=>{var p;if((d||n)&&r.isPrimaryClient){const _=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=M_.Wi(h.targetId,d);s.push(_)}})))})),await Promise.all(a),r.Ca.d_(i),await(async function(h,d){const p=Ie(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>K.forEach(d,(v=>K.forEach(v.$i,(E=>p.persistence.referenceDelegate.addReference(_,v.targetId,E))).next((()=>K.forEach(v.Ui,(E=>p.persistence.referenceDelegate.removeReference(_,v.targetId,E)))))))))}catch(_){if(!qs(_))throw _;ue("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const E=p.os.get(v),N=E.snapshotVersion,M=E.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(v,M)}}})(r.localStore,s))}async function R2(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await SA(n.localStore,e);n.currentUser=e,(function(s,a){s.ka.forEach((l=>{l.forEach((h=>{h.reject(new ve(se.CANCELLED,a))}))})),s.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await js(n,r.hs)}}function P2(t,e){const n=Ie(t),r=n.Na.get(e);if(r&&r.va)return Ze().add(r.key);{let i=Ze();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}async function C2(t,e){const n=Ie(t),r=await xm(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Nm(n,e.targetId,i.wa),i}async function x2(t,e){const n=Ie(t);return CA(n.localStore,e).then((r=>js(n,r)))}async function D2(t,e,n,r){const i=Ie(t),s=await(function(l,h){const d=Ie(l),p=Ie(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",(_=>p.Mn(_,h).next((v=>v?d.localDocuments.getDocuments(_,v):K.resolve(null)))))})(i.localStore,e);s!==null?(n==="pending"?await gu(i.remoteStore):n==="acknowledged"||n==="rejected"?(W_(i,e,r||null),G_(i,e),(function(l,h){Ie(Ie(l).mutationQueue).On(h)})(i.localStore,e)):Ee(),await js(i,s)):ue("SyncEngine","Cannot apply mutation batch with id: "+e)}async function O2(t,e){const n=Ie(t);if(Md(n),Q_(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await lI(n,r.toArray());n.Qa=!0,await Om(n.remoteStore,!0);for(const s of i)Ld(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach(((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(au(n,a),iu(n.localStore,a,!0)))),su(n.remoteStore,a)})),await i,await lI(n,r),(function(a){const l=Ie(a);l.Na.forEach(((h,d)=>{su(l.remoteStore,d)})),l.La.pr(),l.Na=new Map,l.Oa=new St(ye.comparator)})(n),n.Qa=!1,await Om(n.remoteStore,!1)}}async function lI(t,e,n){const r=Ie(t),i=[],s=[];for(const a of e){let l;const h=r.Ma.get(a);if(h&&h.length!==0){l=await Qf(r.localStore,lr(h[0]));for(const d of h){const p=r.Fa.get(d),_=await C2(r,p);_.snapshot&&s.push(_.snapshot)}}else{const d=await PA(r.localStore,a);l=await Qf(r.localStore,d),await K_(r,HA(d),a,!1,l.resumeToken)}i.push(l)}return r.Ca.d_(s),i}function HA(t){return Lb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function k2(t){return(function(n){return Ie(Ie(n).persistence).Qi()})(Ie(t).localStore)}async function N2(t,e,n,r){const i=Ie(t);if(i.Qa)return void ue("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await CA(i.localStore,Fb(s[0])),l=Ec.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Wt.EMPTY_BYTE_STRING);await js(i,a,l);break}case"rejected":await iu(i.localStore,e,!0),au(i,e,r);break;default:Ee()}}async function V2(t,e,n){const r=Md(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ue("SyncEngine","Adding an already active target "+i);continue}const s=await PA(r.localStore,i),a=await Qf(r.localStore,s);await K_(r,HA(s),a.targetId,!1,a.resumeToken),Ld(r.remoteStore,a)}for(const i of n)r.Ma.has(i)&&await iu(r.localStore,i,!1).then((()=>{su(r.remoteStore,i),au(r,i)})).catch(Bs)}}function Md(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T2.bind(null,e),e.Ca.d_=f2.bind(null,e.eventManager),e.Ca.$a=d2.bind(null,e.eventManager),e}function Q_(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A2.bind(null,e),e}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return AA(this.persistence,new bA,e.initialUser,this.serializer)}Ga(e){return new IA(kd.Zr,this.serializer)}Wa(e){return new DA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class QA extends ic{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Q_(this.Ja.syncEngine),await gu(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return AA(this.persistence,new bA,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new TU(r,e.asyncQueue,n)}Ha(e,n){const r=new eF(n,this.persistence);return new ZM(e.asyncQueue,r)}Ga(e){const n=TA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new L_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,OA(),gf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new DA}}class L2 extends QA{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Sg&&(this.sharedClientState.syncEngine={no:D2.bind(null,n),ro:N2.bind(null,n),io:V2.bind(null,n),Qi:k2.bind(null,n),eo:x2.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await O2(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const n=OA();if(!Sg.D(n))throw new ve(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=TA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class sc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R2.bind(null,this.syncEngine),await Om(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new h2})()}createDatastore(e){const n=Nd(e.databaseInfo.databaseId),r=(function(s){return new HU(s)})(e.databaseInfo);return(function(s,a,l,h){return new YU(s,a,l,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,a,l){return new ZU(r,i,s,a,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>uI(this.syncEngine,n,0)),(function(){return rI.D()?new rI:new KU})())}createSyncEngine(e,n){return(function(i,s,a,l,h,d,p){const _=new _2(i,s,a,l,h,d);return p&&(_.Qa=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const s=Ie(i);ue("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Tc(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sc.provider={build:()=>new sc};class JA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class M2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Dn.UNAUTHENTICATED,this.clientId=fb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{ue("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ue("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=j_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Pg(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await SA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function cI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await F2(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>iI(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>iI(e.remoteStore,i))),t._onlineComponents=e}async function F2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ql("Error using user provided cache. Falling back to memory cache: "+n),await Pg(t,new ic)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Pg(t,new ic);return t._offlineComponents}async function YA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await cI(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await cI(t,new sc))),t._onlineComponents}function U2(t){return YA(t).then((e=>e.syncEngine))}async function Vm(t){const e=await YA(t),n=e.eventManager;return n.onListen=y2.bind(null,e.syncEngine),n.onUnlisten=w2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E2.bind(null,e.syncEngine),n}function B2(t,e,n={}){const r=new Oi;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,l,h,d){const p=new JA({next:v=>{p.Za(),a.enqueueAndForget((()=>qA(s,_)));const E=v.docs.has(l);!E&&v.fromCache?d.reject(new ve(se.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&h&&h.source==="server"?d.reject(new ve(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),_=new $A(vc(l.path),p,{includeMetadataChanges:!0,_a:!0});return BA(s,_)})(await Vm(t),t.asyncQueue,e,n,r))),r.promise}function XA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const hI=new Map;function q2(t,e,n){if(!n)throw new ve(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $2(t,e,n,r){if(e===!0&&r===!0)throw new ve(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fI(t){if(!ye.isDocumentKey(t))throw new ve(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function J_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee()}function ks(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=J_(t);throw new ve(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class dI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ZA{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dI(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new jM;switch(r.type){case"firstParty":return new GM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=hI.get(n);r&&(ue("ComponentProvider","Removing Datastore"),hI.delete(n),r.terminate())})(this),Promise.resolve()}}class Fd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fd(this.firestore,e,this._query)}}class cr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class oc extends Fd{constructor(e,n,r){super(e,n,vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new ye(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function pI(t,e,...n){if(t=wn(t),arguments.length===1&&(e=fb.newId()),q2("doc","path",e),t instanceof ZA){const r=Tt.fromString(e,...n);return fI(r),new cr(t,null,new ye(r))}{if(!(t instanceof cr||t instanceof oc))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tt.fromString(e,...n));return fI(r),new cr(t.firestore,t instanceof oc?t.converter:null,new ye(r))}}class gI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kA(this,"async_queue_retry"),this.Vu=()=>{const r=gf();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=gf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Oi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qs(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l})(r);throw Kt("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=$_.createAndSchedule(this,e,n,r,(s=>this.yu(s)));return this.Tu.push(i),i}fu(){this.Eu&&Ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function mI(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class uu extends ZA{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new gI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gI(e),this._firestoreClient=void 0,await e}}}function j2(t,e,n){n||(n="(default)");const r=__(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Wl(s,e))return i;throw new ve(se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Ud(t){if(t._terminated)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z2(t),t._firestoreClient}function z2(t){var e,n,r;const i=t._freezeSettings(),s=(function(l,h,d,p){return new EF(l,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,XA(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new M2(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(l){const h=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(h),_online:h}})(t._componentsProvider))}class lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lu(Wt.fromBase64String(e))}catch(n){throw new ve(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new lu(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Y_{constructor(e){this._methodName=e}}class X_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}class Z_{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}}const K2=/^__.*__$/;class G2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new pu(e,this.data,n,this.fieldTransforms)}}class eS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class ey{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ey(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(tS(this.Cu)&&K2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class W2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nd(e)}Qu(e,n,r,i=!1){return new ey({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nS(t){const e=t._freezeSettings(),n=Nd(t._databaseId);return new W2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rS(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);ty("Data must be an object, but it was:",a,r);const l=iS(r,a);let h,d;if(s.merge)h=new nr(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const _ of s.mergeFields){const v=Lm(e,_,n);if(!a.contains(v))throw new ve(se.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);oS(p,v)||p.push(v)}h=new nr(p),d=a.fieldTransforms.filter((_=>h.covers(_.field)))}else h=null,d=a.fieldTransforms;return new G2(new Nn(l),h,d)}class bc extends Y_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}function H2(t,e,n,r){const i=t.Qu(1,e,n);ty("Data must be an object, but it was:",i,r);const s=[],a=Nn.empty();Ho(r,((h,d)=>{const p=ny(e,h,n);d=wn(d);const _=i.Nu(p);if(d instanceof bc)s.push(p);else{const v=qd(d,_);v!=null&&(s.push(p),a.set(p,v))}}));const l=new nr(s);return new eS(a,l,i.fieldTransforms)}function Q2(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[Lm(e,r,n)],h=[i];if(s.length%2!=0)throw new ve(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(Lm(e,s[v])),h.push(s[v+1]);const d=[],p=Nn.empty();for(let v=l.length-1;v>=0;--v)if(!oS(d,l[v])){const E=l[v];let N=h[v];N=wn(N);const M=a.Nu(E);if(N instanceof bc)d.push(E);else{const F=qd(N,M);F!=null&&(d.push(E),p.set(E,F))}}const _=new nr(d);return new eS(p,_,a.fieldTransforms)}function qd(t,e){if(sS(t=wn(t)))return ty("Unsupported field value:",e,t),iS(t,e);if(t instanceof Y_)return(function(r,i){if(!tS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const l of r){let h=qd(l,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Nt.fromDate(r);return{timestampValue:ru(i.serializer,s)}}if(r instanceof Nt){const s=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(i.serializer,s)}}if(r instanceof X_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lu)return{bytesValue:eA(i.serializer,r._byteString)};if(r instanceof cr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:O_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Z_)return(function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw l.Bu("VectorValues must only contain numeric values.");return R_(l.serializer,h)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${J_(r)}`)})(t,e)}function iS(t,e){const n={};return bb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,((r,i)=>{const s=qd(i,e.Mu(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function sS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof X_||t instanceof lu||t instanceof cr||t instanceof Y_||t instanceof Z_)}function ty(t,e,n){if(!sS(n)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(n)){const r=J_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Lm(t,e,n){if((e=wn(e))instanceof Bd)return e._internalPath;if(typeof e=="string")return ny(t,e);throw Zf("Field path arguments must be of type string or ",t,!1,void 0,n)}const J2=new RegExp("[~\\*/\\[\\]]");function ny(t,e,n){if(e.search(J2)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bd(...e.split("."))._internalPath}catch{throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zf(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new ve(se.INVALID_ARGUMENT,l+t+h)}function oS(t,e){return t.some((n=>n.isEqual(e)))}class aS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y2 extends aS{data(){return super.data()}}function uS(t,e){return typeof e=="string"?ny(t,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}function X2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z2{convertValue(e,n="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ho(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((a=>xt(a.doubleValue)));return new Z_(s)}convertGeoPoint(e){return new X_(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=T_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Fi(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Tt.fromString(e);Pe(cA(r));const i=new Mo(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(n)||Kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function lS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class yl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cS extends aS{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class mf extends cS{data(e={}){return super.data(e)}}class eB{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new yl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new mf(this._firestore,this._userDataWriter,r.key,r,new yl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((l=>{const h=new mf(i._firestore,i._userDataWriter,l.doc.key,l.doc,new yl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>s||l.type!==3)).map((l=>{const h=new mf(i._firestore,i._userDataWriter,l.doc.key,l.doc,new yl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:tB(l.type),doc:h,oldIndex:d,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function nB(t){t=ks(t,cr);const e=ks(t.firestore,uu);return B2(Ud(e),t._key).then((n=>dS(e,t,n)))}class hS extends Z2{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,n)}}function rB(t,e,n){t=ks(t,cr);const r=ks(t.firestore,uu),i=lS(t.converter,e,n);return fS(r,[rS(nS(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vn.none())])}function _I(t,...e){var n,r,i;t=wn(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||mI(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mI(e[a])){const _=e[a];e[a]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let h,d,p;if(t instanceof cr)d=ks(t.firestore,uu),p=vc(t._key.path),h={next:_=>{e[a]&&e[a](dS(d,t,_))},error:e[a+1],complete:e[a+2]};else{const _=ks(t,Fd);d=ks(_.firestore,uu),p=_._query;const v=new hS(d);h={next:E=>{e[a]&&e[a](new eB(d,v,_,E))},error:e[a+1],complete:e[a+2]},X2(t._query)}return(function(v,E,N,M){const F=new JA(M),Q=new $A(E,F,N);return v.asyncQueue.enqueueAndForget((async()=>BA(await Vm(v),Q))),()=>{F.Za(),v.asyncQueue.enqueueAndForget((async()=>qA(await Vm(v),Q)))}})(Ud(d),p,l,h)}function fS(t,e){return(function(r,i){const s=new Oi;return r.asyncQueue.enqueueAndForget((async()=>I2(await U2(r),i,s))),s.promise})(Ud(t),e)}function dS(t,e,n){const r=n.docs.get(e._key),i=new hS(t);return new cS(t,i,e._key,r,new yl(n.hasPendingWrites,n.fromCache),e.converter)}class iB{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=uB(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function sB(t){return new iB(t)}class oB{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=sc.provider,this._offlineComponentProvider={build:n=>new QA(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class aB{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=sc.provider,this._offlineComponentProvider={build:n=>new L2(n,e==null?void 0:e.cacheSizeBytes)}}}function uB(t){return new oB(void 0)}function lB(){return new aB}class cB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nS(e)}set(e,n,r){this._verifyNotCommitted();const i=Cg(e,this._firestore),s=lS(i.converter,n,r),a=rS(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Vn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Cg(e,this._firestore);let a;return a=typeof(n=wn(n))=="string"||n instanceof Bd?Q2(this._dataReader,"WriteBatch.update",s._key,n,r,i):H2(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Cg(e,this._firestore);return this._mutations=this._mutations.concat(new xd(n._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cg(t,e){if((t=wn(t)).firestore!==e)throw new ve(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ef(){return new bc("deleteField")}function hB(t){return Ud(t=ks(t,uu)),new cB(t,(e=>fS(t,e)))}(function(e,n=!0){(function(i){du=i})(fu),Ja(new No("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new uu(new zM(r.getProvider("auth-internal")),new HM(r.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(d.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l}),"PUBLIC").setMultipleInstances(!0)),Ds(cE,"4.7.3",e),Ds(cE,"4.7.3","esm2017")})();function ry(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fB=pS,gS=new mc("auth","Firebase",pS());const ed=new g_("@firebase/auth");function dB(t,...e){ed.logLevel<=nt.WARN&&ed.warn(`Auth (${fu}): ${t}`,...e)}function _f(t,...e){ed.logLevel<=nt.ERROR&&ed.error(`Auth (${fu}): ${t}`,...e)}function Ur(t,...e){throw iy(t,...e)}function ni(t,...e){return iy(t,...e)}function mS(t,e,n){const r=Object.assign(Object.assign({},fB()),{[e]:n});return new mc("auth","Firebase",r).create(e,{appName:t.name})}function ki(t){return mS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gS.create(t,...e)}function Me(t,e,...n){if(!t)throw iy(e,...n)}function Ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _f(e),new Error(e)}function Ui(t,e){t||Ci(e)}function Mm(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pB(){return yI()==="http:"||yI()==="https:"}function yI(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function gB(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pB()||IL()||"connection"in navigator)?navigator.onLine:!0}function mB(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ui(n>e,"Short delay should be less than long delay!"),this.isMobile=vL()||TL()}get(){return gB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sy(t,e){Ui(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class _S{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _B={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yB=new Ac(3e4,6e4);function zi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ki(t,e,n,r,i={}){return yS(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=_c(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:h},s);return EL()||(d.referrerPolicy="no-referrer"),_S.fetch()(vS(t,t.config.apiHost,n,l),d)})}async function yS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_B),e);try{const i=new wB(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw tf(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[h,d]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw tf(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw tf(t,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw mS(t,p,d);Ur(t,p)}}catch(i){if(i instanceof $i)throw i;Ur(t,"network-request-failed",{message:String(i)})}}async function Sc(t,e,n,r,i={}){const s=await Ki(t,e,n,r,i);return"mfaPendingCredential"in s&&Ur(t,"multi-factor-auth-required",{_serverResponse:s}),s}function vS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?sy(t.config,i):`${t.config.apiScheme}://${i}`}function vB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),yB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ni(t,e,r);return i.customData._tokenResponse=n,i}function vI(t){return t!==void 0&&t.enterprise!==void 0}class EB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function IB(t,e){return Ki(t,"GET","/v2/recaptchaConfig",zi(t,e))}async function TB(t,e){return Ki(t,"POST","/v1/accounts:delete",e)}async function wS(t,e){return Ki(t,"POST","/v1/accounts:lookup",e)}function Ml(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bB(t,e=!1){const n=wn(t),r=await n.getIdToken(e),i=oy(r);Me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ml(xg(i.auth_time)),issuedAtTime:Ml(xg(i.iat)),expirationTime:Ml(xg(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function xg(t){return Number(t)*1e3}function oy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _f("JWT malformed, contained fewer than 3 sections"),null;try{const i=J0(n);return i?JSON.parse(i):(_f("Failed to decode base64 JWT payload"),null)}catch(i){return _f("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wI(t){const e=oy(t);return Me(e,"internal-error"),Me(typeof e.exp!="undefined","internal-error"),Me(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}async function ac(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $i&&AB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class SB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function td(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ac(t,wS(n,{idToken:r}));Me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ES(s.providerUserInfo):[],l=PB(t.providerData,a),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Fm(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function RB(t){const e=wn(t);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ES(t){return t.map(e=>{var{providerId:n}=e,r=ry(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function CB(t,e){const n=await yS(t,{},async()=>{const r=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=vS(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",_S.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xB(t,e){return Ki(t,"POST","/v2/accounts:revokeToken",zi(t,e))}class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken!="undefined","internal-error"),Me(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):wI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=wI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await CB(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Ka;return r&&(Me(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Me(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return Ci("not implemented")}}function fs(t,e){Me(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class xi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ry(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ac(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bB(this,e)}reload(){return RB(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await ac(this,TB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,l,h,d,p;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,N=(a=n.photoURL)!==null&&a!==void 0?a:void 0,M=(l=n.tenantId)!==null&&l!==void 0?l:void 0,F=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,Q=(d=n.createdAt)!==null&&d!==void 0?d:void 0,j=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:z,emailVerified:G,isAnonymous:J,providerData:oe,stsTokenManager:R}=n;Me(z&&R,e,"internal-error");const S=Ka.fromJSON(this.name,R);Me(typeof z=="string",e,"internal-error"),fs(_,e.name),fs(v,e.name),Me(typeof G=="boolean",e,"internal-error"),Me(typeof J=="boolean",e,"internal-error"),fs(E,e.name),fs(N,e.name),fs(M,e.name),fs(F,e.name),fs(Q,e.name),fs(j,e.name);const A=new xi({uid:z,auth:e,email:v,emailVerified:G,displayName:_,isAnonymous:J,photoURL:N,phoneNumber:E,tenantId:M,stsTokenManager:S,createdAt:Q,lastLoginAt:j});return oe&&Array.isArray(oe)&&(A.providerData=oe.map(x=>Object.assign({},x))),F&&(A._redirectEventId=F),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ka;i.updateFromServerResponse(n);const s=new xi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await td(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ES(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Ka;l.updateFromIdToken(r);const h=new xi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Fm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}const EI=new Map;function Di(t){Ui(t instanceof Function,"Expected a class definition");let e=EI.get(t);return e?(Ui(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EI.set(t,e),e)}class IS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IS.type="NONE";const II=IS;function yf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ga{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yf(this.userKey,i.apiKey,s),this.fullPersistenceKey=yf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ga(Di(II),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Di(II);const a=yf(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const p=await d._get(a);if(p){const _=xi._fromJSON(e,p);d!==s&&(l=_),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ga(s,e,r):(s=h[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Ga(s,e,r))}}function TI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PS(e))return"Blackberry";if(CS(e))return"Webos";if(bS(e))return"Safari";if((e.includes("chrome/")||AS(e))&&!e.includes("edge/"))return"Chrome";if(RS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TS(t=on()){return/firefox\//i.test(t)}function bS(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AS(t=on()){return/crios\//i.test(t)}function SS(t=on()){return/iemobile/i.test(t)}function RS(t=on()){return/android/i.test(t)}function PS(t=on()){return/blackberry/i.test(t)}function CS(t=on()){return/webos/i.test(t)}function ay(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DB(t=on()){var e;return ay(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OB(){return bL()&&document.documentMode===10}function xS(t=on()){return ay(t)||RS(t)||CS(t)||PS(t)||/windows phone/i.test(t)||SS(t)}function DS(t,e=[]){let n;switch(t){case"Browser":n=TI(on());break;case"Worker":n=`${TI(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fu}/${r}`}class kB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,l)=>{try{const h=e(s);a(h)}catch(h){l(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}async function NB(t,e={}){return Ki(t,"GET","/v2/passwordPolicy",zi(t,e))}const VB=6;class LB{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:VB,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,l;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class MB{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bI(this),this.idTokenSubscription=new bI(this),this.beforeStateQueue=new kB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ga.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wS(this,{idToken:e}),r=await xi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject(ki(this));const n=e?wn(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yr(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NB(this),n=new LB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Di(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&dB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zs(t){return wn(t)}class bI{constructor(e){this.auth=e,this.observer=null,this.addObserver=xL(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FB(t){$d=t}function OS(t){return $d.loadJS(t)}function UB(){return $d.recaptchaEnterpriseScript}function BB(){return $d.gapiScript}function qB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $B="recaptcha-enterprise",jB="NO_RECAPTCHA";class zB{constructor(e){this.type=$B,this.auth=zs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{IB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new EB(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(h=>{l(h)})})}function i(s,a,l){const h=window.grecaptcha;vI(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(jB)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(l=>{if(!n&&vI(window.grecaptcha))i(l,s,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=UB();h.length!==0&&(h+=l),OS(h).then(()=>{i(l,s,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function AI(t,e,n,r=!1){const i=new zB(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function nd(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await AI(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await AI(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}function KB(t,e){const n=__(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Wl(s,e!=null?e:{}))return i;Ur(i,"already-initialized")}return n.initialize({options:e})}function GB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function WB(t,e,n){const r=zs(t);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=kS(e),{host:a,port:l}=HB(e),h=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),QB()}function kS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HB(t){const e=kS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:SI(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:SI(a)}}}function SI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class uy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,n){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}async function JB(t,e){return Ki(t,"POST","/v1/accounts:signUp",e)}async function YB(t,e){return Sc(t,"POST","/v1/accounts:signInWithPassword",zi(t,e))}async function NS(t,e){return Ki(t,"POST","/v1/accounts:sendOobCode",zi(t,e))}async function XB(t,e){return NS(t,e)}async function ZB(t,e){return NS(t,e)}async function eq(t,e){return Sc(t,"POST","/v1/accounts:signInWithEmailLink",zi(t,e))}async function tq(t,e){return Sc(t,"POST","/v1/accounts:signInWithEmailLink",zi(t,e))}class uc extends uy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new uc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new uc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,n,"signInWithPassword",YB);case"emailLink":return eq(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,r,"signUpPassword",JB);case"emailLink":return tq(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Wa(t,e){return Sc(t,"POST","/v1/accounts:signInWithIdp",zi(t,e))}const nq="http://localhost";class jo extends uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ry(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new jo(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Wa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wa(e,n)}buildRequest(){const e={requestUri:nq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_c(n)}return e}}function rq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iq(t){const e=fl(dl(t)).link,n=e?fl(dl(e)).deep_link_id:null,r=fl(dl(t)).deep_link_id;return(r?fl(dl(r)).link:null)||r||n||e||t}class ly{constructor(e){var n,r,i,s,a,l;const h=fl(dl(e)),d=(n=h.apiKey)!==null&&n!==void 0?n:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,_=rq((i=h.mode)!==null&&i!==void 0?i:null);Me(d&&p&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=h.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=iq(e);try{return new ly(n)}catch{return null}}}class _u{constructor(){this.providerId=_u.PROVIDER_ID}static credential(e,n){return uc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ly.parseLink(n);return Me(r,"argument-error"),uc._fromEmailAndCode(e,r.code,r.tenantId)}}_u.PROVIDER_ID="password";_u.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_u.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class VS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Rc extends VS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Is extends Rc{constructor(){super("facebook.com")}static credential(e){return jo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";class Ts extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ts.credential(n,r)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";class bs extends Rc{constructor(){super("github.com")}static credential(e){return jo._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";class As extends Rc{constructor(){super("twitter.com")}static credential(e,n){return jo._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return As.credential(n,r)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";async function sq(t,e){return Sc(t,"POST","/v1/accounts:signUp",zi(t,e))}class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xi._fromIdTokenResponse(e,r,i),a=RI(r);return new zo({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RI(r);return new zo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class rd extends $i{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new rd(e,n,r,i)}}function LS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(t,s,e,r):s})}async function oq(t,e,n=!1){const r=await ac(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zo._forOperation(t,"link",r)}async function aq(t,e,n=!1){const{auth:r}=t;if(Yr(r.app))return Promise.reject(ki(r));const i="reauthenticate";try{const s=await ac(t,LS(r,i,e,t),n);Me(s.idToken,r,"internal-error");const a=oy(s.idToken);Me(a,r,"internal-error");const{sub:l}=a;return Me(t.uid===l,r,"user-mismatch"),zo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),s}}async function MS(t,e,n=!1){if(Yr(t.app))return Promise.reject(ki(t));const r="signIn",i=await LS(t,r,e),s=await zo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function uq(t,e){return MS(zs(t),e)}async function FS(t){const e=zs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lq(t,e,n){const r=zs(t);await nd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ZB)}async function cq(t,e,n){if(Yr(t.app))return Promise.reject(ki(t));const r=zs(t),a=await nd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sq).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&FS(t),h}),l=await zo._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function hq(t,e,n){return Yr(t.app)?Promise.reject(ki(t)):uq(wn(t),_u.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FS(t),r})}async function fq(t,e){const n=wn(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await XB(n.auth,i);s!==t.email&&await t.reload()}function dq(t,e,n,r){return wn(t).onIdTokenChanged(e,n,r)}function pq(t,e,n){return wn(t).beforeAuthStateChanged(e,n)}const id="__sak";class US{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(id,"1"),this.storage.removeItem(id),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const gq=1e3,mq=10;class BS extends US{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,h)=>{this.notifyListeners(a,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);OB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mq):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BS.type="LOCAL";const _q=BS;class qS extends US{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qS.type="SESSION";const $S=qS;function yq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new jd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async d=>d(n.origin,s)),h=await yq(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jd.receivers=[];function cy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class vq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,h)=>{const d=cy("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){const v=_;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function ri(){return window}function wq(t){ri().location.href=t}function jS(){return typeof ri().WorkerGlobalScope!="undefined"&&typeof ri().importScripts=="function"}async function Eq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Iq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Tq(){return jS()?self:null}const zS="firebaseLocalStorageDb",bq=1,sd="firebaseLocalStorage",KS="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zd(t,e){return t.transaction([sd],e?"readwrite":"readonly").objectStore(sd)}function Aq(){const t=indexedDB.deleteDatabase(zS);return new Pc(t).toPromise()}function Um(){const t=indexedDB.open(zS,bq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sd,{keyPath:KS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sd)?e(r):(r.close(),await Aq(),e(await Um()))})})}async function PI(t,e,n){const r=zd(t,!0).put({[KS]:e,value:n});return new Pc(r).toPromise()}async function Sq(t,e){const n=zd(t,!1).get(e),r=await new Pc(n).toPromise();return r===void 0?null:r.value}function CI(t,e){const n=zd(t,!0).delete(e);return new Pc(n).toPromise()}const Rq=800,Pq=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Pq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jd._getInstance(Tq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Eq(),!this.activeServiceWorker)return;this.sender=new vq(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Iq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await PI(e,id,"1"),await CI(e,id),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Sq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zd(i,!1).getAll();return new Pc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Rq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const Cq=GS;new Ac(3e4,6e4);function xq(t,e){return e?Di(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class hy extends uy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Dq(t){return MS(t.auth,new hy(t),t.bypassAuthState)}function Oq(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),aq(n,new hy(t),t.bypassAuthState)}async function kq(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),oq(n,new hy(t),t.bypassAuthState)}class WS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dq;case"linkViaPopup":case"linkViaRedirect":return kq;case"reauthViaPopup":case"reauthViaRedirect":return Oq;default:Ur(this.auth,"internal-error")}}resolve(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nq=new Ac(2e3,1e4);class Ua extends WS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Ui(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Nq.get())};e()}}Ua.currentPopupAction=null;const Vq="pendingRedirect",vf=new Map;class Lq extends WS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vf.get(this.auth._key());if(!e){try{const r=await Mq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vf.set(this.auth._key(),e)}return this.bypassAuthState||vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mq(t,e){const n=Bq(e),r=Uq(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Fq(t,e){vf.set(t._key(),e)}function Uq(t){return Di(t._redirectPersistence)}function Bq(t){return yf(Vq,t.config.apiKey,t.name)}async function qq(t,e,n=!1){if(Yr(t.app))return Promise.reject(ki(t));const r=zs(t),i=xq(r,e),a=await new Lq(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const jq=600*1e3;class zq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jq&&this.cachedEventUids.clear(),this.cachedEventUids.has(xI(e))}saveEventToCache(e){this.cachedEventUids.add(xI(e)),this.lastProcessedEventTime=Date.now()}}function xI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HS(t);default:return!1}}async function Gq(t,e={}){return Ki(t,"GET","/v1/projects",e)}const Wq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hq=/^https?/;async function Qq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gq(t);for(const n of e)try{if(Jq(n))return}catch{}Ur(t,"unauthorized-domain")}function Jq(t){const e=Mm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!Hq.test(n))return!1;if(Wq.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yq=new Ac(3e4,6e4);function DI(){const t=ri().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Xq(t){return new Promise((e,n)=>{var r,i,s;function a(){DI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DI(),n(ni(t,"network-request-failed"))},timeout:Yq.get()})}if(!((i=(r=ri().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ri().gapi)===null||s===void 0)&&s.load)a();else{const l=qB("iframefcb");return ri()[l]=()=>{gapi.load?a():n(ni(t,"network-request-failed"))},OS(`${BB()}?onload=${l}`).catch(h=>n(h))}}).catch(e=>{throw wf=null,e})}let wf=null;function Zq(t){return wf=wf||Xq(t),wf}const e4=new Ac(5e3,15e3),t4="__/auth/iframe",n4="emulator/auth/iframe",r4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s4(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sy(e,n4):`https://${t.config.authDomain}/${t4}`,r={apiKey:e.apiKey,appName:t.name,v:fu},i=i4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_c(r).slice(1)}`}async function o4(t){const e=await Zq(t),n=ri().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:s4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ni(t,"network-request-failed"),l=ri().setTimeout(()=>{s(a)},e4.get());function h(){ri().clearTimeout(l),i(r)}r.ping(h).then(h,()=>{s(a)})}))}const a4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u4=500,l4=600,c4="_blank",h4="http://localhost";class OI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f4(t,e,n,r=u4,i=l4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const h=Object.assign(Object.assign({},a4),{width:r.toString(),height:i.toString(),top:s,left:a}),d=on().toLowerCase();n&&(l=AS(d)?c4:n),TS(d)&&(e=e||h4,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[E,N])=>`${v}${E}=${N},`,"");if(DB(d)&&l!=="_self")return d4(e||"",l),new OI(null);const _=window.open(e||"",l,p);Me(_,t,"popup-blocked");try{_.focus()}catch{}return new OI(_)}function d4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const p4="__/auth/handler",g4="emulator/auth/handler",m4=encodeURIComponent("fac");async function kI(t,e,n,r,i,s){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fu,eventId:i};if(e instanceof VS){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",CL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,_]of Object.entries({}))a[p]=_}if(e instanceof Rc){const p=e.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const h=await t._getAppCheckToken(),d=h?`#${m4}=${encodeURIComponent(h)}`:"";return`${_4(t)}?${_c(l).slice(1)}${d}`}function _4({config:t}){return t.emulator?sy(t,g4):`https://${t.authDomain}/${p4}`}const Dg="webStorageSupport";class y4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=qq,this._overrideRedirectResult=Fq}async _openPopup(e,n,r,i){var s;Ui((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await kI(e,n,r,Mm(),i);return f4(e,a,cy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await kI(e,n,r,Mm(),i);return wq(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ui(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await o4(e),r=new zq(e);return n.register("authEvent",i=>(Me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dg,{type:Dg},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Dg];a!==void 0&&n(!!a),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Qq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xS()||bS()||ay()}}const v4=y4;var NI="@firebase/auth",VI="1.7.9";class w4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function E4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I4(t){Ja(new No("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Me(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DS(t)},d=new MB(r,i,s,h);return GB(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ja(new No("auth-internal",e=>{const n=zs(e.getProvider("auth").getImmediate());return(r=>new w4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(NI,VI,E4(t)),Ds(NI,VI,"esm2017")}const T4=300,b4=X0("authIdTokenMaxAge")||T4;let LI=null;const A4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>b4)return;const i=n==null?void 0:n.token;LI!==i&&(LI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function S4(t=xM()){const e=__(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KB(t,{popupRedirectResolver:v4,persistence:[Cq,_q,$S]}),r=X0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=A4(s.toString());pq(n,a,()=>a(n.currentUser)),dq(n,l=>a(l))}}const i=_L("auth");return i&&WB(n,`http://${i}`),n}function R4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ni("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",R4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I4("Browser");var P4="firebase",C4="10.14.1";Ds(P4,C4,"app");const gn=[];for(let t=0;t<256;++t)gn.push((t+256).toString(16).slice(1));function x4(t,e=0){return(gn[t[e+0]]+gn[t[e+1]]+gn[t[e+2]]+gn[t[e+3]]+"-"+gn[t[e+4]]+gn[t[e+5]]+"-"+gn[t[e+6]]+gn[t[e+7]]+"-"+gn[t[e+8]]+gn[t[e+9]]+"-"+gn[t[e+10]]+gn[t[e+11]]+gn[t[e+12]]+gn[t[e+13]]+gn[t[e+14]]+gn[t[e+15]]).toLowerCase()}let Og;const D4=new Uint8Array(16);function O4(){if(!Og){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Og=crypto.getRandomValues.bind(crypto)}return Og(D4)}const k4=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),MI={randomUUID:k4};function od(t,e,n){var i,s,a;if(MI.randomUUID&&!t)return MI.randomUUID();t=t||{};const r=(a=(s=t.random)!=null?s:(i=t.rng)==null?void 0:i.call(t))!=null?a:O4();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,x4(r)}const N4={make(t,e,n){const r=od(),i=Date.now();return{name:t,users:n,id:r,people:e,transactions:{},timestamp:i}}},V4={make(t=""){return{name:t,friends:{},sheets:{}}}},Pa={getDay(t){return new Date(t).getDate().toString().padStart(2,"0")},getMonth(t,e=!0){const n=new Date(t);return new Intl.DateTimeFormat("en-GB",{month:e?"short":"long"}).format(n)},getYear(t){return new Date(t).getFullYear()},formatCurrency(t,e){const n=new Intl.NumberFormat("it-CH",{maximumFractionDigits:2}).format(e/100);return`${t} ${n}`},truncate(t,e=null){return!t||!e?t:t.length>e?t.substring(0,e-3)+"...":t},isDev(){return!1},isIos(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isAppInstalled(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0},add(t,e,n=1){var i,s;const r=Math.max(t.length,e.length);for(let a=0;a<r;++a)t[a]=((i=t[a])!=null?i:0)+n*((s=e[a])!=null?s:0)},convertArray(t,e){if(!t||t.length===0)return t;const n=t.map(d=>d*e),r=n.map(d=>Math.floor(d)),i=n.reduce((d,p)=>d+p,0),s=r.reduce((d,p)=>d+p,0);let a=Math.round(i-s);if(a===0)return r;const l=n.map((d,p)=>({i:p,frac:d-r[p]}));l.sort((d,p)=>p.frac-d.frac);const h=[...r];for(let d=0;d<a;d++)h[l[d].i]+=1;return h}},L4={make(t,e,n){return{amount:t,creditorIdx:e,debtorIdx:n}}},hn={make(t,e){const n=Array.isArray(t)?t.length:t;let r="";const i=od(),s=Array.from({length:n},()=>0),a=Array.from({length:n},()=>0);let l=Date.now();return{name:r,id:i,credits:s,currency:e,debts:a,timestamp:l}},fromTransaction1to1(t,e,n){const r=Array.isArray(e)?e.length:e,i=od(),s=Array.from({length:r},()=>0),a=Array.from({length:r},()=>0);let l=Date.now();return s[t.creditorIdx]=t.amount,a[t.debtorIdx]=t.amount,{name:`${e[t.debtorIdx]}  ${e[t.creditorIdx]}`?Array.isArray(e):"",id:i,credits:s,currency:n,debts:a,timestamp:l}},update(t){var r;if(!("amount"in t))return t;const e=t.debts.length,n=Array.from({length:e},()=>0);n[t.payer]=(r=t.amount)!=null?r:0,t.credits=n,t.debts=t.debts.map(i=>{var s;return(s=i.owedAmount)!=null?s:0}),delete t.amount,delete t.payer},credit(t){return this.update(t),t.credits.reduce((e,n)=>e+n,0)},debt(t){return this.update(t),t.debts.reduce((e,n)=>e+n,0)},updatePeople(t,e){const n=e-t.debts.length;n<=0||(t.debts.push(...Array.from({length:n},()=>0)),Array.isArray(t.credits)&&t.credits.push(...Array.from({length:n},()=>0)))},debtors(t){return this.update(t),this.credit(t)===0?t.debts.map(()=>!0):t.debts.map(n=>n!==0)},payerIdx(t,e){this.update(t);const n=this.credit(t);if(!t.credits.length||n===0)return e;for(let r=0;r<t.credits.length;r++)if(t.credits[r]===n)return r;return-1},payerIdxs(t){return t.credits.map((e,n)=>({credit:e,idx:n})).filter(e=>e.credit!==0).sort((e,n)=>n.credit-e.credit).map(e=>e.idx)},position(t,e){return this.update(t),t.credits[e]-t.debts[e]},split(t,e,n=new Set){this.update(t);for(let d=0;d<t.debts.length;d++)e[d]||(t.debts[d]=0);const r=this.credit(t);let i=0;for(const d of n)i+=t.debts[d]||0;const s=[];for(let d=0;d<e.length;d++)e[d]&&!n.has(d)&&s.push(d);if(s.length===0)return;let a=r-i;if(a<=0){for(const d of s)t.debts[d]=0;return}s.sort((d,p)=>t.credits[d]-t.credits[p]);const l=Math.floor(a/s.length);let h=a%s.length;for(const d of s)t.debts[d]=l,h>0&&(t.debts[d]+=1,h--)},setCredit(t,e,n,r,i=new Set){this.update(t);for(let s=0;s<t.credits.length;s++)t.credits[s]=s===n?e:0;this.split(t,r,i)},setCustomCredit(t,e,n,r){this.update(t),t.credits[n]=e,this.split(t,r)},setCustomDebt(t,e,n,r,i,s){i.add(n),t.debts[n]=e;const a=[...i].reduce((p,_)=>p+t.debts[_],0),l=this.credit(t),h=new Set(r.flatMap((p,_)=>p?_:[])),d=i.size===h.size&&[...i].every(p=>h.has(p));if(a>l||d){this.setCredit(t,a,s,r,i);return}this.split(t,r,i)},searchString(t){const e=(t.name||"").toLowerCase(),n=(t.credits||[]).filter(i=>i>0).map(i=>String(i).toLowerCase()).join(" "),r=(t.debts||[]).filter(i=>i>0).map(i=>String(i).toLowerCase()).join(" ");return`${e}|${n}|${r}`},getTransactionList(t){return t?Object.entries(t).sort(([,e],[,n])=>n.timestamp-e.timestamp).map(([e])=>e):[]},check(t){this.update(t);const e=this.credit(t),n=this.debt(t);if(n!==e)throw new Error(`The owed credits: ${n/100} do not sum up to the transaction credit: ${e/100}! Probably you need to fix either the shares or the total credit.`)},csvHeader(t=[]){const e=t.map(r=>`credits.${r}`),n=t.map(r=>`debts.${r}`);return["id","name","currency","timestamp","date",...e,...n]},toCsvLine(t){this.update(t);const e=new Intl.DateTimeFormat("en-GB").format(new Date(t.timestamp));return[t.id,t.name,t.currency,t.timestamp,e,...t.credits,...t.debts]},state(t){if(this.update(t),t.debts.length!==2)return-1;if(this.debt(t)===0)return 1;if(t.debts[0]===0||t.debts[1]===0)return 0;const e=Math.floor(this.credit(t)/2);return t.debts[0]>=e&&t.debts[1]>=e?1:-1},_simplify(t){Pa.add(t.credits,t.debts,-1);for(let e=0;e<t.credits.length;++e)t.credits[e]>=0?t.debts[e]=0:(t.debts[e]=-t.credits[e],t.credits[e]=0)},add(t,e,n){if(t.currency!==e.currency)throw new Error(`Trying to combine transactions with different currencies: ${t.currency} with ${e.currency}`);t.name="",Pa.add(t.credits,e.credits,n),Pa.add(t.debts,e.debts,n),this._simplify(t)},convert(t,e,n){if(t.currency===n)return t;const r=hn.make(t.credits.length,n);return r.credits=Pa.convertArray(t.credits,e),r.debts=Pa.convertArray(t.debts,e),r},isEmpty(t){return t.credits.every(e=>e===0)&&t.debts.every(e=>e===0)},minCashFlow(t){const e=[],n=[...t.credits];Pa.add(n,t.debts,-1);let r=n.map((i,s)=>({index:s,balance:i})).filter(({balance:i})=>i!==0);for(;r.length>0;){let i=0,s=0;for(let d=1;d<r.length;d++)r[d].balance<r[i].balance&&(i=d),r[d].balance>r[s].balance&&(s=d);const a=r[i],l=r[s],h=Math.min(-a.balance,l.balance);e.push(L4.make(h,l.index,a.index)),a.balance+=h,l.balance-=h,r=r.filter(d=>d.balance!==0)}return e},summary(t,e){const n=t.credits[e]-t.debts[e],i=this.minCashFlow(t).filter(s=>s.creditorIdx===e||s.debtorIdx===e);return{total:n,transactions:i}},settle(t,e,n){const i=this.summary(t,e).transactions,s=hn.make(n,t.currency);for(let a=0;a<i.length;++a){const l=hn.fromTransaction1to1(i[a],n,t.currency);hn.add(s,l,-1)}return s},convertPerson(t,e,n,r,i){const s=this.settle(t,e,n),a=hn.convert(s,r,i);return[a.credits,a.debts]=[a.debts,a.credits],s.timestamp<=a.timestamp&&(a.timestamp+=1),[s,a]},convertAll(t,e,n){this.update(t);const r=hn.make(t.debts.length,t.currency);r.debts=[...t.credits],r.credits=[...t.debts];const i=hn.convert(t,e,n);return r.timestamp<=i.timestamp&&(i.timestamp+=1),[r,i]}},kg={make(t,e){const i={nPeople:e,nTransactions:0,perCurrencyBalance:{}};return e<=0||Object.values(t).forEach(s=>{this.applyTransaction(i,s,e)}),i},applyTransaction(t,e,n,r=1){hn.updatePeople(e,n),hn.update(e),e.currency in t.perCurrencyBalance||(t.perCurrencyBalance[e.currency]=hn.make(e.credits.length,e.currency)),hn.add(t.perCurrencyBalance[e.currency],e,r),++t.nTransactions},currencies(t){return new Set(Object.entries(t.perCurrencyBalance).filter(([e,n])=>!hn.isEmpty(n)).map(([e])=>e))},summary(t,e){if(!t||!t.perCurrencyBalance)return{};const n={};for(const[r,i]of Object.entries(t.perCurrencyBalance))i.credits[e]-i.debts[e]!==0&&(n[r]=hn.summary(i,e));return n}},ol={make(t="",e="",n="",r=null){t||(t=od());let i=!0;return r||(r=Date.now()),{id:t,name:e,active:i,email:n,timestamp:r}},user2person(t){return this.make(t.id,t.name,t.email)},makeUser(t="",e="",n="",r=!1){return{id:t,name:e,email:n,emailVerified:r}},username(t){return(t==null?void 0:t.name)||(t==null?void 0:t.email)},compare(t,e){const n=this.username(t).toLowerCase(),r=this.username(e).toLowerCase();return n.localeCompare(r)}},Ng={make(){return{apiKey:null,authDomain:null,projectId:null,storageBucket:null,messagingSenderId:null,appId:null}},isCompatible(t){return t?["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].every(n=>t[n]&&t[n].trim()!==""):!1}};var nf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function M4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vl={exports:{}};var F4=vl.exports,FI;function U4(){return FI||(FI=1,(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,v=2,E=4,N=1,M=2,F=1,Q=2,j=4,z=8,G=16,J=32,oe=64,R=128,S=256,A=512,x=30,k="...",O=800,P=16,ce=1,qe=2,Ye=3,Te=1/0,Be=9007199254740991,Ln=17976931348623157e292,En=NaN,Dt=4294967295,Rt=Dt-1,Pt=Dt>>>1,qr=[["ary",R],["bind",F],["bindKey",Q],["curry",z],["curryRight",G],["flip",A],["partial",J],["partialRight",oe],["rearg",S]],Ht="[object Arguments]",Xt="[object Array]",ee="[object AsyncFunction]",_e="[object Boolean]",de="[object Date]",be="[object DOMException]",$e="[object Error]",C="[object Function]",V="[object GeneratorFunction]",B="[object Map]",Z="[object Number]",ie="[object Null]",Y="[object Object]",pe="[object Promise]",fe="[object Proxy]",le="[object RegExp]",re="[object Set]",Se="[object String]",ge="[object Symbol]",Re="[object Undefined]",Ce="[object WeakMap]",De="[object WeakSet]",Le="[object ArrayBuffer]",We="[object DataView]",Bt="[object Float32Array]",qt="[object Float64Array]",In="[object Int8Array]",Qt="[object Int16Array]",fr="[object Int32Array]",si="[object Uint8Array]",$t="[object Uint8ClampedArray]",Tn="[object Uint16Array]",Gi="[object Uint32Array]",Wi=/\b__p \+= '';/g,Cc=/\b(__p \+=) '' \+/g,xc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hi=/&(?:amp|lt|gt|quot|#39);/g,Jo=/[&<>"']/g,yu=RegExp(Hi.source),oi=RegExp(Jo.source),Dc=/<%-([\s\S]+?)%>/g,Yo=/<%([\s\S]+?)%>/g,vu=/<%=([\s\S]+?)%>/g,Ks=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oc=/^\w*$/,fn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xo=/[\\^$.*+?()[\]{}|]/g,Gs=RegExp(Xo.source),ai=/^\s+/,Wd=/\s/,Hd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qi=/\{\n\/\* \[wrapped with (.+)\] \*/,Qd=/,? & /,Jd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zo=/[()=,{}\[\]\/\s]/,kc=/\\(\\)?/g,wu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ws=/\w*$/,$r=/^[-+]0x[0-9a-f]+$/i,Nc=/^0b[01]+$/i,Vc=/^\[object .+?Constructor\]$/,Eu=/^0o[0-7]+$/i,Iu=/^(?:0|[1-9]\d*)$/,Lc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hs=/($^)/,Yd=/['\n\r\u2028\u2029\\]/g,ui="\\ud800-\\udfff",Mc="\\u0300-\\u036f",Tu="\\ufe20-\\ufe2f",Qs="\\u20d0-\\u20ff",jr=Mc+Tu+Qs,ea="\\u2700-\\u27bf",Fc="a-z\\xdf-\\xf6\\xf8-\\xff",Uc="\\xac\\xb1\\xd7\\xf7",Bc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qc="\\u2000-\\u206f",bu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ta="A-Z\\xc0-\\xd6\\xd8-\\xde",Au="\\ufe0e\\ufe0f",Su=Uc+Bc+qc+bu,Ru="[']",Xd="["+ui+"]",Pu="["+Su+"]",Js="["+jr+"]",$c="\\d+",li="["+ea+"]",dr="["+Fc+"]",Ys="[^"+ui+Su+$c+ea+Fc+ta+"]",Ji="\\ud83c[\\udffb-\\udfff]",jc="(?:"+Js+"|"+Ji+")",_t="[^"+ui+"]",Yi="(?:\\ud83c[\\udde6-\\uddff]){2}",ci="[\\ud800-\\udbff][\\udc00-\\udfff]",pr="["+ta+"]",zc="\\u200d",Cu="(?:"+dr+"|"+Ys+")",Zd="(?:"+pr+"|"+Ys+")",Kc="(?:"+Ru+"(?:d|ll|m|re|s|t|ve))?",Gc="(?:"+Ru+"(?:D|LL|M|RE|S|T|VE))?",Wc=jc+"?",Xi="["+Au+"]?",zr="(?:"+zc+"(?:"+[_t,Yi,ci].join("|")+")"+Xi+Wc+")*",Hc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xu=Xi+Wc+zr,Zi="(?:"+[li,Yi,ci].join("|")+")"+xu,ep="(?:"+[_t+Js+"?",Js,Yi,ci,Xd].join("|")+")",tp=RegExp(Ru,"g"),np=RegExp(Js,"g"),gr=RegExp(Ji+"(?="+Ji+")|"+ep+xu,"g"),rp=RegExp([pr+"?"+dr+"+"+Kc+"(?="+[Pu,pr,"$"].join("|")+")",Zd+"+"+Gc+"(?="+[Pu,pr+Cu,"$"].join("|")+")",pr+"?"+Cu+"+"+Kc,pr+"+"+Gc,Qc,Hc,$c,Zi].join("|"),"g"),ip=RegExp("["+zc+ui+jr+Au+"]"),na=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ra=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jc=-1,lt={};lt[Bt]=lt[qt]=lt[In]=lt[Qt]=lt[fr]=lt[si]=lt[$t]=lt[Tn]=lt[Gi]=!0,lt[Ht]=lt[Xt]=lt[Le]=lt[_e]=lt[We]=lt[de]=lt[$e]=lt[C]=lt[B]=lt[Z]=lt[Y]=lt[le]=lt[re]=lt[Se]=lt[Ce]=!1;var ut={};ut[Ht]=ut[Xt]=ut[Le]=ut[We]=ut[_e]=ut[de]=ut[Bt]=ut[qt]=ut[In]=ut[Qt]=ut[fr]=ut[B]=ut[Z]=ut[Y]=ut[le]=ut[re]=ut[Se]=ut[ge]=ut[si]=ut[$t]=ut[Tn]=ut[Gi]=!0,ut[$e]=ut[C]=ut[Ce]=!1;var Yc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Du={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ct={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},op=parseFloat,Xc=parseInt,Ou=typeof nf=="object"&&nf&&nf.Object===Object&&nf,Zc=typeof self=="object"&&self&&self.Object===Object&&self,Lt=Ou||Zc||Function("return this")(),ia=e&&!e.nodeType&&e,dn=ia&&!0&&t&&!t.nodeType&&t,ku=dn&&dn.exports===ia,Nu=ku&&Ou.process,un=(function(){try{var U=dn&&dn.require&&dn.require("util").types;return U||Nu&&Nu.binding&&Nu.binding("util")}catch{}})(),Vu=un&&un.isArrayBuffer,sa=un&&un.isDate,Xs=un&&un.isMap,Lu=un&&un.isRegExp,Zs=un&&un.isSet,eh=un&&un.isTypedArray;function bn(U,X,W){switch(W.length){case 0:return U.call(X);case 1:return U.call(X,W[0]);case 2:return U.call(X,W[0],W[1]);case 3:return U.call(X,W[0],W[1],W[2])}return U.apply(X,W)}function eo(U,X,W,we){for(var je=-1,ht=U==null?0:U.length;++je<ht;){var en=U[je];X(we,en,W(en),U)}return we}function Mn(U,X){for(var W=-1,we=U==null?0:U.length;++W<we&&X(U[W],W,U)!==!1;);return U}function th(U,X){for(var W=U==null?0:U.length;W--&&X(U[W],W,U)!==!1;);return U}function oa(U,X){for(var W=-1,we=U==null?0:U.length;++W<we;)if(!X(U[W],W,U))return!1;return!0}function mr(U,X){for(var W=-1,we=U==null?0:U.length,je=0,ht=[];++W<we;){var en=U[W];X(en,W,U)&&(ht[je++]=en)}return ht}function to(U,X){var W=U==null?0:U.length;return!!W&&hi(U,X,0)>-1}function es(U,X,W){for(var we=-1,je=U==null?0:U.length;++we<je;)if(W(X,U[we]))return!0;return!1}function wt(U,X){for(var W=-1,we=U==null?0:U.length,je=Array(we);++W<we;)je[W]=X(U[W],W,U);return je}function Cr(U,X){for(var W=-1,we=X.length,je=U.length;++W<we;)U[je+W]=X[W];return U}function xr(U,X,W,we){var je=-1,ht=U==null?0:U.length;for(we&&ht&&(W=U[++je]);++je<ht;)W=X(W,U[je],je,U);return W}function nh(U,X,W,we){var je=U==null?0:U.length;for(we&&je&&(W=U[--je]);je--;)W=X(W,U[je],je,U);return W}function aa(U,X){for(var W=-1,we=U==null?0:U.length;++W<we;)if(X(U[W],W,U))return!0;return!1}var rh=y("length");function ih(U){return U.split("")}function ua(U){return U.match(Jd)||[]}function An(U,X,W){var we;return W(U,function(je,ht,en){if(X(je,ht,en))return we=ht,!1}),we}function no(U,X,W,we){for(var je=U.length,ht=W+(we?1:-1);we?ht--:++ht<je;)if(X(U[ht],ht,U))return ht;return-1}function hi(U,X,W){return X===X?DR(U,X,W):no(U,c,W)}function ts(U,X,W,we){for(var je=W-1,ht=U.length;++je<ht;)if(we(U[je],X))return je;return-1}function c(U){return U!==U}function g(U,X){var W=U==null?0:U.length;return W?he(U,X)/W:En}function y(U){return function(X){return X==null?n:X[U]}}function T(U){return function(X){return U==null?n:U[X]}}function $(U,X,W,we,je){return je(U,function(ht,en,Et){W=we?(we=!1,ht):X(W,ht,en,Et)}),W}function H(U,X){var W=U.length;for(U.sort(X);W--;)U[W]=U[W].value;return U}function he(U,X){for(var W,we=-1,je=U.length;++we<je;){var ht=X(U[we]);ht!==n&&(W=W===n?ht:W+ht)}return W}function ct(U,X){for(var W=-1,we=Array(U);++W<U;)we[W]=X(W);return we}function Zt(U,X){return wt(X,function(W){return[W,U[W]]})}function rt(U){return U&&U.slice(0,yy(U)+1).replace(ai,"")}function ft(U){return function(X){return U(X)}}function Jt(U,X){return wt(X,function(W){return U[W]})}function _r(U,X){return U.has(X)}function Hn(U,X){for(var W=-1,we=U.length;++W<we&&hi(X,U[W],0)>-1;);return W}function ro(U,X){for(var W=U.length;W--&&hi(X,U[W],0)>-1;);return W}function Mu(U,X){for(var W=U.length,we=0;W--;)U[W]===X&&++we;return we}var bR=T(Yc),AR=T(Du);function SR(U){return"\\"+sp[U]}function RR(U,X){return U==null?n:U[X]}function la(U){return ip.test(U)}function PR(U){return na.test(U)}function CR(U){for(var X,W=[];!(X=U.next()).done;)W.push(X.value);return W}function ap(U){var X=-1,W=Array(U.size);return U.forEach(function(we,je){W[++X]=[je,we]}),W}function _y(U,X){return function(W){return U(X(W))}}function ns(U,X){for(var W=-1,we=U.length,je=0,ht=[];++W<we;){var en=U[W];(en===X||en===p)&&(U[W]=p,ht[je++]=W)}return ht}function sh(U){var X=-1,W=Array(U.size);return U.forEach(function(we){W[++X]=we}),W}function xR(U){var X=-1,W=Array(U.size);return U.forEach(function(we){W[++X]=[we,we]}),W}function DR(U,X,W){for(var we=W-1,je=U.length;++we<je;)if(U[we]===X)return we;return-1}function OR(U,X,W){for(var we=W+1;we--;)if(U[we]===X)return we;return we}function ca(U){return la(U)?NR(U):rh(U)}function Dr(U){return la(U)?VR(U):ih(U)}function yy(U){for(var X=U.length;X--&&Wd.test(U.charAt(X)););return X}var kR=T(Ct);function NR(U){for(var X=gr.lastIndex=0;gr.test(U);)++X;return X}function VR(U){return U.match(gr)||[]}function LR(U){return U.match(rp)||[]}var MR=(function U(X){X=X==null?Lt:ha.defaults(Lt.Object(),X,ha.pick(Lt,ra));var W=X.Array,we=X.Date,je=X.Error,ht=X.Function,en=X.Math,Et=X.Object,up=X.RegExp,FR=X.String,yr=X.TypeError,oh=W.prototype,UR=ht.prototype,fa=Et.prototype,ah=X["__core-js_shared__"],uh=UR.toString,mt=fa.hasOwnProperty,BR=0,vy=(function(){var o=/[^.]+$/.exec(ah&&ah.keys&&ah.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""})(),lh=fa.toString,qR=uh.call(Et),$R=Lt._,jR=up("^"+uh.call(mt).replace(Xo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ch=ku?X.Buffer:n,rs=X.Symbol,hh=X.Uint8Array,wy=ch?ch.allocUnsafe:n,fh=_y(Et.getPrototypeOf,Et),Ey=Et.create,Iy=fa.propertyIsEnumerable,dh=oh.splice,Ty=rs?rs.isConcatSpreadable:n,Fu=rs?rs.iterator:n,io=rs?rs.toStringTag:n,ph=(function(){try{var o=lo(Et,"defineProperty");return o({},"",{}),o}catch{}})(),zR=X.clearTimeout!==Lt.clearTimeout&&X.clearTimeout,KR=we&&we.now!==Lt.Date.now&&we.now,GR=X.setTimeout!==Lt.setTimeout&&X.setTimeout,gh=en.ceil,mh=en.floor,lp=Et.getOwnPropertySymbols,WR=ch?ch.isBuffer:n,by=X.isFinite,HR=oh.join,QR=_y(Et.keys,Et),tn=en.max,Sn=en.min,JR=we.now,YR=X.parseInt,Ay=en.random,XR=oh.reverse,cp=lo(X,"DataView"),Uu=lo(X,"Map"),hp=lo(X,"Promise"),da=lo(X,"Set"),Bu=lo(X,"WeakMap"),qu=lo(Et,"create"),_h=Bu&&new Bu,pa={},ZR=co(cp),eP=co(Uu),tP=co(hp),nP=co(da),rP=co(Bu),yh=rs?rs.prototype:n,$u=yh?yh.valueOf:n,Sy=yh?yh.toString:n;function I(o){if(Mt(o)&&!Ge(o)&&!(o instanceof tt)){if(o instanceof vr)return o;if(mt.call(o,"__wrapped__"))return Rv(o)}return new vr(o)}var ga=(function(){function o(){}return function(u){if(!Ot(u))return{};if(Ey)return Ey(u);o.prototype=u;var f=new o;return o.prototype=n,f}})();function vh(){}function vr(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}I.templateSettings={escape:Dc,evaluate:Yo,interpolate:vu,variable:"",imports:{_:I}},I.prototype=vh.prototype,I.prototype.constructor=I,vr.prototype=ga(vh.prototype),vr.prototype.constructor=vr;function tt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function iP(){var o=new tt(this.__wrapped__);return o.__actions__=Qn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Qn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Qn(this.__views__),o}function sP(){if(this.__filtered__){var o=new tt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function oP(){var o=this.__wrapped__.value(),u=this.__dir__,f=Ge(o),m=u<0,w=f?o.length:0,b=yC(0,w,this.__views__),D=b.start,L=b.end,q=L-D,te=m?L:D-1,ne=this.__iteratees__,ae=ne.length,me=0,Ae=Sn(q,this.__takeCount__);if(!f||!m&&w==q&&Ae==q)return Jy(o,this.__actions__);var ke=[];e:for(;q--&&me<Ae;){te+=u;for(var Je=-1,Ne=o[te];++Je<ae;){var et=ne[Je],it=et.iteratee,sr=et.type,Bn=it(Ne);if(sr==qe)Ne=Bn;else if(!Bn){if(sr==ce)continue e;break e}}ke[me++]=Ne}return ke}tt.prototype=ga(vh.prototype),tt.prototype.constructor=tt;function so(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function aP(){this.__data__=qu?qu(null):{},this.size=0}function uP(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function lP(o){var u=this.__data__;if(qu){var f=u[o];return f===h?n:f}return mt.call(u,o)?u[o]:n}function cP(o){var u=this.__data__;return qu?u[o]!==n:mt.call(u,o)}function hP(o,u){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=qu&&u===n?h:u,this}so.prototype.clear=aP,so.prototype.delete=uP,so.prototype.get=lP,so.prototype.has=cP,so.prototype.set=hP;function fi(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function fP(){this.__data__=[],this.size=0}function dP(o){var u=this.__data__,f=wh(u,o);if(f<0)return!1;var m=u.length-1;return f==m?u.pop():dh.call(u,f,1),--this.size,!0}function pP(o){var u=this.__data__,f=wh(u,o);return f<0?n:u[f][1]}function gP(o){return wh(this.__data__,o)>-1}function mP(o,u){var f=this.__data__,m=wh(f,o);return m<0?(++this.size,f.push([o,u])):f[m][1]=u,this}fi.prototype.clear=fP,fi.prototype.delete=dP,fi.prototype.get=pP,fi.prototype.has=gP,fi.prototype.set=mP;function di(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function _P(){this.size=0,this.__data__={hash:new so,map:new(Uu||fi),string:new so}}function yP(o){var u=Oh(this,o).delete(o);return this.size-=u?1:0,u}function vP(o){return Oh(this,o).get(o)}function wP(o){return Oh(this,o).has(o)}function EP(o,u){var f=Oh(this,o),m=f.size;return f.set(o,u),this.size+=f.size==m?0:1,this}di.prototype.clear=_P,di.prototype.delete=yP,di.prototype.get=vP,di.prototype.has=wP,di.prototype.set=EP;function oo(o){var u=-1,f=o==null?0:o.length;for(this.__data__=new di;++u<f;)this.add(o[u])}function IP(o){return this.__data__.set(o,h),this}function TP(o){return this.__data__.has(o)}oo.prototype.add=oo.prototype.push=IP,oo.prototype.has=TP;function Or(o){var u=this.__data__=new fi(o);this.size=u.size}function bP(){this.__data__=new fi,this.size=0}function AP(o){var u=this.__data__,f=u.delete(o);return this.size=u.size,f}function SP(o){return this.__data__.get(o)}function RP(o){return this.__data__.has(o)}function PP(o,u){var f=this.__data__;if(f instanceof fi){var m=f.__data__;if(!Uu||m.length<i-1)return m.push([o,u]),this.size=++f.size,this;f=this.__data__=new di(m)}return f.set(o,u),this.size=f.size,this}Or.prototype.clear=bP,Or.prototype.delete=AP,Or.prototype.get=SP,Or.prototype.has=RP,Or.prototype.set=PP;function Ry(o,u){var f=Ge(o),m=!f&&ho(o),w=!f&&!m&&us(o),b=!f&&!m&&!w&&va(o),D=f||m||w||b,L=D?ct(o.length,FR):[],q=L.length;for(var te in o)(u||mt.call(o,te))&&!(D&&(te=="length"||w&&(te=="offset"||te=="parent")||b&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||_i(te,q)))&&L.push(te);return L}function Py(o){var u=o.length;return u?o[Ip(0,u-1)]:n}function CP(o,u){return kh(Qn(o),ao(u,0,o.length))}function xP(o){return kh(Qn(o))}function fp(o,u,f){(f!==n&&!kr(o[u],f)||f===n&&!(u in o))&&pi(o,u,f)}function ju(o,u,f){var m=o[u];(!(mt.call(o,u)&&kr(m,f))||f===n&&!(u in o))&&pi(o,u,f)}function wh(o,u){for(var f=o.length;f--;)if(kr(o[f][0],u))return f;return-1}function DP(o,u,f,m){return is(o,function(w,b,D){u(m,w,f(w),D)}),m}function Cy(o,u){return o&&Gr(u,ln(u),o)}function OP(o,u){return o&&Gr(u,Yn(u),o)}function pi(o,u,f){u=="__proto__"&&ph?ph(o,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[u]=f}function dp(o,u){for(var f=-1,m=u.length,w=W(m),b=o==null;++f<m;)w[f]=b?n:Wp(o,u[f]);return w}function ao(o,u,f){return o===o&&(f!==n&&(o=o<=f?o:f),u!==n&&(o=o>=u?o:u)),o}function wr(o,u,f,m,w,b){var D,L=u&_,q=u&v,te=u&E;if(f&&(D=w?f(o,m,w,b):f(o)),D!==n)return D;if(!Ot(o))return o;var ne=Ge(o);if(ne){if(D=wC(o),!L)return Qn(o,D)}else{var ae=Rn(o),me=ae==C||ae==V;if(us(o))return Zy(o,L);if(ae==Y||ae==Ht||me&&!w){if(D=q||me?{}:yv(o),!L)return q?lC(o,OP(D,o)):uC(o,Cy(D,o))}else{if(!ut[ae])return w?o:{};D=EC(o,ae,L)}}b||(b=new Or);var Ae=b.get(o);if(Ae)return Ae;b.set(o,D),Wv(o)?o.forEach(function(Ne){D.add(wr(Ne,u,f,Ne,o,b))}):Kv(o)&&o.forEach(function(Ne,et){D.set(et,wr(Ne,u,f,et,o,b))});var ke=te?q?kp:Op:q?Yn:ln,Je=ne?n:ke(o);return Mn(Je||o,function(Ne,et){Je&&(et=Ne,Ne=o[et]),ju(D,et,wr(Ne,u,f,et,o,b))}),D}function kP(o){var u=ln(o);return function(f){return xy(f,o,u)}}function xy(o,u,f){var m=f.length;if(o==null)return!m;for(o=Et(o);m--;){var w=f[m],b=u[w],D=o[w];if(D===n&&!(w in o)||!b(D))return!1}return!0}function Dy(o,u,f){if(typeof o!="function")throw new yr(a);return Ju(function(){o.apply(n,f)},u)}function zu(o,u,f,m){var w=-1,b=to,D=!0,L=o.length,q=[],te=u.length;if(!L)return q;f&&(u=wt(u,ft(f))),m?(b=es,D=!1):u.length>=i&&(b=_r,D=!1,u=new oo(u));e:for(;++w<L;){var ne=o[w],ae=f==null?ne:f(ne);if(ne=m||ne!==0?ne:0,D&&ae===ae){for(var me=te;me--;)if(u[me]===ae)continue e;q.push(ne)}else b(u,ae,m)||q.push(ne)}return q}var is=iv(Kr),Oy=iv(gp,!0);function NP(o,u){var f=!0;return is(o,function(m,w,b){return f=!!u(m,w,b),f}),f}function Eh(o,u,f){for(var m=-1,w=o.length;++m<w;){var b=o[m],D=u(b);if(D!=null&&(L===n?D===D&&!ir(D):f(D,L)))var L=D,q=b}return q}function VP(o,u,f,m){var w=o.length;for(f=He(f),f<0&&(f=-f>w?0:w+f),m=m===n||m>w?w:He(m),m<0&&(m+=w),m=f>m?0:Qv(m);f<m;)o[f++]=u;return o}function ky(o,u){var f=[];return is(o,function(m,w,b){u(m,w,b)&&f.push(m)}),f}function pn(o,u,f,m,w){var b=-1,D=o.length;for(f||(f=TC),w||(w=[]);++b<D;){var L=o[b];u>0&&f(L)?u>1?pn(L,u-1,f,m,w):Cr(w,L):m||(w[w.length]=L)}return w}var pp=sv(),Ny=sv(!0);function Kr(o,u){return o&&pp(o,u,ln)}function gp(o,u){return o&&Ny(o,u,ln)}function Ih(o,u){return mr(u,function(f){return yi(o[f])})}function uo(o,u){u=os(u,o);for(var f=0,m=u.length;o!=null&&f<m;)o=o[Wr(u[f++])];return f&&f==m?o:n}function Vy(o,u,f){var m=u(o);return Ge(o)?m:Cr(m,f(o))}function Fn(o){return o==null?o===n?Re:ie:io&&io in Et(o)?_C(o):xC(o)}function mp(o,u){return o>u}function LP(o,u){return o!=null&&mt.call(o,u)}function MP(o,u){return o!=null&&u in Et(o)}function FP(o,u,f){return o>=Sn(u,f)&&o<tn(u,f)}function _p(o,u,f){for(var m=f?es:to,w=o[0].length,b=o.length,D=b,L=W(b),q=1/0,te=[];D--;){var ne=o[D];D&&u&&(ne=wt(ne,ft(u))),q=Sn(ne.length,q),L[D]=!f&&(u||w>=120&&ne.length>=120)?new oo(D&&ne):n}ne=o[0];var ae=-1,me=L[0];e:for(;++ae<w&&te.length<q;){var Ae=ne[ae],ke=u?u(Ae):Ae;if(Ae=f||Ae!==0?Ae:0,!(me?_r(me,ke):m(te,ke,f))){for(D=b;--D;){var Je=L[D];if(!(Je?_r(Je,ke):m(o[D],ke,f)))continue e}me&&me.push(ke),te.push(Ae)}}return te}function UP(o,u,f,m){return Kr(o,function(w,b,D){u(m,f(w),b,D)}),m}function Ku(o,u,f){u=os(u,o),o=Iv(o,u);var m=o==null?o:o[Wr(Ir(u))];return m==null?n:bn(m,o,f)}function Ly(o){return Mt(o)&&Fn(o)==Ht}function BP(o){return Mt(o)&&Fn(o)==Le}function qP(o){return Mt(o)&&Fn(o)==de}function Gu(o,u,f,m,w){return o===u?!0:o==null||u==null||!Mt(o)&&!Mt(u)?o!==o&&u!==u:$P(o,u,f,m,Gu,w)}function $P(o,u,f,m,w,b){var D=Ge(o),L=Ge(u),q=D?Xt:Rn(o),te=L?Xt:Rn(u);q=q==Ht?Y:q,te=te==Ht?Y:te;var ne=q==Y,ae=te==Y,me=q==te;if(me&&us(o)){if(!us(u))return!1;D=!0,ne=!1}if(me&&!ne)return b||(b=new Or),D||va(o)?gv(o,u,f,m,w,b):gC(o,u,q,f,m,w,b);if(!(f&N)){var Ae=ne&&mt.call(o,"__wrapped__"),ke=ae&&mt.call(u,"__wrapped__");if(Ae||ke){var Je=Ae?o.value():o,Ne=ke?u.value():u;return b||(b=new Or),w(Je,Ne,f,m,b)}}return me?(b||(b=new Or),mC(o,u,f,m,w,b)):!1}function jP(o){return Mt(o)&&Rn(o)==B}function yp(o,u,f,m){var w=f.length,b=w,D=!m;if(o==null)return!b;for(o=Et(o);w--;){var L=f[w];if(D&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++w<b;){L=f[w];var q=L[0],te=o[q],ne=L[1];if(D&&L[2]){if(te===n&&!(q in o))return!1}else{var ae=new Or;if(m)var me=m(te,ne,q,o,u,ae);if(!(me===n?Gu(ne,te,N|M,m,ae):me))return!1}}return!0}function My(o){if(!Ot(o)||AC(o))return!1;var u=yi(o)?jR:Vc;return u.test(co(o))}function zP(o){return Mt(o)&&Fn(o)==le}function KP(o){return Mt(o)&&Rn(o)==re}function GP(o){return Mt(o)&&Uh(o.length)&&!!lt[Fn(o)]}function Fy(o){return typeof o=="function"?o:o==null?Xn:typeof o=="object"?Ge(o)?qy(o[0],o[1]):By(o):ow(o)}function vp(o){if(!Qu(o))return QR(o);var u=[];for(var f in Et(o))mt.call(o,f)&&f!="constructor"&&u.push(f);return u}function WP(o){if(!Ot(o))return CC(o);var u=Qu(o),f=[];for(var m in o)m=="constructor"&&(u||!mt.call(o,m))||f.push(m);return f}function wp(o,u){return o<u}function Uy(o,u){var f=-1,m=Jn(o)?W(o.length):[];return is(o,function(w,b,D){m[++f]=u(w,b,D)}),m}function By(o){var u=Vp(o);return u.length==1&&u[0][2]?wv(u[0][0],u[0][1]):function(f){return f===o||yp(f,o,u)}}function qy(o,u){return Mp(o)&&vv(u)?wv(Wr(o),u):function(f){var m=Wp(f,o);return m===n&&m===u?Hp(f,o):Gu(u,m,N|M)}}function Th(o,u,f,m,w){o!==u&&pp(u,function(b,D){if(w||(w=new Or),Ot(b))HP(o,u,D,f,Th,m,w);else{var L=m?m(Up(o,D),b,D+"",o,u,w):n;L===n&&(L=b),fp(o,D,L)}},Yn)}function HP(o,u,f,m,w,b,D){var L=Up(o,f),q=Up(u,f),te=D.get(q);if(te){fp(o,f,te);return}var ne=b?b(L,q,f+"",o,u,D):n,ae=ne===n;if(ae){var me=Ge(q),Ae=!me&&us(q),ke=!me&&!Ae&&va(q);ne=q,me||Ae||ke?Ge(L)?ne=L:jt(L)?ne=Qn(L):Ae?(ae=!1,ne=Zy(q,!0)):ke?(ae=!1,ne=ev(q,!0)):ne=[]:Yu(q)||ho(q)?(ne=L,ho(L)?ne=Jv(L):(!Ot(L)||yi(L))&&(ne=yv(q))):ae=!1}ae&&(D.set(q,ne),w(ne,q,m,b,D),D.delete(q)),fp(o,f,ne)}function $y(o,u){var f=o.length;if(f)return u+=u<0?f:0,_i(u,f)?o[u]:n}function jy(o,u,f){u.length?u=wt(u,function(b){return Ge(b)?function(D){return uo(D,b.length===1?b[0]:b)}:b}):u=[Xn];var m=-1;u=wt(u,ft(Oe()));var w=Uy(o,function(b,D,L){var q=wt(u,function(te){return te(b)});return{criteria:q,index:++m,value:b}});return H(w,function(b,D){return aC(b,D,f)})}function QP(o,u){return zy(o,u,function(f,m){return Hp(o,m)})}function zy(o,u,f){for(var m=-1,w=u.length,b={};++m<w;){var D=u[m],L=uo(o,D);f(L,D)&&Wu(b,os(D,o),L)}return b}function JP(o){return function(u){return uo(u,o)}}function Ep(o,u,f,m){var w=m?ts:hi,b=-1,D=u.length,L=o;for(o===u&&(u=Qn(u)),f&&(L=wt(o,ft(f)));++b<D;)for(var q=0,te=u[b],ne=f?f(te):te;(q=w(L,ne,q,m))>-1;)L!==o&&dh.call(L,q,1),dh.call(o,q,1);return o}function Ky(o,u){for(var f=o?u.length:0,m=f-1;f--;){var w=u[f];if(f==m||w!==b){var b=w;_i(w)?dh.call(o,w,1):Ap(o,w)}}return o}function Ip(o,u){return o+mh(Ay()*(u-o+1))}function YP(o,u,f,m){for(var w=-1,b=tn(gh((u-o)/(f||1)),0),D=W(b);b--;)D[m?b:++w]=o,o+=f;return D}function Tp(o,u){var f="";if(!o||u<1||u>Be)return f;do u%2&&(f+=o),u=mh(u/2),u&&(o+=o);while(u);return f}function Xe(o,u){return Bp(Ev(o,u,Xn),o+"")}function XP(o){return Py(wa(o))}function ZP(o,u){var f=wa(o);return kh(f,ao(u,0,f.length))}function Wu(o,u,f,m){if(!Ot(o))return o;u=os(u,o);for(var w=-1,b=u.length,D=b-1,L=o;L!=null&&++w<b;){var q=Wr(u[w]),te=f;if(q==="__proto__"||q==="constructor"||q==="prototype")return o;if(w!=D){var ne=L[q];te=m?m(ne,q,L):n,te===n&&(te=Ot(ne)?ne:_i(u[w+1])?[]:{})}ju(L,q,te),L=L[q]}return o}var Gy=_h?function(o,u){return _h.set(o,u),o}:Xn,eC=ph?function(o,u){return ph(o,"toString",{configurable:!0,enumerable:!1,value:Jp(u),writable:!0})}:Xn;function tC(o){return kh(wa(o))}function Er(o,u,f){var m=-1,w=o.length;u<0&&(u=-u>w?0:w+u),f=f>w?w:f,f<0&&(f+=w),w=u>f?0:f-u>>>0,u>>>=0;for(var b=W(w);++m<w;)b[m]=o[m+u];return b}function nC(o,u){var f;return is(o,function(m,w,b){return f=u(m,w,b),!f}),!!f}function bh(o,u,f){var m=0,w=o==null?m:o.length;if(typeof u=="number"&&u===u&&w<=Pt){for(;m<w;){var b=m+w>>>1,D=o[b];D!==null&&!ir(D)&&(f?D<=u:D<u)?m=b+1:w=b}return w}return bp(o,u,Xn,f)}function bp(o,u,f,m){var w=0,b=o==null?0:o.length;if(b===0)return 0;u=f(u);for(var D=u!==u,L=u===null,q=ir(u),te=u===n;w<b;){var ne=mh((w+b)/2),ae=f(o[ne]),me=ae!==n,Ae=ae===null,ke=ae===ae,Je=ir(ae);if(D)var Ne=m||ke;else te?Ne=ke&&(m||me):L?Ne=ke&&me&&(m||!Ae):q?Ne=ke&&me&&!Ae&&(m||!Je):Ae||Je?Ne=!1:Ne=m?ae<=u:ae<u;Ne?w=ne+1:b=ne}return Sn(b,Rt)}function Wy(o,u){for(var f=-1,m=o.length,w=0,b=[];++f<m;){var D=o[f],L=u?u(D):D;if(!f||!kr(L,q)){var q=L;b[w++]=D===0?0:D}}return b}function Hy(o){return typeof o=="number"?o:ir(o)?En:+o}function rr(o){if(typeof o=="string")return o;if(Ge(o))return wt(o,rr)+"";if(ir(o))return Sy?Sy.call(o):"";var u=o+"";return u=="0"&&1/o==-Te?"-0":u}function ss(o,u,f){var m=-1,w=to,b=o.length,D=!0,L=[],q=L;if(f)D=!1,w=es;else if(b>=i){var te=u?null:dC(o);if(te)return sh(te);D=!1,w=_r,q=new oo}else q=u?[]:L;e:for(;++m<b;){var ne=o[m],ae=u?u(ne):ne;if(ne=f||ne!==0?ne:0,D&&ae===ae){for(var me=q.length;me--;)if(q[me]===ae)continue e;u&&q.push(ae),L.push(ne)}else w(q,ae,f)||(q!==L&&q.push(ae),L.push(ne))}return L}function Ap(o,u){return u=os(u,o),o=Iv(o,u),o==null||delete o[Wr(Ir(u))]}function Qy(o,u,f,m){return Wu(o,u,f(uo(o,u)),m)}function Ah(o,u,f,m){for(var w=o.length,b=m?w:-1;(m?b--:++b<w)&&u(o[b],b,o););return f?Er(o,m?0:b,m?b+1:w):Er(o,m?b+1:0,m?w:b)}function Jy(o,u){var f=o;return f instanceof tt&&(f=f.value()),xr(u,function(m,w){return w.func.apply(w.thisArg,Cr([m],w.args))},f)}function Sp(o,u,f){var m=o.length;if(m<2)return m?ss(o[0]):[];for(var w=-1,b=W(m);++w<m;)for(var D=o[w],L=-1;++L<m;)L!=w&&(b[w]=zu(b[w]||D,o[L],u,f));return ss(pn(b,1),u,f)}function Yy(o,u,f){for(var m=-1,w=o.length,b=u.length,D={};++m<w;){var L=m<b?u[m]:n;f(D,o[m],L)}return D}function Rp(o){return jt(o)?o:[]}function Pp(o){return typeof o=="function"?o:Xn}function os(o,u){return Ge(o)?o:Mp(o,u)?[o]:Sv(dt(o))}var rC=Xe;function as(o,u,f){var m=o.length;return f=f===n?m:f,!u&&f>=m?o:Er(o,u,f)}var Xy=zR||function(o){return Lt.clearTimeout(o)};function Zy(o,u){if(u)return o.slice();var f=o.length,m=wy?wy(f):new o.constructor(f);return o.copy(m),m}function Cp(o){var u=new o.constructor(o.byteLength);return new hh(u).set(new hh(o)),u}function iC(o,u){var f=u?Cp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function sC(o){var u=new o.constructor(o.source,Ws.exec(o));return u.lastIndex=o.lastIndex,u}function oC(o){return $u?Et($u.call(o)):{}}function ev(o,u){var f=u?Cp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function tv(o,u){if(o!==u){var f=o!==n,m=o===null,w=o===o,b=ir(o),D=u!==n,L=u===null,q=u===u,te=ir(u);if(!L&&!te&&!b&&o>u||b&&D&&q&&!L&&!te||m&&D&&q||!f&&q||!w)return 1;if(!m&&!b&&!te&&o<u||te&&f&&w&&!m&&!b||L&&f&&w||!D&&w||!q)return-1}return 0}function aC(o,u,f){for(var m=-1,w=o.criteria,b=u.criteria,D=w.length,L=f.length;++m<D;){var q=tv(w[m],b[m]);if(q){if(m>=L)return q;var te=f[m];return q*(te=="desc"?-1:1)}}return o.index-u.index}function nv(o,u,f,m){for(var w=-1,b=o.length,D=f.length,L=-1,q=u.length,te=tn(b-D,0),ne=W(q+te),ae=!m;++L<q;)ne[L]=u[L];for(;++w<D;)(ae||w<b)&&(ne[f[w]]=o[w]);for(;te--;)ne[L++]=o[w++];return ne}function rv(o,u,f,m){for(var w=-1,b=o.length,D=-1,L=f.length,q=-1,te=u.length,ne=tn(b-L,0),ae=W(ne+te),me=!m;++w<ne;)ae[w]=o[w];for(var Ae=w;++q<te;)ae[Ae+q]=u[q];for(;++D<L;)(me||w<b)&&(ae[Ae+f[D]]=o[w++]);return ae}function Qn(o,u){var f=-1,m=o.length;for(u||(u=W(m));++f<m;)u[f]=o[f];return u}function Gr(o,u,f,m){var w=!f;f||(f={});for(var b=-1,D=u.length;++b<D;){var L=u[b],q=m?m(f[L],o[L],L,f,o):n;q===n&&(q=o[L]),w?pi(f,L,q):ju(f,L,q)}return f}function uC(o,u){return Gr(o,Lp(o),u)}function lC(o,u){return Gr(o,mv(o),u)}function Sh(o,u){return function(f,m){var w=Ge(f)?eo:DP,b=u?u():{};return w(f,o,Oe(m,2),b)}}function ma(o){return Xe(function(u,f){var m=-1,w=f.length,b=w>1?f[w-1]:n,D=w>2?f[2]:n;for(b=o.length>3&&typeof b=="function"?(w--,b):n,D&&Un(f[0],f[1],D)&&(b=w<3?n:b,w=1),u=Et(u);++m<w;){var L=f[m];L&&o(u,L,m,b)}return u})}function iv(o,u){return function(f,m){if(f==null)return f;if(!Jn(f))return o(f,m);for(var w=f.length,b=u?w:-1,D=Et(f);(u?b--:++b<w)&&m(D[b],b,D)!==!1;);return f}}function sv(o){return function(u,f,m){for(var w=-1,b=Et(u),D=m(u),L=D.length;L--;){var q=D[o?L:++w];if(f(b[q],q,b)===!1)break}return u}}function cC(o,u,f){var m=u&F,w=Hu(o);function b(){var D=this&&this!==Lt&&this instanceof b?w:o;return D.apply(m?f:this,arguments)}return b}function ov(o){return function(u){u=dt(u);var f=la(u)?Dr(u):n,m=f?f[0]:u.charAt(0),w=f?as(f,1).join(""):u.slice(1);return m[o]()+w}}function _a(o){return function(u){return xr(iw(rw(u).replace(tp,"")),o,"")}}function Hu(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var f=ga(o.prototype),m=o.apply(f,u);return Ot(m)?m:f}}function hC(o,u,f){var m=Hu(o);function w(){for(var b=arguments.length,D=W(b),L=b,q=ya(w);L--;)D[L]=arguments[L];var te=b<3&&D[0]!==q&&D[b-1]!==q?[]:ns(D,q);if(b-=te.length,b<f)return hv(o,u,Rh,w.placeholder,n,D,te,n,n,f-b);var ne=this&&this!==Lt&&this instanceof w?m:o;return bn(ne,this,D)}return w}function av(o){return function(u,f,m){var w=Et(u);if(!Jn(u)){var b=Oe(f,3);u=ln(u),f=function(L){return b(w[L],L,w)}}var D=o(u,f,m);return D>-1?w[b?u[D]:D]:n}}function uv(o){return mi(function(u){var f=u.length,m=f,w=vr.prototype.thru;for(o&&u.reverse();m--;){var b=u[m];if(typeof b!="function")throw new yr(a);if(w&&!D&&Dh(b)=="wrapper")var D=new vr([],!0)}for(m=D?m:f;++m<f;){b=u[m];var L=Dh(b),q=L=="wrapper"?Np(b):n;q&&Fp(q[0])&&q[1]==(R|z|J|S)&&!q[4].length&&q[9]==1?D=D[Dh(q[0])].apply(D,q[3]):D=b.length==1&&Fp(b)?D[L]():D.thru(b)}return function(){var te=arguments,ne=te[0];if(D&&te.length==1&&Ge(ne))return D.plant(ne).value();for(var ae=0,me=f?u[ae].apply(this,te):ne;++ae<f;)me=u[ae].call(this,me);return me}})}function Rh(o,u,f,m,w,b,D,L,q,te){var ne=u&R,ae=u&F,me=u&Q,Ae=u&(z|G),ke=u&A,Je=me?n:Hu(o);function Ne(){for(var et=arguments.length,it=W(et),sr=et;sr--;)it[sr]=arguments[sr];if(Ae)var Bn=ya(Ne),or=Mu(it,Bn);if(m&&(it=nv(it,m,w,Ae)),b&&(it=rv(it,b,D,Ae)),et-=or,Ae&&et<te){var zt=ns(it,Bn);return hv(o,u,Rh,Ne.placeholder,f,it,zt,L,q,te-et)}var Nr=ae?f:this,wi=me?Nr[o]:o;return et=it.length,L?it=DC(it,L):ke&&et>1&&it.reverse(),ne&&q<et&&(it.length=q),this&&this!==Lt&&this instanceof Ne&&(wi=Je||Hu(wi)),wi.apply(Nr,it)}return Ne}function lv(o,u){return function(f,m){return UP(f,o,u(m),{})}}function Ph(o,u){return function(f,m){var w;if(f===n&&m===n)return u;if(f!==n&&(w=f),m!==n){if(w===n)return m;typeof f=="string"||typeof m=="string"?(f=rr(f),m=rr(m)):(f=Hy(f),m=Hy(m)),w=o(f,m)}return w}}function xp(o){return mi(function(u){return u=wt(u,ft(Oe())),Xe(function(f){var m=this;return o(u,function(w){return bn(w,m,f)})})})}function Ch(o,u){u=u===n?" ":rr(u);var f=u.length;if(f<2)return f?Tp(u,o):u;var m=Tp(u,gh(o/ca(u)));return la(u)?as(Dr(m),0,o).join(""):m.slice(0,o)}function fC(o,u,f,m){var w=u&F,b=Hu(o);function D(){for(var L=-1,q=arguments.length,te=-1,ne=m.length,ae=W(ne+q),me=this&&this!==Lt&&this instanceof D?b:o;++te<ne;)ae[te]=m[te];for(;q--;)ae[te++]=arguments[++L];return bn(me,w?f:this,ae)}return D}function cv(o){return function(u,f,m){return m&&typeof m!="number"&&Un(u,f,m)&&(f=m=n),u=vi(u),f===n?(f=u,u=0):f=vi(f),m=m===n?u<f?1:-1:vi(m),YP(u,f,m,o)}}function xh(o){return function(u,f){return typeof u=="string"&&typeof f=="string"||(u=Tr(u),f=Tr(f)),o(u,f)}}function hv(o,u,f,m,w,b,D,L,q,te){var ne=u&z,ae=ne?D:n,me=ne?n:D,Ae=ne?b:n,ke=ne?n:b;u|=ne?J:oe,u&=~(ne?oe:J),u&j||(u&=-4);var Je=[o,u,w,Ae,ae,ke,me,L,q,te],Ne=f.apply(n,Je);return Fp(o)&&Tv(Ne,Je),Ne.placeholder=m,bv(Ne,o,u)}function Dp(o){var u=en[o];return function(f,m){if(f=Tr(f),m=m==null?0:Sn(He(m),292),m&&by(f)){var w=(dt(f)+"e").split("e"),b=u(w[0]+"e"+(+w[1]+m));return w=(dt(b)+"e").split("e"),+(w[0]+"e"+(+w[1]-m))}return u(f)}}var dC=da&&1/sh(new da([,-0]))[1]==Te?function(o){return new da(o)}:Zp;function fv(o){return function(u){var f=Rn(u);return f==B?ap(u):f==re?xR(u):Zt(u,o(u))}}function gi(o,u,f,m,w,b,D,L){var q=u&Q;if(!q&&typeof o!="function")throw new yr(a);var te=m?m.length:0;if(te||(u&=-97,m=w=n),D=D===n?D:tn(He(D),0),L=L===n?L:He(L),te-=w?w.length:0,u&oe){var ne=m,ae=w;m=w=n}var me=q?n:Np(o),Ae=[o,u,f,m,w,ne,ae,b,D,L];if(me&&PC(Ae,me),o=Ae[0],u=Ae[1],f=Ae[2],m=Ae[3],w=Ae[4],L=Ae[9]=Ae[9]===n?q?0:o.length:tn(Ae[9]-te,0),!L&&u&(z|G)&&(u&=-25),!u||u==F)var ke=cC(o,u,f);else u==z||u==G?ke=hC(o,u,L):(u==J||u==(F|J))&&!w.length?ke=fC(o,u,f,m):ke=Rh.apply(n,Ae);var Je=me?Gy:Tv;return bv(Je(ke,Ae),o,u)}function dv(o,u,f,m){return o===n||kr(o,fa[f])&&!mt.call(m,f)?u:o}function pv(o,u,f,m,w,b){return Ot(o)&&Ot(u)&&(b.set(u,o),Th(o,u,n,pv,b),b.delete(u)),o}function pC(o){return Yu(o)?n:o}function gv(o,u,f,m,w,b){var D=f&N,L=o.length,q=u.length;if(L!=q&&!(D&&q>L))return!1;var te=b.get(o),ne=b.get(u);if(te&&ne)return te==u&&ne==o;var ae=-1,me=!0,Ae=f&M?new oo:n;for(b.set(o,u),b.set(u,o);++ae<L;){var ke=o[ae],Je=u[ae];if(m)var Ne=D?m(Je,ke,ae,u,o,b):m(ke,Je,ae,o,u,b);if(Ne!==n){if(Ne)continue;me=!1;break}if(Ae){if(!aa(u,function(et,it){if(!_r(Ae,it)&&(ke===et||w(ke,et,f,m,b)))return Ae.push(it)})){me=!1;break}}else if(!(ke===Je||w(ke,Je,f,m,b))){me=!1;break}}return b.delete(o),b.delete(u),me}function gC(o,u,f,m,w,b,D){switch(f){case We:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Le:return!(o.byteLength!=u.byteLength||!b(new hh(o),new hh(u)));case _e:case de:case Z:return kr(+o,+u);case $e:return o.name==u.name&&o.message==u.message;case le:case Se:return o==u+"";case B:var L=ap;case re:var q=m&N;if(L||(L=sh),o.size!=u.size&&!q)return!1;var te=D.get(o);if(te)return te==u;m|=M,D.set(o,u);var ne=gv(L(o),L(u),m,w,b,D);return D.delete(o),ne;case ge:if($u)return $u.call(o)==$u.call(u)}return!1}function mC(o,u,f,m,w,b){var D=f&N,L=Op(o),q=L.length,te=Op(u),ne=te.length;if(q!=ne&&!D)return!1;for(var ae=q;ae--;){var me=L[ae];if(!(D?me in u:mt.call(u,me)))return!1}var Ae=b.get(o),ke=b.get(u);if(Ae&&ke)return Ae==u&&ke==o;var Je=!0;b.set(o,u),b.set(u,o);for(var Ne=D;++ae<q;){me=L[ae];var et=o[me],it=u[me];if(m)var sr=D?m(it,et,me,u,o,b):m(et,it,me,o,u,b);if(!(sr===n?et===it||w(et,it,f,m,b):sr)){Je=!1;break}Ne||(Ne=me=="constructor")}if(Je&&!Ne){var Bn=o.constructor,or=u.constructor;Bn!=or&&"constructor"in o&&"constructor"in u&&!(typeof Bn=="function"&&Bn instanceof Bn&&typeof or=="function"&&or instanceof or)&&(Je=!1)}return b.delete(o),b.delete(u),Je}function mi(o){return Bp(Ev(o,n,xv),o+"")}function Op(o){return Vy(o,ln,Lp)}function kp(o){return Vy(o,Yn,mv)}var Np=_h?function(o){return _h.get(o)}:Zp;function Dh(o){for(var u=o.name+"",f=pa[u],m=mt.call(pa,u)?f.length:0;m--;){var w=f[m],b=w.func;if(b==null||b==o)return w.name}return u}function ya(o){var u=mt.call(I,"placeholder")?I:o;return u.placeholder}function Oe(){var o=I.iteratee||Yp;return o=o===Yp?Fy:o,arguments.length?o(arguments[0],arguments[1]):o}function Oh(o,u){var f=o.__data__;return bC(u)?f[typeof u=="string"?"string":"hash"]:f.map}function Vp(o){for(var u=ln(o),f=u.length;f--;){var m=u[f],w=o[m];u[f]=[m,w,vv(w)]}return u}function lo(o,u){var f=RR(o,u);return My(f)?f:n}function _C(o){var u=mt.call(o,io),f=o[io];try{o[io]=n;var m=!0}catch{}var w=lh.call(o);return m&&(u?o[io]=f:delete o[io]),w}var Lp=lp?function(o){return o==null?[]:(o=Et(o),mr(lp(o),function(u){return Iy.call(o,u)}))}:eg,mv=lp?function(o){for(var u=[];o;)Cr(u,Lp(o)),o=fh(o);return u}:eg,Rn=Fn;(cp&&Rn(new cp(new ArrayBuffer(1)))!=We||Uu&&Rn(new Uu)!=B||hp&&Rn(hp.resolve())!=pe||da&&Rn(new da)!=re||Bu&&Rn(new Bu)!=Ce)&&(Rn=function(o){var u=Fn(o),f=u==Y?o.constructor:n,m=f?co(f):"";if(m)switch(m){case ZR:return We;case eP:return B;case tP:return pe;case nP:return re;case rP:return Ce}return u});function yC(o,u,f){for(var m=-1,w=f.length;++m<w;){var b=f[m],D=b.size;switch(b.type){case"drop":o+=D;break;case"dropRight":u-=D;break;case"take":u=Sn(u,o+D);break;case"takeRight":o=tn(o,u-D);break}}return{start:o,end:u}}function vC(o){var u=o.match(Qi);return u?u[1].split(Qd):[]}function _v(o,u,f){u=os(u,o);for(var m=-1,w=u.length,b=!1;++m<w;){var D=Wr(u[m]);if(!(b=o!=null&&f(o,D)))break;o=o[D]}return b||++m!=w?b:(w=o==null?0:o.length,!!w&&Uh(w)&&_i(D,w)&&(Ge(o)||ho(o)))}function wC(o){var u=o.length,f=new o.constructor(u);return u&&typeof o[0]=="string"&&mt.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function yv(o){return typeof o.constructor=="function"&&!Qu(o)?ga(fh(o)):{}}function EC(o,u,f){var m=o.constructor;switch(u){case Le:return Cp(o);case _e:case de:return new m(+o);case We:return iC(o,f);case Bt:case qt:case In:case Qt:case fr:case si:case $t:case Tn:case Gi:return ev(o,f);case B:return new m;case Z:case Se:return new m(o);case le:return sC(o);case re:return new m;case ge:return oC(o)}}function IC(o,u){var f=u.length;if(!f)return o;var m=f-1;return u[m]=(f>1?"& ":"")+u[m],u=u.join(f>2?", ":" "),o.replace(Hd,`{
/* [wrapped with `+u+`] */
`)}function TC(o){return Ge(o)||ho(o)||!!(Ty&&o&&o[Ty])}function _i(o,u){var f=typeof o;return u=u==null?Be:u,!!u&&(f=="number"||f!="symbol"&&Iu.test(o))&&o>-1&&o%1==0&&o<u}function Un(o,u,f){if(!Ot(f))return!1;var m=typeof u;return(m=="number"?Jn(f)&&_i(u,f.length):m=="string"&&u in f)?kr(f[u],o):!1}function Mp(o,u){if(Ge(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||ir(o)?!0:Oc.test(o)||!Ks.test(o)||u!=null&&o in Et(u)}function bC(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Fp(o){var u=Dh(o),f=I[u];if(typeof f!="function"||!(u in tt.prototype))return!1;if(o===f)return!0;var m=Np(f);return!!m&&o===m[0]}function AC(o){return!!vy&&vy in o}var SC=ah?yi:tg;function Qu(o){var u=o&&o.constructor,f=typeof u=="function"&&u.prototype||fa;return o===f}function vv(o){return o===o&&!Ot(o)}function wv(o,u){return function(f){return f==null?!1:f[o]===u&&(u!==n||o in Et(f))}}function RC(o){var u=Mh(o,function(m){return f.size===d&&f.clear(),m}),f=u.cache;return u}function PC(o,u){var f=o[1],m=u[1],w=f|m,b=w<(F|Q|R),D=m==R&&f==z||m==R&&f==S&&o[7].length<=u[8]||m==(R|S)&&u[7].length<=u[8]&&f==z;if(!(b||D))return o;m&F&&(o[2]=u[2],w|=f&F?0:j);var L=u[3];if(L){var q=o[3];o[3]=q?nv(q,L,u[4]):L,o[4]=q?ns(o[3],p):u[4]}return L=u[5],L&&(q=o[5],o[5]=q?rv(q,L,u[6]):L,o[6]=q?ns(o[5],p):u[6]),L=u[7],L&&(o[7]=L),m&R&&(o[8]=o[8]==null?u[8]:Sn(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=w,o}function CC(o){var u=[];if(o!=null)for(var f in Et(o))u.push(f);return u}function xC(o){return lh.call(o)}function Ev(o,u,f){return u=tn(u===n?o.length-1:u,0),function(){for(var m=arguments,w=-1,b=tn(m.length-u,0),D=W(b);++w<b;)D[w]=m[u+w];w=-1;for(var L=W(u+1);++w<u;)L[w]=m[w];return L[u]=f(D),bn(o,this,L)}}function Iv(o,u){return u.length<2?o:uo(o,Er(u,0,-1))}function DC(o,u){for(var f=o.length,m=Sn(u.length,f),w=Qn(o);m--;){var b=u[m];o[m]=_i(b,f)?w[b]:n}return o}function Up(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Tv=Av(Gy),Ju=GR||function(o,u){return Lt.setTimeout(o,u)},Bp=Av(eC);function bv(o,u,f){var m=u+"";return Bp(o,IC(m,OC(vC(m),f)))}function Av(o){var u=0,f=0;return function(){var m=JR(),w=P-(m-f);if(f=m,w>0){if(++u>=O)return arguments[0]}else u=0;return o.apply(n,arguments)}}function kh(o,u){var f=-1,m=o.length,w=m-1;for(u=u===n?m:u;++f<u;){var b=Ip(f,w),D=o[b];o[b]=o[f],o[f]=D}return o.length=u,o}var Sv=RC(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(fn,function(f,m,w,b){u.push(w?b.replace(kc,"$1"):m||f)}),u});function Wr(o){if(typeof o=="string"||ir(o))return o;var u=o+"";return u=="0"&&1/o==-Te?"-0":u}function co(o){if(o!=null){try{return uh.call(o)}catch{}try{return o+""}catch{}}return""}function OC(o,u){return Mn(qr,function(f){var m="_."+f[0];u&f[1]&&!to(o,m)&&o.push(m)}),o.sort()}function Rv(o){if(o instanceof tt)return o.clone();var u=new vr(o.__wrapped__,o.__chain__);return u.__actions__=Qn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function kC(o,u,f){(f?Un(o,u,f):u===n)?u=1:u=tn(He(u),0);var m=o==null?0:o.length;if(!m||u<1)return[];for(var w=0,b=0,D=W(gh(m/u));w<m;)D[b++]=Er(o,w,w+=u);return D}function NC(o){for(var u=-1,f=o==null?0:o.length,m=0,w=[];++u<f;){var b=o[u];b&&(w[m++]=b)}return w}function VC(){var o=arguments.length;if(!o)return[];for(var u=W(o-1),f=arguments[0],m=o;m--;)u[m-1]=arguments[m];return Cr(Ge(f)?Qn(f):[f],pn(u,1))}var LC=Xe(function(o,u){return jt(o)?zu(o,pn(u,1,jt,!0)):[]}),MC=Xe(function(o,u){var f=Ir(u);return jt(f)&&(f=n),jt(o)?zu(o,pn(u,1,jt,!0),Oe(f,2)):[]}),FC=Xe(function(o,u){var f=Ir(u);return jt(f)&&(f=n),jt(o)?zu(o,pn(u,1,jt,!0),n,f):[]});function UC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===n?1:He(u),Er(o,u<0?0:u,m)):[]}function BC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===n?1:He(u),u=m-u,Er(o,0,u<0?0:u)):[]}function qC(o,u){return o&&o.length?Ah(o,Oe(u,3),!0,!0):[]}function $C(o,u){return o&&o.length?Ah(o,Oe(u,3),!0):[]}function jC(o,u,f,m){var w=o==null?0:o.length;return w?(f&&typeof f!="number"&&Un(o,u,f)&&(f=0,m=w),VP(o,u,f,m)):[]}function Pv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:He(f);return w<0&&(w=tn(m+w,0)),no(o,Oe(u,3),w)}function Cv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m-1;return f!==n&&(w=He(f),w=f<0?tn(m+w,0):Sn(w,m-1)),no(o,Oe(u,3),w,!0)}function xv(o){var u=o==null?0:o.length;return u?pn(o,1):[]}function zC(o){var u=o==null?0:o.length;return u?pn(o,Te):[]}function KC(o,u){var f=o==null?0:o.length;return f?(u=u===n?1:He(u),pn(o,u)):[]}function GC(o){for(var u=-1,f=o==null?0:o.length,m={};++u<f;){var w=o[u];m[w[0]]=w[1]}return m}function Dv(o){return o&&o.length?o[0]:n}function WC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:He(f);return w<0&&(w=tn(m+w,0)),hi(o,u,w)}function HC(o){var u=o==null?0:o.length;return u?Er(o,0,-1):[]}var QC=Xe(function(o){var u=wt(o,Rp);return u.length&&u[0]===o[0]?_p(u):[]}),JC=Xe(function(o){var u=Ir(o),f=wt(o,Rp);return u===Ir(f)?u=n:f.pop(),f.length&&f[0]===o[0]?_p(f,Oe(u,2)):[]}),YC=Xe(function(o){var u=Ir(o),f=wt(o,Rp);return u=typeof u=="function"?u:n,u&&f.pop(),f.length&&f[0]===o[0]?_p(f,n,u):[]});function XC(o,u){return o==null?"":HR.call(o,u)}function Ir(o){var u=o==null?0:o.length;return u?o[u-1]:n}function ZC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m;return f!==n&&(w=He(f),w=w<0?tn(m+w,0):Sn(w,m-1)),u===u?OR(o,u,w):no(o,c,w,!0)}function ex(o,u){return o&&o.length?$y(o,He(u)):n}var tx=Xe(Ov);function Ov(o,u){return o&&o.length&&u&&u.length?Ep(o,u):o}function nx(o,u,f){return o&&o.length&&u&&u.length?Ep(o,u,Oe(f,2)):o}function rx(o,u,f){return o&&o.length&&u&&u.length?Ep(o,u,n,f):o}var ix=mi(function(o,u){var f=o==null?0:o.length,m=dp(o,u);return Ky(o,wt(u,function(w){return _i(w,f)?+w:w}).sort(tv)),m});function sx(o,u){var f=[];if(!(o&&o.length))return f;var m=-1,w=[],b=o.length;for(u=Oe(u,3);++m<b;){var D=o[m];u(D,m,o)&&(f.push(D),w.push(m))}return Ky(o,w),f}function qp(o){return o==null?o:XR.call(o)}function ox(o,u,f){var m=o==null?0:o.length;return m?(f&&typeof f!="number"&&Un(o,u,f)?(u=0,f=m):(u=u==null?0:He(u),f=f===n?m:He(f)),Er(o,u,f)):[]}function ax(o,u){return bh(o,u)}function ux(o,u,f){return bp(o,u,Oe(f,2))}function lx(o,u){var f=o==null?0:o.length;if(f){var m=bh(o,u);if(m<f&&kr(o[m],u))return m}return-1}function cx(o,u){return bh(o,u,!0)}function hx(o,u,f){return bp(o,u,Oe(f,2),!0)}function fx(o,u){var f=o==null?0:o.length;if(f){var m=bh(o,u,!0)-1;if(kr(o[m],u))return m}return-1}function dx(o){return o&&o.length?Wy(o):[]}function px(o,u){return o&&o.length?Wy(o,Oe(u,2)):[]}function gx(o){var u=o==null?0:o.length;return u?Er(o,1,u):[]}function mx(o,u,f){return o&&o.length?(u=f||u===n?1:He(u),Er(o,0,u<0?0:u)):[]}function _x(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===n?1:He(u),u=m-u,Er(o,u<0?0:u,m)):[]}function yx(o,u){return o&&o.length?Ah(o,Oe(u,3),!1,!0):[]}function vx(o,u){return o&&o.length?Ah(o,Oe(u,3)):[]}var wx=Xe(function(o){return ss(pn(o,1,jt,!0))}),Ex=Xe(function(o){var u=Ir(o);return jt(u)&&(u=n),ss(pn(o,1,jt,!0),Oe(u,2))}),Ix=Xe(function(o){var u=Ir(o);return u=typeof u=="function"?u:n,ss(pn(o,1,jt,!0),n,u)});function Tx(o){return o&&o.length?ss(o):[]}function bx(o,u){return o&&o.length?ss(o,Oe(u,2)):[]}function Ax(o,u){return u=typeof u=="function"?u:n,o&&o.length?ss(o,n,u):[]}function $p(o){if(!(o&&o.length))return[];var u=0;return o=mr(o,function(f){if(jt(f))return u=tn(f.length,u),!0}),ct(u,function(f){return wt(o,y(f))})}function kv(o,u){if(!(o&&o.length))return[];var f=$p(o);return u==null?f:wt(f,function(m){return bn(u,n,m)})}var Sx=Xe(function(o,u){return jt(o)?zu(o,u):[]}),Rx=Xe(function(o){return Sp(mr(o,jt))}),Px=Xe(function(o){var u=Ir(o);return jt(u)&&(u=n),Sp(mr(o,jt),Oe(u,2))}),Cx=Xe(function(o){var u=Ir(o);return u=typeof u=="function"?u:n,Sp(mr(o,jt),n,u)}),xx=Xe($p);function Dx(o,u){return Yy(o||[],u||[],ju)}function Ox(o,u){return Yy(o||[],u||[],Wu)}var kx=Xe(function(o){var u=o.length,f=u>1?o[u-1]:n;return f=typeof f=="function"?(o.pop(),f):n,kv(o,f)});function Nv(o){var u=I(o);return u.__chain__=!0,u}function Nx(o,u){return u(o),o}function Nh(o,u){return u(o)}var Vx=mi(function(o){var u=o.length,f=u?o[0]:0,m=this.__wrapped__,w=function(b){return dp(b,o)};return u>1||this.__actions__.length||!(m instanceof tt)||!_i(f)?this.thru(w):(m=m.slice(f,+f+(u?1:0)),m.__actions__.push({func:Nh,args:[w],thisArg:n}),new vr(m,this.__chain__).thru(function(b){return u&&!b.length&&b.push(n),b}))});function Lx(){return Nv(this)}function Mx(){return new vr(this.value(),this.__chain__)}function Fx(){this.__values__===n&&(this.__values__=Hv(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function Ux(){return this}function Bx(o){for(var u,f=this;f instanceof vh;){var m=Rv(f);m.__index__=0,m.__values__=n,u?w.__wrapped__=m:u=m;var w=m;f=f.__wrapped__}return w.__wrapped__=o,u}function qx(){var o=this.__wrapped__;if(o instanceof tt){var u=o;return this.__actions__.length&&(u=new tt(this)),u=u.reverse(),u.__actions__.push({func:Nh,args:[qp],thisArg:n}),new vr(u,this.__chain__)}return this.thru(qp)}function $x(){return Jy(this.__wrapped__,this.__actions__)}var jx=Sh(function(o,u,f){mt.call(o,f)?++o[f]:pi(o,f,1)});function zx(o,u,f){var m=Ge(o)?oa:NP;return f&&Un(o,u,f)&&(u=n),m(o,Oe(u,3))}function Kx(o,u){var f=Ge(o)?mr:ky;return f(o,Oe(u,3))}var Gx=av(Pv),Wx=av(Cv);function Hx(o,u){return pn(Vh(o,u),1)}function Qx(o,u){return pn(Vh(o,u),Te)}function Jx(o,u,f){return f=f===n?1:He(f),pn(Vh(o,u),f)}function Vv(o,u){var f=Ge(o)?Mn:is;return f(o,Oe(u,3))}function Lv(o,u){var f=Ge(o)?th:Oy;return f(o,Oe(u,3))}var Yx=Sh(function(o,u,f){mt.call(o,f)?o[f].push(u):pi(o,f,[u])});function Xx(o,u,f,m){o=Jn(o)?o:wa(o),f=f&&!m?He(f):0;var w=o.length;return f<0&&(f=tn(w+f,0)),Bh(o)?f<=w&&o.indexOf(u,f)>-1:!!w&&hi(o,u,f)>-1}var Zx=Xe(function(o,u,f){var m=-1,w=typeof u=="function",b=Jn(o)?W(o.length):[];return is(o,function(D){b[++m]=w?bn(u,D,f):Ku(D,u,f)}),b}),eD=Sh(function(o,u,f){pi(o,f,u)});function Vh(o,u){var f=Ge(o)?wt:Uy;return f(o,Oe(u,3))}function tD(o,u,f,m){return o==null?[]:(Ge(u)||(u=u==null?[]:[u]),f=m?n:f,Ge(f)||(f=f==null?[]:[f]),jy(o,u,f))}var nD=Sh(function(o,u,f){o[f?0:1].push(u)},function(){return[[],[]]});function rD(o,u,f){var m=Ge(o)?xr:$,w=arguments.length<3;return m(o,Oe(u,4),f,w,is)}function iD(o,u,f){var m=Ge(o)?nh:$,w=arguments.length<3;return m(o,Oe(u,4),f,w,Oy)}function sD(o,u){var f=Ge(o)?mr:ky;return f(o,Fh(Oe(u,3)))}function oD(o){var u=Ge(o)?Py:XP;return u(o)}function aD(o,u,f){(f?Un(o,u,f):u===n)?u=1:u=He(u);var m=Ge(o)?CP:ZP;return m(o,u)}function uD(o){var u=Ge(o)?xP:tC;return u(o)}function lD(o){if(o==null)return 0;if(Jn(o))return Bh(o)?ca(o):o.length;var u=Rn(o);return u==B||u==re?o.size:vp(o).length}function cD(o,u,f){var m=Ge(o)?aa:nC;return f&&Un(o,u,f)&&(u=n),m(o,Oe(u,3))}var hD=Xe(function(o,u){if(o==null)return[];var f=u.length;return f>1&&Un(o,u[0],u[1])?u=[]:f>2&&Un(u[0],u[1],u[2])&&(u=[u[0]]),jy(o,pn(u,1),[])}),Lh=KR||function(){return Lt.Date.now()};function fD(o,u){if(typeof u!="function")throw new yr(a);return o=He(o),function(){if(--o<1)return u.apply(this,arguments)}}function Mv(o,u,f){return u=f?n:u,u=o&&u==null?o.length:u,gi(o,R,n,n,n,n,u)}function Fv(o,u){var f;if(typeof u!="function")throw new yr(a);return o=He(o),function(){return--o>0&&(f=u.apply(this,arguments)),o<=1&&(u=n),f}}var jp=Xe(function(o,u,f){var m=F;if(f.length){var w=ns(f,ya(jp));m|=J}return gi(o,m,u,f,w)}),Uv=Xe(function(o,u,f){var m=F|Q;if(f.length){var w=ns(f,ya(Uv));m|=J}return gi(u,m,o,f,w)});function Bv(o,u,f){u=f?n:u;var m=gi(o,z,n,n,n,n,n,u);return m.placeholder=Bv.placeholder,m}function qv(o,u,f){u=f?n:u;var m=gi(o,G,n,n,n,n,n,u);return m.placeholder=qv.placeholder,m}function $v(o,u,f){var m,w,b,D,L,q,te=0,ne=!1,ae=!1,me=!0;if(typeof o!="function")throw new yr(a);u=Tr(u)||0,Ot(f)&&(ne=!!f.leading,ae="maxWait"in f,b=ae?tn(Tr(f.maxWait)||0,u):b,me="trailing"in f?!!f.trailing:me);function Ae(zt){var Nr=m,wi=w;return m=w=n,te=zt,D=o.apply(wi,Nr),D}function ke(zt){return te=zt,L=Ju(et,u),ne?Ae(zt):D}function Je(zt){var Nr=zt-q,wi=zt-te,aw=u-Nr;return ae?Sn(aw,b-wi):aw}function Ne(zt){var Nr=zt-q,wi=zt-te;return q===n||Nr>=u||Nr<0||ae&&wi>=b}function et(){var zt=Lh();if(Ne(zt))return it(zt);L=Ju(et,Je(zt))}function it(zt){return L=n,me&&m?Ae(zt):(m=w=n,D)}function sr(){L!==n&&Xy(L),te=0,m=q=w=L=n}function Bn(){return L===n?D:it(Lh())}function or(){var zt=Lh(),Nr=Ne(zt);if(m=arguments,w=this,q=zt,Nr){if(L===n)return ke(q);if(ae)return Xy(L),L=Ju(et,u),Ae(q)}return L===n&&(L=Ju(et,u)),D}return or.cancel=sr,or.flush=Bn,or}var dD=Xe(function(o,u){return Dy(o,1,u)}),pD=Xe(function(o,u,f){return Dy(o,Tr(u)||0,f)});function gD(o){return gi(o,A)}function Mh(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new yr(a);var f=function(){var m=arguments,w=u?u.apply(this,m):m[0],b=f.cache;if(b.has(w))return b.get(w);var D=o.apply(this,m);return f.cache=b.set(w,D)||b,D};return f.cache=new(Mh.Cache||di),f}Mh.Cache=di;function Fh(o){if(typeof o!="function")throw new yr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function mD(o){return Fv(2,o)}var _D=rC(function(o,u){u=u.length==1&&Ge(u[0])?wt(u[0],ft(Oe())):wt(pn(u,1),ft(Oe()));var f=u.length;return Xe(function(m){for(var w=-1,b=Sn(m.length,f);++w<b;)m[w]=u[w].call(this,m[w]);return bn(o,this,m)})}),zp=Xe(function(o,u){var f=ns(u,ya(zp));return gi(o,J,n,u,f)}),jv=Xe(function(o,u){var f=ns(u,ya(jv));return gi(o,oe,n,u,f)}),yD=mi(function(o,u){return gi(o,S,n,n,n,u)});function vD(o,u){if(typeof o!="function")throw new yr(a);return u=u===n?u:He(u),Xe(o,u)}function wD(o,u){if(typeof o!="function")throw new yr(a);return u=u==null?0:tn(He(u),0),Xe(function(f){var m=f[u],w=as(f,0,u);return m&&Cr(w,m),bn(o,this,w)})}function ED(o,u,f){var m=!0,w=!0;if(typeof o!="function")throw new yr(a);return Ot(f)&&(m="leading"in f?!!f.leading:m,w="trailing"in f?!!f.trailing:w),$v(o,u,{leading:m,maxWait:u,trailing:w})}function ID(o){return Mv(o,1)}function TD(o,u){return zp(Pp(u),o)}function bD(){if(!arguments.length)return[];var o=arguments[0];return Ge(o)?o:[o]}function AD(o){return wr(o,E)}function SD(o,u){return u=typeof u=="function"?u:n,wr(o,E,u)}function RD(o){return wr(o,_|E)}function PD(o,u){return u=typeof u=="function"?u:n,wr(o,_|E,u)}function CD(o,u){return u==null||xy(o,u,ln(u))}function kr(o,u){return o===u||o!==o&&u!==u}var xD=xh(mp),DD=xh(function(o,u){return o>=u}),ho=Ly((function(){return arguments})())?Ly:function(o){return Mt(o)&&mt.call(o,"callee")&&!Iy.call(o,"callee")},Ge=W.isArray,OD=Vu?ft(Vu):BP;function Jn(o){return o!=null&&Uh(o.length)&&!yi(o)}function jt(o){return Mt(o)&&Jn(o)}function kD(o){return o===!0||o===!1||Mt(o)&&Fn(o)==_e}var us=WR||tg,ND=sa?ft(sa):qP;function VD(o){return Mt(o)&&o.nodeType===1&&!Yu(o)}function LD(o){if(o==null)return!0;if(Jn(o)&&(Ge(o)||typeof o=="string"||typeof o.splice=="function"||us(o)||va(o)||ho(o)))return!o.length;var u=Rn(o);if(u==B||u==re)return!o.size;if(Qu(o))return!vp(o).length;for(var f in o)if(mt.call(o,f))return!1;return!0}function MD(o,u){return Gu(o,u)}function FD(o,u,f){f=typeof f=="function"?f:n;var m=f?f(o,u):n;return m===n?Gu(o,u,n,f):!!m}function Kp(o){if(!Mt(o))return!1;var u=Fn(o);return u==$e||u==be||typeof o.message=="string"&&typeof o.name=="string"&&!Yu(o)}function UD(o){return typeof o=="number"&&by(o)}function yi(o){if(!Ot(o))return!1;var u=Fn(o);return u==C||u==V||u==ee||u==fe}function zv(o){return typeof o=="number"&&o==He(o)}function Uh(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Be}function Ot(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function Mt(o){return o!=null&&typeof o=="object"}var Kv=Xs?ft(Xs):jP;function BD(o,u){return o===u||yp(o,u,Vp(u))}function qD(o,u,f){return f=typeof f=="function"?f:n,yp(o,u,Vp(u),f)}function $D(o){return Gv(o)&&o!=+o}function jD(o){if(SC(o))throw new je(s);return My(o)}function zD(o){return o===null}function KD(o){return o==null}function Gv(o){return typeof o=="number"||Mt(o)&&Fn(o)==Z}function Yu(o){if(!Mt(o)||Fn(o)!=Y)return!1;var u=fh(o);if(u===null)return!0;var f=mt.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&uh.call(f)==qR}var Gp=Lu?ft(Lu):zP;function GD(o){return zv(o)&&o>=-Be&&o<=Be}var Wv=Zs?ft(Zs):KP;function Bh(o){return typeof o=="string"||!Ge(o)&&Mt(o)&&Fn(o)==Se}function ir(o){return typeof o=="symbol"||Mt(o)&&Fn(o)==ge}var va=eh?ft(eh):GP;function WD(o){return o===n}function HD(o){return Mt(o)&&Rn(o)==Ce}function QD(o){return Mt(o)&&Fn(o)==De}var JD=xh(wp),YD=xh(function(o,u){return o<=u});function Hv(o){if(!o)return[];if(Jn(o))return Bh(o)?Dr(o):Qn(o);if(Fu&&o[Fu])return CR(o[Fu]());var u=Rn(o),f=u==B?ap:u==re?sh:wa;return f(o)}function vi(o){if(!o)return o===0?o:0;if(o=Tr(o),o===Te||o===-Te){var u=o<0?-1:1;return u*Ln}return o===o?o:0}function He(o){var u=vi(o),f=u%1;return u===u?f?u-f:u:0}function Qv(o){return o?ao(He(o),0,Dt):0}function Tr(o){if(typeof o=="number")return o;if(ir(o))return En;if(Ot(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=Ot(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=rt(o);var f=Nc.test(o);return f||Eu.test(o)?Xc(o.slice(2),f?2:8):$r.test(o)?En:+o}function Jv(o){return Gr(o,Yn(o))}function XD(o){return o?ao(He(o),-Be,Be):o===0?o:0}function dt(o){return o==null?"":rr(o)}var ZD=ma(function(o,u){if(Qu(u)||Jn(u)){Gr(u,ln(u),o);return}for(var f in u)mt.call(u,f)&&ju(o,f,u[f])}),Yv=ma(function(o,u){Gr(u,Yn(u),o)}),qh=ma(function(o,u,f,m){Gr(u,Yn(u),o,m)}),e1=ma(function(o,u,f,m){Gr(u,ln(u),o,m)}),t1=mi(dp);function n1(o,u){var f=ga(o);return u==null?f:Cy(f,u)}var r1=Xe(function(o,u){o=Et(o);var f=-1,m=u.length,w=m>2?u[2]:n;for(w&&Un(u[0],u[1],w)&&(m=1);++f<m;)for(var b=u[f],D=Yn(b),L=-1,q=D.length;++L<q;){var te=D[L],ne=o[te];(ne===n||kr(ne,fa[te])&&!mt.call(o,te))&&(o[te]=b[te])}return o}),i1=Xe(function(o){return o.push(n,pv),bn(Xv,n,o)});function s1(o,u){return An(o,Oe(u,3),Kr)}function o1(o,u){return An(o,Oe(u,3),gp)}function a1(o,u){return o==null?o:pp(o,Oe(u,3),Yn)}function u1(o,u){return o==null?o:Ny(o,Oe(u,3),Yn)}function l1(o,u){return o&&Kr(o,Oe(u,3))}function c1(o,u){return o&&gp(o,Oe(u,3))}function h1(o){return o==null?[]:Ih(o,ln(o))}function f1(o){return o==null?[]:Ih(o,Yn(o))}function Wp(o,u,f){var m=o==null?n:uo(o,u);return m===n?f:m}function d1(o,u){return o!=null&&_v(o,u,LP)}function Hp(o,u){return o!=null&&_v(o,u,MP)}var p1=lv(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=lh.call(u)),o[u]=f},Jp(Xn)),g1=lv(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=lh.call(u)),mt.call(o,u)?o[u].push(f):o[u]=[f]},Oe),m1=Xe(Ku);function ln(o){return Jn(o)?Ry(o):vp(o)}function Yn(o){return Jn(o)?Ry(o,!0):WP(o)}function _1(o,u){var f={};return u=Oe(u,3),Kr(o,function(m,w,b){pi(f,u(m,w,b),m)}),f}function y1(o,u){var f={};return u=Oe(u,3),Kr(o,function(m,w,b){pi(f,w,u(m,w,b))}),f}var v1=ma(function(o,u,f){Th(o,u,f)}),Xv=ma(function(o,u,f,m){Th(o,u,f,m)}),w1=mi(function(o,u){var f={};if(o==null)return f;var m=!1;u=wt(u,function(b){return b=os(b,o),m||(m=b.length>1),b}),Gr(o,kp(o),f),m&&(f=wr(f,_|v|E,pC));for(var w=u.length;w--;)Ap(f,u[w]);return f});function E1(o,u){return Zv(o,Fh(Oe(u)))}var I1=mi(function(o,u){return o==null?{}:QP(o,u)});function Zv(o,u){if(o==null)return{};var f=wt(kp(o),function(m){return[m]});return u=Oe(u),zy(o,f,function(m,w){return u(m,w[0])})}function T1(o,u,f){u=os(u,o);var m=-1,w=u.length;for(w||(w=1,o=n);++m<w;){var b=o==null?n:o[Wr(u[m])];b===n&&(m=w,b=f),o=yi(b)?b.call(o):b}return o}function b1(o,u,f){return o==null?o:Wu(o,u,f)}function A1(o,u,f,m){return m=typeof m=="function"?m:n,o==null?o:Wu(o,u,f,m)}var ew=fv(ln),tw=fv(Yn);function S1(o,u,f){var m=Ge(o),w=m||us(o)||va(o);if(u=Oe(u,4),f==null){var b=o&&o.constructor;w?f=m?new b:[]:Ot(o)?f=yi(b)?ga(fh(o)):{}:f={}}return(w?Mn:Kr)(o,function(D,L,q){return u(f,D,L,q)}),f}function R1(o,u){return o==null?!0:Ap(o,u)}function P1(o,u,f){return o==null?o:Qy(o,u,Pp(f))}function C1(o,u,f,m){return m=typeof m=="function"?m:n,o==null?o:Qy(o,u,Pp(f),m)}function wa(o){return o==null?[]:Jt(o,ln(o))}function x1(o){return o==null?[]:Jt(o,Yn(o))}function D1(o,u,f){return f===n&&(f=u,u=n),f!==n&&(f=Tr(f),f=f===f?f:0),u!==n&&(u=Tr(u),u=u===u?u:0),ao(Tr(o),u,f)}function O1(o,u,f){return u=vi(u),f===n?(f=u,u=0):f=vi(f),o=Tr(o),FP(o,u,f)}function k1(o,u,f){if(f&&typeof f!="boolean"&&Un(o,u,f)&&(u=f=n),f===n&&(typeof u=="boolean"?(f=u,u=n):typeof o=="boolean"&&(f=o,o=n)),o===n&&u===n?(o=0,u=1):(o=vi(o),u===n?(u=o,o=0):u=vi(u)),o>u){var m=o;o=u,u=m}if(f||o%1||u%1){var w=Ay();return Sn(o+w*(u-o+op("1e-"+((w+"").length-1))),u)}return Ip(o,u)}var N1=_a(function(o,u,f){return u=u.toLowerCase(),o+(f?nw(u):u)});function nw(o){return Qp(dt(o).toLowerCase())}function rw(o){return o=dt(o),o&&o.replace(Lc,bR).replace(np,"")}function V1(o,u,f){o=dt(o),u=rr(u);var m=o.length;f=f===n?m:ao(He(f),0,m);var w=f;return f-=u.length,f>=0&&o.slice(f,w)==u}function L1(o){return o=dt(o),o&&oi.test(o)?o.replace(Jo,AR):o}function M1(o){return o=dt(o),o&&Gs.test(o)?o.replace(Xo,"\\$&"):o}var F1=_a(function(o,u,f){return o+(f?"-":"")+u.toLowerCase()}),U1=_a(function(o,u,f){return o+(f?" ":"")+u.toLowerCase()}),B1=ov("toLowerCase");function q1(o,u,f){o=dt(o),u=He(u);var m=u?ca(o):0;if(!u||m>=u)return o;var w=(u-m)/2;return Ch(mh(w),f)+o+Ch(gh(w),f)}function $1(o,u,f){o=dt(o),u=He(u);var m=u?ca(o):0;return u&&m<u?o+Ch(u-m,f):o}function j1(o,u,f){o=dt(o),u=He(u);var m=u?ca(o):0;return u&&m<u?Ch(u-m,f)+o:o}function z1(o,u,f){return f||u==null?u=0:u&&(u=+u),YR(dt(o).replace(ai,""),u||0)}function K1(o,u,f){return(f?Un(o,u,f):u===n)?u=1:u=He(u),Tp(dt(o),u)}function G1(){var o=arguments,u=dt(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var W1=_a(function(o,u,f){return o+(f?"_":"")+u.toLowerCase()});function H1(o,u,f){return f&&typeof f!="number"&&Un(o,u,f)&&(u=f=n),f=f===n?Dt:f>>>0,f?(o=dt(o),o&&(typeof u=="string"||u!=null&&!Gp(u))&&(u=rr(u),!u&&la(o))?as(Dr(o),0,f):o.split(u,f)):[]}var Q1=_a(function(o,u,f){return o+(f?" ":"")+Qp(u)});function J1(o,u,f){return o=dt(o),f=f==null?0:ao(He(f),0,o.length),u=rr(u),o.slice(f,f+u.length)==u}function Y1(o,u,f){var m=I.templateSettings;f&&Un(o,u,f)&&(u=n),o=dt(o),u=qh({},u,m,dv);var w=qh({},u.imports,m.imports,dv),b=ln(w),D=Jt(w,b),L,q,te=0,ne=u.interpolate||Hs,ae="__p += '",me=up((u.escape||Hs).source+"|"+ne.source+"|"+(ne===vu?wu:Hs).source+"|"+(u.evaluate||Hs).source+"|$","g"),Ae="//# sourceURL="+(mt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jc+"]")+`
`;o.replace(me,function(Ne,et,it,sr,Bn,or){return it||(it=sr),ae+=o.slice(te,or).replace(Yd,SR),et&&(L=!0,ae+=`' +
__e(`+et+`) +
'`),Bn&&(q=!0,ae+=`';
`+Bn+`;
__p += '`),it&&(ae+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),te=or+Ne.length,Ne}),ae+=`';
`;var ke=mt.call(u,"variable")&&u.variable;if(!ke)ae=`with (obj) {
`+ae+`
}
`;else if(Zo.test(ke))throw new je(l);ae=(q?ae.replace(Wi,""):ae).replace(Cc,"$1").replace(xc,"$1;"),ae="function("+(ke||"obj")+`) {
`+(ke?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ae+`return __p
}`;var Je=sw(function(){return ht(b,Ae+"return "+ae).apply(n,D)});if(Je.source=ae,Kp(Je))throw Je;return Je}function X1(o){return dt(o).toLowerCase()}function Z1(o){return dt(o).toUpperCase()}function eO(o,u,f){if(o=dt(o),o&&(f||u===n))return rt(o);if(!o||!(u=rr(u)))return o;var m=Dr(o),w=Dr(u),b=Hn(m,w),D=ro(m,w)+1;return as(m,b,D).join("")}function tO(o,u,f){if(o=dt(o),o&&(f||u===n))return o.slice(0,yy(o)+1);if(!o||!(u=rr(u)))return o;var m=Dr(o),w=ro(m,Dr(u))+1;return as(m,0,w).join("")}function nO(o,u,f){if(o=dt(o),o&&(f||u===n))return o.replace(ai,"");if(!o||!(u=rr(u)))return o;var m=Dr(o),w=Hn(m,Dr(u));return as(m,w).join("")}function rO(o,u){var f=x,m=k;if(Ot(u)){var w="separator"in u?u.separator:w;f="length"in u?He(u.length):f,m="omission"in u?rr(u.omission):m}o=dt(o);var b=o.length;if(la(o)){var D=Dr(o);b=D.length}if(f>=b)return o;var L=f-ca(m);if(L<1)return m;var q=D?as(D,0,L).join(""):o.slice(0,L);if(w===n)return q+m;if(D&&(L+=q.length-L),Gp(w)){if(o.slice(L).search(w)){var te,ne=q;for(w.global||(w=up(w.source,dt(Ws.exec(w))+"g")),w.lastIndex=0;te=w.exec(ne);)var ae=te.index;q=q.slice(0,ae===n?L:ae)}}else if(o.indexOf(rr(w),L)!=L){var me=q.lastIndexOf(w);me>-1&&(q=q.slice(0,me))}return q+m}function iO(o){return o=dt(o),o&&yu.test(o)?o.replace(Hi,kR):o}var sO=_a(function(o,u,f){return o+(f?" ":"")+u.toUpperCase()}),Qp=ov("toUpperCase");function iw(o,u,f){return o=dt(o),u=f?n:u,u===n?PR(o)?LR(o):ua(o):o.match(u)||[]}var sw=Xe(function(o,u){try{return bn(o,n,u)}catch(f){return Kp(f)?f:new je(f)}}),oO=mi(function(o,u){return Mn(u,function(f){f=Wr(f),pi(o,f,jp(o[f],o))}),o});function aO(o){var u=o==null?0:o.length,f=Oe();return o=u?wt(o,function(m){if(typeof m[1]!="function")throw new yr(a);return[f(m[0]),m[1]]}):[],Xe(function(m){for(var w=-1;++w<u;){var b=o[w];if(bn(b[0],this,m))return bn(b[1],this,m)}})}function uO(o){return kP(wr(o,_))}function Jp(o){return function(){return o}}function lO(o,u){return o==null||o!==o?u:o}var cO=uv(),hO=uv(!0);function Xn(o){return o}function Yp(o){return Fy(typeof o=="function"?o:wr(o,_))}function fO(o){return By(wr(o,_))}function dO(o,u){return qy(o,wr(u,_))}var pO=Xe(function(o,u){return function(f){return Ku(f,o,u)}}),gO=Xe(function(o,u){return function(f){return Ku(o,f,u)}});function Xp(o,u,f){var m=ln(u),w=Ih(u,m);f==null&&!(Ot(u)&&(w.length||!m.length))&&(f=u,u=o,o=this,w=Ih(u,ln(u)));var b=!(Ot(f)&&"chain"in f)||!!f.chain,D=yi(o);return Mn(w,function(L){var q=u[L];o[L]=q,D&&(o.prototype[L]=function(){var te=this.__chain__;if(b||te){var ne=o(this.__wrapped__),ae=ne.__actions__=Qn(this.__actions__);return ae.push({func:q,args:arguments,thisArg:o}),ne.__chain__=te,ne}return q.apply(o,Cr([this.value()],arguments))})}),o}function mO(){return Lt._===this&&(Lt._=$R),this}function Zp(){}function _O(o){return o=He(o),Xe(function(u){return $y(u,o)})}var yO=xp(wt),vO=xp(oa),wO=xp(aa);function ow(o){return Mp(o)?y(Wr(o)):JP(o)}function EO(o){return function(u){return o==null?n:uo(o,u)}}var IO=cv(),TO=cv(!0);function eg(){return[]}function tg(){return!1}function bO(){return{}}function AO(){return""}function SO(){return!0}function RO(o,u){if(o=He(o),o<1||o>Be)return[];var f=Dt,m=Sn(o,Dt);u=Oe(u),o-=Dt;for(var w=ct(m,u);++f<o;)u(f);return w}function PO(o){return Ge(o)?wt(o,Wr):ir(o)?[o]:Qn(Sv(dt(o)))}function CO(o){var u=++BR;return dt(o)+u}var xO=Ph(function(o,u){return o+u},0),DO=Dp("ceil"),OO=Ph(function(o,u){return o/u},1),kO=Dp("floor");function NO(o){return o&&o.length?Eh(o,Xn,mp):n}function VO(o,u){return o&&o.length?Eh(o,Oe(u,2),mp):n}function LO(o){return g(o,Xn)}function MO(o,u){return g(o,Oe(u,2))}function FO(o){return o&&o.length?Eh(o,Xn,wp):n}function UO(o,u){return o&&o.length?Eh(o,Oe(u,2),wp):n}var BO=Ph(function(o,u){return o*u},1),qO=Dp("round"),$O=Ph(function(o,u){return o-u},0);function jO(o){return o&&o.length?he(o,Xn):0}function zO(o,u){return o&&o.length?he(o,Oe(u,2)):0}return I.after=fD,I.ary=Mv,I.assign=ZD,I.assignIn=Yv,I.assignInWith=qh,I.assignWith=e1,I.at=t1,I.before=Fv,I.bind=jp,I.bindAll=oO,I.bindKey=Uv,I.castArray=bD,I.chain=Nv,I.chunk=kC,I.compact=NC,I.concat=VC,I.cond=aO,I.conforms=uO,I.constant=Jp,I.countBy=jx,I.create=n1,I.curry=Bv,I.curryRight=qv,I.debounce=$v,I.defaults=r1,I.defaultsDeep=i1,I.defer=dD,I.delay=pD,I.difference=LC,I.differenceBy=MC,I.differenceWith=FC,I.drop=UC,I.dropRight=BC,I.dropRightWhile=qC,I.dropWhile=$C,I.fill=jC,I.filter=Kx,I.flatMap=Hx,I.flatMapDeep=Qx,I.flatMapDepth=Jx,I.flatten=xv,I.flattenDeep=zC,I.flattenDepth=KC,I.flip=gD,I.flow=cO,I.flowRight=hO,I.fromPairs=GC,I.functions=h1,I.functionsIn=f1,I.groupBy=Yx,I.initial=HC,I.intersection=QC,I.intersectionBy=JC,I.intersectionWith=YC,I.invert=p1,I.invertBy=g1,I.invokeMap=Zx,I.iteratee=Yp,I.keyBy=eD,I.keys=ln,I.keysIn=Yn,I.map=Vh,I.mapKeys=_1,I.mapValues=y1,I.matches=fO,I.matchesProperty=dO,I.memoize=Mh,I.merge=v1,I.mergeWith=Xv,I.method=pO,I.methodOf=gO,I.mixin=Xp,I.negate=Fh,I.nthArg=_O,I.omit=w1,I.omitBy=E1,I.once=mD,I.orderBy=tD,I.over=yO,I.overArgs=_D,I.overEvery=vO,I.overSome=wO,I.partial=zp,I.partialRight=jv,I.partition=nD,I.pick=I1,I.pickBy=Zv,I.property=ow,I.propertyOf=EO,I.pull=tx,I.pullAll=Ov,I.pullAllBy=nx,I.pullAllWith=rx,I.pullAt=ix,I.range=IO,I.rangeRight=TO,I.rearg=yD,I.reject=sD,I.remove=sx,I.rest=vD,I.reverse=qp,I.sampleSize=aD,I.set=b1,I.setWith=A1,I.shuffle=uD,I.slice=ox,I.sortBy=hD,I.sortedUniq=dx,I.sortedUniqBy=px,I.split=H1,I.spread=wD,I.tail=gx,I.take=mx,I.takeRight=_x,I.takeRightWhile=yx,I.takeWhile=vx,I.tap=Nx,I.throttle=ED,I.thru=Nh,I.toArray=Hv,I.toPairs=ew,I.toPairsIn=tw,I.toPath=PO,I.toPlainObject=Jv,I.transform=S1,I.unary=ID,I.union=wx,I.unionBy=Ex,I.unionWith=Ix,I.uniq=Tx,I.uniqBy=bx,I.uniqWith=Ax,I.unset=R1,I.unzip=$p,I.unzipWith=kv,I.update=P1,I.updateWith=C1,I.values=wa,I.valuesIn=x1,I.without=Sx,I.words=iw,I.wrap=TD,I.xor=Rx,I.xorBy=Px,I.xorWith=Cx,I.zip=xx,I.zipObject=Dx,I.zipObjectDeep=Ox,I.zipWith=kx,I.entries=ew,I.entriesIn=tw,I.extend=Yv,I.extendWith=qh,Xp(I,I),I.add=xO,I.attempt=sw,I.camelCase=N1,I.capitalize=nw,I.ceil=DO,I.clamp=D1,I.clone=AD,I.cloneDeep=RD,I.cloneDeepWith=PD,I.cloneWith=SD,I.conformsTo=CD,I.deburr=rw,I.defaultTo=lO,I.divide=OO,I.endsWith=V1,I.eq=kr,I.escape=L1,I.escapeRegExp=M1,I.every=zx,I.find=Gx,I.findIndex=Pv,I.findKey=s1,I.findLast=Wx,I.findLastIndex=Cv,I.findLastKey=o1,I.floor=kO,I.forEach=Vv,I.forEachRight=Lv,I.forIn=a1,I.forInRight=u1,I.forOwn=l1,I.forOwnRight=c1,I.get=Wp,I.gt=xD,I.gte=DD,I.has=d1,I.hasIn=Hp,I.head=Dv,I.identity=Xn,I.includes=Xx,I.indexOf=WC,I.inRange=O1,I.invoke=m1,I.isArguments=ho,I.isArray=Ge,I.isArrayBuffer=OD,I.isArrayLike=Jn,I.isArrayLikeObject=jt,I.isBoolean=kD,I.isBuffer=us,I.isDate=ND,I.isElement=VD,I.isEmpty=LD,I.isEqual=MD,I.isEqualWith=FD,I.isError=Kp,I.isFinite=UD,I.isFunction=yi,I.isInteger=zv,I.isLength=Uh,I.isMap=Kv,I.isMatch=BD,I.isMatchWith=qD,I.isNaN=$D,I.isNative=jD,I.isNil=KD,I.isNull=zD,I.isNumber=Gv,I.isObject=Ot,I.isObjectLike=Mt,I.isPlainObject=Yu,I.isRegExp=Gp,I.isSafeInteger=GD,I.isSet=Wv,I.isString=Bh,I.isSymbol=ir,I.isTypedArray=va,I.isUndefined=WD,I.isWeakMap=HD,I.isWeakSet=QD,I.join=XC,I.kebabCase=F1,I.last=Ir,I.lastIndexOf=ZC,I.lowerCase=U1,I.lowerFirst=B1,I.lt=JD,I.lte=YD,I.max=NO,I.maxBy=VO,I.mean=LO,I.meanBy=MO,I.min=FO,I.minBy=UO,I.stubArray=eg,I.stubFalse=tg,I.stubObject=bO,I.stubString=AO,I.stubTrue=SO,I.multiply=BO,I.nth=ex,I.noConflict=mO,I.noop=Zp,I.now=Lh,I.pad=q1,I.padEnd=$1,I.padStart=j1,I.parseInt=z1,I.random=k1,I.reduce=rD,I.reduceRight=iD,I.repeat=K1,I.replace=G1,I.result=T1,I.round=qO,I.runInContext=U,I.sample=oD,I.size=lD,I.snakeCase=W1,I.some=cD,I.sortedIndex=ax,I.sortedIndexBy=ux,I.sortedIndexOf=lx,I.sortedLastIndex=cx,I.sortedLastIndexBy=hx,I.sortedLastIndexOf=fx,I.startCase=Q1,I.startsWith=J1,I.subtract=$O,I.sum=jO,I.sumBy=zO,I.template=Y1,I.times=RO,I.toFinite=vi,I.toInteger=He,I.toLength=Qv,I.toLower=X1,I.toNumber=Tr,I.toSafeInteger=XD,I.toString=dt,I.toUpper=Z1,I.trim=eO,I.trimEnd=tO,I.trimStart=nO,I.truncate=rO,I.unescape=iO,I.uniqueId=CO,I.upperCase=sO,I.upperFirst=Qp,I.each=Vv,I.eachRight=Lv,I.first=Dv,Xp(I,(function(){var o={};return Kr(I,function(u,f){mt.call(I.prototype,f)||(o[f]=u)}),o})(),{chain:!1}),I.VERSION=r,Mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){I[o].placeholder=I}),Mn(["drop","take"],function(o,u){tt.prototype[o]=function(f){f=f===n?1:tn(He(f),0);var m=this.__filtered__&&!u?new tt(this):this.clone();return m.__filtered__?m.__takeCount__=Sn(f,m.__takeCount__):m.__views__.push({size:Sn(f,Dt),type:o+(m.__dir__<0?"Right":"")}),m},tt.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),Mn(["filter","map","takeWhile"],function(o,u){var f=u+1,m=f==ce||f==Ye;tt.prototype[o]=function(w){var b=this.clone();return b.__iteratees__.push({iteratee:Oe(w,3),type:f}),b.__filtered__=b.__filtered__||m,b}}),Mn(["head","last"],function(o,u){var f="take"+(u?"Right":"");tt.prototype[o]=function(){return this[f](1).value()[0]}}),Mn(["initial","tail"],function(o,u){var f="drop"+(u?"":"Right");tt.prototype[o]=function(){return this.__filtered__?new tt(this):this[f](1)}}),tt.prototype.compact=function(){return this.filter(Xn)},tt.prototype.find=function(o){return this.filter(o).head()},tt.prototype.findLast=function(o){return this.reverse().find(o)},tt.prototype.invokeMap=Xe(function(o,u){return typeof o=="function"?new tt(this):this.map(function(f){return Ku(f,o,u)})}),tt.prototype.reject=function(o){return this.filter(Fh(Oe(o)))},tt.prototype.slice=function(o,u){o=He(o);var f=this;return f.__filtered__&&(o>0||u<0)?new tt(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),u!==n&&(u=He(u),f=u<0?f.dropRight(-u):f.take(u-o)),f)},tt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},tt.prototype.toArray=function(){return this.take(Dt)},Kr(tt.prototype,function(o,u){var f=/^(?:filter|find|map|reject)|While$/.test(u),m=/^(?:head|last)$/.test(u),w=I[m?"take"+(u=="last"?"Right":""):u],b=m||/^find/.test(u);w&&(I.prototype[u]=function(){var D=this.__wrapped__,L=m?[1]:arguments,q=D instanceof tt,te=L[0],ne=q||Ge(D),ae=function(et){var it=w.apply(I,Cr([et],L));return m&&me?it[0]:it};ne&&f&&typeof te=="function"&&te.length!=1&&(q=ne=!1);var me=this.__chain__,Ae=!!this.__actions__.length,ke=b&&!me,Je=q&&!Ae;if(!b&&ne){D=Je?D:new tt(this);var Ne=o.apply(D,L);return Ne.__actions__.push({func:Nh,args:[ae],thisArg:n}),new vr(Ne,me)}return ke&&Je?o.apply(this,L):(Ne=this.thru(ae),ke?m?Ne.value()[0]:Ne.value():Ne)})}),Mn(["pop","push","shift","sort","splice","unshift"],function(o){var u=oh[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",m=/^(?:pop|shift)$/.test(o);I.prototype[o]=function(){var w=arguments;if(m&&!this.__chain__){var b=this.value();return u.apply(Ge(b)?b:[],w)}return this[f](function(D){return u.apply(Ge(D)?D:[],w)})}}),Kr(tt.prototype,function(o,u){var f=I[u];if(f){var m=f.name+"";mt.call(pa,m)||(pa[m]=[]),pa[m].push({name:u,func:f})}}),pa[Rh(n,Q).name]=[{name:"wrapper",func:n}],tt.prototype.clone=iP,tt.prototype.reverse=sP,tt.prototype.value=oP,I.prototype.at=Vx,I.prototype.chain=Lx,I.prototype.commit=Mx,I.prototype.next=Fx,I.prototype.plant=Bx,I.prototype.reverse=qx,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=$x,I.prototype.first=I.prototype.head,Fu&&(I.prototype[Fu]=Ux),I}),ha=MR();dn?((dn.exports=ha)._=ha,ia._=ha):Lt._=ha}).call(F4)})(vl,vl.exports)),vl.exports}var B4=U4();const UI=M4(B4);let Ii=null,Qe=null,al=null;const QS=lL("mainStore",{state:()=>({transactionId:null,currentSheetId:null,userLedger:null,currentSheet:null,referenceCurrency:null,conversionRates:null,conversionRatesUpdatedAt:null,conversionRatesAutoUpdateRate:1440*60*1e3,firebaseReady:!1,authReady:!1,config:Ng.make(),pendingTransactionIds:new Set,unsubscribeUserLedger:null,unsubscribeCurrentSheet:null,onlineHandler:null}),getters:{isSheet(){return this.currentSheet!==null},currencies(){return this.currentSheet?kg.currencies(this.currentSheetResults):new Set},lastCurrency(){var t;return this.currentSheet&&((t=this.currentSheetTransactions)!=null&&t.length)?this.currentSheet.transactions[this.currentSheetTransactions[0]].currency:"USD"},user(){var t,e,n,r;return ol.makeUser((t=Qe==null?void 0:Qe.currentUser)==null?void 0:t.uid,(e=this.userLedger)==null?void 0:e.name,(n=Qe==null?void 0:Qe.currentUser)==null?void 0:n.email,(r=Qe==null?void 0:Qe.currentUser)==null?void 0:r.emailVerified)},userLedgerFriends(){return!this.userLedger||!this.userLedger.friends?[]:Object.entries(this.userLedger.friends).sort(([,t],[,e])=>ol.compare(t,e)).map(([t])=>t)},userLedgerSheets(){return!this.userLedger||!this.userLedger.sheets?[]:Object.entries(this.userLedger.sheets).sort(([,t],[,e])=>t.timestamp-e.timestamp).map(([t])=>t)},currentSheetPeople(){return!this.currentSheet||!this.currentSheet.people?[]:Object.entries(this.currentSheet.people).sort(([,t],[,e])=>t.timestamp-e.timestamp).map(([t])=>t)},currentSheetTransactions(){return!this.currentSheet||!this.currentSheet.transactions?[]:Object.entries(this.currentSheet.transactions).sort(([,t],[,e])=>e.timestamp-t.timestamp).map(([t])=>t)},currentSheetResults(){return!this.currentSheet||!this.currentSheet.transactions||!this.currentSheetPeople?[]:kg.make(this.currentSheet.transactions,this.currentSheetPeople.length||0)}},actions:{personId2Idx(t){return this.currentSheetPeople.indexOf(t)},personIdx2Id(t){return this.currentSheetPeople[t]},async addTransaction(t,e=null){return navigator.onLine||this.pendingTransactionIds.add(t.id),await this.autoBatch(async(n,r)=>{await this.removeTransaction(this.transactionId,r);const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${n.id}`]:n})},t,e)},async removeTransaction(t,e=null){if(t)return await this.autoBatch(async(n,r)=>{const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${n}`]:ef()})},t,e)},async addTransactions(t,e=null){return await this.autoBatch(async(n,r)=>{for(const i of Object.values(n))await this.addTransaction(i,r)},t,e)},getEditableCurrentSheetResults(){return UI.cloneDeep(this.currentSheetResults)},makeEquivalentTransactionBatch(t,e,n,r=1,i=null){return kg.makeEquivalentTransactionBatch(this.currentSheetResults,t,e,n,r,i)},async settleCurrencyPerson(t,e,n){const r=this.makeEquivalentTransactionBatch(t,e,n);try{await this.addTransactions(r)}catch(i){$q.notify({message:i.message||i,color:"negative"})}},async setPeople(t,e=null){if(!this.currentSheet)throw new Error("Current sheet should be set here.");const n=Object.fromEntries(Object.keys(t).filter(i=>this.isUserOrFriend(i)).map(i=>[i,"owner"])),r=Object.keys(n).filter(i=>!(i in this.currentSheet.users));return await this.autoBatch(async(i,s,a,l)=>{const h={name:this.currentSheet.name,timestamp:this.currentSheet.timestamp};a.forEach(p=>{const _=this.getUserLedgerRef(p);l.update(_,{[`sheets.${this.currentSheet.id}`]:h})});const d=this.getSheetRef(this.currentSheet.id);l.update(d,{users:s}),l.update(d,{people:i})},t,n,r,e)},getEditableTransaction(t=this.transactionId){if(this.currentSheet&&t in this.currentSheet.transactions){const n=UI.cloneDeep(this.currentSheet.transactions[t]);return hn.updatePeople(n,this.currentSheetPeople.length),hn.update(n),n}const e=this.currentSheetPeople.map(n=>this.currentSheet.people[n].active);return hn.make(e,this.lastCurrency,this.personId2Idx(Qe.currentUser.uid))},async setSheetName(t,e=null){return await this.autoBatch(async(n,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`sheets.${this.currentSheet.id}.name`]:n})},t,e)},getName(t,e=null){var n;return t===this.user.id?ol.username(this.user):t in this.userLedger.friends?ol.username(this.userLedger.friends[t]):(e===null&&(e=(n=this.currentSheet)==null?void 0:n.people),ol.username(e[t]))},isCaption(t,e=null){var n,r,i;return t===this.user.id?!!this.user.name:t in((n=this.userLedger)==null?void 0:n.friends)?!!this.userLedger.friends[t].name:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),!!((i=e[t])!=null&&i.name))},getEmail(t,e=null){var n,r,i;return t===this.user.id?this.user.email:t in((n=this.userLedger)==null?void 0:n.friends)?this.userLedger.friends[t].email:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),(i=e[t])==null?void 0:i.email)},isPersonFullyRemovable(t){if(t===this.user.id)return!1;if(!this.currentSheet)return!0;if(t in this.currentSheet.users)return!1;const e=this.currentSheetPeople.indexOf(t);return e===-1?!0:Object.values(this.currentSheet.transactions).every(n=>e>=n.debts.length)},async addSheetFromNameAndPeople(t,e,n=null){const r=Object.fromEntries(Object.keys(e).filter(s=>this.isUserOrFriend(s)).map(s=>[s,"owner"])),i=N4.make(t,e,r);return await this.autoBatch(async(s,a)=>{await this.addSheet(s,a)},i,n),i},currentSheetToCsv(){if(!this.currentSheet)return"";const t=this.currentSheetPeople.map(r=>this.getName(r,this.currentSheet.people));return[hn.csvHeader(t),...this.currentSheetTransactions.map(r=>hn.toCsvLine(this.currentSheet.transactions[r],t))].map(r=>r.join(",")).join(`
`)},async removeSheet(t,e,n=null){return await this.autoBatch(async(r,i,s)=>{const a=this.getSheetRef(r);i<=1?s.delete(a):(s.update(a,{[`users.${Qe.currentUser.uid}`]:ef()}),s.update(a,{[`people.${Qe.currentUser.uid}.active`]:!1}));const l=this.getUserLedgerRef();s.update(l,{[`sheets.${r}`]:ef()})},t,e,n)},async nUsers(t){const e=this.getSheetRef(t),n=await nB(e);if(!n.exists)throw new Error(`Document ${t} does not exist!`);return Object.keys(n.data().users).length},async addSheet(t,e=null){return await this.autoBatch(async(n,r)=>{const i={name:n.name,timestamp:n.timestamp};Object.keys(n.users).forEach(a=>{const l=this.getUserLedgerRef(a);r.update(l,{[`sheets.${n.id}`]:i})});const s=this.getSheetRef(n.id);r.set(s,n)},t,e)},isUserOrFriend(t){return t===Qe.currentUser.uid||t in this.userLedger.friends},async removeFriend(t,e=null){if(!(t in this.userLedger.friends))throw new Error("This user is not your friend!");return await this.autoBatch(async(n,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${n}`]:ef()})},t,e)},async setFriendName(t,e,n=null){if(e in this.userLedger.friends)return await this.autoBatch(async(r,i,s)=>{const a=this.getUserLedgerRef();s.update(a,{[`friends.${i}.name`]:r})},t,e,n)},async addFriend(t,e=null){if(t.id in this.userLedger.friends)throw new Error("This user is already a friend!");if(t.id===Qe.currentUser.uid)throw new Error("You cannot add youself as friend!");return await this.autoBatch(async(n,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${n.id}`]:n})},t,e)},isReady(){return this.firebaseReady&&this.authReady&&!!this.userLedger},async setUsername(t,e=null){return await this.autoBatch(async(n,r)=>{const i=this.getUserLedgerRef();r.update(i,{name:n})},t,e)},async init(){if(this.setupOnlineListener(),Ii===null&&await this.initFirebase(),Ii===null)return!1;await(Qe==null?void 0:Qe.authStateReady()),Qe!=null&&Qe.currentUser&&!this.userLedger&&await this.subscribeUserLedger(),this.currentSheetId&&await this.subscribeCurrentSheet(this.currentSheetId),navigator.onLine&&this.conversionRatesAutoUpdateRate>0&&(!this.conversionRatesUpdatedAt||Date.now()-this.conversionRatesUpdatedAt>this.conversionRatesAutoUpdateRate)&&await this.fetchConversionRates()},setConfig(t){if(!Ng.isCompatible(t))throw new Error("fbConfig not compatible!");this.config=t},async initFirebase(){if(Ng.isCompatible(this.config)){if(await this.clearFirebase(),DM().length>0){this.firebaseReady=!0;return}Ii=rb(this.config),Qe=S4(Ii),al=j2(Ii,{localCache:sB({tabManager:lB()})}),this.firebaseReady=!0,await new Promise(t=>{const e=Qe.onAuthStateChanged(()=>{this.authReady=!0,e(),t()})})}},async clearFirebase(){await this.logout(),al=null,Ii&&await OM(Ii),Qe=null,Ii=null},async logout(){this.clearUserLedger(),Qe!=null&&Qe.currentUser&&await(Qe==null?void 0:Qe.signOut())},async login(t,e){var n;this.logout(),Ii===null&&await this.initFirebase(),await((n=Qe.authStateReady)==null?void 0:n.call(Qe)),await hq(Qe,t,e)},async register(t,e){var r;await this.logout(),this.isFirebaseReady||await this.initFirebase(),await((r=Qe.authStateReady)==null?void 0:r.call(Qe)),await cq(Qe,t,e);const n=this.getUserLedgerRef();await rB(n,V4.make())},async sendVerificationEmail(){await fq(Qe.currentUser)},async resetPassword(t){await lq(Qe,t)},setupOnlineListener(){if(this.onlineHandler)return;const t=()=>{this.pendingTransactionIds.clear()};window.addEventListener("online",t),this.onlineHandler=t},disposeOnlineListener(){this.onlineHandler&&(window.removeEventListener("online",this.onlineHandler),this.onlineHandler=null)},clearAll(){this.clearUserLedger(),this.clearCurrentSheet(),this.disposeOnlineListener()},clearUserLedger(){var t;(t=this.unsubscribeUserLedger)==null||t.call(this),this.unsubscribeUserLedger=null,this.userLedger=null},async subscribeUserLedger(){this.clearUserLedger();let t=!0;await new Promise(e=>{const n=this.getUserLedgerRef();this.unsubscribeUserLedger=_I(n,r=>{r.exists()&&(this.userLedger=r.data()),t&&(t=!1,e())})})},clearCurrentSheet(){var t;(t=this.unsubscribeCurrentSheet)==null||t.call(this),this.unsubscribeCurrentSheet=null,this.currentSheet=null,this.currentSheetId=null},async subscribeCurrentSheet(t){this.clearCurrentSheet();let e=!0;await new Promise(n=>{const r=this.getSheetRef(t);this.unsubscribeCurrentSheet=_I(r,async i=>{if(i.exists()){const s=i.data();this.currentSheet=s}await this.updateFriends(),e&&(e=!1,n())})}),this.currentSheetId=this.currentSheet.id||null},async updateFriends(t=null){const e=Object.keys(this.currentSheet.users).filter(r=>!(r in this.userLedger.friends)&&r!==Qe.currentUser.uid);if(!e.length)return;const n=e.map(r=>{var i,s;return{id:r,name:(i=this.currentSheet.people[r])==null?void 0:i.name,email:(s=this.currentSheet.people[r])==null?void 0:s.email}});await this.autoBatch(async(r,i)=>{for(const s of r)await this.addFriend(s,i)},n,t)},getUserLedgerRef(t=null){return t||(t=Qe.currentUser.uid),pI(al,"users",t)},getSheetRef(t){return pI(al,"sheets",t)},async autoBatch(t,...e){const n=!e[e.length-1];n&&(e[e.length-1]=hB(al));const r=await t.apply(this,e);return n&&e[e.length-1].commit(),r},async fetchConversionRates(){if(!navigator.onLine)throw new Error("I cannot fetch rates. We are offline!");const e=await fetch("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/eur.json");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const n=await e.json();if(n.eur&&typeof n.eur=="object"){const r={};for(const i in n.eur)r[i.toUpperCase()]=n.eur[i];n.eur=r}this.conversionRates=n,this.conversionRatesUpdatedAt=Date.now()},convertCurrency(t,e,n){if(e===n)return t;if(!this.conversionRates||!this.conversionRates.eur)return null;const r=this.conversionRates.eur[e]||null,i=this.conversionRates.eur[n]||null;return!r||!i?null:t*i/r}},persist:{key:"sessionData",pick:["config","currentSheetId","transactionId","pendingTransactionIds","referenceCurrency","conversionRates","conversionRatesUpdatedAt","conversionRatesAutoUpdateRate"],serializer:{serialize:t=>JSON.stringify({...t,pendingTransactionIds:Array.from(t.pendingTransactionIds)}),deserialize:t=>{const e=JSON.parse(t);return{...e,pendingTransactionIds:new Set(e.pendingTransactionIds)}}}}}),q4={__name:"App",setup(t){const e=QS();return dc(()=>{e.clearAll()}),(n,r)=>{const i=tN("router-view");return Of(),Nf(i)}}};function y6(t){return t}function $4(t,e){if(t==null)return;let n=t;for(let r=0;r<e.length;r++){if(n===void 0||n[e[r]]===void 0)return;if(n===null||n[e[r]]===null)return null;n=n[e[r]]}return n}function fy(t,e,n){if(n.length===0)return e;const r=n[0];return n.length>1&&(e=fy(typeof t!="object"||t===null||!Object.prototype.hasOwnProperty.call(t,r)?Number.isInteger(Number(n[1]))?[]:{}:t[r],e,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(t)?t.slice()[r]:Object.assign({},t,{[r]:e})}function JS(t,e){if(t==null||e.length===0)return t;if(e.length===1){if(t==null)return t;if(Number.isInteger(e[0])&&Array.isArray(t))return Array.prototype.slice.call(t,0).splice(e[0],1);const n={};for(const r in t)n[r]=t[r];return delete n[e[0]],n}if(t[e[0]]==null){if(Number.isInteger(e[0])&&Array.isArray(t))return Array.prototype.concat.call([],t);const n={};for(const r in t)n[r]=t[r];return n}return fy(t,JS(t[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function YS(t,e){return e.map(n=>n.split(".")).map(n=>[n,$4(t,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>fy(n,r[1],r[0]),{})}function XS(t,e){return e.map(n=>n.split(".")).reduce((n,r)=>JS(n,r),t)}function BI(t,{storage:e,serializer:n,key:r,debug:i,pick:s,omit:a,beforeHydrate:l,afterHydrate:h},d,p=!0){try{p&&(l==null||l(d));const _=e.getItem(r);if(_){const v=n.deserialize(_),E=s?YS(v,s):v,N=a?XS(E,a):E;t.$patch(N)}p&&(h==null||h(d))}catch(_){i&&console.error("[pinia-plugin-persistedstate]",_)}}function qI(t,{storage:e,serializer:n,key:r,debug:i,pick:s,omit:a}){try{const l=s?YS(t,s):t,h=a?XS(l,a):l,d=n.serialize(h);e.setItem(r,d)}catch(l){i&&console.error("[pinia-plugin-persistedstate]",l)}}function j4(t,e){return typeof t=="function"?t(e):typeof t=="string"?t:e}function z4(t,e,n){const{pinia:r,store:i,options:{persist:s=n}}=t;if(!s)return;if(!(i.$id in r.state.value)){const l=r._s.get(i.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(e);i.$hydrate=({runHooks:l=!0}={})=>{a.forEach(h=>{BI(i,h,t,l)})},i.$persist=()=>{a.forEach(l=>{qI(i.$state,l)})},a.forEach(l=>{BI(i,l,t),i.$subscribe((h,d)=>qI(d,l),{detached:!0})})}function K4(t={}){return function(e){var n;z4(e,r=>{var s,a,l,h,d,p,_,v;const i=j4(r.key,e.store.$id);return{key:(t.key?t.key:E=>E)(i),debug:(a=(s=r.debug)!=null?s:t.debug)!=null?a:!1,serializer:(h=(l=r.serializer)!=null?l:t.serializer)!=null?h:{serialize:E=>JSON.stringify(E),deserialize:E=>JSON.parse(E)},storage:(p=(d=r.storage)!=null?d:t.storage)!=null?p:window.localStorage,beforeHydrate:(_=r.beforeHydrate)!=null?_:t.beforeHydrate,afterHydrate:(v=r.afterHydrate)!=null?v:t.afterHydrate,pick:r.pick,omit:r.omit}},(n=t.auto)!=null?n:!1)}}var G4=K4();const Vg=()=>{const t=rL();return t.use(G4),t};const Fa=typeof document!="undefined";function ZS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function W4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ZS(t.default)}const pt=Object.assign;function Lg(t,e){const n={};for(const r in e){const i=e[r];n[r]=Br(i)?i.map(t):t(i)}return n}const Fl=()=>{},Br=Array.isArray;function $I(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const eR=/#/g,H4=/&/g,Q4=/\//g,J4=/=/g,Y4=/\?/g,tR=/\+/g,X4=/%5B/g,Z4=/%5D/g,nR=/%5E/g,e$=/%60/g,rR=/%7B/g,t$=/%7C/g,iR=/%7D/g,n$=/%20/g;function dy(t){return t==null?"":encodeURI(""+t).replace(t$,"|").replace(X4,"[").replace(Z4,"]")}function r$(t){return dy(t).replace(rR,"{").replace(iR,"}").replace(nR,"^")}function Bm(t){return dy(t).replace(tR,"%2B").replace(n$,"+").replace(eR,"%23").replace(H4,"%26").replace(e$,"`").replace(rR,"{").replace(iR,"}").replace(nR,"^")}function i$(t){return Bm(t).replace(J4,"%3D")}function s$(t){return dy(t).replace(eR,"%23").replace(Y4,"%3F")}function o$(t){return s$(t).replace(Q4,"%2F")}function lc(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const a$=/\/$/,u$=t=>t.replace(a$,"");function Mg(t,e,n="/"){let r,i={},s="",a="";const l=e.indexOf("#");let h=e.indexOf("?");return h=l>=0&&h>l?-1:h,h>=0&&(r=e.slice(0,h),s=e.slice(h,l>0?l:e.length),i=t(s.slice(1))),l>=0&&(r=r||e.slice(0,l),a=e.slice(l,e.length)),r=f$(r!=null?r:e,n),{fullPath:r+s+a,path:r,query:i,hash:lc(a)}}function l$(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function jI(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function c$(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&cu(e.matched[r],n.matched[i])&&sR(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function cu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function sR(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!h$(t[n],e[n]))return!1;return!0}function h$(t,e){return Br(t)?zI(t,e):Br(e)?zI(e,t):t===e}function zI(t,e){return Br(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function f$(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a).join("/")}const ds={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let qm=(function(t){return t.pop="pop",t.push="push",t})({}),Fg=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function d$(t){if(!t)if(Fa){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),u$(t)}const p$=/^[^#]+#/;function g$(t,e){return t.replace(p$,"#")+e}function m$(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Kd=()=>({left:window.scrollX,top:window.scrollY});function _$(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=m$(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function KI(t,e){return(history.state?history.state.position-e:-1)+t}const $m=new Map;function y$(t,e){$m.set(t,e)}function v$(t){const e=$m.get(t);return $m.delete(t),e}function w$(t){return typeof t=="string"||t&&typeof t=="object"}function oR(t){return typeof t=="string"||typeof t=="symbol"}let Ft=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const aR=Symbol("");Ft.MATCHER_NOT_FOUND+"",Ft.NAVIGATION_GUARD_REDIRECT+"",Ft.NAVIGATION_ABORTED+"",Ft.NAVIGATION_CANCELLED+"",Ft.NAVIGATION_DUPLICATED+"";function hu(t,e){return pt(new Error,{type:t,[aR]:!0},e)}function Ti(t,e){return t instanceof Error&&aR in t&&(e==null||!!(t.type&e))}const E$=["params","query","hash"];function I$(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of E$)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function T$(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(tR," "),s=i.indexOf("="),a=lc(s<0?i:i.slice(0,s)),l=s<0?null:lc(i.slice(s+1));if(a in e){let h=e[a];Br(h)||(h=e[a]=[h]),h.push(l)}else e[a]=l}return e}function GI(t){let e="";for(let n in t){const r=t[n];if(n=i$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Br(r)?r.map(i=>i&&Bm(i)):[r&&Bm(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function b$(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Br(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const A$=Symbol(""),WI=Symbol(""),Gd=Symbol(""),uR=Symbol(""),jm=Symbol("");function ul(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function vs(t,e,n,r,i,s=a=>a()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((l,h)=>{const d=v=>{v===!1?h(hu(Ft.NAVIGATION_ABORTED,{from:n,to:e})):v instanceof Error?h(v):w$(v)?h(hu(Ft.NAVIGATION_GUARD_REDIRECT,{from:e,to:v})):(a&&r.enterCallbacks[i]===a&&typeof v=="function"&&a.push(v),l())},p=s(()=>t.call(r&&r.instances[i],e,n,d));let _=Promise.resolve(p);t.length<3&&(_=_.then(d)),_.catch(v=>h(v))})}function Ug(t,e,n,r,i=s=>s()){const s=[];for(const a of t)for(const l in a.components){let h=a.components[l];if(!(e!=="beforeRouteEnter"&&!a.instances[l]))if(ZS(h)){const d=(h.__vccOpts||h)[e];d&&s.push(vs(d,n,r,a,l,i))}else{let d=h();s.push(()=>d.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const _=W4(p)?p.default:p;a.mods[l]=p,a.components[l]=_;const v=(_.__vccOpts||_)[e];return v&&vs(v,n,r,a,l,i)()}))}}return s}function S$(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let a=0;a<s;a++){const l=e.matched[a];l&&(t.matched.find(d=>cu(d,l))?r.push(l):n.push(l));const h=t.matched[a];h&&(e.matched.find(d=>cu(d,h))||i.push(h))}return[n,r,i]}let R$=()=>location.protocol+"//"+location.host;function lR(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),jI(l,"")}return jI(n,t)+r+i}function P$(t,e,n,r){let i=[],s=[],a=null;const l=({state:v})=>{const E=lR(t,location),N=n.value,M=e.value;let F=0;if(v){if(n.value=E,e.value=v,a&&a===N){a=null;return}F=M?v.position-M.position:0}else r(E);i.forEach(Q=>{Q(n.value,N,{delta:F,type:qm.pop,direction:F?F>0?Fg.forward:Fg.back:Fg.unknown})})};function h(){a=n.value}function d(v){i.push(v);const E=()=>{const N=i.indexOf(v);N>-1&&i.splice(N,1)};return s.push(E),E}function p(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(pt({},v.state,{scroll:Kd()}),"")}}function _(){for(const v of s)v();s=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",p),document.removeEventListener("visibilitychange",p)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",p),document.addEventListener("visibilitychange",p),{pauseListeners:h,listen:d,destroy:_}}function HI(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Kd():null}}function C$(t){const{history:e,location:n}=window,r={value:lR(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(h,d,p){const _=t.indexOf("#"),v=_>-1?(n.host&&document.querySelector("base")?t:t.slice(_))+h:R$()+t+h;try{e[p?"replaceState":"pushState"](d,"",v),i.value=d}catch(E){console.error(E),n[p?"replace":"assign"](v)}}function a(h,d){s(h,pt({},e.state,HI(i.value.back,h,i.value.forward,!0),d,{position:i.value.position}),!0),r.value=h}function l(h,d){const p=pt({},i.value,e.state,{forward:h,scroll:Kd()});s(p.current,p,!0),s(h,pt({},HI(r.value,h,null),{position:p.position+1},d),!1),r.value=h}return{location:r,state:i,push:l,replace:a}}function x$(t){t=d$(t);const e=C$(t),n=P$(t,e.state,e.location,e.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=pt({location:"",base:t,go:r,createHref:g$.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function D$(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),x$(t)}let bo=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var nn=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(nn||{});const O$={type:bo.Static,value:""},k$=/[a-zA-Z0-9_]/;function N$(t){if(!t)return[[]];if(t==="/")return[[O$]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${n})/"${d}": ${E}`)}let n=nn.Static,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let l=0,h,d="",p="";function _(){d&&(n===nn.Static?s.push({type:bo.Static,value:d}):n===nn.Param||n===nn.ParamRegExp||n===nn.ParamRegExpEnd?(s.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:bo.Param,value:d,regexp:p,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=h}for(;l<t.length;){if(h=t[l++],h==="\\"&&n!==nn.ParamRegExp){r=n,n=nn.EscapeNext;continue}switch(n){case nn.Static:h==="/"?(d&&_(),a()):h===":"?(_(),n=nn.Param):v();break;case nn.EscapeNext:v(),n=r;break;case nn.Param:h==="("?n=nn.ParamRegExp:k$.test(h)?v():(_(),n=nn.Static,h!=="*"&&h!=="?"&&h!=="+"&&l--);break;case nn.ParamRegExp:h===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+h:n=nn.ParamRegExpEnd:p+=h;break;case nn.ParamRegExpEnd:_(),n=nn.Static,h!=="*"&&h!=="?"&&h!=="+"&&l--,p="";break;default:e("Unknown state");break}}return n===nn.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),_(),a(),i}const QI="[^/]+?",V$={sensitive:!1,strict:!1,start:!0,end:!0};var jn=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(jn||{});const L$=/[.+*?^${}()[\]/\\]/g;function M$(t,e){const n=pt({},V$,e),r=[];let i=n.start?"^":"";const s=[];for(const d of t){const p=d.length?[]:[jn.Root];n.strict&&!d.length&&(i+="/");for(let _=0;_<d.length;_++){const v=d[_];let E=jn.Segment+(n.sensitive?jn.BonusCaseSensitive:0);if(v.type===bo.Static)_||(i+="/"),i+=v.value.replace(L$,"\\$&"),E+=jn.Static;else if(v.type===bo.Param){const{value:N,repeatable:M,optional:F,regexp:Q}=v;s.push({name:N,repeatable:M,optional:F});const j=Q||QI;if(j!==QI){E+=jn.BonusCustomRegExp;try{`${j}`}catch(G){throw new Error(`Invalid custom RegExp for param "${N}" (${j}): `+G.message)}}let z=M?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;_||(z=F&&d.length<2?`(?:/${z})`:"/"+z),F&&(z+="?"),i+=z,E+=jn.Dynamic,F&&(E+=jn.BonusOptional),M&&(E+=jn.BonusRepeatable),j===".*"&&(E+=jn.BonusWildcard)}p.push(E)}r.push(p)}if(n.strict&&n.end){const d=r.length-1;r[d][r[d].length-1]+=jn.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function l(d){const p=d.match(a),_={};if(!p)return null;for(let v=1;v<p.length;v++){const E=p[v]||"",N=s[v-1];_[N.name]=E&&N.repeatable?E.split("/"):E}return _}function h(d){let p="",_=!1;for(const v of t){(!_||!p.endsWith("/"))&&(p+="/"),_=!1;for(const E of v)if(E.type===bo.Static)p+=E.value;else if(E.type===bo.Param){const{value:N,repeatable:M,optional:F}=E,Q=N in d?d[N]:"";if(Br(Q)&&!M)throw new Error(`Provided param "${N}" is an array but it is not repeatable (* or + modifiers)`);const j=Br(Q)?Q.join("/"):Q;if(!j)if(F)v.length<2&&(p.endsWith("/")?p=p.slice(0,-1):_=!0);else throw new Error(`Missing required param "${N}"`);p+=j}}return p||"/"}return{re:a,score:r,keys:s,parse:l,stringify:h}}function F$(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===jn.Static+jn.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===jn.Static+jn.Segment?1:-1:0}function cR(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=F$(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(JI(r))return 1;if(JI(i))return-1}return i.length-r.length}function JI(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const U$={strict:!1,end:!0,sensitive:!1};function B$(t,e,n){const r=M$(N$(t.path),n),i=pt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function q$(t,e){const n=[],r=new Map;e=$I(U$,e);function i(_){return r.get(_)}function s(_,v,E){const N=!E,M=XI(_);M.aliasOf=E&&E.record;const F=$I(e,_),Q=[M];if("alias"in _){const G=typeof _.alias=="string"?[_.alias]:_.alias;for(const J of G)Q.push(XI(pt({},M,{components:E?E.record.components:M.components,path:J,aliasOf:E?E.record:M})))}let j,z;for(const G of Q){const{path:J}=G;if(v&&J[0]!=="/"){const oe=v.record.path,R=oe[oe.length-1]==="/"?"":"/";G.path=v.record.path+(J&&R+J)}if(j=B$(G,v,F),E?E.alias.push(j):(z=z||j,z!==j&&z.alias.push(j),N&&_.name&&!ZI(j)&&a(_.name)),hR(j)&&h(j),M.children){const oe=M.children;for(let R=0;R<oe.length;R++)s(oe[R],j,E&&E.children[R])}E=E||j}return z?()=>{a(z)}:Fl}function a(_){if(oR(_)){const v=r.get(_);v&&(r.delete(_),n.splice(n.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=n.indexOf(_);v>-1&&(n.splice(v,1),_.record.name&&r.delete(_.record.name),_.children.forEach(a),_.alias.forEach(a))}}function l(){return n}function h(_){const v=z$(_,n);n.splice(v,0,_),_.record.name&&!ZI(_)&&r.set(_.record.name,_)}function d(_,v){let E,N={},M,F;if("name"in _&&_.name){if(E=r.get(_.name),!E)throw hu(Ft.MATCHER_NOT_FOUND,{location:_});F=E.record.name,N=pt(YI(v.params,E.keys.filter(z=>!z.optional).concat(E.parent?E.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),_.params&&YI(_.params,E.keys.map(z=>z.name))),M=E.stringify(N)}else if(_.path!=null)M=_.path,E=n.find(z=>z.re.test(M)),E&&(N=E.parse(M),F=E.record.name);else{if(E=v.name?r.get(v.name):n.find(z=>z.re.test(v.path)),!E)throw hu(Ft.MATCHER_NOT_FOUND,{location:_,currentLocation:v});F=E.record.name,N=pt({},v.params,_.params),M=E.stringify(N)}const Q=[];let j=E;for(;j;)Q.unshift(j.record),j=j.parent;return{name:F,path:M,params:N,matched:Q,meta:j$(Q)}}t.forEach(_=>s(_));function p(){n.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:a,clearRoutes:p,getRoutes:l,getRecordMatcher:i}}function YI(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function XI(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:$$(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function $$(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function ZI(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function j$(t){return t.reduce((e,n)=>pt(e,n.meta),{})}function z$(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;cR(t,e[s])<0?r=s:n=s+1}const i=K$(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function K$(t){let e=t;for(;e=e.parent;)if(hR(e)&&cR(t,e)===0)return e}function hR({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function eT(t){const e=Mr(Gd),n=Mr(uR),r=Ue(()=>{const h=So(t.to);return e.resolve(h)}),i=Ue(()=>{const{matched:h}=r.value,{length:d}=h,p=h[d-1],_=n.matched;if(!p||!_.length)return-1;const v=_.findIndex(cu.bind(null,p));if(v>-1)return v;const E=tT(h[d-2]);return d>1&&tT(p)===E&&_[_.length-1].path!==E?_.findIndex(cu.bind(null,h[d-2])):v}),s=Ue(()=>i.value>-1&&J$(n.params,r.value.params)),a=Ue(()=>i.value>-1&&i.value===n.matched.length-1&&sR(n.params,r.value.params));function l(h={}){if(Q$(h)){const d=e[So(t.replace)?"replace":"push"](So(t.to)).catch(Fl);return t.viewTransition&&typeof document!="undefined"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:Ue(()=>r.value.href),isActive:s,isExactActive:a,navigate:l}}function G$(t){return t.length===1?t[0]:t}const W$=u_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:eT,setup(t,{slots:e}){const n=Go(eT(t)),{options:r}=Mr(Gd),i=Ue(()=>({[nT(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[nT(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&G$(e.default(n));return t.custom?s:Fe("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),H$=W$;function Q$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function J$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Br(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function tT(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const nT=(t,e,n)=>t!=null?t:e!=null?e:n,Y$=u_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Mr(jm),i=Ue(()=>t.route||r.value),s=Mr(WI,0),a=Ue(()=>{let d=So(s);const{matched:p}=i.value;let _;for(;(_=p[d])&&!_.components;)d++;return d}),l=Ue(()=>i.value.matched[a.value]);sf(WI,Ue(()=>a.value+1)),sf(A$,l),sf(jm,i);const h=Do();return ja(()=>[h.value,l.value,t.name],([d,p,_],[v,E,N])=>{p&&(p.instances[_]=d,E&&E!==p&&d&&d===v&&(p.leaveGuards.size||(p.leaveGuards=E.leaveGuards),p.updateGuards.size||(p.updateGuards=E.updateGuards))),d&&p&&(!E||!cu(p,E)||!v)&&(p.enterCallbacks[_]||[]).forEach(M=>M(d))},{flush:"post"}),()=>{const d=i.value,p=t.name,_=l.value,v=_&&_.components[p];if(!v)return rT(n.default,{Component:v,route:d});const E=_.props[p],N=E?E===!0?d.params:typeof E=="function"?E(d):E:null,F=Fe(v,pt({},N,e,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(_.instances[p]=null)},ref:h}));return rT(n.default,{Component:F,route:d})||F}}});function rT(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const X$=Y$;function Z$(t){const e=q$(t.routes,t),n=t.parseQuery||T$,r=t.stringifyQuery||GI,i=t.history,s=ul(),a=ul(),l=ul(),h=Rk(ds);let d=ds;Fa&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Lg.bind(null,ee=>""+ee),_=Lg.bind(null,o$),v=Lg.bind(null,lc);function E(ee,_e){let de,be;return oR(ee)?(de=e.getRecordMatcher(ee),be=_e):be=ee,e.addRoute(be,de)}function N(ee){const _e=e.getRecordMatcher(ee);_e&&e.removeRoute(_e)}function M(){return e.getRoutes().map(ee=>ee.record)}function F(ee){return!!e.getRecordMatcher(ee)}function Q(ee,_e){if(_e=pt({},_e||h.value),typeof ee=="string"){const B=Mg(n,ee,_e.path),Z=e.resolve({path:B.path},_e),ie=i.createHref(B.fullPath);return pt(B,Z,{params:v(Z.params),hash:lc(B.hash),redirectedFrom:void 0,href:ie})}let de;if(ee.path!=null)de=pt({},ee,{path:Mg(n,ee.path,_e.path).path});else{const B=pt({},ee.params);for(const Z in B)B[Z]==null&&delete B[Z];de=pt({},ee,{params:_(B)}),_e.params=_(_e.params)}const be=e.resolve(de,_e),$e=ee.hash||"";be.params=p(v(be.params));const C=l$(r,pt({},ee,{hash:r$($e),path:be.path})),V=i.createHref(C);return pt({fullPath:C,hash:$e,query:r===GI?b$(ee.query):ee.query||{}},be,{redirectedFrom:void 0,href:V})}function j(ee){return typeof ee=="string"?Mg(n,ee,h.value.path):pt({},ee)}function z(ee,_e){if(d!==ee)return hu(Ft.NAVIGATION_CANCELLED,{from:_e,to:ee})}function G(ee){return R(ee)}function J(ee){return G(pt(j(ee),{replace:!0}))}function oe(ee,_e){const de=ee.matched[ee.matched.length-1];if(de&&de.redirect){const{redirect:be}=de;let $e=typeof be=="function"?be(ee,_e):be;return typeof $e=="string"&&($e=$e.includes("?")||$e.includes("#")?$e=j($e):{path:$e},$e.params={}),pt({query:ee.query,hash:ee.hash,params:$e.path!=null?{}:ee.params},$e)}}function R(ee,_e){const de=d=Q(ee),be=h.value,$e=ee.state,C=ee.force,V=ee.replace===!0,B=oe(de,be);if(B)return R(pt(j(B),{state:typeof B=="object"?pt({},$e,B.state):$e,force:C,replace:V}),_e||de);const Z=de;Z.redirectedFrom=_e;let ie;return!C&&c$(r,be,de)&&(ie=hu(Ft.NAVIGATION_DUPLICATED,{to:Z,from:be}),Dt(be,be,!0,!1)),(ie?Promise.resolve(ie):x(Z,be)).catch(Y=>Ti(Y)?Ti(Y,Ft.NAVIGATION_GUARD_REDIRECT)?Y:En(Y):Be(Y,Z,be)).then(Y=>{if(Y){if(Ti(Y,Ft.NAVIGATION_GUARD_REDIRECT))return R(pt({replace:V},j(Y.to),{state:typeof Y.to=="object"?pt({},$e,Y.to.state):$e,force:C}),_e||Z)}else Y=O(Z,be,!0,V,$e);return k(Z,be,Y),Y})}function S(ee,_e){const de=z(ee,_e);return de?Promise.reject(de):Promise.resolve()}function A(ee){const _e=qr.values().next().value;return _e&&typeof _e.runWithContext=="function"?_e.runWithContext(ee):ee()}function x(ee,_e){let de;const[be,$e,C]=S$(ee,_e);de=Ug(be.reverse(),"beforeRouteLeave",ee,_e);for(const B of be)B.leaveGuards.forEach(Z=>{de.push(vs(Z,ee,_e))});const V=S.bind(null,ee,_e);return de.push(V),Xt(de).then(()=>{de=[];for(const B of s.list())de.push(vs(B,ee,_e));return de.push(V),Xt(de)}).then(()=>{de=Ug($e,"beforeRouteUpdate",ee,_e);for(const B of $e)B.updateGuards.forEach(Z=>{de.push(vs(Z,ee,_e))});return de.push(V),Xt(de)}).then(()=>{de=[];for(const B of C)if(B.beforeEnter)if(Br(B.beforeEnter))for(const Z of B.beforeEnter)de.push(vs(Z,ee,_e));else de.push(vs(B.beforeEnter,ee,_e));return de.push(V),Xt(de)}).then(()=>(ee.matched.forEach(B=>B.enterCallbacks={}),de=Ug(C,"beforeRouteEnter",ee,_e,A),de.push(V),Xt(de))).then(()=>{de=[];for(const B of a.list())de.push(vs(B,ee,_e));return de.push(V),Xt(de)}).catch(B=>Ti(B,Ft.NAVIGATION_CANCELLED)?B:Promise.reject(B))}function k(ee,_e,de){l.list().forEach(be=>A(()=>be(ee,_e,de)))}function O(ee,_e,de,be,$e){const C=z(ee,_e);if(C)return C;const V=_e===ds,B=Fa?history.state:{};de&&(be||V?i.replace(ee.fullPath,pt({scroll:V&&B&&B.scroll},$e)):i.push(ee.fullPath,$e)),h.value=ee,Dt(ee,_e,de,V),En()}let P;function ce(){P||(P=i.listen((ee,_e,de)=>{if(!Ht.listening)return;const be=Q(ee),$e=oe(be,Ht.currentRoute.value);if($e){R(pt($e,{replace:!0,force:!0}),be).catch(Fl);return}d=be;const C=h.value;Fa&&y$(KI(C.fullPath,de.delta),Kd()),x(be,C).catch(V=>Ti(V,Ft.NAVIGATION_ABORTED|Ft.NAVIGATION_CANCELLED)?V:Ti(V,Ft.NAVIGATION_GUARD_REDIRECT)?(R(pt(j(V.to),{force:!0}),be).then(B=>{Ti(B,Ft.NAVIGATION_ABORTED|Ft.NAVIGATION_DUPLICATED)&&!de.delta&&de.type===qm.pop&&i.go(-1,!1)}).catch(Fl),Promise.reject()):(de.delta&&i.go(-de.delta,!1),Be(V,be,C))).then(V=>{V=V||O(be,C,!1),V&&(de.delta&&!Ti(V,Ft.NAVIGATION_CANCELLED)?i.go(-de.delta,!1):de.type===qm.pop&&Ti(V,Ft.NAVIGATION_ABORTED|Ft.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),k(be,C,V)}).catch(Fl)}))}let qe=ul(),Ye=ul(),Te;function Be(ee,_e,de){En(ee);const be=Ye.list();return be.length?be.forEach($e=>$e(ee,_e,de)):console.error(ee),Promise.reject(ee)}function Ln(){return Te&&h.value!==ds?Promise.resolve():new Promise((ee,_e)=>{qe.add([ee,_e])})}function En(ee){return Te||(Te=!ee,ce(),qe.list().forEach(([_e,de])=>ee?de(ee):_e()),qe.reset()),ee}function Dt(ee,_e,de,be){const{scrollBehavior:$e}=t;if(!Fa||!$e)return Promise.resolve();const C=!de&&v$(KI(ee.fullPath,0))||(be||!de)&&history.state&&history.state.scroll||null;return s_().then(()=>$e(ee,_e,C)).then(V=>V&&_$(V)).catch(V=>Be(V,ee,_e))}const Rt=ee=>i.go(ee);let Pt;const qr=new Set,Ht={currentRoute:h,listening:!0,addRoute:E,removeRoute:N,clearRoutes:e.clearRoutes,hasRoute:F,getRoutes:M,resolve:Q,options:t,push:G,replace:J,go:Rt,back:()=>Rt(-1),forward:()=>Rt(1),beforeEach:s.add,beforeResolve:a.add,afterEach:l.add,onError:Ye.add,isReady:Ln,install(ee){ee.component("RouterLink",H$),ee.component("RouterView",X$),ee.config.globalProperties.$router=Ht,Object.defineProperty(ee.config.globalProperties,"$route",{enumerable:!0,get:()=>So(h)}),Fa&&!Pt&&h.value===ds&&(Pt=!0,G(i.location).catch(be=>{}));const _e={};for(const be in ds)Object.defineProperty(_e,be,{get:()=>h.value[be],enumerable:!0});ee.provide(Gd,Ht),ee.provide(uR,BT(_e)),ee.provide(jm,h);const de=ee.unmount;qr.add(ee),ee.unmount=function(){qr.delete(ee),qr.size<1&&(d=ds,P&&P(),P=null,h.value=ds,Pt=!1,Te=!1),de()}}};function Xt(ee){return ee.reduce((_e,de)=>_e.then(()=>A(de)),Promise.resolve())}return Ht}function v6(){return Mr(Gd)}const e9=[{path:"/",component:()=>qn(()=>import("./MainLayout-C7W6r9Wk.js"),__vite__mapDeps([0,1,2,3])),children:[{path:"/",name:"IndexPage",component:()=>qn(()=>import("./IndexPage-DK57zc58.js"),__vite__mapDeps([4,5,6,7,8,9,10,11,2,1,12,13,14,15,16,17,18,19,20,21,22,3,23,24])),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/newSheetWizard",name:"NewSheetWizardPage",component:()=>qn(()=>import("./NewSheetWizardPage-CPi1LX8O.js"),__vite__mapDeps([25,5,11,2,10,7,26,27,6,8,9,1,14,15,16,21,19,20,28,23])),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/sheet",name:"SheetPage",component:()=>qn(()=>import("./SheetPage-BwHsk7tO.js"),__vite__mapDeps([29,30,6,7,8,9,10,11,2,1,28,23,31,32,33,14,15,16])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/convert",name:"ConvertPage",component:()=>qn(()=>import("./ConvertPage-BpFT7SES.js"),__vite__mapDeps([34,30,11,2,10,7,28,6,8,9,1,23,35,31,32,33,14,15,16])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/settle",name:"SettlePage",component:()=>qn(()=>import("./SettlePage-DDyft3D2.js"),__vite__mapDeps([36,30,11,2,10,7,28,6,8,9,1,23,35,31,32,33,14,15,16])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/statistics",name:"StatisticsPage",component:()=>qn(()=>import("./StatisticsPage-CLEqqfzV.js"),__vite__mapDeps([37,5,30,11,2,10,7,15,16,8,38,39,17,40,28,6,9,1,23,35,31,41])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/conversionRatesSettings",name:"ConversionRatesSettingsPage",component:()=>qn(()=>import("./ConversionRatesSettingsPage-D8j3oQT3.js"),__vite__mapDeps([42,5,11,2,10,7,6,8,9,1,20,13,38,35,31,43,40])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!1}},{path:"/sheet/people",name:"PeoplePage",component:()=>qn(()=>import("./PeoplePage-AmsMyTH8.js"),__vite__mapDeps([44,30,11,2,7,27,6,8,9,10,1,14,15,16,21,19,20,28,23])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/transaction",name:"TransactionPage",component:()=>qn(()=>import("./TransactionPage-bbgfNA1J.js"),__vite__mapDeps([45,30,11,2,10,7,6,8,9,1,28,23,43,31,33,35])),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/login",name:"LoginPage",component:()=>qn(()=>import("./LoginPage-Cju9_l7x.js"),__vite__mapDeps([46,10,7,12,19,26])),meta:{requiresFirebase:!0}},{path:"/settings",name:"SettingsPage",component:()=>qn(()=>import("./SettingsPage-CnAni98_.js"),__vite__mapDeps([47,30,11,2,10,7,19,18,20,9,1,21]))},{path:"/landing",name:"LandingPage",component:()=>qn(()=>import("./LandingPage-Dw2zrI_J.js"),__vite__mapDeps([48,30,11,2,22,39,17,16,8,7,40]))}]},{path:"/:catchAll(.*)*",component:()=>qn(()=>import("./ErrorNotFound-_o8TooDO.js"),[])}],Bg=()=>{const e=Z$({scrollBehavior:()=>({left:0,top:0}),routes:e9,history:D$("/kbalance_quasar_pwa/")}),n=QS();let r=!0;return e.beforeEach(async(i,s,a)=>{r&&(await n.init(),r=!1),i.matched.some(l=>l.meta.requiresFirebase)&&!n.firebaseReady?a({name:"SettingsPage"}):i.matched.some(l=>l.meta.requiresAuth)&&!n.isReady()?a({name:"LoginPage"}):i.matched.some(l=>l.meta.requiresSheet)&&!n.isSheet?a({name:"IndexPage"}):a()}),e};async function t9(t,e){const n=t(q4);n.use(nL,e);const r=typeof Vg=="function"?await Vg({}):Vg;n.use(r);const i=Wo(typeof Bg=="function"?await Bg({store:r}):Bg);return r.use(({store:s})=>{s.router=i}),{app:n,store:r,router:i}}const zm={xs:18,sm:24,md:32,lg:38,xl:46},py={size:String};function gy(t,e=zm){return Ue(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function n9(t,e){return t!==void 0&&t()||e}function w6(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function wl(t,e){return t!==void 0?e.concat(t()):e}function r9(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function E6(t,e,n,r,i,s){e.key=r+i;const a=Fe(t,e,n);return i===!0?HT(a,s()):a}const iT="0 0 24 24",qg=t=>t,$g=t=>`ionicons ${t}`,fR={"mdi-":t=>`mdi ${t}`,"icon-":qg,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":$g,"ion-ios":$g,"ion-logo":$g,"iconfont ":qg,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":qg},dR={o_:"-outlined",r_:"-round",s_:"-sharp"},pR={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},i9=new RegExp("^("+Object.keys(fR).join("|")+")"),s9=new RegExp("^("+Object.keys(dR).join("|")+")"),sT=new RegExp("^("+Object.keys(pR).join("|")+")"),o9=/^[Mm]\s?[-+]?\.?\d/,a9=/^img:/,u9=/^svguse:/,l9=/^ion-/,c9=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,ad=gc({name:"QIcon",props:{...py,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Us(),r=gy(t),i=Ue(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),s=Ue(()=>{let a,l=t.name;if(l==="none"||!l)return{none:!0};if(n.iconMapFn!==null){const p=n.iconMapFn(l);if(p!==void 0)if(p.icon!==void 0){if(l=p.icon,l==="none"||!l)return{none:!0}}else return{cls:p.cls,content:p.content!==void 0?p.content:" "}}if(o9.test(l)===!0){const[p,_=iT]=l.split("|");return{svg:!0,viewBox:_,nodes:p.split("&&").map(v=>{const[E,N,M]=v.split("@@");return Fe("path",{style:N,d:E,transform:M})})}}if(a9.test(l)===!0)return{img:!0,src:l.substring(4)};if(u9.test(l)===!0){const[p,_=iT]=l.split("|");return{svguse:!0,src:p.substring(7),viewBox:_}}let h=" ";const d=l.match(i9);if(d!==null)a=fR[d[1]](l);else if(c9.test(l)===!0)a=l;else if(l9.test(l)===!0)a=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${l.substring(3)}`;else if(sT.test(l)===!0){a="notranslate material-symbols";const p=l.match(sT);p!==null&&(l=l.substring(6),a+=pR[p[1]]),h=l}else{a="notranslate material-icons";const p=l.match(s9);p!==null&&(l=l.substring(2),a+=dR[p[1]]),h=l}return{cls:a,content:h}});return()=>{const a={class:i.value,style:r.value,"aria-hidden":"true"};return s.value.none===!0?Fe(t.tag,a,n9(e.default)):s.value.img===!0?Fe(t.tag,a,wl(e.default,[Fe("img",{src:s.value.src})])):s.value.svg===!0?Fe(t.tag,a,wl(e.default,[Fe("svg",{viewBox:s.value.viewBox||"0 0 24 24"},s.value.nodes)])):s.value.svguse===!0?Fe(t.tag,a,wl(e.default,[Fe("svg",{viewBox:s.value.viewBox},[Fe("use",{"xlink:href":s.value.src})])])):(s.value.cls!==void 0&&(a.class+=" "+s.value.cls),Fe(t.tag,a,wl(e.default,[s.value.content])))}}}),h9=gc({name:"QAvatar",props:{...py,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=gy(t),r=Ue(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),i=Ue(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const s=t.icon!==void 0?[Fe(ad,{name:t.icon})]:void 0;return Fe("div",{class:r.value,style:n.value},[Fe("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},r9(e.default,s))])}}}),f9={size:{type:[String,Number],default:"1em"},color:String};function d9(t){return{cSize:Ue(()=>t.size in zm?`${zm[t.size]}px`:t.size),classes:Ue(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const gR=gc({name:"QSpinner",props:{...f9,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=d9(t);return()=>Fe("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Fe("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function I6(t){return t===window?window.innerHeight:t.getBoundingClientRect().height}function p9(t,e){const n=t.style;for(const r in e)n[r]=e[r]}function T6(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=So(t);if(e)return e.$el||e}function b6(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function g9(t,e=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),r=t.apply(this,arguments)),r}}function oT(t,e,n,r){n.modifiers.stop===!0&&F0(t);const i=n.modifiers.color;let s=n.modifiers.center;s=s===!0||r===!0;const a=document.createElement("span"),l=document.createElement("span"),h=NV(t),{left:d,top:p,width:_,height:v}=e.getBoundingClientRect(),E=Math.sqrt(_*_+v*v),N=E/2,M=`${(_-E)/2}px`,F=s?M:`${h.left-d-N}px`,Q=`${(v-E)/2}px`,j=s?Q:`${h.top-p-N}px`;l.className="q-ripple__inner",p9(l,{height:`${E}px`,width:`${E}px`,transform:`translate3d(${F},${j},0) scale3d(.2,.2,1)`,opacity:0}),a.className=`q-ripple${i?" text-"+i:""}`,a.setAttribute("dir","ltr"),a.appendChild(l),e.appendChild(a);const z=()=>{a.remove(),clearTimeout(G)};n.abort.push(z);let G=setTimeout(()=>{l.classList.add("q-ripple__inner--enter"),l.style.transform=`translate3d(${M},${Q},0) scale3d(1,1,1)`,l.style.opacity=.2,G=setTimeout(()=>{l.classList.remove("q-ripple__inner--enter"),l.classList.add("q-ripple__inner--leave"),l.style.opacity=0,G=setTimeout(()=>{a.remove(),n.abort.splice(n.abort.indexOf(z),1)},275)},250)},50)}function aT(t,{modifiers:e,value:n,arg:r}){const i=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||r,keyCodes:[].concat(i.keyCodes||13)}}const m9=kV({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(i){r.enabled===!0&&i.qSkipRipple!==!0&&i.type===(r.modifiers.early===!0?"pointerdown":"click")&&oT(i,t,r,i.qKeyEvent===!0)},keystart:g9(i=>{r.enabled===!0&&i.qSkipRipple!==!0&&sm(i,r.modifiers.keyCodes)===!0&&i.type===`key${r.modifiers.early===!0?"down":"up"}`&&oT(i,t,r,!0)},300)};aT(r,e),t.__qripple=r,VV(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&aT(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),LV(e,"main"),delete t._qripple)}}),mR={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},_9=Object.keys(mR),y9={align:{type:String,validator:t=>_9.includes(t)}};function v9(t){return Ue(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${mR[e]}`})}function A6(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function _R(t,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(n=>{_R(t,n)}):t.add(e)}function S6(t){const e=new Set;return t.forEach(n=>{_R(e,n)}),Array.from(e)}function w9(t){return t.appContext.config.globalProperties.$router!==void 0}function R6(t){return t.isUnmounted===!0||t.isDeactivated===!0}function uT(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function lT(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function E9(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(Array.isArray(i)===!1||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function cT(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function I9(t,e){return Array.isArray(t)===!0?cT(t,e):Array.isArray(e)===!0?cT(e,t):t===e}function T9(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(I9(t[n],e[n])===!1)return!1;return!0}const yR={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},P6={...yR,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function b9({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=Us(),{props:r,proxy:i,emit:s}=n,a=w9(n),l=Ue(()=>r.disable!==!0&&r.href!==void 0),h=Ue(e===!0?()=>a===!0&&r.disable!==!0&&l.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>a===!0&&l.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),d=Ue(()=>h.value===!0?j(r.to):null),p=Ue(()=>d.value!==null),_=Ue(()=>l.value===!0||p.value===!0),v=Ue(()=>r.type==="a"||_.value===!0?"a":r.tag||t||"div"),E=Ue(()=>l.value===!0?{href:r.href,target:r.target}:p.value===!0?{href:d.value.href,target:r.target}:{}),N=Ue(()=>{if(p.value===!1)return-1;const{matched:J}=d.value,{length:oe}=J,R=J[oe-1];if(R===void 0)return-1;const S=i.$route.matched;if(S.length===0)return-1;const A=S.findIndex(lT.bind(null,R));if(A!==-1)return A;const x=uT(J[oe-2]);return oe>1&&uT(R)===x&&S[S.length-1].path!==x?S.findIndex(lT.bind(null,J[oe-2])):A}),M=Ue(()=>p.value===!0&&N.value!==-1&&E9(i.$route.params,d.value.params)),F=Ue(()=>M.value===!0&&N.value===i.$route.matched.length-1&&T9(i.$route.params,d.value.params)),Q=Ue(()=>p.value===!0?F.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":M.value===!0?` ${r.activeClass}`:"":"");function j(J){try{return i.$router.resolve(J)}catch{}return null}function z(J,{returnRouterError:oe,to:R=r.to,replace:S=r.replace}={}){if(r.disable===!0)return J.preventDefault(),Promise.resolve(!1);if(J.metaKey||J.altKey||J.ctrlKey||J.shiftKey||J.button!==void 0&&J.button!==0||r.target==="_blank")return Promise.resolve(!1);J.preventDefault();const A=i.$router[S===!0?"replace":"push"](R);return oe===!0?A:A.then(()=>{}).catch(()=>{})}function G(J){if(p.value===!0){const oe=R=>z(J,R);s("click",J,oe),J.defaultPrevented!==!0&&oe()}else s("click",J)}return{hasRouterLink:p,hasHrefLink:l,hasLink:_,linkTag:v,resolvedLink:d,linkIsActive:M,linkIsExactActive:F,linkClass:Q,linkAttrs:E,getLink:j,navigateToRouterLink:z,navigateOnClick:G}}const hT={none:0,xs:4,sm:8,md:16,lg:24,xl:32},A9={xs:8,sm:10,md:14,lg:20,xl:24},S9=["button","submit","reset"],R9=/[^\s]\/[^\s]/,P9=["flat","outline","push","unelevated"];function vR(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}function C6(t){const e=vR(t);return e!==void 0?{[e]:!0}:{}}const C9={...py,...yR,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...P9.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...y9.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},x9={...C9,round:Boolean};function D9(t){const e=gy(t,A9),n=v9(t),{hasRouterLink:r,hasLink:i,linkTag:s,linkAttrs:a,navigateOnClick:l}=b9({fallbackTag:"button"}),h=Ue(()=>{const F=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},F,{padding:t.padding.split(/\s+/).map(Q=>Q in hT?hT[Q]+"px":Q).join(" "),minWidth:"0",minHeight:"0"}):F}),d=Ue(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),p=Ue(()=>t.disable!==!0&&t.loading!==!0),_=Ue(()=>p.value===!0?t.tabindex||0:-1),v=Ue(()=>vR(t,"standard")),E=Ue(()=>{const F={tabindex:_.value};return i.value===!0?Object.assign(F,a.value):S9.includes(t.type)===!0&&(F.type=t.type),s.value==="a"?(t.disable===!0?F["aria-disabled"]="true":F.href===void 0&&(F.role="button"),r.value!==!0&&R9.test(t.type)===!0&&(F.type=t.type)):t.disable===!0&&(F.disabled="",F["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(F,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),F}),N=Ue(()=>{let F;t.color!==void 0?t.flat===!0||t.outline===!0?F=`text-${t.textColor||t.color}`:F=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(F=`text-${t.textColor}`);const Q=t.round===!0?"round":`rectangle${d.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${v.value} q-btn--${Q}`+(F!==void 0?" "+F:"")+(p.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),M=Ue(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:N,style:h,innerClasses:M,attributes:E,hasLink:i,linkTag:s,navigateOnClick:l,isActionable:p}}const{passiveCapture:Ar}=ko;let Ca=null,xa=null,Da=null;const O9=gc({name:"QBtn",props:{...x9,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:r}=Us(),{classes:i,style:s,innerClasses:a,attributes:l,hasLink:h,linkTag:d,navigateOnClick:p,isActionable:_}=D9(t),v=Do(null),E=Do(null);let N=null,M,F=null;const Q=Ue(()=>t.label!==void 0&&t.label!==null&&t.label!==""),j=Ue(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:h.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),z=Ue(()=>({center:t.round})),G=Ue(()=>{const ce=Math.max(0,Math.min(100,t.percentage));return ce>0?{transition:"transform 0.6s",transform:`translateX(${ce-100}%)`}:{}}),J=Ue(()=>{if(t.loading===!0)return{onMousedown:P,onTouchstart:P,onClick:P,onKeydown:P,onKeyup:P};if(_.value===!0){const ce={onClick:R,onKeydown:S,onMousedown:x};if(r.$q.platform.has.touch===!0){const qe=t.onTouchstart!==void 0?"":"Passive";ce[`onTouchstart${qe}`]=A}return ce}return{onClick:Ia}}),oe=Ue(()=>({ref:v,class:"q-btn q-btn-item non-selectable no-outline "+i.value,style:s.value,...l.value,...J.value}));function R(ce){if(v.value!==null){if(ce!==void 0){if(ce.defaultPrevented===!0)return;const qe=document.activeElement;if(t.type==="submit"&&qe!==document.body&&v.value.contains(qe)===!1&&qe.contains(v.value)===!1){ce.qAvoidFocus!==!0&&v.value.focus();const Ye=()=>{var Te;document.removeEventListener("keydown",Ia,!0),document.removeEventListener("keyup",Ye,Ar),(Te=v.value)==null||Te.removeEventListener("blur",Ye,Ar)};document.addEventListener("keydown",Ia,!0),document.addEventListener("keyup",Ye,Ar),v.value.addEventListener("blur",Ye,Ar)}}p(ce)}}function S(ce){v.value!==null&&(n("keydown",ce),sm(ce,[13,32])===!0&&xa!==v.value&&(xa!==null&&O(),ce.defaultPrevented!==!0&&(ce.qAvoidFocus!==!0&&v.value.focus(),xa=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("keyup",k,!0),v.value.addEventListener("blur",k,Ar)),Ia(ce)))}function A(ce){v.value!==null&&(n("touchstart",ce),ce.defaultPrevented!==!0&&(Ca!==v.value&&(Ca!==null&&O(),Ca=v.value,N=ce.target,N.addEventListener("touchcancel",k,Ar),N.addEventListener("touchend",k,Ar)),M=!0,F!==null&&clearTimeout(F),F=setTimeout(()=>{F=null,M=!1},200)))}function x(ce){v.value!==null&&(ce.qSkipRipple=M===!0,n("mousedown",ce),ce.defaultPrevented!==!0&&Da!==v.value&&(Da!==null&&O(),Da=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("mouseup",k,Ar)))}function k(ce){if(v.value!==null&&!((ce==null?void 0:ce.type)==="blur"&&document.activeElement===v.value)){if((ce==null?void 0:ce.type)==="keyup"){if(xa===v.value&&sm(ce,[13,32])===!0){const qe=new MouseEvent("click",ce);qe.qKeyEvent=!0,ce.defaultPrevented===!0&&im(qe),ce.cancelBubble===!0&&F0(qe),v.value.dispatchEvent(qe),Ia(ce),ce.qKeyEvent=!0}n("keyup",ce)}O()}}function O(ce){var Ye,Te;const qe=E.value;ce!==!0&&(Ca===v.value||Da===v.value)&&qe!==null&&qe!==document.activeElement&&(qe.setAttribute("tabindex",-1),qe.focus()),Ca===v.value&&(N!==null&&(N.removeEventListener("touchcancel",k,Ar),N.removeEventListener("touchend",k,Ar)),Ca=N=null),Da===v.value&&(document.removeEventListener("mouseup",k,Ar),Da=null),xa===v.value&&(document.removeEventListener("keyup",k,!0),(Ye=v.value)==null||Ye.removeEventListener("blur",k,Ar),xa=null),(Te=v.value)==null||Te.classList.remove("q-btn--active")}function P(ce){Ia(ce),ce.qSkipRipple=!0}return dc(()=>{O(!0)}),Object.assign(r,{click:ce=>{_.value===!0&&R(ce)}}),()=>{let ce=[];t.icon!==void 0&&ce.push(Fe(ad,{name:t.icon,left:t.stack!==!0&&Q.value===!0,role:"img"})),Q.value===!0&&ce.push(Fe("span",{class:"block"},[t.label])),ce=wl(e.default,ce),t.iconRight!==void 0&&t.round===!1&&ce.push(Fe(ad,{name:t.iconRight,right:t.stack!==!0&&Q.value===!0,role:"img"}));const qe=[Fe("span",{class:"q-focus-helper",ref:E})];return t.loading===!0&&t.percentage!==void 0&&qe.push(Fe("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[Fe("span",{class:"q-btn__progress-indicator fit block",style:G.value})])),qe.push(Fe("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+a.value},ce)),t.loading!==null&&qe.push(Fe(XN,{name:"q-transition--fade"},()=>t.loading===!0?[Fe("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Fe(gR)])]:null)),HT(Fe(d.value,oe.value,qe),[[m9,j.value,void 0,z.value]])}}});let k9=1,N9=document.body;function V9(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${k9++}`:t,Uf.globalNodes!==void 0){const r=Uf.globalNodes.class;r!==void 0&&(n.className=r)}return N9.appendChild(n),n}function x6(t){t.remove()}let L9=0;const Ef={},If={},Vr={},wR={},M9=/^\s*$/,ER=[],F9=[void 0,null,!0,!1,""],my=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],U9=["top-left","top-right","bottom-left","bottom-right"],El={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function IR(t,e,n){var h;if(!t)return ll("parameter required");let r;const i={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(i,Ef),Gl(t)===!1&&(i.type&&Object.assign(i,El[i.type]),t={message:t}),Object.assign(i,El[t.type||i.type],t),typeof i.icon=="function"&&(i.icon=i.icon(e)),i.spinner?(i.spinner===!0&&(i.spinner=gR),i.spinner=Wo(i.spinner)):i.spinner=!1,i.meta={hasMedia:!!(i.spinner!==!1||i.icon||i.avatar),hasText:fT(i.message)||fT(i.caption)},i.position){if(my.includes(i.position)===!1)return ll("wrong position",t)}else i.position="bottom";if(F9.includes(i.timeout)===!0)i.timeout=5e3;else{const d=Number(i.timeout);if(isNaN(d)||d<0)return ll("wrong timeout",t);i.timeout=Number.isFinite(d)?d:0}i.timeout===0?i.progress=!1:i.progress===!0&&(i.meta.progressClass="q-notification__progress"+(i.progressClass?` ${i.progressClass}`:""),i.meta.progressStyle={animationDuration:`${i.timeout+1e3}ms`});const s=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(Ef.actions)===!0?Ef.actions:[]).concat(Array.isArray((h=El[t.type])==null?void 0:h.actions)===!0?El[t.type].actions:[]),{closeBtn:a}=i;if(a&&s.push({label:typeof a=="string"?a:e.lang.label.close}),i.actions=s.map(({handler:d,noDismiss:p,..._})=>({flat:!0,..._,onClick:typeof d=="function"?()=>{d(),p!==!0&&l()}:()=>{l()}})),i.multiLine===void 0&&(i.multiLine=i.actions.length>1),Object.assign(i.meta,{class:`q-notification row items-stretch q-notification--${i.multiLine===!0?"multi-line":"standard"}`+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:"")+(i.classes!==void 0?` ${i.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(i.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(i.multiLine===!0?"":" col"),leftClass:i.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...i.attrs}}),i.group===!1?(i.group=void 0,i.meta.group=void 0):((i.group===void 0||i.group===!0)&&(i.group=[i.message,i.caption,i.multiline].concat(i.actions.map(d=>`${d.label}*${d.icon}`)).join("|")),i.meta.group=i.group+"|"+i.position),i.actions.length===0?i.actions=void 0:i.meta.actionsClass="q-notification__actions row items-center "+(i.multiLine===!0?"justify-end":"col-auto")+(i.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),i.meta.uid=n.notif.meta.uid;const d=Vr[i.position].value.indexOf(n.notif);Vr[i.position].value[d]=i}else{const d=If[i.meta.group];if(d===void 0){if(i.meta.uid=L9++,i.meta.badge=1,["left","right","center"].indexOf(i.position)!==-1)Vr[i.position].value.splice(Math.floor(Vr[i.position].value.length/2),0,i);else{const p=i.position.indexOf("top")!==-1?"unshift":"push";Vr[i.position].value[p](i)}i.group!==void 0&&(If[i.meta.group]=i)}else{if(d.meta.timer&&(clearTimeout(d.meta.timer),d.meta.timer=void 0),i.badgePosition!==void 0){if(U9.includes(i.badgePosition)===!1)return ll("wrong badgePosition",t)}else i.badgePosition=`top-${i.position.indexOf("left")!==-1?"right":"left"}`;i.meta.uid=d.meta.uid,i.meta.badge=d.meta.badge+1,i.meta.badgeClass=`q-notification__badge q-notification__badge--${i.badgePosition}`+(i.badgeColor!==void 0?` bg-${i.badgeColor}`:"")+(i.badgeTextColor!==void 0?` text-${i.badgeTextColor}`:"")+(i.badgeClass?` ${i.badgeClass}`:"");const p=Vr[i.position].value.indexOf(d);Vr[i.position].value[p]=If[i.meta.group]=i}}const l=()=>{B9(i),r=void 0};if(i.timeout>0&&(i.meta.timer=setTimeout(()=>{i.meta.timer=void 0,l()},i.timeout+1e3)),i.group!==void 0)return d=>{d!==void 0?ll("trying to update a grouped one which is forbidden",t):l()};if(r={dismiss:l,config:t,notif:i},n!==void 0){Object.assign(n,r);return}return d=>{if(r!==void 0)if(d===void 0)r.dismiss();else{const p=Object.assign({},r.config,d,{group:!1,position:i.position});IR(p,e,r)}}}function B9(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Vr[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete If[t.meta.group];const n=ER[""+t.meta.uid];if(n){const{width:r,height:i}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=r,n.style.height=i}Vr[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function fT(t){return t!=null&&M9.test(t)!==!0}function ll(t,e){return console.error(`Notify: ${t}`,e),!1}function q9(){return gc({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Fe("div",{class:"q-notifications"},my.map(t=>Fe(yV,{key:t,class:wR[t],tag:"div",name:`q-notification--${t}`},()=>Vr[t].value.map(e=>{const n=e.meta,r=[];if(n.hasMedia===!0&&(e.spinner!==!1?r.push(Fe(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(Fe(ad,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(Fe(h9,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>Fe("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let s;const a={class:"q-notification__message col"};if(e.html===!0)a.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const l=[e.message];s=e.caption?[Fe("div",l),Fe("div",{class:"q-notification__caption"},[e.caption])]:l}r.push(Fe("div",a,s))}const i=[Fe("div",{class:n.contentClass},r)];return e.progress===!0&&i.push(Fe("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&i.push(Fe("div",{class:n.actionsClass},e.actions.map(s=>Fe(O9,s)))),n.badge>1&&i.push(Fe("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),Fe("div",{ref:s=>{ER[""+n.uid]=s},key:n.uid,class:n.class,...n.attrs},[Fe("div",{class:n.wrapperClass},i)])}))))}})}const $9={setDefaults(t){Gl(t)===!0&&Object.assign(Ef,t)},registerType(t,e){Gl(e)===!0&&(El[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>IR(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){my.forEach(r=>{Vr[r]=Do([]);const i=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",s=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",a=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${s}`;wR[r]=`q-notifications__list q-notifications__list--${i} fixed column no-wrap ${a}`});const n=V9("q-notify");ZV(q9(),e).mount(n)}}},j9={config:{},plugins:{Notify:$9}};var z9=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},Km;typeof window!="undefined"&&(typeof Promise!="undefined"?Km=new Promise(function(t){return window.addEventListener("load",t)}):Km={then:function(t){return window.addEventListener("load",t)}});function K9(t,e){e===void 0&&(e={});var n=e.registrationOptions;n===void 0&&(n={}),delete e.registrationOptions;var r=function(i){for(var s=[],a=arguments.length-1;a-- >0;)s[a]=arguments[a+1];e&&e[i]&&e[i].apply(e,s)};"serviceWorker"in navigator&&Km.then(function(){z9()?(G9(t,r,n),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return cc(r,i)})):(TR(t,r,n),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return cc(r,i)}))})}function cc(t,e){navigator.onLine||t("offline"),t("error",e)}function TR(t,e,n){navigator.serviceWorker.register(t,n).then(function(r){if(e("registered",r),r.waiting){e("updated",r);return}r.onupdatefound=function(){e("updatefound",r);var i=r.installing;i.onstatechange=function(){i.state==="installed"&&(navigator.serviceWorker.controller?e("updated",r):e("cached",r))}}}).catch(function(r){return cc(e,r)})}function G9(t,e,n){fetch(t).then(function(r){r.status===404?(e("error",new Error("Service worker not found at "+t)),dT()):r.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),dT()):TR(t,e,n)}).catch(function(r){return cc(e,r)})}function dT(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}).catch(function(t){return cc(emit,t)})}K9("/kbalance_quasar_pwa/sw.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});const W9="/kbalance_quasar_pwa/";async function H9({app:t,router:e,store:n},r){let i=!1;const s=h=>{try{return e.resolve(h).href}catch{}return Object(h)===h?null:h},a=h=>{if(i=!0,typeof h=="string"&&/^https?:\/\//.test(h)){window.location.href=h;return}const d=s(h);d!==null&&(window.location.href=d,window.location.reload())},l=window.location.href.replace(window.location.origin,"");for(let h=0;i===!1&&h<r.length;h++)try{await r[h]({app:t,router:e,store:n,ssrContext:null,redirect:a,urlPath:l,publicPath:W9})}catch(d){if(d&&d.url){a(d.url);return}console.error("[Quasar] boot error:",d);return}i!==!0&&(t.use(e),t.mount("#q-app"))}t9(L0,j9).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",r=>r.map(i=>{if(i.status==="rejected"){console.error("[Quasar] boot error:",i.reason);return}return i.value.default})]:["all",r=>r.map(i=>i.default)];return Promise[e]([qn(()=>import("./apexcharts-DWTVUw9v.js"),__vite__mapDeps([49,41]))]).then(r=>{const i=n(r).filter(s=>typeof s=="function");H9(t,i)})});export{w6 as $,h6 as A,HT as B,sm as C,qV as D,Ia as E,Gk as F,Kk as G,E6 as H,A0 as I,MN as J,O9 as K,QS as L,v6 as M,e6 as N,t6 as O,So as P,ad as Q,m9 as R,ok as S,er as T,Y9 as U,Ym as V,ol as W,kg as X,n6 as Y,s_ as Z,hn as _,Ue as a,I6 as a0,MV as a1,X9 as a2,Pa as a3,p6 as a4,Gl as a5,NV as a6,u_ as a7,Hk as a8,xk as a9,P6 as aA,b9 as aB,XN as aC,b6 as aD,r6 as aE,R6 as aF,c6 as aG,Ng as aH,Z9 as aI,QV as aJ,o6 as aK,w9 as aL,A6 as aM,Q9 as aN,V9 as aO,x6 as aP,T6 as aQ,p9 as aR,y9 as aS,v9 as aT,gR as aU,S6 as aV,J9 as aW,rm as aX,YV as aY,py as aa,gy as ab,r9 as ac,mg as ad,im as ae,Qk as af,c_ as ag,F0 as ah,d6 as ai,i6 as aj,vd as ak,UI as al,kV as am,LV as an,ti as ao,a6 as ap,VV as aq,s6 as ar,at as as,WN as at,Gt as au,Jm as av,M4 as aw,FN as ax,C9 as ay,C6 as az,y6 as b,gc as c,n9 as d,f6 as e,l6 as f,Us as g,Fe as h,Mr as i,ko as j,dc as k,u6 as l,Oo as m,Kl as n,l_ as o,sf as p,Go as q,Do as r,o0 as s,wl as t,tN as u,Nf as v,ja as w,Of as x,Bk as y,Kn as z};
