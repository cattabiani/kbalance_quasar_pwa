/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Mm(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const It={},Fa=[],xr=()=>{},Fk=()=>!1,td=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Fm=n=>n.startsWith("onUpdate:"),Wt=Object.assign,Um=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Uk=Object.prototype.hasOwnProperty,ft=(n,e)=>Uk.call(n,e),Le=Array.isArray,Ua=n=>cl(n)==="[object Map]",oI=n=>cl(n)==="[object Set]",Bk=n=>cl(n)==="[object RegExp]",Ke=n=>typeof n=="function",Mt=n=>typeof n=="string",Vi=n=>typeof n=="symbol",Pt=n=>n!==null&&typeof n=="object",aI=n=>(Pt(n)||Ke(n))&&Ke(n.then)&&Ke(n.catch),uI=Object.prototype.toString,cl=n=>uI.call(n),$k=n=>cl(n).slice(8,-1),cI=n=>cl(n)==="[object Object]",Bm=n=>Mt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,vc=Mm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nd=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},qk=/-(\w)/g,Tr=nd(n=>n.replace(qk,(e,t)=>t?t.toUpperCase():"")),zk=/\B([A-Z])/g,Mo=nd(n=>n.replace(zk,"-$1").toLowerCase()),rd=nd(n=>n.charAt(0).toUpperCase()+n.slice(1)),Hp=nd(n=>n?`on${rd(n)}`:""),Is=(n,e)=>!Object.is(n,e),wc=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},lI=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Kk=n=>{const e=parseFloat(n);return isNaN(e)?n:e},jk=n=>{const e=Mt(n)?Number(n):NaN;return isNaN(e)?n:e};let tw;const id=()=>tw||(tw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function $m(n){if(Le(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Mt(r)?Qk(r):$m(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Mt(n)||Pt(n))return n}const Wk=/;(?![^(]*\))/g,Hk=/:([^]+)/,Gk=/\/\*[^]*?\*\//g;function Qk(n){const e={};return n.replace(Gk,"").split(Wk).forEach(t=>{if(t){const r=t.split(Hk);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function qm(n){let e="";if(Mt(n))e=n;else if(Le(n))for(let t=0;t<n.length;t++){const r=qm(n[t]);r&&(e+=r+" ")}else if(Pt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Jk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yk=Mm(Jk);function hI(n){return!!n||n===""}const fI=n=>!!(n&&n.__v_isRef===!0),Xk=n=>Mt(n)?n:n==null?"":Le(n)||Pt(n)&&(n.toString===uI||!Ke(n.toString))?fI(n)?Xk(n.value):JSON.stringify(n,dI,2):String(n),dI=(n,e)=>fI(e)?dI(n,e.value):Ua(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Gp(r,s)+" =>"]=i,t),{})}:oI(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Gp(t))}:Vi(e)?Gp(e):Pt(e)&&!Le(e)&&!cI(e)?String(e):e,Gp=(n,e="")=>{var t;return Vi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mn;class pI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mn,!e&&Mn&&(this.index=(Mn.scopes||(Mn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Mn;try{return Mn=this,e()}finally{Mn=t}}}on(){Mn=this}off(){Mn=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function gI(n){return new pI(n)}function mI(){return Mn}function Zk(n,e=!1){Mn&&Mn.cleanups.push(n)}let bt;const Qp=new WeakSet;class _I{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mn&&Mn.active&&Mn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qp.has(this)&&(Qp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vI(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nw(this),wI(this);const e=bt,t=Dr;bt=this,Dr=!0;try{return this.fn()}finally{EI(this),bt=e,Dr=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)jm(e);this.deps=this.depsTail=void 0,nw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Og(this)&&this.run()}get dirty(){return Og(this)}}let yI=0,Ec,Ic;function vI(n,e=!1){if(n.flags|=8,e){n.next=Ic,Ic=n;return}n.next=Ec,Ec=n}function zm(){yI++}function Km(){if(--yI>0)return;if(Ic){let e=Ic;for(Ic=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Ec;){let e=Ec;for(Ec=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function wI(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function EI(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),jm(r),eO(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Og(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(II(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function II(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Lc))return;n.globalVersion=Lc;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Og(n)){n.flags&=-3;return}const t=bt,r=Dr;bt=n,Dr=!0;try{wI(n);const i=n.fn(n._value);(e.version===0||Is(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{bt=t,Dr=r,EI(n),n.flags&=-3}}function jm(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)jm(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function eO(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Dr=!0;const TI=[];function Os(){TI.push(Dr),Dr=!1}function Vs(){const n=TI.pop();Dr=n===void 0?!0:n}function nw(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=bt;bt=void 0;try{e()}finally{bt=t}}}let Lc=0;class tO{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wm{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!bt||!Dr||bt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==bt)t=this.activeLink=new tO(bt,this),bt.deps?(t.prevDep=bt.depsTail,bt.depsTail.nextDep=t,bt.depsTail=t):bt.deps=bt.depsTail=t,bI(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=bt.depsTail,t.nextDep=void 0,bt.depsTail.nextDep=t,bt.depsTail=t,bt.deps===t&&(bt.deps=r)}return t}trigger(e){this.version++,Lc++,this.notify(e)}notify(e){zm();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Km()}}}function bI(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)bI(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const wf=new WeakMap,mo=Symbol(""),Vg=Symbol(""),Mc=Symbol("");function Sn(n,e,t){if(Dr&&bt){let r=wf.get(n);r||wf.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new Wm),i.map=r,i.key=t),i.track()}}function Ii(n,e,t,r,i,s){const a=wf.get(n);if(!a){Lc++;return}const c=h=>{h&&h.trigger()};if(zm(),e==="clear")a.forEach(c);else{const h=Le(n),d=h&&Bm(t);if(h&&t==="length"){const p=Number(r);a.forEach((_,v)=>{(v==="length"||v===Mc||!Vi(v)&&v>=p)&&c(_)})}else switch((t!==void 0||a.has(void 0))&&c(a.get(t)),d&&c(a.get(Mc)),e){case"add":h?d&&c(a.get("length")):(c(a.get(mo)),Ua(n)&&c(a.get(Vg)));break;case"delete":h||(c(a.get(mo)),Ua(n)&&c(a.get(Vg)));break;case"set":Ua(n)&&c(a.get(mo));break}}Km()}function nO(n,e){const t=wf.get(n);return t&&t.get(e)}function va(n){const e=at(n);return e===n?e:(Sn(e,"iterate",Mc),Ir(n)?e:e.map(Rn))}function sd(n){return Sn(n=at(n),"iterate",Mc),n}const rO={__proto__:null,[Symbol.iterator](){return Jp(this,Symbol.iterator,Rn)},concat(...n){return va(this).concat(...n.map(e=>Le(e)?va(e):e))},entries(){return Jp(this,"entries",n=>(n[1]=Rn(n[1]),n))},every(n,e){return _i(this,"every",n,e,void 0,arguments)},filter(n,e){return _i(this,"filter",n,e,t=>t.map(Rn),arguments)},find(n,e){return _i(this,"find",n,e,Rn,arguments)},findIndex(n,e){return _i(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return _i(this,"findLast",n,e,Rn,arguments)},findLastIndex(n,e){return _i(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return _i(this,"forEach",n,e,void 0,arguments)},includes(...n){return Yp(this,"includes",n)},indexOf(...n){return Yp(this,"indexOf",n)},join(n){return va(this).join(n)},lastIndexOf(...n){return Yp(this,"lastIndexOf",n)},map(n,e){return _i(this,"map",n,e,void 0,arguments)},pop(){return Qu(this,"pop")},push(...n){return Qu(this,"push",n)},reduce(n,...e){return rw(this,"reduce",n,e)},reduceRight(n,...e){return rw(this,"reduceRight",n,e)},shift(){return Qu(this,"shift")},some(n,e){return _i(this,"some",n,e,void 0,arguments)},splice(...n){return Qu(this,"splice",n)},toReversed(){return va(this).toReversed()},toSorted(n){return va(this).toSorted(n)},toSpliced(...n){return va(this).toSpliced(...n)},unshift(...n){return Qu(this,"unshift",n)},values(){return Jp(this,"values",Rn)}};function Jp(n,e,t){const r=sd(n),i=r[e]();return r!==n&&!Ir(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const iO=Array.prototype;function _i(n,e,t,r,i,s){const a=sd(n),c=a!==n&&!Ir(n),h=a[e];if(h!==iO[e]){const _=h.apply(n,s);return c?Rn(_):_}let d=t;a!==n&&(c?d=function(_,v){return t.call(this,Rn(_),v,n)}:t.length>2&&(d=function(_,v){return t.call(this,_,v,n)}));const p=h.call(a,d,r);return c&&i?i(p):p}function rw(n,e,t,r){const i=sd(n);let s=t;return i!==n&&(Ir(n)?t.length>3&&(s=function(a,c,h){return t.call(this,a,c,h,n)}):s=function(a,c,h){return t.call(this,a,Rn(c),h,n)}),i[e](s,...r)}function Yp(n,e,t){const r=at(n);Sn(r,"iterate",Mc);const i=r[e](...t);return(i===-1||i===!1)&&Qm(t[0])?(t[0]=at(t[0]),r[e](...t)):i}function Qu(n,e,t=[]){Os(),zm();const r=at(n)[e].apply(n,t);return Km(),Vs(),r}const sO=Mm("__proto__,__v_isRef,__isVue"),AI=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Vi));function oO(n){Vi(n)||(n=String(n));const e=at(this);return Sn(e,"has",n),e.hasOwnProperty(n)}class SI{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?mO:xI:s?CI:PI).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Le(e);if(!i){let h;if(a&&(h=rO[t]))return h;if(t==="hasOwnProperty")return oO}const c=Reflect.get(e,t,jt(e)?e:r);return(Vi(t)?AI.has(t):sO(t))||(i||Sn(e,"get",t),s)?c:jt(c)?a&&Bm(t)?c:c.value:Pt(c)?i?kI(c):Fo(c):c}}class RI extends SI{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const h=Io(s);if(!Ir(r)&&!Io(r)&&(s=at(s),r=at(r)),!Le(e)&&jt(s)&&!jt(r))return h?!1:(s.value=r,!0)}const a=Le(e)&&Bm(t)?Number(t)<e.length:ft(e,t),c=Reflect.set(e,t,r,jt(e)?e:i);return e===at(i)&&(a?Is(r,s)&&Ii(e,"set",t,r):Ii(e,"add",t,r)),c}deleteProperty(e,t){const r=ft(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Ii(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Vi(t)||!AI.has(t))&&Sn(e,"has",t),r}ownKeys(e){return Sn(e,"iterate",Le(e)?"length":mo),Reflect.ownKeys(e)}}class aO extends SI{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const uO=new RI,cO=new aO,lO=new RI(!0);const Ng=n=>n,Bh=n=>Reflect.getPrototypeOf(n);function hO(n,e,t){return function(...r){const i=this.__v_raw,s=at(i),a=Ua(s),c=n==="entries"||n===Symbol.iterator&&a,h=n==="keys"&&a,d=i[n](...r),p=t?Ng:e?Lg:Rn;return!e&&Sn(s,"iterate",h?Vg:mo),{next(){const{value:_,done:v}=d.next();return v?{value:_,done:v}:{value:c?[p(_[0]),p(_[1])]:p(_),done:v}},[Symbol.iterator](){return this}}}}function $h(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function fO(n,e){const t={get(i){const s=this.__v_raw,a=at(s),c=at(i);n||(Is(i,c)&&Sn(a,"get",i),Sn(a,"get",c));const{has:h}=Bh(a),d=e?Ng:n?Lg:Rn;if(h.call(a,i))return d(s.get(i));if(h.call(a,c))return d(s.get(c));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!n&&Sn(at(i),"iterate",mo),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=at(s),c=at(i);return n||(Is(i,c)&&Sn(a,"has",i),Sn(a,"has",c)),i===c?s.has(i):s.has(i)||s.has(c)},forEach(i,s){const a=this,c=a.__v_raw,h=at(c),d=e?Ng:n?Lg:Rn;return!n&&Sn(h,"iterate",mo),c.forEach((p,_)=>i.call(s,d(p),d(_),a))}};return Wt(t,n?{add:$h("add"),set:$h("set"),delete:$h("delete"),clear:$h("clear")}:{add(i){!e&&!Ir(i)&&!Io(i)&&(i=at(i));const s=at(this);return Bh(s).has.call(s,i)||(s.add(i),Ii(s,"add",i,i)),this},set(i,s){!e&&!Ir(s)&&!Io(s)&&(s=at(s));const a=at(this),{has:c,get:h}=Bh(a);let d=c.call(a,i);d||(i=at(i),d=c.call(a,i));const p=h.call(a,i);return a.set(i,s),d?Is(s,p)&&Ii(a,"set",i,s):Ii(a,"add",i,s),this},delete(i){const s=at(this),{has:a,get:c}=Bh(s);let h=a.call(s,i);h||(i=at(i),h=a.call(s,i)),c&&c.call(s,i);const d=s.delete(i);return h&&Ii(s,"delete",i,void 0),d},clear(){const i=at(this),s=i.size!==0,a=i.clear();return s&&Ii(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=hO(i,n,e)}),t}function Hm(n,e){const t=fO(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(ft(t,i)&&i in r?t:r,i,s)}const dO={get:Hm(!1,!1)},pO={get:Hm(!1,!0)},gO={get:Hm(!0,!1)};const PI=new WeakMap,CI=new WeakMap,xI=new WeakMap,mO=new WeakMap;function _O(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yO(n){return n.__v_skip||!Object.isExtensible(n)?0:_O($k(n))}function Fo(n){return Io(n)?n:Gm(n,!1,uO,dO,PI)}function DI(n){return Gm(n,!1,lO,pO,CI)}function kI(n){return Gm(n,!0,cO,gO,xI)}function Gm(n,e,t,r,i){if(!Pt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const a=yO(n);if(a===0)return n;const c=new Proxy(n,a===2?r:t);return i.set(n,c),c}function Ts(n){return Io(n)?Ts(n.__v_raw):!!(n&&n.__v_isReactive)}function Io(n){return!!(n&&n.__v_isReadonly)}function Ir(n){return!!(n&&n.__v_isShallow)}function Qm(n){return n?!!n.__v_raw:!1}function at(n){const e=n&&n.__v_raw;return e?at(e):n}function Uo(n){return!ft(n,"__v_skip")&&Object.isExtensible(n)&&lI(n,"__v_skip",!0),n}const Rn=n=>Pt(n)?Fo(n):n,Lg=n=>Pt(n)?kI(n):n;function jt(n){return n?n.__v_isRef===!0:!1}function To(n){return OI(n,!1)}function vO(n){return OI(n,!0)}function OI(n,e){return jt(n)?n:new wO(n,e)}class wO{constructor(e,t){this.dep=new Wm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:at(e),this._value=t?e:Rn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Ir(e)||Io(e);e=r?e:at(e),Is(e,t)&&(this._rawValue=e,this._value=r?e:Rn(e),this.dep.trigger())}}function _o(n){return jt(n)?n.value:n}const EO={get:(n,e,t)=>e==="__v_raw"?n:_o(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return jt(i)&&!jt(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function VI(n){return Ts(n)?n:new Proxy(n,EO)}function IO(n){const e=Le(n)?new Array(n.length):{};for(const t in n)e[t]=bO(n,t);return e}class TO{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return nO(at(this._object),this._key)}}function bO(n,e,t){const r=n[e];return jt(r)?r:new TO(n,e,t)}class AO{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Wm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Lc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return vI(this,!0),!0}get value(){const e=this.dep.track();return II(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function SO(n,e,t=!1){let r,i;return Ke(n)?r=n:(r=n.get,i=n.set),new AO(r,i,t)}const qh={},Ef=new WeakMap;let uo;function RO(n,e=!1,t=uo){if(t){let r=Ef.get(t);r||Ef.set(t,r=[]),r.push(n)}}function PO(n,e,t=It){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:c,call:h}=t,d=W=>i?W:Ir(W)||i===!1||i===0?Ti(W,1):Ti(W);let p,_,v,I,O=!1,M=!1;if(jt(n)?(_=()=>n.value,O=Ir(n)):Ts(n)?(_=()=>d(n),O=!0):Le(n)?(M=!0,O=n.some(W=>Ts(W)||Ir(W)),_=()=>n.map(W=>{if(jt(W))return W.value;if(Ts(W))return d(W);if(Ke(W))return h?h(W,2):W()})):Ke(n)?e?_=h?()=>h(n,2):n:_=()=>{if(v){Os();try{v()}finally{Vs()}}const W=uo;uo=p;try{return h?h(n,3,[I]):n(I)}finally{uo=W}}:_=xr,e&&i){const W=_,Y=i===!0?1/0:i;_=()=>Ti(W(),Y)}const F=mI(),Q=()=>{p.stop(),F&&Um(F.effects,p)};if(s&&e){const W=e;e=(...Y)=>{W(...Y),Q()}}let z=M?new Array(n.length).fill(qh):qh;const q=W=>{if(!(!(p.flags&1)||!p.dirty&&!W))if(e){const Y=p.run();if(i||O||(M?Y.some((re,P)=>Is(re,z[P])):Is(Y,z))){v&&v();const re=uo;uo=p;try{const P=[Y,z===qh?void 0:M&&z[0]===qh?[]:z,I];h?h(e,3,P):e(...P),z=Y}finally{uo=re}}}else p.run()};return c&&c(q),p=new _I(_),p.scheduler=a?()=>a(q,!1):q,I=W=>RO(W,!1,p),v=p.onStop=()=>{const W=Ef.get(p);if(W){if(h)h(W,4);else for(const Y of W)Y();Ef.delete(p)}},e?r?q(!0):z=p.run():a?a(q.bind(null,!0),!0):p.run(),Q.pause=p.pause.bind(p),Q.resume=p.resume.bind(p),Q.stop=Q,Q}function Ti(n,e=1/0,t){if(e<=0||!Pt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,jt(n))Ti(n.value,e,t);else if(Le(n))for(let r=0;r<n.length;r++)Ti(n[r],e,t);else if(oI(n)||Ua(n))n.forEach(r=>{Ti(r,e,t)});else if(cI(n)){for(const r in n)Ti(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Ti(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ll(n,e,t,r){try{return r?n(...r):n()}catch(i){od(i,e,t)}}function Or(n,e,t,r){if(Ke(n)){const i=ll(n,e,t,r);return i&&aI(i)&&i.catch(s=>{od(s,e,t)}),i}if(Le(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Or(n[s],e,t,r));return i}}function od(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||It;if(e){let c=e.parent;const h=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;c;){const p=c.ec;if(p){for(let _=0;_<p.length;_++)if(p[_](n,h,d)===!1)return}c=c.parent}if(s){Os(),ll(s,null,10,[n,h,d]),Vs();return}}CO(n,t,i,r,a)}function CO(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Fn=[];let Wr=-1;const Ba=[];let ls=null,Ca=0;const NI=Promise.resolve();let If=null;function Jm(n){const e=If||NI;return n?e.then(this?n.bind(this):n):e}function xO(n){let e=Wr+1,t=Fn.length;for(;e<t;){const r=e+t>>>1,i=Fn[r],s=Fc(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function Ym(n){if(!(n.flags&1)){const e=Fc(n),t=Fn[Fn.length-1];!t||!(n.flags&2)&&e>=Fc(t)?Fn.push(n):Fn.splice(xO(e),0,n),n.flags|=1,LI()}}function LI(){If||(If=NI.then(FI))}function DO(n){Le(n)?Ba.push(...n):ls&&n.id===-1?ls.splice(Ca+1,0,n):n.flags&1||(Ba.push(n),n.flags|=1),LI()}function iw(n,e,t=Wr+1){for(;t<Fn.length;t++){const r=Fn[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Fn.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function MI(n){if(Ba.length){const e=[...new Set(Ba)].sort((t,r)=>Fc(t)-Fc(r));if(Ba.length=0,ls){ls.push(...e);return}for(ls=e,Ca=0;Ca<ls.length;Ca++){const t=ls[Ca];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}ls=null,Ca=0}}const Fc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function FI(n){const e=xr;try{for(Wr=0;Wr<Fn.length;Wr++){const t=Fn[Wr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ll(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Wr<Fn.length;Wr++){const t=Fn[Wr];t&&(t.flags&=-2)}Wr=-1,Fn.length=0,MI(),If=null,(Fn.length||Ba.length)&&FI()}}let rn=null,UI=null;function Tf(n){const e=rn;return rn=n,UI=n&&n.type.__scopeId||null,e}function kO(n,e=rn,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&gw(-1);const s=Tf(e);let a;try{a=n(...i)}finally{Tf(s),r._d&&gw(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function BI(n,e){if(rn===null)return n;const t=hd(rn),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,c,h=It]=e[i];s&&(Ke(s)&&(s={mounted:s,updated:s}),s.deep&&Ti(a),r.push({dir:s,instance:t,value:a,oldValue:void 0,arg:c,modifiers:h}))}return n}function io(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const c=i[a];s&&(c.oldValue=s[a].value);let h=c.dir[r];h&&(Os(),Or(h,t,8,[n.el,c,n,e]),Vs())}}const $I=Symbol("_vte"),qI=n=>n.__isTeleport,Tc=n=>n&&(n.disabled||n.disabled===""),OO=n=>n&&(n.defer||n.defer===""),sw=n=>typeof SVGElement!="undefined"&&n instanceof SVGElement,ow=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Mg=(n,e)=>{const t=n&&n.to;return Mt(t)?e?e(t):null:t},VO={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,a,c,h,d){const{mc:p,pc:_,pbc:v,o:{insert:I,querySelector:O,createText:M,createComment:F}}=d,Q=Tc(e.props);let{shapeFlag:z,children:q,dynamicChildren:W}=e;if(n==null){const Y=e.el=M(""),re=e.anchor=M("");I(Y,t,r),I(re,t,r);const P=(A,x)=>{z&16&&(i&&i.isCE&&(i.ce._teleportTarget=A),p(q,A,x,i,s,a,c,h))},S=()=>{const A=e.target=Mg(e.props,O),x=zI(A,e,M,I);A&&(a!=="svg"&&sw(A)?a="svg":a!=="mathml"&&ow(A)&&(a="mathml"),Q||(P(A,x),ef(e,!1)))};Q&&(P(t,re),ef(e,!0)),OO(e.props)?ln(S,s):S()}else{e.el=n.el,e.targetStart=n.targetStart;const Y=e.anchor=n.anchor,re=e.target=n.target,P=e.targetAnchor=n.targetAnchor,S=Tc(n.props),A=S?t:re,x=S?Y:P;if(a==="svg"||sw(re)?a="svg":(a==="mathml"||ow(re))&&(a="mathml"),W?(v(n.dynamicChildren,W,A,i,s,a,c),i_(n,e,!0)):h||_(n,e,A,x,i,s,a,c,!1),Q)S?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):zh(e,t,Y,d,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const N=e.target=Mg(e.props,O);N&&zh(e,N,null,d,0)}else S&&zh(e,re,P,d,1);ef(e,Q)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:c,anchor:h,targetStart:d,targetAnchor:p,target:_,props:v}=n;if(_&&(i(d),i(p)),s&&i(h),a&16){const I=s||!Tc(v);for(let O=0;O<c.length;O++){const M=c[O];r(M,e,t,I,!!M.dynamicChildren)}}},move:zh,hydrate:NO};function zh(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:a,anchor:c,shapeFlag:h,children:d,props:p}=n,_=s===2;if(_&&r(a,e,t),(!_||Tc(p))&&h&16)for(let v=0;v<d.length;v++)i(d[v],e,t,2);_&&r(c,e,t)}function NO(n,e,t,r,i,s,{o:{nextSibling:a,parentNode:c,querySelector:h,insert:d,createText:p}},_){const v=e.target=Mg(e.props,h);if(v){const I=Tc(e.props),O=v._lpa||v.firstChild;if(e.shapeFlag&16)if(I)e.anchor=_(a(n),e,c(n),t,r,i,s),e.targetStart=O,e.targetAnchor=O&&a(O);else{e.anchor=a(n);let M=O;for(;M;){if(M&&M.nodeType===8){if(M.data==="teleport start anchor")e.targetStart=M;else if(M.data==="teleport anchor"){e.targetAnchor=M,v._lpa=e.targetAnchor&&a(e.targetAnchor);break}}M=a(M)}e.targetAnchor||zI(v,e,p,d),_(O&&a(O),e,v,t,r,i,s)}ef(e,I)}return e.anchor&&a(e.anchor)}const U9=VO;function ef(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function zI(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[$I]=s,n&&(r(i,n),r(s,n)),s}const hs=Symbol("_leaveCb"),Kh=Symbol("_enterCb");function KI(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return e_(()=>{n.isMounted=!0}),hl(()=>{n.isUnmounting=!0}),n}const yr=[Function,Array],jI={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:yr,onEnter:yr,onAfterEnter:yr,onEnterCancelled:yr,onBeforeLeave:yr,onLeave:yr,onAfterLeave:yr,onLeaveCancelled:yr,onBeforeAppear:yr,onAppear:yr,onAfterAppear:yr,onAppearCancelled:yr},WI=n=>{const e=n.subTree;return e.component?WI(e.component):e},LO={name:"BaseTransition",props:jI,setup(n,{slots:e}){const t=lu(),r=KI();return()=>{const i=e.default&&Xm(e.default(),!0);if(!i||!i.length)return;const s=HI(i),a=at(n),{mode:c}=a;if(r.isLeaving)return Xp(s);const h=aw(s);if(!h)return Xp(s);let d=Uc(h,a,r,t,v=>d=v);h.type!==Pn&&Cs(h,d);const p=t.subTree,_=p&&aw(p);if(_&&_.type!==Pn&&!gs(h,_)&&WI(t).type!==Pn){const v=Uc(_,a,r,t);if(Cs(_,v),c==="out-in"&&h.type!==Pn)return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete v.afterLeave},Xp(s);c==="in-out"&&h.type!==Pn&&(v.delayLeave=(I,O,M)=>{const F=GI(r,_);F[String(_.key)]=_,I[hs]=()=>{O(),I[hs]=void 0,delete d.delayedLeave},d.delayedLeave=M})}return s}}};function HI(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Pn){e=t;break}}return e}const MO=LO;function GI(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Uc(n,e,t,r,i){const{appear:s,mode:a,persisted:c=!1,onBeforeEnter:h,onEnter:d,onAfterEnter:p,onEnterCancelled:_,onBeforeLeave:v,onLeave:I,onAfterLeave:O,onLeaveCancelled:M,onBeforeAppear:F,onAppear:Q,onAfterAppear:z,onAppearCancelled:q}=e,W=String(n.key),Y=GI(t,n),re=(A,x)=>{A&&Or(A,r,9,x)},P=(A,x)=>{const N=x[1];re(A,x),Le(A)?A.every(V=>V.length<=1)&&N():A.length<=1&&N()},S={mode:a,persisted:c,beforeEnter(A){let x=h;if(!t.isMounted)if(s)x=F||h;else return;A[hs]&&A[hs](!0);const N=Y[W];N&&gs(n,N)&&N.el[hs]&&N.el[hs](),re(x,[A])},enter(A){let x=d,N=p,V=_;if(!t.isMounted)if(s)x=Q||d,N=z||p,V=q||_;else return;let C=!1;const fe=A[Kh]=We=>{C||(C=!0,We?re(V,[A]):re(N,[A]),S.delayedLeave&&S.delayedLeave(),A[Kh]=void 0)};x?P(x,[A,fe]):fe()},leave(A,x){const N=String(n.key);if(A[Kh]&&A[Kh](!0),t.isUnmounting)return x();re(v,[A]);let V=!1;const C=A[hs]=fe=>{V||(V=!0,x(),fe?re(M,[A]):re(O,[A]),A[hs]=void 0,Y[N]===n&&delete Y[N])};Y[N]=n,I?P(I,[A,C]):C()},clone(A){const x=Uc(A,e,t,r,i);return i&&i(x),x}};return S}function Xp(n){if(ad(n))return n=xi(n),n.children=null,n}function aw(n){if(!ad(n))return qI(n.type)&&n.children?HI(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ke(t.default))return t.default()}}function Cs(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Cs(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Xm(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let a=n[s];const c=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===Qn?(a.patchFlag&128&&i++,r=r.concat(Xm(a.children,e,c))):(e||a.type!==Pn)&&r.push(c!=null?xi(a,{key:c}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Zm(n,e){return Ke(n)?(()=>Wt({name:n.name},e,{setup:n}))():n}function QI(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Fg(n,e,t,r,i=!1){if(Le(n)){n.forEach((O,M)=>Fg(O,e&&(Le(e)?e[M]:e),t,r,i));return}if(yo(r)&&!i)return;const s=r.shapeFlag&4?hd(r.component):r.el,a=i?null:s,{i:c,r:h}=n,d=e&&e.r,p=c.refs===It?c.refs={}:c.refs,_=c.setupState,v=at(_),I=_===It?()=>!1:O=>ft(v,O);if(d!=null&&d!==h&&(Mt(d)?(p[d]=null,I(d)&&(_[d]=null)):jt(d)&&(d.value=null)),Ke(h))ll(h,c,12,[a,p]);else{const O=Mt(h),M=jt(h);if(O||M){const F=()=>{if(n.f){const Q=O?I(h)?_[h]:p[h]:h.value;i?Le(Q)&&Um(Q,s):Le(Q)?Q.includes(s)||Q.push(s):O?(p[h]=[s],I(h)&&(_[h]=p[h])):(h.value=[s],n.k&&(p[n.k]=h.value))}else O?(p[h]=a,I(h)&&(_[h]=a)):M&&(h.value=a,n.k&&(p[n.k]=a))};a?(F.id=-1,ln(F,t)):F()}}}id().requestIdleCallback;id().cancelIdleCallback;const yo=n=>!!n.type.__asyncLoader,ad=n=>n.type.__isKeepAlive,FO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=lu(),r=t.ctx;if(!r.renderer)return()=>{const z=e.default&&e.default();return z&&z.length===1?z[0]:z};const i=new Map,s=new Set;let a=null;const c=t.suspense,{renderer:{p:h,m:d,um:p,o:{createElement:_}}}=r,v=_("div");r.activate=(z,q,W,Y,re)=>{const P=z.component;d(z,q,W,0,c),h(P.vnode,z,q,W,P,c,Y,z.slotScopeIds,re),ln(()=>{P.isDeactivated=!1,P.a&&wc(P.a);const S=z.props&&z.props.onVnodeMounted;S&&Er(S,P.parent,z)},c)},r.deactivate=z=>{const q=z.component;Af(q.m),Af(q.a),d(z,v,null,1,c),ln(()=>{q.da&&wc(q.da);const W=z.props&&z.props.onVnodeUnmounted;W&&Er(W,q.parent,z),q.isDeactivated=!0},c)};function I(z){Zp(z),p(z,t,c,!0)}function O(z){i.forEach((q,W)=>{const Y=Kg(q.type);Y&&!z(Y)&&M(W)})}function M(z){const q=i.get(z);q&&(!a||!gs(q,a))?I(q):a&&Zp(a),i.delete(z),s.delete(z)}$a(()=>[n.include,n.exclude],([z,q])=>{z&&O(W=>cc(z,W)),q&&O(W=>!cc(q,W))},{flush:"post",deep:!0});let F=null;const Q=()=>{F!=null&&(Sf(t.subTree.type)?ln(()=>{i.set(F,jh(t.subTree))},t.subTree.suspense):i.set(F,jh(t.subTree)))};return e_(Q),t_(Q),hl(()=>{i.forEach(z=>{const{subTree:q,suspense:W}=t,Y=jh(q);if(z.type===Y.type&&z.key===Y.key){Zp(Y);const re=Y.component.da;re&&ln(re,W);return}I(z)})}),()=>{if(F=null,!e.default)return a=null;const z=e.default(),q=z[0];if(z.length>1)return a=null,z;if(!Wa(q)||!(q.shapeFlag&4)&&!(q.shapeFlag&128))return a=null,q;let W=jh(q);if(W.type===Pn)return a=null,W;const Y=W.type,re=Kg(yo(W)?W.type.__asyncResolved||{}:Y),{include:P,exclude:S,max:A}=n;if(P&&(!re||!cc(P,re))||S&&re&&cc(S,re))return W.shapeFlag&=-257,a=W,q;const x=W.key==null?Y:W.key,N=i.get(x);return W.el&&(W=xi(W),q.shapeFlag&128&&(q.ssContent=W)),F=x,N?(W.el=N.el,W.component=N.component,W.transition&&Cs(W,W.transition),W.shapeFlag|=512,s.delete(x),s.add(x)):(s.add(x),A&&s.size>parseInt(A,10)&&M(s.values().next().value)),W.shapeFlag|=256,a=W,Sf(q.type)?q:W}}},B9=FO;function cc(n,e){return Le(n)?n.some(t=>cc(t,e)):Mt(n)?n.split(",").includes(e):Bk(n)?(n.lastIndex=0,n.test(e)):!1}function UO(n,e){JI(n,"a",e)}function BO(n,e){JI(n,"da",e)}function JI(n,e,t=fn){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(ud(e,r,t),t){let i=t.parent;for(;i&&i.parent;)ad(i.parent.vnode)&&$O(r,e,t,i),i=i.parent}}function $O(n,e,t,r){const i=ud(e,n,r,!0);YI(()=>{Um(r[e],i)},t)}function Zp(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function jh(n){return n.shapeFlag&128?n.ssContent:n}function ud(n,e,t=fn,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{Os();const c=fl(t),h=Or(e,t,n,a);return c(),Vs(),h});return r?i.unshift(s):i.push(s),s}}const Ni=n=>(e,t=fn)=>{(!$c||n==="sp")&&ud(n,(...r)=>e(...r),t)},qO=Ni("bm"),e_=Ni("m"),zO=Ni("bu"),t_=Ni("u"),hl=Ni("bum"),YI=Ni("um"),KO=Ni("sp"),jO=Ni("rtg"),WO=Ni("rtc");function HO(n,e=fn){ud("ec",n,e)}const XI="components";function GO(n,e){return JO(XI,n,!0,e)||n}const QO=Symbol.for("v-ndc");function JO(n,e,t=!0,r=!1){const i=rn||fn;if(i){const s=i.type;if(n===XI){const c=Kg(s,!1);if(c&&(c===e||c===Tr(e)||c===rd(Tr(e))))return s}const a=uw(i[n]||s[n],e)||uw(i.appContext[n],e);return!a&&r?s:a}}function uw(n,e){return n&&(n[e]||n[Tr(e)]||n[rd(Tr(e))])}function $9(n,e,t,r){let i;const s=t&&t[r],a=Le(n);if(a||Mt(n)){const c=a&&Ts(n);let h=!1;c&&(h=!Ir(n),n=sd(n)),i=new Array(n.length);for(let d=0,p=n.length;d<p;d++)i[d]=e(h?Rn(n[d]):n[d],d,void 0,s&&s[d])}else if(typeof n=="number"){i=new Array(n);for(let c=0;c<n;c++)i[c]=e(c+1,c,void 0,s&&s[c])}else if(Pt(n))if(n[Symbol.iterator])i=Array.from(n,(c,h)=>e(c,h,void 0,s&&s[h]));else{const c=Object.keys(n);i=new Array(c.length);for(let h=0,d=c.length;h<d;h++){const p=c[h];i[h]=e(n[p],p,h,s&&s[h])}}else i=[];return t&&(t[r]=i),i}function q9(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(Le(r))for(let i=0;i<r.length;i++)n[r[i].name]=r[i].fn;else r&&(n[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return n}function z9(n,e,t={},r,i){if(rn.ce||rn.parent&&yo(rn.parent)&&rn.parent.ce)return e!=="default"&&(t.name=e),Rf(),Pf(Qn,null,[Un("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),Rf();const a=s&&ZI(s(t)),c=t.key||a&&a.key,h=Pf(Qn,{key:(c&&!Vi(c)?c:`_${e}`)+(!a&&r?"_fb":"")},a||(r?r():[]),a&&n._===1?64:-2);return!i&&h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function ZI(n){return n.some(e=>Wa(e)?!(e.type===Pn||e.type===Qn&&!ZI(e.children)):!0)?n:null}const Ug=n=>n?yT(n)?hd(n):Ug(n.parent):null,bc=Wt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ug(n.parent),$root:n=>Ug(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>n_(n),$forceUpdate:n=>n.f||(n.f=()=>{Ym(n.update)}),$nextTick:n=>n.n||(n.n=Jm.bind(n.proxy)),$watch:n=>yV.bind(n)}),eg=(n,e)=>n!==It&&!n.__isScriptSetup&&ft(n,e),YO={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:a,type:c,appContext:h}=n;let d;if(e[0]!=="$"){const I=a[e];if(I!==void 0)switch(I){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(eg(r,e))return a[e]=1,r[e];if(i!==It&&ft(i,e))return a[e]=2,i[e];if((d=n.propsOptions[0])&&ft(d,e))return a[e]=3,s[e];if(t!==It&&ft(t,e))return a[e]=4,t[e];Bg&&(a[e]=0)}}const p=bc[e];let _,v;if(p)return e==="$attrs"&&Sn(n.attrs,"get",""),p(n);if((_=c.__cssModules)&&(_=_[e]))return _;if(t!==It&&ft(t,e))return a[e]=4,t[e];if(v=h.config.globalProperties,ft(v,e))return v[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return eg(i,e)?(i[e]=t,!0):r!==It&&ft(r,e)?(r[e]=t,!0):ft(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},a){let c;return!!t[a]||n!==It&&ft(n,a)||eg(e,a)||(c=s[0])&&ft(c,a)||ft(r,a)||ft(bc,a)||ft(i.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ft(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function cw(n){return Le(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Bg=!0;function XO(n){const e=n_(n),t=n.proxy,r=n.ctx;Bg=!1,e.beforeCreate&&lw(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:a,watch:c,provide:h,inject:d,created:p,beforeMount:_,mounted:v,beforeUpdate:I,updated:O,activated:M,deactivated:F,beforeDestroy:Q,beforeUnmount:z,destroyed:q,unmounted:W,render:Y,renderTracked:re,renderTriggered:P,errorCaptured:S,serverPrefetch:A,expose:x,inheritAttrs:N,components:V,directives:C,filters:fe}=e;if(d&&ZO(d,r,null),a)for(const Ce in a){const $e=a[Ce];Ke($e)&&(r[Ce]=$e.bind(t))}if(i){const Ce=i.call(t,t);Pt(Ce)&&(n.data=Fo(Ce))}if(Bg=!0,s)for(const Ce in s){const $e=s[Ce],Dn=Ke($e)?$e.bind(t,t):Ke($e.get)?$e.get.bind(t,t):xr,vn=!Ke($e)&&Ke($e.set)?$e.set.bind(t):xr,Dt=Be({get:Dn,set:vn});Object.defineProperty(r,Ce,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:St=>Dt.value=St})}if(c)for(const Ce in c)eT(c[Ce],r,t,Ce);if(h){const Ce=Ke(h)?h.call(t):h;Reflect.ownKeys(Ce).forEach($e=>{tf($e,Ce[$e])})}p&&lw(p,n,"c");function tt(Ce,$e){Le($e)?$e.forEach(Dn=>Ce(Dn.bind(t))):$e&&Ce($e.bind(t))}if(tt(qO,_),tt(e_,v),tt(zO,I),tt(t_,O),tt(UO,M),tt(BO,F),tt(HO,S),tt(WO,re),tt(jO,P),tt(hl,z),tt(YI,W),tt(KO,A),Le(x))if(x.length){const Ce=n.exposed||(n.exposed={});x.forEach($e=>{Object.defineProperty(Ce,$e,{get:()=>t[$e],set:Dn=>t[$e]=Dn})})}else n.exposed||(n.exposed={});Y&&n.render===xr&&(n.render=Y),N!=null&&(n.inheritAttrs=N),V&&(n.components=V),C&&(n.directives=C),A&&QI(n)}function ZO(n,e,t=xr){Le(n)&&(n=$g(n));for(const r in n){const i=n[r];let s;Pt(i)?"default"in i?s=kr(i.from||r,i.default,!0):s=kr(i.from||r):s=kr(i),jt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function lw(n,e,t){Or(Le(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function eT(n,e,t,r){let i=r.includes(".")?dT(t,r):()=>t[r];if(Mt(n)){const s=e[n];Ke(s)&&$a(i,s)}else if(Ke(n))$a(i,n.bind(t));else if(Pt(n))if(Le(n))n.forEach(s=>eT(s,e,t,r));else{const s=Ke(n.handler)?n.handler.bind(t):e[n.handler];Ke(s)&&$a(i,s,n)}}function n_(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,c=s.get(e);let h;return c?h=c:!i.length&&!t&&!r?h=e:(h={},i.length&&i.forEach(d=>bf(h,d,a,!0)),bf(h,e,a)),Pt(e)&&s.set(e,h),h}function bf(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&bf(n,s,t,!0),i&&i.forEach(a=>bf(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const c=eV[a]||t&&t[a];n[a]=c?c(n[a],e[a]):e[a]}return n}const eV={data:hw,props:fw,emits:fw,methods:lc,computed:lc,beforeCreate:Ln,created:Ln,beforeMount:Ln,mounted:Ln,beforeUpdate:Ln,updated:Ln,beforeDestroy:Ln,beforeUnmount:Ln,destroyed:Ln,unmounted:Ln,activated:Ln,deactivated:Ln,errorCaptured:Ln,serverPrefetch:Ln,components:lc,directives:lc,watch:nV,provide:hw,inject:tV};function hw(n,e){return e?n?function(){return Wt(Ke(n)?n.call(this,this):n,Ke(e)?e.call(this,this):e)}:e:n}function tV(n,e){return lc($g(n),$g(e))}function $g(n){if(Le(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Ln(n,e){return n?[...new Set([].concat(n,e))]:e}function lc(n,e){return n?Wt(Object.create(null),n,e):e}function fw(n,e){return n?Le(n)&&Le(e)?[...new Set([...n,...e])]:Wt(Object.create(null),cw(n),cw(e!=null?e:{})):e}function nV(n,e){if(!n)return e;if(!e)return n;const t=Wt(Object.create(null),n);for(const r in e)t[r]=Ln(n[r],e[r]);return t}function tT(){return{app:null,config:{isNativeTag:Fk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rV=0;function iV(n,e){return function(r,i=null){Ke(r)||(r=Wt({},r)),i!=null&&!Pt(i)&&(i=null);const s=tT(),a=new WeakSet,c=[];let h=!1;const d=s.app={_uid:rV++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:UV,get config(){return s.config},set config(p){},use(p,..._){return a.has(p)||(p&&Ke(p.install)?(a.add(p),p.install(d,..._)):Ke(p)&&(a.add(p),p(d,..._))),d},mixin(p){return s.mixins.includes(p)||s.mixins.push(p),d},component(p,_){return _?(s.components[p]=_,d):s.components[p]},directive(p,_){return _?(s.directives[p]=_,d):s.directives[p]},mount(p,_,v){if(!h){const I=d._ceVNode||Un(r,i);return I.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),_&&e?e(I,p):n(I,p,v),h=!0,d._container=p,p.__vue_app__=d,hd(I.component)}},onUnmount(p){c.push(p)},unmount(){h&&(Or(c,d._instance,16),n(null,d._container),delete d._container.__vue_app__)},provide(p,_){return s.provides[p]=_,d},runWithContext(p){const _=vo;vo=d;try{return p()}finally{vo=_}}};return d}}let vo=null;function tf(n,e){if(fn){let t=fn.provides;const r=fn.parent&&fn.parent.provides;r===t&&(t=fn.provides=Object.create(r)),t[n]=e}}function kr(n,e,t=!1){const r=fn||rn;if(r||vo){const i=vo?vo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Ke(e)?e.call(r&&r.proxy):e}}function sV(){return!!(fn||rn||vo)}const nT={},rT=()=>Object.create(nT),iT=n=>Object.getPrototypeOf(n)===nT;function oV(n,e,t,r=!1){const i={},s=rT();n.propsDefaults=Object.create(null),sT(n,e,i,s);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=r?i:DI(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function aV(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=n,c=at(i),[h]=n.propsOptions;let d=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=n.vnode.dynamicProps;for(let _=0;_<p.length;_++){let v=p[_];if(cd(n.emitsOptions,v))continue;const I=e[v];if(h)if(ft(s,v))I!==s[v]&&(s[v]=I,d=!0);else{const O=Tr(v);i[O]=qg(h,c,O,I,n,!1)}else I!==s[v]&&(s[v]=I,d=!0)}}}else{sT(n,e,i,s)&&(d=!0);let p;for(const _ in c)(!e||!ft(e,_)&&((p=Mo(_))===_||!ft(e,p)))&&(h?t&&(t[_]!==void 0||t[p]!==void 0)&&(i[_]=qg(h,c,_,void 0,n,!0)):delete i[_]);if(s!==c)for(const _ in s)(!e||!ft(e,_)&&!0)&&(delete s[_],d=!0)}d&&Ii(n.attrs,"set","")}function sT(n,e,t,r){const[i,s]=n.propsOptions;let a=!1,c;if(e)for(let h in e){if(vc(h))continue;const d=e[h];let p;i&&ft(i,p=Tr(h))?!s||!s.includes(p)?t[p]=d:(c||(c={}))[p]=d:cd(n.emitsOptions,h)||(!(h in r)||d!==r[h])&&(r[h]=d,a=!0)}if(s){const h=at(t),d=c||It;for(let p=0;p<s.length;p++){const _=s[p];t[_]=qg(i,h,_,d[_],n,!ft(d,_))}}return a}function qg(n,e,t,r,i,s){const a=n[t];if(a!=null){const c=ft(a,"default");if(c&&r===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&Ke(h)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const p=fl(i);r=d[t]=h.call(null,e),p()}}else r=h;i.ce&&i.ce._setProp(t,r)}a[0]&&(s&&!c?r=!1:a[1]&&(r===""||r===Mo(t))&&(r=!0))}return r}const uV=new WeakMap;function oT(n,e,t=!1){const r=t?uV:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,a={},c=[];let h=!1;if(!Ke(n)){const p=_=>{h=!0;const[v,I]=oT(_,e,!0);Wt(a,v),I&&c.push(...I)};!t&&e.mixins.length&&e.mixins.forEach(p),n.extends&&p(n.extends),n.mixins&&n.mixins.forEach(p)}if(!s&&!h)return Pt(n)&&r.set(n,Fa),Fa;if(Le(s))for(let p=0;p<s.length;p++){const _=Tr(s[p]);dw(_)&&(a[_]=It)}else if(s)for(const p in s){const _=Tr(p);if(dw(_)){const v=s[p],I=a[_]=Le(v)||Ke(v)?{type:v}:Wt({},v),O=I.type;let M=!1,F=!0;if(Le(O))for(let Q=0;Q<O.length;++Q){const z=O[Q],q=Ke(z)&&z.name;if(q==="Boolean"){M=!0;break}else q==="String"&&(F=!1)}else M=Ke(O)&&O.name==="Boolean";I[0]=M,I[1]=F,(M||ft(I,"default"))&&c.push(_)}}const d=[a,c];return Pt(n)&&r.set(n,d),d}function dw(n){return n[0]!=="$"&&!vc(n)}const aT=n=>n[0]==="_"||n==="$stable",r_=n=>Le(n)?n.map(Hr):[Hr(n)],cV=(n,e,t)=>{if(e._n)return e;const r=kO((...i)=>r_(e(...i)),t);return r._c=!1,r},uT=(n,e,t)=>{const r=n._ctx;for(const i in n){if(aT(i))continue;const s=n[i];if(Ke(s))e[i]=cV(i,s,r);else if(s!=null){const a=r_(s);e[i]=()=>a}}},cT=(n,e)=>{const t=r_(e);n.slots.default=()=>t},lT=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},lV=(n,e,t)=>{const r=n.slots=rT();if(n.vnode.shapeFlag&32){const i=e._;i?(lT(r,e,t),t&&lI(r,"_",i,!0)):uT(e,r)}else e&&cT(n,e)},hV=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,a=It;if(r.shapeFlag&32){const c=e._;c?t&&c===1?s=!1:lT(i,e,t):(s=!e.$stable,uT(e,i)),a=e}else e&&(cT(n,e),a={default:1});if(s)for(const c in i)!aT(c)&&a[c]==null&&delete i[c]},ln=AV;function fV(n){return dV(n)}function dV(n,e){const t=id();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:c,createComment:h,setText:d,setElementText:p,parentNode:_,nextSibling:v,setScopeId:I=xr,insertStaticContent:O}=n,M=(R,D,j,ie=null,J=null,ue=null,pe=void 0,le=null,ce=!!D.dynamicChildren)=>{if(R===D)return;R&&!gs(R,D)&&(ie=Z(R),St(R,J,ue,!0),R=null),D.patchFlag===-2&&(ce=!1,D.dynamicChildren=null);const{type:ae,ref:Pe,shapeFlag:ge}=D;switch(ae){case ld:F(R,D,j,ie);break;case Pn:Q(R,D,j,ie);break;case rg:R==null&&z(D,j,ie,pe);break;case Qn:V(R,D,j,ie,J,ue,pe,le,ce);break;default:ge&1?Y(R,D,j,ie,J,ue,pe,le,ce):ge&6?C(R,D,j,ie,J,ue,pe,le,ce):(ge&64||ge&128)&&ae.process(R,D,j,ie,J,ue,pe,le,ce,Ee)}Pe!=null&&J&&Fg(Pe,R&&R.ref,ue,D||R,!D)},F=(R,D,j,ie)=>{if(R==null)r(D.el=c(D.children),j,ie);else{const J=D.el=R.el;D.children!==R.children&&d(J,D.children)}},Q=(R,D,j,ie)=>{R==null?r(D.el=h(D.children||""),j,ie):D.el=R.el},z=(R,D,j,ie)=>{[R.el,R.anchor]=O(R.children,D,j,ie,R.el,R.anchor)},q=({el:R,anchor:D},j,ie)=>{let J;for(;R&&R!==D;)J=v(R),r(R,j,ie),R=J;r(D,j,ie)},W=({el:R,anchor:D})=>{let j;for(;R&&R!==D;)j=v(R),i(R),R=j;i(D)},Y=(R,D,j,ie,J,ue,pe,le,ce)=>{D.type==="svg"?pe="svg":D.type==="math"&&(pe="mathml"),R==null?re(D,j,ie,J,ue,pe,le,ce):A(R,D,J,ue,pe,le,ce)},re=(R,D,j,ie,J,ue,pe,le)=>{let ce,ae;const{props:Pe,shapeFlag:ge,transition:Ie,dirs:ke}=R;if(ce=R.el=a(R.type,ue,Pe&&Pe.is,Pe),ge&8?p(ce,R.children):ge&16&&S(R.children,ce,null,ie,J,tg(R,ue),pe,le),ke&&io(R,null,ie,"created"),P(ce,R,R.scopeId,pe,ie),Pe){for(const Me in Pe)Me!=="value"&&!vc(Me)&&s(ce,Me,null,Pe[Me],ue,ie);"value"in Pe&&s(ce,"value",null,Pe.value,ue),(ae=Pe.onVnodeBeforeMount)&&Er(ae,ie,R)}ke&&io(R,null,ie,"beforeMount");const Re=pV(J,Ie);Re&&Ie.beforeEnter(ce),r(ce,D,j),((ae=Pe&&Pe.onVnodeMounted)||Re||ke)&&ln(()=>{ae&&Er(ae,ie,R),Re&&Ie.enter(ce),ke&&io(R,null,ie,"mounted")},J)},P=(R,D,j,ie,J)=>{if(j&&I(R,j),ie)for(let ue=0;ue<ie.length;ue++)I(R,ie[ue]);if(J){let ue=J.subTree;if(D===ue||Sf(ue.type)&&(ue.ssContent===D||ue.ssFallback===D)){const pe=J.vnode;P(R,pe,pe.scopeId,pe.slotScopeIds,J.parent)}}},S=(R,D,j,ie,J,ue,pe,le,ce=0)=>{for(let ae=ce;ae<R.length;ae++){const Pe=R[ae]=le?fs(R[ae]):Hr(R[ae]);M(null,Pe,D,j,ie,J,ue,pe,le)}},A=(R,D,j,ie,J,ue,pe)=>{const le=D.el=R.el;let{patchFlag:ce,dynamicChildren:ae,dirs:Pe}=D;ce|=R.patchFlag&16;const ge=R.props||It,Ie=D.props||It;let ke;if(j&&so(j,!1),(ke=Ie.onVnodeBeforeUpdate)&&Er(ke,j,D,R),Pe&&io(D,R,j,"beforeUpdate"),j&&so(j,!0),(ge.innerHTML&&Ie.innerHTML==null||ge.textContent&&Ie.textContent==null)&&p(le,""),ae?x(R.dynamicChildren,ae,le,j,ie,tg(D,J),ue):pe||$e(R,D,le,null,j,ie,tg(D,J),ue,!1),ce>0){if(ce&16)N(le,ge,Ie,j,J);else if(ce&2&&ge.class!==Ie.class&&s(le,"class",null,Ie.class,J),ce&4&&s(le,"style",ge.style,Ie.style,J),ce&8){const Re=D.dynamicProps;for(let Me=0;Me<Re.length;Me++){const Ze=Re[Me],Gt=ge[Ze],kt=Ie[Ze];(kt!==Gt||Ze==="value")&&s(le,Ze,Gt,kt,J,j)}}ce&1&&R.children!==D.children&&p(le,D.children)}else!pe&&ae==null&&N(le,ge,Ie,j,J);((ke=Ie.onVnodeUpdated)||Pe)&&ln(()=>{ke&&Er(ke,j,D,R),Pe&&io(D,R,j,"updated")},ie)},x=(R,D,j,ie,J,ue,pe)=>{for(let le=0;le<D.length;le++){const ce=R[le],ae=D[le],Pe=ce.el&&(ce.type===Qn||!gs(ce,ae)||ce.shapeFlag&70)?_(ce.el):j;M(ce,ae,Pe,null,ie,J,ue,pe,!0)}},N=(R,D,j,ie,J)=>{if(D!==j){if(D!==It)for(const ue in D)!vc(ue)&&!(ue in j)&&s(R,ue,D[ue],null,J,ie);for(const ue in j){if(vc(ue))continue;const pe=j[ue],le=D[ue];pe!==le&&ue!=="value"&&s(R,ue,le,pe,J,ie)}"value"in j&&s(R,"value",D.value,j.value,J)}},V=(R,D,j,ie,J,ue,pe,le,ce)=>{const ae=D.el=R?R.el:c(""),Pe=D.anchor=R?R.anchor:c("");let{patchFlag:ge,dynamicChildren:Ie,slotScopeIds:ke}=D;ke&&(le=le?le.concat(ke):ke),R==null?(r(ae,j,ie),r(Pe,j,ie),S(D.children||[],j,Pe,J,ue,pe,le,ce)):ge>0&&ge&64&&Ie&&R.dynamicChildren?(x(R.dynamicChildren,Ie,j,J,ue,pe,le),(D.key!=null||J&&D===J.subTree)&&i_(R,D,!0)):$e(R,D,j,Pe,J,ue,pe,le,ce)},C=(R,D,j,ie,J,ue,pe,le,ce)=>{D.slotScopeIds=le,R==null?D.shapeFlag&512?J.ctx.activate(D,j,ie,pe,ce):fe(D,j,ie,J,ue,pe,ce):We(R,D,ce)},fe=(R,D,j,ie,J,ue,pe)=>{const le=R.component=OV(R,ie,J);if(ad(R)&&(le.ctx.renderer=Ee),VV(le,!1,pe),le.asyncDep){if(J&&J.registerDep(le,tt,pe),!R.el){const ce=le.subTree=Un(Pn);Q(null,ce,D,j)}}else tt(le,R,D,j,J,ue,pe)},We=(R,D,j)=>{const ie=D.component=R.component;if(TV(R,D,j))if(ie.asyncDep&&!ie.asyncResolved){Ce(ie,D,j);return}else ie.next=D,ie.update();else D.el=R.el,ie.vnode=D},tt=(R,D,j,ie,J,ue,pe)=>{const le=()=>{if(R.isMounted){let{next:ge,bu:Ie,u:ke,parent:Re,vnode:Me}=R;{const Ot=hT(R);if(Ot){ge&&(ge.el=Me.el,Ce(R,ge,pe)),Ot.asyncDep.then(()=>{R.isUnmounted||le()});return}}let Ze=ge,Gt;so(R,!1),ge?(ge.el=Me.el,Ce(R,ge,pe)):ge=Me,Ie&&wc(Ie),(Gt=ge.props&&ge.props.onVnodeBeforeUpdate)&&Er(Gt,Re,ge,Me),so(R,!0);const kt=ng(R),pn=R.subTree;R.subTree=kt,M(pn,kt,_(pn.el),Z(pn),R,J,ue),ge.el=kt.el,Ze===null&&bV(R,kt.el),ke&&ln(ke,J),(Gt=ge.props&&ge.props.onVnodeUpdated)&&ln(()=>Er(Gt,Re,ge,Me),J)}else{let ge;const{el:Ie,props:ke}=D,{bm:Re,m:Me,parent:Ze,root:Gt,type:kt}=R,pn=yo(D);if(so(R,!1),Re&&wc(Re),!pn&&(ge=ke&&ke.onVnodeBeforeMount)&&Er(ge,Ze,D),so(R,!0),Ie&&ut){const Ot=()=>{R.subTree=ng(R),ut(Ie,R.subTree,R,J,null)};pn&&kt.__asyncHydrate?kt.__asyncHydrate(Ie,R,Ot):Ot()}else{Gt.ce&&Gt.ce._injectChildStyle(kt);const Ot=R.subTree=ng(R);M(null,Ot,j,ie,R,J,ue),D.el=Ot.el}if(Me&&ln(Me,J),!pn&&(ge=ke&&ke.onVnodeMounted)){const Ot=D;ln(()=>Er(ge,Ze,Ot),J)}(D.shapeFlag&256||Ze&&yo(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&R.a&&ln(R.a,J),R.isMounted=!0,D=j=ie=null}};R.scope.on();const ce=R.effect=new _I(le);R.scope.off();const ae=R.update=ce.run.bind(ce),Pe=R.job=ce.runIfDirty.bind(ce);Pe.i=R,Pe.id=R.uid,ce.scheduler=()=>Ym(Pe),so(R,!0),ae()},Ce=(R,D,j)=>{D.component=R;const ie=R.vnode.props;R.vnode=D,R.next=null,aV(R,D.props,ie,j),hV(R,D.children,j),Os(),iw(R),Vs()},$e=(R,D,j,ie,J,ue,pe,le,ce=!1)=>{const ae=R&&R.children,Pe=R?R.shapeFlag:0,ge=D.children,{patchFlag:Ie,shapeFlag:ke}=D;if(Ie>0){if(Ie&128){vn(ae,ge,j,ie,J,ue,pe,le,ce);return}else if(Ie&256){Dn(ae,ge,j,ie,J,ue,pe,le,ce);return}}ke&8?(Pe&16&&Zt(ae,J,ue),ge!==ae&&p(j,ge)):Pe&16?ke&16?vn(ae,ge,j,ie,J,ue,pe,le,ce):Zt(ae,J,ue,!0):(Pe&8&&p(j,""),ke&16&&S(ge,j,ie,J,ue,pe,le,ce))},Dn=(R,D,j,ie,J,ue,pe,le,ce)=>{R=R||Fa,D=D||Fa;const ae=R.length,Pe=D.length,ge=Math.min(ae,Pe);let Ie;for(Ie=0;Ie<ge;Ie++){const ke=D[Ie]=ce?fs(D[Ie]):Hr(D[Ie]);M(R[Ie],ke,j,null,J,ue,pe,le,ce)}ae>Pe?Zt(R,J,ue,!0,!1,ge):S(D,j,ie,J,ue,pe,le,ce,ge)},vn=(R,D,j,ie,J,ue,pe,le,ce)=>{let ae=0;const Pe=D.length;let ge=R.length-1,Ie=Pe-1;for(;ae<=ge&&ae<=Ie;){const ke=R[ae],Re=D[ae]=ce?fs(D[ae]):Hr(D[ae]);if(gs(ke,Re))M(ke,Re,j,null,J,ue,pe,le,ce);else break;ae++}for(;ae<=ge&&ae<=Ie;){const ke=R[ge],Re=D[Ie]=ce?fs(D[Ie]):Hr(D[Ie]);if(gs(ke,Re))M(ke,Re,j,null,J,ue,pe,le,ce);else break;ge--,Ie--}if(ae>ge){if(ae<=Ie){const ke=Ie+1,Re=ke<Pe?D[ke].el:ie;for(;ae<=Ie;)M(null,D[ae]=ce?fs(D[ae]):Hr(D[ae]),j,Re,J,ue,pe,le,ce),ae++}}else if(ae>Ie)for(;ae<=ge;)St(R[ae],J,ue,!0),ae++;else{const ke=ae,Re=ae,Me=new Map;for(ae=Re;ae<=Ie;ae++){const $t=D[ae]=ce?fs(D[ae]):Hr(D[ae]);$t.key!=null&&Me.set($t.key,ae)}let Ze,Gt=0;const kt=Ie-Re+1;let pn=!1,Ot=0;const ar=new Array(kt);for(ae=0;ae<kt;ae++)ar[ae]=0;for(ae=ke;ae<=ge;ae++){const $t=R[ae];if(Gt>=kt){St($t,J,ue,!0);continue}let wn;if($t.key!=null)wn=Me.get($t.key);else for(Ze=Re;Ze<=Ie;Ze++)if(ar[Ze-Re]===0&&gs($t,D[Ze])){wn=Ze;break}wn===void 0?St($t,J,ue,!0):(ar[wn-Re]=ae+1,wn>=Ot?Ot=wn:pn=!0,M($t,D[wn],j,null,J,ue,pe,le,ce),Gt++)}const ti=pn?gV(ar):Fa;for(Ze=ti.length-1,ae=kt-1;ae>=0;ae--){const $t=Re+ae,wn=D[$t],qo=$t+1<Pe?D[$t+1].el:ie;ar[ae]===0?M(null,wn,j,qo,J,ue,pe,le,ce):pn&&(Ze<0||ae!==ti[Ze]?Dt(wn,j,qo,2):Ze--)}}},Dt=(R,D,j,ie,J=null)=>{const{el:ue,type:pe,transition:le,children:ce,shapeFlag:ae}=R;if(ae&6){Dt(R.component.subTree,D,j,ie);return}if(ae&128){R.suspense.move(D,j,ie);return}if(ae&64){pe.move(R,D,j,Ee);return}if(pe===Qn){r(ue,D,j);for(let ge=0;ge<ce.length;ge++)Dt(ce[ge],D,j,ie);r(R.anchor,D,j);return}if(pe===rg){q(R,D,j);return}if(ie!==2&&ae&1&&le)if(ie===0)le.beforeEnter(ue),r(ue,D,j),ln(()=>le.enter(ue),J);else{const{leave:ge,delayLeave:Ie,afterLeave:ke}=le,Re=()=>r(ue,D,j),Me=()=>{ge(ue,()=>{Re(),ke&&ke()})};Ie?Ie(ue,Re,Me):Me()}else r(ue,D,j)},St=(R,D,j,ie=!1,J=!1)=>{const{type:ue,props:pe,ref:le,children:ce,dynamicChildren:ae,shapeFlag:Pe,patchFlag:ge,dirs:Ie,cacheIndex:ke}=R;if(ge===-2&&(J=!1),le!=null&&Fg(le,null,j,R,!0),ke!=null&&(D.renderCache[ke]=void 0),Pe&256){D.ctx.deactivate(R);return}const Re=Pe&1&&Ie,Me=!yo(R);let Ze;if(Me&&(Ze=pe&&pe.onVnodeBeforeUnmount)&&Er(Ze,D,R),Pe&6)dn(R.component,j,ie);else{if(Pe&128){R.suspense.unmount(j,ie);return}Re&&io(R,null,D,"beforeUnmount"),Pe&64?R.type.remove(R,D,j,Ee,ie):ae&&!ae.hasOnce&&(ue!==Qn||ge>0&&ge&64)?Zt(ae,D,j,!1,!0):(ue===Qn&&ge&384||!J&&Pe&16)&&Zt(ce,D,j),ie&&Rt(R)}(Me&&(Ze=pe&&pe.onVnodeUnmounted)||Re)&&ln(()=>{Ze&&Er(Ze,D,R),Re&&io(R,null,D,"unmounted")},j)},Rt=R=>{const{type:D,el:j,anchor:ie,transition:J}=R;if(D===Qn){Lr(j,ie);return}if(D===rg){W(R);return}const ue=()=>{i(j),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(R.shapeFlag&1&&J&&!J.persisted){const{leave:pe,delayLeave:le}=J,ce=()=>pe(j,ue);le?le(R.el,ue,ce):ce()}else ue()},Lr=(R,D)=>{let j;for(;R!==D;)j=v(R),i(R),R=j;i(D)},dn=(R,D,j)=>{const{bum:ie,scope:J,job:ue,subTree:pe,um:le,m:ce,a:ae}=R;Af(ce),Af(ae),ie&&wc(ie),J.stop(),ue&&(ue.flags|=8,St(pe,R,D,j)),le&&ln(le,D),ln(()=>{R.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},Zt=(R,D,j,ie=!1,J=!1,ue=0)=>{for(let pe=ue;pe<R.length;pe++)St(R[pe],D,j,ie,J)},Z=R=>{if(R.shapeFlag&6)return Z(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const D=v(R.anchor||R.el),j=D&&D[$I];return j?v(j):D};let _e=!1;const de=(R,D,j)=>{R==null?D._vnode&&St(D._vnode,null,null,!0):M(D._vnode||null,R,D,null,null,null,j),D._vnode=R,_e||(_e=!0,iw(),MI(),_e=!1)},Ee={p:M,um:St,m:Dt,r:Rt,mt:fe,mc:S,pc:$e,pbc:x,n:Z,o:n};let Qe,ut;return e&&([Qe,ut]=e(Ee)),{render:de,hydrate:Qe,createApp:iV(de,Qe)}}function tg({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function so({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function pV(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function i_(n,e,t=!1){const r=n.children,i=e.children;if(Le(r)&&Le(i))for(let s=0;s<r.length;s++){const a=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=fs(i[s]),c.el=a.el),!t&&c.patchFlag!==-2&&i_(a,c)),c.type===ld&&(c.el=a.el)}}function gV(n){const e=n.slice(),t=[0];let r,i,s,a,c;const h=n.length;for(r=0;r<h;r++){const d=n[r];if(d!==0){if(i=t[t.length-1],n[i]<d){e[r]=i,t.push(r);continue}for(s=0,a=t.length-1;s<a;)c=s+a>>1,n[t[c]]<d?s=c+1:a=c;d<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function hT(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:hT(e)}function Af(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const mV=Symbol.for("v-scx"),_V=()=>kr(mV);function $a(n,e,t){return fT(n,e,t)}function fT(n,e,t=It){const{immediate:r,deep:i,flush:s,once:a}=t,c=Wt({},t),h=e&&r||!e&&s!=="post";let d;if($c){if(s==="sync"){const I=_V();d=I.__watcherHandles||(I.__watcherHandles=[])}else if(!h){const I=()=>{};return I.stop=xr,I.resume=xr,I.pause=xr,I}}const p=fn;c.call=(I,O,M)=>Or(I,p,O,M);let _=!1;s==="post"?c.scheduler=I=>{ln(I,p&&p.suspense)}:s!=="sync"&&(_=!0,c.scheduler=(I,O)=>{O?I():Ym(I)}),c.augmentJob=I=>{e&&(I.flags|=4),_&&(I.flags|=2,p&&(I.id=p.uid,I.i=p))};const v=PO(n,e,c);return $c&&(d?d.push(v):h&&v()),v}function yV(n,e,t){const r=this.proxy,i=Mt(n)?n.includes(".")?dT(r,n):()=>r[n]:n.bind(r,r);let s;Ke(e)?s=e:(s=e.handler,t=e);const a=fl(this),c=fT(i,s.bind(r),t);return a(),c}function dT(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const vV=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Tr(e)}Modifiers`]||n[`${Mo(e)}Modifiers`];function wV(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||It;let i=t;const s=e.startsWith("update:"),a=s&&vV(r,e.slice(7));a&&(a.trim&&(i=t.map(p=>Mt(p)?p.trim():p)),a.number&&(i=t.map(Kk)));let c,h=r[c=Hp(e)]||r[c=Hp(Tr(e))];!h&&s&&(h=r[c=Hp(Mo(e))]),h&&Or(h,n,6,i);const d=r[c+"Once"];if(d){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,Or(d,n,6,i)}}function pT(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let a={},c=!1;if(!Ke(n)){const h=d=>{const p=pT(d,e,!0);p&&(c=!0,Wt(a,p))};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}return!s&&!c?(Pt(n)&&r.set(n,null),null):(Le(s)?s.forEach(h=>a[h]=null):Wt(a,s),Pt(n)&&r.set(n,a),a)}function cd(n,e){return!n||!td(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(n,e[0].toLowerCase()+e.slice(1))||ft(n,Mo(e))||ft(n,e))}function ng(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:c,emit:h,render:d,renderCache:p,props:_,data:v,setupState:I,ctx:O,inheritAttrs:M}=n,F=Tf(n);let Q,z;try{if(t.shapeFlag&4){const W=i||r,Y=W;Q=Hr(d.call(Y,W,p,_,I,v,O)),z=c}else{const W=e;Q=Hr(W.length>1?W(_,{attrs:c,slots:a,emit:h}):W(_,null)),z=e.props?c:EV(c)}}catch(W){Ac.length=0,od(W,n,1),Q=Un(Pn)}let q=Q;if(z&&M!==!1){const W=Object.keys(z),{shapeFlag:Y}=q;W.length&&Y&7&&(s&&W.some(Fm)&&(z=IV(z,s)),q=xi(q,z,!1,!0))}return t.dirs&&(q=xi(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(t.dirs):t.dirs),t.transition&&Cs(q,t.transition),Q=q,Tf(F),Q}const EV=n=>{let e;for(const t in n)(t==="class"||t==="style"||td(t))&&((e||(e={}))[t]=n[t]);return e},IV=(n,e)=>{const t={};for(const r in n)(!Fm(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function TV(n,e,t){const{props:r,children:i,component:s}=n,{props:a,children:c,patchFlag:h}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&h>=0){if(h&1024)return!0;if(h&16)return r?pw(r,a,d):!!a;if(h&8){const p=e.dynamicProps;for(let _=0;_<p.length;_++){const v=p[_];if(a[v]!==r[v]&&!cd(d,v))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?pw(r,a,d):!0:!!a;return!1}function pw(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!cd(t,s))return!0}return!1}function bV({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Sf=n=>n.__isSuspense;function AV(n,e){e&&e.pendingBranch?Le(n)?e.effects.push(...n):e.effects.push(n):DO(n)}const Qn=Symbol.for("v-fgt"),ld=Symbol.for("v-txt"),Pn=Symbol.for("v-cmt"),rg=Symbol.for("v-stc"),Ac=[];let nr=null;function Rf(n=!1){Ac.push(nr=n?null:[])}function SV(){Ac.pop(),nr=Ac[Ac.length-1]||null}let Bc=1;function gw(n){Bc+=n,n<0&&nr&&(nr.hasOnce=!0)}function gT(n){return n.dynamicChildren=Bc>0?nr||Fa:null,SV(),Bc>0&&nr&&nr.push(n),n}function K9(n,e,t,r,i,s){return gT(_T(n,e,t,r,i,s,!0))}function Pf(n,e,t,r,i){return gT(Un(n,e,t,r,i,!0))}function Wa(n){return n?n.__v_isVNode===!0:!1}function gs(n,e){return n.type===e.type&&n.key===e.key}const mT=({key:n})=>n!=null?n:null,nf=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Mt(n)||jt(n)||Ke(n)?{i:rn,r:n,k:e,f:!!t}:n:null);function _T(n,e=null,t=null,r=0,i=null,s=n===Qn?0:1,a=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&mT(e),ref:e&&nf(e),scopeId:UI,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rn};return c?(s_(h,t),s&128&&n.normalize(h)):t&&(h.shapeFlag|=Mt(t)?8:16),Bc>0&&!a&&nr&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&nr.push(h),h}const Un=RV;function RV(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===QO)&&(n=Pn),Wa(n)){const c=xi(n,e,!0);return t&&s_(c,t),Bc>0&&!s&&nr&&(c.shapeFlag&6?nr[nr.indexOf(n)]=c:nr.push(c)),c.patchFlag=-2,c}if(FV(n)&&(n=n.__vccOpts),e){e=PV(e);let{class:c,style:h}=e;c&&!Mt(c)&&(e.class=qm(c)),Pt(h)&&(Qm(h)&&!Le(h)&&(h=Wt({},h)),e.style=$m(h))}const a=Mt(n)?1:Sf(n)?128:qI(n)?64:Pt(n)?4:Ke(n)?2:0;return _T(n,e,t,r,i,a,s,!0)}function PV(n){return n?Qm(n)||iT(n)?Wt({},n):n:null}function xi(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:c,transition:h}=n,d=e?xV(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:n.type,props:d,key:d&&mT(d),ref:e&&e.ref?t&&s?Le(s)?s.concat(nf(e)):[s,nf(e)]:nf(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Qn?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:h,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&xi(n.ssContent),ssFallback:n.ssFallback&&xi(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return h&&r&&Cs(p,h.clone(p)),p}function CV(n=" ",e=0){return Un(ld,null,n,e)}function j9(n="",e=!1){return e?(Rf(),Pf(Pn,null,n)):Un(Pn,null,n)}function Hr(n){return n==null||typeof n=="boolean"?Un(Pn):Le(n)?Un(Qn,null,n.slice()):Wa(n)?fs(n):Un(ld,null,String(n))}function fs(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:xi(n)}function s_(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Le(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),s_(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!iT(e)?e._ctx=rn:i===3&&rn&&(rn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:rn},t=32):(e=String(e),r&64?(t=16,e=[CV(e)]):t=8);n.children=e,n.shapeFlag|=t}function xV(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=qm([e.class,r.class]));else if(i==="style")e.style=$m([e.style,r.style]);else if(td(i)){const s=e[i],a=r[i];a&&s!==a&&!(Le(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Er(n,e,t,r=null){Or(n,e,7,[t,r])}const DV=tT();let kV=0;function OV(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||DV,s={uid:kV++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oT(r,i),emitsOptions:pT(r,i),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=wV.bind(null,s),n.ce&&n.ce(s),s}let fn=null;const lu=()=>fn||rn;let Cf,zg;{const n=id(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};Cf=e("__VUE_INSTANCE_SETTERS__",t=>fn=t),zg=e("__VUE_SSR_SETTERS__",t=>$c=t)}const fl=n=>{const e=fn;return Cf(n),n.scope.on(),()=>{n.scope.off(),Cf(e)}},mw=()=>{fn&&fn.scope.off(),Cf(null)};function yT(n){return n.vnode.shapeFlag&4}let $c=!1;function VV(n,e=!1,t=!1){e&&zg(e);const{props:r,children:i}=n.vnode,s=yT(n);oV(n,r,s,e),lV(n,i,t);const a=s?NV(n,e):void 0;return e&&zg(!1),a}function NV(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,YO);const{setup:r}=t;if(r){Os();const i=n.setupContext=r.length>1?MV(n):null,s=fl(n),a=ll(r,n,0,[n.props,i]),c=aI(a);if(Vs(),s(),(c||n.sp)&&!yo(n)&&QI(n),c){if(a.then(mw,mw),e)return a.then(h=>{_w(n,h,e)}).catch(h=>{od(h,n,0)});n.asyncDep=a}else _w(n,a,e)}else vT(n,e)}function _w(n,e,t){Ke(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Pt(e)&&(n.setupState=VI(e)),vT(n,t)}let yw;function vT(n,e,t){const r=n.type;if(!n.render){if(!e&&yw&&!r.render){const i=r.template||n_(n).template;if(i){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:c,compilerOptions:h}=r,d=Wt(Wt({isCustomElement:s,delimiters:c},a),h);r.render=yw(i,d)}}n.render=r.render||xr}{const i=fl(n);Os();try{XO(n)}finally{Vs(),i()}}}const LV={get(n,e){return Sn(n,"get",""),n[e]}};function MV(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,LV),slots:n.slots,emit:n.emit,expose:e}}function hd(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(VI(Uo(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in bc)return bc[t](n)},has(e,t){return t in e||t in bc}})):n.proxy}function Kg(n,e=!0){return Ke(n)?n.displayName||n.name:n.name||e&&n.__name}function FV(n){return Ke(n)&&"__vccOpts"in n}const Be=(n,e)=>SO(n,e,$c);function Ue(n,e,t){const r=arguments.length;return r===2?Pt(e)&&!Le(e)?Wa(e)?Un(n,null,[e]):Un(n,e):Un(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Wa(t)&&(t=[t]),Un(n,e,t))}const UV="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jg;const vw=typeof window!="undefined"&&window.trustedTypes;if(vw)try{jg=vw.createPolicy("vue",{createHTML:n=>n})}catch{}const wT=jg?n=>jg.createHTML(n):n=>n,BV="http://www.w3.org/2000/svg",$V="http://www.w3.org/1998/Math/MathML",Ei=typeof document!="undefined"?document:null,ww=Ei&&Ei.createElement("template"),qV={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Ei.createElementNS(BV,n):e==="mathml"?Ei.createElementNS($V,n):t?Ei.createElement(n,{is:t}):Ei.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Ei.createTextNode(n),createComment:n=>Ei.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ei.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const a=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{ww.innerHTML=wT(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const c=ww.content;if(r==="svg"||r==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},rs="transition",Ju="animation",Ha=Symbol("_vtc"),ET={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},IT=Wt({},jI,ET),zV=n=>(n.displayName="Transition",n.props=IT,n),KV=zV((n,{slots:e})=>Ue(MO,TT(n),e)),oo=(n,e=[])=>{Le(n)?n.forEach(t=>t(...e)):n&&n(...e)},Ew=n=>n?Le(n)?n.some(e=>e.length>1):n.length>1:!1;function TT(n){const e={};for(const V in n)V in ET||(e[V]=n[V]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:c=`${t}-enter-to`,appearFromClass:h=s,appearActiveClass:d=a,appearToClass:p=c,leaveFromClass:_=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:I=`${t}-leave-to`}=n,O=jV(i),M=O&&O[0],F=O&&O[1],{onBeforeEnter:Q,onEnter:z,onEnterCancelled:q,onLeave:W,onLeaveCancelled:Y,onBeforeAppear:re=Q,onAppear:P=z,onAppearCancelled:S=q}=e,A=(V,C,fe)=>{us(V,C?p:c),us(V,C?d:a),fe&&fe()},x=(V,C)=>{V._isLeaving=!1,us(V,_),us(V,I),us(V,v),C&&C()},N=V=>(C,fe)=>{const We=V?P:z,tt=()=>A(C,V,fe);oo(We,[C,tt]),Iw(()=>{us(C,V?h:s),wi(C,V?p:c),Ew(We)||Tw(C,r,M,tt)})};return Wt(e,{onBeforeEnter(V){oo(Q,[V]),wi(V,s),wi(V,a)},onBeforeAppear(V){oo(re,[V]),wi(V,h),wi(V,d)},onEnter:N(!1),onAppear:N(!0),onLeave(V,C){V._isLeaving=!0;const fe=()=>x(V,C);wi(V,_),wi(V,v),AT(),Iw(()=>{!V._isLeaving||(us(V,_),wi(V,I),Ew(W)||Tw(V,r,F,fe))}),oo(W,[V,fe])},onEnterCancelled(V){A(V,!1),oo(q,[V])},onAppearCancelled(V){A(V,!0),oo(S,[V])},onLeaveCancelled(V){x(V),oo(Y,[V])}})}function jV(n){if(n==null)return null;if(Pt(n))return[ig(n.enter),ig(n.leave)];{const e=ig(n);return[e,e]}}function ig(n){return jk(n)}function wi(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ha]||(n[Ha]=new Set)).add(e)}function us(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ha];t&&(t.delete(e),t.size||(n[Ha]=void 0))}function Iw(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let WV=0;function Tw(n,e,t,r){const i=n._endId=++WV,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:c,propCount:h}=bT(n,e);if(!a)return r();const d=a+"end";let p=0;const _=()=>{n.removeEventListener(d,v),s()},v=I=>{I.target===n&&++p>=h&&_()};setTimeout(()=>{p<h&&_()},c+1),n.addEventListener(d,v)}function bT(n,e){const t=window.getComputedStyle(n),r=O=>(t[O]||"").split(", "),i=r(`${rs}Delay`),s=r(`${rs}Duration`),a=bw(i,s),c=r(`${Ju}Delay`),h=r(`${Ju}Duration`),d=bw(c,h);let p=null,_=0,v=0;e===rs?a>0&&(p=rs,_=a,v=s.length):e===Ju?d>0&&(p=Ju,_=d,v=h.length):(_=Math.max(a,d),p=_>0?a>d?rs:Ju:null,v=p?p===rs?s.length:h.length:0);const I=p===rs&&/\b(transform|all)(,|$)/.test(r(`${rs}Property`).toString());return{type:p,timeout:_,propCount:v,hasTransform:I}}function bw(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>Aw(t)+Aw(n[r])))}function Aw(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function AT(){return document.body.offsetHeight}function HV(n,e,t){const r=n[Ha];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const xf=Symbol("_vod"),ST=Symbol("_vsh"),W9={beforeMount(n,{value:e},{transition:t}){n[xf]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Yu(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Yu(n,!0),r.enter(n)):r.leave(n,()=>{Yu(n,!1)}):Yu(n,e))},beforeUnmount(n,{value:e}){Yu(n,e)}};function Yu(n,e){n.style.display=e?n[xf]:"none",n[ST]=!e}const GV=Symbol(""),QV=/(^|;)\s*display\s*:/;function JV(n,e,t){const r=n.style,i=Mt(t);let s=!1;if(t&&!i){if(e)if(Mt(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();t[c]==null&&rf(r,c,"")}else for(const a in e)t[a]==null&&rf(r,a,"");for(const a in t)a==="display"&&(s=!0),rf(r,a,t[a])}else if(i){if(e!==t){const a=r[GV];a&&(t+=";"+a),r.cssText=t,s=QV.test(t)}}else e&&n.removeAttribute("style");xf in n&&(n[xf]=s?r.display:"",n[ST]&&(r.display="none"))}const Sw=/\s*!important$/;function rf(n,e,t){if(Le(t))t.forEach(r=>rf(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=YV(n,e);Sw.test(t)?n.setProperty(Mo(r),t.replace(Sw,""),"important"):n[r]=t}}const Rw=["Webkit","Moz","ms"],sg={};function YV(n,e){const t=sg[e];if(t)return t;let r=Tr(e);if(r!=="filter"&&r in n)return sg[e]=r;r=rd(r);for(let i=0;i<Rw.length;i++){const s=Rw[i]+r;if(s in n)return sg[e]=s}return e}const Pw="http://www.w3.org/1999/xlink";function Cw(n,e,t,r,i,s=Yk(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Pw,e.slice(6,e.length)):n.setAttributeNS(Pw,e,t):t==null||s&&!hI(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Vi(t)?String(t):t)}function xw(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?wT(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const c=s==="OPTION"?n.getAttribute("value")||"":n.value,h=t==null?n.type==="checkbox"?"on":"":String(t);(c!==h||!("_value"in n))&&(n.value=h),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=hI(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(i||e)}function XV(n,e,t,r){n.addEventListener(e,t,r)}function ZV(n,e,t,r){n.removeEventListener(e,t,r)}const Dw=Symbol("_vei");function eN(n,e,t,r,i=null){const s=n[Dw]||(n[Dw]={}),a=s[e];if(r&&a)a.value=r;else{const[c,h]=tN(e);if(r){const d=s[e]=iN(r,i);XV(n,c,d,h)}else a&&(ZV(n,c,a,h),s[e]=void 0)}}const kw=/(?:Once|Passive|Capture)$/;function tN(n){let e;if(kw.test(n)){e={};let r;for(;r=n.match(kw);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Mo(n.slice(2)),e]}let og=0;const nN=Promise.resolve(),rN=()=>og||(nN.then(()=>og=0),og=Date.now());function iN(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Or(sN(r,t.value),e,5,[r])};return t.value=n,t.attached=rN(),t}function sN(n,e){if(Le(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Ow=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,oN=(n,e,t,r,i,s)=>{const a=i==="svg";e==="class"?HV(n,r,a):e==="style"?JV(n,t,r):td(e)?Fm(e)||eN(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):aN(n,e,r,a))?(xw(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cw(n,e,r,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Mt(r))?xw(n,Tr(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Cw(n,e,r,a))};function aN(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Ow(e)&&Ke(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ow(e)&&Mt(t)?!1:e in n}const RT=new WeakMap,PT=new WeakMap,Df=Symbol("_moveCb"),Vw=Symbol("_enterCb"),uN=n=>(delete n.props.mode,n),cN=uN({name:"TransitionGroup",props:Wt({},IT,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=lu(),r=KI();let i,s;return t_(()=>{if(!i.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!pN(i[0].el,t.vnode.el,a))return;i.forEach(hN),i.forEach(fN);const c=i.filter(dN);AT(),c.forEach(h=>{const d=h.el,p=d.style;wi(d,a),p.transform=p.webkitTransform=p.transitionDuration="";const _=d[Df]=v=>{v&&v.target!==d||(!v||/transform$/.test(v.propertyName))&&(d.removeEventListener("transitionend",_),d[Df]=null,us(d,a))};d.addEventListener("transitionend",_)})}),()=>{const a=at(n),c=TT(a);let h=a.tag||Qn;if(i=[],s)for(let d=0;d<s.length;d++){const p=s[d];p.el&&p.el instanceof Element&&(i.push(p),Cs(p,Uc(p,c,r,t)),RT.set(p,p.el.getBoundingClientRect()))}s=e.default?Xm(e.default()):[];for(let d=0;d<s.length;d++){const p=s[d];p.key!=null&&Cs(p,Uc(p,c,r,t))}return Un(h,null,s)}}}),lN=cN;function hN(n){const e=n.el;e[Df]&&e[Df](),e[Vw]&&e[Vw]()}function fN(n){PT.set(n,n.el.getBoundingClientRect())}function dN(n){const e=RT.get(n),t=PT.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function pN(n,e,t){const r=n.cloneNode(),i=n[Ha];i&&i.forEach(c=>{c.split(/\s+/).forEach(h=>h&&r.classList.remove(h))}),t.split(/\s+/).forEach(c=>c&&r.classList.add(c)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:a}=bT(r);return s.removeChild(r),a}const gN=["ctrl","shift","alt","meta"],mN={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>gN.some(t=>n[`${t}Key`]&&!e.includes(t))},H9=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let a=0;a<e.length;a++){const c=mN[e[a]];if(c&&c(i,e))return}return n(i,...s)})},_N=Wt({patchProp:oN},qV);let Nw;function yN(){return Nw||(Nw=fV(_N))}const CT=(...n)=>{const e=yN().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=wN(r);if(!i)return;const s=e._component;!Ke(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,vN(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function vN(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function wN(n){return Mt(n)?document.querySelector(n):n}function o_(n,e,t,r){return Object.defineProperty(n,e,{get:t,set:r,enumerable:!0}),n}const bo=To(!1);let Wg;function EN(n,e){const t=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(n)||/(opr)[\/]([\w.]+)/.exec(n)||/(vivaldi)[\/]([\w.]+)/.exec(n)||/(chrome|crios)[\/]([\w.]+)/.exec(n)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(firefox|fxios)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(n)||[];return{browser:t[5]||t[3]||t[1]||"",version:t[4]||t[2]||"0",platform:e[0]||""}}function IN(n){return/(ipad)/.exec(n)||/(ipod)/.exec(n)||/(windows phone)/.exec(n)||/(iphone)/.exec(n)||/(kindle)/.exec(n)||/(silk)/.exec(n)||/(android)/.exec(n)||/(win)/.exec(n)||/(mac)/.exec(n)||/(linux)/.exec(n)||/(cros)/.exec(n)||/(playbook)/.exec(n)||/(bb)/.exec(n)||/(blackberry)/.exec(n)||[]}const xT="ontouchstart"in window||window.navigator.maxTouchPoints>0;function TN(n){const e=n.toLowerCase(),t=IN(e),r=EN(e,t),i={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(i[r.browser]=!0,i.version=r.version,i.versionNumber=parseInt(r.version,10)),r.platform&&(i[r.platform]=!0);const s=i.android||i.ios||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"];if(s===!0||e.indexOf("mobile")!==-1?i.mobile=!0:i.desktop=!0,i["windows phone"]&&(i.winphone=!0,delete i["windows phone"]),i.edga||i.edgios||i.edg?(i.edge=!0,r.browser="edge"):i.crios?(i.chrome=!0,r.browser="chrome"):i.fxios&&(i.firefox=!0,r.browser="firefox"),(i.ipod||i.ipad||i.iphone)&&(i.ios=!0),i.vivaldi&&(r.browser="vivaldi",i.vivaldi=!0),(i.chrome||i.opr||i.safari||i.vivaldi||i.mobile===!0&&i.ios!==!0&&s!==!0)&&(i.webkit=!0),i.opr&&(r.browser="opera",i.opera=!0),i.safari&&(i.blackberry||i.bb?(r.browser="blackberry",i.blackberry=!0):i.playbook?(r.browser="playbook",i.playbook=!0):i.android?(r.browser="android",i.android=!0):i.kindle?(r.browser="kindle",i.kindle=!0):i.silk&&(r.browser="silk",i.silk=!0)),i.name=r.browser,i.platform=r.platform,e.indexOf("electron")!==-1)i.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)i.bex=!0;else{if(window.Capacitor!==void 0?(i.capacitor=!0,i.nativeMobile=!0,i.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(i.cordova=!0,i.nativeMobile=!0,i.nativeMobileWrapper="cordova"),bo.value===!0&&(Wg={is:{...i}}),xT===!0&&i.mac===!0&&(i.desktop===!0&&i.safari===!0||i.nativeMobile===!0&&i.android!==!0&&i.ios!==!0&&i.ipad!==!0)){delete i.mac,delete i.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(i,{mobile:!0,ios:!0,platform:a,[a]:!0})}i.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete i.desktop,i.mobile=!0)}return i}const Lw=navigator.userAgent||navigator.vendor||window.opera,bN={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Yr={userAgent:Lw,is:TN(Lw),has:{touch:xT},within:{iframe:window.self!==window.top}},Hg={install(n){const{$q:e}=n;bo.value===!0?(n.onSSRHydrated.push(()=>{Object.assign(e.platform,Yr),bo.value=!1}),e.platform=Fo(this)):e.platform=this}};{let n;o_(Yr.has,"webStorage",()=>{if(n!==void 0)return n;try{if(window.localStorage)return n=!0,!0}catch{}return n=!1,!1}),Object.assign(Hg,Yr),bo.value===!0&&(Object.assign(Hg,Wg,bN),Wg=null)}function dl(n){return Uo(Zm(n))}function AN(n){return Uo(n)}const fd=(n,e)=>{const t=Fo(n);for(const r in n)o_(e,r,()=>t[r],i=>{t[r]=i});return e},Ao={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const n=Object.defineProperty({},"passive",{get(){Object.assign(Ao,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,n),window.removeEventListener("qtest",null,n)}catch{}function qc(){}function G9(n){return n.button===0}function SN(n){return n.touches&&n.touches[0]?n=n.touches[0]:n.changedTouches&&n.changedTouches[0]?n=n.changedTouches[0]:n.targetTouches&&n.targetTouches[0]&&(n=n.targetTouches[0]),{top:n.clientY,left:n.clientX}}function Q9(n){if(n.path)return n.path;if(n.composedPath)return n.composedPath();const e=[];let t=n.target;for(;t;){if(e.push(t),t.tagName==="HTML")return e.push(document),e.push(window),e;t=t.parentElement}}function DT(n){n.stopPropagation()}function Gg(n){n.cancelable!==!1&&n.preventDefault()}function wa(n){n.cancelable!==!1&&n.preventDefault(),n.stopPropagation()}function J9(n,e){if(n===void 0||e===!0&&n.__dragPrevented===!0)return;const t=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",Gg,Ao.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",Gg,Ao.notPassiveCapture)};n.querySelectorAll("a, img").forEach(t)}function RN(n,e,t){const r=`__q_${e}_evt`;n[r]=n[r]!==void 0?n[r].concat(t):t,t.forEach(i=>{i[0].addEventListener(i[1],n[i[2]],Ao[i[3]])})}function PN(n,e){const t=`__q_${e}_evt`;n[t]!==void 0&&(n[t].forEach(r=>{r[0].removeEventListener(r[1],n[r[2]],Ao[r[3]])}),n[t]=void 0)}function CN(n,e=250,t){let r=null;function i(){const s=arguments,a=()=>{r=null,t!==!0&&n.apply(this,s)};r!==null?clearTimeout(r):t===!0&&n.apply(this,s),r=setTimeout(a,e)}return i.cancel=()=>{r!==null&&clearTimeout(r)},i}const ag=["sm","md","lg","xl"],{passive:Mw}=Ao;var xN=fd({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:qc,setDebounce:qc,install({$q:n,onSSRHydrated:e}){if(n.screen=this,this.__installed===!0){n.config.screen!==void 0&&(n.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:t}=window,r=t||window,i=document.scrollingElement||document.documentElement,s=t===void 0||Yr.is.mobile===!0?()=>[Math.max(window.innerWidth,i.clientWidth),Math.max(window.innerHeight,i.clientHeight)]:()=>[t.width*t.scale+window.innerWidth-i.clientWidth,t.height*t.scale+window.innerHeight-i.clientHeight],a=n.config.screen!==void 0&&n.config.screen.bodyClasses===!0;this.__update=_=>{const[v,I]=s();if(I!==this.height&&(this.height=I),v!==this.width)this.width=v;else if(_!==!0)return;let O=this.sizes;this.gt.xs=v>=O.sm,this.gt.sm=v>=O.md,this.gt.md=v>=O.lg,this.gt.lg=v>=O.xl,this.lt.sm=v<O.sm,this.lt.md=v<O.md,this.lt.lg=v<O.lg,this.lt.xl=v<O.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,O=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",O!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${O}`)),this.name=O)};let c,h={},d=16;this.setSizes=_=>{ag.forEach(v=>{_[v]!==void 0&&(h[v]=_[v])})},this.setDebounce=_=>{d=_};const p=()=>{const _=getComputedStyle(document.body);_.getPropertyValue("--q-size-sm")&&ag.forEach(v=>{this.sizes[v]=parseInt(_.getPropertyValue(`--q-size-${v}`),10)}),this.setSizes=v=>{ag.forEach(I=>{v[I]&&(this.sizes[I]=v[I])}),this.__update(!0)},this.setDebounce=v=>{c!==void 0&&r.removeEventListener("resize",c,Mw),c=v>0?CN(this.__update,v):this.__update,r.addEventListener("resize",c,Mw)},this.setDebounce(d),Object.keys(h).length!==0?(this.setSizes(h),h=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};bo.value===!0?e.push(p):p()}});const bn=fd({isActive:!1,mode:!1},{__media:void 0,set(n){bn.mode=n,n==="auto"?(bn.__media===void 0&&(bn.__media=window.matchMedia("(prefers-color-scheme: dark)"),bn.__updateMedia=()=>{bn.set("auto")},bn.__media.addListener(bn.__updateMedia)),n=bn.__media.matches):bn.__media!==void 0&&(bn.__media.removeListener(bn.__updateMedia),bn.__media=void 0),bn.isActive=n===!0,document.body.classList.remove(`body--${n===!0?"light":"dark"}`),document.body.classList.add(`body--${n===!0?"dark":"light"}`)},toggle(){bn.set(bn.isActive===!1)},install({$q:n,ssrContext:e}){const{dark:t}=n.config;n.dark=this,this.__installed!==!0&&this.set(t!==void 0?t:!1)}});function DN(n,e,t=document.body){if(typeof n!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(t instanceof Element))throw new TypeError("Expected a DOM element");t.style.setProperty(`--q-${n}`,e)}let kT=!1;function kN(n){kT=n.isComposing===!0}function ON(n){return kT===!0||n!==Object(n)||n.isComposing===!0||n.qKeyEvent===!0}function Qg(n,e){return ON(n)===!0?!1:[].concat(e).includes(n.keyCode)}function OT(n){if(n.ios===!0)return"ios";if(n.android===!0)return"android"}function VN({is:n,has:e,within:t},r){const i=[n.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(n.mobile===!0){const s=OT(n);s!==void 0&&i.push("platform-"+s)}if(n.nativeMobile===!0){const s=n.nativeMobileWrapper;i.push(s),i.push("native-mobile"),n.ios===!0&&(r[s]===void 0||r[s].iosStatusBarPadding!==!1)&&i.push("q-ios-padding")}else n.electron===!0?i.push("electron"):n.bex===!0&&i.push("bex");return t.iframe===!0&&i.push("within-iframe"),i}function NN(){const{is:n}=Yr,e=document.body.className,t=new Set(e.replace(/ {2}/g," ").split(" "));if(n.nativeMobile!==!0&&n.electron!==!0&&n.bex!==!0){if(n.desktop===!0)t.delete("mobile"),t.delete("platform-ios"),t.delete("platform-android"),t.add("desktop");else if(n.mobile===!0){t.delete("desktop"),t.add("mobile"),t.delete("platform-ios"),t.delete("platform-android");const i=OT(n);i!==void 0&&t.add(`platform-${i}`)}}Yr.has.touch===!0&&(t.delete("no-touch"),t.add("touch")),Yr.within.iframe===!0&&t.add("within-iframe");const r=Array.from(t).join(" ");e!==r&&(document.body.className=r)}function LN(n){for(const e in n)DN(e,n[e])}var MN={install(n){if(this.__installed!==!0){if(bo.value===!0)NN();else{const{$q:e}=n;e.config.brand!==void 0&&LN(e.config.brand);const t=VN(Yr,e.config);document.body.classList.add.apply(document.body.classList,t)}Yr.is.ios===!0&&document.body.addEventListener("touchstart",qc),window.addEventListener("keydown",kN,!0)}}};const VT=()=>!0;function FN(n){return typeof n=="string"&&n!==""&&n!=="/"&&n!=="#/"}function UN(n){return n.startsWith("#")===!0&&(n=n.substring(1)),n.startsWith("/")===!1&&(n="/"+n),n.endsWith("/")===!0&&(n=n.substring(0,n.length-1)),"#"+n}function BN(n){if(n.backButtonExit===!1)return()=>!1;if(n.backButtonExit==="*")return VT;const e=["#/"];return Array.isArray(n.backButtonExit)===!0&&e.push(...n.backButtonExit.filter(FN).map(UN)),()=>e.includes(window.location.hash)}var $N={__history:[],add:qc,remove:qc,install({$q:n}){if(this.__installed===!0)return;const{cordova:e,capacitor:t}=Yr.is;if(e!==!0&&t!==!0)return;const r=n.config[e===!0?"cordova":"capacitor"];if(r!==void 0&&r.backButton===!1||t===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=a=>{a.condition===void 0&&(a.condition=VT),this.__history.push(a)},this.remove=a=>{const c=this.__history.indexOf(a);c>=0&&this.__history.splice(c,1)};const i=BN(Object.assign({backButtonExit:!0},r)),s=()=>{if(this.__history.length){const a=this.__history[this.__history.length-1];a.condition()===!0&&(this.__history.pop(),a.handler())}else i()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",s,!1)}):window.Capacitor.Plugins.App.addListener("backButton",s)}},Fw={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:n=>n?`Expand "${n}"`:"Expand",collapse:n=>n?`Collapse "${n}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:n=>n===1?"1 record selected.":(n===0?"No":n)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(n,e,t)=>n+"-"+e+" of "+t,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Uw(){const n=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof n=="string")return n.split(/[-_]/).map((e,t)=>t===0?e.toLowerCase():t>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const ds=fd({__qLang:{}},{getLocale:Uw,set(n=Fw,e){const t={...n,rtl:n.rtl===!0,getLocale:Uw};{if(t.set=ds.set,ds.__langConfig===void 0||ds.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",t.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",t.isoName)}Object.assign(ds.__qLang,t)}},install({$q:n,lang:e,ssrContext:t}){n.lang=ds.__qLang,ds.__langConfig=n.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set"&&i!=="getLocale")}}),this.set(e||Fw))}});var qN={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const kf=fd({iconMapFn:null,__qIconSet:{}},{set(n,e){const t={...n};t.set=kf.set,Object.assign(kf.__qIconSet,t)},install({$q:n,iconSet:e,ssrContext:t}){n.config.iconMapFn!==void 0&&(this.iconMapFn=n.config.iconMapFn),n.iconSet=this.__qIconSet,o_(n,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set")}}),this.set(e||qN))}}),zN="_q_",Y9="_q_l_",X9="_q_pc_",Z9="_q_fo_",e6="_q_tabs_";function t6(){}const Of={};let NT=!1;function KN(){NT=!0}function ug(n,e){if(n===e)return!0;if(n!==null&&e!==null&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;let t,r;if(n.constructor===Array){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(ug(n[r],e[r])!==!0)return!1;return!0}if(n.constructor===Map){if(n.size!==e.size)return!1;let s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}for(s=n.entries(),r=s.next();r.done!==!0;){if(ug(r.value[1],e.get(r.value[0]))!==!0)return!1;r=s.next()}return!0}if(n.constructor===Set){if(n.size!==e.size)return!1;const s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}return!0}if(n.buffer!=null&&n.buffer.constructor===ArrayBuffer){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const i=Object.keys(n).filter(s=>n[s]!==void 0);if(t=i.length,t!==Object.keys(e).filter(s=>e[s]!==void 0).length)return!1;for(r=t;r--!==0;){const s=i[r];if(ug(n[s],e[s])!==!0)return!1}return!0}return n!==n&&e!==e}function zc(n){return n!==null&&typeof n=="object"&&Array.isArray(n)!==!0}function n6(n){return typeof n=="number"&&isFinite(n)}const Bw=[Hg,MN,bn,xN,$N,ds,kf];function jN(n,e){const t=CT(n);t.config.globalProperties=e.config.globalProperties;const{reload:r,...i}=e._context;return Object.assign(t._context,i),t}function $w(n,e){e.forEach(t=>{t.install(n),t.__installed=!0})}function WN(n,e,t){n.config.globalProperties.$q=t.$q,n.provide(zN,t.$q),$w(t,Bw),e.components!==void 0&&Object.values(e.components).forEach(r=>{zc(r)===!0&&r.name!==void 0&&n.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{zc(r)===!0&&r.name!==void 0&&n.directive(r.name,r)}),e.plugins!==void 0&&$w(t,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&Bw.includes(r)===!1)),bo.value===!0&&(t.$q.onSSRHydrated=()=>{t.onSSRHydrated.forEach(r=>{r()}),t.$q.onSSRHydrated=()=>{}})}var HN=function(n,e={}){const t={version:"2.17.1"};NT===!1?(e.config!==void 0&&Object.assign(Of,e.config),t.config={...Of},KN()):t.config=e.config||{},WN(n,e,{parentApp:n,$q:t,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},GN={name:"Quasar",version:"2.17.1",install:HN,lang:ds,iconSet:kf},QN=!1;/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let LT;const dd=n=>LT=n,MT=Symbol();function Jg(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Sc;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Sc||(Sc={}));function JN(){const n=gI(!0),e=n.run(()=>To({}));let t=[],r=[];const i=Uo({install(s){dd(i),i._a=s,s.provide(MT,i),s.config.globalProperties.$pinia=i,r.forEach(a=>t.push(a)),r=[]},use(s){return!this._a&&!QN?r.push(s):t.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const FT=()=>{};function qw(n,e,t,r=FT){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&mI()&&Zk(i),i}function Ea(n,...e){n.slice().forEach(t=>{t(...e)})}const YN=n=>n(),zw=Symbol(),cg=Symbol();function Yg(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];Jg(i)&&Jg(r)&&n.hasOwnProperty(t)&&!jt(r)&&!Ts(r)?n[t]=Yg(i,r):n[t]=r}return n}const XN=Symbol();function ZN(n){return!Jg(n)||!n.hasOwnProperty(XN)}const{assign:cs}=Object;function eL(n){return!!(jt(n)&&n.effect)}function tL(n,e,t,r){const{state:i,actions:s,getters:a}=e,c=t.state.value[n];let h;function d(){c||(t.state.value[n]=i?i():{});const p=IO(t.state.value[n]);return cs(p,s,Object.keys(a||{}).reduce((_,v)=>(_[v]=Uo(Be(()=>{dd(t);const I=t._s.get(n);return a[v].call(I,I)})),_),{}))}return h=UT(n,d,e,t,r,!0),h}function UT(n,e,t={},r,i,s){let a;const c=cs({actions:{}},t),h={deep:!0};let d,p,_=[],v=[],I;const O=r.state.value[n];!s&&!O&&(r.state.value[n]={}),To({});let M;function F(S){let A;d=p=!1,typeof S=="function"?(S(r.state.value[n]),A={type:Sc.patchFunction,storeId:n,events:I}):(Yg(r.state.value[n],S),A={type:Sc.patchObject,payload:S,storeId:n,events:I});const x=M=Symbol();Jm().then(()=>{M===x&&(d=!0)}),p=!0,Ea(_,A,r.state.value[n])}const Q=s?function(){const{state:A}=t,x=A?A():{};this.$patch(N=>{cs(N,x)})}:FT;function z(){a.stop(),_=[],v=[],r._s.delete(n)}const q=(S,A="")=>{if(zw in S)return S[cg]=A,S;const x=function(){dd(r);const N=Array.from(arguments),V=[],C=[];function fe(Ce){V.push(Ce)}function We(Ce){C.push(Ce)}Ea(v,{args:N,name:x[cg],store:Y,after:fe,onError:We});let tt;try{tt=S.apply(this&&this.$id===n?this:Y,N)}catch(Ce){throw Ea(C,Ce),Ce}return tt instanceof Promise?tt.then(Ce=>(Ea(V,Ce),Ce)).catch(Ce=>(Ea(C,Ce),Promise.reject(Ce))):(Ea(V,tt),tt)};return x[zw]=!0,x[cg]=A,x},W={_p:r,$id:n,$onAction:qw.bind(null,v),$patch:F,$reset:Q,$subscribe(S,A={}){const x=qw(_,S,A.detached,()=>N()),N=a.run(()=>$a(()=>r.state.value[n],V=>{(A.flush==="sync"?p:d)&&S({storeId:n,type:Sc.direct,events:I},V)},cs({},h,A)));return x},$dispose:z},Y=Fo(W);r._s.set(n,Y);const P=(r._a&&r._a.runWithContext||YN)(()=>r._e.run(()=>(a=gI()).run(()=>e({action:q}))));for(const S in P){const A=P[S];if(jt(A)&&!eL(A)||Ts(A))s||(O&&ZN(A)&&(jt(A)?A.value=O[S]:Yg(A,O[S])),r.state.value[n][S]=A);else if(typeof A=="function"){const x=q(A,S);P[S]=x,c.actions[S]=A}}return cs(Y,P),cs(at(Y),P),Object.defineProperty(Y,"$state",{get:()=>r.state.value[n],set:S=>{F(A=>{cs(A,S)})}}),r._p.forEach(S=>{cs(Y,a.run(()=>S({store:Y,app:r._a,pinia:r,options:c})))}),O&&s&&t.hydrate&&t.hydrate(Y.$state,O),d=!0,p=!0,Y}/*! #__NO_SIDE_EFFECTS__ */function nL(n,e,t){let r,i;const s=typeof e=="function";typeof n=="string"?(r=n,i=s?t:e):(i=n,r=n.id);function a(c,h){const d=sV();return c=c||(d?kr(MT,null):null),c&&dd(c),c=LT,c._s.has(r)||(s?UT(r,e,i,c):tL(r,i,c)),c._s.get(r)}return a.$id=r,a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],c=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},$T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,c=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4;let v=(c&15)<<2|d>>6,I=d&63;h||(I=64,a||(v=64)),r.push(t[p],t[_],t[v],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||_==null)throw new iL;const v=s<<2|c>>4;if(r.push(v),d!==64){const I=c<<4&240|d>>2;if(r.push(I),_!==64){const O=d<<6&192|_;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sL=function(n){const e=BT(n);return $T.encodeByteArray(e,!0)},qT=function(n){return sL(n).replace(/\./g,"")},zT=function(n){try{return $T.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=()=>oL().__FIREBASE_DEFAULTS__,uL=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cL=()=>{if(typeof document=="undefined")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zT(n[1]);return e&&JSON.parse(e)},pd=()=>{try{return aL()||uL()||cL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lL=n=>{var e,t;return(t=(e=pd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},KT=()=>{var n;return(n=pd())===null||n===void 0?void 0:n.config},jT=n=>{var e;return(e=pd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fL(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function dL(){var n;const e=(n=pd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pL(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function gL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _L(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function WT(){return!dL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HT(){try{return typeof indexedDB=="object"}catch{return!1}}function yL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="FirebaseError";class Li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vL,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?wL(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Li(i,c,r)}}function wL(n,e){return n.replace(EL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EL=/\{\$([^}]+)}/g;function IL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Kc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Kw(s)&&Kw(a)){if(!Kc(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Kw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function TL(n,e){const t=new bL(n,e);return t.subscribe.bind(t)}class bL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");AL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=lg),i.error===void 0&&(i.error=lg),i.complete===void 0&&(i.complete=lg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n){return n&&n._delegate?n._delegate:n}class So{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new hL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PL(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(!!r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RL(n){return n===co?void 0:n}function PL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const xL={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},DL=rt.INFO,kL={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},OL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=kL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a_{constructor(e){this.name=e,this._logLevel=DL,this._logHandler=OL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const VL=(n,e)=>e.some(t=>n instanceof t);let jw,Ww;function NL(){return jw||(jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LL(){return Ww||(Ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GT=new WeakMap,Xg=new WeakMap,QT=new WeakMap,hg=new WeakMap,u_=new WeakMap;function ML(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(bs(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&GT.set(t,n)}).catch(()=>{}),u_.set(e,n),e}function FL(n){if(Xg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Xg.set(n,e)}let Zg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UL(n){Zg=n(Zg)}function BL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(fg(this),e,...t);return QT.set(r,e.sort?e.sort():[e]),bs(r)}:LL().includes(n)?function(...e){return n.apply(fg(this),e),bs(GT.get(this))}:function(...e){return bs(n.apply(fg(this),e))}}function $L(n){return typeof n=="function"?BL(n):(n instanceof IDBTransaction&&FL(n),VL(n,NL())?new Proxy(n,Zg):n)}function bs(n){if(n instanceof IDBRequest)return ML(n);if(hg.has(n))return hg.get(n);const e=$L(n);return e!==n&&(hg.set(n,e),u_.set(e,n)),e}const fg=n=>u_.get(n);function qL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=bs(a);return r&&a.addEventListener("upgradeneeded",h=>{r(bs(a.result),h.oldVersion,h.newVersion,bs(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const zL=["get","getKey","getAll","getAllKeys","count"],KL=["put","add","delete","clear"],dg=new Map;function Hw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dg.get(e))return dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=KL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zL.includes(t)))return;const s=async function(a,...c){const h=this.transaction(a,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return dg.set(e,s),s}UL(n=>({...n,get:(e,t,r)=>Hw(e,t)||n.get(e,t,r),has:(e,t)=>!!Hw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function WL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const em="@firebase/app",Gw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new a_("@firebase/app"),HL="@firebase/app-compat",GL="@firebase/analytics-compat",QL="@firebase/analytics",JL="@firebase/app-check-compat",YL="@firebase/app-check",XL="@firebase/auth",ZL="@firebase/auth-compat",eM="@firebase/database",tM="@firebase/data-connect",nM="@firebase/database-compat",rM="@firebase/functions",iM="@firebase/functions-compat",sM="@firebase/installations",oM="@firebase/installations-compat",aM="@firebase/messaging",uM="@firebase/messaging-compat",cM="@firebase/performance",lM="@firebase/performance-compat",hM="@firebase/remote-config",fM="@firebase/remote-config-compat",dM="@firebase/storage",pM="@firebase/storage-compat",gM="@firebase/firestore",mM="@firebase/vertexai-preview",_M="@firebase/firestore-compat",yM="firebase",vM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="[DEFAULT]",wM={[em]:"fire-core",[HL]:"fire-core-compat",[QL]:"fire-analytics",[GL]:"fire-analytics-compat",[YL]:"fire-app-check",[JL]:"fire-app-check-compat",[XL]:"fire-auth",[ZL]:"fire-auth-compat",[eM]:"fire-rtdb",[tM]:"fire-data-connect",[nM]:"fire-rtdb-compat",[rM]:"fire-fn",[iM]:"fire-fn-compat",[sM]:"fire-iid",[oM]:"fire-iid-compat",[aM]:"fire-fcm",[uM]:"fire-fcm-compat",[cM]:"fire-perf",[lM]:"fire-perf-compat",[hM]:"fire-rc",[fM]:"fire-rc-compat",[dM]:"fire-gcs",[pM]:"fire-gcs-compat",[gM]:"fire-fst",[_M]:"fire-fst-compat",[mM]:"fire-vertex","fire-js":"fire-js",[yM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Map,nm=new Map,rm=new Map;function Qw(n,e){try{n.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ga(n){const e=n.name;if(rm.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;rm.set(e,n);for(const t of Ro.values())Qw(t,n);for(const t of nm.values())Qw(t,n);return!0}function c_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},As=new pl("app","Firebase",EM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=vM;function JT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw As.create("bad-app-name",{appName:String(i)});if(t||(t=KT()),!t)throw As.create("no-options");const s=Ro.get(i);if(s){if(Kc(t,s.options)&&Kc(r,s.config))return s;throw As.create("duplicate-app",{appName:i})}const a=new CL(i);for(const h of rm.values())a.addComponent(h);const c=new IM(t,r,a);return Ro.set(i,c),c}function TM(n=tm){const e=Ro.get(n);if(!e&&n===tm&&KT())return JT();if(!e)throw As.create("no-app",{appName:n});return e}function bM(){return Array.from(Ro.values())}async function AM(n){let e=!1;const t=n.name;Ro.has(t)?(e=!0,Ro.delete(t)):nm.has(t)&&n.decRefCount()<=0&&(nm.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Ss(n,e,t){var r;let i=(r=wM[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(c.join(" "));return}Ga(new So(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="firebase-heartbeat-database",RM=1,jc="firebase-heartbeat-store";let pg=null;function YT(){return pg||(pg=qL(SM,RM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),pg}async function PM(n){try{const t=(await YT()).transaction(jc),r=await t.objectStore(jc).get(XT(n));return await t.done,r}catch(e){if(e instanceof Li)Di.warn(e.message);else{const t=As.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Di.warn(t.message)}}}async function Jw(n,e){try{const r=(await YT()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,XT(n)),await r.done}catch(t){if(t instanceof Li)Di.warn(t.message);else{const r=As.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Di.warn(r.message)}}}function XT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=1024,xM=30*24*60*60*1e3;class DM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Yw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=xM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yw(),{heartbeatsToSend:r,unsentEntries:i}=kM(this._heartbeatsCache.heartbeats),s=qT(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Di.warn(t),""}}}function Yw(){return new Date().toISOString().substring(0,10)}function kM(n,e=CM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Xw(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Xw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class OM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HT()?yL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xw(n){return qT(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(n){Ga(new So("platform-logger",e=>new jL(e),"PRIVATE")),Ga(new So("heartbeat",e=>new DM(e),"PRIVATE")),Ss(em,Gw,n),Ss(em,Gw,"esm2017"),Ss("fire-js","")}VM("");var Zw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,ZT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function A(){}A.prototype=S.prototype,P.D=S.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(x,N,V){for(var C=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)C[fe-2]=arguments[fe];return S.prototype[N].apply(x,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,S,A){A||(A=0);var x=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)x[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;16>N;++N)x[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=P.g[0],A=P.g[1],N=P.g[2];var V=P.g[3],C=S+(V^A&(N^V))+x[0]+3614090360&4294967295;S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[1]+3905402710&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[2]+606105819&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(V^A&(N^V))+x[4]+4118548399&4294967295,S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[5]+1200080426&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[6]+2821735955&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(V^A&(N^V))+x[8]+1770035416&4294967295,S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[9]+2336552879&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[10]+4294925233&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(V^A&(N^V))+x[12]+1804603682&4294967295,S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[13]+4254626195&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[14]+2792965006&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(N^V&(A^N))+x[1]+4129170786&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[6]+3225465664&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[11]+643717713&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^V&(A^N))+x[5]+3593408605&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[10]+38016083&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[15]+3634488961&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^V&(A^N))+x[9]+568446438&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[14]+3275163606&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[3]+4107603335&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^V&(A^N))+x[13]+2850285829&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[2]+4243563512&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[7]+1735328473&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(A^N^V)+x[5]+4294588738&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[8]+2272392833&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[11]+1839030562&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^V)+x[1]+2763975236&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[4]+1272893353&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[7]+4139469664&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^V)+x[13]+681279174&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[0]+3936430074&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[3]+3572445317&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^V)+x[9]+3654602809&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[12]+3873151461&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[15]+530742520&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(N^(A|~V))+x[0]+4096336452&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[7]+1126891415&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[14]+2878612391&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~V))+x[12]+1700485571&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[3]+2399980690&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[10]+4293915773&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~V))+x[8]+1873313359&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[15]+4264355552&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[6]+2734768916&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~V))+x[4]+4149444226&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[11]+3174756917&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[2]+718787259&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+V&4294967295}r.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var A=S-this.blockSize,x=this.B,N=this.h,V=0;V<S;){if(N==0)for(;V<=A;)i(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<S;)if(x[N++]=P.charCodeAt(V++),N==this.blockSize){i(this,x),N=0;break}}else for(;V<S;)if(x[N++]=P[V++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var A=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=A&255,A/=256;for(this.u(P),P=Array(16),S=A=0;4>S;++S)for(var x=0;32>x;x+=8)P[A++]=this.g[S]>>>x&255;return P};function s(P,S){var A=c;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=S(P)}function a(P,S){this.h=S;for(var A=[],x=!0,N=P.length-1;0<=N;N--){var V=P[N]|0;x&&V==S||(A[N]=V,x=!1)}this.g=A}var c={};function h(P){return-128<=P&&128>P?s(P,function(S){return new a([S|0],0>S?-1:0)}):new a([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return _;if(0>P)return F(d(-P));for(var S=[],A=1,x=0;P>=A;x++)S[x]=P/A|0,A*=4294967296;return new a(S,0)}function p(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return F(p(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(S,8)),x=_,N=0;N<P.length;N+=8){var V=Math.min(8,P.length-N),C=parseInt(P.substring(N,N+V),S);8>V?(V=d(Math.pow(S,V)),x=x.j(V).add(d(C))):(x=x.j(A),x=x.add(d(C)))}return x}var _=h(0),v=h(1),I=h(16777216);n=a.prototype,n.m=function(){if(M(this))return-F(this).m();for(var P=0,S=1,A=0;A<this.g.length;A++){var x=this.i(A);P+=(0<=x?x:4294967296+x)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(O(this))return"0";if(M(this))return"-"+F(this).toString(P);for(var S=d(Math.pow(P,6)),A=this,x="";;){var N=W(A,S).g;A=Q(A,N.j(S));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=N,O(A))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function O(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function M(P){return P.h==-1}n.l=function(P){return P=Q(this,P),M(P)?-1:O(P)?0:1};function F(P){for(var S=P.g.length,A=[],x=0;x<S;x++)A[x]=~P.g[x];return new a(A,~P.h).add(v)}n.abs=function(){return M(this)?F(this):this},n.add=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0,N=0;N<=S;N++){var V=x+(this.i(N)&65535)+(P.i(N)&65535),C=(V>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);x=C>>>16,V&=65535,C&=65535,A[N]=C<<16|V}return new a(A,A[A.length-1]&-2147483648?-1:0)};function Q(P,S){return P.add(F(S))}n.j=function(P){if(O(this)||O(P))return _;if(M(this))return M(P)?F(this).j(F(P)):F(F(this).j(P));if(M(P))return F(this.j(F(P)));if(0>this.l(I)&&0>P.l(I))return d(this.m()*P.m());for(var S=this.g.length+P.g.length,A=[],x=0;x<2*S;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<P.g.length;N++){var V=this.i(x)>>>16,C=this.i(x)&65535,fe=P.i(N)>>>16,We=P.i(N)&65535;A[2*x+2*N]+=C*We,z(A,2*x+2*N),A[2*x+2*N+1]+=V*We,z(A,2*x+2*N+1),A[2*x+2*N+1]+=C*fe,z(A,2*x+2*N+1),A[2*x+2*N+2]+=V*fe,z(A,2*x+2*N+2)}for(x=0;x<S;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=S;x<2*S;x++)A[x]=0;return new a(A,0)};function z(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function q(P,S){this.g=P,this.h=S}function W(P,S){if(O(S))throw Error("division by zero");if(O(P))return new q(_,_);if(M(P))return S=W(F(P),S),new q(F(S.g),F(S.h));if(M(S))return S=W(P,F(S)),new q(F(S.g),S.h);if(30<P.g.length){if(M(P)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var A=v,x=S;0>=x.l(P);)A=Y(A),x=Y(x);var N=re(A,1),V=re(x,1);for(x=re(x,2),A=re(A,2);!O(x);){var C=V.add(x);0>=C.l(P)&&(N=N.add(A),V=C),x=re(x,1),A=re(A,1)}return S=Q(P,N.j(S)),new q(N,S)}for(N=_;0<=P.l(S);){for(A=Math.max(1,Math.floor(P.m()/S.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),V=d(A),C=V.j(S);M(C)||0<C.l(P);)A-=x,V=d(A),C=V.j(S);O(V)&&(V=v),N=N.add(V),P=Q(P,C)}return new q(N,P)}n.A=function(P){return W(this,P).h},n.and=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)&P.i(x);return new a(A,this.h&P.h)},n.or=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)|P.i(x);return new a(A,this.h|P.h)},n.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)^P.i(x);return new a(A,this.h^P.h)};function Y(P){for(var S=P.g.length+1,A=[],x=0;x<S;x++)A[x]=P.i(x)<<1|P.i(x-1)>>>31;return new a(A,P.h)}function re(P,S){var A=S>>5;S%=32;for(var x=P.g.length-A,N=[],V=0;V<x;V++)N[V]=0<S?P.i(V+A)>>>S|P.i(V+A+1)<<32-S:P.i(V+A);return new a(N,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,wo=a}).apply(typeof Zw!="undefined"?Zw:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Wh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eb,dc,tb,sf,im,nb,rb,ib;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,g,y){return l==Array.prototype||l==Object.prototype||(l[g]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wh=="object"&&Wh];for(var g=0;g<l.length;++g){var y=l[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,g){if(g)e:{var y=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var $=l[T];if(!($ in y))break e;y=y[$]}l=l[l.length-1],T=y[l],g=g(T),g!=T&&g!=null&&e(y,l,{configurable:!0,writable:!0,value:g})}}function s(l,g){l instanceof String&&(l+="");var y=0,T=!1,$={next:function(){if(!T&&y<l.length){var H=y++;return{value:g(H,l[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(l){return l||function(){return s(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(l){var g=typeof l;return g=g!="object"?g:l?Array.isArray(l)?"array":g:"null",g=="array"||g=="object"&&typeof l.length=="number"}function d(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function p(l,g,y){return l.call.apply(l.bind,arguments)}function _(l,g,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),l.apply(g,$)}}return function(){return l.apply(g,arguments)}}function v(l,g,y){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,v.apply(null,arguments)}function I(l,g){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function O(l,g){function y(){}y.prototype=g.prototype,l.aa=g.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,$,H){for(var he=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)he[gt-2]=arguments[gt];return g.prototype[$].apply(T,he)}}function M(l){const g=l.length;if(0<g){const y=Array(g);for(let T=0;T<g;T++)y[T]=l[T];return y}return[]}function F(l,g){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(h(T)){const $=l.length||0,H=T.length||0;l.length=$+H;for(let he=0;he<H;he++)l[$+he]=T[he]}else l.push(T)}}class Q{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function z(l){return/^[\s\xa0]*$/.test(l)}function q(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var Y=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function re(l,g,y){for(const T in l)g.call(y,l[T],T,l)}function P(l,g){for(const y in l)g.call(void 0,l[y],y,l)}function S(l){const g={};for(const y in l)g[y]=l[y];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,g){let y,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(y in T)l[y]=T[y];for(let H=0;H<A.length;H++)y=A[H],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function N(l){var g=1;l=l.split(":");const y=[];for(;0<g&&l.length;)y.push(l.shift()),g--;return l.length&&y.push(l.join(":")),y}function V(l){c.setTimeout(()=>{throw l},0)}function C(){var l=Dn;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class fe{constructor(){this.h=this.g=null}add(g,y){const T=We.get();T.set(g,y),this.h?this.h.next=T:this.g=T,this.h=T}}var We=new Q(()=>new tt,l=>l.reset());class tt{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,$e=!1,Dn=new fe,vn=()=>{const l=c.Promise.resolve(void 0);Ce=()=>{l.then(Dt)}};var Dt=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(y){V(y)}var g=We;g.j(l),100>g.h&&(g.h++,l.next=g.g,g.g=l)}$e=!1};function St(){this.s=this.s,this.C=this.C}St.prototype.s=!1,St.prototype.ma=function(){this.s||(this.s=!0,this.N())},St.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Rt(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var Lr=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return l}();function dn(l,g){if(Rt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget){if(Y){e:{try{W(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else y=="mouseover"?g=l.fromElement:y=="mouseout"&&(g=l.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Zt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&dn.aa.h.call(this)}}O(dn,Rt);var Zt={2:"touch",3:"pen",4:"mouse"};dn.prototype.h=function(){dn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),_e=0;function de(l,g,y,T,$){this.listener=l,this.proxy=null,this.src=g,this.type=y,this.capture=!!T,this.ha=$,this.key=++_e,this.da=this.fa=!1}function Ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Qe(l){this.src=l,this.g={},this.h=0}Qe.prototype.add=function(l,g,y,T,$){var H=l.toString();l=this.g[H],l||(l=this.g[H]=[],this.h++);var he=R(l,g,T,$);return-1<he?(g=l[he],y||(g.fa=!1)):(g=new de(g,this.src,H,!!T,$),g.fa=y,l.push(g)),g};function ut(l,g){var y=g.type;if(y in l.g){var T=l.g[y],$=Array.prototype.indexOf.call(T,g,void 0),H;(H=0<=$)&&Array.prototype.splice.call(T,$,1),H&&(Ee(g),l.g[y].length==0&&(delete l.g[y],l.h--))}}function R(l,g,y,T){for(var $=0;$<l.length;++$){var H=l[$];if(!H.da&&H.listener==g&&H.capture==!!y&&H.ha==T)return $}return-1}var D="closure_lm_"+(1e6*Math.random()|0),j={};function ie(l,g,y,T,$){if(T&&T.once)return pe(l,g,y,T,$);if(Array.isArray(g)){for(var H=0;H<g.length;H++)ie(l,g[H],y,T,$);return null}return y=ke(y),l&&l[Z]?l.K(g,y,d(T)?!!T.capture:!!T,$):J(l,g,y,!1,T,$)}function J(l,g,y,T,$,H){if(!g)throw Error("Invalid event type");var he=d($)?!!$.capture:!!$,gt=ge(l);if(gt||(l[D]=gt=new Qe(l)),y=gt.add(g,y,T,he,H),y.proxy)return y;if(T=ue(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Lr||($=he),$===void 0&&($=!1),l.addEventListener(g.toString(),T,$);else if(l.attachEvent)l.attachEvent(ae(g.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ue(){function l(y){return g.call(l.src,l.listener,y)}const g=Pe;return l}function pe(l,g,y,T,$){if(Array.isArray(g)){for(var H=0;H<g.length;H++)pe(l,g[H],y,T,$);return null}return y=ke(y),l&&l[Z]?l.L(g,y,d(T)?!!T.capture:!!T,$):J(l,g,y,!0,T,$)}function le(l,g,y,T,$){if(Array.isArray(g))for(var H=0;H<g.length;H++)le(l,g[H],y,T,$);else T=d(T)?!!T.capture:!!T,y=ke(y),l&&l[Z]?(l=l.i,g=String(g).toString(),g in l.g&&(H=l.g[g],y=R(H,y,T,$),-1<y&&(Ee(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete l.g[g],l.h--)))):l&&(l=ge(l))&&(g=l.g[g.toString()],l=-1,g&&(l=R(g,y,T,$)),(y=-1<l?g[l]:null)&&ce(y))}function ce(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[Z])ut(g.i,l);else{var y=l.type,T=l.proxy;g.removeEventListener?g.removeEventListener(y,T,l.capture):g.detachEvent?g.detachEvent(ae(y),T):g.addListener&&g.removeListener&&g.removeListener(T),(y=ge(g))?(ut(y,l),y.h==0&&(y.src=null,g[D]=null)):Ee(l)}}}function ae(l){return l in j?j[l]:j[l]="on"+l}function Pe(l,g){if(l.da)l=!0;else{g=new dn(g,this);var y=l.listener,T=l.ha||l.src;l.fa&&ce(l),l=y.call(T,g)}return l}function ge(l){return l=l[D],l instanceof Qe?l:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(l){return typeof l=="function"?l:(l[Ie]||(l[Ie]=function(g){return l.handleEvent(g)}),l[Ie])}function Re(){St.call(this),this.i=new Qe(this),this.M=this,this.F=null}O(Re,St),Re.prototype[Z]=!0,Re.prototype.removeEventListener=function(l,g,y,T){le(this,l,g,y,T)};function Me(l,g){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=g.type||g,typeof g=="string")g=new Rt(g,l);else if(g instanceof Rt)g.target=g.target||l;else{var $=g;g=new Rt(T,l),x(g,$)}if($=!0,y)for(var H=y.length-1;0<=H;H--){var he=g.g=y[H];$=Ze(he,T,!0,g)&&$}if(he=g.g=l,$=Ze(he,T,!0,g)&&$,$=Ze(he,T,!1,g)&&$,y)for(H=0;H<y.length;H++)he=g.g=y[H],$=Ze(he,T,!1,g)&&$}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var l=this.i,g;for(g in l.g){for(var y=l.g[g],T=0;T<y.length;T++)Ee(y[T]);delete l.g[g],l.h--}}this.F=null},Re.prototype.K=function(l,g,y,T){return this.i.add(String(l),g,!1,y,T)},Re.prototype.L=function(l,g,y,T){return this.i.add(String(l),g,!0,y,T)};function Ze(l,g,y,T){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,H=0;H<g.length;++H){var he=g[H];if(he&&!he.da&&he.capture==y){var gt=he.listener,Jt=he.ha||he.src;he.fa&&ut(l.i,he),$=gt.call(Jt,T)!==!1&&$}}return $&&!T.defaultPrevented}function Gt(l,g,y){if(typeof l=="function")y&&(l=v(l,y));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(l,g||0)}function kt(l){l.g=Gt(()=>{l.g=null,l.i&&(l.i=!1,kt(l))},l.l);const g=l.h;l.h=null,l.m.apply(null,g)}class pn extends St{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(l){St.call(this),this.h=l,this.g={}}O(Ot,St);var ar=[];function ti(l){re(l.g,function(g,y){this.g.hasOwnProperty(y)&&ce(g)},l),l.g={}}Ot.prototype.N=function(){Ot.aa.N.call(this),ti(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,wn=c.JSON.parse,qo=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function _u(){}_u.prototype.h=null;function Rl(l){return l.h||(l.h=l.i())}function yu(){}var Bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vu(){Rt.call(this,"d")}O(vu,Rt);function wu(){Rt.call(this,"c")}O(wu,Rt);var ni={},Pl=null;function Bs(){return Pl=Pl||new Re}ni.La="serverreachability";function Cl(l){Rt.call(this,ni.La,l)}O(Cl,Rt);function $s(l){const g=Bs();Me(g,new Cl(g))}ni.STAT_EVENT="statevent";function xl(l,g){Rt.call(this,ni.STAT_EVENT,l),this.stat=g}O(xl,Rt);function en(l){const g=Bs();Me(g,new xl(g,l))}ni.Ma="timingevent";function Dl(l,g){Rt.call(this,ni.Ma,l),this.size=g}O(Dl,Rt);function ri(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},g)}function qs(){this.g=!0}qs.prototype.xa=function(){this.g=!1};function Ud(l,g,y,T,$,H){l.info(function(){if(l.g)if(H)for(var he="",gt=H.split("&"),Jt=0;Jt<gt.length;Jt++){var Fe=gt[Jt].split("=");if(1<Fe.length){var Yt=Fe[0];Fe=Fe[1];var Ft=Yt.split("_");he=2<=Ft.length&&Ft[1]=="type"?he+(Yt+"="+Fe+"&"):he+(Yt+"=redacted&")}}else he=null;else he=H;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+g+`
`+y+`
`+he})}function Bd(l,g,y,T,$,H,he){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+g+`
`+y+`
`+H+" "+he})}function $i(l,g,y,T){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+qd(l,y)+(T?" "+T:"")})}function $d(l,g){l.info(function(){return"TIMEOUT: "+g})}qs.prototype.info=function(){};function qd(l,g){if(!l.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var H=$[0];if(H!="noop"&&H!="stop"&&H!="close")for(var he=1;he<$.length;he++)$[he]=""}}}}return $t(y)}catch{return g}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ko;function jo(){}O(jo,_u),jo.prototype.g=function(){return new XMLHttpRequest},jo.prototype.i=function(){return{}},Ko=new jo;function Mr(l,g,y,T){this.j=l,this.i=g,this.l=y,this.R=T||1,this.U=new Ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Vl={},Eu={};function Iu(l,g,y){l.L=1,l.v=Ki(ur(g)),l.m=y,l.P=!0,zs(l,null)}function zs(l,g){l.F=Date.now(),Ho(l),l.A=ur(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Gl(y.i,"t",T),l.C=0,y=l.j.J,l.h=new Ol,l.g=eh(l.j,y?g:null,!l.m),0<l.O&&(l.M=new pn(v(l.Y,l,l.g),l.O)),g=l.U,y=l.g,T=l.ca;var $="readystatechange";Array.isArray($)||($&&(ar[0]=$.toString()),$=ar);for(var H=0;H<$.length;H++){var he=ie(y,$[H],T||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,g)):(l.u="GET",l.g.ea(l.A,l.u,null,g)),$s(),Ud(l.i,l.u,l.A,l.l,l.R,l.m)}Mr.prototype.ca=function(l){l=l.target;const g=this.M;g&&lr(l)==3?g.j():this.Y(l)},Mr.prototype.Y=function(l){try{if(l==this.g)e:{const Ft=lr(this.g);var g=this.g.Ba();const ai=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||ta(this.g)))){this.J||Ft!=4||g==7||(g==8||0>=ai?$s(3):$s(2)),Tu(this);var y=this.g.Z();this.X=y;t:if(Nl(this)){var T=ta(this.g);l="";var $=T.length,H=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Fr(this),qi(this);var he="";break t}this.h.i=new c.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,l+=this.h.i.decode(T[g],{stream:!(H&&g==$-1)});T.length=0,this.h.g+=l,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=y==200,Bd(this.i,this.u,this.A,this.l,this.R,Ft,y),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Jt=this.g;if((gt=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(gt)){var Fe=gt;break t}}Fe=null}if(y=Fe)$i(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,y);else{this.o=!1,this.s=3,en(12),Fr(this),qi(this);break e}}if(this.P){y=!0;let zn;for(;!this.J&&this.C<he.length;)if(zn=Wo(this,he),zn==Eu){Ft==4&&(this.s=4,en(14),y=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Vl){this.s=4,en(15),$i(this.i,this.l,he,"[Invalid Chunk]"),y=!1;break}else $i(this.i,this.l,zn,null),Go(this,zn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||he.length!=0||this.h.h||(this.s=1,en(16),y=!1),this.o=this.o&&y,!y)$i(this.i,this.l,he,"[Invalid Chunked Response]"),Fr(this),qi(this);else if(0<he.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Qi(Yt),Yt.M=!0,en(11))}}else $i(this.i,this.l,he,null),Go(this,he);Ft==4&&Fr(this),this.o&&!this.J&&(Ft==4?br(this.j,this):(this.o=!1,Ho(this)))}else qn(this.g),y==400&&0<he.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Fr(this),qi(this)}}}catch{}finally{}};function Nl(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Wo(l,g){var y=l.C,T=g.indexOf(`
`,y);return T==-1?Eu:(y=Number(g.substring(y,T)),isNaN(y)?Vl:(T+=1,T+y>g.length?Eu:(g=g.slice(T,T+y),l.C=T+y,g)))}Mr.prototype.cancel=function(){this.J=!0,Fr(this)};function Ho(l){l.S=Date.now()+l.I,Ll(l,l.I)}function Ll(l,g){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ri(v(l.ba,l),g)}function Tu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Mr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?($d(this.i,this.A),this.L!=2&&($s(),en(17)),Fr(this),this.s=2,qi(this)):Ll(this,this.S-l)};function qi(l){l.j.G==0||l.J||br(l.j,l)}function Fr(l){Tu(l);var g=l.M;g&&typeof g.ma=="function"&&g.ma(),l.M=null,ti(l.U),l.g&&(g=l.g,l.g=null,g.abort(),g.ma())}function Go(l,g){try{var y=l.j;if(y.G!=0&&(y.g==l||Qo(y.h,l))){if(!l.K&&Qo(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)pt(y),Hs(y);else break e;hr(y),en(18)}}else y.za=$[1],0<y.za-y.T&&37500>$[2]&&y.F&&y.v==0&&!y.C&&(y.C=ri(v(y.Za,y),6e3));if(1>=Ul(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ii(y,11)}else if((l.K||y.g==l)&&pt(y),!z(g))for($=y.Da.g.parse(g),g=0;g<$.length;g++){let Fe=$[g];if(y.T=Fe[0],Fe=Fe[1],y.G==2)if(Fe[0]=="c"){y.K=Fe[1],y.ia=Fe[2];const Yt=Fe[3];Yt!=null&&(y.la=Yt,y.j.info("VER="+y.la));const Ft=Fe[4];Ft!=null&&(y.Aa=Ft,y.j.info("SVER="+y.Aa));const ai=Fe[5];ai!=null&&typeof ai=="number"&&0<ai&&(T=1.5*ai,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const zn=l.g;if(zn){const oa=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var H=T.h;H.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Jo(H,H.h),H.h=null))}if(T.D){const Vu=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vu&&(T.ya=Vu,dt(T.I,T.D,Vu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var he=l;if(T.qa=Zl(T,T.J?T.ia:null,T.W),he.K){bu(T.h,he);var gt=he,Jt=T.L;Jt&&(gt.I=Jt),gt.B&&(Tu(gt),Ho(gt)),T.g=he}else Ou(T);0<y.i.length&&Gs(y)}else Fe[0]!="stop"&&Fe[0]!="close"||ii(y,7);else y.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ii(y,7):na(y):Fe[0]!="noop"&&y.l&&y.l.ta(Fe),y.v=0)}}$s(4)}catch{}}var zd=class{constructor(l,g){this.g=l,this.map=g}};function Ml(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fl(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ul(l){return l.h?1:l.g?l.g.size:0}function Qo(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Jo(l,g){l.g?l.g.add(g):l.h=g}function bu(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}Ml.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Yo(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let g=l.i;for(const y of l.g.values())g=g.concat(y.D);return g}return M(l.i)}function Kd(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map!="undefined"&&l instanceof Map||typeof Set!="undefined"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(h(l)){for(var g=[],y=l.length,T=0;T<y;T++)g.push(l[T]);return g}g=[],y=0;for(T in l)g[y++]=l[T];return g}function Bl(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map!="undefined"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set!="undefined"&&l instanceof Set)){if(h(l)||typeof l=="string"){var g=[];l=l.length;for(var y=0;y<l;y++)g.push(y);return g}g=[],y=0;for(const T in l)g[y++]=T;return g}}}function Ks(l,g){if(l.forEach&&typeof l.forEach=="function")l.forEach(g,void 0);else if(h(l)||typeof l=="string")Array.prototype.forEach.call(l,g,void 0);else for(var y=Bl(l),T=Kd(l),$=T.length,H=0;H<$;H++)g.call(void 0,T[H],y&&y[H],l)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jd(l,g){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),$=null;if(0<=T){var H=l[y].substring(0,T);$=l[y].substring(T+1)}else H=l[y];g(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ur(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ur){this.h=l.h,zi(this,l.j),this.o=l.o,this.g=l.g,Xo(this,l.s),this.l=l.l;var g=l.i,y=new js;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Su(this,y),this.m=l.m}else l&&(g=String(l).match(Au))?(this.h=!1,zi(this,g[1]||"",!0),this.o=cr(g[2]||""),this.g=cr(g[3]||"",!0),Xo(this,g[4]),this.l=cr(g[5]||"",!0),Su(this,g[6]||"",!0),this.m=cr(g[7]||"")):(this.h=!1,this.i=new js(null,this.h))}Ur.prototype.toString=function(){var l=[],g=this.j;g&&l.push(ji(g,ql,!0),":");var y=this.g;return(y||g=="file")&&(l.push("//"),(g=this.o)&&l.push(ji(g,ql,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(ji(y,y.charAt(0)=="/"?Kl:zl,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",ji(y,Wl)),l.join("")};function ur(l){return new Ur(l)}function zi(l,g,y){l.j=y?cr(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function Xo(l,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);l.s=g}else l.s=null}function Su(l,g,y){g instanceof js?(l.i=g,Wd(l.i,l.h)):(y||(g=ji(g,jl)),l.i=new js(g,l.h))}function dt(l,g,y){l.i.set(g,y)}function Ki(l){return dt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function cr(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ji(l,g,y){return typeof l=="string"?(l=encodeURI(l).replace(g,$l),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function $l(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ql=/[#\/\?@]/g,zl=/[#\?:]/g,Kl=/[#\?]/g,jl=/[#\?@]/g,Wl=/#/g;function js(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function Br(l){l.g||(l.g=new Map,l.h=0,l.i&&jd(l.i,function(g,y){l.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=js.prototype,n.add=function(l,g){Br(this),this.i=null,l=Wi(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(g),this.h+=1,this};function Hl(l,g){Br(l),g=Wi(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function Ru(l,g){return Br(l),g=Wi(l,g),l.g.has(g)}n.forEach=function(l,g){Br(this),this.g.forEach(function(y,T){y.forEach(function($){l.call(g,$,T,this)},this)},this)},n.na=function(){Br(this);const l=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let T=0;T<g.length;T++){const $=l[T];for(let H=0;H<$.length;H++)y.push(g[T])}return y},n.V=function(l){Br(this);let g=[];if(typeof l=="string")Ru(this,l)&&(g=g.concat(this.g.get(Wi(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)g=g.concat(l[y])}return g},n.set=function(l,g){return Br(this),this.i=null,l=Wi(this,l),Ru(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},n.get=function(l,g){return l?(l=this.V(l),0<l.length?String(l[0]):g):g};function Gl(l,g,y){Hl(l,g),0<y.length&&(l.i=null,l.g.set(Wi(l,g),M(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var T=g[y];const H=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var $=H;he[T]!==""&&($+="="+encodeURIComponent(String(he[T]))),l.push($)}}return this.i=l.join("&")};function Wi(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function Wd(l,g){g&&!l.j&&(Br(l),l.i=null,l.g.forEach(function(y,T){var $=T.toLowerCase();T!=$&&(Hl(this,T),Gl(this,$,y))},l)),l.j=g}function Hd(l,g){const y=new qs;if(c.Image){const T=new Image;T.onload=I($r,y,"TestLoadImage: loaded",!0,g,T),T.onerror=I($r,y,"TestLoadImage: error",!1,g,T),T.onabort=I($r,y,"TestLoadImage: abort",!1,g,T),T.ontimeout=I($r,y,"TestLoadImage: timeout",!1,g,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else g(!1)}function Pu(l,g){const y=new qs,T=new AbortController,$=setTimeout(()=>{T.abort(),$r(y,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:T.signal}).then(H=>{clearTimeout($),H.ok?$r(y,"TestPingServer: ok",!0,g):$r(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),$r(y,"TestPingServer: error",!1,g)})}function $r(l,g,y,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(y)}catch{}}function Gd(){this.g=new qo}function Qd(l,g,y){const T=y||"";try{Ks(l,function($,H){let he=$;d($)&&(he=$t($)),g.push(T+H+"="+encodeURIComponent(he))})}catch($){throw g.push(T+"type="+encodeURIComponent("_badmap")),$}}function Zo(l){this.l=l.Ub||null,this.j=l.eb||!1}O(Zo,_u),Zo.prototype.g=function(){return new ea(this.l,this.j)},Zo.prototype.i=function(l){return function(){return l}}({});function ea(l,g){Re.call(this),this.D=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ea,Re),n=ea.prototype,n.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=g,this.readyState=1,Ws(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(g.body=l),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ct(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yt(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yt(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?ct(this):Ws(this),this.readyState==3&&yt(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,ct(this))},n.Qa=function(l){this.g&&(this.response=l,ct(this))},n.ga=function(){this.g&&ct(this)};function ct(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ws(l)}n.setRequestHeader=function(l,g){this.u.append(l,g)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=g.next();return l.join(`\r
`)};function Ws(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ql(l){let g="";return re(l,function(y,T){g+=T,g+=":",g+=y,g+=`\r
`}),g}function Cu(l,g,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Ql(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):dt(l,g,y))}function Ct(l){Re.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ct,Re);var Jd=/^https?$/i,Yd=["POST","PUT"];n=Ct.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,g,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ko.g(),this.v=this.o?Rl(this.o):Rl(Ko),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch(H){xu(this,H);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)y.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())y.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),$=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Yd,g,void 0))||T||$||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,he]of y)this.g.setRequestHeader(H,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qr(this),this.u=!0,this.g.send(l),this.u=!1}catch(H){xu(this,H)}};function xu(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.m=5,Jl(l),Hi(l)}function Jl(l){l.A||(l.A=!0,Me(l,"complete"),Me(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Me(this,"complete"),Me(this,"abort"),Hi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qt(this):this.bb())},n.bb=function(){Qt(this)};function Qt(l){if(l.h&&typeof a!="undefined"&&(!l.v[1]||lr(l)!=4||l.Z()!=2)){if(l.u&&lr(l)==4)Gt(l.Ea,0,l);else if(Me(l,"readystatechange"),lr(l)==4){l.h=!1;try{const he=l.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var T;if(T=he===0){var $=String(l.D).match(Au)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),T=!Jd.test($?$.toLowerCase():"")}y=T}if(y)Me(l,"complete"),Me(l,"success");else{l.m=6;try{var H=2<lr(l)?l.g.statusText:""}catch{H=""}l.l=H+" ["+l.Z()+"]",Jl(l)}}finally{Hi(l)}}}}function Hi(l,g){if(l.g){qr(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,g||Me(l,"ready");try{y.onreadystatechange=T}catch{}}}function qr(l){l.I&&(c.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function lr(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),wn(g)}};function ta(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function qn(l){const g={};l=(l.g&&2<=lr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(z(l[T]))continue;var y=N(l[T]);const $=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=g[$]||[];g[$]=H,H.push(y)}P(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(l,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||g}function Du(l){this.Aa=0,this.i=[],this.j=new qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gi("baseRetryDelayMs",5e3,l),this.cb=Gi("retryDelaySeedMs",1e4,l),this.Wa=Gi("forwardChannelMaxRetries",2,l),this.wa=Gi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ml(l&&l.concurrentRequestLimit),this.Da=new Gd,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Du.prototype,n.la=8,n.G=1,n.connect=function(l,g,y,T){en(0),this.W=l,this.H=g||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=Zl(this,null,this.W),Gs(this)};function na(l){if(ku(l),l.G==3){var g=l.U++,y=ur(l.I);if(dt(y,"SID",l.K),dt(y,"RID",g),dt(y,"TYPE","terminate"),an(l,y),g=new Mr(l,l.j,g),g.L=2,g.v=Ki(ur(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=eh(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ho(g)}sa(l)}function Hs(l){l.g&&(Qi(l),l.g.cancel(),l.g=null)}function ku(l){Hs(l),l.u&&(c.clearTimeout(l.u),l.u=null),pt(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Gs(l){if(!Fl(l.h)&&!l.s){l.s=!0;var g=l.Ga;Ce||vn(),$e||(Ce(),$e=!0),Dn.add(g,l),l.B=0}}function kn(l,g){return Ul(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=g.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ri(v(l.Ga,l,g),ia(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const $=new Mr(this,this.j,l);let H=this.o;if(this.S&&(H?(H=S(H),x(H,this.S)):H=this.S),this.m!==null||this.O||($.H=H,H=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Xl(this,$,g),y=ur(this.I),dt(y,"RID",l),dt(y,"CVER",22),this.D&&dt(y,"X-HTTP-Session-Id",this.D),an(this,y),H&&(this.O?g="headers="+encodeURIComponent(String(Ql(H)))+"&"+g:this.m&&Cu(y,this.m,H)),Jo(this.h,$),this.Ua&&dt(y,"TYPE","init"),this.P?(dt(y,"$req",g),dt(y,"SID","null"),$.T=!0,Iu($,y,null)):Iu($,y,g),this.G=2}}else this.G==3&&(l?Yl(this,l):this.i.length==0||Fl(this.h)||Yl(this))};function Yl(l,g){var y;g?y=g.l:y=l.U++;const T=ur(l.I);dt(T,"SID",l.K),dt(T,"RID",y),dt(T,"AID",l.T),an(l,T),l.m&&l.o&&Cu(T,l.m,l.o),y=new Mr(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),g&&(l.i=g.D.concat(l.i)),g=Xl(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Jo(l.h,y),Iu(y,T,g)}function an(l,g){l.H&&re(l.H,function(y,T){dt(g,T,y)}),l.l&&Ks({},function(y,T){dt(g,T,y)})}function Xl(l,g,y){y=Math.min(l.i.length,y);var T=l.l?v(l.l.Na,l.l,l):null;e:{var $=l.i;let H=-1;for(;;){const he=["count="+y];H==-1?0<y?(H=$[0].g,he.push("ofs="+H)):H=0:he.push("ofs="+H);let gt=!0;for(let Jt=0;Jt<y;Jt++){let Fe=$[Jt].g;const Yt=$[Jt].map;if(Fe-=H,0>Fe)H=Math.max(0,$[Jt].g-100),gt=!1;else try{Qd(Yt,he,"req"+Fe+"_")}catch{T&&T(Yt)}}if(gt){T=he.join("&");break e}}}return l=l.i.splice(0,y),g.D=l,T}function Ou(l){if(!l.g&&!l.u){l.Y=1;var g=l.Fa;Ce||vn(),$e||(Ce(),$e=!0),Dn.add(g,l),l.v=0}}function hr(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ri(v(l.Fa,l),ia(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ri(v(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),Hs(this),ra(this))};function Qi(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function ra(l){l.g=new Mr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var g=ur(l.qa);dt(g,"RID","rpc"),dt(g,"SID",l.K),dt(g,"AID",l.T),dt(g,"CI",l.F?"0":"1"),!l.F&&l.ja&&dt(g,"TO",l.ja),dt(g,"TYPE","xmlhttp"),an(l,g),l.m&&l.o&&Cu(g,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Ki(ur(g)),y.m=null,y.P=!0,zs(y,l)}n.Za=function(){this.C!=null&&(this.C=null,Hs(this),hr(this),en(19))};function pt(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function br(l,g){var y=null;if(l.g==g){pt(l),Qi(l),l.g=null;var T=2}else if(Qo(l.h,g))y=g.D,bu(l.h,g),T=1;else return;if(l.G!=0){if(g.o)if(T==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var $=l.B;T=Bs(),Me(T,new Dl(T,y)),Gs(l)}else Ou(l);else if($=g.s,$==3||$==0&&0<g.X||!(T==1&&kn(l,g)||T==2&&hr(l)))switch(y&&0<y.length&&(g=l.h,g.i=g.i.concat(y)),$){case 1:ii(l,5);break;case 4:ii(l,10);break;case 3:ii(l,6);break;default:ii(l,2)}}}function ia(l,g){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*g}function ii(l,g){if(l.j.info("Error code "+g),g==2){var y=v(l.fb,l),T=l.Xa;const $=!T;T=new Ur(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||zi(T,"https"),Ki(T),$?Hd(T.toString(),y):Pu(T.toString(),y)}else en(2);l.G=0,l.l&&l.l.sa(g),sa(l),ku(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function sa(l){if(l.G=0,l.ka=[],l.l){const g=Yo(l.h);(g.length!=0||l.i.length!=0)&&(F(l.ka,g),F(l.ka,l.i),l.h.i.length=0,M(l.i),l.i.length=0),l.l.ra()}}function Zl(l,g,y){var T=y instanceof Ur?ur(y):new Ur(y);if(T.g!="")g&&(T.g=g+"."+T.g),Xo(T,T.s);else{var $=c.location;T=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var H=new Ur(null);T&&zi(H,T),g&&(H.g=g),$&&Xo(H,$),y&&(H.l=y),T=H}return y=l.D,g=l.ya,y&&g&&dt(T,y,g),dt(T,"VER",l.la),an(l,T),T}function eh(l,g,y){if(g&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Ca&&!l.pa?new Ct(new Zo({eb:y})):new Ct(l.pa),g.Ha(l.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}n=th.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qs(){}Qs.prototype.g=function(l,g){return new un(l,g)};function un(l,g){Re.call(this),this.g=new Du(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(l?l["X-WebChannel-Client-Profile"]=g.va:l={"X-WebChannel-Client-Profile":g.va}),this.g.S=l,(l=g&&g.Sb)&&!z(l)&&(this.g.m=l),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!z(g)&&(this.g.D=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new oi(this)}O(un,Re),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){na(this.g)},un.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=$t(l),l=y);g.i.push(new zd(g.Ya++,l)),g.G==3&&Gs(g)},un.prototype.N=function(){this.g.l=null,delete this.j,na(this.g),delete this.g,un.aa.N.call(this)};function si(l){vu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(const y in g){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}O(si,vu);function nh(){wu.call(this),this.status=1}O(nh,wu);function oi(l){this.g=l}O(oi,th),oi.prototype.ua=function(){Me(this.g,"a")},oi.prototype.ta=function(l){Me(this.g,new si(l))},oi.prototype.sa=function(l){Me(this.g,new nh)},oi.prototype.ra=function(){Me(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,ib=function(){return new Qs},rb=function(){return Bs()},nb=ni,im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,sf=zo,kl.COMPLETE="complete",tb=kl,yu.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",Re.prototype.listen=Re.prototype.K,dc=yu,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,eb=Ct}).apply(typeof Wh!="undefined"?Wh:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const eE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new a_("@firebase/firestore");function xa(){return Po.logLevel}function oe(n,...e){if(Po.logLevel<=rt.DEBUG){const t=e.map(l_);Po.debug(`Firestore (${fu}): ${n}`,...t)}}function Kt(n,...e){if(Po.logLevel<=rt.ERROR){const t=e.map(l_);Po.error(`Firestore (${fu}): ${n}`,...t)}}function Wc(n,...e){if(Po.logLevel<=rt.WARN){const t=e.map(l_);Po.warn(`Firestore (${fu}): ${n}`,...t)}}function l_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${fu}) INTERNAL ASSERTION FAILED: `+n;throw Kt(e),new Error(e)}function Se(n,e){n||Te()}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(An.UNAUTHENTICATED))}shutdown(){}}class MM{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let s=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pi,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new NM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new An(e)}}class FM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new FM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $M{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Se(this.o===void 0);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string"),this.R=t.token,new BM(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(n){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=qM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ob(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Lt(0,0))}static max(){return new xe(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(),r===void 0?r=e.length-t:r>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Hc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tt extends Hc{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Tt(t)}static emptyPath(){return new Tt([])}}const zM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Hc{construct(e,t,r){return new Nt(e,t,r)}static isValidIdentifier(e){return zM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ve(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ve(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new ve(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Tt.fromString(e))}static fromName(e){return new ye(Tt.fromString(e).popFirst(5))}static empty(){return new ye(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function sm(n){return n.fields.find(e=>e.kind===2)}function lo(n){return n.fields.filter(e=>e.kind!==2)}Vf.UNKNOWN_ID=-1;class of{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gc(0,or.min())}}function ab(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new or(i,ye.empty(),e)}function ub(n){return new or(n.readTime,n.key,-1)}class or{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new or(xe.min(),ye.empty(),-1)}static max(){return new or(xe.max(),ye.empty(),-1)}}function h_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ns(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==cb)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(i=>i?K.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new K((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const d=h;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new K((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Pi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Rc(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=f_(r.target.error);this.V.reject(new Rc(e,i))}}static open(e,t,r,i){try{return new gd(t,e.transaction(i,r))}catch(s){throw new Rc(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jM(t)}}class Rs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Rs.S(sn())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return oe("SimpleDb","Removing database:",e),ho(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!HT())return!1;if(Rs.v())return!0;const e=sn(),t=Rs.S(e),r=0<t&&t<10,i=hb(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(oe("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Rc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ve(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ve(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Rc(e,a))},i.onupgradeneeded=s=>{oe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{oe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const c=gd.open(this.db,e,s?"readonly":"readwrite",r),h=i(c).next(d=>(c.g(),d)).catch(d=>(c.abort(d),K.reject(d))).toPromise();return h.catch(()=>{}),await c.m,h}catch(c){const h=c,d=h.name!=="FirebaseError"&&a<3;if(oe("SimpleDb","Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function hb(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class KM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ho(this.B.delete())}}class Rc extends ve{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ls(n){return n.name==="IndexedDbTransactionError"}class jM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ho(r)}add(e){return oe("SimpleDb","ADD",this.store.name,e,e),ho(this.store.add(e))}get(e){return ho(this.store.get(e)).next(t=>(t===void 0&&(t=null),oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return oe("SimpleDb","DELETE",this.store.name,e),ho(this.store.delete(e))}count(){return oe("SimpleDb","COUNT",this.store.name),ho(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new K((a,c)=>{s.onerror=h=>{c(h.target.error)},s.onsuccess=h=>{a(h.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(c,h)=>{a.push(h)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new K((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,c)=>c.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new K((r,i)=>{t.onerror=s=>{const a=f_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}W(e,t){const r=[];return new K((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const h=new KM(c),d=t(c.primaryKey,c.value,h);if(d instanceof K){const p=d.catch(_=>(h.done(),K.reject(_)));r.push(p)}h.isDone?i():h.K===null?c.continue():c.continue(h.K)}}).next(()=>K.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ho(n){return new K((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=f_(r.target.error);t(i)}})}let tE=!1;function f_(n){const e=Rs.S(sn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tE||(tE=!0,setTimeout(()=>{throw r},0)),r}}return n}class WM{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{oe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Ls(t)?oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ns(t)}await this.X(6e4)})}}class HM{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return K.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return oe("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(c=>(oe("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=ub(s);h_(a,r)>0&&(r=a)}),new or(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jn.oe=-1;function md(n){return n==null}function Qc(n){return n===0&&1/n==-1/0}function fb(n){return typeof n=="number"&&Number.isInteger(n)&&!Qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nE(e)),e=GM(n.get(t),e);return nE(e)}function GM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function nE(n){return n+""}function Qr(n){const e=n.length;if(Se(e>=2),e===2)return Se(n.charAt(0)===""&&n.charAt(1)===""),Tt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&Te(),n.charAt(a+1)){case"":const c=n.substring(s,a);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Te()}s=a+2}return new Tt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n,e){return[n,Bn(e)]}function db(n,e,t){return[n,Bn(e),t]}const QM={},JM=["prefixPath","collectionGroup","readTime","documentId"],YM=["prefixPath","collectionGroup","documentId"],XM=["collectionGroup","readTime","prefixPath","documentId"],ZM=["canonicalId","targetId"],eF=["targetId","path"],tF=["path","targetId"],nF=["collectionId","parent"],rF=["indexId","uid"],iF=["uid","sequenceNumber"],sF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oF=["indexId","uid","orderedDocumentKey"],aF=["userId","collectionPath","documentId"],uF=["userId","collectionPath","largestBatchId"],cF=["userId","collectionGroup","largestBatchId"],pb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lF=[...pb,"documentOverlays"],gb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mb=gb,d_=[...mb,"indexConfiguration","indexState","indexEntries"],hF=d_,fF=[...d_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om extends lb{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function on(n,e){const t=be(n);return Rs.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _b(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r!=null?r:_n.RED,this.left=i!=null?i:_n.EMPTY,this.right=s!=null?s:_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new _n(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,r,i,s){return this}insert(e,t,r){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sE(this.data.getIterator())}getIteratorFrom(e){return new sE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wt(this.comparator);return t.data=e,t}}class sE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ia(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new wt(Nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new yb("Invalid base64 string: "+s):s}}(e);return new Ht(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const dF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(n){if(Se(!!n),typeof n=="string"){let e=0;const t=dF.exec(n);if(Se(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xs(n){return typeof n=="string"?Ht.fromBase64String(n):Ht.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function g_(n){const e=n.mapValue.fields.__previous_value__;return p_(e)?g_(e):e}function Jc(n){const e=ki(n.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,t,r,i,s,a,c,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d}}class Co{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uf={nullValue:"NULL_VALUE"};function xo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?p_(n)?4:vb(n)?9007199254740991:_d(n)?10:11:Te()}function ei(n,e){if(n===e)return!0;const t=xo(n);if(t!==xo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jc(n).isEqual(Jc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ki(i.timestampValue),c=ki(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return xs(i.bytesValue).isEqual(xs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xt(i.doubleValue),c=xt(s.doubleValue);return a===c?Qc(a)===Qc(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(iE(a)!==iE(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!ei(a[h],c[h])))return!1;return!0}(n,e);default:return Te()}}function Yc(n,e){return(n.values||[]).find(t=>ei(t,e))!==void 0}function Ds(n,e){if(n===e)return 0;const t=xo(n),r=xo(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(s,a){const c=xt(s.integerValue||s.doubleValue),h=xt(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return oE(n.timestampValue,e.timestampValue);case 4:return oE(Jc(n),Jc(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return function(s,a){const c=xs(s),h=xs(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),h=a.split("/");for(let d=0;d<c.length&&d<h.length;d++){const p=ze(c[d],h[d]);if(p!==0)return p}return ze(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const c=ze(xt(s.latitude),xt(a.latitude));return c!==0?c:ze(xt(s.longitude),xt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return aE(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,h,d,p;const _=s.fields||{},v=a.fields||{},I=(c=_.value)===null||c===void 0?void 0:c.arrayValue,O=(h=v.value)===null||h===void 0?void 0:h.arrayValue,M=ze(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((p=O==null?void 0:O.values)===null||p===void 0?void 0:p.length)||0);return M!==0?M:aE(I,O)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Es.mapValue&&a===Es.mapValue)return 0;if(s===Es.mapValue)return 1;if(a===Es.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let _=0;_<h.length&&_<p.length;++_){const v=ze(h[_],p[_]);if(v!==0)return v;const I=Ds(c[h[_]],d[p[_]]);if(I!==0)return I}return ze(h.length,p.length)}(n.mapValue,e.mapValue);default:throw Te()}}function oE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=ki(n),r=ki(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function aE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Ds(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function Ja(n){return am(n)}function am(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ki(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=am(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${am(t.fields[a])}`;return i+"}"}(n.mapValue):Te()}function m_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function um(n){return!!n&&"integerValue"in n}function Xc(n){return!!n&&"arrayValue"in n}function uE(n){return!!n&&"nullValue"in n}function cE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cf(n){return!!n&&"mapValue"in n}function _d(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Pc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const wb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function gF(n){return"nullValue"in n?uf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?m_(Co.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?_d(n)?wb:{mapValue:{}}:Te()}function mF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?m_(Co.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?wb:"mapValue"in n?_d(n)?{mapValue:{}}:Es:Te()}function lE(n,e){const t=Ds(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hE(n,e){const t=Ds(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=Pc(a):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Cn(Pc(this.value))}}function Eb(n){const e=[];return Bo(n.fields,(t,r)=>{const i=new Nt([t]);if(cf(r)){const s=Eb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Bt(e,0,xe.min(),xe.min(),xe.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new Bt(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new Bt(e,2,t,xe.min(),xe.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,xe.min(),xe.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.position=e,this.inclusive=t}}function fE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),t.key):r=Ds(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ei(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t="asc"){this.field=e,this.dir=t}}function _F(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{}class st extends Ib{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yF(e,t,r):t==="array-contains"?new EF(e,r):t==="in"?new Pb(e,r):t==="not-in"?new IF(e,r):t==="array-contains-any"?new TF(e,r):new st(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vF(e,r):new wF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ds(t,this.value)):t!==null&&xo(this.value)===xo(t)&&this.matchesComparison(Ds(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends Ib{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new vt(e,t)}matches(e){return Xa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xa(n){return n.op==="and"}function cm(n){return n.op==="or"}function __(n){return Tb(n)&&Xa(n)}function Tb(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function lm(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+Ja(n.value);if(__(n))return n.filters.map(e=>lm(e)).join(",");{const e=n.filters.map(t=>lm(t)).join(",");return`${n.op}(${e})`}}function bb(n,e){return n instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&ei(r.value,i.value)}(n,e):n instanceof vt?function(r,i){return i instanceof vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&bb(a,i.filters[c]),!0):!1}(n,e):void Te()}function Ab(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function Sb(n){return n instanceof st?function(t){return`${t.field.canonicalString()} ${t.op} ${Ja(t.value)}`}(n):n instanceof vt?function(t){return t.op.toString()+" {"+t.getFilters().map(Sb).join(" ,")+"}"}(n):"Filter"}class yF extends st{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class vF extends st{constructor(e,t){super(e,"in",t),this.keys=Rb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wF extends st{constructor(e,t){super(e,"not-in",t),this.keys=Rb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class EF extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xc(t)&&Yc(t.arrayValue,this.value)}}class Pb extends st{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yc(this.value.arrayValue,t)}}class IF extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Yc(this.value.arrayValue,t)}}class TF extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function hm(n,e=null,t=[],r=[],i=null,s=null,a=null){return new bF(n,e,t,r,i,s,a)}function Do(n){const e=be(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ja(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ja(r)).join(",")),e.ue=t}return e.ue}function ml(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_F(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dE(n.startAt,e.startAt)&&dE(n.endAt,e.endAt)}function Lf(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Mf(n,e){return n.filters.filter(t=>t instanceof st&&t.field.isEqual(e))}function pE(n,e,t){let r=uf,i=!0;for(const s of Mf(n,e)){let a=uf,c=!0;switch(s.op){case"<":case"<=":a=gF(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=uf}lE({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];lE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function gE(n,e,t){let r=Es,i=!0;for(const s of Mf(n,e)){let a=Es,c=!0;switch(s.op){case">=":case">":a=mF(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Es}hE({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];hE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Cb(n,e,t,r,i,s,a,c){return new yd(n,e,t,r,i,s,a,c)}function _l(n){return new yd(n)}function mE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function AF(n){return n.collectionGroup!==null}function Cc(n){const e=be(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new wt(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Nf(s,r))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new Nf(Nt.keyField(),r))}return e.ce}function ir(n){const e=be(n);return e.le||(e.le=SF(e,Cc(n))),e.le}function SF(n,e){if(n.limitType==="F")return hm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Nf(i.field,s)});const t=n.endAt?new Ya(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ya(n.startAt.position,n.startAt.inclusive):null;return hm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fm(n,e,t){return new yd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vd(n,e){return ml(ir(n),ir(e))&&n.limitType===e.limitType}function xb(n){return`${Do(ir(n))}|lt:${n.limitType}`}function Da(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Sb(i)).join(", ")}]`),md(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ja(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ja(i)).join(",")),`Target(${r})`}(ir(n))}; limitType=${n.limitType})`}function yl(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Cc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,h){const d=fE(a,c,h);return a.inclusive?d<=0:d<0}(r.startAt,Cc(r),i)||r.endAt&&!function(a,c,h){const d=fE(a,c,h);return a.inclusive?d>=0:d>0}(r.endAt,Cc(r),i))}(n,e)}function Db(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kb(n){return(e,t)=>{let r=!1;for(const i of Cc(n)){const s=RF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function RF(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(s,a,c){const h=a.data.field(s),d=c.data.field(s);return h!==null&&d!==null?Ds(h,d):Te()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _b(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=new At(ye.comparator);function rr(){return PF}const Ob=new At(ye.comparator);function pc(...n){let e=Ob;for(const t of n)e=e.insert(t.key,t);return e}function Vb(n){let e=Ob;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jr(){return xc()}function Nb(){return xc()}function xc(){return new Ms(n=>n.toString(),(n,e)=>n.isEqual(e))}const CF=new At(ye.comparator),xF=new wt(ye.comparator);function Xe(...n){let e=xF;for(const t of n)e=e.add(t);return e}const DF=new wt(ze);function y_(){return DF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function Lb(n){return{integerValue:""+n}}function kF(n,e){return fb(e)?Lb(e):v_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function OF(n,e,t){return n instanceof Zc?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&p_(s)&&(s=g_(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Za?Fb(n,e):n instanceof eu?Ub(n,e):function(i,s){const a=Mb(i,s),c=_E(a)+_E(i.Pe);return um(a)&&um(i.Pe)?Lb(c):v_(i.serializer,c)}(n,e)}function VF(n,e,t){return n instanceof Za?Fb(n,e):n instanceof eu?Ub(n,e):t}function Mb(n,e){return n instanceof el?function(r){return um(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zc extends wd{}class Za extends wd{constructor(e){super(),this.elements=e}}function Fb(n,e){const t=Bb(e);for(const r of n.elements)t.some(i=>ei(i,r))||t.push(r);return{arrayValue:{values:t}}}class eu extends wd{constructor(e){super(),this.elements=e}}function Ub(n,e){let t=Bb(e);for(const r of n.elements)t=t.filter(i=>!ei(i,r));return{arrayValue:{values:t}}}class el extends wd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function _E(n){return xt(n.integerValue||n.doubleValue)}function Bb(n){return Xc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,t){this.field=e,this.transform=t}}function LF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Za&&i instanceof Za||r instanceof eu&&i instanceof eu?Qa(r.elements,i.elements,ei):r instanceof el&&i instanceof el?ei(r.Pe,i.Pe):r instanceof Zc&&i instanceof Zc}(n.transform,e.transform)}class MF{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ed{}function $b(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Id(n.key,xn.none()):new du(n.key,n.data,xn.none());{const t=n.data,r=Cn.empty();let i=new wt(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Mi(n.key,r,new Yn(i.toArray()),xn.none())}}function FF(n,e,t){n instanceof du?function(i,s,a){const c=i.value.clone(),h=vE(i.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Mi?function(i,s,a){if(!lf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=vE(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(qb(i)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Dc(n,e,t,r){return n instanceof du?function(s,a,c,h){if(!lf(s.precondition,a))return c;const d=s.value.clone(),p=wE(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Mi?function(s,a,c,h){if(!lf(s.precondition,a))return c;const d=wE(s.fieldTransforms,h,a),p=a.data;return p.setAll(qb(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(s,a,c){return lf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function UF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Mb(r.transform,i||null);s!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,s))}return t||null}function yE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qa(r,i,(s,a)=>LF(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class du extends Ed{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mi extends Ed{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function vE(n,e,t){const r=new Map;Se(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,VF(a,c,t[i]))}return r}function wE(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,OF(s,a,e))}return r}class Id extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zb extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&FF(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Nb();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const h=$b(a,c);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(t,r)=>yE(t,r))&&Qa(this.baseMutations,e.baseMutations,(t,r)=>yE(t,r))}}class E_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Se(e.mutations.length===r.length);let i=function(){return CF}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new E_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,ot;function $F(n){switch(n){default:return Te();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function Kb(n){if(n===void 0)return Kt("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Xt.OK:return ne.OK;case Xt.CANCELLED:return ne.CANCELLED;case Xt.UNKNOWN:return ne.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ne.INTERNAL;case Xt.UNAVAILABLE:return ne.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ne.NOT_FOUND;case Xt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Xt.ABORTED:return ne.ABORTED;case Xt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Xt.DATA_LOSS:return ne.DATA_LOSS;default:return Te()}}(ot=Xt||(Xt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=new wo([4294967295,4294967295],0);function EE(n){const e=qF().encode(n),t=new ZT;return t.update(e),new Uint8Array(t.digest())}function IE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wo([t,r],0),new wo([i,s],0)]}class T_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=wo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(wo.fromNumber(r)));return i.compare(zF)===1&&(i=new wo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=EE(e),[r,i]=IE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new T_(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const t=EE(e),[r,i]=IE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vl(xe.min(),i,new At(ze),rr(),Xe())}}class wl{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wl(r,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class jb{constructor(e,t){this.targetId=e,this.me=t}}class Wb{constructor(e,t,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class TE{constructor(){this.fe=0,this.ge=AE(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Xe(),t=Xe(),r=Xe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Te()}}),new wl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=AE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class KF{constructor(e){this.Le=e,this.Be=new Map,this.ke=rr(),this.qe=bE(),this.Qe=new At(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Lf(s))if(r===0){const a=new ye(s.path);this.Ue(t,a,Bt.newNoDocument(a,xe.min()))}else Se(r===1);else{const a=this.Ye(t);if(a!==r){const c=this.Ze(e),h=c?this.Xe(c,e,a):1;if(h!==0){this.je(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,c;try{a=xs(r).toUint8Array()}catch(h){if(h instanceof yb)return Wc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new T_(a,i,s)}catch(h){return Wc(h instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const c=this.Je(a);if(c){if(s.current&&Lf(c.target)){const h=new ye(c.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Bt.newNoDocument(h,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=Xe();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new vl(e,t,this.Qe,this.ke,r);return this.ke=rr(),this.qe=bE(),this.Qe=new At(ze),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new TE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new wt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new TE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function bE(){return new At(ye.comparator)}function AE(){return new At(ye.comparator)}const jF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),WF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),HF=(()=>({and:"AND",or:"OR"}))();class GF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dm(n,e){return n.useProto3Json||md(e)?e:{value:e}}function tu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QF(n,e){return tu(n,e.toTimestamp())}function $n(n){return Se(!!n),xe.fromTimestamp(function(t){const r=ki(t);return new Lt(r.seconds,r.nanos)}(n))}function b_(n,e){return pm(n,e).canonicalString()}function pm(n,e){const t=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Gb(n){const e=Tt.fromString(n);return Se(rA(e)),e}function Ff(n,e){return b_(n.databaseId,e.path)}function Eo(n,e){const t=Gb(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(Yb(t))}function Qb(n,e){return b_(n.databaseId,e)}function Jb(n){const e=Gb(n);return e.length===4?Tt.emptyPath():Yb(e)}function gm(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yb(n){return Se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function SE(n,e,t){return{name:Ff(n,e),fields:t.value.mapValue.fields}}function JF(n,e,t){const r=Eo(n,e.name),i=$n(e.updateTime),s=e.createTime?$n(e.createTime):xe.min(),a=new Cn({mapValue:{fields:e.fields}}),c=Bt.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function YF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Se(p===void 0||typeof p=="string"),Ht.fromBase64String(p||"")):(Se(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ht.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const p=d.code===void 0?ne.UNKNOWN:Kb(d.code);return new ve(p,d.message||"")}(a);t=new Wb(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Eo(n,r.document.name),s=$n(r.document.updateTime),a=r.document.createTime?$n(r.document.createTime):xe.min(),c=new Cn({mapValue:{fields:r.document.fields}}),h=Bt.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new hf(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Eo(n,r.document),s=r.readTime?$n(r.readTime):xe.min(),a=Bt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new hf([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Eo(n,r.document),s=r.removedTargetIds||[];t=new hf([],s,i,null)}else{if(!("filter"in e))return Te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new BF(i,s),c=r.targetId;t=new jb(c,a)}}return t}function Uf(n,e){let t;if(e instanceof du)t={update:SE(n,e.key,e.value)};else if(e instanceof Id)t={delete:Ff(n,e.key)};else if(e instanceof Mi)t={update:SE(n,e.key,e.data),updateMask:r2(e.fieldMask)};else{if(!(e instanceof zb))return Te();t={verify:Ff(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof Zc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Za)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof eu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof el)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw Te()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:QF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te()}(n,e.precondition)),t}function mm(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?xn.updateTime($n(s.updateTime)):s.exists!==void 0?xn.exists(s.exists):xn.none()}(e.currentDocument):xn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;if("setToServerValue"in c)Se(c.setToServerValue==="REQUEST_TIME"),h=new Zc;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];h=new Za(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];h=new eu(p)}else"increment"in c?h=new el(a,c.increment):Te();const d=Nt.fromServerFormat(c.fieldPath);return new NF(d,h)}(n,i)):[];if(e.update){e.update.name;const i=Eo(n,e.update.name),s=new Cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(h){const d=h.fieldPaths||[];return new Yn(d.map(p=>Nt.fromServerFormat(p)))}(e.updateMask);return new Mi(i,s,a,t,r)}return new du(i,s,t,r)}if(e.delete){const i=Eo(n,e.delete);return new Id(i,t)}if(e.verify){const i=Eo(n,e.verify);return new zb(i,t)}return Te()}function XF(n,e){return n&&n.length>0?(Se(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?$n(i.updateTime):$n(s);return a.isEqual(xe.min())&&(a=$n(s)),new MF(a,i.transformResults||[])}(t,e))):[]}function Xb(n,e){return{documents:[Qb(n,e.path)]}}function Zb(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Qb(n,i);const s=function(d){if(d.length!==0)return nA(vt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:ka(v.field),direction:e2(v.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=dm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function eA(n){let e=Jb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Se(r===1);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(_){const v=tA(_);return v instanceof vt&&__(v)?v.getFilters():[v]}(t.where));let a=[];t.orderBy&&(a=function(_){return _.map(v=>function(O){return new Nf(Oa(O.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(_){let v;return v=typeof _=="object"?_.value:_,md(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(_){const v=!!_.before,I=_.values||[];return new Ya(I,v)}(t.startAt));let d=null;return t.endAt&&(d=function(_){const v=!_.before,I=_.values||[];return new Ya(I,v)}(t.endAt)),Cb(e,i,a,s,c,"F",h,d)}function ZF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Oa(t.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oa(t.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Oa(t.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Oa(t.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return st.create(Oa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return vt.create(t.compositeFilter.filters.map(r=>tA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function e2(n){return jF[n]}function t2(n){return WF[n]}function n2(n){return HF[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Oa(n){return Nt.fromServerFormat(n.fieldPath)}function nA(n){return n instanceof st?function(t){if(t.op==="=="){if(cE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(uE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(uE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:t2(t.op),value:t.value}}}(n):n instanceof vt?function(t){const r=t.getFilters().map(i=>nA(i));return r.length===1?r[0]:{compositeFilter:{op:n2(t.op),filters:r}}}(n):Te()}function r2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t,r,i,s=xe.min(),a=xe.min(),c=Ht.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.ct=e}}function i2(n,e){let t;if(e.document)t=JF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=Oo(e.noDocument.readTime);t=Bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te();{const r=ye.fromSegments(e.unknownDocument.path),i=Oo(e.unknownDocument.version);t=Bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Lt(i[0],i[1]);return xe.fromTimestamp(s)}(e.readTime)),t}function RE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:Ff(s,a.key),fields:a.data.value.mapValue.fields,updateTime:tu(s,a.version.toTimestamp()),createTime:tu(s,a.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ko(e.version)};else{if(!e.isUnknownDocument())return Te();r.unknownDocument={path:t.path.toArray(),version:ko(e.version)}}return r}function Bf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ko(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oo(n){const e=new Lt(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function fo(n,e){const t=(e.baseMutations||[]).map(s=>mm(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>mm(n.ct,s)),i=Lt.fromMillis(e.localWriteTimeMs);return new w_(e.batchId,i,t,r)}function mc(n){const e=Oo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Oo(n.lastLimboFreeSnapshotVersion):xe.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Se(s.documents.length===1),ir(_l(Jb(s.documents[0])))}(n.query):function(s){return ir(eA(s))}(n.query),new bi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ht.fromBase64String(n.resumeToken))}function sA(n,e){const t=ko(e.snapshotVersion),r=ko(e.lastLimboFreeSnapshotVersion);let i;i=Lf(e.target)?Xb(n.ct,e.target):Zb(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Do(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function oA(n){const e=eA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fm(e,e.limit,"L"):e}function gg(n,e){return new I_(e.largestBatchId,mm(n.ct,e.overlayMutation))}function PE(n,e){const t=e.path.lastSegment();return[n,Bn(e.path.popLast()),t]}function CE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ko(r.readTime),documentKey:Bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{getBundleMetadata(e,t){return xE(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Oo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return xE(e).put(function(i){return{bundleId:i.id,createTime:ko($n(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return DE(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:oA(s.bundledQuery),readTime:Oo(s.readTime)}}(r)})}saveNamedQuery(e,t){return DE(e).put(function(i){return{name:i.name,readTime:ko($n(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function xE(n){return on(n,"bundles")}function DE(n){return on(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Td(e,r)}getOverlay(e,t){return Xu(e).get(PE(this.userId,t)).next(r=>r?gg(this.serializer,r):null)}getOverlays(e,t){const r=Jr();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const c=new I_(t,a);i.push(this.ht(e,c))}),K.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Bn(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Xu(e).j("collectionPathOverlayIndex",c))}),K.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Jr(),s=Bn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xu(e).U("collectionPathOverlayIndex",a).next(c=>{for(const h of c){const d=gg(this.serializer,h);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Jr();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xu(e).J({index:"collectionGroupOverlayIndex",range:c},(h,d,p)=>{const _=gg(this.serializer,d);s.size()<i||_.largestBatchId===a?(s.set(_.getKey(),_),a=_.largestBatchId):p.done()}).next(()=>s)}ht(e,t){return Xu(e).put(function(i,s,a){const[c,h,d]=PE(s,a.mutation.key);return{userId:s,collectionPath:h,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Uf(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function Xu(n){return on(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{Pt(e){return on(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Ht.fromUint8Array(r):Ht.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(xt(e.integerValue));else if("doubleValue"in e){const r=xt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Qc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ki(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(xs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?vb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):_d(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(xt(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ye.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}po.vt=new po;function a2(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function kE(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=a2(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class u2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=kE(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=kE(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class c2{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class l2{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Zu{constructor(){this.jt=new u2,this.Ht=new c2(this.jt),this.Jt=new l2(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new go(this.indexId,this.documentKey,this.arrayValue,r)}}function is(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=OE(n.arrayValue,e.arrayValue),t!==0?t:(t=OE(n.directionalValue,e.directionalValue),t!==0?t:ye.comparator(n.documentKey,e.documentKey)))}function OE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.Xt=new wt((t,r)=>Nt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Se(e.collectionGroup===this.collectionId),this.nn)return!1;const t=sm(e);if(t!==void 0&&!this.sn(t))return!1;const r=lo(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[s];if(!this.on(c,h)||!this._n(this.en[a++],h))return!1}++s}for(;s<r.length;++s){const c=r[s];if(a>=this.en.length||!this._n(this.en[a++],c))return!1}return!0}an(){if(this.nn)return null;let e=new wt(Nt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new of(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new of(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new of(r.field,r.dir==="asc"?0:1)));return new Vf(Vf.UNKNOWN_ID,this.collectionId,t,Gc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n){var e,t;if(Se(n instanceof st||n instanceof vt),n instanceof st){if(n instanceof Pb){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>st.create(n.field,"==",s)))||[];return vt.create(i,"or")}return n}const r=n.filters.map(i=>aA(i));return vt.create(r,n.op)}function h2(n){if(n.getFilters().length===0)return[];const e=vm(aA(n));return Se(uA(e)),_m(e)||ym(e)?[e]:e.getFilters()}function _m(n){return n instanceof st}function ym(n){return n instanceof vt&&__(n)}function uA(n){return _m(n)||ym(n)||function(t){if(t instanceof vt&&cm(t)){for(const r of t.getFilters())if(!_m(r)&&!ym(r))return!1;return!0}return!1}(n)}function vm(n){if(Se(n instanceof st||n instanceof vt),n instanceof st)return n;if(n.filters.length===1)return vm(n.filters[0]);const e=n.filters.map(r=>vm(r));let t=vt.create(e,n.op);return t=$f(t),uA(t)?t:(Se(t instanceof vt),Se(Xa(t)),Se(t.filters.length>1),t.filters.reduce((r,i)=>A_(r,i)))}function A_(n,e){let t;return Se(n instanceof st||n instanceof vt),Se(e instanceof st||e instanceof vt),t=n instanceof st?e instanceof st?function(i,s){return vt.create([i,s],"and")}(n,e):NE(n,e):e instanceof st?NE(e,n):function(i,s){if(Se(i.filters.length>0&&s.filters.length>0),Xa(i)&&Xa(s))return Ab(i,s.getFilters());const a=cm(i)?i:s,c=cm(i)?s:i,h=a.filters.map(d=>A_(d,c));return vt.create(h,"or")}(n,e),$f(t)}function NE(n,e){if(Xa(e))return Ab(e,n.getFilters());{const t=e.filters.map(r=>A_(n,r));return vt.create(t,"or")}}function $f(n){if(Se(n instanceof st||n instanceof vt),n instanceof st)return n;const e=n.getFilters();if(e.length===1)return $f(e[0]);if(Tb(n))return n;const t=e.map(i=>$f(i)),r=[];return t.forEach(i=>{i instanceof st?r.push(i):i instanceof vt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:vt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.un=new S_}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(or.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(or.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class S_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(Tt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new Uint8Array(0);class d2{constructor(e,t){this.databaseId=t,this.cn=new S_,this.ln=new Ms(r=>Do(r),(r,i)=>ml(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Bn(i)};return LE(e).put(s)}return K.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ob(t),""],!1,!0);return LE(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Qr(a.parent))}return r})}addFieldIndex(e,t){const r=ec(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=ba(e);return s.next(c=>{a.put(CE(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ec(e),i=ba(e),s=Ta(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ec(e),r=Ta(e),i=ba(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return K.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new VE(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Ta(e);let i=!0;const s=new Map;return K.forEach(this.hn(t),a=>this.Pn(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=Xe();const c=[];return K.forEach(s,(h,d)=>{oe("IndexedDbIndexManager",`Using index ${function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(h)} to execute ${Do(t)}`);const p=function(q,W){const Y=sm(W);if(Y===void 0)return null;for(const re of Mf(q,Y.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(d,h),_=function(q,W){const Y=new Map;for(const re of lo(W))for(const P of Mf(q,re.fieldPath))switch(P.op){case"==":case"in":Y.set(re.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return Y.set(re.fieldPath.canonicalString(),P.value),Array.from(Y.values())}return null}(d,h),v=function(q,W){const Y=[];let re=!0;for(const P of lo(W)){const S=P.kind===0?pE(q,P.fieldPath,q.startAt):gE(q,P.fieldPath,q.startAt);Y.push(S.value),re&&(re=S.inclusive)}return new Ya(Y,re)}(d,h),I=function(q,W){const Y=[];let re=!0;for(const P of lo(W)){const S=P.kind===0?gE(q,P.fieldPath,q.endAt):pE(q,P.fieldPath,q.endAt);Y.push(S.value),re&&(re=S.inclusive)}return new Ya(Y,re)}(d,h),O=this.In(h,d,v),M=this.In(h,d,I),F=this.Tn(h,d,_),Q=this.En(h.indexId,p,O,v.inclusive,M,I.inclusive,F);return K.forEach(Q,z=>r.G(z,t.limit).next(q=>{q.forEach(W=>{const Y=ye.fromSegments(W.documentKey);a.has(Y)||(a=a.add(Y),c.push(Y))})}))}).next(()=>c)}return K.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=h2(vt.create(e.filters,"and")).map(r=>hm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,a,c){const h=(t!=null?t.length:1)*Math.max(r.length,s.length),d=h/(t!=null?t.length:1),p=[];for(let _=0;_<h;++_){const v=t?this.dn(t[_/d]):Gh,I=this.An(e,v,r[_%d],i),O=this.Rn(e,v,s[_%d],a),M=c.map(F=>this.An(e,v,F,!0));p.push(...this.createRange(I,O,M))}return p}An(e,t,r,i){const s=new go(e,ye.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new go(e,ye.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new VE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.rn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const i=this.hn(t);return K.forEach(i,s=>this.Pn(e,s).next(a=>{a?r!==0&&a.fields.length<function(h){let d=new wt(Nt.comparator),p=!1;for(const _ of h.filters)for(const v of _.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:d=d.add(v.field));for(const _ of h.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Zu;for(const i of lo(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);po.vt.It(s,a)}return r.zt()}dn(e){const t=new Zu;return po.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Zu;return po.vt.It(m_(this.databaseId,t),r.Yt(function(s){const a=lo(s);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Zu);let s=0;for(const a of lo(e)){const c=r[s++];for(const h of i)if(this.fn(t,a.fieldPath)&&Xc(c))i=this.gn(i,a,c);else{const d=h.Yt(a.kind);po.vt.It(c,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const h=new Zu;h.seed(c.zt()),po.vt.It(a,h.Yt(t.kind)),s.push(h)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof st&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=ec(e),i=ba(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return K.forEach(s,c=>i.get([c.indexId,this.uid]).next(h=>{a.push(function(p,_){const v=_?new Gc(_.sequenceNumber,new or(Oo(_.readTime),new ye(Qr(_.documentKey)),_.largestBatchId)):Gc.empty(),I=p.fields.map(([O,M])=>new of(Nt.fromServerFormat(O),M));return new Vf(p.indexId,p.collectionGroup,I,v)}(c,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ze(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ec(e),s=ba(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>K.forEach(c,h=>s.put(CE(h.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?K.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),K.forEach(c,h=>this.wn(e,i,h).next(d=>{const p=this.Sn(s,h);return d.isEqual(p)?K.resolve():this.bn(e,s,h,d,p)}))))})}Dn(e,t,r,i){return Ta(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ta(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Ta(e);let s=new wt(is);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(a,c)=>{s=s.add(new go(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}Sn(e,t){let r=new wt(is);const i=this.Vn(t,e);if(i==null)return r;const s=sm(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Xc(a))for(const c of a.arrayValue.values||[])r=r.add(new go(t.indexId,e.key,this.dn(c),i))}else r=r.add(new go(t.indexId,e.key,Gh,i));return r}bn(e,t,r,i,s){oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(h,d,p,_,v){const I=h.getIterator(),O=d.getIterator();let M=Ia(I),F=Ia(O);for(;M||F;){let Q=!1,z=!1;if(M&&F){const q=p(M,F);q<0?z=!0:q>0&&(Q=!0)}else M!=null?z=!0:Q=!0;Q?(_(F),F=Ia(O)):z?(v(M),M=Ia(I)):(M=Ia(I),F=Ia(O))}}(i,s,is,c=>{a.push(this.Dn(e,t,r,c))},c=>{a.push(this.vn(e,t,r,c))}),K.waitFor(a)}yn(e){let t=1;return ba(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>is(a,c)).filter((a,c,h)=>!c||is(a,h[c-1])!==0);const i=[];i.push(e);for(const a of r){const c=is(a,e),h=is(a,t);if(c===0)i[0]=e.Zt();else if(c>0&&h<0)i.push(a),i.push(a.Zt());else if(h>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const c=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Gh,[]],h=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Gh,[]];s.push(IDBKeyRange.bound(c,h))}return s}Cn(e,t){return is(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ME)}getMinOffset(e,t){return K.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Te())).next(ME)}}function LE(n){return on(n,"collectionParents")}function Ta(n){return on(n,"indexEntries")}function ec(n){return on(n,"indexConfiguration")}function ba(n){return on(n,"indexState")}function ME(n){Se(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;h_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new or(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const h=r.J({range:a},(p,_,v)=>(c++,v.delete()));s.push(h.next(()=>{Se(c===1)}));const d=[];for(const p of t.mutations){const _=db(e,p.key.path,t.batchId);s.push(i.delete(_)),d.push(p.key)}return K.waitFor(s).next(()=>d)}function qf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Te();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(41943040,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);class bd{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Se(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new bd(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Va(e),a=ss(e);return a.add({}).next(c=>{Se(typeof c=="number");const h=new w_(c,t,r,i),d=function(I,O,M){const F=M.baseMutations.map(z=>Uf(I.ct,z)),Q=M.mutations.map(z=>Uf(I.ct,z));return{userId:O,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:F,mutations:Q}}(this.serializer,this.userId,h),p=[];let _=new wt((v,I)=>ze(v.canonicalString(),I.canonicalString()));for(const v of i){const I=db(this.userId,v.key.path,c);_=_.add(v.key.path.popLast()),p.push(a.put(d)),p.push(s.put(I,QM))}return _.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[c]=h.keys()}),K.waitFor(p).next(()=>h)})}lookupMutationBatch(e,t){return ss(e).get(t).next(r=>r?(Se(r.userId===this.userId),fo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?K.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ss(e).J({index:"userMutationsIndex",range:i},(a,c,h)=>{c.userId===this.userId&&(Se(c.batchId>=r),s=fo(this.serializer,c)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ss(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).U("userMutationsIndex",t).next(r=>r.map(i=>fo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=af(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Va(e).J({range:i},(a,c,h)=>{const[d,p,_]=a,v=Qr(p);if(d===this.userId&&t.path.isEqual(v))return ss(e).get(_).next(I=>{if(!I)throw Te();Se(I.userId===this.userId),s.push(fo(this.serializer,I))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(ze);const i=[];return t.forEach(s=>{const a=af(this.userId,s.path),c=IDBKeyRange.lowerBound(a),h=Va(e).J({range:c},(d,p,_)=>{const[v,I,O]=d,M=Qr(I);v===this.userId&&s.path.isEqual(M)?r=r.add(O):_.done()});i.push(h)}),K.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=af(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new wt(ze);return Va(e).J({range:a},(h,d,p)=>{const[_,v,I]=h,O=Qr(v);_===this.userId&&r.isPrefixOf(O)?O.length===i&&(c=c.add(I)):p.done()}).next(()=>this.xn(e,c))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ss(e).get(s).next(a=>{if(a===null)throw Te();Se(a.userId===this.userId),r.push(fo(this.serializer,a))}))}),K.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return cA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),K.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Va(e).J({range:r},(s,a,c)=>{if(s[0]===this.userId){const h=Qr(s[1]);i.push(h)}else c.done()}).next(()=>{Se(i.length===0)})})}containsKey(e,t){return lA(e,this.userId,t)}Nn(e){return hA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lA(n,e,t){const r=af(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Va(n).J({range:s,H:!0},(c,h,d)=>{const[p,_,v]=c;p===e&&_===i&&(a=!0),d.done()}).next(()=>a)}function ss(n){return on(n,"mutations")}function Va(n){return on(n,"documentMutations")}function hA(n){return on(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vo(0)}static kn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Vo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>xe.fromTimestamp(new Lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Aa(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Aa(e).J((a,c)=>{const h=mc(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,s.push(this.removeTargetData(e,h)))}).next(()=>K.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Aa(e).J((r,i)=>{const s=mc(i);t(s)})}qn(e){return UE(e).get("targetGlobalKey").next(t=>(Se(t!==null),t))}Qn(e,t){return UE(e).put("targetGlobalKey",t)}Kn(e,t){return Aa(e).put(sA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Do(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Aa(e).J({range:i,index:"queryTargetsIndex"},(a,c,h)=>{const d=mc(c);ml(t,d.target)&&(s=d,h.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ms(e);return t.forEach(a=>{const c=Bn(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),K.waitFor(i)}removeMatchingKeys(e,t,r){const i=ms(e);return K.forEach(t,s=>{const a=Bn(s.path);return K.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ms(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ms(e);let s=Xe();return i.J({range:r,H:!0},(a,c,h)=>{const d=Qr(a[1]),p=new ye(d);s=s.add(p)}).next(()=>s)}containsKey(e,t){const r=Bn(t.path),i=IDBKeyRange.bound([r],[ob(r)],!1,!0);let s=0;return ms(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,c],h,d)=>{a!==0&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Aa(e).get(t).next(r=>r?mc(r):null)}}function Aa(n){return on(n,"targets")}function UE(n){return on(n,"targetGlobal")}function ms(n){return on(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE([n,e],[t,r]){const i=ze(n,t);return i===0?ze(e,r):i}class g2{constructor(e){this.Un=e,this.buffer=new wt(BE),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class m2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ls(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ns(t)}await this.Hn(3e5)})}}class _2{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Jn.oe);const r=new g2(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(FE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FE):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,c,h,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,a=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,t))).next(_=>(s=_,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(d=Date.now(),xa()<=rt.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(h-c)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-p}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:_})))}}function y2(n,e){return new _2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t){this.db=e,this.garbageCollector=y2(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Qh(e,r)}removeReference(e,t,r){return Qh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Qh(e,t)}nr(e,t){return function(i,s){let a=!1;return hA(i).Y(c=>lA(i,c,s).next(h=>(h&&(a=!0),K.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,c)=>{if(c<=t){const h=this.nr(e,a).next(d=>{if(!d)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,xe.min()),ms(e).delete(function(_){return[0,Bn(_.path)]}(a))))});i.push(h)}}).next(()=>K.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Qh(e,t)}tr(e,t){const r=ms(e);let i,s=Jn.oe;return r.J({index:"documentTargetsIndex"},([a,c],{path:h,sequenceNumber:d})=>{a===0?(s!==Jn.oe&&t(new ye(Qr(i)),s),s=d,i=h):s=Jn.oe}).next(()=>{s!==Jn.oe&&t(new ye(Qr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qh(n,e){return ms(n).put(function(r,i){return{targetId:0,path:Bn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.changes=new Ms(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ao(e).put(r)}removeEntry(e,t,r){return ao(e).delete(function(s,a){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Bf(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Bt.newInvalidDocument(t);return ao(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Bt.newInvalidDocument(t)};return ao(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,s)=>{r={document:this.ir(t,s),size:qf(s)}}).next(()=>r)}getEntries(e,t){let r=rr();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)}).next(()=>r)}ar(e,t){let r=rr(),i=new At(ye.comparator);return this._r(e,t,(s,a)=>{const c=this.ir(s,a);r=r.insert(s,c),i=i.insert(s,qf(a))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return K.resolve();let i=new wt(zE);t.forEach(h=>i=i.add(h));const s=IDBKeyRange.bound(tc(i.first()),tc(i.last())),a=i.getIterator();let c=a.getNext();return ao(e).J({index:"documentKeyIndex",range:s},(h,d,p)=>{const _=ye.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&zE(c,_)<0;)r(c,null),c=a.getNext();c&&c.isEqual(_)&&(r(c,d),c=a.hasNext()?a.getNext():null),c?p.$(tc(c)):p.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),Bf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ao(e).U(IDBKeyRange.bound(c,h,!0)).next(d=>{s==null||s.incrementDocumentReadCount(d.length);let p=rr();for(const _ of d){const v=this.ir(ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);v.isFoundDocument()&&(yl(t,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(e,t,r,i){let s=rr();const a=qE(t,r),c=qE(t,or.max());return ao(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(h,d,p)=>{const _=this.ir(ye.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(_.key,_),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new E2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $E(e).get("remoteDocumentGlobalKey").next(t=>(Se(!!t),t))}rr(e,t){return $E(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=i2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return Bt.newInvalidDocument(e)}}function dA(n){return new w2(n)}class E2 extends fA{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ms(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wt((s,a)=>ze(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,c.readTime)),a.isValidDocument()){const h=RE(this.cr.serializer,a);i=i.add(s.path.popLast()),r+=qf(h)-c.size,t.push(this.cr.addEntry(e,s,h))}else if(r-=c.size,this.trackRemovals){const h=RE(this.cr.serializer,a.convertToNoDocument(xe.min()));t.push(this.cr.addEntry(e,s,h))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function $E(n){return on(n,"remoteDocumentGlobal")}function ao(n){return on(n,"remoteDocumentsV14")}function tc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qE(n,e){const t=e.documentKey.path.toArray();return[n,Bf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ze(t[s],r[s]),i)return i;return i=ze(t.length,r.length),i||(i=ze(t[t.length-2],r[r.length-2]),i||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Dc(r.mutation,i,Yn.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xe()){const i=Jr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=pc();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Jr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xe()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=rr();const a=xc(),c=function(){return xc()}();return t.forEach((h,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Mi)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Dc(p.mutation,d,p.mutation.getFieldMask(),Lt.now())):a.set(d.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var _;return c.set(d,new I2(p,(_=a.get(d))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){const r=xc();let i=new At((a,c)=>a-c),s=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let p=r.get(h)||Yn.empty();p=c.applyToLocalView(d,p),r.set(h,p);const _=(i.get(c.batchId)||Xe()).add(h);i=i.insert(c.batchId,_)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,p=h.value,_=Nb();p.forEach(v=>{if(!s.has(v)){const I=$b(t.get(v),r.get(v));I!==null&&_.set(v,I),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,_))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):K.resolve(Jr());let c=-1,h=s;return a.next(d=>K.forEach(d,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(p)?K.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{h=h.insert(p,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,h,d,Xe())).next(p=>({batchId:c,changes:Vb(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=pc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=pc();return this.indexManager.getCollectionParents(e,s).next(c=>K.forEach(c,h=>{const d=function(_,v){return new yd(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((_,v)=>{a=a.insert(_,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((h,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Bt.newInvalidDocument(p)))});let c=pc();return a.forEach((h,d)=>{const p=s.get(h);p!==void 0&&Dc(p.mutation,d,Yn.empty(),Lt.now()),yl(t,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:oA(i.bundledQuery),readTime:$n(i.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.overlays=new At(ye.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jr();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const i=Jr(),s=t.length+1,a=new ye(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new At((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Jr(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Jr(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return K.resolve(c)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new I_(t,r));let s=this.Ir.get(t);s===void 0&&(s=Xe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.Tr=new wt(hn.Er),this.dr=new wt(hn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new hn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new hn(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ye(new Tt([])),r=new hn(t,e),i=new hn(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ye(new Tt([])),r=new hn(t,e),i=new hn(t,e+1);let s=Xe();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new hn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new wt(hn.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new w_(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new hn(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hn(t,0),i=new hn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);s.push(c)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(ze);return t.forEach(i=>{const s=new hn(i,0),a=new hn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new hn(new ye(s),0);let c=new wt(ze);return this.br.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.wr)),!0)},a),K.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Se(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(t.mutations,i=>{const s=new hn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new hn(t,0),i=this.br.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.Mr=e,this.docs=function(){return new At(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let r=rr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=rr();const a=t.path,c=new ye(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||h_(ub(p),r)<=0||(i.has(p.key)||yl(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Te()}Or(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new P2(this)}getSize(e){return K.resolve(this.size)}}class P2 extends fA{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.persistence=e,this.Nr=new Ms(t=>Do(t),ml),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new R_,this.targetCount=0,this.kr=Vo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Jn(0),this.Kr=!1,this.Kr=!0,this.$r=new A2,this.referenceDelegate=e(this),this.Ur=new C2(this),this.indexManager=new f2,this.remoteDocumentCache=function(i){return new R2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iA(t),this.Gr=new T2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new S2(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const i=new x2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class x2 extends lb{constructor(e){super(),this.currentSequenceNumber=e}}class Ad{constructor(e){this.persistence=e,this.Jr=new R_,this.Yr=null}static Zr(e){return new Ad(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{const i=ye.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.serializer=e}O(e,t,r,i){const s=new gd("createOrUpgrade",t);r<1&&i>=1&&(function(h){h.createObjectStore("owner")}(e),function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rE,{unique:!0}),h.createObjectStore("documentMutations")}(e),KE(e),function(h){h.createObjectStore("remoteDocuments")}(e));let a=K.resolve();return r<3&&i>=3&&(r!==0&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),KE(e)),a=a.next(()=>function(h){const d=h.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(h,d){return d.store("mutations").U().next(p=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rE,{unique:!0});const _=d.store("mutations"),v=p.map(I=>_.put(I));return K.waitFor(v)})}(e,s))),a=a.next(()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ni(s))),r<6&&i>=6&&(a=a.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(a=a.next(()=>this.ii(s))),r<8&&i>=8&&(a=a.next(()=>this.si(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.oi(s))),r<11&&i>=11&&(a=a.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(h){const d=h.createObjectStore("documentOverlays",{keyPath:aF});d.createIndex("collectionPathOverlayIndex",uF,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",cF,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(h){const d=h.createObjectStore("remoteDocumentsV14",{keyPath:JM});d.createIndex("documentKeyIndex",YM),d.createIndex("collectionGroupIndex",XM)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),r<15&&i>=15&&(a=a.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:rF}).createIndex("sequenceNumberIndex",iF,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:sF}).createIndex("documentKeyIndex",oF,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=qf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>K.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(c=>K.forEach(c,h=>{Se(h.userId===s.userId);const d=fo(this.serializer,h);return cA(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,c)=>{const h=new Tt(a),d=function(_){return[0,Bn(_)]}(h);s.push(t.get(d).next(p=>p?K.resolve():(_=>t.put({targetId:0,path:Bn(_),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>K.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:nF});const r=t.store("collectionParents"),i=new S_,s=a=>{if(i.add(a)){const c=a.lastSegment(),h=a.popLast();return r.put({collectionId:c,parent:Bn(h)})}};return t.store("remoteDocuments").J({H:!0},(a,c)=>{const h=new Tt(a);return s(h.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,c,h],d)=>{const p=Qr(c);return s(p.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=mc(i),a=sA(this.serializer,s);return t.put(a)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const c=t.store("remoteDocumentsV14"),h=function(_){return _.document?new ye(Tt.fromString(_.document.name).popFirst(5)):_.noDocument?ye.fromSegments(_.noDocument.path):_.unknownDocument?ye.fromSegments(_.unknownDocument.path):Te()}(a).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(d))}).next(()=>K.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=dA(this.serializer),s=new gA(Ad.Zr,this.serializer.ct);return r.U().next(a=>{const c=new Map;return a.forEach(h=>{var d;let p=(d=c.get(h.userId))!==null&&d!==void 0?d:Xe();fo(this.serializer,h).keys().forEach(_=>p=p.add(_)),c.set(h.userId,p)}),K.forEach(c,(h,d)=>{const p=new An(d),_=Td.lt(this.serializer,p),v=s.getIndexManager(p),I=bd.lt(p,this.serializer,v,s.referenceDelegate);return new pA(i,I,_,v).recalculateAndSaveOverlaysForDocumentKeys(new om(t,Jn.oe),h).next()})})}}function KE(n){n.createObjectStore("targetDocuments",{keyPath:eF}).createIndex("documentTargetsIndex",tF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZM,{unique:!0}),n.createObjectStore("targetGlobal")}const mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class P_{constructor(e,t,r,i,s,a,c,h,d,p,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=c,this.ci=d,this.li=p,this.hi=_,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!P_.D())throw new ve(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v2(this,i),this.Ai=t+"main",this.serializer=new iA(h),this.Ri=new Rs(this.Ai,this.hi,new D2(this.serializer)),this.$r=new o2,this.Ur=new p2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dA(this.serializer),this.Gr=new s2,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ne.FAILED_PRECONDITION,mg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Jn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ls(e))return oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return nc(e).get("owner").next(t=>K.resolve(this.vi(t)))}Ci(e){return Jh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=on(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(c=>s.indexOf(c)===-1);return K.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?K.resolve(!0):nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ve(ne.FAILED_PRECONDITION,mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new om(e,Jn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Jh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return bd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d2(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Td.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){oe("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(h){return h===17?fF:h===16?hF:h===15?d_:h===14?mb:h===13?gb:h===12?lF:h===11?pb:void Te()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,c=>(a=new om(c,this.Qr?this.Qr.next():Jn.oe),t==="readwrite-primary"?this.wi(a).next(h=>!!h||this.Si(a)).next(h=>{if(!h)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ve(ne.FAILED_PRECONDITION,cb);return r(a)}).next(h=>this.Di(a).next(()=>h)):this.Ki(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Ki(e){return nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ne.FAILED_PRECONDITION,mg)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nc(e).put("owner",t)}static D(){return Rs.D()}bi(e){const t=nc(e);return t.get("owner").next(r=>this.vi(r)?(oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):K.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;WT()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nc(n){return on(n,"owner")}function Jh(n){return on(n,"clientMetadata")}function mA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Xe(),i=Xe();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new C_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WT()?8:hb(sn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new k2;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(xa()<=rt.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Da(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(xa()<=rt.DEBUG&&oe("QueryEngine","Query:",Da(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(xa()<=rt.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Da(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(t))):K.resolve())}Yi(e,t){if(mE(t))return K.resolve(null);let r=ir(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fm(t,null,"F"),r=ir(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Xe(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.ts(t,c);return this.ns(t,d,a,h.readTime)?this.Yi(e,fm(t,null,"F")):this.rs(e,d,t,h)}))})))}Zi(e,t,r,i){return mE(t)||i.isEqual(xe.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?K.resolve(null):(xa()<=rt.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Da(t)),this.rs(e,a,t,ab(i,-1)).next(c=>c))})}ts(e,t){let r=new wt(kb(e));return t.forEach((i,s)=>{yl(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return xa()<=rt.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Da(t)),this.Ji.getDocumentsMatchingQuery(e,t,or.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new At(ze),this._s=new Ms(s=>Do(s),ml),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function yA(n,e,t,r){return new O2(n,e,t,r)}async function vA(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let h=Xe();for(const d of i){a.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}for(const d of s){c.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function V2(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,d,p){const _=d.batch,v=_.keys();let I=K.resolve();return v.forEach(O=>{I=I.next(()=>p.getEntry(h,O)).next(M=>{const F=d.docVersions.get(O);Se(F!==null),M.version.compareTo(F)<0&&(_.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),p.addEntry(M)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(h,_))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Xe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function wA(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function N2(n,e){const t=be(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const c=[];e.targetChanges.forEach((p,_)=>{const v=i.get(_);if(!v)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,_)));let I=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Ht.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),i=i.insert(_,I),function(M,F,Q){return M.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(v,I,p)&&c.push(t.Ur.updateTargetData(s,I))});let h=rr(),d=Xe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(L2(s,a,e.documentUpdates).next(p=>{h=p.Ps,d=p.Is})),!r.isEqual(xe.min())){const p=t.Ur.getLastRemoteSnapshotVersion(s).next(_=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return K.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,d)).next(()=>h)}).then(s=>(t.os=i,s))}function L2(n,e,t){let r=Xe(),i=Xe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=rr();return t.forEach((c,h)=>{const d=s.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(xe.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):oe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function M2(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zf(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new bi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function nu(n,e,t){const r=be(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ls(a))throw a;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function wm(n,e,t){const r=be(n);let i=xe.min(),s=Xe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,d,p){const _=be(h),v=_._s.get(p);return v!==void 0?K.resolve(_.os.get(v)):_.Ur.getTargetData(d,p)}(r,a,ir(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:xe.min(),t?s:Xe())).next(c=>(TA(r,Db(e),c),{documents:c,Ts:s})))}function EA(n,e){const t=be(n),r=be(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(a=>a?a.target:null))}function IA(n,e){const t=be(n),r=t.us.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,ab(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(TA(t,e,i),i))}function TA(n,e,t){let r=n.us.get(e)||xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function jE(n,e){return`firestore_clients_${n}_${e}`}function WE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _g(n,e){return`firestore_targets_${n}_${e}`}class Kf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ve(i.error.code,i.error.message))),a?new Kf(e,t,i.state,s):(Kt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ve(r.error.code,r.error.message))),s?new kc(e,r.state,i):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=y_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=fb(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new jf(e,s):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class x_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new x_(t.clientId,t.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Em{constructor(){this.activeTargetIds=y_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yg{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new At(ze),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=jE(this.persistenceKey,this.ps),this.vs=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Em),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this.Os=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(jE(this.persistenceKey,r));if(i){const s=jf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(_g(this.persistenceKey,e));if(i){const s=kc.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_g(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe("SharedClientState","READ",e,t),t}setItem(e,t){oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(oe("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let a=Jn.oe;if(s!=null)try{const c=JSON.parse(s);Se(typeof c=="number"),a=c}catch(c){Kt("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(t.newValue);r!==Jn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Kf(this.currentUser,e,t,r),s=WE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=WE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=_g(this.persistenceKey,e),s=new kc(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return jf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Kf.Rs(new An(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return kc.Rs(i,t)}Ls(e){return x_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],c=[];return s.forEach(h=>{i.has(h)||a.push(h)}),i.forEach(h=>{s.has(h)||c.push(h)}),this.syncEngine.io(a,c).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=y_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class bA{constructor(){this.so=new Em,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Em,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=null;function vg(){return Yh===null?Yh=function(){return 268435456+Math.round(2147483648*Math.random())}():Yh++,"0x"+Yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class $2 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const c=vg(),h=this.xo(t,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,h,d,i).then(p=>(oe("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw Wc("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",h,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){const i=U2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=vg();return new Promise((a,c)=>{const h=new eb;h.setWithCredentials(!0),h.listenOnce(tb.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case sf.NO_ERROR:const p=h.getResponseJson();oe(Tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case sf.TIMEOUT:oe(Tn,`RPC '${e}' ${s} timed out`),c(new ve(ne.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const _=h.getStatus();if(oe(Tn,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const O=function(F){const Q=F.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Q)>=0?Q:ne.UNKNOWN}(I.status);c(new ve(O,I.message))}else c(new ve(ne.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ve(ne.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{oe(Tn,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);oe(Tn,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=vg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ib(),c=rb(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=s.join("");oe(Tn,`Creating RPC '${e}' stream ${i}: ${p}`,h);const _=a.createWebChannel(p,h);let v=!1,I=!1;const O=new B2({Io:F=>{I?oe(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(v||(oe(Tn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),v=!0),oe(Tn,`RPC '${e}' stream ${i} sending:`,F),_.send(F))},To:()=>_.close()}),M=(F,Q,z)=>{F.listen(Q,q=>{try{z(q)}catch(W){setTimeout(()=>{throw W},0)}})};return M(_,dc.EventType.OPEN,()=>{I||(oe(Tn,`RPC '${e}' stream ${i} transport opened.`),O.yo())}),M(_,dc.EventType.CLOSE,()=>{I||(I=!0,oe(Tn,`RPC '${e}' stream ${i} transport closed`),O.So())}),M(_,dc.EventType.ERROR,F=>{I||(I=!0,Wc(Tn,`RPC '${e}' stream ${i} transport errored:`,F),O.So(new ve(ne.UNAVAILABLE,"The operation could not be completed")))}),M(_,dc.EventType.MESSAGE,F=>{var Q;if(!I){const z=F.data[0];Se(!!z);const q=z,W=q.error||((Q=q[0])===null||Q===void 0?void 0:Q.error);if(W){oe(Tn,`RPC '${e}' stream ${i} received error:`,W);const Y=W.status;let re=function(A){const x=Xt[A];if(x!==void 0)return Kb(x)}(Y),P=W.message;re===void 0&&(re=ne.INTERNAL,P="Unknown error status: "+Y+" with message "+W.message),I=!0,O.So(new ve(re,P)),_.close()}else oe(Tn,`RPC '${e}' stream ${i} received:`,z),O.bo(z)}}),M(c,nb.STAT_EVENT,F=>{F.stat===im.PROXY?oe(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===im.NOPROXY&&oe(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.wo()},0),O}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return typeof window!="undefined"?window:null}function ff(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n){return new GF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t,r,i,s,a,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new SA(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ve(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q2 extends RA{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=YF(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?$n(a.readTime):xe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=gm(this.serializer),t.addTarget=function(s,a){let c;const h=a.target;if(c=Lf(h)?{documents:Xb(s,h)}:{query:Zb(s,h)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Hb(s,a.resumeToken);const d=dm(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){c.readTime=tu(s,a.snapshotVersion.toTimestamp());const d=dm(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=ZF(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=gm(this.serializer),t.removeTarget=e,this.a_(t)}}class z2 extends RA{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=XF(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=gm(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Uf(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,pm(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ne.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,pm(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(ne.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class j2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kt(t),this.D_=!1):oe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{$o(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(h){const d=be(h);d.L_.add(4),await El(d),d.q_.set("Unknown"),d.L_.delete(4),await Rd(d)}(this))})}),this.q_=new j2(r,i)}}async function Rd(n){if($o(n))for(const e of n.B_)await e(!0)}async function El(n){for(const e of n.B_)await e(!1)}function Pd(n,e){const t=be(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),O_(t)?k_(t):gu(t).r_()&&D_(t,e))}function ru(n,e){const t=be(n),r=gu(t);t.N_.delete(e),r.r_()&&PA(t,e),t.N_.size===0&&(r.r_()?r.o_():$o(t)&&t.q_.set("Unknown"))}function D_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gu(n).A_(e)}function PA(n,e){n.Q_.xe(e),gu(n).R_(e)}function k_(n){n.Q_=new KF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),gu(n).start(),n.q_.v_()}function O_(n){return $o(n)&&!gu(n).n_()&&n.N_.size>0}function $o(n){return be(n).L_.size===0}function CA(n){n.Q_=void 0}async function H2(n){n.q_.set("Online")}async function G2(n){n.N_.forEach((e,t)=>{D_(n,e)})}async function Q2(n,e){CA(n),O_(n)?(n.q_.M_(e),k_(n)):n.q_.set("Unknown")}async function J2(n,e,t){if(n.q_.set("Online"),e instanceof Wb&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(n,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(n,r)}else if(e instanceof hf?n.Q_.Ke(e):e instanceof jb?n.Q_.He(e):n.Q_.We(e),!t.isEqual(xe.min()))try{const r=await wA(n.localStore);t.compareTo(r)>=0&&await function(s,a){const c=s.Q_.rt(a);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,d)=>{const p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(Ht.EMPTY_BYTE_STRING,p.snapshotVersion)),PA(s,h);const _=new bi(p.target,h,d,p.sequenceNumber);D_(s,_)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await Wf(n,r)}}async function Wf(n,e,t){if(!Ls(e))throw e;n.L_.add(1),await El(n),n.q_.set("Offline"),t||(t=()=>wA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Rd(n)})}function xA(n,e){return e().catch(t=>Wf(n,t,e))}async function pu(n){const e=be(n),t=ks(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Y2(e);)try{const i=await M2(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,X2(e,i)}catch(i){await Wf(e,i)}DA(e)&&kA(e)}function Y2(n){return $o(n)&&n.O_.length<10}function X2(n,e){n.O_.push(e);const t=ks(n);t.r_()&&t.V_&&t.m_(e.mutations)}function DA(n){return $o(n)&&!ks(n).n_()&&n.O_.length>0}function kA(n){ks(n).start()}async function Z2(n){ks(n).p_()}async function eU(n){const e=ks(n);for(const t of n.O_)e.m_(t.mutations)}async function tU(n,e,t){const r=n.O_.shift(),i=E_.from(r,e,t);await xA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await pu(n)}async function nU(n,e){e&&ks(n).V_&&await async function(r,i){if(function(a){return $F(a)&&a!==ne.ABORTED}(i.code)){const s=r.O_.shift();ks(r).s_(),await xA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pu(r)}}(n,e),DA(n)&&kA(n)}async function GE(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=$o(t);t.L_.add(3),await El(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Rd(t)}async function Im(n,e){const t=be(n);e?(t.L_.delete(2),await Rd(t)):e||(t.L_.add(2),await El(t),t.q_.set("Unknown"))}function gu(n){return n.K_||(n.K_=function(t,r,i){const s=be(t);return s.w_(),new q2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:H2.bind(null,n),Ro:G2.bind(null,n),mo:Q2.bind(null,n),d_:J2.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),O_(n)?k_(n):n.q_.set("Unknown")):(await n.K_.stop(),CA(n))})),n.K_}function ks(n){return n.U_||(n.U_=function(t,r,i){const s=be(t);return s.w_(),new z2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Z2.bind(null,n),mo:nU.bind(null,n),f_:eU.bind(null,n),g_:tU.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await pu(n)):(await n.U_.stop(),n.O_.length>0&&(oe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new V_(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N_(n,e){if(Kt("AsyncQueue",`${e}: ${n}`),Ls(n))return new ve(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=pc(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new qa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.W_=new At(ye.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class iu{constructor(e,t,r,i,s,a,c,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new iu(e,t,qa.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class iU{constructor(){this.queries=JE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=be(t),s=i.queries;i.queries=JE(),s.forEach((a,c)=>{for(const h of c.j_)h.onError(r)})})(this,new ve(ne.ABORTED,"Firestore shutting down"))}}function JE(){return new Ms(n=>xb(n),vd)}async function OA(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new rU,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const c=N_(a,`Initialization of query '${Da(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&L_(t)}async function VA(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function sU(n,e){const t=be(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&L_(t)}function oU(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function L_(n){n.Y_.forEach(e=>{e.next()})}var Tm,YE;(YE=Tm||(Tm={})).ea="default",YE.Cache="cache";class NA{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new iu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.key=e}}class MA{constructor(e){this.key=e}}class aU{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xe(),this.mutatedKeys=Xe(),this.Aa=kb(e),this.Ra=new qa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new QE,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,_)=>{const v=i.get(p),I=yl(this.query,_)?_:null,O=!!v&&this.mutatedKeys.has(v.key),M=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;v&&I?v.data.isEqual(I.data)?O!==M&&(r.track({type:3,doc:I}),F=!0):this.ga(v,I)||(r.track({type:2,doc:I}),F=!0,(h&&this.Aa(I,h)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!v&&I?(r.track({type:0,doc:I}),F=!0):v&&!I&&(r.track({type:1,doc:v}),F=!0,(h||d)&&(c=!0)),F&&(I?(a=a.add(I),s=M?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,_)=>function(I,O){const M=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return M(I)-M(O)}(p.type,_.type)||this.Aa(p.doc,_.doc)),this.pa(r),i=i!=null&&i;const c=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new iu(this.query,e.Ra,s,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new QE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new MA(r))}),this.da.forEach(r=>{e.has(r)||t.push(new LA(r))}),t}ba(e){this.Ta=e.Ts,this.da=Xe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return iu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cU{constructor(e){this.key=e,this.va=!1}}class lU{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ms(c=>xb(c),vd),this.Ma=new Map,this.xa=new Set,this.Oa=new At(ye.comparator),this.Na=new Map,this.La=new R_,this.Ba={},this.ka=new Map,this.qa=Vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hU(n,e,t=!0){const r=Cd(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await FA(r,e,t,!0),i}async function fU(n,e){const t=Cd(n);await FA(t,e,!0,!1)}async function FA(n,e,t,r){const i=await zf(n.localStore,ir(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let c;return r&&(c=await M_(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Pd(n.remoteStore,i),c}async function M_(n,e,t,r,i){n.Ka=(_,v,I)=>async function(M,F,Q,z){let q=F.view.ma(Q);q.ns&&(q=await wm(M.localStore,F.query,!1).then(({documents:P})=>F.view.ma(P,q)));const W=z&&z.targetChanges.get(F.targetId),Y=z&&z.targetMismatches.get(F.targetId)!=null,re=F.view.applyChanges(q,M.isPrimaryClient,W,Y);return bm(M,F.targetId,re.wa),re.snapshot}(n,_,v,I);const s=await wm(n.localStore,e,!0),a=new aU(e,s.Ts),c=a.ma(s.documents),h=wl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,h);bm(n,t,d.wa);const p=new uU(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}async function dU(n,e,t){const r=be(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!vd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ru(r.remoteStore,i.targetId),su(r,i.targetId)}).catch(Ns)):(su(r,i.targetId),await nu(r.localStore,i.targetId,!0))}async function pU(n,e){const t=be(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ru(t.remoteStore,r.targetId))}async function gU(n,e,t){const r=$_(n);try{const i=await function(a,c){const h=be(a),d=Lt.now(),p=c.reduce((I,O)=>I.add(O.key),Xe());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>{let O=rr(),M=Xe();return h.cs.getEntries(I,p).next(F=>{O=F,O.forEach((Q,z)=>{z.isValidDocument()||(M=M.add(Q))})}).next(()=>h.localDocuments.getOverlayedDocuments(I,O)).next(F=>{_=F;const Q=[];for(const z of c){const q=UF(z,_.get(z.key).overlayedDocument);q!=null&&Q.push(new Mi(z.key,q,Eb(q.value.mapValue),xn.exists(!0)))}return h.mutationQueue.addMutationBatch(I,d,Q,c)}).next(F=>{v=F;const Q=F.applyToLocalDocumentSet(_,M);return h.documentOverlayCache.saveOverlays(I,F.batchId,Q)})}).then(()=>({batchId:v.batchId,changes:Vb(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new At(ze)),d=d.insert(c,h),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),await Fs(r,i.changes),await pu(r.remoteStore)}catch(i){const s=N_(i,"Failed to persist write");t.reject(s)}}async function UA(n,e){const t=be(n);try{const r=await N2(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Se(a.va):i.removedDocuments.size>0&&(Se(a.va),a.va=!1))}),await Fs(t,r,e)}catch(r){await Ns(r)}}function XE(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const h=be(a);h.onlineState=c;let d=!1;h.queries.forEach((p,_)=>{for(const v of _.j_)v.Z_(c)&&(d=!0)}),d&&L_(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mU(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new At(ye.comparator);a=a.insert(s,Bt.newNoDocument(s,xe.min()));const c=Xe().add(s),h=new vl(xe.min(),new Map,new At(ze),a,c);await UA(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),B_(r)}else await nu(r.localStore,e,!1).then(()=>su(r,e,t)).catch(Ns)}async function _U(n,e){const t=be(n),r=e.batch.batchId;try{const i=await V2(t.localStore,e);U_(t,r,null),F_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Fs(t,i)}catch(i){await Ns(i)}}async function yU(n,e,t){const r=be(n);try{const i=await function(a,c){const h=be(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return h.mutationQueue.lookupMutationBatch(d,c).next(_=>(Se(_!==null),p=_.keys(),h.mutationQueue.removeMutationBatch(d,_))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>h.localDocuments.getDocuments(d,p))})}(r.localStore,e);U_(r,e,t),F_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Fs(r,i)}catch(i){await Ns(i)}}function F_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function U_(n,e,t){const r=be(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function su(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||BA(n,r)})}function BA(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(ru(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),B_(n))}function bm(n,e,t){for(const r of t)r instanceof LA?(n.La.addReference(r.key,e),vU(n,r)):r instanceof MA?(oe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||BA(n,r.key)):Te()}function vU(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(oe("SyncEngine","New document in limbo: "+t),n.xa.add(r),B_(n))}function B_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ye(Tt.fromString(e)),r=n.qa.next();n.Na.set(r,new cU(t)),n.Oa=n.Oa.insert(t,r),Pd(n.remoteStore,new bi(ir(_l(t.path)),r,"TargetPurposeLimboResolution",Jn.oe))}}async function Fs(n,e,t){const r=be(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{a.push(r.Ka(h,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){const _=d?!d.fromCache:(p=t==null?void 0:t.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=C_.Wi(h.targetId,d);s.push(_)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(h,d){const p=be(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>K.forEach(d,v=>K.forEach(v.$i,I=>p.persistence.referenceDelegate.addReference(_,v.targetId,I)).next(()=>K.forEach(v.Ui,I=>p.persistence.referenceDelegate.removeReference(_,v.targetId,I)))))}catch(_){if(!Ls(_))throw _;oe("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const I=p.os.get(v),O=I.snapshotVersion,M=I.withLastLimboFreeSnapshotVersion(O);p.os=p.os.insert(v,M)}}}(r.localStore,s))}async function wU(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await vA(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(h=>{h.reject(new ve(ne.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fs(t,r.hs)}}function EU(n,e){const t=be(n),r=t.Na.get(e);if(r&&r.va)return Xe().add(r.key);{let i=Xe();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}async function IU(n,e){const t=be(n),r=await wm(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&bm(t,e.targetId,i.wa),i}async function TU(n,e){const t=be(n);return IA(t.localStore,e).then(r=>Fs(t,r))}async function bU(n,e,t,r){const i=be(n),s=await function(c,h){const d=be(c),p=be(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",_=>p.Mn(_,h).next(v=>v?d.localDocuments.getDocuments(_,v):K.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await pu(i.remoteStore):t==="acknowledged"||t==="rejected"?(U_(i,e,r||null),F_(i,e),function(c,h){be(be(c).mutationQueue).On(h)}(i.localStore,e)):Te(),await Fs(i,s)):oe("SyncEngine","Cannot apply mutation batch with id: "+e)}async function AU(n,e){const t=be(n);if(Cd(t),$_(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await ZE(t,r.toArray());t.Qa=!0,await Im(t.remoteStore,!0);for(const s of i)Pd(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(su(t,a),nu(t.localStore,a,!0))),ru(t.remoteStore,a)}),await i,await ZE(t,r),function(a){const c=be(a);c.Na.forEach((h,d)=>{ru(c.remoteStore,d)}),c.La.pr(),c.Na=new Map,c.Oa=new At(ye.comparator)}(t),t.Qa=!1,await Im(t.remoteStore,!1)}}async function ZE(n,e,t){const r=be(n),i=[],s=[];for(const a of e){let c;const h=r.Ma.get(a);if(h&&h.length!==0){c=await zf(r.localStore,ir(h[0]));for(const d of h){const p=r.Fa.get(d),_=await IU(r,p);_.snapshot&&s.push(_.snapshot)}}else{const d=await EA(r.localStore,a);c=await zf(r.localStore,d),await M_(r,$A(d),a,!1,c.resumeToken)}i.push(c)}return r.Ca.d_(s),i}function $A(n){return Cb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function SU(n){return function(t){return be(be(t).persistence).Qi()}(be(n).localStore)}async function RU(n,e,t,r){const i=be(n);if(i.Qa)return void oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await IA(i.localStore,Db(s[0])),c=vl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ht.EMPTY_BYTE_STRING);await Fs(i,a,c);break}case"rejected":await nu(i.localStore,e,!0),su(i,e,r);break;default:Te()}}async function PU(n,e,t){const r=Cd(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){oe("SyncEngine","Adding an already active target "+i);continue}const s=await EA(r.localStore,i),a=await zf(r.localStore,s);await M_(r,$A(s),a.targetId,!1,a.resumeToken),Pd(r.remoteStore,a)}for(const i of t)r.Ma.has(i)&&await nu(r.localStore,i,!1).then(()=>{ru(r.remoteStore,i),su(r,i)}).catch(Ns)}}function Cd(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mU.bind(null,e),e.Ca.d_=sU.bind(null,e.eventManager),e.Ca.$a=oU.bind(null,e.eventManager),e}function $_(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_U.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yU.bind(null,e),e}class tl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return yA(this.persistence,new _A,e.initialUser,this.serializer)}Ga(e){return new gA(Ad.Zr,this.serializer)}Wa(e){return new bA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tl.provider={build:()=>new tl};class qA extends tl{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await $_(this.Ja.syncEngine),await pu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return yA(this.persistence,new _A,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new m2(r,e.asyncQueue,t)}Ha(e,t){const r=new HM(t,this.persistence);return new WM(e.asyncQueue,r)}Ga(e){const t=mA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new P_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,AA(),ff(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bA}}class CU extends qA{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof yg&&(this.sharedClientState.syncEngine={no:bU.bind(null,t),ro:RU.bind(null,t),io:PU.bind(null,t),Qi:SU.bind(null,t),eo:TU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await AU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=AA();if(!yg.D(t))throw new ve(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class nl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wU.bind(null,this.syncEngine),await Im(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iU}()}createDatastore(e){const t=Sd(e.databaseInfo.databaseId),r=function(s){return new $2(s)}(e.databaseInfo);return function(s,a,c,h){return new K2(s,a,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,c){return new W2(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>XE(this.syncEngine,t,0),function(){return HE.D()?new HE:new F2}())}createSyncEngine(e,t){return function(i,s,a,c,h,d,p){const _=new lU(i,s,a,c,h,d);return p&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=be(i);oe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await El(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nl.provider={build:()=>new nl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=An.UNAUTHENTICATED,this.clientId=sb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{oe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=N_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wg(n,e){n.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function e0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DU(n);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>GE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>GE(e.remoteStore,i)),n._onlineComponents=e}async function DU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await wg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Wc("Error using user provided cache. Falling back to memory cache: "+t),await wg(n,new tl)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await wg(n,new tl);return n._offlineComponents}async function KA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await e0(n,n._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await e0(n,new nl))),n._onlineComponents}function kU(n){return KA(n).then(e=>e.syncEngine)}async function Am(n){const e=await KA(n),t=e.eventManager;return t.onListen=hU.bind(null,e.syncEngine),t.onUnlisten=dU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pU.bind(null,e.syncEngine),t}function OU(n,e,t={}){const r=new Pi;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,c,h,d){const p=new zA({next:v=>{p.Za(),a.enqueueAndForget(()=>VA(s,_));const I=v.docs.has(c);!I&&v.fromCache?d.reject(new ve(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&h&&h.source==="server"?d.reject(new ve(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),_=new NA(_l(c.path),p,{includeMetadataChanges:!0,_a:!0});return OA(s,_)}(await Am(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(n,e,t){if(!t)throw new ve(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NU(n,e,t,r){if(e===!0&&r===!0)throw new ve(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function n0(n){if(!ye.isDocumentKey(n))throw new ve(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function q_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function Ps(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=q_(n);throw new ve(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class WA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LM;switch(r.type){case"firstParty":return new UM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=t0.get(t);r&&(oe("ComponentProvider","Removing Datastore"),t0.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xd(this.firestore,e,this._query)}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class rl extends xd{constructor(e,t,r){super(e,t,_l(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new ye(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function i0(n,e,...t){if(n=yn(n),arguments.length===1&&(e=sb.newId()),VU("doc","path",e),n instanceof WA){const r=Tt.fromString(e,...t);return n0(r),new sr(n,null,new ye(r))}{if(!(n instanceof sr||n instanceof rl))throw new ve(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return n0(r),new sr(n.firestore,n instanceof rl?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new SA(this,"async_queue_retry"),this.Vu=()=>{const r=ff();r&&oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Pi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ls(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Kt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=V_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function o0(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class ou extends WA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new s0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function LU(n,e,t){t||(t="(default)");const r=c_(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(Kc(s,e))return i;throw new ve(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function Dd(n){if(n._terminated)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MU(n),n._firestoreClient}function MU(n){var e,t,r;const i=n._freezeSettings(),s=function(c,h,d,p){return new pF(c,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,jA(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||((t=i.localCache)===null||t===void 0?void 0:t._offlineComponentProvider)&&((r=i.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new xU(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new au(Ht.fromBase64String(e))}catch(t){throw new ve(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new au(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=/^__.*__$/;class UU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class HA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class W_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new W_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GA(this.Cu)&&FU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class BU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sd(e)}Qu(e,t,r,i=!1){return new W_({Cu:e,methodName:t,qu:r,path:Nt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QA(n){const e=n._freezeSettings(),t=Sd(n._databaseId);return new BU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JA(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);H_("Data must be an object, but it was:",a,r);const c=YA(r,a);let h,d;if(s.merge)h=new Yn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const _ of s.mergeFields){const v=Sm(e,_,t);if(!a.contains(v))throw new ve(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);ZA(p,v)||p.push(v)}h=new Yn(p),d=a.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,d=a.fieldTransforms;return new UU(new Cn(c),h,d)}class Il extends z_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Il}}function $U(n,e,t,r){const i=n.Qu(1,e,t);H_("Data must be an object, but it was:",i,r);const s=[],a=Cn.empty();Bo(r,(h,d)=>{const p=G_(e,h,t);d=yn(d);const _=i.Nu(p);if(d instanceof Il)s.push(p);else{const v=Od(d,_);v!=null&&(s.push(p),a.set(p,v))}});const c=new Yn(s);return new HA(a,c,i.fieldTransforms)}function qU(n,e,t,r,i,s){const a=n.Qu(1,e,t),c=[Sm(e,r,t)],h=[i];if(s.length%2!=0)throw new ve(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)c.push(Sm(e,s[v])),h.push(s[v+1]);const d=[],p=Cn.empty();for(let v=c.length-1;v>=0;--v)if(!ZA(d,c[v])){const I=c[v];let O=h[v];O=yn(O);const M=a.Nu(I);if(O instanceof Il)d.push(I);else{const F=Od(O,M);F!=null&&(d.push(I),p.set(I,F))}}const _=new Yn(d);return new HA(p,_,a.fieldTransforms)}function Od(n,e){if(XA(n=yn(n)))return H_("Unsupported field value:",e,n),YA(n,e);if(n instanceof z_)return function(r,i){if(!GA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let h=Od(c,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=yn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Lt.fromDate(r);return{timestampValue:tu(i.serializer,s)}}if(r instanceof Lt){const s=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tu(i.serializer,s)}}if(r instanceof K_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof au)return{bytesValue:Hb(i.serializer,r._byteString)};if(r instanceof sr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:b_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof j_)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return v_(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${q_(r)}`)}(n,e)}function YA(n,e){const t={};return _b(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(n,(r,i)=>{const s=Od(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function XA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof K_||n instanceof au||n instanceof sr||n instanceof z_||n instanceof j_)}function H_(n,e,t){if(!XA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=q_(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Sm(n,e,t){if((e=yn(e))instanceof kd)return e._internalPath;if(typeof e=="string")return G_(n,e);throw Hf("Field path arguments must be of type string or ",n,!1,void 0,t)}const zU=new RegExp("[~\\*/\\[\\]]");function G_(n,e,t){if(e.search(zU)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kd(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hf(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new ve(ne.INVALID_ARGUMENT,c+n+h)}function ZA(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KU extends eS{data(){return super.data()}}function tS(n,e){return typeof e=="string"?G_(n,e):e instanceof kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class WU{convertValue(e,t="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>xt(a.doubleValue));return new j_(s)}convertGeoPoint(e){return new K_(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=g_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){const t=ki(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);Se(rA(r));const i=new Co(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||Kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rS extends eS{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class df extends rS{data(e={}){return super.data(e)}}class HU{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _c(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new df(this._firestore,this._userDataWriter,r.key,r,new _c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const h=new df(i._firestore,i._userDataWriter,c.doc.key,c.doc,new _c(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const h=new df(i._firestore,i._userDataWriter,c.doc.key,c.doc,new _c(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:GU(c.type),doc:h,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n){n=Ps(n,sr);const e=Ps(n.firestore,ou);return OU(Dd(e),n._key).then(t=>oS(e,n,t))}class iS extends WU{constructor(e){super(),this.firestore=e}convertBytes(e){return new au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function JU(n,e,t){n=Ps(n,sr);const r=Ps(n.firestore,ou),i=nS(n.converter,e,t);return sS(r,[JA(QA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,xn.none())])}function a0(n,...e){var t,r,i;n=yn(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||o0(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(o0(e[a])){const _=e[a];e[a]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let h,d,p;if(n instanceof sr)d=Ps(n.firestore,ou),p=_l(n._key.path),h={next:_=>{e[a]&&e[a](oS(d,n,_))},error:e[a+1],complete:e[a+2]};else{const _=Ps(n,xd);d=Ps(_.firestore,ou),p=_._query;const v=new iS(d);h={next:I=>{e[a]&&e[a](new HU(d,v,_,I))},error:e[a+1],complete:e[a+2]},jU(n._query)}return function(v,I,O,M){const F=new zA(M),Q=new NA(I,F,O);return v.asyncQueue.enqueueAndForget(async()=>OA(await Am(v),Q)),()=>{F.Za(),v.asyncQueue.enqueueAndForget(async()=>VA(await Am(v),Q))}}(Dd(d),p,c,h)}function sS(n,e){return function(r,i){const s=new Pi;return r.asyncQueue.enqueueAndForget(async()=>gU(await kU(r),i,s)),s.promise}(Dd(n),e)}function oS(n,e,t){const r=t.docs.get(e._key),i=new iS(n);return new rS(n,i,e._key,r,new _c(t.hasPendingWrites,t.fromCache),e.converter)}class YU{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=tB(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function XU(n){return new YU(n)}class ZU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nl.provider,this._offlineComponentProvider={build:t=>new qA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class eB{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=nl.provider,this._offlineComponentProvider={build:t=>new CU(t,e==null?void 0:e.cacheSizeBytes)}}}function tB(n){return new ZU(n==null?void 0:n.forceOwnership)}function nB(){return new eB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=QA(e)}set(e,t,r){this._verifyNotCommitted();const i=Eg(e,this._firestore),s=nS(i.converter,t,r),a=JA(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,xn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Eg(e,this._firestore);let a;return a=typeof(t=yn(t))=="string"||t instanceof kd?qU(this._dataReader,"WriteBatch.update",s._key,t,r,i):$U(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Eg(e,this._firestore);return this._mutations=this._mutations.concat(new Id(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eg(n,e){if((n=yn(n)).firestore!==e)throw new ve(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(){return new Il("deleteField")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(n){return Dd(n=Ps(n,ou)),new rB(n,e=>sS(n,e))}(function(e,t=!0){(function(i){fu=i})(hu),Ga(new So("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new ou(new MM(r.getProvider("auth-internal")),new $M(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ss(eE,"4.7.3",e),Ss(eE,"4.7.3","esm2017")})();function Q_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function aS(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sB=aS,uS=new pl("auth","Firebase",aS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new a_("@firebase/auth");function oB(n,...e){Gf.logLevel<=rt.WARN&&Gf.warn(`Auth (${hu}): ${n}`,...e)}function pf(n,...e){Gf.logLevel<=rt.ERROR&&Gf.error(`Auth (${hu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n,...e){throw J_(n,...e)}function Xr(n,...e){return J_(n,...e)}function cS(n,e,t){const r=Object.assign(Object.assign({},sB()),{[e]:t});return new pl("auth","Firebase",r).create(e,{appName:n.name})}function Ci(n){return cS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return uS.create(n,...e)}function De(n,e,...t){if(!n)throw J_(e,...t)}function Ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pf(e),new Error(e)}function Oi(n,e){n||Ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function aB(){return u0()==="http:"||u0()==="https:"}function u0(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aB()||gL()||"connection"in navigator)?navigator.onLine:!0}function cB(){if(typeof navigator=="undefined")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oi(t>e,"Short delay should be less than long delay!"),this.isMobile=fL()||mL()}get(){return uB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(n,e){Oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=new Tl(3e4,6e4);function Fi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ui(n,e,t,r,i={}){return hS(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=gl(Object.assign({key:n.config.apiKey},a)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:h},s);return pL()||(d.referrerPolicy="no-referrer"),lS.fetch()(fS(n,n.config.apiHost,t,c),d)})}async function hS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},lB),e);try{const i=new dB(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Zh(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zh(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Zh(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw Zh(n,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw cS(n,p,d);Vr(n,p)}}catch(i){if(i instanceof Li)throw i;Vr(n,"network-request-failed",{message:String(i)})}}async function bl(n,e,t,r,i={}){const s=await Ui(n,e,t,r,i);return"mfaPendingCredential"in s&&Vr(n,"multi-factor-auth-required",{_serverResponse:s}),s}function fS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Y_(n.config,i):`${n.config.apiScheme}://${i}`}function fB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),hB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Xr(n,e,r);return i.customData._tokenResponse=t,i}function c0(n){return n!==void 0&&n.enterprise!==void 0}class pB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function gB(n,e){return Ui(n,"GET","/v2/recaptchaConfig",Fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mB(n,e){return Ui(n,"POST","/v1/accounts:delete",e)}async function dS(n,e){return Ui(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){if(!!n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _B(n,e=!1){const t=yn(n),r=await t.getIdToken(e),i=X_(r);De(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Oc(Ig(i.auth_time)),issuedAtTime:Oc(Ig(i.iat)),expirationTime:Oc(Ig(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ig(n){return Number(n)*1e3}function X_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const i=zT(t);return i?JSON.parse(i):(pf("Failed to decode base64 JWT payload"),null)}catch(i){return pf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function l0(n){const e=X_(n);return De(e,"internal-error"),De(typeof e.exp!="undefined","internal-error"),De(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Li&&yB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function yB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await il(n,dS(t,{idToken:r}));De(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pS(s.providerUserInfo):[],c=EB(n.providerData,a),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Pm(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function wB(n){const e=yn(n);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pS(n){return n.map(e=>{var{providerId:t}=e,r=Q_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(n,e){const t=await hS(n,{},async()=>{const r=gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=fS(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",lS.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TB(n,e){return Ui(n,"POST","/v2/accounts:revokeToken",Fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken!="undefined","internal-error"),De(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):l0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=l0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await IB(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new za;return r&&(De(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(De(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(De(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return Ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){De(typeof n=="string"||typeof n=="undefined","internal-error",{appName:e})}class Si{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Q_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await il(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _B(this,e)}reload(){return wB(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Qf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gr(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await il(this,mB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,h,d,p;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,O=(a=t.photoURL)!==null&&a!==void 0?a:void 0,M=(c=t.tenantId)!==null&&c!==void 0?c:void 0,F=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,Q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,z=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:q,emailVerified:W,isAnonymous:Y,providerData:re,stsTokenManager:P}=t;De(q&&P,e,"internal-error");const S=za.fromJSON(this.name,P);De(typeof q=="string",e,"internal-error"),os(_,e.name),os(v,e.name),De(typeof W=="boolean",e,"internal-error"),De(typeof Y=="boolean",e,"internal-error"),os(I,e.name),os(O,e.name),os(M,e.name),os(F,e.name),os(Q,e.name),os(z,e.name);const A=new Si({uid:q,auth:e,email:v,emailVerified:W,displayName:_,isAnonymous:Y,photoURL:O,phoneNumber:I,tenantId:M,stsTokenManager:S,createdAt:Q,lastLoginAt:z});return re&&Array.isArray(re)&&(A.providerData=re.map(x=>Object.assign({},x))),F&&(A._redirectEventId=F),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new za;i.updateFromServerResponse(t);const s=new Si({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qf(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];De(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pS(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new za;c.updateFromIdToken(r);const h=new Si({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Pm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new Map;function Ri(n){Oi(n instanceof Function,"Expected a class definition");let e=h0.get(n);return e?(Oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,h0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gS.type="NONE";const f0=gS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ka{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=gf(this.userKey,i.apiKey,s),this.fullPersistenceKey=gf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Si._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ka(Ri(f0),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Ri(f0);const a=gf(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const p=await d._get(a);if(p){const _=Si._fromJSON(e,p);d!==s&&(c=_),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ka(s,e,r):(s=h[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Ka(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ES(e))return"Blackberry";if(IS(e))return"Webos";if(_S(e))return"Safari";if((e.includes("chrome/")||yS(e))&&!e.includes("edge/"))return"Chrome";if(wS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mS(n=sn()){return/firefox\//i.test(n)}function _S(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yS(n=sn()){return/crios\//i.test(n)}function vS(n=sn()){return/iemobile/i.test(n)}function wS(n=sn()){return/android/i.test(n)}function ES(n=sn()){return/blackberry/i.test(n)}function IS(n=sn()){return/webos/i.test(n)}function Z_(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bB(n=sn()){var e;return Z_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AB(){return _L()&&document.documentMode===10}function TS(n=sn()){return Z_(n)||wS(n)||IS(n)||ES(n)||/windows phone/i.test(n)||vS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n,e=[]){let t;switch(n){case"Browser":t=d0(sn());break;case"Worker":t=`${d0(sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const h=e(s);a(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(n,e={}){return Ui(n,"GET","/v2/passwordPolicy",Fi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=6;class CB{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:PB,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p0(this),this.idTokenSubscription=new p0(this),this.beforeStateQueue=new SB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ka.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dS(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h==null?void 0:h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gr(this.app))return Promise.reject(Ci(this));const t=e?yn(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gr(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gr(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RB(this),t=new CB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await TB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ri(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&oB(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Us(n){return yn(n)}class p0{constructor(e){this.auth=e,this.observer=null,this.addObserver=TL(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DB(n){Vd=n}function AS(n){return Vd.loadJS(n)}function kB(){return Vd.recaptchaEnterpriseScript}function OB(){return Vd.gapiScript}function VB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const NB="recaptcha-enterprise",LB="NO_RECAPTCHA";class MB{constructor(e){this.type=NB,this.auth=Us(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{gB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new pB(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(h=>{c(h)})})}function i(s,a,c){const h=window.grecaptcha;c0(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(LB)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&c0(window.grecaptcha))i(c,s,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=kB();h.length!==0&&(h+=c),AS(h).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function g0(n,e,t,r=!1){const i=new MB(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jf(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await g0(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await g0(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(n,e){const t=c_(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Kc(s,e!=null?e:{}))return i;Vr(i,"already-initialized")}return t.initialize({options:e})}function UB(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ri);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BB(n,e,t){const r=Us(n);De(r._canInitEmulator,r,"emulator-config-failed"),De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=SS(e),{host:a,port:c}=$B(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||qB()}function SS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $B(n){const e=SS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:m0(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:m0(a)}}}function m0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ai("not implemented")}_getIdTokenResponse(e){return Ai("not implemented")}_linkToIdToken(e,t){return Ai("not implemented")}_getReauthenticationResolver(e){return Ai("not implemented")}}async function zB(n,e){return Ui(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(n,e){return bl(n,"POST","/v1/accounts:signInWithPassword",Fi(n,e))}async function RS(n,e){return Ui(n,"POST","/v1/accounts:sendOobCode",Fi(n,e))}async function jB(n,e){return RS(n,e)}async function WB(n,e){return RS(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(n,e){return bl(n,"POST","/v1/accounts:signInWithEmailLink",Fi(n,e))}async function GB(n,e){return bl(n,"POST","/v1/accounts:signInWithEmailLink",Fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends ey{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new sl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new sl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jf(e,t,"signInWithPassword",KB);case"emailLink":return HB(e,{email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jf(e,r,"signUpPassword",zB);case"emailLink":return GB(e,{idToken:t,email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n,e){return bl(n,"POST","/v1/accounts:signInWithIdp",Fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB="http://localhost";class No extends ey{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Q_(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new No(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ja(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ja(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ja(e,t)}buildRequest(){const e={requestUri:QB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YB(n){const e=hc(fc(n)).link,t=e?hc(fc(e)).deep_link_id:null,r=hc(fc(n)).deep_link_id;return(r?hc(fc(r)).link:null)||r||t||e||n}class ty{constructor(e){var t,r,i,s,a,c;const h=hc(fc(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,_=JB((i=h.mode)!==null&&i!==void 0?i:null);De(d&&p&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=YB(e);try{return new ty(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.providerId=mu.PROVIDER_ID}static credential(e,t){return sl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ty.parseLink(t);return De(r,"argument-error"),sl._fromEmailAndCode(e,r.code,r.tenantId)}}mu.PROVIDER_ID="password";mu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends PS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Al{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return No._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ys.credential(t,r)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Al{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends Al{constructor(){super("twitter.com")}static credential(e,t){return No._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ws.credential(t,r)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(n,e){return bl(n,"POST","/v1/accounts:signUp",Fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Si._fromIdTokenResponse(e,r,i),a=_0(r);return new Lo({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=_0(r);return new Lo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function _0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends Li{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Yf(e,t,r,i)}}function CS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yf._fromErrorAndOperation(n,s,e,r):s})}async function ZB(n,e,t=!1){const r=await il(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Lo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(n,e,t=!1){const{auth:r}=n;if(Gr(r.app))return Promise.reject(Ci(r));const i="reauthenticate";try{const s=await il(n,CS(r,i,e,n),t);De(s.idToken,r,"internal-error");const a=X_(s.idToken);De(a,r,"internal-error");const{sub:c}=a;return De(n.uid===c,r,"user-mismatch"),Lo._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(n,e,t=!1){if(Gr(n.app))return Promise.reject(Ci(n));const r="signIn",i=await CS(n,r,e),s=await Lo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function t$(n,e){return xS(Us(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(n,e,t){var r;De(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),De(typeof t.dynamicLinkDomain=="undefined"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(De(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(De(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(n){const e=Us(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function n$(n,e,t){const r=Us(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&DS(r,i,t),await Jf(r,i,"getOobCode",WB)}async function r$(n,e,t){if(Gr(n.app))return Promise.reject(Ci(n));const r=Us(n),a=await Jf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XB).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&kS(n),h}),c=await Lo._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function i$(n,e,t){return Gr(n.app)?Promise.reject(Ci(n)):t$(yn(n),mu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kS(n),r})}async function s$(n,e){const t=yn(n),r=await n.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};e&&DS(t.auth,i,e);const{email:s}=await jB(t.auth,i);s!==n.email&&await n.reload()}function o$(n,e,t,r){return yn(n).onIdTokenChanged(e,t,r)}function a$(n,e,t){return yn(n).beforeAuthStateChanged(e,t)}const Xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xf,"1"),this.storage.removeItem(Xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=1e3,c$=10;class VS extends OS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);AB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,c$):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},u$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}VS.type="LOCAL";const l$=VS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS extends OS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}NS.type="SESSION";const LS=NS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(n){return Promise.all(n.map(async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(t.origin,s)),h=await h$(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,h)=>{const d=ny("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){const v=_;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(v.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function d$(n){Zr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return typeof Zr().WorkerGlobalScope!="undefined"&&typeof Zr().importScripts=="function"}async function p$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function g$(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function m$(){return MS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebaseLocalStorageDb",_$=1,Zf="firebaseLocalStorage",US="fbase_key";class Sl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ld(n,e){return n.transaction([Zf],e?"readwrite":"readonly").objectStore(Zf)}function y$(){const n=indexedDB.deleteDatabase(FS);return new Sl(n).toPromise()}function Cm(){const n=indexedDB.open(FS,_$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Zf,{keyPath:US})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Zf)?e(r):(r.close(),await y$(),e(await Cm()))})})}async function y0(n,e,t){const r=Ld(n,!0).put({[US]:e,value:t});return new Sl(r).toPromise()}async function v$(n,e){const t=Ld(n,!1).get(e),r=await new Sl(t).toPromise();return r===void 0?null:r.value}function v0(n,e){const t=Ld(n,!0).delete(e);return new Sl(t).toPromise()}const w$=800,E$=3;class BS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>E$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nd._getInstance(m$()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await p$(),!this.activeServiceWorker)return;this.sender=new f$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((t=r[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||g$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cm();return await y0(e,Xf,"1"),await v0(e,Xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>y0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>v$(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>v0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ld(i,!1).getAll();return new Sl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BS.type="LOCAL";const I$=BS;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(n,e){return e?Ri(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends ey{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ja(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ja(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function b$(n){return xS(n.auth,new ry(n),n.bypassAuthState)}function A$(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),e$(t,new ry(n),n.bypassAuthState)}async function S$(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),ZB(t,new ry(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return b$;case"linkViaPopup":case"linkViaRedirect":return S$;case"reauthViaPopup":case"reauthViaRedirect":return A$;default:Vr(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=new Tl(2e3,1e4);class Ma extends $S{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");const e=ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R$.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$="pendingRedirect",mf=new Map;class C$ extends $S{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=mf.get(this.auth._key());if(!e){try{const r=await x$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mf.set(this.auth._key(),e)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x$(n,e){const t=O$(e),r=k$(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function D$(n,e){mf.set(n._key(),e)}function k$(n){return Ri(n._redirectPersistence)}function O$(n){return gf(P$,n.config.apiKey,n.name)}async function V$(n,e,t=!1){if(Gr(n.app))return Promise.reject(Ci(n));const r=Us(n),i=T$(r,e),a=await new C$(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=10*60*1e3;class L${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!qS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N$&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}}function w0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function M$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F$(n,e={}){return Ui(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B$=/^https?/;async function $$(n){if(n.config.emulator)return;const{authorizedDomains:e}=await F$(n);for(const t of e)try{if(q$(t))return}catch{}Vr(n,"unauthorized-domain")}function q$(n){const e=Rm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!B$.test(t))return!1;if(U$.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=new Tl(3e4,6e4);function E0(){const n=Zr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function K$(n){return new Promise((e,t)=>{var r,i,s;function a(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),t(Xr(n,"network-request-failed"))},timeout:z$.get()})}if(!((i=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zr().gapi)===null||s===void 0)&&s.load)a();else{const c=VB("iframefcb");return Zr()[c]=()=>{gapi.load?a():t(Xr(n,"network-request-failed"))},AS(`${OB()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw _f=null,e})}let _f=null;function j$(n){return _f=_f||K$(n),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$=new Tl(5e3,15e3),H$="__/auth/iframe",G$="emulator/auth/iframe",Q$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y$(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Y_(e,G$):`https://${n.config.authDomain}/${H$}`,r={apiKey:e.apiKey,appName:n.name,v:hu},i=J$.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${gl(r).slice(1)}`}async function X$(n){const e=await j$(n),t=Zr().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:Y$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q$,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Xr(n,"network-request-failed"),c=Zr().setTimeout(()=>{s(a)},W$.get());function h(){Zr().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e4=500,t4=600,n4="_blank",r4="http://localhost";class I0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i4(n,e,t,r=e4,i=t4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},Z$),{width:r.toString(),height:i.toString(),top:s,left:a}),d=sn().toLowerCase();t&&(c=yS(d)?n4:t),mS(d)&&(e=e||r4,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[I,O])=>`${v}${I}=${O},`,"");if(bB(d)&&c!=="_self")return s4(e||"",c),new I0(null);const _=window.open(e||"",c,p);De(_,n,"popup-blocked");try{_.focus()}catch{}return new I0(_)}function s4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="__/auth/handler",a4="emulator/auth/handler",u4=encodeURIComponent("fac");async function T0(n,e,t,r,i,s){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hu,eventId:i};if(e instanceof PS){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",IL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,_]of Object.entries(s||{}))a[p]=_}if(e instanceof Al){const p=e.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const h=await n._getAppCheckToken(),d=h?`#${u4}=${encodeURIComponent(h)}`:"";return`${c4(n)}?${gl(c).slice(1)}${d}`}function c4({config:n}){return n.emulator?Y_(n,a4):`https://${n.authDomain}/${o4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="webStorageSupport";class l4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LS,this._completeRedirectFn=V$,this._overrideRedirectResult=D$}async _openPopup(e,t,r,i){var s;Oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await T0(e,t,r,Rm(),i);return i4(e,a,ny())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await T0(e,t,r,Rm(),i);return d$(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Oi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await X$(e),r=new L$(e);return t.register("authEvent",i=>(De(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tg,{type:Tg},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Tg];a!==void 0&&t(!!a),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TS()||_S()||Z_()}}const h4=l4;var b0="@firebase/auth",A0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function p4(n){Ga(new So("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;De(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bS(n)},d=new xB(r,i,s,h);return UB(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ga(new So("auth-internal",e=>{const t=Us(e.getProvider("auth").getImmediate());return(r=>new f4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(b0,A0,d4(n)),Ss(b0,A0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=5*60,m4=jT("authIdTokenMaxAge")||g4;let S0=null;const _4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>m4)return;const i=t==null?void 0:t.token;S0!==i&&(S0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function y4(n=TM()){const e=c_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=FB(n,{popupRedirectResolver:h4,persistence:[I$,l$,LS]}),r=jT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=_4(s.toString());a$(t,a,()=>a(t.currentUser)),o$(t,c=>a(c))}}const i=lL("auth");return i&&BB(t,`http://${i}`),t}function v4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}DB({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Xr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",v4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});p4("Browser");var w4="firebase",E4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(w4,E4,"app");const mn=[];for(let n=0;n<256;++n)mn.push((n+256).toString(16).slice(1));function I4(n,e=0){return(mn[n[e+0]]+mn[n[e+1]]+mn[n[e+2]]+mn[n[e+3]]+"-"+mn[n[e+4]]+mn[n[e+5]]+"-"+mn[n[e+6]]+mn[n[e+7]]+"-"+mn[n[e+8]]+mn[n[e+9]]+"-"+mn[n[e+10]]+mn[n[e+11]]+mn[n[e+12]]+mn[n[e+13]]+mn[n[e+14]]+mn[n[e+15]]).toLowerCase()}let bg;const T4=new Uint8Array(16);function b4(){if(!bg){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bg=crypto.getRandomValues.bind(crypto)}return bg(T4)}const A4=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var R0={randomUUID:A4};function iy(n,e,t){if(R0.randomUUID&&!e&&!n)return R0.randomUUID();n=n||{};const r=n.random||(n.rng||b4)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return I4(r)}const S4={make(n,e,t){const r=iy(),i=Date.now();return{name:n,users:t,id:r,people:e,transactions:{},timestamp:i}}},R4={make(n=""){return{name:n,friends:{},sheets:{}}}},xm={make(n,e,t){const r=Array.isArray(n)?n.length:n;let i="";const s=iy();let a=0,c=t>=0&&t<r?t:r>0?0:-1;const h=Array.from({length:r},(p,_)=>({isDebtor:Array.isArray(n)?n[_]:!0,owedAmount:0}));let d=Date.now();return{name:i,id:s,amount:a,payer:c,currency:e,debts:h,timestamp:d}},makeBatch(n,e,t,r,i){const s={},a=this.make(n,e,t);r.forEach((h,d)=>{if(h!==0)if(h>0)a.debts[d].isDebtor=!0,a.debts[d].owedAmount=h,a.amount+=h;else{const p=this.make(n,e,d);p.debts[t].isDebtor=!0,p.debts[t].owedAmount=-h,p.amount=-h,s[p.id]=p}}),a.amount>0&&(s[a.id]=a);let c=0;for(const h of Object.values(s))h.name=`${i} (${c})`,c++;return s},name(n){return n.name||"New Transaction"},position(n,e){return n.payer===e?n.amount-n.debts[e].owedAmount:-n.debts[e].owedAmount},updatePeople(n,e){for(let t=n.debts.length;t<e;t++)n.debts.push({isDebtor:!1,owedAmount:0})},clearOwedAmounts(n,e){n.debts.forEach((t,r)=>{r!==e&&(t.owedAmount=0)})},fillLastOwedAmount(n){const e=n.debts.map((a,c)=>({debt:a,index:c})).filter(({debt:a})=>a.isDebtor&&a.owedAmount===0),t=n.debts.reduce((a,c)=>a+c.owedAmount,0),r=n.amount-t;let i=!1;if(r<0&&(n.amount-=r,i=!0),e.length!==1||r<=0)return i;const{index:s}=e[0];return n.debts[s].owedAmount=r,i},check(n){let e=0;if(n.debts.forEach((t,r)=>{if(t.owedAmount>0&&!t.isDebtor)throw new Error(`The person ${r} is not a debtor but owes money!`);e+=t.owedAmount}),e!==n.amount)throw new Error(`The owed amounts: ${e/100} do not sum up to the transaction amount: ${n.amount/100}! Probably you need to fix either the shares or the total amount.`)},split(n){const e=n.debts.filter(i=>i.isDebtor).length;if(e==0){Object.values(n.debts).forEach(i=>{i.owedAmount=0});return}const t=Math.floor(n.amount/e);let r=n.amount%e;n.debts.forEach((i,s)=>{i.isDebtor?(i.owedAmount=t,r>0&&s!==n.payer&&(i.owedAmount+=1,--r)):i.owedAmount=0})},state(n){if(n.debts.length!==2)return-1;if(n.debts[0].isDebtor&&!n.debts[1].isDebtor&&n.payer===1&&n.debts[0].owedAmount===n.amount||n.debts[1].isDebtor&&!n.debts[0].isDebtor&&n.payer===0&&n.debts[1].owedAmount===n.amount)return 0;if(n.debts[0].isDebtor&&n.debts[1].isDebtor){const e=1-n.payer,t=(n.amount+n.amount%2)/2,r=(n.amount-n.amount%2)/2;if(n.debts[n.payer].owedAmount===r&&n.debts[e].owedAmount===t)return 1}return-1},getTransactionList(n){return n?Object.entries(n).sort(([,e],[,t])=>t.timestamp-e.timestamp).map(([e])=>e):[]}},rc={make(n=0){const r={mat:[],ntransactions:0};for(let i=0;i<n;++i)this.addPeople(r,n);return r},isEmpty(n){if(n.ntransactions===0)return!0;for(const e of n.mat)for(const t of e)if(t!==0)return!1;return!0},addPeople(n,e){for(let t=n.mat.length;t<e;++t)n.mat.push(Array(n.mat.length).fill(0))},_minCashFlow(n){const e=n.length,t=Array(e).fill(0);for(let s=0;s<e;s++)for(let a=0;a<s;a++){const c=n[s][a];t[s]-=c,t[a]+=c}const r=[];let i=t.map((s,a)=>({index:a,balance:s})).filter(({balance:s})=>s!==0);for(;i.length>0;){let s=0,a=0;for(let p=1;p<i.length;p++)i[p].balance<i[s].balance&&(s=p),i[p].balance>i[a].balance&&(a=p);const c=i[s],h=i[a],d=Math.min(-c.balance,h.balance);r.push([c.index,h.index,d]),c.balance+=d,h.balance-=d,i=i.filter(p=>p.balance!==0)}return r},_simplify(n){if(n.mat.length<3)return;const e=[];for(let r=0;r<n.mat.length;r++)e.push(Array(r).fill(0));const t=this._minCashFlow(n.mat);for(const[r,i,s]of t)this._apply(e,r,i,s);n.mat=e},getSummary(n,e){if(e==null||e<0||e>=n.mat.length)return[];const t=[];this._simplify(n);for(let r=0;r<n.mat[e].length;r++)n.mat[e][r]!==0&&t.push({person:r,amount:n.mat[e][r]});for(let r=e+1;r<n.mat.length;r++)n.mat[r][e]!==0&&t.push({person:r,amount:-n.mat[r][e]});return t},applyTransaction(n,e,t){const r=e.payer;for(let i=0;i<e.debts.length;++i)this._apply(n.mat,i,r,t*e.debts[i].owedAmount);n.ntransactions+=t},_apply(n,e,t,r){e!==t&&(e<t&&([e,t]=[t,e],r=-r),n[e][t]+=r)},makeEquivalentTransactionBatch(n,e,t,r,i=1,s=null){if(t==null||t<0||t>=n.mat.length)return[];s=s||e;const a=n.mat.length,c=new Array(a).fill(0);for(let h=0;h<t;h++)c[h]=Math.round(i*n.mat[t][h]);for(let h=t+1;h<a;h++)c[h]=-Math.round(i*n.mat[h][t]);return xm.makeBatch(a,s,t,c,r)}},Ag={make(n={},e=0){const s={nPeople:e,nTransactions:0,nCurrencies:0,mats:{}};return this.applyTransactions(s,n,e),s},getCurrencies(n){return Object.entries(n.mats).filter(([e,t])=>!rc.isEmpty(t)).map(([e])=>e)},applyTransactions(n,e,t){n.nPeople=t,t&&Object.values(e).forEach(r=>{r.currency in n.mats||(n.mats[r.currency]=rc.make(t),++n.nCurrencies),rc.applyTransaction(n.mats[r.currency],r,1),++n.nTransactions})},getSummary(n,e){const t=[],r={};return e<0||!(n!=null&&n.nPeople)||e>=n.nPeople?{ans:t,totals:r}:(Object.entries(n.mats).forEach(([i,s])=>{const a=rc.getSummary(s,e);let c=0;a.length>0&&a.forEach(h=>{t.push({currency:i,person:h.person,amount:h.amount}),c+=h.amount}),c!=0&&(r[i]=c)}),{ans:t,totals:r})},makeEquivalentTransactionBatch(n,e,t,r,i=1,s=null){return rc.makeEquivalentTransactionBatch(n.mats[e],e,t,r,i,s)}},ic={make(n="",e="",t="",r=null){n||(n=iy());let i=!0;return r||(r=Date.now()),{id:n,name:e,active:i,email:t,timestamp:r}},user2person(n){return this.make(n.id,n.name,n.email)},makeUser(n="",e="",t="",r=!1){return{id:n,name:e,email:t,emailVerified:r}},username(n){return(n==null?void 0:n.name)||(n==null?void 0:n.email)},compare(n,e){const t=this.username(n).toLowerCase(),r=this.username(e).toLowerCase();return t.localeCompare(r)}},Sg={make(){return{apiKey:null,authDomain:null,projectId:null,storageBucket:null,messagingSenderId:null,appId:null}},isCompatible(n){return n?["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].every(t=>n[t]&&n[t].trim()!==""):!1}};var sc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Dm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,v=2,I=4,O=1,M=2,F=1,Q=2,z=4,q=8,W=16,Y=32,re=64,P=128,S=256,A=512,x=30,N="...",V=800,C=16,fe=1,We=2,tt=3,Ce=1/0,$e=9007199254740991,Dn=17976931348623157e292,vn=0/0,Dt=4294967295,St=Dt-1,Rt=Dt>>>1,Lr=[["ary",P],["bind",F],["bindKey",Q],["curry",q],["curryRight",W],["flip",A],["partial",Y],["partialRight",re],["rearg",S]],dn="[object Arguments]",Zt="[object Array]",Z="[object AsyncFunction]",_e="[object Boolean]",de="[object Date]",Ee="[object DOMException]",Qe="[object Error]",ut="[object Function]",R="[object GeneratorFunction]",D="[object Map]",j="[object Number]",ie="[object Null]",J="[object Object]",ue="[object Promise]",pe="[object Proxy]",le="[object RegExp]",ce="[object Set]",ae="[object String]",Pe="[object Symbol]",ge="[object Undefined]",Ie="[object WeakMap]",ke="[object WeakSet]",Re="[object ArrayBuffer]",Me="[object DataView]",Ze="[object Float32Array]",Gt="[object Float64Array]",kt="[object Int8Array]",pn="[object Int16Array]",Ot="[object Int32Array]",ar="[object Uint8Array]",ti="[object Uint8ClampedArray]",$t="[object Uint16Array]",wn="[object Uint32Array]",qo=/\b__p \+= '';/g,_u=/\b(__p \+=) '' \+/g,Rl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yu=/&(?:amp|lt|gt|quot|#39);/g,Bi=/[&<>"']/g,vu=RegExp(yu.source),wu=RegExp(Bi.source),ni=/<%-([\s\S]+?)%>/g,Pl=/<%([\s\S]+?)%>/g,Bs=/<%=([\s\S]+?)%>/g,Cl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$s=/^\w*$/,xl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,en=/[\\^$.*+?()[\]{}|]/g,Dl=RegExp(en.source),ri=/^\s+/,qs=/\s/,Ud=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bd=/\{\n\/\* \[wrapped with (.+)\] \*/,$i=/,? & /,$d=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qd=/[()=,{}\[\]\/\s]/,zo=/\\(\\)?/g,kl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ko=/\w*$/,jo=/^[-+]0x[0-9a-f]+$/i,Mr=/^0b[01]+$/i,Ol=/^\[object .+?Constructor\]$/,Vl=/^0o[0-7]+$/i,Eu=/^(?:0|[1-9]\d*)$/,Iu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zs=/($^)/,Nl=/['\n\r\u2028\u2029\\]/g,Wo="\\ud800-\\udfff",Ho="\\u0300-\\u036f",Ll="\\ufe20-\\ufe2f",Tu="\\u20d0-\\u20ff",qi=Ho+Ll+Tu,Fr="\\u2700-\\u27bf",Go="a-z\\xdf-\\xf6\\xf8-\\xff",zd="\\xac\\xb1\\xd7\\xf7",Ml="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Fl="\\u2000-\\u206f",Ul=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qo="A-Z\\xc0-\\xd6\\xd8-\\xde",Jo="\\ufe0e\\ufe0f",bu=zd+Ml+Fl+Ul,Yo="['\u2019]",Kd="["+Wo+"]",Bl="["+bu+"]",Ks="["+qi+"]",Au="\\d+",jd="["+Fr+"]",Ur="["+Go+"]",ur="[^"+Wo+bu+Au+Fr+Go+Qo+"]",zi="\\ud83c[\\udffb-\\udfff]",Xo="(?:"+Ks+"|"+zi+")",Su="[^"+Wo+"]",dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ki="[\\ud800-\\udbff][\\udc00-\\udfff]",cr="["+Qo+"]",ji="\\u200d",$l="(?:"+Ur+"|"+ur+")",ql="(?:"+cr+"|"+ur+")",zl="(?:"+Yo+"(?:d|ll|m|re|s|t|ve))?",Kl="(?:"+Yo+"(?:D|LL|M|RE|S|T|VE))?",jl=Xo+"?",Wl="["+Jo+"]?",js="(?:"+ji+"(?:"+[Su,dt,Ki].join("|")+")"+Wl+jl+")*",Br="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ru=Wl+jl+js,Gl="(?:"+[jd,dt,Ki].join("|")+")"+Ru,Wi="(?:"+[Su+Ks+"?",Ks,dt,Ki,Kd].join("|")+")",Wd=RegExp(Yo,"g"),Hd=RegExp(Ks,"g"),Pu=RegExp(zi+"(?="+zi+")|"+Wi+Ru,"g"),$r=RegExp([cr+"?"+Ur+"+"+zl+"(?="+[Bl,cr,"$"].join("|")+")",ql+"+"+Kl+"(?="+[Bl,cr+$l,"$"].join("|")+")",cr+"?"+$l+"+"+zl,cr+"+"+Kl,Hl,Br,Au,Gl].join("|"),"g"),Gd=RegExp("["+ji+Wo+qi+Jo+"]"),Qd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ea=-1,yt={};yt[Ze]=yt[Gt]=yt[kt]=yt[pn]=yt[Ot]=yt[ar]=yt[ti]=yt[$t]=yt[wn]=!0,yt[dn]=yt[Zt]=yt[Re]=yt[_e]=yt[Me]=yt[de]=yt[Qe]=yt[ut]=yt[D]=yt[j]=yt[J]=yt[le]=yt[ce]=yt[ae]=yt[Ie]=!1;var ct={};ct[dn]=ct[Zt]=ct[Re]=ct[Me]=ct[_e]=ct[de]=ct[Ze]=ct[Gt]=ct[kt]=ct[pn]=ct[Ot]=ct[D]=ct[j]=ct[J]=ct[le]=ct[ce]=ct[ae]=ct[Pe]=ct[ar]=ct[ti]=ct[$t]=ct[wn]=!0,ct[Qe]=ct[ut]=ct[Ie]=!1;var Ws={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ql={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jd=parseFloat,Yd=parseInt,xu=typeof sc=="object"&&sc&&sc.Object===Object&&sc,Jl=typeof self=="object"&&self&&self.Object===Object&&self,Qt=xu||Jl||Function("return this")(),Hi=e&&!e.nodeType&&e,qr=Hi&&!0&&n&&!n.nodeType&&n,lr=qr&&qr.exports===Hi,ta=lr&&xu.process,qn=function(){try{var U=qr&&qr.require&&qr.require("util").types;return U||ta&&ta.binding&&ta.binding("util")}catch{}}(),Gi=qn&&qn.isArrayBuffer,Du=qn&&qn.isDate,na=qn&&qn.isMap,Hs=qn&&qn.isRegExp,ku=qn&&qn.isSet,Gs=qn&&qn.isTypedArray;function kn(U,X,G){switch(G.length){case 0:return U.call(X);case 1:return U.call(X,G[0]);case 2:return U.call(X,G[0],G[1]);case 3:return U.call(X,G[0],G[1],G[2])}return U.apply(X,G)}function Yl(U,X,G,we){for(var qe=-1,lt=U==null?0:U.length;++qe<lt;){var tn=U[qe];X(we,tn,G(tn),U)}return we}function an(U,X){for(var G=-1,we=U==null?0:U.length;++G<we&&X(U[G],G,U)!==!1;);return U}function Xl(U,X){for(var G=U==null?0:U.length;G--&&X(U[G],G,U)!==!1;);return U}function Ou(U,X){for(var G=-1,we=U==null?0:U.length;++G<we;)if(!X(U[G],G,U))return!1;return!0}function hr(U,X){for(var G=-1,we=U==null?0:U.length,qe=0,lt=[];++G<we;){var tn=U[G];X(tn,G,U)&&(lt[qe++]=tn)}return lt}function Qi(U,X){var G=U==null?0:U.length;return!!G&&si(U,X,0)>-1}function ra(U,X,G){for(var we=-1,qe=U==null?0:U.length;++we<qe;)if(G(X,U[we]))return!0;return!1}function pt(U,X){for(var G=-1,we=U==null?0:U.length,qe=Array(we);++G<we;)qe[G]=X(U[G],G,U);return qe}function br(U,X){for(var G=-1,we=X.length,qe=U.length;++G<we;)U[qe+G]=X[G];return U}function ia(U,X,G,we){var qe=-1,lt=U==null?0:U.length;for(we&&lt&&(G=U[++qe]);++qe<lt;)G=X(G,U[qe],qe,U);return G}function ii(U,X,G,we){var qe=U==null?0:U.length;for(we&&qe&&(G=U[--qe]);qe--;)G=X(G,U[qe],qe,U);return G}function sa(U,X){for(var G=-1,we=U==null?0:U.length;++G<we;)if(X(U[G],G,U))return!0;return!1}var Zl=g("length");function eh(U){return U.split("")}function th(U){return U.match($d)||[]}function Qs(U,X,G){var we;return G(U,function(qe,lt,tn){if(X(qe,lt,tn))return we=lt,!1}),we}function un(U,X,G,we){for(var qe=U.length,lt=G+(we?1:-1);we?lt--:++lt<qe;)if(X(U[lt],lt,U))return lt;return-1}function si(U,X,G){return X===X?bR(U,X,G):un(U,oi,G)}function nh(U,X,G,we){for(var qe=G-1,lt=U.length;++qe<lt;)if(we(U[qe],X))return qe;return-1}function oi(U){return U!==U}function l(U,X){var G=U==null?0:U.length;return G?H(U,X)/G:vn}function g(U){return function(X){return X==null?t:X[U]}}function y(U){return function(X){return U==null?t:U[X]}}function T(U,X,G,we,qe){return qe(U,function(lt,tn,Et){G=we?(we=!1,lt):X(G,lt,tn,Et)}),G}function $(U,X){var G=U.length;for(U.sort(X);G--;)U[G]=U[G].value;return U}function H(U,X){for(var G,we=-1,qe=U.length;++we<qe;){var lt=X(U[we]);lt!==t&&(G=G===t?lt:G+lt)}return G}function he(U,X){for(var G=-1,we=Array(U);++G<U;)we[G]=X(G);return we}function gt(U,X){return pt(X,function(G){return[G,U[G]]})}function Jt(U){return U&&U.slice(0,hy(U)+1).replace(ri,"")}function Fe(U){return function(X){return U(X)}}function Yt(U,X){return pt(X,function(G){return U[G]})}function Ft(U,X){return U.has(X)}function ai(U,X){for(var G=-1,we=U.length;++G<we&&si(X,U[G],0)>-1;);return G}function zn(U,X){for(var G=U.length;G--&&si(X,U[G],0)>-1;);return G}function oa(U,X){for(var G=U.length,we=0;G--;)U[G]===X&&++we;return we}var Vu=y(Ws),yR=y(Ql);function vR(U){return"\\"+Ct[U]}function wR(U,X){return U==null?t:U[X]}function aa(U){return Gd.test(U)}function ER(U){return Qd.test(U)}function IR(U){for(var X,G=[];!(X=U.next()).done;)G.push(X.value);return G}function Xd(U){var X=-1,G=Array(U.size);return U.forEach(function(we,qe){G[++X]=[qe,we]}),G}function ly(U,X){return function(G){return U(X(G))}}function Ji(U,X){for(var G=-1,we=U.length,qe=0,lt=[];++G<we;){var tn=U[G];(tn===X||tn===p)&&(U[G]=p,lt[qe++]=G)}return lt}function rh(U){var X=-1,G=Array(U.size);return U.forEach(function(we){G[++X]=we}),G}function TR(U){var X=-1,G=Array(U.size);return U.forEach(function(we){G[++X]=[we,we]}),G}function bR(U,X,G){for(var we=G-1,qe=U.length;++we<qe;)if(U[we]===X)return we;return-1}function AR(U,X,G){for(var we=G+1;we--;)if(U[we]===X)return we;return we}function ua(U){return aa(U)?RR(U):Zl(U)}function Ar(U){return aa(U)?PR(U):eh(U)}function hy(U){for(var X=U.length;X--&&qs.test(U.charAt(X)););return X}var SR=y(Cu);function RR(U){for(var X=Pu.lastIndex=0;Pu.test(U);)++X;return X}function PR(U){return U.match(Pu)||[]}function CR(U){return U.match($r)||[]}var xR=function U(X){X=X==null?Qt:ca.defaults(Qt.Object(),X,ca.pick(Qt,Zo));var G=X.Array,we=X.Date,qe=X.Error,lt=X.Function,tn=X.Math,Et=X.Object,Zd=X.RegExp,DR=X.String,fr=X.TypeError,ih=G.prototype,kR=lt.prototype,la=Et.prototype,sh=X["__core-js_shared__"],oh=kR.toString,mt=la.hasOwnProperty,OR=0,fy=function(){var o=/[^.]+$/.exec(sh&&sh.keys&&sh.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),ah=la.toString,VR=oh.call(Et),NR=Qt._,LR=Zd("^"+oh.call(mt).replace(en,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uh=lr?X.Buffer:t,Yi=X.Symbol,ch=X.Uint8Array,dy=uh?uh.allocUnsafe:t,lh=ly(Et.getPrototypeOf,Et),py=Et.create,gy=la.propertyIsEnumerable,hh=ih.splice,my=Yi?Yi.isConcatSpreadable:t,Nu=Yi?Yi.iterator:t,Js=Yi?Yi.toStringTag:t,fh=function(){try{var o=to(Et,"defineProperty");return o({},"",{}),o}catch{}}(),MR=X.clearTimeout!==Qt.clearTimeout&&X.clearTimeout,FR=we&&we.now!==Qt.Date.now&&we.now,UR=X.setTimeout!==Qt.setTimeout&&X.setTimeout,dh=tn.ceil,ph=tn.floor,ep=Et.getOwnPropertySymbols,BR=uh?uh.isBuffer:t,_y=X.isFinite,$R=ih.join,qR=ly(Et.keys,Et),nn=tn.max,En=tn.min,zR=we.now,KR=X.parseInt,yy=tn.random,jR=ih.reverse,tp=to(X,"DataView"),Lu=to(X,"Map"),np=to(X,"Promise"),ha=to(X,"Set"),Mu=to(X,"WeakMap"),Fu=to(Et,"create"),gh=Mu&&new Mu,fa={},WR=no(tp),HR=no(Lu),GR=no(np),QR=no(ha),JR=no(Mu),mh=Yi?Yi.prototype:t,Uu=mh?mh.valueOf:t,vy=mh?mh.toString:t;function E(o){if(Ut(o)&&!je(o)&&!(o instanceof nt)){if(o instanceof dr)return o;if(mt.call(o,"__wrapped__"))return wv(o)}return new dr(o)}var da=function(){function o(){}return function(u){if(!Vt(u))return{};if(py)return py(u);o.prototype=u;var f=new o;return o.prototype=t,f}}();function _h(){}function dr(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=t}E.templateSettings={escape:ni,evaluate:Pl,interpolate:Bs,variable:"",imports:{_:E}},E.prototype=_h.prototype,E.prototype.constructor=E,dr.prototype=da(_h.prototype),dr.prototype.constructor=dr;function nt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function YR(){var o=new nt(this.__wrapped__);return o.__actions__=Kn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Kn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Kn(this.__views__),o}function XR(){if(this.__filtered__){var o=new nt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function ZR(){var o=this.__wrapped__.value(),u=this.__dir__,f=je(o),m=u<0,w=f?o.length:0,b=hC(0,w,this.__views__),k=b.start,L=b.end,B=L-k,ee=m?L:k-1,te=this.__iteratees__,se=te.length,me=0,Ae=En(B,this.__takeCount__);if(!f||!m&&w==B&&Ae==B)return zy(o,this.__actions__);var Ve=[];e:for(;B--&&me<Ae;){ee+=u;for(var Je=-1,Ne=o[ee];++Je<se;){var et=te[Je],it=et.iteratee,er=et.type,Nn=it(Ne);if(er==We)Ne=Nn;else if(!Nn){if(er==fe)continue e;break e}}Ve[me++]=Ne}return Ve}nt.prototype=da(_h.prototype),nt.prototype.constructor=nt;function Ys(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function eP(){this.__data__=Fu?Fu(null):{},this.size=0}function tP(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function nP(o){var u=this.__data__;if(Fu){var f=u[o];return f===h?t:f}return mt.call(u,o)?u[o]:t}function rP(o){var u=this.__data__;return Fu?u[o]!==t:mt.call(u,o)}function iP(o,u){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=Fu&&u===t?h:u,this}Ys.prototype.clear=eP,Ys.prototype.delete=tP,Ys.prototype.get=nP,Ys.prototype.has=rP,Ys.prototype.set=iP;function ui(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function sP(){this.__data__=[],this.size=0}function oP(o){var u=this.__data__,f=yh(u,o);if(f<0)return!1;var m=u.length-1;return f==m?u.pop():hh.call(u,f,1),--this.size,!0}function aP(o){var u=this.__data__,f=yh(u,o);return f<0?t:u[f][1]}function uP(o){return yh(this.__data__,o)>-1}function cP(o,u){var f=this.__data__,m=yh(f,o);return m<0?(++this.size,f.push([o,u])):f[m][1]=u,this}ui.prototype.clear=sP,ui.prototype.delete=oP,ui.prototype.get=aP,ui.prototype.has=uP,ui.prototype.set=cP;function ci(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function lP(){this.size=0,this.__data__={hash:new Ys,map:new(Lu||ui),string:new Ys}}function hP(o){var u=xh(this,o).delete(o);return this.size-=u?1:0,u}function fP(o){return xh(this,o).get(o)}function dP(o){return xh(this,o).has(o)}function pP(o,u){var f=xh(this,o),m=f.size;return f.set(o,u),this.size+=f.size==m?0:1,this}ci.prototype.clear=lP,ci.prototype.delete=hP,ci.prototype.get=fP,ci.prototype.has=dP,ci.prototype.set=pP;function Xs(o){var u=-1,f=o==null?0:o.length;for(this.__data__=new ci;++u<f;)this.add(o[u])}function gP(o){return this.__data__.set(o,h),this}function mP(o){return this.__data__.has(o)}Xs.prototype.add=Xs.prototype.push=gP,Xs.prototype.has=mP;function Sr(o){var u=this.__data__=new ui(o);this.size=u.size}function _P(){this.__data__=new ui,this.size=0}function yP(o){var u=this.__data__,f=u.delete(o);return this.size=u.size,f}function vP(o){return this.__data__.get(o)}function wP(o){return this.__data__.has(o)}function EP(o,u){var f=this.__data__;if(f instanceof ui){var m=f.__data__;if(!Lu||m.length<i-1)return m.push([o,u]),this.size=++f.size,this;f=this.__data__=new ci(m)}return f.set(o,u),this.size=f.size,this}Sr.prototype.clear=_P,Sr.prototype.delete=yP,Sr.prototype.get=vP,Sr.prototype.has=wP,Sr.prototype.set=EP;function wy(o,u){var f=je(o),m=!f&&ro(o),w=!f&&!m&&ns(o),b=!f&&!m&&!w&&_a(o),k=f||m||w||b,L=k?he(o.length,DR):[],B=L.length;for(var ee in o)(u||mt.call(o,ee))&&!(k&&(ee=="length"||w&&(ee=="offset"||ee=="parent")||b&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||di(ee,B)))&&L.push(ee);return L}function Ey(o){var u=o.length;return u?o[dp(0,u-1)]:t}function IP(o,u){return Dh(Kn(o),Zs(u,0,o.length))}function TP(o){return Dh(Kn(o))}function rp(o,u,f){(f!==t&&!Rr(o[u],f)||f===t&&!(u in o))&&li(o,u,f)}function Bu(o,u,f){var m=o[u];(!(mt.call(o,u)&&Rr(m,f))||f===t&&!(u in o))&&li(o,u,f)}function yh(o,u){for(var f=o.length;f--;)if(Rr(o[f][0],u))return f;return-1}function bP(o,u,f,m){return Xi(o,function(w,b,k){u(m,w,f(w),k)}),m}function Iy(o,u){return o&&Kr(u,cn(u),o)}function AP(o,u){return o&&Kr(u,Wn(u),o)}function li(o,u,f){u=="__proto__"&&fh?fh(o,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[u]=f}function ip(o,u){for(var f=-1,m=u.length,w=G(m),b=o==null;++f<m;)w[f]=b?t:Fp(o,u[f]);return w}function Zs(o,u,f){return o===o&&(f!==t&&(o=o<=f?o:f),u!==t&&(o=o>=u?o:u)),o}function pr(o,u,f,m,w,b){var k,L=u&_,B=u&v,ee=u&I;if(f&&(k=w?f(o,m,w,b):f(o)),k!==t)return k;if(!Vt(o))return o;var te=je(o);if(te){if(k=dC(o),!L)return Kn(o,k)}else{var se=In(o),me=se==ut||se==R;if(ns(o))return Wy(o,L);if(se==J||se==dn||me&&!w){if(k=B||me?{}:hv(o),!L)return B?nC(o,AP(k,o)):tC(o,Iy(k,o))}else{if(!ct[se])return w?o:{};k=pC(o,se,L)}}b||(b=new Sr);var Ae=b.get(o);if(Ae)return Ae;b.set(o,k),Bv(o)?o.forEach(function(Ne){k.add(pr(Ne,u,f,Ne,o,b))}):Fv(o)&&o.forEach(function(Ne,et){k.set(et,pr(Ne,u,f,et,o,b))});var Ve=ee?B?bp:Tp:B?Wn:cn,Je=te?t:Ve(o);return an(Je||o,function(Ne,et){Je&&(et=Ne,Ne=o[et]),Bu(k,et,pr(Ne,u,f,et,o,b))}),k}function SP(o){var u=cn(o);return function(f){return Ty(f,o,u)}}function Ty(o,u,f){var m=f.length;if(o==null)return!m;for(o=Et(o);m--;){var w=f[m],b=u[w],k=o[w];if(k===t&&!(w in o)||!b(k))return!1}return!0}function by(o,u,f){if(typeof o!="function")throw new fr(a);return Hu(function(){o.apply(t,f)},u)}function $u(o,u,f,m){var w=-1,b=Qi,k=!0,L=o.length,B=[],ee=u.length;if(!L)return B;f&&(u=pt(u,Fe(f))),m?(b=ra,k=!1):u.length>=i&&(b=Ft,k=!1,u=new Xs(u));e:for(;++w<L;){var te=o[w],se=f==null?te:f(te);if(te=m||te!==0?te:0,k&&se===se){for(var me=ee;me--;)if(u[me]===se)continue e;B.push(te)}else b(u,se,m)||B.push(te)}return B}var Xi=Yy(zr),Ay=Yy(op,!0);function RP(o,u){var f=!0;return Xi(o,function(m,w,b){return f=!!u(m,w,b),f}),f}function vh(o,u,f){for(var m=-1,w=o.length;++m<w;){var b=o[m],k=u(b);if(k!=null&&(L===t?k===k&&!Zn(k):f(k,L)))var L=k,B=b}return B}function PP(o,u,f,m){var w=o.length;for(f=He(f),f<0&&(f=-f>w?0:w+f),m=m===t||m>w?w:He(m),m<0&&(m+=w),m=f>m?0:qv(m);f<m;)o[f++]=u;return o}function Sy(o,u){var f=[];return Xi(o,function(m,w,b){u(m,w,b)&&f.push(m)}),f}function gn(o,u,f,m,w){var b=-1,k=o.length;for(f||(f=mC),w||(w=[]);++b<k;){var L=o[b];u>0&&f(L)?u>1?gn(L,u-1,f,m,w):br(w,L):m||(w[w.length]=L)}return w}var sp=Xy(),Ry=Xy(!0);function zr(o,u){return o&&sp(o,u,cn)}function op(o,u){return o&&Ry(o,u,cn)}function wh(o,u){return hr(u,function(f){return pi(o[f])})}function eo(o,u){u=es(u,o);for(var f=0,m=u.length;o!=null&&f<m;)o=o[jr(u[f++])];return f&&f==m?o:t}function Py(o,u,f){var m=u(o);return je(o)?m:br(m,f(o))}function On(o){return o==null?o===t?ge:ie:Js&&Js in Et(o)?lC(o):TC(o)}function ap(o,u){return o>u}function CP(o,u){return o!=null&&mt.call(o,u)}function xP(o,u){return o!=null&&u in Et(o)}function DP(o,u,f){return o>=En(u,f)&&o<nn(u,f)}function up(o,u,f){for(var m=f?ra:Qi,w=o[0].length,b=o.length,k=b,L=G(b),B=1/0,ee=[];k--;){var te=o[k];k&&u&&(te=pt(te,Fe(u))),B=En(te.length,B),L[k]=!f&&(u||w>=120&&te.length>=120)?new Xs(k&&te):t}te=o[0];var se=-1,me=L[0];e:for(;++se<w&&ee.length<B;){var Ae=te[se],Ve=u?u(Ae):Ae;if(Ae=f||Ae!==0?Ae:0,!(me?Ft(me,Ve):m(ee,Ve,f))){for(k=b;--k;){var Je=L[k];if(!(Je?Ft(Je,Ve):m(o[k],Ve,f)))continue e}me&&me.push(Ve),ee.push(Ae)}}return ee}function kP(o,u,f,m){return zr(o,function(w,b,k){u(m,f(w),b,k)}),m}function qu(o,u,f){u=es(u,o),o=gv(o,u);var m=o==null?o:o[jr(mr(u))];return m==null?t:kn(m,o,f)}function Cy(o){return Ut(o)&&On(o)==dn}function OP(o){return Ut(o)&&On(o)==Re}function VP(o){return Ut(o)&&On(o)==de}function zu(o,u,f,m,w){return o===u?!0:o==null||u==null||!Ut(o)&&!Ut(u)?o!==o&&u!==u:NP(o,u,f,m,zu,w)}function NP(o,u,f,m,w,b){var k=je(o),L=je(u),B=k?Zt:In(o),ee=L?Zt:In(u);B=B==dn?J:B,ee=ee==dn?J:ee;var te=B==J,se=ee==J,me=B==ee;if(me&&ns(o)){if(!ns(u))return!1;k=!0,te=!1}if(me&&!te)return b||(b=new Sr),k||_a(o)?uv(o,u,f,m,w,b):uC(o,u,B,f,m,w,b);if(!(f&O)){var Ae=te&&mt.call(o,"__wrapped__"),Ve=se&&mt.call(u,"__wrapped__");if(Ae||Ve){var Je=Ae?o.value():o,Ne=Ve?u.value():u;return b||(b=new Sr),w(Je,Ne,f,m,b)}}return me?(b||(b=new Sr),cC(o,u,f,m,w,b)):!1}function LP(o){return Ut(o)&&In(o)==D}function cp(o,u,f,m){var w=f.length,b=w,k=!m;if(o==null)return!b;for(o=Et(o);w--;){var L=f[w];if(k&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++w<b;){L=f[w];var B=L[0],ee=o[B],te=L[1];if(k&&L[2]){if(ee===t&&!(B in o))return!1}else{var se=new Sr;if(m)var me=m(ee,te,B,o,u,se);if(!(me===t?zu(te,ee,O|M,m,se):me))return!1}}return!0}function xy(o){if(!Vt(o)||yC(o))return!1;var u=pi(o)?LR:Ol;return u.test(no(o))}function MP(o){return Ut(o)&&On(o)==le}function FP(o){return Ut(o)&&In(o)==ce}function UP(o){return Ut(o)&&Mh(o.length)&&!!yt[On(o)]}function Dy(o){return typeof o=="function"?o:o==null?Hn:typeof o=="object"?je(o)?Vy(o[0],o[1]):Oy(o):Zv(o)}function lp(o){if(!Wu(o))return qR(o);var u=[];for(var f in Et(o))mt.call(o,f)&&f!="constructor"&&u.push(f);return u}function BP(o){if(!Vt(o))return IC(o);var u=Wu(o),f=[];for(var m in o)m=="constructor"&&(u||!mt.call(o,m))||f.push(m);return f}function hp(o,u){return o<u}function ky(o,u){var f=-1,m=jn(o)?G(o.length):[];return Xi(o,function(w,b,k){m[++f]=u(w,b,k)}),m}function Oy(o){var u=Sp(o);return u.length==1&&u[0][2]?dv(u[0][0],u[0][1]):function(f){return f===o||cp(f,o,u)}}function Vy(o,u){return Pp(o)&&fv(u)?dv(jr(o),u):function(f){var m=Fp(f,o);return m===t&&m===u?Up(f,o):zu(u,m,O|M)}}function Eh(o,u,f,m,w){o!==u&&sp(u,function(b,k){if(w||(w=new Sr),Vt(b))$P(o,u,k,f,Eh,m,w);else{var L=m?m(xp(o,k),b,k+"",o,u,w):t;L===t&&(L=b),rp(o,k,L)}},Wn)}function $P(o,u,f,m,w,b,k){var L=xp(o,f),B=xp(u,f),ee=k.get(B);if(ee){rp(o,f,ee);return}var te=b?b(L,B,f+"",o,u,k):t,se=te===t;if(se){var me=je(B),Ae=!me&&ns(B),Ve=!me&&!Ae&&_a(B);te=B,me||Ae||Ve?je(L)?te=L:qt(L)?te=Kn(L):Ae?(se=!1,te=Wy(B,!0)):Ve?(se=!1,te=Hy(B,!0)):te=[]:Gu(B)||ro(B)?(te=L,ro(L)?te=zv(L):(!Vt(L)||pi(L))&&(te=hv(B))):se=!1}se&&(k.set(B,te),w(te,B,m,b,k),k.delete(B)),rp(o,f,te)}function Ny(o,u){var f=o.length;if(!!f)return u+=u<0?f:0,di(u,f)?o[u]:t}function Ly(o,u,f){u.length?u=pt(u,function(b){return je(b)?function(k){return eo(k,b.length===1?b[0]:b)}:b}):u=[Hn];var m=-1;u=pt(u,Fe(Oe()));var w=ky(o,function(b,k,L){var B=pt(u,function(ee){return ee(b)});return{criteria:B,index:++m,value:b}});return $(w,function(b,k){return eC(b,k,f)})}function qP(o,u){return My(o,u,function(f,m){return Up(o,m)})}function My(o,u,f){for(var m=-1,w=u.length,b={};++m<w;){var k=u[m],L=eo(o,k);f(L,k)&&Ku(b,es(k,o),L)}return b}function zP(o){return function(u){return eo(u,o)}}function fp(o,u,f,m){var w=m?nh:si,b=-1,k=u.length,L=o;for(o===u&&(u=Kn(u)),f&&(L=pt(o,Fe(f)));++b<k;)for(var B=0,ee=u[b],te=f?f(ee):ee;(B=w(L,te,B,m))>-1;)L!==o&&hh.call(L,B,1),hh.call(o,B,1);return o}function Fy(o,u){for(var f=o?u.length:0,m=f-1;f--;){var w=u[f];if(f==m||w!==b){var b=w;di(w)?hh.call(o,w,1):mp(o,w)}}return o}function dp(o,u){return o+ph(yy()*(u-o+1))}function KP(o,u,f,m){for(var w=-1,b=nn(dh((u-o)/(f||1)),0),k=G(b);b--;)k[m?b:++w]=o,o+=f;return k}function pp(o,u){var f="";if(!o||u<1||u>$e)return f;do u%2&&(f+=o),u=ph(u/2),u&&(o+=o);while(u);return f}function Ye(o,u){return Dp(pv(o,u,Hn),o+"")}function jP(o){return Ey(ya(o))}function WP(o,u){var f=ya(o);return Dh(f,Zs(u,0,f.length))}function Ku(o,u,f,m){if(!Vt(o))return o;u=es(u,o);for(var w=-1,b=u.length,k=b-1,L=o;L!=null&&++w<b;){var B=jr(u[w]),ee=f;if(B==="__proto__"||B==="constructor"||B==="prototype")return o;if(w!=k){var te=L[B];ee=m?m(te,B,L):t,ee===t&&(ee=Vt(te)?te:di(u[w+1])?[]:{})}Bu(L,B,ee),L=L[B]}return o}var Uy=gh?function(o,u){return gh.set(o,u),o}:Hn,HP=fh?function(o,u){return fh(o,"toString",{configurable:!0,enumerable:!1,value:$p(u),writable:!0})}:Hn;function GP(o){return Dh(ya(o))}function gr(o,u,f){var m=-1,w=o.length;u<0&&(u=-u>w?0:w+u),f=f>w?w:f,f<0&&(f+=w),w=u>f?0:f-u>>>0,u>>>=0;for(var b=G(w);++m<w;)b[m]=o[m+u];return b}function QP(o,u){var f;return Xi(o,function(m,w,b){return f=u(m,w,b),!f}),!!f}function Ih(o,u,f){var m=0,w=o==null?m:o.length;if(typeof u=="number"&&u===u&&w<=Rt){for(;m<w;){var b=m+w>>>1,k=o[b];k!==null&&!Zn(k)&&(f?k<=u:k<u)?m=b+1:w=b}return w}return gp(o,u,Hn,f)}function gp(o,u,f,m){var w=0,b=o==null?0:o.length;if(b===0)return 0;u=f(u);for(var k=u!==u,L=u===null,B=Zn(u),ee=u===t;w<b;){var te=ph((w+b)/2),se=f(o[te]),me=se!==t,Ae=se===null,Ve=se===se,Je=Zn(se);if(k)var Ne=m||Ve;else ee?Ne=Ve&&(m||me):L?Ne=Ve&&me&&(m||!Ae):B?Ne=Ve&&me&&!Ae&&(m||!Je):Ae||Je?Ne=!1:Ne=m?se<=u:se<u;Ne?w=te+1:b=te}return En(b,St)}function By(o,u){for(var f=-1,m=o.length,w=0,b=[];++f<m;){var k=o[f],L=u?u(k):k;if(!f||!Rr(L,B)){var B=L;b[w++]=k===0?0:k}}return b}function $y(o){return typeof o=="number"?o:Zn(o)?vn:+o}function Xn(o){if(typeof o=="string")return o;if(je(o))return pt(o,Xn)+"";if(Zn(o))return vy?vy.call(o):"";var u=o+"";return u=="0"&&1/o==-Ce?"-0":u}function Zi(o,u,f){var m=-1,w=Qi,b=o.length,k=!0,L=[],B=L;if(f)k=!1,w=ra;else if(b>=i){var ee=u?null:oC(o);if(ee)return rh(ee);k=!1,w=Ft,B=new Xs}else B=u?[]:L;e:for(;++m<b;){var te=o[m],se=u?u(te):te;if(te=f||te!==0?te:0,k&&se===se){for(var me=B.length;me--;)if(B[me]===se)continue e;u&&B.push(se),L.push(te)}else w(B,se,f)||(B!==L&&B.push(se),L.push(te))}return L}function mp(o,u){return u=es(u,o),o=gv(o,u),o==null||delete o[jr(mr(u))]}function qy(o,u,f,m){return Ku(o,u,f(eo(o,u)),m)}function Th(o,u,f,m){for(var w=o.length,b=m?w:-1;(m?b--:++b<w)&&u(o[b],b,o););return f?gr(o,m?0:b,m?b+1:w):gr(o,m?b+1:0,m?w:b)}function zy(o,u){var f=o;return f instanceof nt&&(f=f.value()),ia(u,function(m,w){return w.func.apply(w.thisArg,br([m],w.args))},f)}function _p(o,u,f){var m=o.length;if(m<2)return m?Zi(o[0]):[];for(var w=-1,b=G(m);++w<m;)for(var k=o[w],L=-1;++L<m;)L!=w&&(b[w]=$u(b[w]||k,o[L],u,f));return Zi(gn(b,1),u,f)}function Ky(o,u,f){for(var m=-1,w=o.length,b=u.length,k={};++m<w;){var L=m<b?u[m]:t;f(k,o[m],L)}return k}function yp(o){return qt(o)?o:[]}function vp(o){return typeof o=="function"?o:Hn}function es(o,u){return je(o)?o:Pp(o,u)?[o]:vv(ht(o))}var JP=Ye;function ts(o,u,f){var m=o.length;return f=f===t?m:f,!u&&f>=m?o:gr(o,u,f)}var jy=MR||function(o){return Qt.clearTimeout(o)};function Wy(o,u){if(u)return o.slice();var f=o.length,m=dy?dy(f):new o.constructor(f);return o.copy(m),m}function wp(o){var u=new o.constructor(o.byteLength);return new ch(u).set(new ch(o)),u}function YP(o,u){var f=u?wp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function XP(o){var u=new o.constructor(o.source,Ko.exec(o));return u.lastIndex=o.lastIndex,u}function ZP(o){return Uu?Et(Uu.call(o)):{}}function Hy(o,u){var f=u?wp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function Gy(o,u){if(o!==u){var f=o!==t,m=o===null,w=o===o,b=Zn(o),k=u!==t,L=u===null,B=u===u,ee=Zn(u);if(!L&&!ee&&!b&&o>u||b&&k&&B&&!L&&!ee||m&&k&&B||!f&&B||!w)return 1;if(!m&&!b&&!ee&&o<u||ee&&f&&w&&!m&&!b||L&&f&&w||!k&&w||!B)return-1}return 0}function eC(o,u,f){for(var m=-1,w=o.criteria,b=u.criteria,k=w.length,L=f.length;++m<k;){var B=Gy(w[m],b[m]);if(B){if(m>=L)return B;var ee=f[m];return B*(ee=="desc"?-1:1)}}return o.index-u.index}function Qy(o,u,f,m){for(var w=-1,b=o.length,k=f.length,L=-1,B=u.length,ee=nn(b-k,0),te=G(B+ee),se=!m;++L<B;)te[L]=u[L];for(;++w<k;)(se||w<b)&&(te[f[w]]=o[w]);for(;ee--;)te[L++]=o[w++];return te}function Jy(o,u,f,m){for(var w=-1,b=o.length,k=-1,L=f.length,B=-1,ee=u.length,te=nn(b-L,0),se=G(te+ee),me=!m;++w<te;)se[w]=o[w];for(var Ae=w;++B<ee;)se[Ae+B]=u[B];for(;++k<L;)(me||w<b)&&(se[Ae+f[k]]=o[w++]);return se}function Kn(o,u){var f=-1,m=o.length;for(u||(u=G(m));++f<m;)u[f]=o[f];return u}function Kr(o,u,f,m){var w=!f;f||(f={});for(var b=-1,k=u.length;++b<k;){var L=u[b],B=m?m(f[L],o[L],L,f,o):t;B===t&&(B=o[L]),w?li(f,L,B):Bu(f,L,B)}return f}function tC(o,u){return Kr(o,Rp(o),u)}function nC(o,u){return Kr(o,cv(o),u)}function bh(o,u){return function(f,m){var w=je(f)?Yl:bP,b=u?u():{};return w(f,o,Oe(m,2),b)}}function pa(o){return Ye(function(u,f){var m=-1,w=f.length,b=w>1?f[w-1]:t,k=w>2?f[2]:t;for(b=o.length>3&&typeof b=="function"?(w--,b):t,k&&Vn(f[0],f[1],k)&&(b=w<3?t:b,w=1),u=Et(u);++m<w;){var L=f[m];L&&o(u,L,m,b)}return u})}function Yy(o,u){return function(f,m){if(f==null)return f;if(!jn(f))return o(f,m);for(var w=f.length,b=u?w:-1,k=Et(f);(u?b--:++b<w)&&m(k[b],b,k)!==!1;);return f}}function Xy(o){return function(u,f,m){for(var w=-1,b=Et(u),k=m(u),L=k.length;L--;){var B=k[o?L:++w];if(f(b[B],B,b)===!1)break}return u}}function rC(o,u,f){var m=u&F,w=ju(o);function b(){var k=this&&this!==Qt&&this instanceof b?w:o;return k.apply(m?f:this,arguments)}return b}function Zy(o){return function(u){u=ht(u);var f=aa(u)?Ar(u):t,m=f?f[0]:u.charAt(0),w=f?ts(f,1).join(""):u.slice(1);return m[o]()+w}}function ga(o){return function(u){return ia(Yv(Jv(u).replace(Wd,"")),o,"")}}function ju(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var f=da(o.prototype),m=o.apply(f,u);return Vt(m)?m:f}}function iC(o,u,f){var m=ju(o);function w(){for(var b=arguments.length,k=G(b),L=b,B=ma(w);L--;)k[L]=arguments[L];var ee=b<3&&k[0]!==B&&k[b-1]!==B?[]:Ji(k,B);if(b-=ee.length,b<f)return iv(o,u,Ah,w.placeholder,t,k,ee,t,t,f-b);var te=this&&this!==Qt&&this instanceof w?m:o;return kn(te,this,k)}return w}function ev(o){return function(u,f,m){var w=Et(u);if(!jn(u)){var b=Oe(f,3);u=cn(u),f=function(L){return b(w[L],L,w)}}var k=o(u,f,m);return k>-1?w[b?u[k]:k]:t}}function tv(o){return fi(function(u){var f=u.length,m=f,w=dr.prototype.thru;for(o&&u.reverse();m--;){var b=u[m];if(typeof b!="function")throw new fr(a);if(w&&!k&&Ch(b)=="wrapper")var k=new dr([],!0)}for(m=k?m:f;++m<f;){b=u[m];var L=Ch(b),B=L=="wrapper"?Ap(b):t;B&&Cp(B[0])&&B[1]==(P|q|Y|S)&&!B[4].length&&B[9]==1?k=k[Ch(B[0])].apply(k,B[3]):k=b.length==1&&Cp(b)?k[L]():k.thru(b)}return function(){var ee=arguments,te=ee[0];if(k&&ee.length==1&&je(te))return k.plant(te).value();for(var se=0,me=f?u[se].apply(this,ee):te;++se<f;)me=u[se].call(this,me);return me}})}function Ah(o,u,f,m,w,b,k,L,B,ee){var te=u&P,se=u&F,me=u&Q,Ae=u&(q|W),Ve=u&A,Je=me?t:ju(o);function Ne(){for(var et=arguments.length,it=G(et),er=et;er--;)it[er]=arguments[er];if(Ae)var Nn=ma(Ne),tr=oa(it,Nn);if(m&&(it=Qy(it,m,w,Ae)),b&&(it=Jy(it,b,k,Ae)),et-=tr,Ae&&et<ee){var zt=Ji(it,Nn);return iv(o,u,Ah,Ne.placeholder,f,it,zt,L,B,ee-et)}var Pr=se?f:this,mi=me?Pr[o]:o;return et=it.length,L?it=bC(it,L):Ve&&et>1&&it.reverse(),te&&B<et&&(it.length=B),this&&this!==Qt&&this instanceof Ne&&(mi=Je||ju(mi)),mi.apply(Pr,it)}return Ne}function nv(o,u){return function(f,m){return kP(f,o,u(m),{})}}function Sh(o,u){return function(f,m){var w;if(f===t&&m===t)return u;if(f!==t&&(w=f),m!==t){if(w===t)return m;typeof f=="string"||typeof m=="string"?(f=Xn(f),m=Xn(m)):(f=$y(f),m=$y(m)),w=o(f,m)}return w}}function Ep(o){return fi(function(u){return u=pt(u,Fe(Oe())),Ye(function(f){var m=this;return o(u,function(w){return kn(w,m,f)})})})}function Rh(o,u){u=u===t?" ":Xn(u);var f=u.length;if(f<2)return f?pp(u,o):u;var m=pp(u,dh(o/ua(u)));return aa(u)?ts(Ar(m),0,o).join(""):m.slice(0,o)}function sC(o,u,f,m){var w=u&F,b=ju(o);function k(){for(var L=-1,B=arguments.length,ee=-1,te=m.length,se=G(te+B),me=this&&this!==Qt&&this instanceof k?b:o;++ee<te;)se[ee]=m[ee];for(;B--;)se[ee++]=arguments[++L];return kn(me,w?f:this,se)}return k}function rv(o){return function(u,f,m){return m&&typeof m!="number"&&Vn(u,f,m)&&(f=m=t),u=gi(u),f===t?(f=u,u=0):f=gi(f),m=m===t?u<f?1:-1:gi(m),KP(u,f,m,o)}}function Ph(o){return function(u,f){return typeof u=="string"&&typeof f=="string"||(u=_r(u),f=_r(f)),o(u,f)}}function iv(o,u,f,m,w,b,k,L,B,ee){var te=u&q,se=te?k:t,me=te?t:k,Ae=te?b:t,Ve=te?t:b;u|=te?Y:re,u&=~(te?re:Y),u&z||(u&=~(F|Q));var Je=[o,u,w,Ae,se,Ve,me,L,B,ee],Ne=f.apply(t,Je);return Cp(o)&&mv(Ne,Je),Ne.placeholder=m,_v(Ne,o,u)}function Ip(o){var u=tn[o];return function(f,m){if(f=_r(f),m=m==null?0:En(He(m),292),m&&_y(f)){var w=(ht(f)+"e").split("e"),b=u(w[0]+"e"+(+w[1]+m));return w=(ht(b)+"e").split("e"),+(w[0]+"e"+(+w[1]-m))}return u(f)}}var oC=ha&&1/rh(new ha([,-0]))[1]==Ce?function(o){return new ha(o)}:Kp;function sv(o){return function(u){var f=In(u);return f==D?Xd(u):f==ce?TR(u):gt(u,o(u))}}function hi(o,u,f,m,w,b,k,L){var B=u&Q;if(!B&&typeof o!="function")throw new fr(a);var ee=m?m.length:0;if(ee||(u&=~(Y|re),m=w=t),k=k===t?k:nn(He(k),0),L=L===t?L:He(L),ee-=w?w.length:0,u&re){var te=m,se=w;m=w=t}var me=B?t:Ap(o),Ae=[o,u,f,m,w,te,se,b,k,L];if(me&&EC(Ae,me),o=Ae[0],u=Ae[1],f=Ae[2],m=Ae[3],w=Ae[4],L=Ae[9]=Ae[9]===t?B?0:o.length:nn(Ae[9]-ee,0),!L&&u&(q|W)&&(u&=~(q|W)),!u||u==F)var Ve=rC(o,u,f);else u==q||u==W?Ve=iC(o,u,L):(u==Y||u==(F|Y))&&!w.length?Ve=sC(o,u,f,m):Ve=Ah.apply(t,Ae);var Je=me?Uy:mv;return _v(Je(Ve,Ae),o,u)}function ov(o,u,f,m){return o===t||Rr(o,la[f])&&!mt.call(m,f)?u:o}function av(o,u,f,m,w,b){return Vt(o)&&Vt(u)&&(b.set(u,o),Eh(o,u,t,av,b),b.delete(u)),o}function aC(o){return Gu(o)?t:o}function uv(o,u,f,m,w,b){var k=f&O,L=o.length,B=u.length;if(L!=B&&!(k&&B>L))return!1;var ee=b.get(o),te=b.get(u);if(ee&&te)return ee==u&&te==o;var se=-1,me=!0,Ae=f&M?new Xs:t;for(b.set(o,u),b.set(u,o);++se<L;){var Ve=o[se],Je=u[se];if(m)var Ne=k?m(Je,Ve,se,u,o,b):m(Ve,Je,se,o,u,b);if(Ne!==t){if(Ne)continue;me=!1;break}if(Ae){if(!sa(u,function(et,it){if(!Ft(Ae,it)&&(Ve===et||w(Ve,et,f,m,b)))return Ae.push(it)})){me=!1;break}}else if(!(Ve===Je||w(Ve,Je,f,m,b))){me=!1;break}}return b.delete(o),b.delete(u),me}function uC(o,u,f,m,w,b,k){switch(f){case Me:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Re:return!(o.byteLength!=u.byteLength||!b(new ch(o),new ch(u)));case _e:case de:case j:return Rr(+o,+u);case Qe:return o.name==u.name&&o.message==u.message;case le:case ae:return o==u+"";case D:var L=Xd;case ce:var B=m&O;if(L||(L=rh),o.size!=u.size&&!B)return!1;var ee=k.get(o);if(ee)return ee==u;m|=M,k.set(o,u);var te=uv(L(o),L(u),m,w,b,k);return k.delete(o),te;case Pe:if(Uu)return Uu.call(o)==Uu.call(u)}return!1}function cC(o,u,f,m,w,b){var k=f&O,L=Tp(o),B=L.length,ee=Tp(u),te=ee.length;if(B!=te&&!k)return!1;for(var se=B;se--;){var me=L[se];if(!(k?me in u:mt.call(u,me)))return!1}var Ae=b.get(o),Ve=b.get(u);if(Ae&&Ve)return Ae==u&&Ve==o;var Je=!0;b.set(o,u),b.set(u,o);for(var Ne=k;++se<B;){me=L[se];var et=o[me],it=u[me];if(m)var er=k?m(it,et,me,u,o,b):m(et,it,me,o,u,b);if(!(er===t?et===it||w(et,it,f,m,b):er)){Je=!1;break}Ne||(Ne=me=="constructor")}if(Je&&!Ne){var Nn=o.constructor,tr=u.constructor;Nn!=tr&&"constructor"in o&&"constructor"in u&&!(typeof Nn=="function"&&Nn instanceof Nn&&typeof tr=="function"&&tr instanceof tr)&&(Je=!1)}return b.delete(o),b.delete(u),Je}function fi(o){return Dp(pv(o,t,Tv),o+"")}function Tp(o){return Py(o,cn,Rp)}function bp(o){return Py(o,Wn,cv)}var Ap=gh?function(o){return gh.get(o)}:Kp;function Ch(o){for(var u=o.name+"",f=fa[u],m=mt.call(fa,u)?f.length:0;m--;){var w=f[m],b=w.func;if(b==null||b==o)return w.name}return u}function ma(o){var u=mt.call(E,"placeholder")?E:o;return u.placeholder}function Oe(){var o=E.iteratee||qp;return o=o===qp?Dy:o,arguments.length?o(arguments[0],arguments[1]):o}function xh(o,u){var f=o.__data__;return _C(u)?f[typeof u=="string"?"string":"hash"]:f.map}function Sp(o){for(var u=cn(o),f=u.length;f--;){var m=u[f],w=o[m];u[f]=[m,w,fv(w)]}return u}function to(o,u){var f=wR(o,u);return xy(f)?f:t}function lC(o){var u=mt.call(o,Js),f=o[Js];try{o[Js]=t;var m=!0}catch{}var w=ah.call(o);return m&&(u?o[Js]=f:delete o[Js]),w}var Rp=ep?function(o){return o==null?[]:(o=Et(o),hr(ep(o),function(u){return gy.call(o,u)}))}:jp,cv=ep?function(o){for(var u=[];o;)br(u,Rp(o)),o=lh(o);return u}:jp,In=On;(tp&&In(new tp(new ArrayBuffer(1)))!=Me||Lu&&In(new Lu)!=D||np&&In(np.resolve())!=ue||ha&&In(new ha)!=ce||Mu&&In(new Mu)!=Ie)&&(In=function(o){var u=On(o),f=u==J?o.constructor:t,m=f?no(f):"";if(m)switch(m){case WR:return Me;case HR:return D;case GR:return ue;case QR:return ce;case JR:return Ie}return u});function hC(o,u,f){for(var m=-1,w=f.length;++m<w;){var b=f[m],k=b.size;switch(b.type){case"drop":o+=k;break;case"dropRight":u-=k;break;case"take":u=En(u,o+k);break;case"takeRight":o=nn(o,u-k);break}}return{start:o,end:u}}function fC(o){var u=o.match(Bd);return u?u[1].split($i):[]}function lv(o,u,f){u=es(u,o);for(var m=-1,w=u.length,b=!1;++m<w;){var k=jr(u[m]);if(!(b=o!=null&&f(o,k)))break;o=o[k]}return b||++m!=w?b:(w=o==null?0:o.length,!!w&&Mh(w)&&di(k,w)&&(je(o)||ro(o)))}function dC(o){var u=o.length,f=new o.constructor(u);return u&&typeof o[0]=="string"&&mt.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function hv(o){return typeof o.constructor=="function"&&!Wu(o)?da(lh(o)):{}}function pC(o,u,f){var m=o.constructor;switch(u){case Re:return wp(o);case _e:case de:return new m(+o);case Me:return YP(o,f);case Ze:case Gt:case kt:case pn:case Ot:case ar:case ti:case $t:case wn:return Hy(o,f);case D:return new m;case j:case ae:return new m(o);case le:return XP(o);case ce:return new m;case Pe:return ZP(o)}}function gC(o,u){var f=u.length;if(!f)return o;var m=f-1;return u[m]=(f>1?"& ":"")+u[m],u=u.join(f>2?", ":" "),o.replace(Ud,`{
/* [wrapped with `+u+`] */
`)}function mC(o){return je(o)||ro(o)||!!(my&&o&&o[my])}function di(o,u){var f=typeof o;return u=u==null?$e:u,!!u&&(f=="number"||f!="symbol"&&Eu.test(o))&&o>-1&&o%1==0&&o<u}function Vn(o,u,f){if(!Vt(f))return!1;var m=typeof u;return(m=="number"?jn(f)&&di(u,f.length):m=="string"&&u in f)?Rr(f[u],o):!1}function Pp(o,u){if(je(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||Zn(o)?!0:$s.test(o)||!Cl.test(o)||u!=null&&o in Et(u)}function _C(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Cp(o){var u=Ch(o),f=E[u];if(typeof f!="function"||!(u in nt.prototype))return!1;if(o===f)return!0;var m=Ap(f);return!!m&&o===m[0]}function yC(o){return!!fy&&fy in o}var vC=sh?pi:Wp;function Wu(o){var u=o&&o.constructor,f=typeof u=="function"&&u.prototype||la;return o===f}function fv(o){return o===o&&!Vt(o)}function dv(o,u){return function(f){return f==null?!1:f[o]===u&&(u!==t||o in Et(f))}}function wC(o){var u=Nh(o,function(m){return f.size===d&&f.clear(),m}),f=u.cache;return u}function EC(o,u){var f=o[1],m=u[1],w=f|m,b=w<(F|Q|P),k=m==P&&f==q||m==P&&f==S&&o[7].length<=u[8]||m==(P|S)&&u[7].length<=u[8]&&f==q;if(!(b||k))return o;m&F&&(o[2]=u[2],w|=f&F?0:z);var L=u[3];if(L){var B=o[3];o[3]=B?Qy(B,L,u[4]):L,o[4]=B?Ji(o[3],p):u[4]}return L=u[5],L&&(B=o[5],o[5]=B?Jy(B,L,u[6]):L,o[6]=B?Ji(o[5],p):u[6]),L=u[7],L&&(o[7]=L),m&P&&(o[8]=o[8]==null?u[8]:En(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=w,o}function IC(o){var u=[];if(o!=null)for(var f in Et(o))u.push(f);return u}function TC(o){return ah.call(o)}function pv(o,u,f){return u=nn(u===t?o.length-1:u,0),function(){for(var m=arguments,w=-1,b=nn(m.length-u,0),k=G(b);++w<b;)k[w]=m[u+w];w=-1;for(var L=G(u+1);++w<u;)L[w]=m[w];return L[u]=f(k),kn(o,this,L)}}function gv(o,u){return u.length<2?o:eo(o,gr(u,0,-1))}function bC(o,u){for(var f=o.length,m=En(u.length,f),w=Kn(o);m--;){var b=u[m];o[m]=di(b,f)?w[b]:t}return o}function xp(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var mv=yv(Uy),Hu=UR||function(o,u){return Qt.setTimeout(o,u)},Dp=yv(HP);function _v(o,u,f){var m=u+"";return Dp(o,gC(m,AC(fC(m),f)))}function yv(o){var u=0,f=0;return function(){var m=zR(),w=C-(m-f);if(f=m,w>0){if(++u>=V)return arguments[0]}else u=0;return o.apply(t,arguments)}}function Dh(o,u){var f=-1,m=o.length,w=m-1;for(u=u===t?m:u;++f<u;){var b=dp(f,w),k=o[b];o[b]=o[f],o[f]=k}return o.length=u,o}var vv=wC(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(xl,function(f,m,w,b){u.push(w?b.replace(zo,"$1"):m||f)}),u});function jr(o){if(typeof o=="string"||Zn(o))return o;var u=o+"";return u=="0"&&1/o==-Ce?"-0":u}function no(o){if(o!=null){try{return oh.call(o)}catch{}try{return o+""}catch{}}return""}function AC(o,u){return an(Lr,function(f){var m="_."+f[0];u&f[1]&&!Qi(o,m)&&o.push(m)}),o.sort()}function wv(o){if(o instanceof nt)return o.clone();var u=new dr(o.__wrapped__,o.__chain__);return u.__actions__=Kn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function SC(o,u,f){(f?Vn(o,u,f):u===t)?u=1:u=nn(He(u),0);var m=o==null?0:o.length;if(!m||u<1)return[];for(var w=0,b=0,k=G(dh(m/u));w<m;)k[b++]=gr(o,w,w+=u);return k}function RC(o){for(var u=-1,f=o==null?0:o.length,m=0,w=[];++u<f;){var b=o[u];b&&(w[m++]=b)}return w}function PC(){var o=arguments.length;if(!o)return[];for(var u=G(o-1),f=arguments[0],m=o;m--;)u[m-1]=arguments[m];return br(je(f)?Kn(f):[f],gn(u,1))}var CC=Ye(function(o,u){return qt(o)?$u(o,gn(u,1,qt,!0)):[]}),xC=Ye(function(o,u){var f=mr(u);return qt(f)&&(f=t),qt(o)?$u(o,gn(u,1,qt,!0),Oe(f,2)):[]}),DC=Ye(function(o,u){var f=mr(u);return qt(f)&&(f=t),qt(o)?$u(o,gn(u,1,qt,!0),t,f):[]});function kC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:He(u),gr(o,u<0?0:u,m)):[]}function OC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:He(u),u=m-u,gr(o,0,u<0?0:u)):[]}function VC(o,u){return o&&o.length?Th(o,Oe(u,3),!0,!0):[]}function NC(o,u){return o&&o.length?Th(o,Oe(u,3),!0):[]}function LC(o,u,f,m){var w=o==null?0:o.length;return w?(f&&typeof f!="number"&&Vn(o,u,f)&&(f=0,m=w),PP(o,u,f,m)):[]}function Ev(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:He(f);return w<0&&(w=nn(m+w,0)),un(o,Oe(u,3),w)}function Iv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m-1;return f!==t&&(w=He(f),w=f<0?nn(m+w,0):En(w,m-1)),un(o,Oe(u,3),w,!0)}function Tv(o){var u=o==null?0:o.length;return u?gn(o,1):[]}function MC(o){var u=o==null?0:o.length;return u?gn(o,Ce):[]}function FC(o,u){var f=o==null?0:o.length;return f?(u=u===t?1:He(u),gn(o,u)):[]}function UC(o){for(var u=-1,f=o==null?0:o.length,m={};++u<f;){var w=o[u];m[w[0]]=w[1]}return m}function bv(o){return o&&o.length?o[0]:t}function BC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:He(f);return w<0&&(w=nn(m+w,0)),si(o,u,w)}function $C(o){var u=o==null?0:o.length;return u?gr(o,0,-1):[]}var qC=Ye(function(o){var u=pt(o,yp);return u.length&&u[0]===o[0]?up(u):[]}),zC=Ye(function(o){var u=mr(o),f=pt(o,yp);return u===mr(f)?u=t:f.pop(),f.length&&f[0]===o[0]?up(f,Oe(u,2)):[]}),KC=Ye(function(o){var u=mr(o),f=pt(o,yp);return u=typeof u=="function"?u:t,u&&f.pop(),f.length&&f[0]===o[0]?up(f,t,u):[]});function jC(o,u){return o==null?"":$R.call(o,u)}function mr(o){var u=o==null?0:o.length;return u?o[u-1]:t}function WC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m;return f!==t&&(w=He(f),w=w<0?nn(m+w,0):En(w,m-1)),u===u?AR(o,u,w):un(o,oi,w,!0)}function HC(o,u){return o&&o.length?Ny(o,He(u)):t}var GC=Ye(Av);function Av(o,u){return o&&o.length&&u&&u.length?fp(o,u):o}function QC(o,u,f){return o&&o.length&&u&&u.length?fp(o,u,Oe(f,2)):o}function JC(o,u,f){return o&&o.length&&u&&u.length?fp(o,u,t,f):o}var YC=fi(function(o,u){var f=o==null?0:o.length,m=ip(o,u);return Fy(o,pt(u,function(w){return di(w,f)?+w:w}).sort(Gy)),m});function XC(o,u){var f=[];if(!(o&&o.length))return f;var m=-1,w=[],b=o.length;for(u=Oe(u,3);++m<b;){var k=o[m];u(k,m,o)&&(f.push(k),w.push(m))}return Fy(o,w),f}function kp(o){return o==null?o:jR.call(o)}function ZC(o,u,f){var m=o==null?0:o.length;return m?(f&&typeof f!="number"&&Vn(o,u,f)?(u=0,f=m):(u=u==null?0:He(u),f=f===t?m:He(f)),gr(o,u,f)):[]}function e1(o,u){return Ih(o,u)}function t1(o,u,f){return gp(o,u,Oe(f,2))}function n1(o,u){var f=o==null?0:o.length;if(f){var m=Ih(o,u);if(m<f&&Rr(o[m],u))return m}return-1}function r1(o,u){return Ih(o,u,!0)}function i1(o,u,f){return gp(o,u,Oe(f,2),!0)}function s1(o,u){var f=o==null?0:o.length;if(f){var m=Ih(o,u,!0)-1;if(Rr(o[m],u))return m}return-1}function o1(o){return o&&o.length?By(o):[]}function a1(o,u){return o&&o.length?By(o,Oe(u,2)):[]}function u1(o){var u=o==null?0:o.length;return u?gr(o,1,u):[]}function c1(o,u,f){return o&&o.length?(u=f||u===t?1:He(u),gr(o,0,u<0?0:u)):[]}function l1(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:He(u),u=m-u,gr(o,u<0?0:u,m)):[]}function h1(o,u){return o&&o.length?Th(o,Oe(u,3),!1,!0):[]}function f1(o,u){return o&&o.length?Th(o,Oe(u,3)):[]}var d1=Ye(function(o){return Zi(gn(o,1,qt,!0))}),p1=Ye(function(o){var u=mr(o);return qt(u)&&(u=t),Zi(gn(o,1,qt,!0),Oe(u,2))}),g1=Ye(function(o){var u=mr(o);return u=typeof u=="function"?u:t,Zi(gn(o,1,qt,!0),t,u)});function m1(o){return o&&o.length?Zi(o):[]}function _1(o,u){return o&&o.length?Zi(o,Oe(u,2)):[]}function y1(o,u){return u=typeof u=="function"?u:t,o&&o.length?Zi(o,t,u):[]}function Op(o){if(!(o&&o.length))return[];var u=0;return o=hr(o,function(f){if(qt(f))return u=nn(f.length,u),!0}),he(u,function(f){return pt(o,g(f))})}function Sv(o,u){if(!(o&&o.length))return[];var f=Op(o);return u==null?f:pt(f,function(m){return kn(u,t,m)})}var v1=Ye(function(o,u){return qt(o)?$u(o,u):[]}),w1=Ye(function(o){return _p(hr(o,qt))}),E1=Ye(function(o){var u=mr(o);return qt(u)&&(u=t),_p(hr(o,qt),Oe(u,2))}),I1=Ye(function(o){var u=mr(o);return u=typeof u=="function"?u:t,_p(hr(o,qt),t,u)}),T1=Ye(Op);function b1(o,u){return Ky(o||[],u||[],Bu)}function A1(o,u){return Ky(o||[],u||[],Ku)}var S1=Ye(function(o){var u=o.length,f=u>1?o[u-1]:t;return f=typeof f=="function"?(o.pop(),f):t,Sv(o,f)});function Rv(o){var u=E(o);return u.__chain__=!0,u}function R1(o,u){return u(o),o}function kh(o,u){return u(o)}var P1=fi(function(o){var u=o.length,f=u?o[0]:0,m=this.__wrapped__,w=function(b){return ip(b,o)};return u>1||this.__actions__.length||!(m instanceof nt)||!di(f)?this.thru(w):(m=m.slice(f,+f+(u?1:0)),m.__actions__.push({func:kh,args:[w],thisArg:t}),new dr(m,this.__chain__).thru(function(b){return u&&!b.length&&b.push(t),b}))});function C1(){return Rv(this)}function x1(){return new dr(this.value(),this.__chain__)}function D1(){this.__values__===t&&(this.__values__=$v(this.value()));var o=this.__index__>=this.__values__.length,u=o?t:this.__values__[this.__index__++];return{done:o,value:u}}function k1(){return this}function O1(o){for(var u,f=this;f instanceof _h;){var m=wv(f);m.__index__=0,m.__values__=t,u?w.__wrapped__=m:u=m;var w=m;f=f.__wrapped__}return w.__wrapped__=o,u}function V1(){var o=this.__wrapped__;if(o instanceof nt){var u=o;return this.__actions__.length&&(u=new nt(this)),u=u.reverse(),u.__actions__.push({func:kh,args:[kp],thisArg:t}),new dr(u,this.__chain__)}return this.thru(kp)}function N1(){return zy(this.__wrapped__,this.__actions__)}var L1=bh(function(o,u,f){mt.call(o,f)?++o[f]:li(o,f,1)});function M1(o,u,f){var m=je(o)?Ou:RP;return f&&Vn(o,u,f)&&(u=t),m(o,Oe(u,3))}function F1(o,u){var f=je(o)?hr:Sy;return f(o,Oe(u,3))}var U1=ev(Ev),B1=ev(Iv);function $1(o,u){return gn(Oh(o,u),1)}function q1(o,u){return gn(Oh(o,u),Ce)}function z1(o,u,f){return f=f===t?1:He(f),gn(Oh(o,u),f)}function Pv(o,u){var f=je(o)?an:Xi;return f(o,Oe(u,3))}function Cv(o,u){var f=je(o)?Xl:Ay;return f(o,Oe(u,3))}var K1=bh(function(o,u,f){mt.call(o,f)?o[f].push(u):li(o,f,[u])});function j1(o,u,f,m){o=jn(o)?o:ya(o),f=f&&!m?He(f):0;var w=o.length;return f<0&&(f=nn(w+f,0)),Fh(o)?f<=w&&o.indexOf(u,f)>-1:!!w&&si(o,u,f)>-1}var W1=Ye(function(o,u,f){var m=-1,w=typeof u=="function",b=jn(o)?G(o.length):[];return Xi(o,function(k){b[++m]=w?kn(u,k,f):qu(k,u,f)}),b}),H1=bh(function(o,u,f){li(o,f,u)});function Oh(o,u){var f=je(o)?pt:ky;return f(o,Oe(u,3))}function G1(o,u,f,m){return o==null?[]:(je(u)||(u=u==null?[]:[u]),f=m?t:f,je(f)||(f=f==null?[]:[f]),Ly(o,u,f))}var Q1=bh(function(o,u,f){o[f?0:1].push(u)},function(){return[[],[]]});function J1(o,u,f){var m=je(o)?ia:T,w=arguments.length<3;return m(o,Oe(u,4),f,w,Xi)}function Y1(o,u,f){var m=je(o)?ii:T,w=arguments.length<3;return m(o,Oe(u,4),f,w,Ay)}function X1(o,u){var f=je(o)?hr:Sy;return f(o,Lh(Oe(u,3)))}function Z1(o){var u=je(o)?Ey:jP;return u(o)}function ex(o,u,f){(f?Vn(o,u,f):u===t)?u=1:u=He(u);var m=je(o)?IP:WP;return m(o,u)}function tx(o){var u=je(o)?TP:GP;return u(o)}function nx(o){if(o==null)return 0;if(jn(o))return Fh(o)?ua(o):o.length;var u=In(o);return u==D||u==ce?o.size:lp(o).length}function rx(o,u,f){var m=je(o)?sa:QP;return f&&Vn(o,u,f)&&(u=t),m(o,Oe(u,3))}var ix=Ye(function(o,u){if(o==null)return[];var f=u.length;return f>1&&Vn(o,u[0],u[1])?u=[]:f>2&&Vn(u[0],u[1],u[2])&&(u=[u[0]]),Ly(o,gn(u,1),[])}),Vh=FR||function(){return Qt.Date.now()};function sx(o,u){if(typeof u!="function")throw new fr(a);return o=He(o),function(){if(--o<1)return u.apply(this,arguments)}}function xv(o,u,f){return u=f?t:u,u=o&&u==null?o.length:u,hi(o,P,t,t,t,t,u)}function Dv(o,u){var f;if(typeof u!="function")throw new fr(a);return o=He(o),function(){return--o>0&&(f=u.apply(this,arguments)),o<=1&&(u=t),f}}var Vp=Ye(function(o,u,f){var m=F;if(f.length){var w=Ji(f,ma(Vp));m|=Y}return hi(o,m,u,f,w)}),kv=Ye(function(o,u,f){var m=F|Q;if(f.length){var w=Ji(f,ma(kv));m|=Y}return hi(u,m,o,f,w)});function Ov(o,u,f){u=f?t:u;var m=hi(o,q,t,t,t,t,t,u);return m.placeholder=Ov.placeholder,m}function Vv(o,u,f){u=f?t:u;var m=hi(o,W,t,t,t,t,t,u);return m.placeholder=Vv.placeholder,m}function Nv(o,u,f){var m,w,b,k,L,B,ee=0,te=!1,se=!1,me=!0;if(typeof o!="function")throw new fr(a);u=_r(u)||0,Vt(f)&&(te=!!f.leading,se="maxWait"in f,b=se?nn(_r(f.maxWait)||0,u):b,me="trailing"in f?!!f.trailing:me);function Ae(zt){var Pr=m,mi=w;return m=w=t,ee=zt,k=o.apply(mi,Pr),k}function Ve(zt){return ee=zt,L=Hu(et,u),te?Ae(zt):k}function Je(zt){var Pr=zt-B,mi=zt-ee,ew=u-Pr;return se?En(ew,b-mi):ew}function Ne(zt){var Pr=zt-B,mi=zt-ee;return B===t||Pr>=u||Pr<0||se&&mi>=b}function et(){var zt=Vh();if(Ne(zt))return it(zt);L=Hu(et,Je(zt))}function it(zt){return L=t,me&&m?Ae(zt):(m=w=t,k)}function er(){L!==t&&jy(L),ee=0,m=B=w=L=t}function Nn(){return L===t?k:it(Vh())}function tr(){var zt=Vh(),Pr=Ne(zt);if(m=arguments,w=this,B=zt,Pr){if(L===t)return Ve(B);if(se)return jy(L),L=Hu(et,u),Ae(B)}return L===t&&(L=Hu(et,u)),k}return tr.cancel=er,tr.flush=Nn,tr}var ox=Ye(function(o,u){return by(o,1,u)}),ax=Ye(function(o,u,f){return by(o,_r(u)||0,f)});function ux(o){return hi(o,A)}function Nh(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new fr(a);var f=function(){var m=arguments,w=u?u.apply(this,m):m[0],b=f.cache;if(b.has(w))return b.get(w);var k=o.apply(this,m);return f.cache=b.set(w,k)||b,k};return f.cache=new(Nh.Cache||ci),f}Nh.Cache=ci;function Lh(o){if(typeof o!="function")throw new fr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function cx(o){return Dv(2,o)}var lx=JP(function(o,u){u=u.length==1&&je(u[0])?pt(u[0],Fe(Oe())):pt(gn(u,1),Fe(Oe()));var f=u.length;return Ye(function(m){for(var w=-1,b=En(m.length,f);++w<b;)m[w]=u[w].call(this,m[w]);return kn(o,this,m)})}),Np=Ye(function(o,u){var f=Ji(u,ma(Np));return hi(o,Y,t,u,f)}),Lv=Ye(function(o,u){var f=Ji(u,ma(Lv));return hi(o,re,t,u,f)}),hx=fi(function(o,u){return hi(o,S,t,t,t,u)});function fx(o,u){if(typeof o!="function")throw new fr(a);return u=u===t?u:He(u),Ye(o,u)}function dx(o,u){if(typeof o!="function")throw new fr(a);return u=u==null?0:nn(He(u),0),Ye(function(f){var m=f[u],w=ts(f,0,u);return m&&br(w,m),kn(o,this,w)})}function px(o,u,f){var m=!0,w=!0;if(typeof o!="function")throw new fr(a);return Vt(f)&&(m="leading"in f?!!f.leading:m,w="trailing"in f?!!f.trailing:w),Nv(o,u,{leading:m,maxWait:u,trailing:w})}function gx(o){return xv(o,1)}function mx(o,u){return Np(vp(u),o)}function _x(){if(!arguments.length)return[];var o=arguments[0];return je(o)?o:[o]}function yx(o){return pr(o,I)}function vx(o,u){return u=typeof u=="function"?u:t,pr(o,I,u)}function wx(o){return pr(o,_|I)}function Ex(o,u){return u=typeof u=="function"?u:t,pr(o,_|I,u)}function Ix(o,u){return u==null||Ty(o,u,cn(u))}function Rr(o,u){return o===u||o!==o&&u!==u}var Tx=Ph(ap),bx=Ph(function(o,u){return o>=u}),ro=Cy(function(){return arguments}())?Cy:function(o){return Ut(o)&&mt.call(o,"callee")&&!gy.call(o,"callee")},je=G.isArray,Ax=Gi?Fe(Gi):OP;function jn(o){return o!=null&&Mh(o.length)&&!pi(o)}function qt(o){return Ut(o)&&jn(o)}function Sx(o){return o===!0||o===!1||Ut(o)&&On(o)==_e}var ns=BR||Wp,Rx=Du?Fe(Du):VP;function Px(o){return Ut(o)&&o.nodeType===1&&!Gu(o)}function Cx(o){if(o==null)return!0;if(jn(o)&&(je(o)||typeof o=="string"||typeof o.splice=="function"||ns(o)||_a(o)||ro(o)))return!o.length;var u=In(o);if(u==D||u==ce)return!o.size;if(Wu(o))return!lp(o).length;for(var f in o)if(mt.call(o,f))return!1;return!0}function xx(o,u){return zu(o,u)}function Dx(o,u,f){f=typeof f=="function"?f:t;var m=f?f(o,u):t;return m===t?zu(o,u,t,f):!!m}function Lp(o){if(!Ut(o))return!1;var u=On(o);return u==Qe||u==Ee||typeof o.message=="string"&&typeof o.name=="string"&&!Gu(o)}function kx(o){return typeof o=="number"&&_y(o)}function pi(o){if(!Vt(o))return!1;var u=On(o);return u==ut||u==R||u==Z||u==pe}function Mv(o){return typeof o=="number"&&o==He(o)}function Mh(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=$e}function Vt(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function Ut(o){return o!=null&&typeof o=="object"}var Fv=na?Fe(na):LP;function Ox(o,u){return o===u||cp(o,u,Sp(u))}function Vx(o,u,f){return f=typeof f=="function"?f:t,cp(o,u,Sp(u),f)}function Nx(o){return Uv(o)&&o!=+o}function Lx(o){if(vC(o))throw new qe(s);return xy(o)}function Mx(o){return o===null}function Fx(o){return o==null}function Uv(o){return typeof o=="number"||Ut(o)&&On(o)==j}function Gu(o){if(!Ut(o)||On(o)!=J)return!1;var u=lh(o);if(u===null)return!0;var f=mt.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&oh.call(f)==VR}var Mp=Hs?Fe(Hs):MP;function Ux(o){return Mv(o)&&o>=-$e&&o<=$e}var Bv=ku?Fe(ku):FP;function Fh(o){return typeof o=="string"||!je(o)&&Ut(o)&&On(o)==ae}function Zn(o){return typeof o=="symbol"||Ut(o)&&On(o)==Pe}var _a=Gs?Fe(Gs):UP;function Bx(o){return o===t}function $x(o){return Ut(o)&&In(o)==Ie}function qx(o){return Ut(o)&&On(o)==ke}var zx=Ph(hp),Kx=Ph(function(o,u){return o<=u});function $v(o){if(!o)return[];if(jn(o))return Fh(o)?Ar(o):Kn(o);if(Nu&&o[Nu])return IR(o[Nu]());var u=In(o),f=u==D?Xd:u==ce?rh:ya;return f(o)}function gi(o){if(!o)return o===0?o:0;if(o=_r(o),o===Ce||o===-Ce){var u=o<0?-1:1;return u*Dn}return o===o?o:0}function He(o){var u=gi(o),f=u%1;return u===u?f?u-f:u:0}function qv(o){return o?Zs(He(o),0,Dt):0}function _r(o){if(typeof o=="number")return o;if(Zn(o))return vn;if(Vt(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=Vt(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Jt(o);var f=Mr.test(o);return f||Vl.test(o)?Yd(o.slice(2),f?2:8):jo.test(o)?vn:+o}function zv(o){return Kr(o,Wn(o))}function jx(o){return o?Zs(He(o),-$e,$e):o===0?o:0}function ht(o){return o==null?"":Xn(o)}var Wx=pa(function(o,u){if(Wu(u)||jn(u)){Kr(u,cn(u),o);return}for(var f in u)mt.call(u,f)&&Bu(o,f,u[f])}),Kv=pa(function(o,u){Kr(u,Wn(u),o)}),Uh=pa(function(o,u,f,m){Kr(u,Wn(u),o,m)}),Hx=pa(function(o,u,f,m){Kr(u,cn(u),o,m)}),Gx=fi(ip);function Qx(o,u){var f=da(o);return u==null?f:Iy(f,u)}var Jx=Ye(function(o,u){o=Et(o);var f=-1,m=u.length,w=m>2?u[2]:t;for(w&&Vn(u[0],u[1],w)&&(m=1);++f<m;)for(var b=u[f],k=Wn(b),L=-1,B=k.length;++L<B;){var ee=k[L],te=o[ee];(te===t||Rr(te,la[ee])&&!mt.call(o,ee))&&(o[ee]=b[ee])}return o}),Yx=Ye(function(o){return o.push(t,av),kn(jv,t,o)});function Xx(o,u){return Qs(o,Oe(u,3),zr)}function Zx(o,u){return Qs(o,Oe(u,3),op)}function eD(o,u){return o==null?o:sp(o,Oe(u,3),Wn)}function tD(o,u){return o==null?o:Ry(o,Oe(u,3),Wn)}function nD(o,u){return o&&zr(o,Oe(u,3))}function rD(o,u){return o&&op(o,Oe(u,3))}function iD(o){return o==null?[]:wh(o,cn(o))}function sD(o){return o==null?[]:wh(o,Wn(o))}function Fp(o,u,f){var m=o==null?t:eo(o,u);return m===t?f:m}function oD(o,u){return o!=null&&lv(o,u,CP)}function Up(o,u){return o!=null&&lv(o,u,xP)}var aD=nv(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=ah.call(u)),o[u]=f},$p(Hn)),uD=nv(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=ah.call(u)),mt.call(o,u)?o[u].push(f):o[u]=[f]},Oe),cD=Ye(qu);function cn(o){return jn(o)?wy(o):lp(o)}function Wn(o){return jn(o)?wy(o,!0):BP(o)}function lD(o,u){var f={};return u=Oe(u,3),zr(o,function(m,w,b){li(f,u(m,w,b),m)}),f}function hD(o,u){var f={};return u=Oe(u,3),zr(o,function(m,w,b){li(f,w,u(m,w,b))}),f}var fD=pa(function(o,u,f){Eh(o,u,f)}),jv=pa(function(o,u,f,m){Eh(o,u,f,m)}),dD=fi(function(o,u){var f={};if(o==null)return f;var m=!1;u=pt(u,function(b){return b=es(b,o),m||(m=b.length>1),b}),Kr(o,bp(o),f),m&&(f=pr(f,_|v|I,aC));for(var w=u.length;w--;)mp(f,u[w]);return f});function pD(o,u){return Wv(o,Lh(Oe(u)))}var gD=fi(function(o,u){return o==null?{}:qP(o,u)});function Wv(o,u){if(o==null)return{};var f=pt(bp(o),function(m){return[m]});return u=Oe(u),My(o,f,function(m,w){return u(m,w[0])})}function mD(o,u,f){u=es(u,o);var m=-1,w=u.length;for(w||(w=1,o=t);++m<w;){var b=o==null?t:o[jr(u[m])];b===t&&(m=w,b=f),o=pi(b)?b.call(o):b}return o}function _D(o,u,f){return o==null?o:Ku(o,u,f)}function yD(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:Ku(o,u,f,m)}var Hv=sv(cn),Gv=sv(Wn);function vD(o,u,f){var m=je(o),w=m||ns(o)||_a(o);if(u=Oe(u,4),f==null){var b=o&&o.constructor;w?f=m?new b:[]:Vt(o)?f=pi(b)?da(lh(o)):{}:f={}}return(w?an:zr)(o,function(k,L,B){return u(f,k,L,B)}),f}function wD(o,u){return o==null?!0:mp(o,u)}function ED(o,u,f){return o==null?o:qy(o,u,vp(f))}function ID(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:qy(o,u,vp(f),m)}function ya(o){return o==null?[]:Yt(o,cn(o))}function TD(o){return o==null?[]:Yt(o,Wn(o))}function bD(o,u,f){return f===t&&(f=u,u=t),f!==t&&(f=_r(f),f=f===f?f:0),u!==t&&(u=_r(u),u=u===u?u:0),Zs(_r(o),u,f)}function AD(o,u,f){return u=gi(u),f===t?(f=u,u=0):f=gi(f),o=_r(o),DP(o,u,f)}function SD(o,u,f){if(f&&typeof f!="boolean"&&Vn(o,u,f)&&(u=f=t),f===t&&(typeof u=="boolean"?(f=u,u=t):typeof o=="boolean"&&(f=o,o=t)),o===t&&u===t?(o=0,u=1):(o=gi(o),u===t?(u=o,o=0):u=gi(u)),o>u){var m=o;o=u,u=m}if(f||o%1||u%1){var w=yy();return En(o+w*(u-o+Jd("1e-"+((w+"").length-1))),u)}return dp(o,u)}var RD=ga(function(o,u,f){return u=u.toLowerCase(),o+(f?Qv(u):u)});function Qv(o){return Bp(ht(o).toLowerCase())}function Jv(o){return o=ht(o),o&&o.replace(Iu,Vu).replace(Hd,"")}function PD(o,u,f){o=ht(o),u=Xn(u);var m=o.length;f=f===t?m:Zs(He(f),0,m);var w=f;return f-=u.length,f>=0&&o.slice(f,w)==u}function CD(o){return o=ht(o),o&&wu.test(o)?o.replace(Bi,yR):o}function xD(o){return o=ht(o),o&&Dl.test(o)?o.replace(en,"\\$&"):o}var DD=ga(function(o,u,f){return o+(f?"-":"")+u.toLowerCase()}),kD=ga(function(o,u,f){return o+(f?" ":"")+u.toLowerCase()}),OD=Zy("toLowerCase");function VD(o,u,f){o=ht(o),u=He(u);var m=u?ua(o):0;if(!u||m>=u)return o;var w=(u-m)/2;return Rh(ph(w),f)+o+Rh(dh(w),f)}function ND(o,u,f){o=ht(o),u=He(u);var m=u?ua(o):0;return u&&m<u?o+Rh(u-m,f):o}function LD(o,u,f){o=ht(o),u=He(u);var m=u?ua(o):0;return u&&m<u?Rh(u-m,f)+o:o}function MD(o,u,f){return f||u==null?u=0:u&&(u=+u),KR(ht(o).replace(ri,""),u||0)}function FD(o,u,f){return(f?Vn(o,u,f):u===t)?u=1:u=He(u),pp(ht(o),u)}function UD(){var o=arguments,u=ht(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var BD=ga(function(o,u,f){return o+(f?"_":"")+u.toLowerCase()});function $D(o,u,f){return f&&typeof f!="number"&&Vn(o,u,f)&&(u=f=t),f=f===t?Dt:f>>>0,f?(o=ht(o),o&&(typeof u=="string"||u!=null&&!Mp(u))&&(u=Xn(u),!u&&aa(o))?ts(Ar(o),0,f):o.split(u,f)):[]}var qD=ga(function(o,u,f){return o+(f?" ":"")+Bp(u)});function zD(o,u,f){return o=ht(o),f=f==null?0:Zs(He(f),0,o.length),u=Xn(u),o.slice(f,f+u.length)==u}function KD(o,u,f){var m=E.templateSettings;f&&Vn(o,u,f)&&(u=t),o=ht(o),u=Uh({},u,m,ov);var w=Uh({},u.imports,m.imports,ov),b=cn(w),k=Yt(w,b),L,B,ee=0,te=u.interpolate||zs,se="__p += '",me=Zd((u.escape||zs).source+"|"+te.source+"|"+(te===Bs?kl:zs).source+"|"+(u.evaluate||zs).source+"|$","g"),Ae="//# sourceURL="+(mt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ea+"]")+`
`;o.replace(me,function(Ne,et,it,er,Nn,tr){return it||(it=er),se+=o.slice(ee,tr).replace(Nl,vR),et&&(L=!0,se+=`' +
__e(`+et+`) +
'`),Nn&&(B=!0,se+=`';
`+Nn+`;
__p += '`),it&&(se+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),ee=tr+Ne.length,Ne}),se+=`';
`;var Ve=mt.call(u,"variable")&&u.variable;if(!Ve)se=`with (obj) {
`+se+`
}
`;else if(qd.test(Ve))throw new qe(c);se=(B?se.replace(qo,""):se).replace(_u,"$1").replace(Rl,"$1;"),se="function("+(Ve||"obj")+`) {
`+(Ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var Je=Xv(function(){return lt(b,Ae+"return "+se).apply(t,k)});if(Je.source=se,Lp(Je))throw Je;return Je}function jD(o){return ht(o).toLowerCase()}function WD(o){return ht(o).toUpperCase()}function HD(o,u,f){if(o=ht(o),o&&(f||u===t))return Jt(o);if(!o||!(u=Xn(u)))return o;var m=Ar(o),w=Ar(u),b=ai(m,w),k=zn(m,w)+1;return ts(m,b,k).join("")}function GD(o,u,f){if(o=ht(o),o&&(f||u===t))return o.slice(0,hy(o)+1);if(!o||!(u=Xn(u)))return o;var m=Ar(o),w=zn(m,Ar(u))+1;return ts(m,0,w).join("")}function QD(o,u,f){if(o=ht(o),o&&(f||u===t))return o.replace(ri,"");if(!o||!(u=Xn(u)))return o;var m=Ar(o),w=ai(m,Ar(u));return ts(m,w).join("")}function JD(o,u){var f=x,m=N;if(Vt(u)){var w="separator"in u?u.separator:w;f="length"in u?He(u.length):f,m="omission"in u?Xn(u.omission):m}o=ht(o);var b=o.length;if(aa(o)){var k=Ar(o);b=k.length}if(f>=b)return o;var L=f-ua(m);if(L<1)return m;var B=k?ts(k,0,L).join(""):o.slice(0,L);if(w===t)return B+m;if(k&&(L+=B.length-L),Mp(w)){if(o.slice(L).search(w)){var ee,te=B;for(w.global||(w=Zd(w.source,ht(Ko.exec(w))+"g")),w.lastIndex=0;ee=w.exec(te);)var se=ee.index;B=B.slice(0,se===t?L:se)}}else if(o.indexOf(Xn(w),L)!=L){var me=B.lastIndexOf(w);me>-1&&(B=B.slice(0,me))}return B+m}function YD(o){return o=ht(o),o&&vu.test(o)?o.replace(yu,SR):o}var XD=ga(function(o,u,f){return o+(f?" ":"")+u.toUpperCase()}),Bp=Zy("toUpperCase");function Yv(o,u,f){return o=ht(o),u=f?t:u,u===t?ER(o)?CR(o):th(o):o.match(u)||[]}var Xv=Ye(function(o,u){try{return kn(o,t,u)}catch(f){return Lp(f)?f:new qe(f)}}),ZD=fi(function(o,u){return an(u,function(f){f=jr(f),li(o,f,Vp(o[f],o))}),o});function ek(o){var u=o==null?0:o.length,f=Oe();return o=u?pt(o,function(m){if(typeof m[1]!="function")throw new fr(a);return[f(m[0]),m[1]]}):[],Ye(function(m){for(var w=-1;++w<u;){var b=o[w];if(kn(b[0],this,m))return kn(b[1],this,m)}})}function tk(o){return SP(pr(o,_))}function $p(o){return function(){return o}}function nk(o,u){return o==null||o!==o?u:o}var rk=tv(),ik=tv(!0);function Hn(o){return o}function qp(o){return Dy(typeof o=="function"?o:pr(o,_))}function sk(o){return Oy(pr(o,_))}function ok(o,u){return Vy(o,pr(u,_))}var ak=Ye(function(o,u){return function(f){return qu(f,o,u)}}),uk=Ye(function(o,u){return function(f){return qu(o,f,u)}});function zp(o,u,f){var m=cn(u),w=wh(u,m);f==null&&!(Vt(u)&&(w.length||!m.length))&&(f=u,u=o,o=this,w=wh(u,cn(u)));var b=!(Vt(f)&&"chain"in f)||!!f.chain,k=pi(o);return an(w,function(L){var B=u[L];o[L]=B,k&&(o.prototype[L]=function(){var ee=this.__chain__;if(b||ee){var te=o(this.__wrapped__),se=te.__actions__=Kn(this.__actions__);return se.push({func:B,args:arguments,thisArg:o}),te.__chain__=ee,te}return B.apply(o,br([this.value()],arguments))})}),o}function ck(){return Qt._===this&&(Qt._=NR),this}function Kp(){}function lk(o){return o=He(o),Ye(function(u){return Ny(u,o)})}var hk=Ep(pt),fk=Ep(Ou),dk=Ep(sa);function Zv(o){return Pp(o)?g(jr(o)):zP(o)}function pk(o){return function(u){return o==null?t:eo(o,u)}}var gk=rv(),mk=rv(!0);function jp(){return[]}function Wp(){return!1}function _k(){return{}}function yk(){return""}function vk(){return!0}function wk(o,u){if(o=He(o),o<1||o>$e)return[];var f=Dt,m=En(o,Dt);u=Oe(u),o-=Dt;for(var w=he(m,u);++f<o;)u(f);return w}function Ek(o){return je(o)?pt(o,jr):Zn(o)?[o]:Kn(vv(ht(o)))}function Ik(o){var u=++OR;return ht(o)+u}var Tk=Sh(function(o,u){return o+u},0),bk=Ip("ceil"),Ak=Sh(function(o,u){return o/u},1),Sk=Ip("floor");function Rk(o){return o&&o.length?vh(o,Hn,ap):t}function Pk(o,u){return o&&o.length?vh(o,Oe(u,2),ap):t}function Ck(o){return l(o,Hn)}function xk(o,u){return l(o,Oe(u,2))}function Dk(o){return o&&o.length?vh(o,Hn,hp):t}function kk(o,u){return o&&o.length?vh(o,Oe(u,2),hp):t}var Ok=Sh(function(o,u){return o*u},1),Vk=Ip("round"),Nk=Sh(function(o,u){return o-u},0);function Lk(o){return o&&o.length?H(o,Hn):0}function Mk(o,u){return o&&o.length?H(o,Oe(u,2)):0}return E.after=sx,E.ary=xv,E.assign=Wx,E.assignIn=Kv,E.assignInWith=Uh,E.assignWith=Hx,E.at=Gx,E.before=Dv,E.bind=Vp,E.bindAll=ZD,E.bindKey=kv,E.castArray=_x,E.chain=Rv,E.chunk=SC,E.compact=RC,E.concat=PC,E.cond=ek,E.conforms=tk,E.constant=$p,E.countBy=L1,E.create=Qx,E.curry=Ov,E.curryRight=Vv,E.debounce=Nv,E.defaults=Jx,E.defaultsDeep=Yx,E.defer=ox,E.delay=ax,E.difference=CC,E.differenceBy=xC,E.differenceWith=DC,E.drop=kC,E.dropRight=OC,E.dropRightWhile=VC,E.dropWhile=NC,E.fill=LC,E.filter=F1,E.flatMap=$1,E.flatMapDeep=q1,E.flatMapDepth=z1,E.flatten=Tv,E.flattenDeep=MC,E.flattenDepth=FC,E.flip=ux,E.flow=rk,E.flowRight=ik,E.fromPairs=UC,E.functions=iD,E.functionsIn=sD,E.groupBy=K1,E.initial=$C,E.intersection=qC,E.intersectionBy=zC,E.intersectionWith=KC,E.invert=aD,E.invertBy=uD,E.invokeMap=W1,E.iteratee=qp,E.keyBy=H1,E.keys=cn,E.keysIn=Wn,E.map=Oh,E.mapKeys=lD,E.mapValues=hD,E.matches=sk,E.matchesProperty=ok,E.memoize=Nh,E.merge=fD,E.mergeWith=jv,E.method=ak,E.methodOf=uk,E.mixin=zp,E.negate=Lh,E.nthArg=lk,E.omit=dD,E.omitBy=pD,E.once=cx,E.orderBy=G1,E.over=hk,E.overArgs=lx,E.overEvery=fk,E.overSome=dk,E.partial=Np,E.partialRight=Lv,E.partition=Q1,E.pick=gD,E.pickBy=Wv,E.property=Zv,E.propertyOf=pk,E.pull=GC,E.pullAll=Av,E.pullAllBy=QC,E.pullAllWith=JC,E.pullAt=YC,E.range=gk,E.rangeRight=mk,E.rearg=hx,E.reject=X1,E.remove=XC,E.rest=fx,E.reverse=kp,E.sampleSize=ex,E.set=_D,E.setWith=yD,E.shuffle=tx,E.slice=ZC,E.sortBy=ix,E.sortedUniq=o1,E.sortedUniqBy=a1,E.split=$D,E.spread=dx,E.tail=u1,E.take=c1,E.takeRight=l1,E.takeRightWhile=h1,E.takeWhile=f1,E.tap=R1,E.throttle=px,E.thru=kh,E.toArray=$v,E.toPairs=Hv,E.toPairsIn=Gv,E.toPath=Ek,E.toPlainObject=zv,E.transform=vD,E.unary=gx,E.union=d1,E.unionBy=p1,E.unionWith=g1,E.uniq=m1,E.uniqBy=_1,E.uniqWith=y1,E.unset=wD,E.unzip=Op,E.unzipWith=Sv,E.update=ED,E.updateWith=ID,E.values=ya,E.valuesIn=TD,E.without=v1,E.words=Yv,E.wrap=mx,E.xor=w1,E.xorBy=E1,E.xorWith=I1,E.zip=T1,E.zipObject=b1,E.zipObjectDeep=A1,E.zipWith=S1,E.entries=Hv,E.entriesIn=Gv,E.extend=Kv,E.extendWith=Uh,zp(E,E),E.add=Tk,E.attempt=Xv,E.camelCase=RD,E.capitalize=Qv,E.ceil=bk,E.clamp=bD,E.clone=yx,E.cloneDeep=wx,E.cloneDeepWith=Ex,E.cloneWith=vx,E.conformsTo=Ix,E.deburr=Jv,E.defaultTo=nk,E.divide=Ak,E.endsWith=PD,E.eq=Rr,E.escape=CD,E.escapeRegExp=xD,E.every=M1,E.find=U1,E.findIndex=Ev,E.findKey=Xx,E.findLast=B1,E.findLastIndex=Iv,E.findLastKey=Zx,E.floor=Sk,E.forEach=Pv,E.forEachRight=Cv,E.forIn=eD,E.forInRight=tD,E.forOwn=nD,E.forOwnRight=rD,E.get=Fp,E.gt=Tx,E.gte=bx,E.has=oD,E.hasIn=Up,E.head=bv,E.identity=Hn,E.includes=j1,E.indexOf=BC,E.inRange=AD,E.invoke=cD,E.isArguments=ro,E.isArray=je,E.isArrayBuffer=Ax,E.isArrayLike=jn,E.isArrayLikeObject=qt,E.isBoolean=Sx,E.isBuffer=ns,E.isDate=Rx,E.isElement=Px,E.isEmpty=Cx,E.isEqual=xx,E.isEqualWith=Dx,E.isError=Lp,E.isFinite=kx,E.isFunction=pi,E.isInteger=Mv,E.isLength=Mh,E.isMap=Fv,E.isMatch=Ox,E.isMatchWith=Vx,E.isNaN=Nx,E.isNative=Lx,E.isNil=Fx,E.isNull=Mx,E.isNumber=Uv,E.isObject=Vt,E.isObjectLike=Ut,E.isPlainObject=Gu,E.isRegExp=Mp,E.isSafeInteger=Ux,E.isSet=Bv,E.isString=Fh,E.isSymbol=Zn,E.isTypedArray=_a,E.isUndefined=Bx,E.isWeakMap=$x,E.isWeakSet=qx,E.join=jC,E.kebabCase=DD,E.last=mr,E.lastIndexOf=WC,E.lowerCase=kD,E.lowerFirst=OD,E.lt=zx,E.lte=Kx,E.max=Rk,E.maxBy=Pk,E.mean=Ck,E.meanBy=xk,E.min=Dk,E.minBy=kk,E.stubArray=jp,E.stubFalse=Wp,E.stubObject=_k,E.stubString=yk,E.stubTrue=vk,E.multiply=Ok,E.nth=HC,E.noConflict=ck,E.noop=Kp,E.now=Vh,E.pad=VD,E.padEnd=ND,E.padStart=LD,E.parseInt=MD,E.random=SD,E.reduce=J1,E.reduceRight=Y1,E.repeat=FD,E.replace=UD,E.result=mD,E.round=Vk,E.runInContext=U,E.sample=Z1,E.size=nx,E.snakeCase=BD,E.some=rx,E.sortedIndex=e1,E.sortedIndexBy=t1,E.sortedIndexOf=n1,E.sortedLastIndex=r1,E.sortedLastIndexBy=i1,E.sortedLastIndexOf=s1,E.startCase=qD,E.startsWith=zD,E.subtract=Nk,E.sum=Lk,E.sumBy=Mk,E.template=KD,E.times=wk,E.toFinite=gi,E.toInteger=He,E.toLength=qv,E.toLower=jD,E.toNumber=_r,E.toSafeInteger=jx,E.toString=ht,E.toUpper=WD,E.trim=HD,E.trimEnd=GD,E.trimStart=QD,E.truncate=JD,E.unescape=YD,E.uniqueId=Ik,E.upperCase=XD,E.upperFirst=Bp,E.each=Pv,E.eachRight=Cv,E.first=bv,zp(E,function(){var o={};return zr(E,function(u,f){mt.call(E.prototype,f)||(o[f]=u)}),o}(),{chain:!1}),E.VERSION=r,an(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){E[o].placeholder=E}),an(["drop","take"],function(o,u){nt.prototype[o]=function(f){f=f===t?1:nn(He(f),0);var m=this.__filtered__&&!u?new nt(this):this.clone();return m.__filtered__?m.__takeCount__=En(f,m.__takeCount__):m.__views__.push({size:En(f,Dt),type:o+(m.__dir__<0?"Right":"")}),m},nt.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),an(["filter","map","takeWhile"],function(o,u){var f=u+1,m=f==fe||f==tt;nt.prototype[o]=function(w){var b=this.clone();return b.__iteratees__.push({iteratee:Oe(w,3),type:f}),b.__filtered__=b.__filtered__||m,b}}),an(["head","last"],function(o,u){var f="take"+(u?"Right":"");nt.prototype[o]=function(){return this[f](1).value()[0]}}),an(["initial","tail"],function(o,u){var f="drop"+(u?"":"Right");nt.prototype[o]=function(){return this.__filtered__?new nt(this):this[f](1)}}),nt.prototype.compact=function(){return this.filter(Hn)},nt.prototype.find=function(o){return this.filter(o).head()},nt.prototype.findLast=function(o){return this.reverse().find(o)},nt.prototype.invokeMap=Ye(function(o,u){return typeof o=="function"?new nt(this):this.map(function(f){return qu(f,o,u)})}),nt.prototype.reject=function(o){return this.filter(Lh(Oe(o)))},nt.prototype.slice=function(o,u){o=He(o);var f=this;return f.__filtered__&&(o>0||u<0)?new nt(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),u!==t&&(u=He(u),f=u<0?f.dropRight(-u):f.take(u-o)),f)},nt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},nt.prototype.toArray=function(){return this.take(Dt)},zr(nt.prototype,function(o,u){var f=/^(?:filter|find|map|reject)|While$/.test(u),m=/^(?:head|last)$/.test(u),w=E[m?"take"+(u=="last"?"Right":""):u],b=m||/^find/.test(u);!w||(E.prototype[u]=function(){var k=this.__wrapped__,L=m?[1]:arguments,B=k instanceof nt,ee=L[0],te=B||je(k),se=function(et){var it=w.apply(E,br([et],L));return m&&me?it[0]:it};te&&f&&typeof ee=="function"&&ee.length!=1&&(B=te=!1);var me=this.__chain__,Ae=!!this.__actions__.length,Ve=b&&!me,Je=B&&!Ae;if(!b&&te){k=Je?k:new nt(this);var Ne=o.apply(k,L);return Ne.__actions__.push({func:kh,args:[se],thisArg:t}),new dr(Ne,me)}return Ve&&Je?o.apply(this,L):(Ne=this.thru(se),Ve?m?Ne.value()[0]:Ne.value():Ne)})}),an(["pop","push","shift","sort","splice","unshift"],function(o){var u=ih[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",m=/^(?:pop|shift)$/.test(o);E.prototype[o]=function(){var w=arguments;if(m&&!this.__chain__){var b=this.value();return u.apply(je(b)?b:[],w)}return this[f](function(k){return u.apply(je(k)?k:[],w)})}}),zr(nt.prototype,function(o,u){var f=E[u];if(f){var m=f.name+"";mt.call(fa,m)||(fa[m]=[]),fa[m].push({name:u,func:f})}}),fa[Ah(t,Q).name]=[{name:"wrapper",func:t}],nt.prototype.clone=YR,nt.prototype.reverse=XR,nt.prototype.value=ZR,E.prototype.at=P1,E.prototype.chain=C1,E.prototype.commit=x1,E.prototype.next=D1,E.prototype.plant=O1,E.prototype.reverse=V1,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=N1,E.prototype.first=E.prototype.head,Nu&&(E.prototype[Nu]=k1),E},ca=xR();qr?((qr.exports=ca)._=ca,Hi._=ca):Qt._=ca}).call(sc)})(Dm,Dm.exports);var P0=Dm.exports;let yi=null,Ge=null,oc=null;const zS=nL("mainStore",{state:()=>({transactionId:null,currentSheetId:null,userLedger:null,currentSheet:null,firebaseReady:!1,authReady:!1,config:Sg.make(),pendingTransactionIds:new Set,unsubscribeUserLedger:null,unsubscribeCurrentSheet:null,onlineHandler:null}),getters:{isSheet(){return this.currentSheet!==null},currencies(){return this.currentSheet?new Set(Ag.getCurrencies(this.currentSheetResults)):new Set},lastCurrency(){var n;return this.currentSheet&&((n=this.currentSheetTransactions)==null?void 0:n.length)?this.currentSheet.transactions[this.currentSheetTransactions[0]].currency:"USD"},user(){var n,e,t,r;return ic.makeUser((n=Ge==null?void 0:Ge.currentUser)==null?void 0:n.uid,(e=this.userLedger)==null?void 0:e.name,(t=Ge==null?void 0:Ge.currentUser)==null?void 0:t.email,(r=Ge==null?void 0:Ge.currentUser)==null?void 0:r.emailVerified)},userLedgerFriends(){return!this.userLedger||!this.userLedger.friends?[]:Object.entries(this.userLedger.friends).sort(([,n],[,e])=>ic.compare(n,e)).map(([n])=>n)},userLedgerSheets(){return!this.userLedger||!this.userLedger.sheets?[]:Object.entries(this.userLedger.sheets).sort(([,n],[,e])=>n.timestamp-e.timestamp).map(([n])=>n)},currentSheetPeople(){return!this.currentSheet||!this.currentSheet.people?[]:Object.entries(this.currentSheet.people).sort(([,n],[,e])=>n.timestamp-e.timestamp).map(([n])=>n)},currentSheetTransactions(){return!this.currentSheet||!this.currentSheet.transactions?[]:Object.entries(this.currentSheet.transactions).sort(([,n],[,e])=>e.timestamp-n.timestamp).map(([n])=>n)},currentSheetResults(){return!this.currentSheet||!this.currentSheet.transactions||!this.currentSheetPeople?[]:Ag.make(this.currentSheet.transactions,this.currentSheetPeople.length||0)}},actions:{personId2Idx(n){return this.currentSheetPeople.indexOf(n)},personIdx2Id(n){return this.currentSheetPeople[n]},async addTransaction(n,e=null){return console.log("nav online",navigator.onLine),navigator.onLine||this.pendingTransactionIds.add(n.id),await this.autoBatch(async(t,r)=>{await this.removeTransaction(this.transactionId,r);const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t.id}`]:t})},n,e)},async removeTransaction(n,e=null){if(!!n)return await this.autoBatch(async(t,r)=>{const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t}`]:Xh()})},n,e)},async addTransactions(n,e=null){return await this.autoBatch(async(t,r)=>{for(const i of Object.values(t))await this.addTransaction(i,r)},n,e)},getEditableCurrentSheetResults(){return P0.cloneDeep(this.currentSheetResults)},makeEquivalentTransactionBatch(n,e,t,r=1,i=null){return Ag.makeEquivalentTransactionBatch(this.currentSheetResults,n,e,t,r,i)},async settleCurrencyPerson(n,e,t){const r=this.makeEquivalentTransactionBatch(n,e,t);try{await this.addTransactions(r)}catch(i){$q.notify({message:i.message||i,color:"negative"})}},async setPeople(n,e=null){if(!this.currentSheet)throw new Error("Current sheet should be set here.");const t=Object.fromEntries(Object.keys(n).filter(i=>this.isUserOrFriend(i)).map(i=>[i,"owner"])),r=Object.keys(t).filter(i=>!(i in this.currentSheet.users));return await this.autoBatch(async(i,s,a,c)=>{const h={name:this.currentSheet.name,timestamp:this.currentSheet.timestamp};a.forEach(p=>{const _=this.getUserLedgerRef(p);c.update(_,{[`sheets.${this.currentSheet.id}`]:h})});const d=this.getSheetRef(this.currentSheet.id);c.update(d,{users:s}),c.update(d,{people:i})},n,t,r,e)},getEditableTransaction(n=this.transactionId){if(this.currentSheet&&n in this.currentSheet.transactions){const t=P0.cloneDeep(this.currentSheet.transactions[n]);return xm.updatePeople(t,this.currentSheetPeople.length),t}const e=this.currentSheetPeople.map(t=>this.currentSheet.people[t].active);return xm.make(e,this.lastCurrency,this.personId2Idx(Ge.currentUser.uid))},async setSheetName(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`sheets.${this.currentSheet.id}.name`]:t})},n,e)},getName(n,e=null){var t;return n===this.user.id?ic.username(this.user):n in this.userLedger.friends?ic.username(this.userLedger.friends[n]):(e===null&&(e=(t=this.currentSheet)==null?void 0:t.people),ic.username(e[n]))},isCaption(n,e=null){var t,r,i;return n===this.user.id?!!this.user.name:n in((t=this.userLedger)==null?void 0:t.friends)?!!this.userLedger.friends[n].name:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),!!((i=e[n])!=null&&i.name))},getEmail(n,e=null){var t,r,i;return n===this.user.id?this.user.email:n in((t=this.userLedger)==null?void 0:t.friends)?this.userLedger.friends[n].email:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),(i=e[n])==null?void 0:i.email)},isPersonFullyRemovable(n){if(n===this.user.id)return!1;if(!this.currentSheet)return!0;if(n in this.currentSheet.users)return!1;const e=this.currentSheetPeople.indexOf(n);return e===-1?!0:Object.values(this.currentSheet.transactions).every(t=>e>=t.debts.length)},async addSheetFromNameAndPeople(n,e,t=null){const r=Object.fromEntries(Object.keys(e).filter(s=>this.isUserOrFriend(s)).map(s=>[s,"owner"])),i=S4.make(n,e,r);return await this.autoBatch(async(s,a)=>{await this.addSheet(s,a)},i,t),i},async removeSheet(n,e,t=null){return await this.autoBatch(async(r,i,s)=>{const a=this.getSheetRef(r);i<=1?s.delete(a):(s.update(a,{[`users.${Ge.currentUser.uid}`]:Xh()}),s.update(a,{[`people.${Ge.currentUser.uid}.active`]:!1}));const c=this.getUserLedgerRef();s.update(c,{[`sheets.${r}`]:Xh()})},n,e,t)},async nUsers(n){const e=this.getSheetRef(n),t=await QU(e);if(!t.exists)throw new Error(`Document ${n} does not exist!`);return Object.keys(t.data().users).length},async addSheet(n,e=null){return await this.autoBatch(async(t,r)=>{const i={name:t.name,timestamp:t.timestamp};Object.keys(t.users).forEach(a=>{const c=this.getUserLedgerRef(a);r.update(c,{[`sheets.${t.id}`]:i})});const s=this.getSheetRef(t.id);r.set(s,t)},n,e)},isUserOrFriend(n){return n===Ge.currentUser.uid||n in this.userLedger.friends},async removeFriend(n,e=null){if(!(n in this.userLedger.friends))throw new Error("This user is not your friend!");return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${t}`]:Xh()})},n,e)},async setFriendName(n,e,t=null){if(e in this.userLedger.friends)return await this.autoBatch(async(r,i,s)=>{const a=this.getUserLedgerRef();s.update(a,{[`friends.${i}.name`]:r})},n,e,t)},async addFriend(n,e=null){if(n.id in this.userLedger.friends)throw new Error("This user is already a friend!");if(n.id===Ge.currentUser.uid)throw new Error("You cannot add youself as friend!");return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${t.id}`]:t})},n,e)},isReady(){return this.firebaseReady&&this.authReady&&!!this.userLedger},async setUsername(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{name:t})},n,e)},async init(){if(this.setupOnlineListener(),yi===null&&await this.initFirebase(),yi===null)return!1;await(Ge==null?void 0:Ge.authStateReady()),(Ge==null?void 0:Ge.currentUser)&&!this.userLedger&&await this.subscribeUserLedger(),this.currentSheetId&&await this.subscribeCurrentSheet(this.currentSheetId)},setConfig(n){if(!Sg.isCompatible(n))throw new Error("fbConfig not compatible!");this.config=n},async initFirebase(){if(!!Sg.isCompatible(this.config)){if(await this.clearFirebase(),bM().length>0){this.firebaseReady=!0;return}yi=JT(this.config),Ge=y4(yi),oc=LU(yi,{localCache:XU({tabManager:nB()})}),this.firebaseReady=!0,await new Promise(n=>{const e=Ge.onAuthStateChanged(()=>{this.authReady=!0,e(),n()})})}},async clearFirebase(){await this.logout(),oc=null,yi&&await AM(yi),Ge=null,yi=null},async logout(){this.clearUserLedger(),Ge!=null&&Ge.currentUser&&await(Ge==null?void 0:Ge.signOut())},async login(n,e){var t;this.logout(),yi===null&&await this.initFirebase(),await((t=Ge.authStateReady)==null?void 0:t.call(Ge)),await i$(Ge,n,e)},async register(n,e){var r;await this.logout(),this.isFirebaseReady||await this.initFirebase(),await((r=Ge.authStateReady)==null?void 0:r.call(Ge)),await r$(Ge,n,e);const t=this.getUserLedgerRef();await JU(t,R4.make())},async sendVerificationEmail(){await s$(Ge.currentUser)},async resetPassword(n){await n$(Ge,n)},setupOnlineListener(){if(this.onlineHandler)return;const n=()=>{this.pendingTransactionIds.clear()};window.addEventListener("online",n),this.onlineHandler=n},disposeOnlineListener(){this.onlineHandler&&(window.removeEventListener("online",this.onlineHandler),this.onlineHandler=null)},clearAll(){this.clearUserLedger(),this.clearCurrentSheet(),this.disposeOnlineListener()},clearUserLedger(){var n;(n=this.unsubscribeUserLedger)==null||n.call(this),this.unsubscribeUserLedger=null,this.userLedger=null},async subscribeUserLedger(){this.clearUserLedger();let n=!0;await new Promise(e=>{const t=this.getUserLedgerRef();this.unsubscribeUserLedger=a0(t,r=>{r.exists()&&(this.userLedger=r.data()),n&&(n=!1,e())})})},clearCurrentSheet(){var n;(n=this.unsubscribeCurrentSheet)==null||n.call(this),this.unsubscribeCurrentSheet=null,this.currentSheet=null,this.currentSheetId=null},async subscribeCurrentSheet(n){this.clearCurrentSheet();let e=!0;await new Promise(t=>{const r=this.getSheetRef(n);this.unsubscribeCurrentSheet=a0(r,async i=>{if(i.exists()){const s=i.data();this.currentSheet=s}await this.updateFriends(),e&&(e=!1,t())})}),this.currentSheetId=this.currentSheet.id||null},async updateFriends(n=null){const e=Object.keys(this.currentSheet.users).filter(r=>!(r in this.userLedger.friends)&&r!==Ge.currentUser.uid);if(!e.length)return;const t=e.map(r=>{var i,s;return{id:r,name:(i=this.currentSheet.people[r])==null?void 0:i.name,email:(s=this.currentSheet.people[r])==null?void 0:s.email}});await this.autoBatch(async(r,i)=>{for(const s of r)await this.addFriend(s,i)},t,n)},getUserLedgerRef(n=null){return n||(n=Ge.currentUser.uid),i0(oc,"users",n)},getSheetRef(n){return i0(oc,"sheets",n)},async autoBatch(n,...e){const t=!e[e.length-1];t&&(e[e.length-1]=iB(oc));const r=await n.apply(this,e);return t&&e[e.length-1].commit(),r}},persist:{key:"sessionData",pick:["config","currentSheetId","transactionId","pendingTransactionIds"],serializer:{serialize:n=>JSON.stringify({...n,pendingTransactionIds:Array.from(n.pendingTransactionIds)}),deserialize:n=>{const e=JSON.parse(n);return{...e,pendingTransactionIds:new Set(e.pendingTransactionIds)}}}}}),P4={__name:"App",setup(n){const e=zS();return hl(()=>{e.clearAll()}),(t,r)=>{const i=GO("router-view");return Rf(),Pf(i)}}};const C4=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,x4=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,D4=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function k4(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){O4(n);return}return e}function O4(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function V4(n,e={}){if(typeof n!="string")return n;const t=n.trim();if(n[0]==='"'&&n.endsWith('"')&&!n.includes("\\"))return t.slice(1,-1);if(t.length<=9){const r=t.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!D4.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(C4.test(n)||x4.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,k4)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function N4(n,e){if(n==null)return;let t=n;for(let r=0;r<e.length;r++){if(t==null||t[e[r]]==null)return;t=t[e[r]]}return t}function sy(n,e,t){if(t.length===0)return e;const r=t[0];return t.length>1&&(e=sy(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,r)?Number.isInteger(Number(t[1]))?[]:{}:n[r],e,Array.prototype.slice.call(t,1))),Number.isInteger(Number(r))&&Array.isArray(n)?n.slice()[r]:Object.assign({},n,{[r]:e})}function KS(n,e){if(n==null||e.length===0)return n;if(e.length===1){if(n==null)return n;if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(e[0],1);const t={};for(const r in n)t[r]=n[r];return delete t[e[0]],t}if(n[e[0]]==null){if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const t={};for(const r in n)t[r]=n[r];return t}return sy(n,KS(n[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function jS(n,e){return e.map(t=>t.split(".")).map(t=>[t,N4(n,t)]).filter(t=>t[1]!==void 0).reduce((t,r)=>sy(t,r[1],r[0]),{})}function WS(n,e){return e.map(t=>t.split(".")).reduce((t,r)=>KS(t,r),n)}function C0(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a,beforeHydrate:c,afterHydrate:h},d,p=!0){try{p&&(c==null||c(d));const _=e.getItem(r);if(_){const v=t.deserialize(_),I=s?jS(v,s):v,O=a?WS(I,a):I;n.$patch(O)}p&&(h==null||h(d))}catch(_){i&&console.error("[pinia-plugin-persistedstate]",_)}}function x0(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a}){try{const c=s?jS(n,s):n,h=a?WS(c,a):c,d=t.serialize(h);e.setItem(r,d)}catch(c){i&&console.error("[pinia-plugin-persistedstate]",c)}}function L4(n,e,t){const{pinia:r,store:i,options:{persist:s=t}}=n;if(!s)return;if(!(i.$id in r.state.value)){const h=r._s.get(i.$id.replace("__hot:",""));h&&Promise.resolve().then(()=>h.$persist());return}const c=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(e);i.$hydrate=({runHooks:h=!0}={})=>{c.forEach(d=>{C0(i,d,n,h)})},i.$persist=()=>{c.forEach(h=>{x0(i.$state,h)})},c.forEach(h=>{C0(i,h,n),i.$subscribe((d,p)=>x0(p,h),{detached:!0})})}function M4(n={}){return function(e){var t;L4(e,r=>{var i,s,a,c,h,d,p;return{key:(n.key?n.key:_=>_)((i=r.key)!=null?i:e.store.$id),debug:(a=(s=r.debug)!=null?s:n.debug)!=null?a:!1,serializer:(h=(c=r.serializer)!=null?c:n.serializer)!=null?h:{serialize:_=>JSON.stringify(_),deserialize:_=>V4(_)},storage:(p=(d=r.storage)!=null?d:n.storage)!=null?p:window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}},(t=n.auto)!=null?t:!1)}}var F4=M4(),Rg=()=>{const n=JN();return n.use(F4),n};/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Na=typeof document!="undefined";function HS(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function U4(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&HS(n.default)}const _t=Object.assign;function Pg(n,e){const t={};for(const r in e){const i=e[r];t[r]=Nr(i)?i.map(n):n(i)}return t}const Vc=()=>{},Nr=Array.isArray,GS=/#/g,B4=/&/g,$4=/\//g,q4=/=/g,z4=/\?/g,QS=/\+/g,K4=/%5B/g,j4=/%5D/g,JS=/%5E/g,W4=/%60/g,YS=/%7B/g,H4=/%7C/g,XS=/%7D/g,G4=/%20/g;function oy(n){return encodeURI(""+n).replace(H4,"|").replace(K4,"[").replace(j4,"]")}function Q4(n){return oy(n).replace(YS,"{").replace(XS,"}").replace(JS,"^")}function km(n){return oy(n).replace(QS,"%2B").replace(G4,"+").replace(GS,"%23").replace(B4,"%26").replace(W4,"`").replace(YS,"{").replace(XS,"}").replace(JS,"^")}function J4(n){return km(n).replace(q4,"%3D")}function Y4(n){return oy(n).replace(GS,"%23").replace(z4,"%3F")}function X4(n){return n==null?"":Y4(n).replace($4,"%2F")}function ol(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const Z4=/\/$/,eq=n=>n.replace(Z4,"");function Cg(n,e,t="/"){let r,i={},s="",a="";const c=e.indexOf("#");let h=e.indexOf("?");return c<h&&c>=0&&(h=-1),h>-1&&(r=e.slice(0,h),s=e.slice(h+1,c>-1?c:e.length),i=n(s)),c>-1&&(r=r||e.slice(0,c),a=e.slice(c,e.length)),r=iq(r!=null?r:e,t),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:ol(a)}}function tq(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function D0(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function nq(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&uu(e.matched[r],t.matched[i])&&ZS(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function uu(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function ZS(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!rq(n[t],e[t]))return!1;return!0}function rq(n,e){return Nr(n)?k0(n,e):Nr(e)?k0(e,n):n===e}function k0(n,e){return Nr(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function iq(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,a,c;for(a=0;a<r.length;a++)if(c=r[a],c!==".")if(c==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(a).join("/")}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var al;(function(n){n.pop="pop",n.push="push"})(al||(al={}));var Nc;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Nc||(Nc={}));function sq(n){if(!n)if(Na){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),eq(n)}const oq=/^[^#]+#/;function aq(n,e){return n.replace(oq,"#")+e}function uq(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Md=()=>({left:window.scrollX,top:window.scrollY});function cq(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=uq(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function O0(n,e){return(history.state?history.state.position-e:-1)+n}const Om=new Map;function lq(n,e){Om.set(n,e)}function hq(n){const e=Om.get(n);return Om.delete(n),e}let fq=()=>location.protocol+"//"+location.host;function eR(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let c=i.includes(n.slice(s))?n.slice(s).length:1,h=i.slice(c);return h[0]!=="/"&&(h="/"+h),D0(h,"")}return D0(t,n)+r+i}function dq(n,e,t,r){let i=[],s=[],a=null;const c=({state:v})=>{const I=eR(n,location),O=t.value,M=e.value;let F=0;if(v){if(t.value=I,e.value=v,a&&a===O){a=null;return}F=M?v.position-M.position:0}else r(I);i.forEach(Q=>{Q(t.value,O,{delta:F,type:al.pop,direction:F?F>0?Nc.forward:Nc.back:Nc.unknown})})};function h(){a=t.value}function d(v){i.push(v);const I=()=>{const O=i.indexOf(v);O>-1&&i.splice(O,1)};return s.push(I),I}function p(){const{history:v}=window;!v.state||v.replaceState(_t({},v.state,{scroll:Md()}),"")}function _(){for(const v of s)v();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:h,listen:d,destroy:_}}function V0(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?Md():null}}function pq(n){const{history:e,location:t}=window,r={value:eR(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(h,d,p){const _=n.indexOf("#"),v=_>-1?(t.host&&document.querySelector("base")?n:n.slice(_))+h:fq()+n+h;try{e[p?"replaceState":"pushState"](d,"",v),i.value=d}catch(I){console.error(I),t[p?"replace":"assign"](v)}}function a(h,d){const p=_t({},e.state,V0(i.value.back,h,i.value.forward,!0),d,{position:i.value.position});s(h,p,!0),r.value=h}function c(h,d){const p=_t({},i.value,e.state,{forward:h,scroll:Md()});s(p.current,p,!0);const _=_t({},V0(r.value,h,null),{position:p.position+1},d);s(h,_,!1),r.value=h}return{location:r,state:i,push:c,replace:a}}function gq(n){n=sq(n);const e=pq(n),t=dq(n,e.state,e.location,e.replace);function r(s,a=!0){a||t.pauseListeners(),history.go(s)}const i=_t({location:"",base:n,go:r,createHref:aq.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function mq(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),gq(n)}function _q(n){return typeof n=="string"||n&&typeof n=="object"}function tR(n){return typeof n=="string"||typeof n=="symbol"}const nR=Symbol("");var N0;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(N0||(N0={}));function cu(n,e){return _t(new Error,{type:n,[nR]:!0},e)}function vi(n,e){return n instanceof Error&&nR in n&&(e==null||!!(n.type&e))}const L0="[^/]+?",yq={sensitive:!1,strict:!1,start:!0,end:!0},vq=/[.+*?^${}()[\]/\\]/g;function wq(n,e){const t=_t({},yq,e),r=[];let i=t.start?"^":"";const s=[];for(const d of n){const p=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let _=0;_<d.length;_++){const v=d[_];let I=40+(t.sensitive?.25:0);if(v.type===0)_||(i+="/"),i+=v.value.replace(vq,"\\$&"),I+=40;else if(v.type===1){const{value:O,repeatable:M,optional:F,regexp:Q}=v;s.push({name:O,repeatable:M,optional:F});const z=Q||L0;if(z!==L0){I+=10;try{new RegExp(`(${z})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${O}" (${z}): `+W.message)}}let q=M?`((?:${z})(?:/(?:${z}))*)`:`(${z})`;_||(q=F&&d.length<2?`(?:/${q})`:"/"+q),F&&(q+="?"),i+=q,I+=20,F&&(I+=-8),M&&(I+=-20),z===".*"&&(I+=-50)}p.push(I)}r.push(p)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function c(d){const p=d.match(a),_={};if(!p)return null;for(let v=1;v<p.length;v++){const I=p[v]||"",O=s[v-1];_[O.name]=I&&O.repeatable?I.split("/"):I}return _}function h(d){let p="",_=!1;for(const v of n){(!_||!p.endsWith("/"))&&(p+="/"),_=!1;for(const I of v)if(I.type===0)p+=I.value;else if(I.type===1){const{value:O,repeatable:M,optional:F}=I,Q=O in d?d[O]:"";if(Nr(Q)&&!M)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const z=Nr(Q)?Q.join("/"):Q;if(!z)if(F)v.length<2&&(p.endsWith("/")?p=p.slice(0,-1):_=!0);else throw new Error(`Missing required param "${O}"`);p+=z}}return p||"/"}return{re:a,score:r,keys:s,parse:c,stringify:h}}function Eq(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function rR(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=Eq(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(M0(r))return 1;if(M0(i))return-1}return i.length-r.length}function M0(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Iq={type:0,value:""},Tq=/[a-zA-Z0-9_]/;function bq(n){if(!n)return[[]];if(n==="/")return[[Iq]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(I){throw new Error(`ERR (${t})/"${d}": ${I}`)}let t=0,r=t;const i=[];let s;function a(){s&&i.push(s),s=[]}let c=0,h,d="",p="";function _(){!d||(t===0?s.push({type:0,value:d}):t===1||t===2||t===3?(s.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:p,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=h}for(;c<n.length;){if(h=n[c++],h==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:h==="/"?(d&&_(),a()):h===":"?(_(),t=1):v();break;case 4:v(),t=r;break;case 1:h==="("?t=2:Tq.test(h)?v():(_(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case 2:h===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+h:t=3:p+=h;break;case 3:_(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&c--,p="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${d}"`),_(),a(),i}function Aq(n,e,t){const r=wq(bq(n.path),t),i=_t(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Sq(n,e){const t=[],r=new Map;e=$0({strict:!1,end:!0,sensitive:!1},e);function i(_){return r.get(_)}function s(_,v,I){const O=!I,M=U0(_);M.aliasOf=I&&I.record;const F=$0(e,_),Q=[M];if("alias"in _){const W=typeof _.alias=="string"?[_.alias]:_.alias;for(const Y of W)Q.push(U0(_t({},M,{components:I?I.record.components:M.components,path:Y,aliasOf:I?I.record:M})))}let z,q;for(const W of Q){const{path:Y}=W;if(v&&Y[0]!=="/"){const re=v.record.path,P=re[re.length-1]==="/"?"":"/";W.path=v.record.path+(Y&&P+Y)}if(z=Aq(W,v,F),I?I.alias.push(z):(q=q||z,q!==z&&q.alias.push(z),O&&_.name&&!B0(z)&&a(_.name)),iR(z)&&h(z),M.children){const re=M.children;for(let P=0;P<re.length;P++)s(re[P],z,I&&I.children[P])}I=I||z}return q?()=>{a(q)}:Vc}function a(_){if(tR(_)){const v=r.get(_);v&&(r.delete(_),t.splice(t.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=t.indexOf(_);v>-1&&(t.splice(v,1),_.record.name&&r.delete(_.record.name),_.children.forEach(a),_.alias.forEach(a))}}function c(){return t}function h(_){const v=Cq(_,t);t.splice(v,0,_),_.record.name&&!B0(_)&&r.set(_.record.name,_)}function d(_,v){let I,O={},M,F;if("name"in _&&_.name){if(I=r.get(_.name),!I)throw cu(1,{location:_});F=I.record.name,O=_t(F0(v.params,I.keys.filter(q=>!q.optional).concat(I.parent?I.parent.keys.filter(q=>q.optional):[]).map(q=>q.name)),_.params&&F0(_.params,I.keys.map(q=>q.name))),M=I.stringify(O)}else if(_.path!=null)M=_.path,I=t.find(q=>q.re.test(M)),I&&(O=I.parse(M),F=I.record.name);else{if(I=v.name?r.get(v.name):t.find(q=>q.re.test(v.path)),!I)throw cu(1,{location:_,currentLocation:v});F=I.record.name,O=_t({},v.params,_.params),M=I.stringify(O)}const Q=[];let z=I;for(;z;)Q.unshift(z.record),z=z.parent;return{name:F,path:M,params:O,matched:Q,meta:Pq(Q)}}n.forEach(_=>s(_));function p(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:a,clearRoutes:p,getRoutes:c,getRecordMatcher:i}}function F0(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function U0(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Rq(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Rq(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function B0(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Pq(n){return n.reduce((e,t)=>_t(e,t.meta),{})}function $0(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function Cq(n,e){let t=0,r=e.length;for(;t!==r;){const s=t+r>>1;rR(n,e[s])<0?r=s:t=s+1}const i=xq(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function xq(n){let e=n;for(;e=e.parent;)if(iR(e)&&rR(n,e)===0)return e}function iR({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Dq(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(QS," "),a=s.indexOf("="),c=ol(a<0?s:s.slice(0,a)),h=a<0?null:ol(s.slice(a+1));if(c in e){let d=e[c];Nr(d)||(d=e[c]=[d]),d.push(h)}else e[c]=h}return e}function q0(n){let e="";for(let t in n){const r=n[t];if(t=J4(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Nr(r)?r.map(s=>s&&km(s)):[r&&km(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function kq(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Nr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const Oq=Symbol(""),z0=Symbol(""),Fd=Symbol(""),sR=Symbol(""),Vm=Symbol("");function ac(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function ps(n,e,t,r,i,s=a=>a()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((c,h)=>{const d=v=>{v===!1?h(cu(4,{from:t,to:e})):v instanceof Error?h(v):_q(v)?h(cu(2,{from:e,to:v})):(a&&r.enterCallbacks[i]===a&&typeof v=="function"&&a.push(v),c())},p=s(()=>n.call(r&&r.instances[i],e,t,d));let _=Promise.resolve(p);n.length<3&&(_=_.then(d)),_.catch(v=>h(v))})}function xg(n,e,t,r,i=s=>s()){const s=[];for(const a of n)for(const c in a.components){let h=a.components[c];if(!(e!=="beforeRouteEnter"&&!a.instances[c]))if(HS(h)){const p=(h.__vccOpts||h)[e];p&&s.push(ps(p,t,r,a,c,i))}else{let d=h();s.push(()=>d.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${c}" at "${a.path}"`);const _=U4(p)?p.default:p;a.mods[c]=p,a.components[c]=_;const I=(_.__vccOpts||_)[e];return I&&ps(I,t,r,a,c,i)()}))}}return s}function K0(n){const e=kr(Fd),t=kr(sR),r=Be(()=>{const h=_o(n.to);return e.resolve(h)}),i=Be(()=>{const{matched:h}=r.value,{length:d}=h,p=h[d-1],_=t.matched;if(!p||!_.length)return-1;const v=_.findIndex(uu.bind(null,p));if(v>-1)return v;const I=j0(h[d-2]);return d>1&&j0(p)===I&&_[_.length-1].path!==I?_.findIndex(uu.bind(null,h[d-2])):v}),s=Be(()=>i.value>-1&&Mq(t.params,r.value.params)),a=Be(()=>i.value>-1&&i.value===t.matched.length-1&&ZS(t.params,r.value.params));function c(h={}){return Lq(h)?e[_o(n.replace)?"replace":"push"](_o(n.to)).catch(Vc):Promise.resolve()}return{route:r,href:Be(()=>r.value.href),isActive:s,isExactActive:a,navigate:c}}const Vq=Zm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:K0,setup(n,{slots:e}){const t=Fo(K0(n)),{options:r}=kr(Fd),i=Be(()=>({[W0(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[W0(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:Ue("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),Nq=Vq;function Lq(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Mq(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Nr(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function j0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const W0=(n,e,t)=>n!=null?n:e!=null?e:t,Fq=Zm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=kr(Vm),i=Be(()=>n.route||r.value),s=kr(z0,0),a=Be(()=>{let d=_o(s);const{matched:p}=i.value;let _;for(;(_=p[d])&&!_.components;)d++;return d}),c=Be(()=>i.value.matched[a.value]);tf(z0,Be(()=>a.value+1)),tf(Oq,c),tf(Vm,i);const h=To();return $a(()=>[h.value,c.value,n.name],([d,p,_],[v,I,O])=>{p&&(p.instances[_]=d,I&&I!==p&&d&&d===v&&(p.leaveGuards.size||(p.leaveGuards=I.leaveGuards),p.updateGuards.size||(p.updateGuards=I.updateGuards))),d&&p&&(!I||!uu(p,I)||!v)&&(p.enterCallbacks[_]||[]).forEach(M=>M(d))},{flush:"post"}),()=>{const d=i.value,p=n.name,_=c.value,v=_&&_.components[p];if(!v)return H0(t.default,{Component:v,route:d});const I=_.props[p],O=I?I===!0?d.params:typeof I=="function"?I(d):I:null,F=Ue(v,_t({},O,e,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(_.instances[p]=null)},ref:h}));return H0(t.default,{Component:F,route:d})||F}}});function H0(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Uq=Fq;function Bq(n){const e=Sq(n.routes,n),t=n.parseQuery||Dq,r=n.stringifyQuery||q0,i=n.history,s=ac(),a=ac(),c=ac(),h=vO(as);let d=as;Na&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Pg.bind(null,Z=>""+Z),_=Pg.bind(null,X4),v=Pg.bind(null,ol);function I(Z,_e){let de,Ee;return tR(Z)?(de=e.getRecordMatcher(Z),Ee=_e):Ee=Z,e.addRoute(Ee,de)}function O(Z){const _e=e.getRecordMatcher(Z);_e&&e.removeRoute(_e)}function M(){return e.getRoutes().map(Z=>Z.record)}function F(Z){return!!e.getRecordMatcher(Z)}function Q(Z,_e){if(_e=_t({},_e||h.value),typeof Z=="string"){const D=Cg(t,Z,_e.path),j=e.resolve({path:D.path},_e),ie=i.createHref(D.fullPath);return _t(D,j,{params:v(j.params),hash:ol(D.hash),redirectedFrom:void 0,href:ie})}let de;if(Z.path!=null)de=_t({},Z,{path:Cg(t,Z.path,_e.path).path});else{const D=_t({},Z.params);for(const j in D)D[j]==null&&delete D[j];de=_t({},Z,{params:_(D)}),_e.params=_(_e.params)}const Ee=e.resolve(de,_e),Qe=Z.hash||"";Ee.params=p(v(Ee.params));const ut=tq(r,_t({},Z,{hash:Q4(Qe),path:Ee.path})),R=i.createHref(ut);return _t({fullPath:ut,hash:Qe,query:r===q0?kq(Z.query):Z.query||{}},Ee,{redirectedFrom:void 0,href:R})}function z(Z){return typeof Z=="string"?Cg(t,Z,h.value.path):_t({},Z)}function q(Z,_e){if(d!==Z)return cu(8,{from:_e,to:Z})}function W(Z){return P(Z)}function Y(Z){return W(_t(z(Z),{replace:!0}))}function re(Z){const _e=Z.matched[Z.matched.length-1];if(_e&&_e.redirect){const{redirect:de}=_e;let Ee=typeof de=="function"?de(Z):de;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=z(Ee):{path:Ee},Ee.params={}),_t({query:Z.query,hash:Z.hash,params:Ee.path!=null?{}:Z.params},Ee)}}function P(Z,_e){const de=d=Q(Z),Ee=h.value,Qe=Z.state,ut=Z.force,R=Z.replace===!0,D=re(de);if(D)return P(_t(z(D),{state:typeof D=="object"?_t({},Qe,D.state):Qe,force:ut,replace:R}),_e||de);const j=de;j.redirectedFrom=_e;let ie;return!ut&&nq(r,Ee,de)&&(ie=cu(16,{to:j,from:Ee}),Dt(Ee,Ee,!0,!1)),(ie?Promise.resolve(ie):x(j,Ee)).catch(J=>vi(J)?vi(J,2)?J:vn(J):$e(J,j,Ee)).then(J=>{if(J){if(vi(J,2))return P(_t({replace:R},z(J.to),{state:typeof J.to=="object"?_t({},Qe,J.to.state):Qe,force:ut}),_e||j)}else J=V(j,Ee,!0,R,Qe);return N(j,Ee,J),J})}function S(Z,_e){const de=q(Z,_e);return de?Promise.reject(de):Promise.resolve()}function A(Z){const _e=Lr.values().next().value;return _e&&typeof _e.runWithContext=="function"?_e.runWithContext(Z):Z()}function x(Z,_e){let de;const[Ee,Qe,ut]=qq(Z,_e);de=xg(Ee.reverse(),"beforeRouteLeave",Z,_e);for(const D of Ee)D.leaveGuards.forEach(j=>{de.push(ps(j,Z,_e))});const R=S.bind(null,Z,_e);return de.push(R),Zt(de).then(()=>{de=[];for(const D of s.list())de.push(ps(D,Z,_e));return de.push(R),Zt(de)}).then(()=>{de=xg(Qe,"beforeRouteUpdate",Z,_e);for(const D of Qe)D.updateGuards.forEach(j=>{de.push(ps(j,Z,_e))});return de.push(R),Zt(de)}).then(()=>{de=[];for(const D of ut)if(D.beforeEnter)if(Nr(D.beforeEnter))for(const j of D.beforeEnter)de.push(ps(j,Z,_e));else de.push(ps(D.beforeEnter,Z,_e));return de.push(R),Zt(de)}).then(()=>(Z.matched.forEach(D=>D.enterCallbacks={}),de=xg(ut,"beforeRouteEnter",Z,_e,A),de.push(R),Zt(de))).then(()=>{de=[];for(const D of a.list())de.push(ps(D,Z,_e));return de.push(R),Zt(de)}).catch(D=>vi(D,8)?D:Promise.reject(D))}function N(Z,_e,de){c.list().forEach(Ee=>A(()=>Ee(Z,_e,de)))}function V(Z,_e,de,Ee,Qe){const ut=q(Z,_e);if(ut)return ut;const R=_e===as,D=Na?history.state:{};de&&(Ee||R?i.replace(Z.fullPath,_t({scroll:R&&D&&D.scroll},Qe)):i.push(Z.fullPath,Qe)),h.value=Z,Dt(Z,_e,de,R),vn()}let C;function fe(){C||(C=i.listen((Z,_e,de)=>{if(!dn.listening)return;const Ee=Q(Z),Qe=re(Ee);if(Qe){P(_t(Qe,{replace:!0}),Ee).catch(Vc);return}d=Ee;const ut=h.value;Na&&lq(O0(ut.fullPath,de.delta),Md()),x(Ee,ut).catch(R=>vi(R,12)?R:vi(R,2)?(P(R.to,Ee).then(D=>{vi(D,20)&&!de.delta&&de.type===al.pop&&i.go(-1,!1)}).catch(Vc),Promise.reject()):(de.delta&&i.go(-de.delta,!1),$e(R,Ee,ut))).then(R=>{R=R||V(Ee,ut,!1),R&&(de.delta&&!vi(R,8)?i.go(-de.delta,!1):de.type===al.pop&&vi(R,20)&&i.go(-1,!1)),N(Ee,ut,R)}).catch(Vc)}))}let We=ac(),tt=ac(),Ce;function $e(Z,_e,de){vn(Z);const Ee=tt.list();return Ee.length?Ee.forEach(Qe=>Qe(Z,_e,de)):console.error(Z),Promise.reject(Z)}function Dn(){return Ce&&h.value!==as?Promise.resolve():new Promise((Z,_e)=>{We.add([Z,_e])})}function vn(Z){return Ce||(Ce=!Z,fe(),We.list().forEach(([_e,de])=>Z?de(Z):_e()),We.reset()),Z}function Dt(Z,_e,de,Ee){const{scrollBehavior:Qe}=n;if(!Na||!Qe)return Promise.resolve();const ut=!de&&hq(O0(Z.fullPath,0))||(Ee||!de)&&history.state&&history.state.scroll||null;return Jm().then(()=>Qe(Z,_e,ut)).then(R=>R&&cq(R)).catch(R=>$e(R,Z,_e))}const St=Z=>i.go(Z);let Rt;const Lr=new Set,dn={currentRoute:h,listening:!0,addRoute:I,removeRoute:O,clearRoutes:e.clearRoutes,hasRoute:F,getRoutes:M,resolve:Q,options:n,push:W,replace:Y,go:St,back:()=>St(-1),forward:()=>St(1),beforeEach:s.add,beforeResolve:a.add,afterEach:c.add,onError:tt.add,isReady:Dn,install(Z){const _e=this;Z.component("RouterLink",Nq),Z.component("RouterView",Uq),Z.config.globalProperties.$router=_e,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>_o(h)}),Na&&!Rt&&h.value===as&&(Rt=!0,W(i.location).catch(Qe=>{}));const de={};for(const Qe in as)Object.defineProperty(de,Qe,{get:()=>h.value[Qe],enumerable:!0});Z.provide(Fd,_e),Z.provide(sR,DI(de)),Z.provide(Vm,h);const Ee=Z.unmount;Lr.add(Z),Z.unmount=function(){Lr.delete(Z),Lr.size<1&&(d=as,C&&C(),C=null,h.value=as,Rt=!1,Ce=!1),Ee()}}};function Zt(Z){return Z.reduce((_e,de)=>_e.then(()=>A(de)),Promise.resolve())}return dn}function qq(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let a=0;a<s;a++){const c=e.matched[a];c&&(n.matched.find(d=>uu(d,c))?r.push(c):t.push(c));const h=n.matched[a];h&&(e.matched.find(d=>uu(d,h))||i.push(h))}return[t,r,i]}function o6(){return kr(Fd)}const zq=function(){const e=document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),G0={},Kq="/kbalance_quasar_pwa/",vr=function(e,t){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=`${Kq}${r}`,r in G0)return;G0[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":zq,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((c,h)=>{a.addEventListener("load",c),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},jq=[{path:"/",component:()=>vr(()=>import("./MainLayout.819c3f11.js"),["assets/MainLayout.819c3f11.js","assets/scroll.5253006b.js","assets/QResizeObserver.a072f4bc.js","assets/plugin-vue_export-helper.21dcd24c.js"]),children:[{path:"/",name:"IndexPage",component:()=>vr(()=>import("./IndexPage.21b086b9.js"),["assets/IndexPage.21b086b9.js","assets/IndexPage.2bf49d51.css","assets/QToolbarTitle.61279f61.js","assets/QMenu.f04d0080.js","assets/QPage.d652ad39.js","assets/selection.96f16a7e.js","assets/focusout.634a1882.js","assets/QCard.5385d1c1.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/scroll.5253006b.js","assets/PersonItem.6bcac47e.js","assets/utils.ca14db4f.js","assets/QBanner.1bf54407.js","assets/QSlideItem.e86ba9b3.js","assets/use-render-cache.770e5fe8.js","assets/QImg.2b11320f.js","assets/ShareString.c4ce4240.js","assets/QCardActions.0a2b4de7.js","assets/ReceiveString.45cb6e1e.js","assets/browser.445c5f4b.js","assets/plugin-vue_export-helper.21dcd24c.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/newSheetWizard",name:"NewSheetWizardPage",component:()=>vr(()=>import("./NewSheetWizardPage.b6ad5799.js"),["assets/NewSheetWizardPage.b6ad5799.js","assets/QToolbarTitle.61279f61.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/QCard.5385d1c1.js","assets/QPage.d652ad39.js","assets/QForm.ea2a3f65.js","assets/PeopleList.8ffa86d7.js","assets/QMenu.f04d0080.js","assets/selection.96f16a7e.js","assets/focusout.634a1882.js","assets/scroll.5253006b.js","assets/QSlideItem.e86ba9b3.js","assets/use-render-cache.770e5fe8.js","assets/PersonItem.6bcac47e.js","assets/utils.ca14db4f.js","assets/ReceiveString.45cb6e1e.js","assets/QCardActions.0a2b4de7.js","assets/PeopleDropdown.d99b684f.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/sheet",name:"SheetPage",component:()=>vr(()=>import("./SheetPage.79cec582.js"),["assets/SheetPage.79cec582.js","assets/QSpace.ca7e65a0.js","assets/QMenu.f04d0080.js","assets/QPage.d652ad39.js","assets/selection.96f16a7e.js","assets/focusout.634a1882.js","assets/QCard.5385d1c1.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/scroll.5253006b.js","assets/PersonItem.6bcac47e.js","assets/utils.ca14db4f.js","assets/PeopleDropdown.d99b684f.js","assets/CurrencyDropdown.6f0e99ce.js","assets/TransactionList.6c301c4f.js","assets/QSlideItem.e86ba9b3.js","assets/use-render-cache.770e5fe8.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/convert",name:"ConvertPage",component:()=>vr(()=>import("./ConvertPage.3e0cc203.js"),["assets/ConvertPage.3e0cc203.js","assets/QSpace.ca7e65a0.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/QCard.5385d1c1.js","assets/QPage.d652ad39.js","assets/PeopleDropdown.d99b684f.js","assets/QMenu.f04d0080.js","assets/selection.96f16a7e.js","assets/focusout.634a1882.js","assets/scroll.5253006b.js","assets/PersonItem.6bcac47e.js","assets/utils.ca14db4f.js","assets/CurrencyDropdown.6f0e99ce.js","assets/TransactionList.6c301c4f.js","assets/QSlideItem.e86ba9b3.js","assets/use-render-cache.770e5fe8.js","assets/useExchangeRates.e84d7e0f.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/convertTest",name:"ConvertTestPage",component:()=>vr(()=>import("./ConvertTestPage.9f7ebd31.js"),["assets/ConvertTestPage.9f7ebd31.js","assets/QToolbarTitle.61279f61.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/QCard.5385d1c1.js","assets/QPage.d652ad39.js","assets/CurrencyInput.038a321c.js","assets/CurrencyDropdown.6f0e99ce.js","assets/QMenu.f04d0080.js","assets/selection.96f16a7e.js","assets/focusout.634a1882.js","assets/scroll.5253006b.js","assets/useExchangeRates.e84d7e0f.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!1}},{path:"/sheet/people",name:"PeoplePage",component:()=>vr(()=>import("./PeoplePage.b12cd930.js"),["assets/PeoplePage.b12cd930.js","assets/QSpace.ca7e65a0.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/QPage.d652ad39.js","assets/PeopleList.8ffa86d7.js","assets/QMenu.f04d0080.js","assets/selection.96f16a7e.js","assets/focusout.634a1882.js","assets/QCard.5385d1c1.js","assets/scroll.5253006b.js","assets/QSlideItem.e86ba9b3.js","assets/use-render-cache.770e5fe8.js","assets/PersonItem.6bcac47e.js","assets/utils.ca14db4f.js","assets/ReceiveString.45cb6e1e.js","assets/QCardActions.0a2b4de7.js","assets/PeopleDropdown.d99b684f.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/transaction",name:"TransactionPage",component:()=>vr(()=>import("./TransactionPage.9b87f0e3.js"),["assets/TransactionPage.9b87f0e3.js","assets/QSpace.ca7e65a0.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/QCard.5385d1c1.js","assets/QPage.d652ad39.js","assets/QMenu.f04d0080.js","assets/selection.96f16a7e.js","assets/focusout.634a1882.js","assets/scroll.5253006b.js","assets/PersonItem.6bcac47e.js","assets/utils.ca14db4f.js","assets/PeopleDropdown.d99b684f.js","assets/CurrencyDropdown.6f0e99ce.js","assets/CurrencyInput.038a321c.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/login",name:"LoginPage",component:()=>vr(()=>import("./LoginPage.1fe06ffd.js"),["assets/LoginPage.1fe06ffd.js","assets/QCard.5385d1c1.js","assets/QPage.d652ad39.js","assets/QBanner.1bf54407.js","assets/QCardActions.0a2b4de7.js","assets/QForm.ea2a3f65.js"]),meta:{requiresFirebase:!0}},{path:"/settings",name:"SettingsPage",component:()=>vr(()=>import("./SettingsPage.b691d4e1.js"),["assets/SettingsPage.b691d4e1.js","assets/QSpace.ca7e65a0.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/QCard.5385d1c1.js","assets/QPage.d652ad39.js","assets/QCardActions.0a2b4de7.js","assets/ShareString.c4ce4240.js","assets/ReceiveString.45cb6e1e.js","assets/focusout.634a1882.js","assets/scroll.5253006b.js","assets/browser.445c5f4b.js"])},{path:"/landing",name:"LandingPage",component:()=>vr(()=>import("./LandingPage.70a30d81.js"),["assets/LandingPage.70a30d81.js","assets/QSpace.ca7e65a0.js","assets/QHeader.152f359b.js","assets/QResizeObserver.a072f4bc.js","assets/QImg.2b11320f.js","assets/use-render-cache.770e5fe8.js","assets/selection.96f16a7e.js","assets/QPage.d652ad39.js","assets/utils.ca14db4f.js","assets/browser.445c5f4b.js"])}]},{path:"/:catchAll(.*)*",component:()=>vr(()=>import("./ErrorNotFound.9ff45fde.js"),[])}];var Dg=()=>{const e=Bq({scrollBehavior:()=>({left:0,top:0}),routes:jq,history:mq("/kbalance_quasar_pwa/")}),t=zS();let r=!0;return e.beforeEach(async(i,s,a)=>{r&&(await t.init(),r=!1),i.matched.some(c=>c.meta.requiresFirebase)&&!t.firebaseReady?a({name:"SettingsPage"}):i.matched.some(c=>c.meta.requiresAuth)&&!t.isReady()?a({name:"LoginPage"}):i.matched.some(c=>c.meta.requiresSheet)&&!t.isSheet?a({name:"IndexPage"}):a()}),e};async function Wq(n,e){const t=n(P4);t.use(GN,e);const r=typeof Rg=="function"?await Rg({}):Rg;t.use(r);const i=Uo(typeof Dg=="function"?await Dg({store:r}):Dg);return r.use(({store:s})=>{s.router=i}),{app:t,store:r,router:i}}const Nm={xs:18,sm:24,md:32,lg:38,xl:46},ay={size:String};function uy(n,e=Nm){return Be(()=>n.size!==void 0?{fontSize:n.size in e?`${e[n.size]}px`:n.size}:null)}function Hq(n,e){return n!==void 0&&n()||e}function a6(n,e){if(n!==void 0){const t=n();if(t!=null)return t.slice()}return e}function yc(n,e){return n!==void 0?e.concat(n()):e}function Gq(n,e){return n===void 0?e:e!==void 0?e.concat(n()):n()}function u6(n,e,t,r,i,s){e.key=r+i;const a=Ue(n,e,t);return i===!0?BI(a,s()):a}const Q0="0 0 24 24",J0=n=>n,kg=n=>`ionicons ${n}`,oR={"mdi-":n=>`mdi ${n}`,"icon-":J0,"bt-":n=>`bt ${n}`,"eva-":n=>`eva ${n}`,"ion-md":kg,"ion-ios":kg,"ion-logo":kg,"iconfont ":J0,"ti-":n=>`themify-icon ${n}`,"bi-":n=>`bootstrap-icons ${n}`},aR={o_:"-outlined",r_:"-round",s_:"-sharp"},uR={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},Qq=new RegExp("^("+Object.keys(oR).join("|")+")"),Jq=new RegExp("^("+Object.keys(aR).join("|")+")"),Y0=new RegExp("^("+Object.keys(uR).join("|")+")"),Yq=/^[Mm]\s?[-+]?\.?\d/,Xq=/^img:/,Zq=/^svguse:/,e9=/^ion-/,t9=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var ed=dl({name:"QIcon",props:{...ay,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(n,{slots:e}){const{proxy:{$q:t}}=lu(),r=uy(n),i=Be(()=>"q-icon"+(n.left===!0?" on-left":"")+(n.right===!0?" on-right":"")+(n.color!==void 0?` text-${n.color}`:"")),s=Be(()=>{let a,c=n.name;if(c==="none"||!c)return{none:!0};if(t.iconMapFn!==null){const p=t.iconMapFn(c);if(p!==void 0)if(p.icon!==void 0){if(c=p.icon,c==="none"||!c)return{none:!0}}else return{cls:p.cls,content:p.content!==void 0?p.content:" "}}if(Yq.test(c)===!0){const[p,_=Q0]=c.split("|");return{svg:!0,viewBox:_,nodes:p.split("&&").map(v=>{const[I,O,M]=v.split("@@");return Ue("path",{style:O,d:I,transform:M})})}}if(Xq.test(c)===!0)return{img:!0,src:c.substring(4)};if(Zq.test(c)===!0){const[p,_=Q0]=c.split("|");return{svguse:!0,src:p.substring(7),viewBox:_}}let h=" ";const d=c.match(Qq);if(d!==null)a=oR[d[1]](c);else if(t9.test(c)===!0)a=c;else if(e9.test(c)===!0)a=`ionicons ion-${t.platform.is.ios===!0?"ios":"md"}${c.substring(3)}`;else if(Y0.test(c)===!0){a="notranslate material-symbols";const p=c.match(Y0);p!==null&&(c=c.substring(6),a+=uR[p[1]]),h=c}else{a="notranslate material-icons";const p=c.match(Jq);p!==null&&(c=c.substring(2),a+=aR[p[1]]),h=c}return{cls:a,content:h}});return()=>{const a={class:i.value,style:r.value,"aria-hidden":"true",role:"presentation"};return s.value.none===!0?Ue(n.tag,a,Hq(e.default)):s.value.img===!0?Ue(n.tag,a,yc(e.default,[Ue("img",{src:s.value.src})])):s.value.svg===!0?Ue(n.tag,a,yc(e.default,[Ue("svg",{viewBox:s.value.viewBox||"0 0 24 24"},s.value.nodes)])):s.value.svguse===!0?Ue(n.tag,a,yc(e.default,[Ue("svg",{viewBox:s.value.viewBox},[Ue("use",{"xlink:href":s.value.src})])])):(s.value.cls!==void 0&&(a.class+=" "+s.value.cls),Ue(n.tag,a,yc(e.default,[s.value.content])))}}}),n9=dl({name:"QAvatar",props:{...ay,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(n,{slots:e}){const t=uy(n),r=Be(()=>"q-avatar"+(n.color?` bg-${n.color}`:"")+(n.textColor?` text-${n.textColor} q-chip--colored`:"")+(n.square===!0?" q-avatar--square":n.rounded===!0?" rounded-borders":"")),i=Be(()=>n.fontSize?{fontSize:n.fontSize}:null);return()=>{const s=n.icon!==void 0?[Ue(ed,{name:n.icon})]:void 0;return Ue("div",{class:r.value,style:t.value},[Ue("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},Gq(e.default,s))])}}});const r9={size:{type:[String,Number],default:"1em"},color:String};function i9(n){return{cSize:Be(()=>n.size in Nm?`${Nm[n.size]}px`:n.size),classes:Be(()=>"q-spinner"+(n.color?` text-${n.color}`:""))}}var cR=dl({name:"QSpinner",props:{...r9,thickness:{type:Number,default:5}},setup(n){const{cSize:e,classes:t}=i9(n);return()=>Ue("svg",{class:t.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Ue("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":n.thickness,"stroke-miterlimit":"10"})])}});function c6(n){return n===window?window.innerHeight:n.getBoundingClientRect().height}function s9(n,e){const t=n.style;for(const r in e)t[r]=e[r]}function l6(n){if(n==null)return;if(typeof n=="string")try{return document.querySelector(n)||void 0}catch{return}const e=_o(n);if(e)return e.$el||e}function h6(n,e){if(n==null||n.contains(e)===!0)return!0;for(let t=n.nextElementSibling;t!==null;t=t.nextElementSibling)if(t.contains(e))return!0;return!1}function o9(n,e=250){let t=!1,r;return function(){return t===!1&&(t=!0,setTimeout(()=>{t=!1},e),r=n.apply(this,arguments)),r}}function X0(n,e,t,r){t.modifiers.stop===!0&&DT(n);const i=t.modifiers.color;let s=t.modifiers.center;s=s===!0||r===!0;const a=document.createElement("span"),c=document.createElement("span"),h=SN(n),{left:d,top:p,width:_,height:v}=e.getBoundingClientRect(),I=Math.sqrt(_*_+v*v),O=I/2,M=`${(_-I)/2}px`,F=s?M:`${h.left-d-O}px`,Q=`${(v-I)/2}px`,z=s?Q:`${h.top-p-O}px`;c.className="q-ripple__inner",s9(c,{height:`${I}px`,width:`${I}px`,transform:`translate3d(${F},${z},0) scale3d(.2,.2,1)`,opacity:0}),a.className=`q-ripple${i?" text-"+i:""}`,a.setAttribute("dir","ltr"),a.appendChild(c),e.appendChild(a);const q=()=>{a.remove(),clearTimeout(W)};t.abort.push(q);let W=setTimeout(()=>{c.classList.add("q-ripple__inner--enter"),c.style.transform=`translate3d(${M},${Q},0) scale3d(1,1,1)`,c.style.opacity=.2,W=setTimeout(()=>{c.classList.remove("q-ripple__inner--enter"),c.classList.add("q-ripple__inner--leave"),c.style.opacity=0,W=setTimeout(()=>{a.remove(),t.abort.splice(t.abort.indexOf(q),1)},275)},250)},50)}function Z0(n,{modifiers:e,value:t,arg:r}){const i=Object.assign({},n.cfg.ripple,e,t);n.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||r,keyCodes:[].concat(i.keyCodes||13)}}var a9=AN({name:"ripple",beforeMount(n,e){const t=e.instance.$.appContext.config.globalProperties.$q.config||{};if(t.ripple===!1)return;const r={cfg:t,enabled:e.value!==!1,modifiers:{},abort:[],start(i){r.enabled===!0&&i.qSkipRipple!==!0&&i.type===(r.modifiers.early===!0?"pointerdown":"click")&&X0(i,n,r,i.qKeyEvent===!0)},keystart:o9(i=>{r.enabled===!0&&i.qSkipRipple!==!0&&Qg(i,r.modifiers.keyCodes)===!0&&i.type===`key${r.modifiers.early===!0?"down":"up"}`&&X0(i,n,r,!0)},300)};Z0(r,e),n.__qripple=r,RN(r,"main",[[n,"pointerdown","start","passive"],[n,"click","start","passive"],[n,"keydown","keystart","passive"],[n,"keyup","keystart","passive"]])},updated(n,e){if(e.oldValue!==e.value){const t=n.__qripple;t!==void 0&&(t.enabled=e.value!==!1,t.enabled===!0&&Object(e.value)===e.value&&Z0(t,e))}},beforeUnmount(n){const e=n.__qripple;e!==void 0&&(e.abort.forEach(t=>{t()}),PN(e,"main"),delete n._qripple)}});const lR={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},u9=Object.keys(lR),c9={align:{type:String,validator:n=>u9.includes(n)}};function l9(n){return Be(()=>{const e=n.align===void 0?n.vertical===!0?"stretch":"left":n.align;return`${n.vertical===!0?"items":"justify"}-${lR[e]}`})}function f6(n){if(Object(n.$parent)===n.$parent)return n.$parent;let{parent:e}=n.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function hR(n,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(t=>{hR(n,t)}):n.add(e)}function d6(n){const e=new Set;return n.forEach(t=>{hR(e,t)}),Array.from(e)}function h9(n){return n.appContext.config.globalProperties.$router!==void 0}function p6(n){return n.isUnmounted===!0||n.isDeactivated===!0}function eI(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}function tI(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function f9(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(Array.isArray(i)===!1||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function nI(n,e){return Array.isArray(e)===!0?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function d9(n,e){return Array.isArray(n)===!0?nI(n,e):Array.isArray(e)===!0?nI(e,n):n===e}function p9(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(d9(n[t],e[t])===!1)return!1;return!0}const fR={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},g6={...fR,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function g9({fallbackTag:n,useDisableForRouterLinkProps:e=!0}={}){const t=lu(),{props:r,proxy:i,emit:s}=t,a=h9(t),c=Be(()=>r.disable!==!0&&r.href!==void 0),h=Be(e===!0?()=>a===!0&&r.disable!==!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>a===!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),d=Be(()=>h.value===!0?z(r.to):null),p=Be(()=>d.value!==null),_=Be(()=>c.value===!0||p.value===!0),v=Be(()=>r.type==="a"||_.value===!0?"a":r.tag||n||"div"),I=Be(()=>c.value===!0?{href:r.href,target:r.target}:p.value===!0?{href:d.value.href,target:r.target}:{}),O=Be(()=>{if(p.value===!1)return-1;const{matched:Y}=d.value,{length:re}=Y,P=Y[re-1];if(P===void 0)return-1;const S=i.$route.matched;if(S.length===0)return-1;const A=S.findIndex(tI.bind(null,P));if(A!==-1)return A;const x=eI(Y[re-2]);return re>1&&eI(P)===x&&S[S.length-1].path!==x?S.findIndex(tI.bind(null,Y[re-2])):A}),M=Be(()=>p.value===!0&&O.value!==-1&&f9(i.$route.params,d.value.params)),F=Be(()=>M.value===!0&&O.value===i.$route.matched.length-1&&p9(i.$route.params,d.value.params)),Q=Be(()=>p.value===!0?F.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":M.value===!0?` ${r.activeClass}`:"":"");function z(Y){try{return i.$router.resolve(Y)}catch{}return null}function q(Y,{returnRouterError:re,to:P=r.to,replace:S=r.replace}={}){if(r.disable===!0)return Y.preventDefault(),Promise.resolve(!1);if(Y.metaKey||Y.altKey||Y.ctrlKey||Y.shiftKey||Y.button!==void 0&&Y.button!==0||r.target==="_blank")return Promise.resolve(!1);Y.preventDefault();const A=i.$router[S===!0?"replace":"push"](P);return re===!0?A:A.then(()=>{}).catch(()=>{})}function W(Y){if(p.value===!0){const re=P=>q(Y,P);s("click",Y,re),Y.defaultPrevented!==!0&&re()}else s("click",Y)}return{hasRouterLink:p,hasHrefLink:c,hasLink:_,linkTag:v,resolvedLink:d,linkIsActive:M,linkIsExactActive:F,linkClass:Q,linkAttrs:I,getLink:z,navigateToRouterLink:q,navigateOnClick:W}}const rI={none:0,xs:4,sm:8,md:16,lg:24,xl:32},m9={xs:8,sm:10,md:14,lg:20,xl:24},_9=["button","submit","reset"],y9=/[^\s]\/[^\s]/,v9=["flat","outline","push","unelevated"];function dR(n,e){return n.flat===!0?"flat":n.outline===!0?"outline":n.push===!0?"push":n.unelevated===!0?"unelevated":e}function m6(n){const e=dR(n);return e!==void 0?{[e]:!0}:{}}const w9={...ay,...fR,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...v9.reduce((n,e)=>(n[e]=Boolean)&&n,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...c9.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},E9={...w9,round:Boolean};function I9(n){const e=uy(n,m9),t=l9(n),{hasRouterLink:r,hasLink:i,linkTag:s,linkAttrs:a,navigateOnClick:c}=g9({fallbackTag:"button"}),h=Be(()=>{const F=n.fab===!1&&n.fabMini===!1?e.value:{};return n.padding!==void 0?Object.assign({},F,{padding:n.padding.split(/\s+/).map(Q=>Q in rI?rI[Q]+"px":Q).join(" "),minWidth:"0",minHeight:"0"}):F}),d=Be(()=>n.rounded===!0||n.fab===!0||n.fabMini===!0),p=Be(()=>n.disable!==!0&&n.loading!==!0),_=Be(()=>p.value===!0?n.tabindex||0:-1),v=Be(()=>dR(n,"standard")),I=Be(()=>{const F={tabindex:_.value};return i.value===!0?Object.assign(F,a.value):_9.includes(n.type)===!0&&(F.type=n.type),s.value==="a"?(n.disable===!0?F["aria-disabled"]="true":F.href===void 0&&(F.role="button"),r.value!==!0&&y9.test(n.type)===!0&&(F.type=n.type)):n.disable===!0&&(F.disabled="",F["aria-disabled"]="true"),n.loading===!0&&n.percentage!==void 0&&Object.assign(F,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.percentage}),F}),O=Be(()=>{let F;n.color!==void 0?n.flat===!0||n.outline===!0?F=`text-${n.textColor||n.color}`:F=`bg-${n.color} text-${n.textColor||"white"}`:n.textColor&&(F=`text-${n.textColor}`);const Q=n.round===!0?"round":`rectangle${d.value===!0?" q-btn--rounded":n.square===!0?" q-btn--square":""}`;return`q-btn--${v.value} q-btn--${Q}`+(F!==void 0?" "+F:"")+(p.value===!0?" q-btn--actionable q-focusable q-hoverable":n.disable===!0?" disabled":"")+(n.fab===!0?" q-btn--fab":n.fabMini===!0?" q-btn--fab-mini":"")+(n.noCaps===!0?" q-btn--no-uppercase":"")+(n.dense===!0?" q-btn--dense":"")+(n.stretch===!0?" no-border-radius self-stretch":"")+(n.glossy===!0?" glossy":"")+(n.square?" q-btn--square":"")}),M=Be(()=>t.value+(n.stack===!0?" column":" row")+(n.noWrap===!0?" no-wrap text-no-wrap":"")+(n.loading===!0?" q-btn__content--hidden":""));return{classes:O,style:h,innerClasses:M,attributes:I,hasLink:i,linkTag:s,navigateOnClick:c,isActionable:p}}const{passiveCapture:wr}=Ao;let Sa=null,Ra=null,Pa=null;var T9=dl({name:"QBtn",props:{...E9,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(n,{slots:e,emit:t}){const{proxy:r}=lu(),{classes:i,style:s,innerClasses:a,attributes:c,hasLink:h,linkTag:d,navigateOnClick:p,isActionable:_}=I9(n),v=To(null),I=To(null);let O=null,M,F=null;const Q=Be(()=>n.label!==void 0&&n.label!==null&&n.label!==""),z=Be(()=>n.disable===!0||n.ripple===!1?!1:{keyCodes:h.value===!0?[13,32]:[13],...n.ripple===!0?{}:n.ripple}),q=Be(()=>({center:n.round})),W=Be(()=>{const fe=Math.max(0,Math.min(100,n.percentage));return fe>0?{transition:"transform 0.6s",transform:`translateX(${fe-100}%)`}:{}}),Y=Be(()=>{if(n.loading===!0)return{onMousedown:C,onTouchstart:C,onClick:C,onKeydown:C,onKeyup:C};if(_.value===!0){const fe={onClick:P,onKeydown:S,onMousedown:x};if(r.$q.platform.has.touch===!0){const We=n.onTouchstart!==void 0?"":"Passive";fe[`onTouchstart${We}`]=A}return fe}return{onClick:wa}}),re=Be(()=>({ref:v,class:"q-btn q-btn-item non-selectable no-outline "+i.value,style:s.value,...c.value,...Y.value}));function P(fe){if(v.value!==null){if(fe!==void 0){if(fe.defaultPrevented===!0)return;const We=document.activeElement;if(n.type==="submit"&&We!==document.body&&v.value.contains(We)===!1&&We.contains(v.value)===!1){v.value.focus();const tt=()=>{document.removeEventListener("keydown",wa,!0),document.removeEventListener("keyup",tt,wr),v.value!==null&&v.value.removeEventListener("blur",tt,wr)};document.addEventListener("keydown",wa,!0),document.addEventListener("keyup",tt,wr),v.value.addEventListener("blur",tt,wr)}}p(fe)}}function S(fe){v.value!==null&&(t("keydown",fe),Qg(fe,[13,32])===!0&&Ra!==v.value&&(Ra!==null&&V(),fe.defaultPrevented!==!0&&(v.value.focus(),Ra=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("keyup",N,!0),v.value.addEventListener("blur",N,wr)),wa(fe)))}function A(fe){v.value!==null&&(t("touchstart",fe),fe.defaultPrevented!==!0&&(Sa!==v.value&&(Sa!==null&&V(),Sa=v.value,O=fe.target,O.addEventListener("touchcancel",N,wr),O.addEventListener("touchend",N,wr)),M=!0,F!==null&&clearTimeout(F),F=setTimeout(()=>{F=null,M=!1},200)))}function x(fe){v.value!==null&&(fe.qSkipRipple=M===!0,t("mousedown",fe),fe.defaultPrevented!==!0&&Pa!==v.value&&(Pa!==null&&V(),Pa=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("mouseup",N,wr)))}function N(fe){if(v.value!==null&&!(fe!==void 0&&fe.type==="blur"&&document.activeElement===v.value)){if(fe!==void 0&&fe.type==="keyup"){if(Ra===v.value&&Qg(fe,[13,32])===!0){const We=new MouseEvent("click",fe);We.qKeyEvent=!0,fe.defaultPrevented===!0&&Gg(We),fe.cancelBubble===!0&&DT(We),v.value.dispatchEvent(We),wa(fe),fe.qKeyEvent=!0}t("keyup",fe)}V()}}function V(fe){const We=I.value;fe!==!0&&(Sa===v.value||Pa===v.value)&&We!==null&&We!==document.activeElement&&(We.setAttribute("tabindex",-1),We.focus()),Sa===v.value&&(O!==null&&(O.removeEventListener("touchcancel",N,wr),O.removeEventListener("touchend",N,wr)),Sa=O=null),Pa===v.value&&(document.removeEventListener("mouseup",N,wr),Pa=null),Ra===v.value&&(document.removeEventListener("keyup",N,!0),v.value!==null&&v.value.removeEventListener("blur",N,wr),Ra=null),v.value!==null&&v.value.classList.remove("q-btn--active")}function C(fe){wa(fe),fe.qSkipRipple=!0}return hl(()=>{V(!0)}),Object.assign(r,{click:fe=>{_.value===!0&&P(fe)}}),()=>{let fe=[];n.icon!==void 0&&fe.push(Ue(ed,{name:n.icon,left:n.stack!==!0&&Q.value===!0,role:"img"})),Q.value===!0&&fe.push(Ue("span",{class:"block"},[n.label])),fe=yc(e.default,fe),n.iconRight!==void 0&&n.round===!1&&fe.push(Ue(ed,{name:n.iconRight,right:n.stack!==!0&&Q.value===!0,role:"img"}));const We=[Ue("span",{class:"q-focus-helper",ref:I})];return n.loading===!0&&n.percentage!==void 0&&We.push(Ue("span",{class:"q-btn__progress absolute-full overflow-hidden"+(n.darkPercentage===!0?" q-btn__progress--dark":"")},[Ue("span",{class:"q-btn__progress-indicator fit block",style:W.value})])),We.push(Ue("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+a.value},fe)),n.loading!==null&&We.push(Ue(KV,{name:"q-transition--fade"},()=>n.loading===!0?[Ue("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Ue(cR)])]:null)),BI(Ue(d.value,re.value,We),[[a9,z.value,void 0,q.value]])}}});let b9=1,A9=document.body;function S9(n,e){const t=document.createElement("div");if(t.id=e!==void 0?`q-portal--${e}--${b9++}`:n,Of.globalNodes!==void 0){const r=Of.globalNodes.class;r!==void 0&&(t.className=r)}return A9.appendChild(t),t}function _6(n){n.remove()}let R9=0;const yf={},vf={},Cr={},pR={},P9=/^\s*$/,gR=[],C9=[void 0,null,!0,!1,""],cy=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],x9=["top-left","top-right","bottom-left","bottom-right"],La={positive:{icon:n=>n.iconSet.type.positive,color:"positive"},negative:{icon:n=>n.iconSet.type.negative,color:"negative"},warning:{icon:n=>n.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:n=>n.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function mR(n,e,t){if(!n)return uc("parameter required");let r;const i={textColor:"white"};if(n.ignoreDefaults!==!0&&Object.assign(i,yf),zc(n)===!1&&(i.type&&Object.assign(i,La[i.type]),n={message:n}),Object.assign(i,La[n.type||i.type],n),typeof i.icon=="function"&&(i.icon=i.icon(e)),i.spinner?(i.spinner===!0&&(i.spinner=cR),i.spinner=Uo(i.spinner)):i.spinner=!1,i.meta={hasMedia:Boolean(i.spinner!==!1||i.icon||i.avatar),hasText:iI(i.message)||iI(i.caption)},i.position){if(cy.includes(i.position)===!1)return uc("wrong position",n)}else i.position="bottom";if(C9.includes(i.timeout)===!0)i.timeout=5e3;else{const h=Number(i.timeout);if(isNaN(h)||h<0)return uc("wrong timeout",n);i.timeout=Number.isFinite(h)?h:0}i.timeout===0?i.progress=!1:i.progress===!0&&(i.meta.progressClass="q-notification__progress"+(i.progressClass?` ${i.progressClass}`:""),i.meta.progressStyle={animationDuration:`${i.timeout+1e3}ms`});const s=(Array.isArray(n.actions)===!0?n.actions:[]).concat(n.ignoreDefaults!==!0&&Array.isArray(yf.actions)===!0?yf.actions:[]).concat(La[n.type]!==void 0&&Array.isArray(La[n.type].actions)===!0?La[n.type].actions:[]),{closeBtn:a}=i;if(a&&s.push({label:typeof a=="string"?a:e.lang.label.close}),i.actions=s.map(({handler:h,noDismiss:d,...p})=>({flat:!0,...p,onClick:typeof h=="function"?()=>{h(),d!==!0&&c()}:()=>{c()}})),i.multiLine===void 0&&(i.multiLine=i.actions.length>1),Object.assign(i.meta,{class:`q-notification row items-stretch q-notification--${i.multiLine===!0?"multi-line":"standard"}`+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:"")+(i.classes!==void 0?` ${i.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(i.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(i.multiLine===!0?"":" col"),leftClass:i.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...i.attrs}}),i.group===!1?(i.group=void 0,i.meta.group=void 0):((i.group===void 0||i.group===!0)&&(i.group=[i.message,i.caption,i.multiline].concat(i.actions.map(h=>`${h.label}*${h.icon}`)).join("|")),i.meta.group=i.group+"|"+i.position),i.actions.length===0?i.actions=void 0:i.meta.actionsClass="q-notification__actions row items-center "+(i.multiLine===!0?"justify-end":"col-auto")+(i.meta.hasMedia===!0?" q-notification__actions--with-media":""),t!==void 0){t.notif.meta.timer&&(clearTimeout(t.notif.meta.timer),t.notif.meta.timer=void 0),i.meta.uid=t.notif.meta.uid;const h=Cr[i.position].value.indexOf(t.notif);Cr[i.position].value[h]=i}else{const h=vf[i.meta.group];if(h===void 0){if(i.meta.uid=R9++,i.meta.badge=1,["left","right","center"].indexOf(i.position)!==-1)Cr[i.position].value.splice(Math.floor(Cr[i.position].value.length/2),0,i);else{const d=i.position.indexOf("top")!==-1?"unshift":"push";Cr[i.position].value[d](i)}i.group!==void 0&&(vf[i.meta.group]=i)}else{if(h.meta.timer&&(clearTimeout(h.meta.timer),h.meta.timer=void 0),i.badgePosition!==void 0){if(x9.includes(i.badgePosition)===!1)return uc("wrong badgePosition",n)}else i.badgePosition=`top-${i.position.indexOf("left")!==-1?"right":"left"}`;i.meta.uid=h.meta.uid,i.meta.badge=h.meta.badge+1,i.meta.badgeClass=`q-notification__badge q-notification__badge--${i.badgePosition}`+(i.badgeColor!==void 0?` bg-${i.badgeColor}`:"")+(i.badgeTextColor!==void 0?` text-${i.badgeTextColor}`:"")+(i.badgeClass?` ${i.badgeClass}`:"");const d=Cr[i.position].value.indexOf(h);Cr[i.position].value[d]=vf[i.meta.group]=i}}const c=()=>{D9(i),r=void 0};if(i.timeout>0&&(i.meta.timer=setTimeout(()=>{i.meta.timer=void 0,c()},i.timeout+1e3)),i.group!==void 0)return h=>{h!==void 0?uc("trying to update a grouped one which is forbidden",n):c()};if(r={dismiss:c,config:n,notif:i},t!==void 0){Object.assign(t,r);return}return h=>{if(r!==void 0)if(h===void 0)r.dismiss();else{const d=Object.assign({},r.config,h,{group:!1,position:i.position});mR(d,e,r)}}}function D9(n){n.meta.timer&&(clearTimeout(n.meta.timer),n.meta.timer=void 0);const e=Cr[n.position].value.indexOf(n);if(e!==-1){n.group!==void 0&&delete vf[n.meta.group];const t=gR[""+n.meta.uid];if(t){const{width:r,height:i}=getComputedStyle(t);t.style.left=`${t.offsetLeft}px`,t.style.width=r,t.style.height=i}Cr[n.position].value.splice(e,1),typeof n.onDismiss=="function"&&n.onDismiss()}}function iI(n){return n!=null&&P9.test(n)!==!0}function uc(n,e){return console.error(`Notify: ${n}`,e),!1}function k9(){return dl({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Ue("div",{class:"q-notifications"},cy.map(n=>Ue(lN,{key:n,class:pR[n],tag:"div",name:`q-notification--${n}`},()=>Cr[n].value.map(e=>{const t=e.meta,r=[];if(t.hasMedia===!0&&(e.spinner!==!1?r.push(Ue(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+t.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(Ue(ed,{class:"q-notification__icon q-notification__icon--"+t.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(Ue(n9,{class:"q-notification__avatar q-notification__avatar--"+t.leftClass},()=>Ue("img",{src:e.avatar,"aria-hidden":"true"})))),t.hasText===!0){let s;const a={class:"q-notification__message col"};if(e.html===!0)a.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const c=[e.message];s=e.caption?[Ue("div",c),Ue("div",{class:"q-notification__caption"},[e.caption])]:c}r.push(Ue("div",a,s))}const i=[Ue("div",{class:t.contentClass},r)];return e.progress===!0&&i.push(Ue("div",{key:`${t.uid}|p|${t.badge}`,class:t.progressClass,style:t.progressStyle})),e.actions!==void 0&&i.push(Ue("div",{class:t.actionsClass},e.actions.map(s=>Ue(T9,s)))),t.badge>1&&i.push(Ue("div",{key:`${t.uid}|${t.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[t.badge])),Ue("div",{ref:s=>{gR[""+t.uid]=s},key:t.uid,class:t.class,...t.attrs},[Ue("div",{class:t.wrapperClass},i)])}))))}})}var O9={setDefaults(n){zc(n)===!0&&Object.assign(yf,n)},registerType(n,e){zc(e)===!0&&(La[n]=e)},install({$q:n,parentApp:e}){if(n.notify=this.create=t=>mR(t,n),n.notify.setDefaults=this.setDefaults,n.notify.registerType=this.registerType,n.config.notify!==void 0&&this.setDefaults(n.config.notify),this.__installed!==!0){cy.forEach(r=>{Cr[r]=To([]);const i=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",s=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",a=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${s}`;pR[r]=`q-notifications__list q-notifications__list--${i} fixed column no-wrap ${a}`});const t=S9("q-notify");jN(k9(),e).mount(t)}}},V9={config:{},plugins:{Notify:O9}},N9=function(){return Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},Lm;typeof window!="undefined"&&(typeof Promise!="undefined"?Lm=new Promise(function(n){return window.addEventListener("load",n)}):Lm={then:function(n){return window.addEventListener("load",n)}});function L9(n,e){e===void 0&&(e={});var t=e.registrationOptions;t===void 0&&(t={}),delete e.registrationOptions;var r=function(i){for(var s=[],a=arguments.length-1;a-- >0;)s[a]=arguments[a+1];e&&e[i]&&e[i].apply(e,s)};"serviceWorker"in navigator&&Lm.then(function(){N9()?(M9(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return ul(r,i)})):(_R(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return ul(r,i)}))})}function ul(n,e){navigator.onLine||n("offline"),n("error",e)}function _R(n,e,t){navigator.serviceWorker.register(n,t).then(function(r){if(e("registered",r),r.waiting){e("updated",r);return}r.onupdatefound=function(){e("updatefound",r);var i=r.installing;i.onstatechange=function(){i.state==="installed"&&(navigator.serviceWorker.controller?e("updated",r):e("cached",r))}}}).catch(function(r){return ul(e,r)})}function M9(n,e,t){fetch(n).then(function(r){r.status===404?(e("error",new Error("Service worker not found at "+n)),sI()):r.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+n+" to have javascript content-type, but received "+r.headers.get("content-type"))),sI()):_R(n,e,t)}).catch(function(r){return ul(e,r)})}function sI(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()}).catch(function(n){return ul(emit,n)})}L9("/kbalance_quasar_pwa/sw.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});async function F9({app:n,router:e,store:t}){n.use(e),n.mount("#q-app")}Wq(CT,V9).then(F9);export{a6 as $,l6 as A,s9 as B,BI as C,e6 as D,wa as E,Qg as F,ON as G,ug as H,BO as I,UO as J,u6 as K,_T as L,CV as M,T9 as N,zS as O,K9 as P,ed as Q,a9 as R,Qn as S,o6 as T,_o as U,j9 as V,Xk as W,$9 as X,qm as Y,g6 as Z,g9 as _,Be as a,Gg as a0,RN as a1,PN as a2,Yr as a3,SN as a4,KV as a5,h6 as a6,p6 as a7,zO as a8,Z9 as a9,w9 as aA,m6 as aB,Ag as aC,xm as aD,xV as aE,c6 as aF,q9 as aG,jt as aH,UV as aI,ay as aJ,uy as aK,at as aL,H9 as aM,Sg as aN,qO as aO,n6 as aP,CN as aa,o_ as ab,cR as ac,DT as ad,AN as ae,G9 as af,J9 as ag,zN as ah,$N as ai,Q9 as aj,Zm as ak,$m as al,W9 as am,z9 as an,h9 as ao,f6 as ap,U9 as aq,S9 as ar,_6 as as,d6 as at,B9 as au,c9 as av,l9 as aw,Hg as ax,ic as ay,P0 as az,Hq as b,dl as c,X9 as d,t6 as e,hl as f,lu as g,Ue as h,kr as i,Ao as j,bo as k,Y9 as l,Fo as m,qc as n,e_ as o,tf as p,YI as q,To as r,yc as s,GO as t,Rf as u,Pf as v,$a as w,kO as x,Un as y,Jm as z};
