/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Nm(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const It={},Fa=[],Cr=()=>{},Nk=()=>!1,Zf=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Lm=n=>n.startsWith("onUpdate:"),Wt=Object.assign,Mm=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Lk=Object.prototype.hasOwnProperty,ft=(n,e)=>Lk.call(n,e),Le=Array.isArray,Ua=n=>ul(n)==="[object Map]",iI=n=>ul(n)==="[object Set]",Mk=n=>ul(n)==="[object RegExp]",Ke=n=>typeof n=="function",Mt=n=>typeof n=="string",Vi=n=>typeof n=="symbol",Pt=n=>n!==null&&typeof n=="object",sI=n=>(Pt(n)||Ke(n))&&Ke(n.then)&&Ke(n.catch),oI=Object.prototype.toString,ul=n=>oI.call(n),Fk=n=>ul(n).slice(8,-1),aI=n=>ul(n)==="[object Object]",Fm=n=>Mt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,yc=Nm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ed=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Uk=/-(\w)/g,Ir=ed(n=>n.replace(Uk,(e,t)=>t?t.toUpperCase():"")),Bk=/\B([A-Z])/g,Lo=ed(n=>n.replace(Bk,"-$1").toLowerCase()),td=ed(n=>n.charAt(0).toUpperCase()+n.slice(1)),jp=ed(n=>n?`on${td(n)}`:""),ws=(n,e)=>!Object.is(n,e),vc=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},uI=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},$k=n=>{const e=parseFloat(n);return isNaN(e)?n:e},qk=n=>{const e=Mt(n)?Number(n):NaN;return isNaN(e)?n:e};let Zv;const nd=()=>Zv||(Zv=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function Um(n){if(Le(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Mt(r)?Wk(r):Um(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Mt(n)||Pt(n))return n}const zk=/;(?![^(]*\))/g,Kk=/:([^]+)/,jk=/\/\*[^]*?\*\//g;function Wk(n){const e={};return n.replace(jk,"").split(zk).forEach(t=>{if(t){const r=t.split(Kk);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Bm(n){let e="";if(Mt(n))e=n;else if(Le(n))for(let t=0;t<n.length;t++){const r=Bm(n[t]);r&&(e+=r+" ")}else if(Pt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Gk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hk=Nm(Gk);function cI(n){return!!n||n===""}const lI=n=>!!(n&&n.__v_isRef===!0),Qk=n=>Mt(n)?n:n==null?"":Le(n)||Pt(n)&&(n.toString===oI||!Ke(n.toString))?lI(n)?Qk(n.value):JSON.stringify(n,hI,2):String(n),hI=(n,e)=>lI(e)?hI(n,e.value):Ua(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Wp(r,s)+" =>"]=i,t),{})}:iI(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Wp(t))}:Vi(e)?Wp(e):Pt(e)&&!Le(e)&&!aI(e)?String(e):e,Wp=(n,e="")=>{var t;return Vi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mn;class fI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mn,!e&&Mn&&(this.index=(Mn.scopes||(Mn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Mn;try{return Mn=this,e()}finally{Mn=t}}}on(){Mn=this}off(){Mn=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function dI(n){return new fI(n)}function pI(){return Mn}function Jk(n,e=!1){Mn&&Mn.cleanups.push(n)}let bt;const Gp=new WeakSet;class gI{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mn&&Mn.active&&Mn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gp.has(this)&&(Gp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_I(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ew(this),yI(this);const e=bt,t=xr;bt=this,xr=!0;try{return this.fn()}finally{vI(this),bt=e,xr=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)zm(e);this.deps=this.depsTail=void 0,ew(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dg(this)&&this.run()}get dirty(){return Dg(this)}}let mI=0,wc,Ec;function _I(n,e=!1){if(n.flags|=8,e){n.next=Ec,Ec=n;return}n.next=wc,wc=n}function $m(){mI++}function qm(){if(--mI>0)return;if(Ec){let e=Ec;for(Ec=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;wc;){let e=wc;for(wc=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function yI(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function vI(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),zm(r),Yk(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Dg(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(wI(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function wI(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Nc))return;n.globalVersion=Nc;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Dg(n)){n.flags&=-3;return}const t=bt,r=xr;bt=n,xr=!0;try{yI(n);const i=n.fn(n._value);(e.version===0||ws(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{bt=t,xr=r,vI(n),n.flags&=-3}}function zm(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)zm(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Yk(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let xr=!0;const EI=[];function Ds(){EI.push(xr),xr=!1}function ks(){const n=EI.pop();xr=n===void 0?!0:n}function ew(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=bt;bt=void 0;try{e()}finally{bt=t}}}let Nc=0;class Xk{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Km{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!bt||!xr||bt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==bt)t=this.activeLink=new Xk(bt,this),bt.deps?(t.prevDep=bt.depsTail,bt.depsTail.nextDep=t,bt.depsTail=t):bt.deps=bt.depsTail=t,II(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=bt.depsTail,t.nextDep=void 0,bt.depsTail.nextDep=t,bt.depsTail=t,bt.deps===t&&(bt.deps=r)}return t}trigger(e){this.version++,Nc++,this.notify(e)}notify(e){$m();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{qm()}}}function II(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)II(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const vf=new WeakMap,go=Symbol(""),kg=Symbol(""),Lc=Symbol("");function An(n,e,t){if(xr&&bt){let r=vf.get(n);r||vf.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new Km),i.map=r,i.key=t),i.track()}}function Ii(n,e,t,r,i,s){const a=vf.get(n);if(!a){Nc++;return}const c=h=>{h&&h.trigger()};if($m(),e==="clear")a.forEach(c);else{const h=Le(n),d=h&&Fm(t);if(h&&t==="length"){const p=Number(r);a.forEach((_,v)=>{(v==="length"||v===Lc||!Vi(v)&&v>=p)&&c(_)})}else switch((t!==void 0||a.has(void 0))&&c(a.get(t)),d&&c(a.get(Lc)),e){case"add":h?d&&c(a.get("length")):(c(a.get(go)),Ua(n)&&c(a.get(kg)));break;case"delete":h||(c(a.get(go)),Ua(n)&&c(a.get(kg)));break;case"set":Ua(n)&&c(a.get(go));break}}qm()}function Zk(n,e){const t=vf.get(n);return t&&t.get(e)}function va(n){const e=ot(n);return e===n?e:(An(e,"iterate",Lc),Er(n)?e:e.map(Sn))}function rd(n){return An(n=ot(n),"iterate",Lc),n}const eO={__proto__:null,[Symbol.iterator](){return Hp(this,Symbol.iterator,Sn)},concat(...n){return va(this).concat(...n.map(e=>Le(e)?va(e):e))},entries(){return Hp(this,"entries",n=>(n[1]=Sn(n[1]),n))},every(n,e){return _i(this,"every",n,e,void 0,arguments)},filter(n,e){return _i(this,"filter",n,e,t=>t.map(Sn),arguments)},find(n,e){return _i(this,"find",n,e,Sn,arguments)},findIndex(n,e){return _i(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return _i(this,"findLast",n,e,Sn,arguments)},findLastIndex(n,e){return _i(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return _i(this,"forEach",n,e,void 0,arguments)},includes(...n){return Qp(this,"includes",n)},indexOf(...n){return Qp(this,"indexOf",n)},join(n){return va(this).join(n)},lastIndexOf(...n){return Qp(this,"lastIndexOf",n)},map(n,e){return _i(this,"map",n,e,void 0,arguments)},pop(){return Qu(this,"pop")},push(...n){return Qu(this,"push",n)},reduce(n,...e){return tw(this,"reduce",n,e)},reduceRight(n,...e){return tw(this,"reduceRight",n,e)},shift(){return Qu(this,"shift")},some(n,e){return _i(this,"some",n,e,void 0,arguments)},splice(...n){return Qu(this,"splice",n)},toReversed(){return va(this).toReversed()},toSorted(n){return va(this).toSorted(n)},toSpliced(...n){return va(this).toSpliced(...n)},unshift(...n){return Qu(this,"unshift",n)},values(){return Hp(this,"values",Sn)}};function Hp(n,e,t){const r=rd(n),i=r[e]();return r!==n&&!Er(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const tO=Array.prototype;function _i(n,e,t,r,i,s){const a=rd(n),c=a!==n&&!Er(n),h=a[e];if(h!==tO[e]){const _=h.apply(n,s);return c?Sn(_):_}let d=t;a!==n&&(c?d=function(_,v){return t.call(this,Sn(_),v,n)}:t.length>2&&(d=function(_,v){return t.call(this,_,v,n)}));const p=h.call(a,d,r);return c&&i?i(p):p}function tw(n,e,t,r){const i=rd(n);let s=t;return i!==n&&(Er(n)?t.length>3&&(s=function(a,c,h){return t.call(this,a,c,h,n)}):s=function(a,c,h){return t.call(this,a,Sn(c),h,n)}),i[e](s,...r)}function Qp(n,e,t){const r=ot(n);An(r,"iterate",Lc);const i=r[e](...t);return(i===-1||i===!1)&&Gm(t[0])?(t[0]=ot(t[0]),r[e](...t)):i}function Qu(n,e,t=[]){Ds(),$m();const r=ot(n)[e].apply(n,t);return qm(),ks(),r}const nO=Nm("__proto__,__v_isRef,__isVue"),TI=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Vi));function rO(n){Vi(n)||(n=String(n));const e=ot(this);return An(e,"has",n),e.hasOwnProperty(n)}class bI{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?dO:PI:s?RI:SI).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Le(e);if(!i){let h;if(a&&(h=eO[t]))return h;if(t==="hasOwnProperty")return rO}const c=Reflect.get(e,t,jt(e)?e:r);return(Vi(t)?TI.has(t):nO(t))||(i||An(e,"get",t),s)?c:jt(c)?a&&Fm(t)?c:c.value:Pt(c)?i?xI(c):Mo(c):c}}class AI extends bI{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const h=Eo(s);if(!Er(r)&&!Eo(r)&&(s=ot(s),r=ot(r)),!Le(e)&&jt(s)&&!jt(r))return h?!1:(s.value=r,!0)}const a=Le(e)&&Fm(t)?Number(t)<e.length:ft(e,t),c=Reflect.set(e,t,r,jt(e)?e:i);return e===ot(i)&&(a?ws(r,s)&&Ii(e,"set",t,r):Ii(e,"add",t,r)),c}deleteProperty(e,t){const r=ft(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Ii(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Vi(t)||!TI.has(t))&&An(e,"has",t),r}ownKeys(e){return An(e,"iterate",Le(e)?"length":go),Reflect.ownKeys(e)}}class iO extends bI{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const sO=new AI,oO=new iO,aO=new AI(!0);const Og=n=>n,Uh=n=>Reflect.getPrototypeOf(n);function uO(n,e,t){return function(...r){const i=this.__v_raw,s=ot(i),a=Ua(s),c=n==="entries"||n===Symbol.iterator&&a,h=n==="keys"&&a,d=i[n](...r),p=t?Og:e?Vg:Sn;return!e&&An(s,"iterate",h?kg:go),{next(){const{value:_,done:v}=d.next();return v?{value:_,done:v}:{value:c?[p(_[0]),p(_[1])]:p(_),done:v}},[Symbol.iterator](){return this}}}}function Bh(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function cO(n,e){const t={get(i){const s=this.__v_raw,a=ot(s),c=ot(i);n||(ws(i,c)&&An(a,"get",i),An(a,"get",c));const{has:h}=Uh(a),d=e?Og:n?Vg:Sn;if(h.call(a,i))return d(s.get(i));if(h.call(a,c))return d(s.get(c));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!n&&An(ot(i),"iterate",go),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=ot(s),c=ot(i);return n||(ws(i,c)&&An(a,"has",i),An(a,"has",c)),i===c?s.has(i):s.has(i)||s.has(c)},forEach(i,s){const a=this,c=a.__v_raw,h=ot(c),d=e?Og:n?Vg:Sn;return!n&&An(h,"iterate",go),c.forEach((p,_)=>i.call(s,d(p),d(_),a))}};return Wt(t,n?{add:Bh("add"),set:Bh("set"),delete:Bh("delete"),clear:Bh("clear")}:{add(i){!e&&!Er(i)&&!Eo(i)&&(i=ot(i));const s=ot(this);return Uh(s).has.call(s,i)||(s.add(i),Ii(s,"add",i,i)),this},set(i,s){!e&&!Er(s)&&!Eo(s)&&(s=ot(s));const a=ot(this),{has:c,get:h}=Uh(a);let d=c.call(a,i);d||(i=ot(i),d=c.call(a,i));const p=h.call(a,i);return a.set(i,s),d?ws(s,p)&&Ii(a,"set",i,s):Ii(a,"add",i,s),this},delete(i){const s=ot(this),{has:a,get:c}=Uh(s);let h=a.call(s,i);h||(i=ot(i),h=a.call(s,i)),c&&c.call(s,i);const d=s.delete(i);return h&&Ii(s,"delete",i,void 0),d},clear(){const i=ot(this),s=i.size!==0,a=i.clear();return s&&Ii(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=uO(i,n,e)}),t}function jm(n,e){const t=cO(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(ft(t,i)&&i in r?t:r,i,s)}const lO={get:jm(!1,!1)},hO={get:jm(!1,!0)},fO={get:jm(!0,!1)};const SI=new WeakMap,RI=new WeakMap,PI=new WeakMap,dO=new WeakMap;function pO(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gO(n){return n.__v_skip||!Object.isExtensible(n)?0:pO(Fk(n))}function Mo(n){return Eo(n)?n:Wm(n,!1,sO,lO,SI)}function CI(n){return Wm(n,!1,aO,hO,RI)}function xI(n){return Wm(n,!0,oO,fO,PI)}function Wm(n,e,t,r,i){if(!Pt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const a=gO(n);if(a===0)return n;const c=new Proxy(n,a===2?r:t);return i.set(n,c),c}function Es(n){return Eo(n)?Es(n.__v_raw):!!(n&&n.__v_isReactive)}function Eo(n){return!!(n&&n.__v_isReadonly)}function Er(n){return!!(n&&n.__v_isShallow)}function Gm(n){return n?!!n.__v_raw:!1}function ot(n){const e=n&&n.__v_raw;return e?ot(e):n}function Fo(n){return!ft(n,"__v_skip")&&Object.isExtensible(n)&&uI(n,"__v_skip",!0),n}const Sn=n=>Pt(n)?Mo(n):n,Vg=n=>Pt(n)?xI(n):n;function jt(n){return n?n.__v_isRef===!0:!1}function Io(n){return DI(n,!1)}function mO(n){return DI(n,!0)}function DI(n,e){return jt(n)?n:new _O(n,e)}class _O{constructor(e,t){this.dep=new Km,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ot(e),this._value=t?e:Sn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Er(e)||Eo(e);e=r?e:ot(e),ws(e,t)&&(this._rawValue=e,this._value=r?e:Sn(e),this.dep.trigger())}}function mo(n){return jt(n)?n.value:n}const yO={get:(n,e,t)=>e==="__v_raw"?n:mo(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return jt(i)&&!jt(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function kI(n){return Es(n)?n:new Proxy(n,yO)}function vO(n){const e=Le(n)?new Array(n.length):{};for(const t in n)e[t]=EO(n,t);return e}class wO{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Zk(ot(this._object),this._key)}}function EO(n,e,t){const r=n[e];return jt(r)?r:new wO(n,e,t)}class IO{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Km(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Nc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return _I(this,!0),!0}get value(){const e=this.dep.track();return wI(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function TO(n,e,t=!1){let r,i;return Ke(n)?r=n:(r=n.get,i=n.set),new IO(r,i,t)}const $h={},wf=new WeakMap;let ao;function bO(n,e=!1,t=ao){if(t){let r=wf.get(t);r||wf.set(t,r=[]),r.push(n)}}function AO(n,e,t=It){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:c,call:h}=t,d=W=>i?W:Er(W)||i===!1||i===0?Ti(W,1):Ti(W);let p,_,v,I,O=!1,M=!1;if(jt(n)?(_=()=>n.value,O=Er(n)):Es(n)?(_=()=>d(n),O=!0):Le(n)?(M=!0,O=n.some(W=>Es(W)||Er(W)),_=()=>n.map(W=>{if(jt(W))return W.value;if(Es(W))return d(W);if(Ke(W))return h?h(W,2):W()})):Ke(n)?e?_=h?()=>h(n,2):n:_=()=>{if(v){Ds();try{v()}finally{ks()}}const W=ao;ao=p;try{return h?h(n,3,[I]):n(I)}finally{ao=W}}:_=Cr,e&&i){const W=_,Y=i===!0?1/0:i;_=()=>Ti(W(),Y)}const F=pI(),Q=()=>{p.stop(),F&&Mm(F.effects,p)};if(s&&e){const W=e;e=(...Y)=>{W(...Y),Q()}}let z=M?new Array(n.length).fill($h):$h;const q=W=>{if(!(!(p.flags&1)||!p.dirty&&!W))if(e){const Y=p.run();if(i||O||(M?Y.some((re,P)=>ws(re,z[P])):ws(Y,z))){v&&v();const re=ao;ao=p;try{const P=[Y,z===$h?void 0:M&&z[0]===$h?[]:z,I];h?h(e,3,P):e(...P),z=Y}finally{ao=re}}}else p.run()};return c&&c(q),p=new gI(_),p.scheduler=a?()=>a(q,!1):q,I=W=>bO(W,!1,p),v=p.onStop=()=>{const W=wf.get(p);if(W){if(h)h(W,4);else for(const Y of W)Y();wf.delete(p)}},e?r?q(!0):z=p.run():a?a(q.bind(null,!0),!0):p.run(),Q.pause=p.pause.bind(p),Q.resume=p.resume.bind(p),Q.stop=Q,Q}function Ti(n,e=1/0,t){if(e<=0||!Pt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,jt(n))Ti(n.value,e,t);else if(Le(n))for(let r=0;r<n.length;r++)Ti(n[r],e,t);else if(iI(n)||Ua(n))n.forEach(r=>{Ti(r,e,t)});else if(aI(n)){for(const r in n)Ti(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Ti(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cl(n,e,t,r){try{return r?n(...r):n()}catch(i){id(i,e,t)}}function kr(n,e,t,r){if(Ke(n)){const i=cl(n,e,t,r);return i&&sI(i)&&i.catch(s=>{id(s,e,t)}),i}if(Le(n)){const i=[];for(let s=0;s<n.length;s++)i.push(kr(n[s],e,t,r));return i}}function id(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||It;if(e){let c=e.parent;const h=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;c;){const p=c.ec;if(p){for(let _=0;_<p.length;_++)if(p[_](n,h,d)===!1)return}c=c.parent}if(s){Ds(),cl(s,null,10,[n,h,d]),ks();return}}SO(n,t,i,r,a)}function SO(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Fn=[];let Wr=-1;const Ba=[];let us=null,Ca=0;const OI=Promise.resolve();let Ef=null;function Hm(n){const e=Ef||OI;return n?e.then(this?n.bind(this):n):e}function RO(n){let e=Wr+1,t=Fn.length;for(;e<t;){const r=e+t>>>1,i=Fn[r],s=Mc(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function Qm(n){if(!(n.flags&1)){const e=Mc(n),t=Fn[Fn.length-1];!t||!(n.flags&2)&&e>=Mc(t)?Fn.push(n):Fn.splice(RO(e),0,n),n.flags|=1,VI()}}function VI(){Ef||(Ef=OI.then(LI))}function PO(n){Le(n)?Ba.push(...n):us&&n.id===-1?us.splice(Ca+1,0,n):n.flags&1||(Ba.push(n),n.flags|=1),VI()}function nw(n,e,t=Wr+1){for(;t<Fn.length;t++){const r=Fn[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Fn.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function NI(n){if(Ba.length){const e=[...new Set(Ba)].sort((t,r)=>Mc(t)-Mc(r));if(Ba.length=0,us){us.push(...e);return}for(us=e,Ca=0;Ca<us.length;Ca++){const t=us[Ca];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}us=null,Ca=0}}const Mc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function LI(n){const e=Cr;try{for(Wr=0;Wr<Fn.length;Wr++){const t=Fn[Wr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),cl(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Wr<Fn.length;Wr++){const t=Fn[Wr];t&&(t.flags&=-2)}Wr=-1,Fn.length=0,NI(),Ef=null,(Fn.length||Ba.length)&&LI()}}let rn=null,MI=null;function If(n){const e=rn;return rn=n,MI=n&&n.type.__scopeId||null,e}function CO(n,e=rn,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&dw(-1);const s=If(e);let a;try{a=n(...i)}finally{If(s),r._d&&dw(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function FI(n,e){if(rn===null)return n;const t=cd(rn),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,c,h=It]=e[i];s&&(Ke(s)&&(s={mounted:s,updated:s}),s.deep&&Ti(a),r.push({dir:s,instance:t,value:a,oldValue:void 0,arg:c,modifiers:h}))}return n}function ro(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const c=i[a];s&&(c.oldValue=s[a].value);let h=c.dir[r];h&&(Ds(),kr(h,t,8,[n.el,c,n,e]),ks())}}const UI=Symbol("_vte"),BI=n=>n.__isTeleport,Ic=n=>n&&(n.disabled||n.disabled===""),xO=n=>n&&(n.defer||n.defer===""),rw=n=>typeof SVGElement!="undefined"&&n instanceof SVGElement,iw=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Ng=(n,e)=>{const t=n&&n.to;return Mt(t)?e?e(t):null:t},DO={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,a,c,h,d){const{mc:p,pc:_,pbc:v,o:{insert:I,querySelector:O,createText:M,createComment:F}}=d,Q=Ic(e.props);let{shapeFlag:z,children:q,dynamicChildren:W}=e;if(n==null){const Y=e.el=M(""),re=e.anchor=M("");I(Y,t,r),I(re,t,r);const P=(A,x)=>{z&16&&(i&&i.isCE&&(i.ce._teleportTarget=A),p(q,A,x,i,s,a,c,h))},S=()=>{const A=e.target=Ng(e.props,O),x=$I(A,e,M,I);A&&(a!=="svg"&&rw(A)?a="svg":a!=="mathml"&&iw(A)&&(a="mathml"),Q||(P(A,x),Zh(e,!1)))};Q&&(P(t,re),Zh(e,!0)),xO(e.props)?ln(S,s):S()}else{e.el=n.el,e.targetStart=n.targetStart;const Y=e.anchor=n.anchor,re=e.target=n.target,P=e.targetAnchor=n.targetAnchor,S=Ic(n.props),A=S?t:re,x=S?Y:P;if(a==="svg"||rw(re)?a="svg":(a==="mathml"||iw(re))&&(a="mathml"),W?(v(n.dynamicChildren,W,A,i,s,a,c),n_(n,e,!0)):h||_(n,e,A,x,i,s,a,c,!1),Q)S?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):qh(e,t,Y,d,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const N=e.target=Ng(e.props,O);N&&qh(e,N,null,d,0)}else S&&qh(e,re,P,d,1);Zh(e,Q)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:c,anchor:h,targetStart:d,targetAnchor:p,target:_,props:v}=n;if(_&&(i(d),i(p)),s&&i(h),a&16){const I=s||!Ic(v);for(let O=0;O<c.length;O++){const M=c[O];r(M,e,t,I,!!M.dynamicChildren)}}},move:qh,hydrate:kO};function qh(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:a,anchor:c,shapeFlag:h,children:d,props:p}=n,_=s===2;if(_&&r(a,e,t),(!_||Ic(p))&&h&16)for(let v=0;v<d.length;v++)i(d[v],e,t,2);_&&r(c,e,t)}function kO(n,e,t,r,i,s,{o:{nextSibling:a,parentNode:c,querySelector:h,insert:d,createText:p}},_){const v=e.target=Ng(e.props,h);if(v){const I=Ic(e.props),O=v._lpa||v.firstChild;if(e.shapeFlag&16)if(I)e.anchor=_(a(n),e,c(n),t,r,i,s),e.targetStart=O,e.targetAnchor=O&&a(O);else{e.anchor=a(n);let M=O;for(;M;){if(M&&M.nodeType===8){if(M.data==="teleport start anchor")e.targetStart=M;else if(M.data==="teleport anchor"){e.targetAnchor=M,v._lpa=e.targetAnchor&&a(e.targetAnchor);break}}M=a(M)}e.targetAnchor||$I(v,e,p,d),_(O&&a(O),e,v,t,r,i,s)}Zh(e,I)}return e.anchor&&a(e.anchor)}const k9=DO;function Zh(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function $I(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[UI]=s,n&&(r(i,n),r(s,n)),s}const cs=Symbol("_leaveCb"),zh=Symbol("_enterCb");function qI(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xm(()=>{n.isMounted=!0}),ll(()=>{n.isUnmounting=!0}),n}const yr=[Function,Array],zI={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:yr,onEnter:yr,onAfterEnter:yr,onEnterCancelled:yr,onBeforeLeave:yr,onLeave:yr,onAfterLeave:yr,onLeaveCancelled:yr,onBeforeAppear:yr,onAppear:yr,onAfterAppear:yr,onAppearCancelled:yr},KI=n=>{const e=n.subTree;return e.component?KI(e.component):e},OO={name:"BaseTransition",props:zI,setup(n,{slots:e}){const t=lu(),r=qI();return()=>{const i=e.default&&Jm(e.default(),!0);if(!i||!i.length)return;const s=jI(i),a=ot(n),{mode:c}=a;if(r.isLeaving)return Jp(s);const h=sw(s);if(!h)return Jp(s);let d=Fc(h,a,r,t,v=>d=v);h.type!==Rn&&Rs(h,d);const p=t.subTree,_=p&&sw(p);if(_&&_.type!==Rn&&!ds(h,_)&&KI(t).type!==Rn){const v=Fc(_,a,r,t);if(Rs(_,v),c==="out-in"&&h.type!==Rn)return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete v.afterLeave},Jp(s);c==="in-out"&&h.type!==Rn&&(v.delayLeave=(I,O,M)=>{const F=WI(r,_);F[String(_.key)]=_,I[cs]=()=>{O(),I[cs]=void 0,delete d.delayedLeave},d.delayedLeave=M})}return s}}};function jI(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Rn){e=t;break}}return e}const VO=OO;function WI(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Fc(n,e,t,r,i){const{appear:s,mode:a,persisted:c=!1,onBeforeEnter:h,onEnter:d,onAfterEnter:p,onEnterCancelled:_,onBeforeLeave:v,onLeave:I,onAfterLeave:O,onLeaveCancelled:M,onBeforeAppear:F,onAppear:Q,onAfterAppear:z,onAppearCancelled:q}=e,W=String(n.key),Y=WI(t,n),re=(A,x)=>{A&&kr(A,r,9,x)},P=(A,x)=>{const N=x[1];re(A,x),Le(A)?A.every(V=>V.length<=1)&&N():A.length<=1&&N()},S={mode:a,persisted:c,beforeEnter(A){let x=h;if(!t.isMounted)if(s)x=F||h;else return;A[cs]&&A[cs](!0);const N=Y[W];N&&ds(n,N)&&N.el[cs]&&N.el[cs](),re(x,[A])},enter(A){let x=d,N=p,V=_;if(!t.isMounted)if(s)x=Q||d,N=z||p,V=q||_;else return;let C=!1;const fe=A[zh]=We=>{C||(C=!0,We?re(V,[A]):re(N,[A]),S.delayedLeave&&S.delayedLeave(),A[zh]=void 0)};x?P(x,[A,fe]):fe()},leave(A,x){const N=String(n.key);if(A[zh]&&A[zh](!0),t.isUnmounting)return x();re(v,[A]);let V=!1;const C=A[cs]=fe=>{V||(V=!0,x(),fe?re(M,[A]):re(O,[A]),A[cs]=void 0,Y[N]===n&&delete Y[N])};Y[N]=n,I?P(I,[A,C]):C()},clone(A){const x=Fc(A,e,t,r,i);return i&&i(x),x}};return S}function Jp(n){if(sd(n))return n=xi(n),n.children=null,n}function sw(n){if(!sd(n))return BI(n.type)&&n.children?jI(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ke(t.default))return t.default()}}function Rs(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Rs(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Jm(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let a=n[s];const c=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===Qn?(a.patchFlag&128&&i++,r=r.concat(Jm(a.children,e,c))):(e||a.type!==Rn)&&r.push(c!=null?xi(a,{key:c}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ym(n,e){return Ke(n)?(()=>Wt({name:n.name},e,{setup:n}))():n}function GI(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Lg(n,e,t,r,i=!1){if(Le(n)){n.forEach((O,M)=>Lg(O,e&&(Le(e)?e[M]:e),t,r,i));return}if(_o(r)&&!i)return;const s=r.shapeFlag&4?cd(r.component):r.el,a=i?null:s,{i:c,r:h}=n,d=e&&e.r,p=c.refs===It?c.refs={}:c.refs,_=c.setupState,v=ot(_),I=_===It?()=>!1:O=>ft(v,O);if(d!=null&&d!==h&&(Mt(d)?(p[d]=null,I(d)&&(_[d]=null)):jt(d)&&(d.value=null)),Ke(h))cl(h,c,12,[a,p]);else{const O=Mt(h),M=jt(h);if(O||M){const F=()=>{if(n.f){const Q=O?I(h)?_[h]:p[h]:h.value;i?Le(Q)&&Mm(Q,s):Le(Q)?Q.includes(s)||Q.push(s):O?(p[h]=[s],I(h)&&(_[h]=p[h])):(h.value=[s],n.k&&(p[n.k]=h.value))}else O?(p[h]=a,I(h)&&(_[h]=a)):M&&(h.value=a,n.k&&(p[n.k]=a))};a?(F.id=-1,ln(F,t)):F()}}}nd().requestIdleCallback;nd().cancelIdleCallback;const _o=n=>!!n.type.__asyncLoader,sd=n=>n.type.__isKeepAlive,NO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=lu(),r=t.ctx;if(!r.renderer)return()=>{const z=e.default&&e.default();return z&&z.length===1?z[0]:z};const i=new Map,s=new Set;let a=null;const c=t.suspense,{renderer:{p:h,m:d,um:p,o:{createElement:_}}}=r,v=_("div");r.activate=(z,q,W,Y,re)=>{const P=z.component;d(z,q,W,0,c),h(P.vnode,z,q,W,P,c,Y,z.slotScopeIds,re),ln(()=>{P.isDeactivated=!1,P.a&&vc(P.a);const S=z.props&&z.props.onVnodeMounted;S&&wr(S,P.parent,z)},c)},r.deactivate=z=>{const q=z.component;bf(q.m),bf(q.a),d(z,v,null,1,c),ln(()=>{q.da&&vc(q.da);const W=z.props&&z.props.onVnodeUnmounted;W&&wr(W,q.parent,z),q.isDeactivated=!0},c)};function I(z){Yp(z),p(z,t,c,!0)}function O(z){i.forEach((q,W)=>{const Y=qg(q.type);Y&&!z(Y)&&M(W)})}function M(z){const q=i.get(z);q&&(!a||!ds(q,a))?I(q):a&&Yp(a),i.delete(z),s.delete(z)}$a(()=>[n.include,n.exclude],([z,q])=>{z&&O(W=>uc(z,W)),q&&O(W=>!uc(q,W))},{flush:"post",deep:!0});let F=null;const Q=()=>{F!=null&&(Af(t.subTree.type)?ln(()=>{i.set(F,Kh(t.subTree))},t.subTree.suspense):i.set(F,Kh(t.subTree)))};return Xm(Q),Zm(Q),ll(()=>{i.forEach(z=>{const{subTree:q,suspense:W}=t,Y=Kh(q);if(z.type===Y.type&&z.key===Y.key){Yp(Y);const re=Y.component.da;re&&ln(re,W);return}I(z)})}),()=>{if(F=null,!e.default)return a=null;const z=e.default(),q=z[0];if(z.length>1)return a=null,z;if(!Wa(q)||!(q.shapeFlag&4)&&!(q.shapeFlag&128))return a=null,q;let W=Kh(q);if(W.type===Rn)return a=null,W;const Y=W.type,re=qg(_o(W)?W.type.__asyncResolved||{}:Y),{include:P,exclude:S,max:A}=n;if(P&&(!re||!uc(P,re))||S&&re&&uc(S,re))return W.shapeFlag&=-257,a=W,q;const x=W.key==null?Y:W.key,N=i.get(x);return W.el&&(W=xi(W),q.shapeFlag&128&&(q.ssContent=W)),F=x,N?(W.el=N.el,W.component=N.component,W.transition&&Rs(W,W.transition),W.shapeFlag|=512,s.delete(x),s.add(x)):(s.add(x),A&&s.size>parseInt(A,10)&&M(s.values().next().value)),W.shapeFlag|=256,a=W,Af(q.type)?q:W}}},O9=NO;function uc(n,e){return Le(n)?n.some(t=>uc(t,e)):Mt(n)?n.split(",").includes(e):Mk(n)?(n.lastIndex=0,n.test(e)):!1}function LO(n,e){HI(n,"a",e)}function MO(n,e){HI(n,"da",e)}function HI(n,e,t=fn){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(od(e,r,t),t){let i=t.parent;for(;i&&i.parent;)sd(i.parent.vnode)&&FO(r,e,t,i),i=i.parent}}function FO(n,e,t,r){const i=od(e,n,r,!0);QI(()=>{Mm(r[e],i)},t)}function Yp(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Kh(n){return n.shapeFlag&128?n.ssContent:n}function od(n,e,t=fn,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{Ds();const c=hl(t),h=kr(e,t,n,a);return c(),ks(),h});return r?i.unshift(s):i.push(s),s}}const Ni=n=>(e,t=fn)=>{(!Bc||n==="sp")&&od(n,(...r)=>e(...r),t)},UO=Ni("bm"),Xm=Ni("m"),BO=Ni("bu"),Zm=Ni("u"),ll=Ni("bum"),QI=Ni("um"),$O=Ni("sp"),qO=Ni("rtg"),zO=Ni("rtc");function KO(n,e=fn){od("ec",n,e)}const JI="components";function jO(n,e){return GO(JI,n,!0,e)||n}const WO=Symbol.for("v-ndc");function GO(n,e,t=!0,r=!1){const i=rn||fn;if(i){const s=i.type;if(n===JI){const c=qg(s,!1);if(c&&(c===e||c===Ir(e)||c===td(Ir(e))))return s}const a=ow(i[n]||s[n],e)||ow(i.appContext[n],e);return!a&&r?s:a}}function ow(n,e){return n&&(n[e]||n[Ir(e)]||n[td(Ir(e))])}function V9(n,e,t,r){let i;const s=t&&t[r],a=Le(n);if(a||Mt(n)){const c=a&&Es(n);let h=!1;c&&(h=!Er(n),n=rd(n)),i=new Array(n.length);for(let d=0,p=n.length;d<p;d++)i[d]=e(h?Sn(n[d]):n[d],d,void 0,s&&s[d])}else if(typeof n=="number"){i=new Array(n);for(let c=0;c<n;c++)i[c]=e(c+1,c,void 0,s&&s[c])}else if(Pt(n))if(n[Symbol.iterator])i=Array.from(n,(c,h)=>e(c,h,void 0,s&&s[h]));else{const c=Object.keys(n);i=new Array(c.length);for(let h=0,d=c.length;h<d;h++){const p=c[h];i[h]=e(n[p],p,h,s&&s[h])}}else i=[];return t&&(t[r]=i),i}function N9(n,e,t={},r,i){if(rn.ce||rn.parent&&_o(rn.parent)&&rn.parent.ce)return e!=="default"&&(t.name=e),Sf(),Rf(Qn,null,[Un("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),Sf();const a=s&&YI(s(t)),c=t.key||a&&a.key,h=Rf(Qn,{key:(c&&!Vi(c)?c:`_${e}`)+(!a&&r?"_fb":"")},a||(r?r():[]),a&&n._===1?64:-2);return!i&&h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function YI(n){return n.some(e=>Wa(e)?!(e.type===Rn||e.type===Qn&&!YI(e.children)):!0)?n:null}const Mg=n=>n?mT(n)?cd(n):Mg(n.parent):null,Tc=Wt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Mg(n.parent),$root:n=>Mg(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>e_(n),$forceUpdate:n=>n.f||(n.f=()=>{Qm(n.update)}),$nextTick:n=>n.n||(n.n=Hm.bind(n.proxy)),$watch:n=>gV.bind(n)}),Xp=(n,e)=>n!==It&&!n.__isScriptSetup&&ft(n,e),HO={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:a,type:c,appContext:h}=n;let d;if(e[0]!=="$"){const I=a[e];if(I!==void 0)switch(I){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Xp(r,e))return a[e]=1,r[e];if(i!==It&&ft(i,e))return a[e]=2,i[e];if((d=n.propsOptions[0])&&ft(d,e))return a[e]=3,s[e];if(t!==It&&ft(t,e))return a[e]=4,t[e];Fg&&(a[e]=0)}}const p=Tc[e];let _,v;if(p)return e==="$attrs"&&An(n.attrs,"get",""),p(n);if((_=c.__cssModules)&&(_=_[e]))return _;if(t!==It&&ft(t,e))return a[e]=4,t[e];if(v=h.config.globalProperties,ft(v,e))return v[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Xp(i,e)?(i[e]=t,!0):r!==It&&ft(r,e)?(r[e]=t,!0):ft(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},a){let c;return!!t[a]||n!==It&&ft(n,a)||Xp(e,a)||(c=s[0])&&ft(c,a)||ft(r,a)||ft(Tc,a)||ft(i.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ft(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function aw(n){return Le(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Fg=!0;function QO(n){const e=e_(n),t=n.proxy,r=n.ctx;Fg=!1,e.beforeCreate&&uw(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:a,watch:c,provide:h,inject:d,created:p,beforeMount:_,mounted:v,beforeUpdate:I,updated:O,activated:M,deactivated:F,beforeDestroy:Q,beforeUnmount:z,destroyed:q,unmounted:W,render:Y,renderTracked:re,renderTriggered:P,errorCaptured:S,serverPrefetch:A,expose:x,inheritAttrs:N,components:V,directives:C,filters:fe}=e;if(d&&JO(d,r,null),a)for(const Ce in a){const $e=a[Ce];Ke($e)&&(r[Ce]=$e.bind(t))}if(i){const Ce=i.call(t,t);Pt(Ce)&&(n.data=Mo(Ce))}if(Fg=!0,s)for(const Ce in s){const $e=s[Ce],Dn=Ke($e)?$e.bind(t,t):Ke($e.get)?$e.get.bind(t,t):Cr,yn=!Ke($e)&&Ke($e.set)?$e.set.bind(t):Cr,Dt=Be({get:Dn,set:yn});Object.defineProperty(r,Ce,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:St=>Dt.value=St})}if(c)for(const Ce in c)XI(c[Ce],r,t,Ce);if(h){const Ce=Ke(h)?h.call(t):h;Reflect.ownKeys(Ce).forEach($e=>{ef($e,Ce[$e])})}p&&uw(p,n,"c");function et(Ce,$e){Le($e)?$e.forEach(Dn=>Ce(Dn.bind(t))):$e&&Ce($e.bind(t))}if(et(UO,_),et(Xm,v),et(BO,I),et(Zm,O),et(LO,M),et(MO,F),et(KO,S),et(zO,re),et(qO,P),et(ll,z),et(QI,W),et($O,A),Le(x))if(x.length){const Ce=n.exposed||(n.exposed={});x.forEach($e=>{Object.defineProperty(Ce,$e,{get:()=>t[$e],set:Dn=>t[$e]=Dn})})}else n.exposed||(n.exposed={});Y&&n.render===Cr&&(n.render=Y),N!=null&&(n.inheritAttrs=N),V&&(n.components=V),C&&(n.directives=C),A&&GI(n)}function JO(n,e,t=Cr){Le(n)&&(n=Ug(n));for(const r in n){const i=n[r];let s;Pt(i)?"default"in i?s=Dr(i.from||r,i.default,!0):s=Dr(i.from||r):s=Dr(i),jt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function uw(n,e,t){kr(Le(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function XI(n,e,t,r){let i=r.includes(".")?hT(t,r):()=>t[r];if(Mt(n)){const s=e[n];Ke(s)&&$a(i,s)}else if(Ke(n))$a(i,n.bind(t));else if(Pt(n))if(Le(n))n.forEach(s=>XI(s,e,t,r));else{const s=Ke(n.handler)?n.handler.bind(t):e[n.handler];Ke(s)&&$a(i,s,n)}}function e_(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,c=s.get(e);let h;return c?h=c:!i.length&&!t&&!r?h=e:(h={},i.length&&i.forEach(d=>Tf(h,d,a,!0)),Tf(h,e,a)),Pt(e)&&s.set(e,h),h}function Tf(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Tf(n,s,t,!0),i&&i.forEach(a=>Tf(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const c=YO[a]||t&&t[a];n[a]=c?c(n[a],e[a]):e[a]}return n}const YO={data:cw,props:lw,emits:lw,methods:cc,computed:cc,beforeCreate:Ln,created:Ln,beforeMount:Ln,mounted:Ln,beforeUpdate:Ln,updated:Ln,beforeDestroy:Ln,beforeUnmount:Ln,destroyed:Ln,unmounted:Ln,activated:Ln,deactivated:Ln,errorCaptured:Ln,serverPrefetch:Ln,components:cc,directives:cc,watch:ZO,provide:cw,inject:XO};function cw(n,e){return e?n?function(){return Wt(Ke(n)?n.call(this,this):n,Ke(e)?e.call(this,this):e)}:e:n}function XO(n,e){return cc(Ug(n),Ug(e))}function Ug(n){if(Le(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Ln(n,e){return n?[...new Set([].concat(n,e))]:e}function cc(n,e){return n?Wt(Object.create(null),n,e):e}function lw(n,e){return n?Le(n)&&Le(e)?[...new Set([...n,...e])]:Wt(Object.create(null),aw(n),aw(e!=null?e:{})):e}function ZO(n,e){if(!n)return e;if(!e)return n;const t=Wt(Object.create(null),n);for(const r in e)t[r]=Ln(n[r],e[r]);return t}function ZI(){return{app:null,config:{isNativeTag:Nk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eV=0;function tV(n,e){return function(r,i=null){Ke(r)||(r=Wt({},r)),i!=null&&!Pt(i)&&(i=null);const s=ZI(),a=new WeakSet,c=[];let h=!1;const d=s.app={_uid:eV++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:LV,get config(){return s.config},set config(p){},use(p,..._){return a.has(p)||(p&&Ke(p.install)?(a.add(p),p.install(d,..._)):Ke(p)&&(a.add(p),p(d,..._))),d},mixin(p){return s.mixins.includes(p)||s.mixins.push(p),d},component(p,_){return _?(s.components[p]=_,d):s.components[p]},directive(p,_){return _?(s.directives[p]=_,d):s.directives[p]},mount(p,_,v){if(!h){const I=d._ceVNode||Un(r,i);return I.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),_&&e?e(I,p):n(I,p,v),h=!0,d._container=p,p.__vue_app__=d,cd(I.component)}},onUnmount(p){c.push(p)},unmount(){h&&(kr(c,d._instance,16),n(null,d._container),delete d._container.__vue_app__)},provide(p,_){return s.provides[p]=_,d},runWithContext(p){const _=yo;yo=d;try{return p()}finally{yo=_}}};return d}}let yo=null;function ef(n,e){if(fn){let t=fn.provides;const r=fn.parent&&fn.parent.provides;r===t&&(t=fn.provides=Object.create(r)),t[n]=e}}function Dr(n,e,t=!1){const r=fn||rn;if(r||yo){const i=yo?yo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Ke(e)?e.call(r&&r.proxy):e}}function nV(){return!!(fn||rn||yo)}const eT={},tT=()=>Object.create(eT),nT=n=>Object.getPrototypeOf(n)===eT;function rV(n,e,t,r=!1){const i={},s=tT();n.propsDefaults=Object.create(null),rT(n,e,i,s);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=r?i:CI(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function iV(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=n,c=ot(i),[h]=n.propsOptions;let d=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=n.vnode.dynamicProps;for(let _=0;_<p.length;_++){let v=p[_];if(ad(n.emitsOptions,v))continue;const I=e[v];if(h)if(ft(s,v))I!==s[v]&&(s[v]=I,d=!0);else{const O=Ir(v);i[O]=Bg(h,c,O,I,n,!1)}else I!==s[v]&&(s[v]=I,d=!0)}}}else{rT(n,e,i,s)&&(d=!0);let p;for(const _ in c)(!e||!ft(e,_)&&((p=Lo(_))===_||!ft(e,p)))&&(h?t&&(t[_]!==void 0||t[p]!==void 0)&&(i[_]=Bg(h,c,_,void 0,n,!0)):delete i[_]);if(s!==c)for(const _ in s)(!e||!ft(e,_)&&!0)&&(delete s[_],d=!0)}d&&Ii(n.attrs,"set","")}function rT(n,e,t,r){const[i,s]=n.propsOptions;let a=!1,c;if(e)for(let h in e){if(yc(h))continue;const d=e[h];let p;i&&ft(i,p=Ir(h))?!s||!s.includes(p)?t[p]=d:(c||(c={}))[p]=d:ad(n.emitsOptions,h)||(!(h in r)||d!==r[h])&&(r[h]=d,a=!0)}if(s){const h=ot(t),d=c||It;for(let p=0;p<s.length;p++){const _=s[p];t[_]=Bg(i,h,_,d[_],n,!ft(d,_))}}return a}function Bg(n,e,t,r,i,s){const a=n[t];if(a!=null){const c=ft(a,"default");if(c&&r===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&Ke(h)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const p=hl(i);r=d[t]=h.call(null,e),p()}}else r=h;i.ce&&i.ce._setProp(t,r)}a[0]&&(s&&!c?r=!1:a[1]&&(r===""||r===Lo(t))&&(r=!0))}return r}const sV=new WeakMap;function iT(n,e,t=!1){const r=t?sV:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,a={},c=[];let h=!1;if(!Ke(n)){const p=_=>{h=!0;const[v,I]=iT(_,e,!0);Wt(a,v),I&&c.push(...I)};!t&&e.mixins.length&&e.mixins.forEach(p),n.extends&&p(n.extends),n.mixins&&n.mixins.forEach(p)}if(!s&&!h)return Pt(n)&&r.set(n,Fa),Fa;if(Le(s))for(let p=0;p<s.length;p++){const _=Ir(s[p]);hw(_)&&(a[_]=It)}else if(s)for(const p in s){const _=Ir(p);if(hw(_)){const v=s[p],I=a[_]=Le(v)||Ke(v)?{type:v}:Wt({},v),O=I.type;let M=!1,F=!0;if(Le(O))for(let Q=0;Q<O.length;++Q){const z=O[Q],q=Ke(z)&&z.name;if(q==="Boolean"){M=!0;break}else q==="String"&&(F=!1)}else M=Ke(O)&&O.name==="Boolean";I[0]=M,I[1]=F,(M||ft(I,"default"))&&c.push(_)}}const d=[a,c];return Pt(n)&&r.set(n,d),d}function hw(n){return n[0]!=="$"&&!yc(n)}const sT=n=>n[0]==="_"||n==="$stable",t_=n=>Le(n)?n.map(Gr):[Gr(n)],oV=(n,e,t)=>{if(e._n)return e;const r=CO((...i)=>t_(e(...i)),t);return r._c=!1,r},oT=(n,e,t)=>{const r=n._ctx;for(const i in n){if(sT(i))continue;const s=n[i];if(Ke(s))e[i]=oV(i,s,r);else if(s!=null){const a=t_(s);e[i]=()=>a}}},aT=(n,e)=>{const t=t_(e);n.slots.default=()=>t},uT=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},aV=(n,e,t)=>{const r=n.slots=tT();if(n.vnode.shapeFlag&32){const i=e._;i?(uT(r,e,t),t&&uI(r,"_",i,!0)):oT(e,r)}else e&&aT(n,e)},uV=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,a=It;if(r.shapeFlag&32){const c=e._;c?t&&c===1?s=!1:uT(i,e,t):(s=!e.$stable,oT(e,i)),a=e}else e&&(aT(n,e),a={default:1});if(s)for(const c in i)!sT(c)&&a[c]==null&&delete i[c]},ln=IV;function cV(n){return lV(n)}function lV(n,e){const t=nd();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:c,createComment:h,setText:d,setElementText:p,parentNode:_,nextSibling:v,setScopeId:I=Cr,insertStaticContent:O}=n,M=(R,D,j,ie=null,J=null,ue=null,pe=void 0,le=null,ce=!!D.dynamicChildren)=>{if(R===D)return;R&&!ds(R,D)&&(ie=Z(R),St(R,J,ue,!0),R=null),D.patchFlag===-2&&(ce=!1,D.dynamicChildren=null);const{type:ae,ref:Pe,shapeFlag:ge}=D;switch(ae){case ud:F(R,D,j,ie);break;case Rn:Q(R,D,j,ie);break;case tg:R==null&&z(D,j,ie,pe);break;case Qn:V(R,D,j,ie,J,ue,pe,le,ce);break;default:ge&1?Y(R,D,j,ie,J,ue,pe,le,ce):ge&6?C(R,D,j,ie,J,ue,pe,le,ce):(ge&64||ge&128)&&ae.process(R,D,j,ie,J,ue,pe,le,ce,Ee)}Pe!=null&&J&&Lg(Pe,R&&R.ref,ue,D||R,!D)},F=(R,D,j,ie)=>{if(R==null)r(D.el=c(D.children),j,ie);else{const J=D.el=R.el;D.children!==R.children&&d(J,D.children)}},Q=(R,D,j,ie)=>{R==null?r(D.el=h(D.children||""),j,ie):D.el=R.el},z=(R,D,j,ie)=>{[R.el,R.anchor]=O(R.children,D,j,ie,R.el,R.anchor)},q=({el:R,anchor:D},j,ie)=>{let J;for(;R&&R!==D;)J=v(R),r(R,j,ie),R=J;r(D,j,ie)},W=({el:R,anchor:D})=>{let j;for(;R&&R!==D;)j=v(R),i(R),R=j;i(D)},Y=(R,D,j,ie,J,ue,pe,le,ce)=>{D.type==="svg"?pe="svg":D.type==="math"&&(pe="mathml"),R==null?re(D,j,ie,J,ue,pe,le,ce):A(R,D,J,ue,pe,le,ce)},re=(R,D,j,ie,J,ue,pe,le)=>{let ce,ae;const{props:Pe,shapeFlag:ge,transition:Ie,dirs:De}=R;if(ce=R.el=a(R.type,ue,Pe&&Pe.is,Pe),ge&8?p(ce,R.children):ge&16&&S(R.children,ce,null,ie,J,Zp(R,ue),pe,le),De&&ro(R,null,ie,"created"),P(ce,R,R.scopeId,pe,ie),Pe){for(const Ne in Pe)Ne!=="value"&&!yc(Ne)&&s(ce,Ne,null,Pe[Ne],ue,ie);"value"in Pe&&s(ce,"value",null,Pe.value,ue),(ae=Pe.onVnodeBeforeMount)&&wr(ae,ie,R)}De&&ro(R,null,ie,"beforeMount");const Re=hV(J,Ie);Re&&Ie.beforeEnter(ce),r(ce,D,j),((ae=Pe&&Pe.onVnodeMounted)||Re||De)&&ln(()=>{ae&&wr(ae,ie,R),Re&&Ie.enter(ce),De&&ro(R,null,ie,"mounted")},J)},P=(R,D,j,ie,J)=>{if(j&&I(R,j),ie)for(let ue=0;ue<ie.length;ue++)I(R,ie[ue]);if(J){let ue=J.subTree;if(D===ue||Af(ue.type)&&(ue.ssContent===D||ue.ssFallback===D)){const pe=J.vnode;P(R,pe,pe.scopeId,pe.slotScopeIds,J.parent)}}},S=(R,D,j,ie,J,ue,pe,le,ce=0)=>{for(let ae=ce;ae<R.length;ae++){const Pe=R[ae]=le?ls(R[ae]):Gr(R[ae]);M(null,Pe,D,j,ie,J,ue,pe,le)}},A=(R,D,j,ie,J,ue,pe)=>{const le=D.el=R.el;let{patchFlag:ce,dynamicChildren:ae,dirs:Pe}=D;ce|=R.patchFlag&16;const ge=R.props||It,Ie=D.props||It;let De;if(j&&io(j,!1),(De=Ie.onVnodeBeforeUpdate)&&wr(De,j,D,R),Pe&&ro(D,R,j,"beforeUpdate"),j&&io(j,!0),(ge.innerHTML&&Ie.innerHTML==null||ge.textContent&&Ie.textContent==null)&&p(le,""),ae?x(R.dynamicChildren,ae,le,j,ie,Zp(D,J),ue):pe||$e(R,D,le,null,j,ie,Zp(D,J),ue,!1),ce>0){if(ce&16)N(le,ge,Ie,j,J);else if(ce&2&&ge.class!==Ie.class&&s(le,"class",null,Ie.class,J),ce&4&&s(le,"style",ge.style,Ie.style,J),ce&8){const Re=D.dynamicProps;for(let Ne=0;Ne<Re.length;Ne++){const Xe=Re[Ne],Ht=ge[Xe],kt=Ie[Xe];(kt!==Ht||Xe==="value")&&s(le,Xe,Ht,kt,J,j)}}ce&1&&R.children!==D.children&&p(le,D.children)}else!pe&&ae==null&&N(le,ge,Ie,j,J);((De=Ie.onVnodeUpdated)||Pe)&&ln(()=>{De&&wr(De,j,D,R),Pe&&ro(D,R,j,"updated")},ie)},x=(R,D,j,ie,J,ue,pe)=>{for(let le=0;le<D.length;le++){const ce=R[le],ae=D[le],Pe=ce.el&&(ce.type===Qn||!ds(ce,ae)||ce.shapeFlag&70)?_(ce.el):j;M(ce,ae,Pe,null,ie,J,ue,pe,!0)}},N=(R,D,j,ie,J)=>{if(D!==j){if(D!==It)for(const ue in D)!yc(ue)&&!(ue in j)&&s(R,ue,D[ue],null,J,ie);for(const ue in j){if(yc(ue))continue;const pe=j[ue],le=D[ue];pe!==le&&ue!=="value"&&s(R,ue,le,pe,J,ie)}"value"in j&&s(R,"value",D.value,j.value,J)}},V=(R,D,j,ie,J,ue,pe,le,ce)=>{const ae=D.el=R?R.el:c(""),Pe=D.anchor=R?R.anchor:c("");let{patchFlag:ge,dynamicChildren:Ie,slotScopeIds:De}=D;De&&(le=le?le.concat(De):De),R==null?(r(ae,j,ie),r(Pe,j,ie),S(D.children||[],j,Pe,J,ue,pe,le,ce)):ge>0&&ge&64&&Ie&&R.dynamicChildren?(x(R.dynamicChildren,Ie,j,J,ue,pe,le),(D.key!=null||J&&D===J.subTree)&&n_(R,D,!0)):$e(R,D,j,Pe,J,ue,pe,le,ce)},C=(R,D,j,ie,J,ue,pe,le,ce)=>{D.slotScopeIds=le,R==null?D.shapeFlag&512?J.ctx.activate(D,j,ie,pe,ce):fe(D,j,ie,J,ue,pe,ce):We(R,D,ce)},fe=(R,D,j,ie,J,ue,pe)=>{const le=R.component=xV(R,ie,J);if(sd(R)&&(le.ctx.renderer=Ee),DV(le,!1,pe),le.asyncDep){if(J&&J.registerDep(le,et,pe),!R.el){const ce=le.subTree=Un(Rn);Q(null,ce,D,j)}}else et(le,R,D,j,J,ue,pe)},We=(R,D,j)=>{const ie=D.component=R.component;if(wV(R,D,j))if(ie.asyncDep&&!ie.asyncResolved){Ce(ie,D,j);return}else ie.next=D,ie.update();else D.el=R.el,ie.vnode=D},et=(R,D,j,ie,J,ue,pe)=>{const le=()=>{if(R.isMounted){let{next:ge,bu:Ie,u:De,parent:Re,vnode:Ne}=R;{const Ot=cT(R);if(Ot){ge&&(ge.el=Ne.el,Ce(R,ge,pe)),Ot.asyncDep.then(()=>{R.isUnmounted||le()});return}}let Xe=ge,Ht;io(R,!1),ge?(ge.el=Ne.el,Ce(R,ge,pe)):ge=Ne,Ie&&vc(Ie),(Ht=ge.props&&ge.props.onVnodeBeforeUpdate)&&wr(Ht,Re,ge,Ne),io(R,!0);const kt=eg(R),pn=R.subTree;R.subTree=kt,M(pn,kt,_(pn.el),Z(pn),R,J,ue),ge.el=kt.el,Xe===null&&EV(R,kt.el),De&&ln(De,J),(Ht=ge.props&&ge.props.onVnodeUpdated)&&ln(()=>wr(Ht,Re,ge,Ne),J)}else{let ge;const{el:Ie,props:De}=D,{bm:Re,m:Ne,parent:Xe,root:Ht,type:kt}=R,pn=_o(D);if(io(R,!1),Re&&vc(Re),!pn&&(ge=De&&De.onVnodeBeforeMount)&&wr(ge,Xe,D),io(R,!0),Ie&&at){const Ot=()=>{R.subTree=eg(R),at(Ie,R.subTree,R,J,null)};pn&&kt.__asyncHydrate?kt.__asyncHydrate(Ie,R,Ot):Ot()}else{Ht.ce&&Ht.ce._injectChildStyle(kt);const Ot=R.subTree=eg(R);M(null,Ot,j,ie,R,J,ue),D.el=Ot.el}if(Ne&&ln(Ne,J),!pn&&(ge=De&&De.onVnodeMounted)){const Ot=D;ln(()=>wr(ge,Xe,Ot),J)}(D.shapeFlag&256||Xe&&_o(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&R.a&&ln(R.a,J),R.isMounted=!0,D=j=ie=null}};R.scope.on();const ce=R.effect=new gI(le);R.scope.off();const ae=R.update=ce.run.bind(ce),Pe=R.job=ce.runIfDirty.bind(ce);Pe.i=R,Pe.id=R.uid,ce.scheduler=()=>Qm(Pe),io(R,!0),ae()},Ce=(R,D,j)=>{D.component=R;const ie=R.vnode.props;R.vnode=D,R.next=null,iV(R,D.props,ie,j),uV(R,D.children,j),Ds(),nw(R),ks()},$e=(R,D,j,ie,J,ue,pe,le,ce=!1)=>{const ae=R&&R.children,Pe=R?R.shapeFlag:0,ge=D.children,{patchFlag:Ie,shapeFlag:De}=D;if(Ie>0){if(Ie&128){yn(ae,ge,j,ie,J,ue,pe,le,ce);return}else if(Ie&256){Dn(ae,ge,j,ie,J,ue,pe,le,ce);return}}De&8?(Pe&16&&Zt(ae,J,ue),ge!==ae&&p(j,ge)):Pe&16?De&16?yn(ae,ge,j,ie,J,ue,pe,le,ce):Zt(ae,J,ue,!0):(Pe&8&&p(j,""),De&16&&S(ge,j,ie,J,ue,pe,le,ce))},Dn=(R,D,j,ie,J,ue,pe,le,ce)=>{R=R||Fa,D=D||Fa;const ae=R.length,Pe=D.length,ge=Math.min(ae,Pe);let Ie;for(Ie=0;Ie<ge;Ie++){const De=D[Ie]=ce?ls(D[Ie]):Gr(D[Ie]);M(R[Ie],De,j,null,J,ue,pe,le,ce)}ae>Pe?Zt(R,J,ue,!0,!1,ge):S(D,j,ie,J,ue,pe,le,ce,ge)},yn=(R,D,j,ie,J,ue,pe,le,ce)=>{let ae=0;const Pe=D.length;let ge=R.length-1,Ie=Pe-1;for(;ae<=ge&&ae<=Ie;){const De=R[ae],Re=D[ae]=ce?ls(D[ae]):Gr(D[ae]);if(ds(De,Re))M(De,Re,j,null,J,ue,pe,le,ce);else break;ae++}for(;ae<=ge&&ae<=Ie;){const De=R[ge],Re=D[Ie]=ce?ls(D[Ie]):Gr(D[Ie]);if(ds(De,Re))M(De,Re,j,null,J,ue,pe,le,ce);else break;ge--,Ie--}if(ae>ge){if(ae<=Ie){const De=Ie+1,Re=De<Pe?D[De].el:ie;for(;ae<=Ie;)M(null,D[ae]=ce?ls(D[ae]):Gr(D[ae]),j,Re,J,ue,pe,le,ce),ae++}}else if(ae>Ie)for(;ae<=ge;)St(R[ae],J,ue,!0),ae++;else{const De=ae,Re=ae,Ne=new Map;for(ae=Re;ae<=Ie;ae++){const $t=D[ae]=ce?ls(D[ae]):Gr(D[ae]);$t.key!=null&&Ne.set($t.key,ae)}let Xe,Ht=0;const kt=Ie-Re+1;let pn=!1,Ot=0;const ar=new Array(kt);for(ae=0;ae<kt;ae++)ar[ae]=0;for(ae=De;ae<=ge;ae++){const $t=R[ae];if(Ht>=kt){St($t,J,ue,!0);continue}let vn;if($t.key!=null)vn=Ne.get($t.key);else for(Xe=Re;Xe<=Ie;Xe++)if(ar[Xe-Re]===0&&ds($t,D[Xe])){vn=Xe;break}vn===void 0?St($t,J,ue,!0):(ar[vn-Re]=ae+1,vn>=Ot?Ot=vn:pn=!0,M($t,D[vn],j,null,J,ue,pe,le,ce),Ht++)}const ti=pn?fV(ar):Fa;for(Xe=ti.length-1,ae=kt-1;ae>=0;ae--){const $t=Re+ae,vn=D[$t],qo=$t+1<Pe?D[$t+1].el:ie;ar[ae]===0?M(null,vn,j,qo,J,ue,pe,le,ce):pn&&(Xe<0||ae!==ti[Xe]?Dt(vn,j,qo,2):Xe--)}}},Dt=(R,D,j,ie,J=null)=>{const{el:ue,type:pe,transition:le,children:ce,shapeFlag:ae}=R;if(ae&6){Dt(R.component.subTree,D,j,ie);return}if(ae&128){R.suspense.move(D,j,ie);return}if(ae&64){pe.move(R,D,j,Ee);return}if(pe===Qn){r(ue,D,j);for(let ge=0;ge<ce.length;ge++)Dt(ce[ge],D,j,ie);r(R.anchor,D,j);return}if(pe===tg){q(R,D,j);return}if(ie!==2&&ae&1&&le)if(ie===0)le.beforeEnter(ue),r(ue,D,j),ln(()=>le.enter(ue),J);else{const{leave:ge,delayLeave:Ie,afterLeave:De}=le,Re=()=>r(ue,D,j),Ne=()=>{ge(ue,()=>{Re(),De&&De()})};Ie?Ie(ue,Re,Ne):Ne()}else r(ue,D,j)},St=(R,D,j,ie=!1,J=!1)=>{const{type:ue,props:pe,ref:le,children:ce,dynamicChildren:ae,shapeFlag:Pe,patchFlag:ge,dirs:Ie,cacheIndex:De}=R;if(ge===-2&&(J=!1),le!=null&&Lg(le,null,j,R,!0),De!=null&&(D.renderCache[De]=void 0),Pe&256){D.ctx.deactivate(R);return}const Re=Pe&1&&Ie,Ne=!_o(R);let Xe;if(Ne&&(Xe=pe&&pe.onVnodeBeforeUnmount)&&wr(Xe,D,R),Pe&6)dn(R.component,j,ie);else{if(Pe&128){R.suspense.unmount(j,ie);return}Re&&ro(R,null,D,"beforeUnmount"),Pe&64?R.type.remove(R,D,j,Ee,ie):ae&&!ae.hasOnce&&(ue!==Qn||ge>0&&ge&64)?Zt(ae,D,j,!1,!0):(ue===Qn&&ge&384||!J&&Pe&16)&&Zt(ce,D,j),ie&&Rt(R)}(Ne&&(Xe=pe&&pe.onVnodeUnmounted)||Re)&&ln(()=>{Xe&&wr(Xe,D,R),Re&&ro(R,null,D,"unmounted")},j)},Rt=R=>{const{type:D,el:j,anchor:ie,transition:J}=R;if(D===Qn){Nr(j,ie);return}if(D===tg){W(R);return}const ue=()=>{i(j),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(R.shapeFlag&1&&J&&!J.persisted){const{leave:pe,delayLeave:le}=J,ce=()=>pe(j,ue);le?le(R.el,ue,ce):ce()}else ue()},Nr=(R,D)=>{let j;for(;R!==D;)j=v(R),i(R),R=j;i(D)},dn=(R,D,j)=>{const{bum:ie,scope:J,job:ue,subTree:pe,um:le,m:ce,a:ae}=R;bf(ce),bf(ae),ie&&vc(ie),J.stop(),ue&&(ue.flags|=8,St(pe,R,D,j)),le&&ln(le,D),ln(()=>{R.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},Zt=(R,D,j,ie=!1,J=!1,ue=0)=>{for(let pe=ue;pe<R.length;pe++)St(R[pe],D,j,ie,J)},Z=R=>{if(R.shapeFlag&6)return Z(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const D=v(R.anchor||R.el),j=D&&D[UI];return j?v(j):D};let _e=!1;const de=(R,D,j)=>{R==null?D._vnode&&St(D._vnode,null,null,!0):M(D._vnode||null,R,D,null,null,null,j),D._vnode=R,_e||(_e=!0,nw(),NI(),_e=!1)},Ee={p:M,um:St,m:Dt,r:Rt,mt:fe,mc:S,pc:$e,pbc:x,n:Z,o:n};let He,at;return e&&([He,at]=e(Ee)),{render:de,hydrate:He,createApp:tV(de,He)}}function Zp({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function io({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function hV(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function n_(n,e,t=!1){const r=n.children,i=e.children;if(Le(r)&&Le(i))for(let s=0;s<r.length;s++){const a=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=ls(i[s]),c.el=a.el),!t&&c.patchFlag!==-2&&n_(a,c)),c.type===ud&&(c.el=a.el)}}function fV(n){const e=n.slice(),t=[0];let r,i,s,a,c;const h=n.length;for(r=0;r<h;r++){const d=n[r];if(d!==0){if(i=t[t.length-1],n[i]<d){e[r]=i,t.push(r);continue}for(s=0,a=t.length-1;s<a;)c=s+a>>1,n[t[c]]<d?s=c+1:a=c;d<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function cT(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:cT(e)}function bf(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const dV=Symbol.for("v-scx"),pV=()=>Dr(dV);function $a(n,e,t){return lT(n,e,t)}function lT(n,e,t=It){const{immediate:r,deep:i,flush:s,once:a}=t,c=Wt({},t),h=e&&r||!e&&s!=="post";let d;if(Bc){if(s==="sync"){const I=pV();d=I.__watcherHandles||(I.__watcherHandles=[])}else if(!h){const I=()=>{};return I.stop=Cr,I.resume=Cr,I.pause=Cr,I}}const p=fn;c.call=(I,O,M)=>kr(I,p,O,M);let _=!1;s==="post"?c.scheduler=I=>{ln(I,p&&p.suspense)}:s!=="sync"&&(_=!0,c.scheduler=(I,O)=>{O?I():Qm(I)}),c.augmentJob=I=>{e&&(I.flags|=4),_&&(I.flags|=2,p&&(I.id=p.uid,I.i=p))};const v=AO(n,e,c);return Bc&&(d?d.push(v):h&&v()),v}function gV(n,e,t){const r=this.proxy,i=Mt(n)?n.includes(".")?hT(r,n):()=>r[n]:n.bind(r,r);let s;Ke(e)?s=e:(s=e.handler,t=e);const a=hl(this),c=lT(i,s.bind(r),t);return a(),c}function hT(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const mV=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Ir(e)}Modifiers`]||n[`${Lo(e)}Modifiers`];function _V(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||It;let i=t;const s=e.startsWith("update:"),a=s&&mV(r,e.slice(7));a&&(a.trim&&(i=t.map(p=>Mt(p)?p.trim():p)),a.number&&(i=t.map($k)));let c,h=r[c=jp(e)]||r[c=jp(Ir(e))];!h&&s&&(h=r[c=jp(Lo(e))]),h&&kr(h,n,6,i);const d=r[c+"Once"];if(d){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,kr(d,n,6,i)}}function fT(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let a={},c=!1;if(!Ke(n)){const h=d=>{const p=fT(d,e,!0);p&&(c=!0,Wt(a,p))};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}return!s&&!c?(Pt(n)&&r.set(n,null),null):(Le(s)?s.forEach(h=>a[h]=null):Wt(a,s),Pt(n)&&r.set(n,a),a)}function ad(n,e){return!n||!Zf(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(n,e[0].toLowerCase()+e.slice(1))||ft(n,Lo(e))||ft(n,e))}function eg(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:c,emit:h,render:d,renderCache:p,props:_,data:v,setupState:I,ctx:O,inheritAttrs:M}=n,F=If(n);let Q,z;try{if(t.shapeFlag&4){const W=i||r,Y=W;Q=Gr(d.call(Y,W,p,_,I,v,O)),z=c}else{const W=e;Q=Gr(W.length>1?W(_,{attrs:c,slots:a,emit:h}):W(_,null)),z=e.props?c:yV(c)}}catch(W){bc.length=0,id(W,n,1),Q=Un(Rn)}let q=Q;if(z&&M!==!1){const W=Object.keys(z),{shapeFlag:Y}=q;W.length&&Y&7&&(s&&W.some(Lm)&&(z=vV(z,s)),q=xi(q,z,!1,!0))}return t.dirs&&(q=xi(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(t.dirs):t.dirs),t.transition&&Rs(q,t.transition),Q=q,If(F),Q}const yV=n=>{let e;for(const t in n)(t==="class"||t==="style"||Zf(t))&&((e||(e={}))[t]=n[t]);return e},vV=(n,e)=>{const t={};for(const r in n)(!Lm(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function wV(n,e,t){const{props:r,children:i,component:s}=n,{props:a,children:c,patchFlag:h}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&h>=0){if(h&1024)return!0;if(h&16)return r?fw(r,a,d):!!a;if(h&8){const p=e.dynamicProps;for(let _=0;_<p.length;_++){const v=p[_];if(a[v]!==r[v]&&!ad(d,v))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?fw(r,a,d):!0:!!a;return!1}function fw(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!ad(t,s))return!0}return!1}function EV({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Af=n=>n.__isSuspense;function IV(n,e){e&&e.pendingBranch?Le(n)?e.effects.push(...n):e.effects.push(n):PO(n)}const Qn=Symbol.for("v-fgt"),ud=Symbol.for("v-txt"),Rn=Symbol.for("v-cmt"),tg=Symbol.for("v-stc"),bc=[];let nr=null;function Sf(n=!1){bc.push(nr=n?null:[])}function TV(){bc.pop(),nr=bc[bc.length-1]||null}let Uc=1;function dw(n){Uc+=n,n<0&&nr&&(nr.hasOnce=!0)}function dT(n){return n.dynamicChildren=Uc>0?nr||Fa:null,TV(),Uc>0&&nr&&nr.push(n),n}function L9(n,e,t,r,i,s){return dT(gT(n,e,t,r,i,s,!0))}function Rf(n,e,t,r,i){return dT(Un(n,e,t,r,i,!0))}function Wa(n){return n?n.__v_isVNode===!0:!1}function ds(n,e){return n.type===e.type&&n.key===e.key}const pT=({key:n})=>n!=null?n:null,tf=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Mt(n)||jt(n)||Ke(n)?{i:rn,r:n,k:e,f:!!t}:n:null);function gT(n,e=null,t=null,r=0,i=null,s=n===Qn?0:1,a=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&pT(e),ref:e&&tf(e),scopeId:MI,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rn};return c?(r_(h,t),s&128&&n.normalize(h)):t&&(h.shapeFlag|=Mt(t)?8:16),Uc>0&&!a&&nr&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&nr.push(h),h}const Un=bV;function bV(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===WO)&&(n=Rn),Wa(n)){const c=xi(n,e,!0);return t&&r_(c,t),Uc>0&&!s&&nr&&(c.shapeFlag&6?nr[nr.indexOf(n)]=c:nr.push(c)),c.patchFlag=-2,c}if(NV(n)&&(n=n.__vccOpts),e){e=AV(e);let{class:c,style:h}=e;c&&!Mt(c)&&(e.class=Bm(c)),Pt(h)&&(Gm(h)&&!Le(h)&&(h=Wt({},h)),e.style=Um(h))}const a=Mt(n)?1:Af(n)?128:BI(n)?64:Pt(n)?4:Ke(n)?2:0;return gT(n,e,t,r,i,a,s,!0)}function AV(n){return n?Gm(n)||nT(n)?Wt({},n):n:null}function xi(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:c,transition:h}=n,d=e?RV(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:n.type,props:d,key:d&&pT(d),ref:e&&e.ref?t&&s?Le(s)?s.concat(tf(e)):[s,tf(e)]:tf(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Qn?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:h,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&xi(n.ssContent),ssFallback:n.ssFallback&&xi(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return h&&r&&Rs(p,h.clone(p)),p}function SV(n=" ",e=0){return Un(ud,null,n,e)}function M9(n="",e=!1){return e?(Sf(),Rf(Rn,null,n)):Un(Rn,null,n)}function Gr(n){return n==null||typeof n=="boolean"?Un(Rn):Le(n)?Un(Qn,null,n.slice()):Wa(n)?ls(n):Un(ud,null,String(n))}function ls(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:xi(n)}function r_(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Le(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),r_(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!nT(e)?e._ctx=rn:i===3&&rn&&(rn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:rn},t=32):(e=String(e),r&64?(t=16,e=[SV(e)]):t=8);n.children=e,n.shapeFlag|=t}function RV(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Bm([e.class,r.class]));else if(i==="style")e.style=Um([e.style,r.style]);else if(Zf(i)){const s=e[i],a=r[i];a&&s!==a&&!(Le(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function wr(n,e,t,r=null){kr(n,e,7,[t,r])}const PV=ZI();let CV=0;function xV(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||PV,s={uid:CV++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:iT(r,i),emitsOptions:fT(r,i),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=_V.bind(null,s),n.ce&&n.ce(s),s}let fn=null;const lu=()=>fn||rn;let Pf,$g;{const n=nd(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};Pf=e("__VUE_INSTANCE_SETTERS__",t=>fn=t),$g=e("__VUE_SSR_SETTERS__",t=>Bc=t)}const hl=n=>{const e=fn;return Pf(n),n.scope.on(),()=>{n.scope.off(),Pf(e)}},pw=()=>{fn&&fn.scope.off(),Pf(null)};function mT(n){return n.vnode.shapeFlag&4}let Bc=!1;function DV(n,e=!1,t=!1){e&&$g(e);const{props:r,children:i}=n.vnode,s=mT(n);rV(n,r,s,e),aV(n,i,t);const a=s?kV(n,e):void 0;return e&&$g(!1),a}function kV(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,HO);const{setup:r}=t;if(r){Ds();const i=n.setupContext=r.length>1?VV(n):null,s=hl(n),a=cl(r,n,0,[n.props,i]),c=sI(a);if(ks(),s(),(c||n.sp)&&!_o(n)&&GI(n),c){if(a.then(pw,pw),e)return a.then(h=>{gw(n,h,e)}).catch(h=>{id(h,n,0)});n.asyncDep=a}else gw(n,a,e)}else _T(n,e)}function gw(n,e,t){Ke(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Pt(e)&&(n.setupState=kI(e)),_T(n,t)}let mw;function _T(n,e,t){const r=n.type;if(!n.render){if(!e&&mw&&!r.render){const i=r.template||e_(n).template;if(i){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:c,compilerOptions:h}=r,d=Wt(Wt({isCustomElement:s,delimiters:c},a),h);r.render=mw(i,d)}}n.render=r.render||Cr}{const i=hl(n);Ds();try{QO(n)}finally{ks(),i()}}}const OV={get(n,e){return An(n,"get",""),n[e]}};function VV(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,OV),slots:n.slots,emit:n.emit,expose:e}}function cd(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(kI(Fo(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Tc)return Tc[t](n)},has(e,t){return t in e||t in Tc}})):n.proxy}function qg(n,e=!0){return Ke(n)?n.displayName||n.name:n.name||e&&n.__name}function NV(n){return Ke(n)&&"__vccOpts"in n}const Be=(n,e)=>TO(n,e,Bc);function Ue(n,e,t){const r=arguments.length;return r===2?Pt(e)&&!Le(e)?Wa(e)?Un(n,null,[e]):Un(n,e):Un(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Wa(t)&&(t=[t]),Un(n,e,t))}const LV="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zg;const _w=typeof window!="undefined"&&window.trustedTypes;if(_w)try{zg=_w.createPolicy("vue",{createHTML:n=>n})}catch{}const yT=zg?n=>zg.createHTML(n):n=>n,MV="http://www.w3.org/2000/svg",FV="http://www.w3.org/1998/Math/MathML",Ei=typeof document!="undefined"?document:null,yw=Ei&&Ei.createElement("template"),UV={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Ei.createElementNS(MV,n):e==="mathml"?Ei.createElementNS(FV,n):t?Ei.createElement(n,{is:t}):Ei.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Ei.createTextNode(n),createComment:n=>Ei.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ei.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const a=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{yw.innerHTML=yT(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const c=yw.content;if(r==="svg"||r==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ts="transition",Ju="animation",Ga=Symbol("_vtc"),vT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},wT=Wt({},zI,vT),BV=n=>(n.displayName="Transition",n.props=wT,n),$V=BV((n,{slots:e})=>Ue(VO,ET(n),e)),so=(n,e=[])=>{Le(n)?n.forEach(t=>t(...e)):n&&n(...e)},vw=n=>n?Le(n)?n.some(e=>e.length>1):n.length>1:!1;function ET(n){const e={};for(const V in n)V in vT||(e[V]=n[V]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:c=`${t}-enter-to`,appearFromClass:h=s,appearActiveClass:d=a,appearToClass:p=c,leaveFromClass:_=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:I=`${t}-leave-to`}=n,O=qV(i),M=O&&O[0],F=O&&O[1],{onBeforeEnter:Q,onEnter:z,onEnterCancelled:q,onLeave:W,onLeaveCancelled:Y,onBeforeAppear:re=Q,onAppear:P=z,onAppearCancelled:S=q}=e,A=(V,C,fe)=>{os(V,C?p:c),os(V,C?d:a),fe&&fe()},x=(V,C)=>{V._isLeaving=!1,os(V,_),os(V,I),os(V,v),C&&C()},N=V=>(C,fe)=>{const We=V?P:z,et=()=>A(C,V,fe);so(We,[C,et]),ww(()=>{os(C,V?h:s),wi(C,V?p:c),vw(We)||Ew(C,r,M,et)})};return Wt(e,{onBeforeEnter(V){so(Q,[V]),wi(V,s),wi(V,a)},onBeforeAppear(V){so(re,[V]),wi(V,h),wi(V,d)},onEnter:N(!1),onAppear:N(!0),onLeave(V,C){V._isLeaving=!0;const fe=()=>x(V,C);wi(V,_),wi(V,v),TT(),ww(()=>{!V._isLeaving||(os(V,_),wi(V,I),vw(W)||Ew(V,r,F,fe))}),so(W,[V,fe])},onEnterCancelled(V){A(V,!1),so(q,[V])},onAppearCancelled(V){A(V,!0),so(S,[V])},onLeaveCancelled(V){x(V),so(Y,[V])}})}function qV(n){if(n==null)return null;if(Pt(n))return[ng(n.enter),ng(n.leave)];{const e=ng(n);return[e,e]}}function ng(n){return qk(n)}function wi(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ga]||(n[Ga]=new Set)).add(e)}function os(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ga];t&&(t.delete(e),t.size||(n[Ga]=void 0))}function ww(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let zV=0;function Ew(n,e,t,r){const i=n._endId=++zV,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:c,propCount:h}=IT(n,e);if(!a)return r();const d=a+"end";let p=0;const _=()=>{n.removeEventListener(d,v),s()},v=I=>{I.target===n&&++p>=h&&_()};setTimeout(()=>{p<h&&_()},c+1),n.addEventListener(d,v)}function IT(n,e){const t=window.getComputedStyle(n),r=O=>(t[O]||"").split(", "),i=r(`${ts}Delay`),s=r(`${ts}Duration`),a=Iw(i,s),c=r(`${Ju}Delay`),h=r(`${Ju}Duration`),d=Iw(c,h);let p=null,_=0,v=0;e===ts?a>0&&(p=ts,_=a,v=s.length):e===Ju?d>0&&(p=Ju,_=d,v=h.length):(_=Math.max(a,d),p=_>0?a>d?ts:Ju:null,v=p?p===ts?s.length:h.length:0);const I=p===ts&&/\b(transform|all)(,|$)/.test(r(`${ts}Property`).toString());return{type:p,timeout:_,propCount:v,hasTransform:I}}function Iw(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>Tw(t)+Tw(n[r])))}function Tw(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function TT(){return document.body.offsetHeight}function KV(n,e,t){const r=n[Ga];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Cf=Symbol("_vod"),bT=Symbol("_vsh"),F9={beforeMount(n,{value:e},{transition:t}){n[Cf]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Yu(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Yu(n,!0),r.enter(n)):r.leave(n,()=>{Yu(n,!1)}):Yu(n,e))},beforeUnmount(n,{value:e}){Yu(n,e)}};function Yu(n,e){n.style.display=e?n[Cf]:"none",n[bT]=!e}const jV=Symbol(""),WV=/(^|;)\s*display\s*:/;function GV(n,e,t){const r=n.style,i=Mt(t);let s=!1;if(t&&!i){if(e)if(Mt(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();t[c]==null&&nf(r,c,"")}else for(const a in e)t[a]==null&&nf(r,a,"");for(const a in t)a==="display"&&(s=!0),nf(r,a,t[a])}else if(i){if(e!==t){const a=r[jV];a&&(t+=";"+a),r.cssText=t,s=WV.test(t)}}else e&&n.removeAttribute("style");Cf in n&&(n[Cf]=s?r.display:"",n[bT]&&(r.display="none"))}const bw=/\s*!important$/;function nf(n,e,t){if(Le(t))t.forEach(r=>nf(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=HV(n,e);bw.test(t)?n.setProperty(Lo(r),t.replace(bw,""),"important"):n[r]=t}}const Aw=["Webkit","Moz","ms"],rg={};function HV(n,e){const t=rg[e];if(t)return t;let r=Ir(e);if(r!=="filter"&&r in n)return rg[e]=r;r=td(r);for(let i=0;i<Aw.length;i++){const s=Aw[i]+r;if(s in n)return rg[e]=s}return e}const Sw="http://www.w3.org/1999/xlink";function Rw(n,e,t,r,i,s=Hk(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Sw,e.slice(6,e.length)):n.setAttributeNS(Sw,e,t):t==null||s&&!cI(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Vi(t)?String(t):t)}function Pw(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?yT(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const c=s==="OPTION"?n.getAttribute("value")||"":n.value,h=t==null?n.type==="checkbox"?"on":"":String(t);(c!==h||!("_value"in n))&&(n.value=h),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=cI(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(i||e)}function QV(n,e,t,r){n.addEventListener(e,t,r)}function JV(n,e,t,r){n.removeEventListener(e,t,r)}const Cw=Symbol("_vei");function YV(n,e,t,r,i=null){const s=n[Cw]||(n[Cw]={}),a=s[e];if(r&&a)a.value=r;else{const[c,h]=XV(e);if(r){const d=s[e]=tN(r,i);QV(n,c,d,h)}else a&&(JV(n,c,a,h),s[e]=void 0)}}const xw=/(?:Once|Passive|Capture)$/;function XV(n){let e;if(xw.test(n)){e={};let r;for(;r=n.match(xw);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Lo(n.slice(2)),e]}let ig=0;const ZV=Promise.resolve(),eN=()=>ig||(ZV.then(()=>ig=0),ig=Date.now());function tN(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;kr(nN(r,t.value),e,5,[r])};return t.value=n,t.attached=eN(),t}function nN(n,e){if(Le(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Dw=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,rN=(n,e,t,r,i,s)=>{const a=i==="svg";e==="class"?KV(n,r,a):e==="style"?GV(n,t,r):Zf(e)?Lm(e)||YV(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):iN(n,e,r,a))?(Pw(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Rw(n,e,r,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Mt(r))?Pw(n,Ir(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Rw(n,e,r,a))};function iN(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Dw(e)&&Ke(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Dw(e)&&Mt(t)?!1:e in n}const AT=new WeakMap,ST=new WeakMap,xf=Symbol("_moveCb"),kw=Symbol("_enterCb"),sN=n=>(delete n.props.mode,n),oN=sN({name:"TransitionGroup",props:Wt({},wT,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=lu(),r=qI();let i,s;return Zm(()=>{if(!i.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!hN(i[0].el,t.vnode.el,a))return;i.forEach(uN),i.forEach(cN);const c=i.filter(lN);TT(),c.forEach(h=>{const d=h.el,p=d.style;wi(d,a),p.transform=p.webkitTransform=p.transitionDuration="";const _=d[xf]=v=>{v&&v.target!==d||(!v||/transform$/.test(v.propertyName))&&(d.removeEventListener("transitionend",_),d[xf]=null,os(d,a))};d.addEventListener("transitionend",_)})}),()=>{const a=ot(n),c=ET(a);let h=a.tag||Qn;if(i=[],s)for(let d=0;d<s.length;d++){const p=s[d];p.el&&p.el instanceof Element&&(i.push(p),Rs(p,Fc(p,c,r,t)),AT.set(p,p.el.getBoundingClientRect()))}s=e.default?Jm(e.default()):[];for(let d=0;d<s.length;d++){const p=s[d];p.key!=null&&Rs(p,Fc(p,c,r,t))}return Un(h,null,s)}}}),aN=oN;function uN(n){const e=n.el;e[xf]&&e[xf](),e[kw]&&e[kw]()}function cN(n){ST.set(n,n.el.getBoundingClientRect())}function lN(n){const e=AT.get(n),t=ST.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function hN(n,e,t){const r=n.cloneNode(),i=n[Ga];i&&i.forEach(c=>{c.split(/\s+/).forEach(h=>h&&r.classList.remove(h))}),t.split(/\s+/).forEach(c=>c&&r.classList.add(c)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:a}=IT(r);return s.removeChild(r),a}const fN=["ctrl","shift","alt","meta"],dN={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>fN.some(t=>n[`${t}Key`]&&!e.includes(t))},U9=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let a=0;a<e.length;a++){const c=dN[e[a]];if(c&&c(i,e))return}return n(i,...s)})},pN=Wt({patchProp:rN},UV);let Ow;function gN(){return Ow||(Ow=cV(pN))}const RT=(...n)=>{const e=gN().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=_N(r);if(!i)return;const s=e._component;!Ke(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,mN(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function mN(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function _N(n){return Mt(n)?document.querySelector(n):n}function i_(n,e,t,r){return Object.defineProperty(n,e,{get:t,set:r,enumerable:!0}),n}const To=Io(!1);let Kg;function yN(n,e){const t=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(n)||/(opr)[\/]([\w.]+)/.exec(n)||/(vivaldi)[\/]([\w.]+)/.exec(n)||/(chrome|crios)[\/]([\w.]+)/.exec(n)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(firefox|fxios)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(n)||[];return{browser:t[5]||t[3]||t[1]||"",version:t[4]||t[2]||"0",platform:e[0]||""}}function vN(n){return/(ipad)/.exec(n)||/(ipod)/.exec(n)||/(windows phone)/.exec(n)||/(iphone)/.exec(n)||/(kindle)/.exec(n)||/(silk)/.exec(n)||/(android)/.exec(n)||/(win)/.exec(n)||/(mac)/.exec(n)||/(linux)/.exec(n)||/(cros)/.exec(n)||/(playbook)/.exec(n)||/(bb)/.exec(n)||/(blackberry)/.exec(n)||[]}const PT="ontouchstart"in window||window.navigator.maxTouchPoints>0;function wN(n){const e=n.toLowerCase(),t=vN(e),r=yN(e,t),i={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(i[r.browser]=!0,i.version=r.version,i.versionNumber=parseInt(r.version,10)),r.platform&&(i[r.platform]=!0);const s=i.android||i.ios||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"];if(s===!0||e.indexOf("mobile")!==-1?i.mobile=!0:i.desktop=!0,i["windows phone"]&&(i.winphone=!0,delete i["windows phone"]),i.edga||i.edgios||i.edg?(i.edge=!0,r.browser="edge"):i.crios?(i.chrome=!0,r.browser="chrome"):i.fxios&&(i.firefox=!0,r.browser="firefox"),(i.ipod||i.ipad||i.iphone)&&(i.ios=!0),i.vivaldi&&(r.browser="vivaldi",i.vivaldi=!0),(i.chrome||i.opr||i.safari||i.vivaldi||i.mobile===!0&&i.ios!==!0&&s!==!0)&&(i.webkit=!0),i.opr&&(r.browser="opera",i.opera=!0),i.safari&&(i.blackberry||i.bb?(r.browser="blackberry",i.blackberry=!0):i.playbook?(r.browser="playbook",i.playbook=!0):i.android?(r.browser="android",i.android=!0):i.kindle?(r.browser="kindle",i.kindle=!0):i.silk&&(r.browser="silk",i.silk=!0)),i.name=r.browser,i.platform=r.platform,e.indexOf("electron")!==-1)i.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)i.bex=!0;else{if(window.Capacitor!==void 0?(i.capacitor=!0,i.nativeMobile=!0,i.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(i.cordova=!0,i.nativeMobile=!0,i.nativeMobileWrapper="cordova"),To.value===!0&&(Kg={is:{...i}}),PT===!0&&i.mac===!0&&(i.desktop===!0&&i.safari===!0||i.nativeMobile===!0&&i.android!==!0&&i.ios!==!0&&i.ipad!==!0)){delete i.mac,delete i.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(i,{mobile:!0,ios:!0,platform:a,[a]:!0})}i.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete i.desktop,i.mobile=!0)}return i}const Vw=navigator.userAgent||navigator.vendor||window.opera,EN={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Yr={userAgent:Vw,is:wN(Vw),has:{touch:PT},within:{iframe:window.self!==window.top}},jg={install(n){const{$q:e}=n;To.value===!0?(n.onSSRHydrated.push(()=>{Object.assign(e.platform,Yr),To.value=!1}),e.platform=Mo(this)):e.platform=this}};{let n;i_(Yr.has,"webStorage",()=>{if(n!==void 0)return n;try{if(window.localStorage)return n=!0,!0}catch{}return n=!1,!1}),Object.assign(jg,Yr),To.value===!0&&(Object.assign(jg,Kg,EN),Kg=null)}function fl(n){return Fo(Ym(n))}function IN(n){return Fo(n)}const ld=(n,e)=>{const t=Mo(n);for(const r in n)i_(e,r,()=>t[r],i=>{t[r]=i});return e},bo={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const n=Object.defineProperty({},"passive",{get(){Object.assign(bo,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,n),window.removeEventListener("qtest",null,n)}catch{}function $c(){}function B9(n){return n.button===0}function TN(n){return n.touches&&n.touches[0]?n=n.touches[0]:n.changedTouches&&n.changedTouches[0]?n=n.changedTouches[0]:n.targetTouches&&n.targetTouches[0]&&(n=n.targetTouches[0]),{top:n.clientY,left:n.clientX}}function $9(n){if(n.path)return n.path;if(n.composedPath)return n.composedPath();const e=[];let t=n.target;for(;t;){if(e.push(t),t.tagName==="HTML")return e.push(document),e.push(window),e;t=t.parentElement}}function CT(n){n.stopPropagation()}function Wg(n){n.cancelable!==!1&&n.preventDefault()}function wa(n){n.cancelable!==!1&&n.preventDefault(),n.stopPropagation()}function q9(n,e){if(n===void 0||e===!0&&n.__dragPrevented===!0)return;const t=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",Wg,bo.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",Wg,bo.notPassiveCapture)};n.querySelectorAll("a, img").forEach(t)}function bN(n,e,t){const r=`__q_${e}_evt`;n[r]=n[r]!==void 0?n[r].concat(t):t,t.forEach(i=>{i[0].addEventListener(i[1],n[i[2]],bo[i[3]])})}function AN(n,e){const t=`__q_${e}_evt`;n[t]!==void 0&&(n[t].forEach(r=>{r[0].removeEventListener(r[1],n[r[2]],bo[r[3]])}),n[t]=void 0)}function SN(n,e=250,t){let r=null;function i(){const s=arguments,a=()=>{r=null,t!==!0&&n.apply(this,s)};r!==null?clearTimeout(r):t===!0&&n.apply(this,s),r=setTimeout(a,e)}return i.cancel=()=>{r!==null&&clearTimeout(r)},i}const sg=["sm","md","lg","xl"],{passive:Nw}=bo;var RN=ld({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:$c,setDebounce:$c,install({$q:n,onSSRHydrated:e}){if(n.screen=this,this.__installed===!0){n.config.screen!==void 0&&(n.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:t}=window,r=t||window,i=document.scrollingElement||document.documentElement,s=t===void 0||Yr.is.mobile===!0?()=>[Math.max(window.innerWidth,i.clientWidth),Math.max(window.innerHeight,i.clientHeight)]:()=>[t.width*t.scale+window.innerWidth-i.clientWidth,t.height*t.scale+window.innerHeight-i.clientHeight],a=n.config.screen!==void 0&&n.config.screen.bodyClasses===!0;this.__update=_=>{const[v,I]=s();if(I!==this.height&&(this.height=I),v!==this.width)this.width=v;else if(_!==!0)return;let O=this.sizes;this.gt.xs=v>=O.sm,this.gt.sm=v>=O.md,this.gt.md=v>=O.lg,this.gt.lg=v>=O.xl,this.lt.sm=v<O.sm,this.lt.md=v<O.md,this.lt.lg=v<O.lg,this.lt.xl=v<O.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,O=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",O!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${O}`)),this.name=O)};let c,h={},d=16;this.setSizes=_=>{sg.forEach(v=>{_[v]!==void 0&&(h[v]=_[v])})},this.setDebounce=_=>{d=_};const p=()=>{const _=getComputedStyle(document.body);_.getPropertyValue("--q-size-sm")&&sg.forEach(v=>{this.sizes[v]=parseInt(_.getPropertyValue(`--q-size-${v}`),10)}),this.setSizes=v=>{sg.forEach(I=>{v[I]&&(this.sizes[I]=v[I])}),this.__update(!0)},this.setDebounce=v=>{c!==void 0&&r.removeEventListener("resize",c,Nw),c=v>0?SN(this.__update,v):this.__update,r.addEventListener("resize",c,Nw)},this.setDebounce(d),Object.keys(h).length!==0?(this.setSizes(h),h=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};To.value===!0?e.push(p):p()}});const Tn=ld({isActive:!1,mode:!1},{__media:void 0,set(n){Tn.mode=n,n==="auto"?(Tn.__media===void 0&&(Tn.__media=window.matchMedia("(prefers-color-scheme: dark)"),Tn.__updateMedia=()=>{Tn.set("auto")},Tn.__media.addListener(Tn.__updateMedia)),n=Tn.__media.matches):Tn.__media!==void 0&&(Tn.__media.removeListener(Tn.__updateMedia),Tn.__media=void 0),Tn.isActive=n===!0,document.body.classList.remove(`body--${n===!0?"light":"dark"}`),document.body.classList.add(`body--${n===!0?"dark":"light"}`)},toggle(){Tn.set(Tn.isActive===!1)},install({$q:n,ssrContext:e}){const{dark:t}=n.config;n.dark=this,this.__installed!==!0&&this.set(t!==void 0?t:!1)}});function PN(n,e,t=document.body){if(typeof n!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(t instanceof Element))throw new TypeError("Expected a DOM element");t.style.setProperty(`--q-${n}`,e)}let xT=!1;function CN(n){xT=n.isComposing===!0}function xN(n){return xT===!0||n!==Object(n)||n.isComposing===!0||n.qKeyEvent===!0}function Gg(n,e){return xN(n)===!0?!1:[].concat(e).includes(n.keyCode)}function DT(n){if(n.ios===!0)return"ios";if(n.android===!0)return"android"}function DN({is:n,has:e,within:t},r){const i=[n.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(n.mobile===!0){const s=DT(n);s!==void 0&&i.push("platform-"+s)}if(n.nativeMobile===!0){const s=n.nativeMobileWrapper;i.push(s),i.push("native-mobile"),n.ios===!0&&(r[s]===void 0||r[s].iosStatusBarPadding!==!1)&&i.push("q-ios-padding")}else n.electron===!0?i.push("electron"):n.bex===!0&&i.push("bex");return t.iframe===!0&&i.push("within-iframe"),i}function kN(){const{is:n}=Yr,e=document.body.className,t=new Set(e.replace(/ {2}/g," ").split(" "));if(n.nativeMobile!==!0&&n.electron!==!0&&n.bex!==!0){if(n.desktop===!0)t.delete("mobile"),t.delete("platform-ios"),t.delete("platform-android"),t.add("desktop");else if(n.mobile===!0){t.delete("desktop"),t.add("mobile"),t.delete("platform-ios"),t.delete("platform-android");const i=DT(n);i!==void 0&&t.add(`platform-${i}`)}}Yr.has.touch===!0&&(t.delete("no-touch"),t.add("touch")),Yr.within.iframe===!0&&t.add("within-iframe");const r=Array.from(t).join(" ");e!==r&&(document.body.className=r)}function ON(n){for(const e in n)PN(e,n[e])}var VN={install(n){if(this.__installed!==!0){if(To.value===!0)kN();else{const{$q:e}=n;e.config.brand!==void 0&&ON(e.config.brand);const t=DN(Yr,e.config);document.body.classList.add.apply(document.body.classList,t)}Yr.is.ios===!0&&document.body.addEventListener("touchstart",$c),window.addEventListener("keydown",CN,!0)}}};const kT=()=>!0;function NN(n){return typeof n=="string"&&n!==""&&n!=="/"&&n!=="#/"}function LN(n){return n.startsWith("#")===!0&&(n=n.substring(1)),n.startsWith("/")===!1&&(n="/"+n),n.endsWith("/")===!0&&(n=n.substring(0,n.length-1)),"#"+n}function MN(n){if(n.backButtonExit===!1)return()=>!1;if(n.backButtonExit==="*")return kT;const e=["#/"];return Array.isArray(n.backButtonExit)===!0&&e.push(...n.backButtonExit.filter(NN).map(LN)),()=>e.includes(window.location.hash)}var FN={__history:[],add:$c,remove:$c,install({$q:n}){if(this.__installed===!0)return;const{cordova:e,capacitor:t}=Yr.is;if(e!==!0&&t!==!0)return;const r=n.config[e===!0?"cordova":"capacitor"];if(r!==void 0&&r.backButton===!1||t===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=a=>{a.condition===void 0&&(a.condition=kT),this.__history.push(a)},this.remove=a=>{const c=this.__history.indexOf(a);c>=0&&this.__history.splice(c,1)};const i=MN(Object.assign({backButtonExit:!0},r)),s=()=>{if(this.__history.length){const a=this.__history[this.__history.length-1];a.condition()===!0&&(this.__history.pop(),a.handler())}else i()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",s,!1)}):window.Capacitor.Plugins.App.addListener("backButton",s)}},Lw={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:n=>n?`Expand "${n}"`:"Expand",collapse:n=>n?`Collapse "${n}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:n=>n===1?"1 record selected.":(n===0?"No":n)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(n,e,t)=>n+"-"+e+" of "+t,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Mw(){const n=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof n=="string")return n.split(/[-_]/).map((e,t)=>t===0?e.toLowerCase():t>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const hs=ld({__qLang:{}},{getLocale:Mw,set(n=Lw,e){const t={...n,rtl:n.rtl===!0,getLocale:Mw};{if(t.set=hs.set,hs.__langConfig===void 0||hs.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",t.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",t.isoName)}Object.assign(hs.__qLang,t)}},install({$q:n,lang:e,ssrContext:t}){n.lang=hs.__qLang,hs.__langConfig=n.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set"&&i!=="getLocale")}}),this.set(e||Lw))}});var UN={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const Df=ld({iconMapFn:null,__qIconSet:{}},{set(n,e){const t={...n};t.set=Df.set,Object.assign(Df.__qIconSet,t)},install({$q:n,iconSet:e,ssrContext:t}){n.config.iconMapFn!==void 0&&(this.iconMapFn=n.config.iconMapFn),n.iconSet=this.__qIconSet,i_(n,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set")}}),this.set(e||UN))}}),BN="_q_",z9="_q_l_",K9="_q_pc_",j9="_q_fo_",W9="_q_tabs_";function G9(){}const kf={};let OT=!1;function $N(){OT=!0}function og(n,e){if(n===e)return!0;if(n!==null&&e!==null&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;let t,r;if(n.constructor===Array){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(og(n[r],e[r])!==!0)return!1;return!0}if(n.constructor===Map){if(n.size!==e.size)return!1;let s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}for(s=n.entries(),r=s.next();r.done!==!0;){if(og(r.value[1],e.get(r.value[0]))!==!0)return!1;r=s.next()}return!0}if(n.constructor===Set){if(n.size!==e.size)return!1;const s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}return!0}if(n.buffer!=null&&n.buffer.constructor===ArrayBuffer){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const i=Object.keys(n).filter(s=>n[s]!==void 0);if(t=i.length,t!==Object.keys(e).filter(s=>e[s]!==void 0).length)return!1;for(r=t;r--!==0;){const s=i[r];if(og(n[s],e[s])!==!0)return!1}return!0}return n!==n&&e!==e}function qc(n){return n!==null&&typeof n=="object"&&Array.isArray(n)!==!0}const Fw=[jg,VN,Tn,RN,FN,hs,Df];function qN(n,e){const t=RT(n);t.config.globalProperties=e.config.globalProperties;const{reload:r,...i}=e._context;return Object.assign(t._context,i),t}function Uw(n,e){e.forEach(t=>{t.install(n),t.__installed=!0})}function zN(n,e,t){n.config.globalProperties.$q=t.$q,n.provide(BN,t.$q),Uw(t,Fw),e.components!==void 0&&Object.values(e.components).forEach(r=>{qc(r)===!0&&r.name!==void 0&&n.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{qc(r)===!0&&r.name!==void 0&&n.directive(r.name,r)}),e.plugins!==void 0&&Uw(t,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&Fw.includes(r)===!1)),To.value===!0&&(t.$q.onSSRHydrated=()=>{t.onSSRHydrated.forEach(r=>{r()}),t.$q.onSSRHydrated=()=>{}})}var KN=function(n,e={}){const t={version:"2.17.1"};OT===!1?(e.config!==void 0&&Object.assign(kf,e.config),t.config={...kf},$N()):t.config=e.config||{},zN(n,e,{parentApp:n,$q:t,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},jN={name:"Quasar",version:"2.17.1",install:KN,lang:hs,iconSet:Df},WN=!1;/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let VT;const hd=n=>VT=n,NT=Symbol();function Hg(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Ac;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Ac||(Ac={}));function GN(){const n=dI(!0),e=n.run(()=>Io({}));let t=[],r=[];const i=Fo({install(s){hd(i),i._a=s,s.provide(NT,i),s.config.globalProperties.$pinia=i,r.forEach(a=>t.push(a)),r=[]},use(s){return!this._a&&!WN?r.push(s):t.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const LT=()=>{};function Bw(n,e,t,r=LT){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&pI()&&Jk(i),i}function Ea(n,...e){n.slice().forEach(t=>{t(...e)})}const HN=n=>n(),$w=Symbol(),ag=Symbol();function Qg(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];Hg(i)&&Hg(r)&&n.hasOwnProperty(t)&&!jt(r)&&!Es(r)?n[t]=Qg(i,r):n[t]=r}return n}const QN=Symbol();function JN(n){return!Hg(n)||!n.hasOwnProperty(QN)}const{assign:as}=Object;function YN(n){return!!(jt(n)&&n.effect)}function XN(n,e,t,r){const{state:i,actions:s,getters:a}=e,c=t.state.value[n];let h;function d(){c||(t.state.value[n]=i?i():{});const p=vO(t.state.value[n]);return as(p,s,Object.keys(a||{}).reduce((_,v)=>(_[v]=Fo(Be(()=>{hd(t);const I=t._s.get(n);return a[v].call(I,I)})),_),{}))}return h=MT(n,d,e,t,r,!0),h}function MT(n,e,t={},r,i,s){let a;const c=as({actions:{}},t),h={deep:!0};let d,p,_=[],v=[],I;const O=r.state.value[n];!s&&!O&&(r.state.value[n]={}),Io({});let M;function F(S){let A;d=p=!1,typeof S=="function"?(S(r.state.value[n]),A={type:Ac.patchFunction,storeId:n,events:I}):(Qg(r.state.value[n],S),A={type:Ac.patchObject,payload:S,storeId:n,events:I});const x=M=Symbol();Hm().then(()=>{M===x&&(d=!0)}),p=!0,Ea(_,A,r.state.value[n])}const Q=s?function(){const{state:A}=t,x=A?A():{};this.$patch(N=>{as(N,x)})}:LT;function z(){a.stop(),_=[],v=[],r._s.delete(n)}const q=(S,A="")=>{if($w in S)return S[ag]=A,S;const x=function(){hd(r);const N=Array.from(arguments),V=[],C=[];function fe(Ce){V.push(Ce)}function We(Ce){C.push(Ce)}Ea(v,{args:N,name:x[ag],store:Y,after:fe,onError:We});let et;try{et=S.apply(this&&this.$id===n?this:Y,N)}catch(Ce){throw Ea(C,Ce),Ce}return et instanceof Promise?et.then(Ce=>(Ea(V,Ce),Ce)).catch(Ce=>(Ea(C,Ce),Promise.reject(Ce))):(Ea(V,et),et)};return x[$w]=!0,x[ag]=A,x},W={_p:r,$id:n,$onAction:Bw.bind(null,v),$patch:F,$reset:Q,$subscribe(S,A={}){const x=Bw(_,S,A.detached,()=>N()),N=a.run(()=>$a(()=>r.state.value[n],V=>{(A.flush==="sync"?p:d)&&S({storeId:n,type:Ac.direct,events:I},V)},as({},h,A)));return x},$dispose:z},Y=Mo(W);r._s.set(n,Y);const P=(r._a&&r._a.runWithContext||HN)(()=>r._e.run(()=>(a=dI()).run(()=>e({action:q}))));for(const S in P){const A=P[S];if(jt(A)&&!YN(A)||Es(A))s||(O&&JN(A)&&(jt(A)?A.value=O[S]:Qg(A,O[S])),r.state.value[n][S]=A);else if(typeof A=="function"){const x=q(A,S);P[S]=x,c.actions[S]=A}}return as(Y,P),as(ot(Y),P),Object.defineProperty(Y,"$state",{get:()=>r.state.value[n],set:S=>{F(A=>{as(A,S)})}}),r._p.forEach(S=>{as(Y,a.run(()=>S({store:Y,app:r._a,pinia:r,options:c})))}),O&&s&&t.hydrate&&t.hydrate(Y.$state,O),d=!0,p=!0,Y}/*! #__NO_SIDE_EFFECTS__ */function ZN(n,e,t){let r,i;const s=typeof e=="function";typeof n=="string"?(r=n,i=s?t:e):(i=n,r=n.id);function a(c,h){const d=nV();return c=c||(d?Dr(NT,null):null),c&&hd(c),c=VT,c._s.has(r)||(s?MT(r,e,i,c):XN(r,i,c)),c._s.get(r)}return a.$id=r,a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},eL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],c=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},UT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,c=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4;let v=(c&15)<<2|d>>6,I=d&63;h||(I=64,a||(v=64)),r.push(t[p],t[_],t[v],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||_==null)throw new tL;const v=s<<2|c>>4;if(r.push(v),d!==64){const I=c<<4&240|d>>2;if(r.push(I),_!==64){const O=d<<6&192|_;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nL=function(n){const e=FT(n);return UT.encodeByteArray(e,!0)},BT=function(n){return nL(n).replace(/\./g,"")},$T=function(n){try{return UT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=()=>rL().__FIREBASE_DEFAULTS__,sL=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oL=()=>{if(typeof document=="undefined")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$T(n[1]);return e&&JSON.parse(e)},fd=()=>{try{return iL()||sL()||oL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aL=n=>{var e,t;return(t=(e=fd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qT=()=>{var n;return(n=fd())===null||n===void 0?void 0:n.config},zT=n=>{var e;return(e=fd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cL(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function lL(){var n;const e=(n=fd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hL(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function fL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pL(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KT(){return!lL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jT(){try{return typeof indexedDB=="object"}catch{return!1}}function gL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL="FirebaseError";class Li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mL,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?_L(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Li(i,c,r)}}function _L(n,e){return n.replace(yL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yL=/\{\$([^}]+)}/g;function vL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(qw(s)&&qw(a)){if(!zc(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function qw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function hc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function wL(n,e){const t=new EL(n,e);return t.subscribe.bind(t)}class EL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");IL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ug),i.error===void 0&&(i.error=ug),i.complete===void 0&&(i.complete=ug);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ug(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class Ao{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AL(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(!!r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bL(n){return n===uo?void 0:n}function AL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const RL={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},PL=nt.INFO,CL={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},xL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=CL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s_{constructor(e){this.name=e,this._logLevel=PL,this._logHandler=xL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const DL=(n,e)=>e.some(t=>n instanceof t);let zw,Kw;function kL(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OL(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WT=new WeakMap,Jg=new WeakMap,GT=new WeakMap,cg=new WeakMap,o_=new WeakMap;function VL(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Is(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&WT.set(t,n)}).catch(()=>{}),o_.set(e,n),e}function NL(n){if(Jg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Jg.set(n,e)}let Yg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Jg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Is(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LL(n){Yg=n(Yg)}function ML(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(lg(this),e,...t);return GT.set(r,e.sort?e.sort():[e]),Is(r)}:OL().includes(n)?function(...e){return n.apply(lg(this),e),Is(WT.get(this))}:function(...e){return Is(n.apply(lg(this),e))}}function FL(n){return typeof n=="function"?ML(n):(n instanceof IDBTransaction&&NL(n),DL(n,kL())?new Proxy(n,Yg):n)}function Is(n){if(n instanceof IDBRequest)return VL(n);if(cg.has(n))return cg.get(n);const e=FL(n);return e!==n&&(cg.set(n,e),o_.set(e,n)),e}const lg=n=>o_.get(n);function UL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=Is(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Is(a.result),h.oldVersion,h.newVersion,Is(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const BL=["get","getKey","getAll","getAllKeys","count"],$L=["put","add","delete","clear"],hg=new Map;function jw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hg.get(e))return hg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=$L.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BL.includes(t)))return;const s=async function(a,...c){const h=this.transaction(a,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return hg.set(e,s),s}LL(n=>({...n,get:(e,t,r)=>jw(e,t)||n.get(e,t,r),has:(e,t)=>!!jw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function zL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xg="@firebase/app",Ww="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new s_("@firebase/app"),KL="@firebase/app-compat",jL="@firebase/analytics-compat",WL="@firebase/analytics",GL="@firebase/app-check-compat",HL="@firebase/app-check",QL="@firebase/auth",JL="@firebase/auth-compat",YL="@firebase/database",XL="@firebase/data-connect",ZL="@firebase/database-compat",eM="@firebase/functions",tM="@firebase/functions-compat",nM="@firebase/installations",rM="@firebase/installations-compat",iM="@firebase/messaging",sM="@firebase/messaging-compat",oM="@firebase/performance",aM="@firebase/performance-compat",uM="@firebase/remote-config",cM="@firebase/remote-config-compat",lM="@firebase/storage",hM="@firebase/storage-compat",fM="@firebase/firestore",dM="@firebase/vertexai-preview",pM="@firebase/firestore-compat",gM="firebase",mM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="[DEFAULT]",_M={[Xg]:"fire-core",[KL]:"fire-core-compat",[WL]:"fire-analytics",[jL]:"fire-analytics-compat",[HL]:"fire-app-check",[GL]:"fire-app-check-compat",[QL]:"fire-auth",[JL]:"fire-auth-compat",[YL]:"fire-rtdb",[XL]:"fire-data-connect",[ZL]:"fire-rtdb-compat",[eM]:"fire-fn",[tM]:"fire-fn-compat",[nM]:"fire-iid",[rM]:"fire-iid-compat",[iM]:"fire-fcm",[sM]:"fire-fcm-compat",[oM]:"fire-perf",[aM]:"fire-perf-compat",[uM]:"fire-rc",[cM]:"fire-rc-compat",[lM]:"fire-gcs",[hM]:"fire-gcs-compat",[fM]:"fire-fst",[pM]:"fire-fst-compat",[dM]:"fire-vertex","fire-js":"fire-js",[gM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Map,em=new Map,tm=new Map;function Gw(n,e){try{n.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ha(n){const e=n.name;if(tm.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,n);for(const t of So.values())Gw(t,n);for(const t of em.values())Gw(t,n);return!0}function a_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},Ts=new dl("app","Firebase",yM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=mM;function HT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ts.create("bad-app-name",{appName:String(i)});if(t||(t=qT()),!t)throw Ts.create("no-options");const s=So.get(i);if(s){if(zc(t,s.options)&&zc(r,s.config))return s;throw Ts.create("duplicate-app",{appName:i})}const a=new SL(i);for(const h of tm.values())a.addComponent(h);const c=new vM(t,r,a);return So.set(i,c),c}function wM(n=Zg){const e=So.get(n);if(!e&&n===Zg&&qT())return HT();if(!e)throw Ts.create("no-app",{appName:n});return e}function EM(){return Array.from(So.values())}async function IM(n){let e=!1;const t=n.name;So.has(t)?(e=!0,So.delete(t)):em.has(t)&&n.decRefCount()<=0&&(em.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function bs(n,e,t){var r;let i=(r=_M[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(c.join(" "));return}Ha(new Ao(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="firebase-heartbeat-database",bM=1,Kc="firebase-heartbeat-store";let fg=null;function QT(){return fg||(fg=UL(TM,bM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Kc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ts.create("idb-open",{originalErrorMessage:n.message})})),fg}async function AM(n){try{const t=(await QT()).transaction(Kc),r=await t.objectStore(Kc).get(JT(n));return await t.done,r}catch(e){if(e instanceof Li)Di.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Di.warn(t.message)}}}async function Hw(n,e){try{const r=(await QT()).transaction(Kc,"readwrite");await r.objectStore(Kc).put(e,JT(n)),await r.done}catch(t){if(t instanceof Li)Di.warn(t.message);else{const r=Ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Di.warn(r.message)}}}function JT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=1024,RM=30*24*60*60*1e3;class PM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=RM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qw(),{heartbeatsToSend:r,unsentEntries:i}=CM(this._heartbeatsCache.heartbeats),s=BT(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Di.warn(t),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function CM(n,e=SM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Jw(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Jw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jT()?gL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jw(n){return BT(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(n){Ha(new Ao("platform-logger",e=>new qL(e),"PRIVATE")),Ha(new Ao("heartbeat",e=>new PM(e),"PRIVATE")),bs(Xg,Ww,n),bs(Xg,Ww,"esm2017"),bs("fire-js","")}DM("");var Yw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vo,YT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function A(){}A.prototype=S.prototype,P.D=S.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(x,N,V){for(var C=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)C[fe-2]=arguments[fe];return S.prototype[N].apply(x,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,S,A){A||(A=0);var x=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)x[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;16>N;++N)x[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=P.g[0],A=P.g[1],N=P.g[2];var V=P.g[3],C=S+(V^A&(N^V))+x[0]+3614090360&4294967295;S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[1]+3905402710&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[2]+606105819&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(V^A&(N^V))+x[4]+4118548399&4294967295,S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[5]+1200080426&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[6]+2821735955&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(V^A&(N^V))+x[8]+1770035416&4294967295,S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[9]+2336552879&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[10]+4294925233&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(V^A&(N^V))+x[12]+1804603682&4294967295,S=A+(C<<7&4294967295|C>>>25),C=V+(N^S&(A^N))+x[13]+4254626195&4294967295,V=S+(C<<12&4294967295|C>>>20),C=N+(A^V&(S^A))+x[14]+2792965006&4294967295,N=V+(C<<17&4294967295|C>>>15),C=A+(S^N&(V^S))+x[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(N^V&(A^N))+x[1]+4129170786&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[6]+3225465664&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[11]+643717713&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^V&(A^N))+x[5]+3593408605&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[10]+38016083&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[15]+3634488961&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^V&(A^N))+x[9]+568446438&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[14]+3275163606&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[3]+4107603335&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^V&(A^N))+x[13]+2850285829&4294967295,S=A+(C<<5&4294967295|C>>>27),C=V+(A^N&(S^A))+x[2]+4243563512&4294967295,V=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(V^S))+x[7]+1735328473&4294967295,N=V+(C<<14&4294967295|C>>>18),C=A+(V^S&(N^V))+x[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(A^N^V)+x[5]+4294588738&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[8]+2272392833&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[11]+1839030562&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^V)+x[1]+2763975236&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[4]+1272893353&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[7]+4139469664&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^V)+x[13]+681279174&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[0]+3936430074&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[3]+3572445317&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^V)+x[9]+3654602809&4294967295,S=A+(C<<4&4294967295|C>>>28),C=V+(S^A^N)+x[12]+3873151461&4294967295,V=S+(C<<11&4294967295|C>>>21),C=N+(V^S^A)+x[15]+530742520&4294967295,N=V+(C<<16&4294967295|C>>>16),C=A+(N^V^S)+x[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(N^(A|~V))+x[0]+4096336452&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[7]+1126891415&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[14]+2878612391&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~V))+x[12]+1700485571&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[3]+2399980690&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[10]+4293915773&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~V))+x[8]+1873313359&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[15]+4264355552&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[6]+2734768916&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~V))+x[4]+4149444226&4294967295,S=A+(C<<6&4294967295|C>>>26),C=V+(A^(S|~N))+x[11]+3174756917&4294967295,V=S+(C<<10&4294967295|C>>>22),C=N+(S^(V|~A))+x[2]+718787259&4294967295,N=V+(C<<15&4294967295|C>>>17),C=A+(V^(N|~S))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+V&4294967295}r.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var A=S-this.blockSize,x=this.B,N=this.h,V=0;V<S;){if(N==0)for(;V<=A;)i(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<S;)if(x[N++]=P.charCodeAt(V++),N==this.blockSize){i(this,x),N=0;break}}else for(;V<S;)if(x[N++]=P[V++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var A=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=A&255,A/=256;for(this.u(P),P=Array(16),S=A=0;4>S;++S)for(var x=0;32>x;x+=8)P[A++]=this.g[S]>>>x&255;return P};function s(P,S){var A=c;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=S(P)}function a(P,S){this.h=S;for(var A=[],x=!0,N=P.length-1;0<=N;N--){var V=P[N]|0;x&&V==S||(A[N]=V,x=!1)}this.g=A}var c={};function h(P){return-128<=P&&128>P?s(P,function(S){return new a([S|0],0>S?-1:0)}):new a([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return _;if(0>P)return F(d(-P));for(var S=[],A=1,x=0;P>=A;x++)S[x]=P/A|0,A*=4294967296;return new a(S,0)}function p(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return F(p(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(S,8)),x=_,N=0;N<P.length;N+=8){var V=Math.min(8,P.length-N),C=parseInt(P.substring(N,N+V),S);8>V?(V=d(Math.pow(S,V)),x=x.j(V).add(d(C))):(x=x.j(A),x=x.add(d(C)))}return x}var _=h(0),v=h(1),I=h(16777216);n=a.prototype,n.m=function(){if(M(this))return-F(this).m();for(var P=0,S=1,A=0;A<this.g.length;A++){var x=this.i(A);P+=(0<=x?x:4294967296+x)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(O(this))return"0";if(M(this))return"-"+F(this).toString(P);for(var S=d(Math.pow(P,6)),A=this,x="";;){var N=W(A,S).g;A=Q(A,N.j(S));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=N,O(A))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function O(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function M(P){return P.h==-1}n.l=function(P){return P=Q(this,P),M(P)?-1:O(P)?0:1};function F(P){for(var S=P.g.length,A=[],x=0;x<S;x++)A[x]=~P.g[x];return new a(A,~P.h).add(v)}n.abs=function(){return M(this)?F(this):this},n.add=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0,N=0;N<=S;N++){var V=x+(this.i(N)&65535)+(P.i(N)&65535),C=(V>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);x=C>>>16,V&=65535,C&=65535,A[N]=C<<16|V}return new a(A,A[A.length-1]&-2147483648?-1:0)};function Q(P,S){return P.add(F(S))}n.j=function(P){if(O(this)||O(P))return _;if(M(this))return M(P)?F(this).j(F(P)):F(F(this).j(P));if(M(P))return F(this.j(F(P)));if(0>this.l(I)&&0>P.l(I))return d(this.m()*P.m());for(var S=this.g.length+P.g.length,A=[],x=0;x<2*S;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<P.g.length;N++){var V=this.i(x)>>>16,C=this.i(x)&65535,fe=P.i(N)>>>16,We=P.i(N)&65535;A[2*x+2*N]+=C*We,z(A,2*x+2*N),A[2*x+2*N+1]+=V*We,z(A,2*x+2*N+1),A[2*x+2*N+1]+=C*fe,z(A,2*x+2*N+1),A[2*x+2*N+2]+=V*fe,z(A,2*x+2*N+2)}for(x=0;x<S;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=S;x<2*S;x++)A[x]=0;return new a(A,0)};function z(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function q(P,S){this.g=P,this.h=S}function W(P,S){if(O(S))throw Error("division by zero");if(O(P))return new q(_,_);if(M(P))return S=W(F(P),S),new q(F(S.g),F(S.h));if(M(S))return S=W(P,F(S)),new q(F(S.g),S.h);if(30<P.g.length){if(M(P)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var A=v,x=S;0>=x.l(P);)A=Y(A),x=Y(x);var N=re(A,1),V=re(x,1);for(x=re(x,2),A=re(A,2);!O(x);){var C=V.add(x);0>=C.l(P)&&(N=N.add(A),V=C),x=re(x,1),A=re(A,1)}return S=Q(P,N.j(S)),new q(N,S)}for(N=_;0<=P.l(S);){for(A=Math.max(1,Math.floor(P.m()/S.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),V=d(A),C=V.j(S);M(C)||0<C.l(P);)A-=x,V=d(A),C=V.j(S);O(V)&&(V=v),N=N.add(V),P=Q(P,C)}return new q(N,P)}n.A=function(P){return W(this,P).h},n.and=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)&P.i(x);return new a(A,this.h&P.h)},n.or=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)|P.i(x);return new a(A,this.h|P.h)},n.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)^P.i(x);return new a(A,this.h^P.h)};function Y(P){for(var S=P.g.length+1,A=[],x=0;x<S;x++)A[x]=P.i(x)<<1|P.i(x-1)>>>31;return new a(A,P.h)}function re(P,S){var A=S>>5;S%=32;for(var x=P.g.length-A,N=[],V=0;V<x;V++)N[V]=0<S?P.i(V+A)>>>S|P.i(V+A+1)<<32-S:P.i(V+A);return new a(N,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,vo=a}).apply(typeof Yw!="undefined"?Yw:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var jh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XT,fc,ZT,rf,nm,eb,tb,nb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,g,y){return l==Array.prototype||l==Object.prototype||(l[g]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof jh=="object"&&jh];for(var g=0;g<l.length;++g){var y=l[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,g){if(g)e:{var y=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var $=l[T];if(!($ in y))break e;y=y[$]}l=l[l.length-1],T=y[l],g=g(T),g!=T&&g!=null&&e(y,l,{configurable:!0,writable:!0,value:g})}}function s(l,g){l instanceof String&&(l+="");var y=0,T=!1,$={next:function(){if(!T&&y<l.length){var G=y++;return{value:g(G,l[G]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(l){return l||function(){return s(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(l){var g=typeof l;return g=g!="object"?g:l?Array.isArray(l)?"array":g:"null",g=="array"||g=="object"&&typeof l.length=="number"}function d(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function p(l,g,y){return l.call.apply(l.bind,arguments)}function _(l,g,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),l.apply(g,$)}}return function(){return l.apply(g,arguments)}}function v(l,g,y){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,v.apply(null,arguments)}function I(l,g){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function O(l,g){function y(){}y.prototype=g.prototype,l.aa=g.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,$,G){for(var he=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)he[gt-2]=arguments[gt];return g.prototype[$].apply(T,he)}}function M(l){const g=l.length;if(0<g){const y=Array(g);for(let T=0;T<g;T++)y[T]=l[T];return y}return[]}function F(l,g){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(h(T)){const $=l.length||0,G=T.length||0;l.length=$+G;for(let he=0;he<G;he++)l[$+he]=T[he]}else l.push(T)}}class Q{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function z(l){return/^[\s\xa0]*$/.test(l)}function q(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var Y=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function re(l,g,y){for(const T in l)g.call(y,l[T],T,l)}function P(l,g){for(const y in l)g.call(void 0,l[y],y,l)}function S(l){const g={};for(const y in l)g[y]=l[y];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,g){let y,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(y in T)l[y]=T[y];for(let G=0;G<A.length;G++)y=A[G],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function N(l){var g=1;l=l.split(":");const y=[];for(;0<g&&l.length;)y.push(l.shift()),g--;return l.length&&y.push(l.join(":")),y}function V(l){c.setTimeout(()=>{throw l},0)}function C(){var l=Dn;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class fe{constructor(){this.h=this.g=null}add(g,y){const T=We.get();T.set(g,y),this.h?this.h.next=T:this.g=T,this.h=T}}var We=new Q(()=>new et,l=>l.reset());class et{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,$e=!1,Dn=new fe,yn=()=>{const l=c.Promise.resolve(void 0);Ce=()=>{l.then(Dt)}};var Dt=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(y){V(y)}var g=We;g.j(l),100>g.h&&(g.h++,l.next=g.g,g.g=l)}$e=!1};function St(){this.s=this.s,this.C=this.C}St.prototype.s=!1,St.prototype.ma=function(){this.s||(this.s=!0,this.N())},St.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Rt(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var Nr=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return l}();function dn(l,g){if(Rt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget){if(Y){e:{try{W(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else y=="mouseover"?g=l.fromElement:y=="mouseout"&&(g=l.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Zt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&dn.aa.h.call(this)}}O(dn,Rt);var Zt={2:"touch",3:"pen",4:"mouse"};dn.prototype.h=function(){dn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),_e=0;function de(l,g,y,T,$){this.listener=l,this.proxy=null,this.src=g,this.type=y,this.capture=!!T,this.ha=$,this.key=++_e,this.da=this.fa=!1}function Ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function He(l){this.src=l,this.g={},this.h=0}He.prototype.add=function(l,g,y,T,$){var G=l.toString();l=this.g[G],l||(l=this.g[G]=[],this.h++);var he=R(l,g,T,$);return-1<he?(g=l[he],y||(g.fa=!1)):(g=new de(g,this.src,G,!!T,$),g.fa=y,l.push(g)),g};function at(l,g){var y=g.type;if(y in l.g){var T=l.g[y],$=Array.prototype.indexOf.call(T,g,void 0),G;(G=0<=$)&&Array.prototype.splice.call(T,$,1),G&&(Ee(g),l.g[y].length==0&&(delete l.g[y],l.h--))}}function R(l,g,y,T){for(var $=0;$<l.length;++$){var G=l[$];if(!G.da&&G.listener==g&&G.capture==!!y&&G.ha==T)return $}return-1}var D="closure_lm_"+(1e6*Math.random()|0),j={};function ie(l,g,y,T,$){if(T&&T.once)return pe(l,g,y,T,$);if(Array.isArray(g)){for(var G=0;G<g.length;G++)ie(l,g[G],y,T,$);return null}return y=De(y),l&&l[Z]?l.K(g,y,d(T)?!!T.capture:!!T,$):J(l,g,y,!1,T,$)}function J(l,g,y,T,$,G){if(!g)throw Error("Invalid event type");var he=d($)?!!$.capture:!!$,gt=ge(l);if(gt||(l[D]=gt=new He(l)),y=gt.add(g,y,T,he,G),y.proxy)return y;if(T=ue(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Nr||($=he),$===void 0&&($=!1),l.addEventListener(g.toString(),T,$);else if(l.attachEvent)l.attachEvent(ae(g.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ue(){function l(y){return g.call(l.src,l.listener,y)}const g=Pe;return l}function pe(l,g,y,T,$){if(Array.isArray(g)){for(var G=0;G<g.length;G++)pe(l,g[G],y,T,$);return null}return y=De(y),l&&l[Z]?l.L(g,y,d(T)?!!T.capture:!!T,$):J(l,g,y,!0,T,$)}function le(l,g,y,T,$){if(Array.isArray(g))for(var G=0;G<g.length;G++)le(l,g[G],y,T,$);else T=d(T)?!!T.capture:!!T,y=De(y),l&&l[Z]?(l=l.i,g=String(g).toString(),g in l.g&&(G=l.g[g],y=R(G,y,T,$),-1<y&&(Ee(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete l.g[g],l.h--)))):l&&(l=ge(l))&&(g=l.g[g.toString()],l=-1,g&&(l=R(g,y,T,$)),(y=-1<l?g[l]:null)&&ce(y))}function ce(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[Z])at(g.i,l);else{var y=l.type,T=l.proxy;g.removeEventListener?g.removeEventListener(y,T,l.capture):g.detachEvent?g.detachEvent(ae(y),T):g.addListener&&g.removeListener&&g.removeListener(T),(y=ge(g))?(at(y,l),y.h==0&&(y.src=null,g[D]=null)):Ee(l)}}}function ae(l){return l in j?j[l]:j[l]="on"+l}function Pe(l,g){if(l.da)l=!0;else{g=new dn(g,this);var y=l.listener,T=l.ha||l.src;l.fa&&ce(l),l=y.call(T,g)}return l}function ge(l){return l=l[D],l instanceof He?l:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(l){return typeof l=="function"?l:(l[Ie]||(l[Ie]=function(g){return l.handleEvent(g)}),l[Ie])}function Re(){St.call(this),this.i=new He(this),this.M=this,this.F=null}O(Re,St),Re.prototype[Z]=!0,Re.prototype.removeEventListener=function(l,g,y,T){le(this,l,g,y,T)};function Ne(l,g){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=g.type||g,typeof g=="string")g=new Rt(g,l);else if(g instanceof Rt)g.target=g.target||l;else{var $=g;g=new Rt(T,l),x(g,$)}if($=!0,y)for(var G=y.length-1;0<=G;G--){var he=g.g=y[G];$=Xe(he,T,!0,g)&&$}if(he=g.g=l,$=Xe(he,T,!0,g)&&$,$=Xe(he,T,!1,g)&&$,y)for(G=0;G<y.length;G++)he=g.g=y[G],$=Xe(he,T,!1,g)&&$}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var l=this.i,g;for(g in l.g){for(var y=l.g[g],T=0;T<y.length;T++)Ee(y[T]);delete l.g[g],l.h--}}this.F=null},Re.prototype.K=function(l,g,y,T){return this.i.add(String(l),g,!1,y,T)},Re.prototype.L=function(l,g,y,T){return this.i.add(String(l),g,!0,y,T)};function Xe(l,g,y,T){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,G=0;G<g.length;++G){var he=g[G];if(he&&!he.da&&he.capture==y){var gt=he.listener,Jt=he.ha||he.src;he.fa&&at(l.i,he),$=gt.call(Jt,T)!==!1&&$}}return $&&!T.defaultPrevented}function Ht(l,g,y){if(typeof l=="function")y&&(l=v(l,y));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(l,g||0)}function kt(l){l.g=Ht(()=>{l.g=null,l.i&&(l.i=!1,kt(l))},l.l);const g=l.h;l.h=null,l.m.apply(null,g)}class pn extends St{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(l){St.call(this),this.h=l,this.g={}}O(Ot,St);var ar=[];function ti(l){re(l.g,function(g,y){this.g.hasOwnProperty(y)&&ce(g)},l),l.g={}}Ot.prototype.N=function(){Ot.aa.N.call(this),ti(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,vn=c.JSON.parse,qo=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function _u(){}_u.prototype.h=null;function Sl(l){return l.h||(l.h=l.i())}function yu(){}var Fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vu(){Rt.call(this,"d")}O(vu,Rt);function wu(){Rt.call(this,"c")}O(wu,Rt);var ni={},Rl=null;function Us(){return Rl=Rl||new Re}ni.La="serverreachability";function Pl(l){Rt.call(this,ni.La,l)}O(Pl,Rt);function Bs(l){const g=Us();Ne(g,new Pl(g))}ni.STAT_EVENT="statevent";function Cl(l,g){Rt.call(this,ni.STAT_EVENT,l),this.stat=g}O(Cl,Rt);function en(l){const g=Us();Ne(g,new Cl(g,l))}ni.Ma="timingevent";function xl(l,g){Rt.call(this,ni.Ma,l),this.size=g}O(xl,Rt);function ri(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},g)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function Md(l,g,y,T,$,G){l.info(function(){if(l.g)if(G)for(var he="",gt=G.split("&"),Jt=0;Jt<gt.length;Jt++){var Fe=gt[Jt].split("=");if(1<Fe.length){var Yt=Fe[0];Fe=Fe[1];var Ft=Yt.split("_");he=2<=Ft.length&&Ft[1]=="type"?he+(Yt+"="+Fe+"&"):he+(Yt+"=redacted&")}}else he=null;else he=G;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+g+`
`+y+`
`+he})}function Fd(l,g,y,T,$,G,he){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+g+`
`+y+`
`+G+" "+he})}function Ui(l,g,y,T){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+Bd(l,y)+(T?" "+T:"")})}function Ud(l,g){l.info(function(){return"TIMEOUT: "+g})}$s.prototype.info=function(){};function Bd(l,g){if(!l.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var G=$[0];if(G!="noop"&&G!="stop"&&G!="close")for(var he=1;he<$.length;he++)$[he]=""}}}}return $t(y)}catch{return g}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ko;function jo(){}O(jo,_u),jo.prototype.g=function(){return new XMLHttpRequest},jo.prototype.i=function(){return{}},Ko=new jo;function Lr(l,g,y,T){this.j=l,this.i=g,this.l=y,this.R=T||1,this.U=new Ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var Ol={},Eu={};function Iu(l,g,y){l.L=1,l.v=qi(ur(g)),l.m=y,l.P=!0,qs(l,null)}function qs(l,g){l.F=Date.now(),Go(l),l.A=ur(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Gl(y.i,"t",T),l.C=0,y=l.j.J,l.h=new kl,l.g=Zl(l.j,y?g:null,!l.m),0<l.O&&(l.M=new pn(v(l.Y,l,l.g),l.O)),g=l.U,y=l.g,T=l.ca;var $="readystatechange";Array.isArray($)||($&&(ar[0]=$.toString()),$=ar);for(var G=0;G<$.length;G++){var he=ie(y,$[G],T||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,g)):(l.u="GET",l.g.ea(l.A,l.u,null,g)),Bs(),Md(l.i,l.u,l.A,l.l,l.R,l.m)}Lr.prototype.ca=function(l){l=l.target;const g=this.M;g&&lr(l)==3?g.j():this.Y(l)},Lr.prototype.Y=function(l){try{if(l==this.g)e:{const Ft=lr(this.g);var g=this.g.Ba();const ai=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||ta(this.g)))){this.J||Ft!=4||g==7||(g==8||0>=ai?Bs(3):Bs(2)),Tu(this);var y=this.g.Z();this.X=y;t:if(Vl(this)){var T=ta(this.g);l="";var $=T.length,G=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Mr(this),Bi(this);var he="";break t}this.h.i=new c.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,l+=this.h.i.decode(T[g],{stream:!(G&&g==$-1)});T.length=0,this.h.g+=l,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=y==200,Fd(this.i,this.u,this.A,this.l,this.R,Ft,y),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Jt=this.g;if((gt=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(gt)){var Fe=gt;break t}}Fe=null}if(y=Fe)Ui(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ho(this,y);else{this.o=!1,this.s=3,en(12),Mr(this),Bi(this);break e}}if(this.P){y=!0;let zn;for(;!this.J&&this.C<he.length;)if(zn=Wo(this,he),zn==Eu){Ft==4&&(this.s=4,en(14),y=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Ol){this.s=4,en(15),Ui(this.i,this.l,he,"[Invalid Chunk]"),y=!1;break}else Ui(this.i,this.l,zn,null),Ho(this,zn);if(Vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||he.length!=0||this.h.h||(this.s=1,en(16),y=!1),this.o=this.o&&y,!y)Ui(this.i,this.l,he,"[Invalid Chunked Response]"),Mr(this),Bi(this);else if(0<he.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Gi(Yt),Yt.M=!0,en(11))}}else Ui(this.i,this.l,he,null),Ho(this,he);Ft==4&&Mr(this),this.o&&!this.J&&(Ft==4?Tr(this.j,this):(this.o=!1,Go(this)))}else qn(this.g),y==400&&0<he.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Mr(this),Bi(this)}}}catch{}finally{}};function Vl(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Wo(l,g){var y=l.C,T=g.indexOf(`
`,y);return T==-1?Eu:(y=Number(g.substring(y,T)),isNaN(y)?Ol:(T+=1,T+y>g.length?Eu:(g=g.slice(T,T+y),l.C=T+y,g)))}Lr.prototype.cancel=function(){this.J=!0,Mr(this)};function Go(l){l.S=Date.now()+l.I,Nl(l,l.I)}function Nl(l,g){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ri(v(l.ba,l),g)}function Tu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Lr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ud(this.i,this.A),this.L!=2&&(Bs(),en(17)),Mr(this),this.s=2,Bi(this)):Nl(this,this.S-l)};function Bi(l){l.j.G==0||l.J||Tr(l.j,l)}function Mr(l){Tu(l);var g=l.M;g&&typeof g.ma=="function"&&g.ma(),l.M=null,ti(l.U),l.g&&(g=l.g,l.g=null,g.abort(),g.ma())}function Ho(l,g){try{var y=l.j;if(y.G!=0&&(y.g==l||Qo(y.h,l))){if(!l.K&&Qo(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)pt(y),Ws(y);else break e;hr(y),en(18)}}else y.za=$[1],0<y.za-y.T&&37500>$[2]&&y.F&&y.v==0&&!y.C&&(y.C=ri(v(y.Za,y),6e3));if(1>=Fl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ii(y,11)}else if((l.K||y.g==l)&&pt(y),!z(g))for($=y.Da.g.parse(g),g=0;g<$.length;g++){let Fe=$[g];if(y.T=Fe[0],Fe=Fe[1],y.G==2)if(Fe[0]=="c"){y.K=Fe[1],y.ia=Fe[2];const Yt=Fe[3];Yt!=null&&(y.la=Yt,y.j.info("VER="+y.la));const Ft=Fe[4];Ft!=null&&(y.Aa=Ft,y.j.info("SVER="+y.Aa));const ai=Fe[5];ai!=null&&typeof ai=="number"&&0<ai&&(T=1.5*ai,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const zn=l.g;if(zn){const oa=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var G=T.h;G.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Jo(G,G.h),G.h=null))}if(T.D){const Vu=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vu&&(T.ya=Vu,dt(T.I,T.D,Vu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var he=l;if(T.qa=Xl(T,T.J?T.ia:null,T.W),he.K){bu(T.h,he);var gt=he,Jt=T.L;Jt&&(gt.I=Jt),gt.B&&(Tu(gt),Go(gt)),T.g=he}else Ou(T);0<y.i.length&&Gs(y)}else Fe[0]!="stop"&&Fe[0]!="close"||ii(y,7);else y.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ii(y,7):na(y):Fe[0]!="noop"&&y.l&&y.l.ta(Fe),y.v=0)}}Bs(4)}catch{}}var $d=class{constructor(l,g){this.g=l,this.map=g}};function Ll(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ml(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Fl(l){return l.h?1:l.g?l.g.size:0}function Qo(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Jo(l,g){l.g?l.g.add(g):l.h=g}function bu(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}Ll.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Yo(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let g=l.i;for(const y of l.g.values())g=g.concat(y.D);return g}return M(l.i)}function qd(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map!="undefined"&&l instanceof Map||typeof Set!="undefined"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(h(l)){for(var g=[],y=l.length,T=0;T<y;T++)g.push(l[T]);return g}g=[],y=0;for(T in l)g[y++]=l[T];return g}function Ul(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map!="undefined"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set!="undefined"&&l instanceof Set)){if(h(l)||typeof l=="string"){var g=[];l=l.length;for(var y=0;y<l;y++)g.push(y);return g}g=[],y=0;for(const T in l)g[y++]=T;return g}}}function zs(l,g){if(l.forEach&&typeof l.forEach=="function")l.forEach(g,void 0);else if(h(l)||typeof l=="string")Array.prototype.forEach.call(l,g,void 0);else for(var y=Ul(l),T=qd(l),$=T.length,G=0;G<$;G++)g.call(void 0,T[G],y&&y[G],l)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zd(l,g){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),$=null;if(0<=T){var G=l[y].substring(0,T);$=l[y].substring(T+1)}else G=l[y];g(G,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Fr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Fr){this.h=l.h,$i(this,l.j),this.o=l.o,this.g=l.g,Xo(this,l.s),this.l=l.l;var g=l.i,y=new Ks;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Su(this,y),this.m=l.m}else l&&(g=String(l).match(Au))?(this.h=!1,$i(this,g[1]||"",!0),this.o=cr(g[2]||""),this.g=cr(g[3]||"",!0),Xo(this,g[4]),this.l=cr(g[5]||"",!0),Su(this,g[6]||"",!0),this.m=cr(g[7]||"")):(this.h=!1,this.i=new Ks(null,this.h))}Fr.prototype.toString=function(){var l=[],g=this.j;g&&l.push(zi(g,$l,!0),":");var y=this.g;return(y||g=="file")&&(l.push("//"),(g=this.o)&&l.push(zi(g,$l,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(zi(y,y.charAt(0)=="/"?zl:ql,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",zi(y,jl)),l.join("")};function ur(l){return new Fr(l)}function $i(l,g,y){l.j=y?cr(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function Xo(l,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);l.s=g}else l.s=null}function Su(l,g,y){g instanceof Ks?(l.i=g,Kd(l.i,l.h)):(y||(g=zi(g,Kl)),l.i=new Ks(g,l.h))}function dt(l,g,y){l.i.set(g,y)}function qi(l){return dt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function cr(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function zi(l,g,y){return typeof l=="string"?(l=encodeURI(l).replace(g,Bl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Bl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var $l=/[#\/\?@]/g,ql=/[#\?:]/g,zl=/[#\?]/g,Kl=/[#\?@]/g,jl=/#/g;function Ks(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function Ur(l){l.g||(l.g=new Map,l.h=0,l.i&&zd(l.i,function(g,y){l.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=Ks.prototype,n.add=function(l,g){Ur(this),this.i=null,l=Ki(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(g),this.h+=1,this};function Wl(l,g){Ur(l),g=Ki(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function Ru(l,g){return Ur(l),g=Ki(l,g),l.g.has(g)}n.forEach=function(l,g){Ur(this),this.g.forEach(function(y,T){y.forEach(function($){l.call(g,$,T,this)},this)},this)},n.na=function(){Ur(this);const l=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let T=0;T<g.length;T++){const $=l[T];for(let G=0;G<$.length;G++)y.push(g[T])}return y},n.V=function(l){Ur(this);let g=[];if(typeof l=="string")Ru(this,l)&&(g=g.concat(this.g.get(Ki(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)g=g.concat(l[y])}return g},n.set=function(l,g){return Ur(this),this.i=null,l=Ki(this,l),Ru(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},n.get=function(l,g){return l?(l=this.V(l),0<l.length?String(l[0]):g):g};function Gl(l,g,y){Wl(l,g),0<y.length&&(l.i=null,l.g.set(Ki(l,g),M(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var T=g[y];const G=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var $=G;he[T]!==""&&($+="="+encodeURIComponent(String(he[T]))),l.push($)}}return this.i=l.join("&")};function Ki(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function Kd(l,g){g&&!l.j&&(Ur(l),l.i=null,l.g.forEach(function(y,T){var $=T.toLowerCase();T!=$&&(Wl(this,T),Gl(this,$,y))},l)),l.j=g}function jd(l,g){const y=new $s;if(c.Image){const T=new Image;T.onload=I(Br,y,"TestLoadImage: loaded",!0,g,T),T.onerror=I(Br,y,"TestLoadImage: error",!1,g,T),T.onabort=I(Br,y,"TestLoadImage: abort",!1,g,T),T.ontimeout=I(Br,y,"TestLoadImage: timeout",!1,g,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else g(!1)}function Pu(l,g){const y=new $s,T=new AbortController,$=setTimeout(()=>{T.abort(),Br(y,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:T.signal}).then(G=>{clearTimeout($),G.ok?Br(y,"TestPingServer: ok",!0,g):Br(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),Br(y,"TestPingServer: error",!1,g)})}function Br(l,g,y,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(y)}catch{}}function Wd(){this.g=new qo}function Gd(l,g,y){const T=y||"";try{zs(l,function($,G){let he=$;d($)&&(he=$t($)),g.push(T+G+"="+encodeURIComponent(he))})}catch($){throw g.push(T+"type="+encodeURIComponent("_badmap")),$}}function Zo(l){this.l=l.Ub||null,this.j=l.eb||!1}O(Zo,_u),Zo.prototype.g=function(){return new ea(this.l,this.j)},Zo.prototype.i=function(l){return function(){return l}}({});function ea(l,g){Re.call(this),this.D=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ea,Re),n=ea.prototype,n.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=g,this.readyState=1,js(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(g.body=l),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ut(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yt(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yt(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?ut(this):js(this),this.readyState==3&&yt(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,ut(this))},n.Qa=function(l){this.g&&(this.response=l,ut(this))},n.ga=function(){this.g&&ut(this)};function ut(l){l.readyState=4,l.l=null,l.j=null,l.v=null,js(l)}n.setRequestHeader=function(l,g){this.u.append(l,g)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=g.next();return l.join(`\r
`)};function js(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Hl(l){let g="";return re(l,function(y,T){g+=T,g+=":",g+=y,g+=`\r
`}),g}function Cu(l,g,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Hl(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):dt(l,g,y))}function Ct(l){Re.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ct,Re);var Hd=/^https?$/i,Qd=["POST","PUT"];n=Ct.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,g,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ko.g(),this.v=this.o?Sl(this.o):Sl(Ko),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch(G){xu(this,G);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)y.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())y.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),$=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Qd,g,void 0))||T||$||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,he]of y)this.g.setRequestHeader(G,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$r(this),this.u=!0,this.g.send(l),this.u=!1}catch(G){xu(this,G)}};function xu(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.m=5,Ql(l),ji(l)}function Ql(l){l.A||(l.A=!0,Ne(l,"complete"),Ne(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ne(this,"complete"),Ne(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qt(this):this.bb())},n.bb=function(){Qt(this)};function Qt(l){if(l.h&&typeof a!="undefined"&&(!l.v[1]||lr(l)!=4||l.Z()!=2)){if(l.u&&lr(l)==4)Ht(l.Ea,0,l);else if(Ne(l,"readystatechange"),lr(l)==4){l.h=!1;try{const he=l.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var T;if(T=he===0){var $=String(l.D).match(Au)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),T=!Hd.test($?$.toLowerCase():"")}y=T}if(y)Ne(l,"complete"),Ne(l,"success");else{l.m=6;try{var G=2<lr(l)?l.g.statusText:""}catch{G=""}l.l=G+" ["+l.Z()+"]",Ql(l)}}finally{ji(l)}}}}function ji(l,g){if(l.g){$r(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,g||Ne(l,"ready");try{y.onreadystatechange=T}catch{}}}function $r(l){l.I&&(c.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function lr(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),vn(g)}};function ta(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function qn(l){const g={};l=(l.g&&2<=lr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(z(l[T]))continue;var y=N(l[T]);const $=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=g[$]||[];g[$]=G,G.push(y)}P(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(l,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||g}function Du(l){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wi("baseRetryDelayMs",5e3,l),this.cb=Wi("retryDelaySeedMs",1e4,l),this.Wa=Wi("forwardChannelMaxRetries",2,l),this.wa=Wi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ll(l&&l.concurrentRequestLimit),this.Da=new Wd,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Du.prototype,n.la=8,n.G=1,n.connect=function(l,g,y,T){en(0),this.W=l,this.H=g||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=Xl(this,null,this.W),Gs(this)};function na(l){if(ku(l),l.G==3){var g=l.U++,y=ur(l.I);if(dt(y,"SID",l.K),dt(y,"RID",g),dt(y,"TYPE","terminate"),an(l,y),g=new Lr(l,l.j,g),g.L=2,g.v=qi(ur(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=Zl(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Go(g)}sa(l)}function Ws(l){l.g&&(Gi(l),l.g.cancel(),l.g=null)}function ku(l){Ws(l),l.u&&(c.clearTimeout(l.u),l.u=null),pt(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Gs(l){if(!Ml(l.h)&&!l.s){l.s=!0;var g=l.Ga;Ce||yn(),$e||(Ce(),$e=!0),Dn.add(g,l),l.B=0}}function kn(l,g){return Fl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=g.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ri(v(l.Ga,l,g),ia(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const $=new Lr(this,this.j,l);let G=this.o;if(this.S&&(G?(G=S(G),x(G,this.S)):G=this.S),this.m!==null||this.O||($.H=G,G=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Yl(this,$,g),y=ur(this.I),dt(y,"RID",l),dt(y,"CVER",22),this.D&&dt(y,"X-HTTP-Session-Id",this.D),an(this,y),G&&(this.O?g="headers="+encodeURIComponent(String(Hl(G)))+"&"+g:this.m&&Cu(y,this.m,G)),Jo(this.h,$),this.Ua&&dt(y,"TYPE","init"),this.P?(dt(y,"$req",g),dt(y,"SID","null"),$.T=!0,Iu($,y,null)):Iu($,y,g),this.G=2}}else this.G==3&&(l?Jl(this,l):this.i.length==0||Ml(this.h)||Jl(this))};function Jl(l,g){var y;g?y=g.l:y=l.U++;const T=ur(l.I);dt(T,"SID",l.K),dt(T,"RID",y),dt(T,"AID",l.T),an(l,T),l.m&&l.o&&Cu(T,l.m,l.o),y=new Lr(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),g&&(l.i=g.D.concat(l.i)),g=Yl(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Jo(l.h,y),Iu(y,T,g)}function an(l,g){l.H&&re(l.H,function(y,T){dt(g,T,y)}),l.l&&zs({},function(y,T){dt(g,T,y)})}function Yl(l,g,y){y=Math.min(l.i.length,y);var T=l.l?v(l.l.Na,l.l,l):null;e:{var $=l.i;let G=-1;for(;;){const he=["count="+y];G==-1?0<y?(G=$[0].g,he.push("ofs="+G)):G=0:he.push("ofs="+G);let gt=!0;for(let Jt=0;Jt<y;Jt++){let Fe=$[Jt].g;const Yt=$[Jt].map;if(Fe-=G,0>Fe)G=Math.max(0,$[Jt].g-100),gt=!1;else try{Gd(Yt,he,"req"+Fe+"_")}catch{T&&T(Yt)}}if(gt){T=he.join("&");break e}}}return l=l.i.splice(0,y),g.D=l,T}function Ou(l){if(!l.g&&!l.u){l.Y=1;var g=l.Fa;Ce||yn(),$e||(Ce(),$e=!0),Dn.add(g,l),l.v=0}}function hr(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ri(v(l.Fa,l),ia(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ri(v(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),Ws(this),ra(this))};function Gi(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function ra(l){l.g=new Lr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var g=ur(l.qa);dt(g,"RID","rpc"),dt(g,"SID",l.K),dt(g,"AID",l.T),dt(g,"CI",l.F?"0":"1"),!l.F&&l.ja&&dt(g,"TO",l.ja),dt(g,"TYPE","xmlhttp"),an(l,g),l.m&&l.o&&Cu(g,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=qi(ur(g)),y.m=null,y.P=!0,qs(y,l)}n.Za=function(){this.C!=null&&(this.C=null,Ws(this),hr(this),en(19))};function pt(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Tr(l,g){var y=null;if(l.g==g){pt(l),Gi(l),l.g=null;var T=2}else if(Qo(l.h,g))y=g.D,bu(l.h,g),T=1;else return;if(l.G!=0){if(g.o)if(T==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var $=l.B;T=Us(),Ne(T,new xl(T,y)),Gs(l)}else Ou(l);else if($=g.s,$==3||$==0&&0<g.X||!(T==1&&kn(l,g)||T==2&&hr(l)))switch(y&&0<y.length&&(g=l.h,g.i=g.i.concat(y)),$){case 1:ii(l,5);break;case 4:ii(l,10);break;case 3:ii(l,6);break;default:ii(l,2)}}}function ia(l,g){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*g}function ii(l,g){if(l.j.info("Error code "+g),g==2){var y=v(l.fb,l),T=l.Xa;const $=!T;T=new Fr(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$i(T,"https"),qi(T),$?jd(T.toString(),y):Pu(T.toString(),y)}else en(2);l.G=0,l.l&&l.l.sa(g),sa(l),ku(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function sa(l){if(l.G=0,l.ka=[],l.l){const g=Yo(l.h);(g.length!=0||l.i.length!=0)&&(F(l.ka,g),F(l.ka,l.i),l.h.i.length=0,M(l.i),l.i.length=0),l.l.ra()}}function Xl(l,g,y){var T=y instanceof Fr?ur(y):new Fr(y);if(T.g!="")g&&(T.g=g+"."+T.g),Xo(T,T.s);else{var $=c.location;T=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var G=new Fr(null);T&&$i(G,T),g&&(G.g=g),$&&Xo(G,$),y&&(G.l=y),T=G}return y=l.D,g=l.ya,y&&g&&dt(T,y,g),dt(T,"VER",l.la),an(l,T),T}function Zl(l,g,y){if(g&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Ca&&!l.pa?new Ct(new Zo({eb:y})):new Ct(l.pa),g.Ha(l.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eh(){}n=eh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Hs(){}Hs.prototype.g=function(l,g){return new un(l,g)};function un(l,g){Re.call(this),this.g=new Du(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(l?l["X-WebChannel-Client-Profile"]=g.va:l={"X-WebChannel-Client-Profile":g.va}),this.g.S=l,(l=g&&g.Sb)&&!z(l)&&(this.g.m=l),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!z(g)&&(this.g.D=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new oi(this)}O(un,Re),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){na(this.g)},un.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=$t(l),l=y);g.i.push(new $d(g.Ya++,l)),g.G==3&&Gs(g)},un.prototype.N=function(){this.g.l=null,delete this.j,na(this.g),delete this.g,un.aa.N.call(this)};function si(l){vu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(const y in g){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}O(si,vu);function th(){wu.call(this),this.status=1}O(th,wu);function oi(l){this.g=l}O(oi,eh),oi.prototype.ua=function(){Ne(this.g,"a")},oi.prototype.ta=function(l){Ne(this.g,new si(l))},oi.prototype.sa=function(l){Ne(this.g,new th)},oi.prototype.ra=function(){Ne(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,nb=function(){return new Hs},tb=function(){return Us()},eb=ni,nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,rf=zo,Dl.COMPLETE="complete",ZT=Dl,yu.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",Re.prototype.listen=Re.prototype.K,fc=yu,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,XT=Ct}).apply(typeof jh!="undefined"?jh:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const Xw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new s_("@firebase/firestore");function xa(){return Ro.logLevel}function oe(n,...e){if(Ro.logLevel<=nt.DEBUG){const t=e.map(u_);Ro.debug(`Firestore (${fu}): ${n}`,...t)}}function Kt(n,...e){if(Ro.logLevel<=nt.ERROR){const t=e.map(u_);Ro.error(`Firestore (${fu}): ${n}`,...t)}}function jc(n,...e){if(Ro.logLevel<=nt.WARN){const t=e.map(u_);Ro.warn(`Firestore (${fu}): ${n}`,...t)}}function u_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${fu}) INTERNAL ASSERTION FAILED: `+n;throw Kt(e),new Error(e)}function Se(n,e){n||Te()}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bn.UNAUTHENTICATED))}shutdown(){}}class VM{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let s=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pi,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new kM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new bn(e)}}class NM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new NM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Se(this.o===void 0);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string"),this.R=t.token,new MM(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=UM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ib(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Lt(0,0))}static max(){return new xe(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(),r===void 0?r=e.length-t:r>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Wc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tt extends Wc{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Tt(t)}static emptyPath(){return new Tt([])}}const BM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Wc{construct(e,t,r){return new Nt(e,t,r)}static isValidIdentifier(e){return BM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ve(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ve(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new ve(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Tt.fromString(e))}static fromName(e){return new ye(Tt.fromString(e).popFirst(5))}static empty(){return new ye(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rm(n){return n.fields.find(e=>e.kind===2)}function co(n){return n.fields.filter(e=>e.kind!==2)}Of.UNKNOWN_ID=-1;class sf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gc(0,or.min())}}function sb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new or(i,ye.empty(),e)}function ob(n){return new or(n.readTime,n.key,-1)}class or{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new or(xe.min(),ye.empty(),-1)}static max(){return new or(xe.max(),ye.empty(),-1)}}function c_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ub{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==ab)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(i=>i?K.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new K((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const d=h;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new K((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Pi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Sc(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=l_(r.target.error);this.V.reject(new Sc(e,i))}}static open(e,t,r,i){try{return new dd(t,e.transaction(i,r))}catch(s){throw new Sc(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qM(t)}}class As{constructor(e,t,r){this.name=e,this.version=t,this.p=r,As.S(sn())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return oe("SimpleDb","Removing database:",e),lo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!jT())return!1;if(As.v())return!0;const e=sn(),t=As.S(e),r=0<t&&t<10,i=cb(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(oe("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Sc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ve(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ve(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Sc(e,a))},i.onupgradeneeded=s=>{oe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{oe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const c=dd.open(this.db,e,s?"readonly":"readwrite",r),h=i(c).next(d=>(c.g(),d)).catch(d=>(c.abort(d),K.reject(d))).toPromise();return h.catch(()=>{}),await c.m,h}catch(c){const h=c,d=h.name!=="FirebaseError"&&a<3;if(oe("SimpleDb","Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function cb(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class $M{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return lo(this.B.delete())}}class Sc extends ve{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vs(n){return n.name==="IndexedDbTransactionError"}class qM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lo(r)}add(e){return oe("SimpleDb","ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next(t=>(t===void 0&&(t=null),oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return oe("SimpleDb","DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return oe("SimpleDb","COUNT",this.store.name),lo(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new K((a,c)=>{s.onerror=h=>{c(h.target.error)},s.onsuccess=h=>{a(h.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(c,h)=>{a.push(h)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new K((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,c)=>c.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new K((r,i)=>{t.onerror=s=>{const a=l_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}W(e,t){const r=[];return new K((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const h=new $M(c),d=t(c.primaryKey,c.value,h);if(d instanceof K){const p=d.catch(_=>(h.done(),K.reject(_)));r.push(p)}h.isDone?i():h.K===null?c.continue():c.continue(h.K)}}).next(()=>K.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(n){return new K((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=l_(r.target.error);t(i)}})}let Zw=!1;function l_(n){const e=As.S(sn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zw||(Zw=!0,setTimeout(()=>{throw r},0)),r}}return n}class zM{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{oe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Vs(t)?oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Os(t)}await this.X(6e4)})}}class KM{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return K.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return oe("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(c=>(oe("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=ob(s);c_(a,r)>0&&(r=a)}),new or(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jn.oe=-1;function pd(n){return n==null}function Hc(n){return n===0&&1/n==-1/0}function lb(n){return typeof n=="number"&&Number.isInteger(n)&&!Hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eE(e)),e=jM(n.get(t),e);return eE(e)}function jM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function eE(n){return n+""}function Qr(n){const e=n.length;if(Se(e>=2),e===2)return Se(n.charAt(0)===""&&n.charAt(1)===""),Tt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&Te(),n.charAt(a+1)){case"":const c=n.substring(s,a);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Te()}s=a+2}return new Tt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(n,e){return[n,Bn(e)]}function hb(n,e,t){return[n,Bn(e),t]}const WM={},GM=["prefixPath","collectionGroup","readTime","documentId"],HM=["prefixPath","collectionGroup","documentId"],QM=["collectionGroup","readTime","prefixPath","documentId"],JM=["canonicalId","targetId"],YM=["targetId","path"],XM=["path","targetId"],ZM=["collectionId","parent"],eF=["indexId","uid"],tF=["uid","sequenceNumber"],nF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rF=["indexId","uid","orderedDocumentKey"],iF=["userId","collectionPath","documentId"],sF=["userId","collectionPath","largestBatchId"],oF=["userId","collectionGroup","largestBatchId"],fb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aF=[...fb,"documentOverlays"],db=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pb=db,h_=[...pb,"indexConfiguration","indexState","indexEntries"],uF=h_,cF=[...h_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends ub{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function on(n,e){const t=be(n);return As.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r!=null?r:_n.RED,this.left=i!=null?i:_n.EMPTY,this.right=s!=null?s:_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new _n(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,r,i,s){return this}insert(e,t,r){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rE(this.data.getIterator())}getIteratorFrom(e){return new rE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wt(this.comparator);return t.data=e,t}}class rE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ia(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new wt(Nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new mb("Invalid base64 string: "+s):s}}(e);return new Gt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const lF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(n){if(Se(!!n),typeof n=="string"){let e=0;const t=lF.exec(n);if(Se(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ps(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function d_(n){const e=n.mapValue.fields.__previous_value__;return f_(e)?d_(e):e}function Qc(n){const e=ki(n.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,t,r,i,s,a,c,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d}}class Po{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},af={nullValue:"NULL_VALUE"};function Co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?f_(n)?4:_b(n)?9007199254740991:gd(n)?10:11:Te()}function ei(n,e){if(n===e)return!0;const t=Co(n);if(t!==Co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qc(n).isEqual(Qc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ki(i.timestampValue),c=ki(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ps(i.bytesValue).isEqual(Ps(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xt(i.doubleValue),c=xt(s.doubleValue);return a===c?Hc(a)===Hc(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(nE(a)!==nE(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!ei(a[h],c[h])))return!1;return!0}(n,e);default:return Te()}}function Jc(n,e){return(n.values||[]).find(t=>ei(t,e))!==void 0}function Cs(n,e){if(n===e)return 0;const t=Co(n),r=Co(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(s,a){const c=xt(s.integerValue||s.doubleValue),h=xt(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return iE(n.timestampValue,e.timestampValue);case 4:return iE(Qc(n),Qc(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return function(s,a){const c=Ps(s),h=Ps(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),h=a.split("/");for(let d=0;d<c.length&&d<h.length;d++){const p=ze(c[d],h[d]);if(p!==0)return p}return ze(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const c=ze(xt(s.latitude),xt(a.latitude));return c!==0?c:ze(xt(s.longitude),xt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sE(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,h,d,p;const _=s.fields||{},v=a.fields||{},I=(c=_.value)===null||c===void 0?void 0:c.arrayValue,O=(h=v.value)===null||h===void 0?void 0:h.arrayValue,M=ze(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((p=O==null?void 0:O.values)===null||p===void 0?void 0:p.length)||0);return M!==0?M:sE(I,O)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===vs.mapValue&&a===vs.mapValue)return 0;if(s===vs.mapValue)return 1;if(a===vs.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let _=0;_<h.length&&_<p.length;++_){const v=ze(h[_],p[_]);if(v!==0)return v;const I=Cs(c[h[_]],d[p[_]]);if(I!==0)return I}return ze(h.length,p.length)}(n.mapValue,e.mapValue);default:throw Te()}}function iE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=ki(n),r=ki(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function sE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Cs(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function Ja(n){return sm(n)}function sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ki(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=sm(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${sm(t.fields[a])}`;return i+"}"}(n.mapValue):Te()}function p_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function om(n){return!!n&&"integerValue"in n}function Yc(n){return!!n&&"arrayValue"in n}function oE(n){return!!n&&"nullValue"in n}function aE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uf(n){return!!n&&"mapValue"in n}function gd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Uo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _b(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const yb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fF(n){return"nullValue"in n?af:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?p_(Po.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?gd(n)?yb:{mapValue:{}}:Te()}function dF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?p_(Po.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?yb:"mapValue"in n?gd(n)?{mapValue:{}}:vs:Te()}function uE(n,e){const t=Cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cE(n,e){const t=Cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=Rc(a):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];uf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Uo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pn(Rc(this.value))}}function vb(n){const e=[];return Uo(n.fields,(t,r)=>{const i=new Nt([t]);if(uf(r)){const s=vb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Bt(e,0,xe.min(),xe.min(),xe.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,i){return new Bt(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new Bt(e,2,t,xe.min(),xe.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,xe.min(),xe.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.position=e,this.inclusive=t}}function lE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),t.key):r=Cs(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ei(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function pF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{}class it extends wb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gF(e,t,r):t==="array-contains"?new yF(e,r):t==="in"?new Sb(e,r):t==="not-in"?new vF(e,r):t==="array-contains-any"?new wF(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mF(e,r):new _F(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Cs(t,this.value)):t!==null&&Co(this.value)===Co(t)&&this.matchesComparison(Cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends wb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new vt(e,t)}matches(e){return Xa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xa(n){return n.op==="and"}function am(n){return n.op==="or"}function g_(n){return Eb(n)&&Xa(n)}function Eb(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function um(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+Ja(n.value);if(g_(n))return n.filters.map(e=>um(e)).join(",");{const e=n.filters.map(t=>um(t)).join(",");return`${n.op}(${e})`}}function Ib(n,e){return n instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&ei(r.value,i.value)}(n,e):n instanceof vt?function(r,i){return i instanceof vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&Ib(a,i.filters[c]),!0):!1}(n,e):void Te()}function Tb(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function bb(n){return n instanceof it?function(t){return`${t.field.canonicalString()} ${t.op} ${Ja(t.value)}`}(n):n instanceof vt?function(t){return t.op.toString()+" {"+t.getFilters().map(bb).join(" ,")+"}"}(n):"Filter"}class gF extends it{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class mF extends it{constructor(e,t){super(e,"in",t),this.keys=Ab("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _F extends it{constructor(e,t){super(e,"not-in",t),this.keys=Ab("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ab(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class yF extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yc(t)&&Jc(t.arrayValue,this.value)}}class Sb extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jc(this.value.arrayValue,t)}}class vF extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Jc(this.value.arrayValue,t)}}class wF extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function cm(n,e=null,t=[],r=[],i=null,s=null,a=null){return new EF(n,e,t,r,i,s,a)}function xo(n){const e=be(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>um(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ja(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ja(r)).join(",")),e.ue=t}return e.ue}function gl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ib(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hE(n.startAt,e.startAt)&&hE(n.endAt,e.endAt)}function Nf(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Lf(n,e){return n.filters.filter(t=>t instanceof it&&t.field.isEqual(e))}function fE(n,e,t){let r=af,i=!0;for(const s of Lf(n,e)){let a=af,c=!0;switch(s.op){case"<":case"<=":a=fF(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=af}uE({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];uE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function dE(n,e,t){let r=vs,i=!0;for(const s of Lf(n,e)){let a=vs,c=!0;switch(s.op){case">=":case">":a=dF(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=vs}cE({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];cE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Rb(n,e,t,r,i,s,a,c){return new md(n,e,t,r,i,s,a,c)}function ml(n){return new md(n)}function pE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IF(n){return n.collectionGroup!==null}function Pc(n){const e=be(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new wt(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Vf(s,r))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new Vf(Nt.keyField(),r))}return e.ce}function ir(n){const e=be(n);return e.le||(e.le=TF(e,Pc(n))),e.le}function TF(n,e){if(n.limitType==="F")return cm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Vf(i.field,s)});const t=n.endAt?new Ya(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ya(n.startAt.position,n.startAt.inclusive):null;return cm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function lm(n,e,t){return new md(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _d(n,e){return gl(ir(n),ir(e))&&n.limitType===e.limitType}function Pb(n){return`${xo(ir(n))}|lt:${n.limitType}`}function Da(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bb(i)).join(", ")}]`),pd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ja(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ja(i)).join(",")),`Target(${r})`}(ir(n))}; limitType=${n.limitType})`}function _l(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Pc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,h){const d=lE(a,c,h);return a.inclusive?d<=0:d<0}(r.startAt,Pc(r),i)||r.endAt&&!function(a,c,h){const d=lE(a,c,h);return a.inclusive?d>=0:d>0}(r.endAt,Pc(r),i))}(n,e)}function Cb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xb(n){return(e,t)=>{let r=!1;for(const i of Pc(n)){const s=bF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bF(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(s,a,c){const h=a.data.field(s),d=c.data.field(s);return h!==null&&d!==null?Cs(h,d):Te()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return gb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=new At(ye.comparator);function rr(){return AF}const Db=new At(ye.comparator);function dc(...n){let e=Db;for(const t of n)e=e.insert(t.key,t);return e}function kb(n){let e=Db;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jr(){return Cc()}function Ob(){return Cc()}function Cc(){return new Ns(n=>n.toString(),(n,e)=>n.isEqual(e))}const SF=new At(ye.comparator),RF=new wt(ye.comparator);function Ye(...n){let e=RF;for(const t of n)e=e.add(t);return e}const PF=new wt(ze);function m_(){return PF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function Vb(n){return{integerValue:""+n}}function CF(n,e){return lb(e)?Vb(e):__(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this._=void 0}}function xF(n,e,t){return n instanceof Xc?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&f_(s)&&(s=d_(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Za?Lb(n,e):n instanceof eu?Mb(n,e):function(i,s){const a=Nb(i,s),c=gE(a)+gE(i.Pe);return om(a)&&om(i.Pe)?Vb(c):__(i.serializer,c)}(n,e)}function DF(n,e,t){return n instanceof Za?Lb(n,e):n instanceof eu?Mb(n,e):t}function Nb(n,e){return n instanceof Zc?function(r){return om(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xc extends yd{}class Za extends yd{constructor(e){super(),this.elements=e}}function Lb(n,e){const t=Fb(e);for(const r of n.elements)t.some(i=>ei(i,r))||t.push(r);return{arrayValue:{values:t}}}class eu extends yd{constructor(e){super(),this.elements=e}}function Mb(n,e){let t=Fb(e);for(const r of n.elements)t=t.filter(i=>!ei(i,r));return{arrayValue:{values:t}}}class Zc extends yd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function gE(n){return xt(n.integerValue||n.doubleValue)}function Fb(n){return Yc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,t){this.field=e,this.transform=t}}function OF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Za&&i instanceof Za||r instanceof eu&&i instanceof eu?Qa(r.elements,i.elements,ei):r instanceof Zc&&i instanceof Zc?ei(r.Pe,i.Pe):r instanceof Xc&&i instanceof Xc}(n.transform,e.transform)}class VF{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vd{}function Ub(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wd(n.key,Cn.none()):new du(n.key,n.data,Cn.none());{const t=n.data,r=Pn.empty();let i=new wt(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Mi(n.key,r,new Yn(i.toArray()),Cn.none())}}function NF(n,e,t){n instanceof du?function(i,s,a){const c=i.value.clone(),h=_E(i.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Mi?function(i,s,a){if(!cf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=_E(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(Bb(i)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function xc(n,e,t,r){return n instanceof du?function(s,a,c,h){if(!cf(s.precondition,a))return c;const d=s.value.clone(),p=yE(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Mi?function(s,a,c,h){if(!cf(s.precondition,a))return c;const d=yE(s.fieldTransforms,h,a),p=a.data;return p.setAll(Bb(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(s,a,c){return cf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function LF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Nb(r.transform,i||null);s!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,s))}return t||null}function mE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qa(r,i,(s,a)=>OF(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class du extends vd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mi extends vd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Bb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _E(n,e,t){const r=new Map;Se(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,DF(a,c,t[i]))}return r}function yE(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,xF(s,a,e))}return r}class wd extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $b extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NF(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ob();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const h=Ub(a,c);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(t,r)=>mE(t,r))&&Qa(this.baseMutations,e.baseMutations,(t,r)=>mE(t,r))}}class v_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Se(e.mutations.length===r.length);let i=function(){return SF}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new v_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,st;function FF(n){switch(n){default:return Te();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function qb(n){if(n===void 0)return Kt("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Xt.OK:return ne.OK;case Xt.CANCELLED:return ne.CANCELLED;case Xt.UNKNOWN:return ne.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ne.INTERNAL;case Xt.UNAVAILABLE:return ne.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ne.NOT_FOUND;case Xt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Xt.ABORTED:return ne.ABORTED;case Xt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Xt.DATA_LOSS:return ne.DATA_LOSS;default:return Te()}}(st=Xt||(Xt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=new vo([4294967295,4294967295],0);function vE(n){const e=UF().encode(n),t=new YT;return t.update(e),new Uint8Array(t.digest())}function wE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vo([t,r],0),new vo([i,s],0)]}class E_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pc(`Invalid padding: ${t}`);if(r<0)throw new pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=vo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(vo.fromNumber(r)));return i.compare(BF)===1&&(i=new vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=vE(e),[r,i]=wE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new E_(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const t=vE(e),[r,i]=wE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yl(xe.min(),i,new At(ze),rr(),Ye())}}class vl{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vl(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class zb{constructor(e,t){this.targetId=e,this.me=t}}class Kb{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class EE{constructor(){this.fe=0,this.ge=TE(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ye(),t=Ye(),r=Ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Te()}}),new vl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=TE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $F{constructor(e){this.Le=e,this.Be=new Map,this.ke=rr(),this.qe=IE(),this.Qe=new At(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Nf(s))if(r===0){const a=new ye(s.path);this.Ue(t,a,Bt.newNoDocument(a,xe.min()))}else Se(r===1);else{const a=this.Ye(t);if(a!==r){const c=this.Ze(e),h=c?this.Xe(c,e,a):1;if(h!==0){this.je(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,c;try{a=Ps(r).toUint8Array()}catch(h){if(h instanceof mb)return jc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new E_(a,i,s)}catch(h){return jc(h instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const c=this.Je(a);if(c){if(s.current&&Nf(c.target)){const h=new ye(c.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Bt.newNoDocument(h,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=Ye();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new yl(e,t,this.Qe,this.ke,r);return this.ke=rr(),this.qe=IE(),this.Qe=new At(ze),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new EE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new wt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new EE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function IE(){return new At(ye.comparator)}function TE(){return new At(ye.comparator)}const qF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),zF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),KF=(()=>({and:"AND",or:"OR"}))();class jF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hm(n,e){return n.useProto3Json||pd(e)?e:{value:e}}function tu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WF(n,e){return tu(n,e.toTimestamp())}function $n(n){return Se(!!n),xe.fromTimestamp(function(t){const r=ki(t);return new Lt(r.seconds,r.nanos)}(n))}function I_(n,e){return fm(n,e).canonicalString()}function fm(n,e){const t=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Wb(n){const e=Tt.fromString(n);return Se(tA(e)),e}function Mf(n,e){return I_(n.databaseId,e.path)}function wo(n,e){const t=Wb(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(Qb(t))}function Gb(n,e){return I_(n.databaseId,e)}function Hb(n){const e=Wb(n);return e.length===4?Tt.emptyPath():Qb(e)}function dm(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qb(n){return Se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function bE(n,e,t){return{name:Mf(n,e),fields:t.value.mapValue.fields}}function GF(n,e,t){const r=wo(n,e.name),i=$n(e.updateTime),s=e.createTime?$n(e.createTime):xe.min(),a=new Pn({mapValue:{fields:e.fields}}),c=Bt.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function HF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Se(p===void 0||typeof p=="string"),Gt.fromBase64String(p||"")):(Se(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Gt.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const p=d.code===void 0?ne.UNKNOWN:qb(d.code);return new ve(p,d.message||"")}(a);t=new Kb(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wo(n,r.document.name),s=$n(r.document.updateTime),a=r.document.createTime?$n(r.document.createTime):xe.min(),c=new Pn({mapValue:{fields:r.document.fields}}),h=Bt.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new lf(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wo(n,r.document),s=r.readTime?$n(r.readTime):xe.min(),a=Bt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new lf([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wo(n,r.document),s=r.removedTargetIds||[];t=new lf([],s,i,null)}else{if(!("filter"in e))return Te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new MF(i,s),c=r.targetId;t=new zb(c,a)}}return t}function Ff(n,e){let t;if(e instanceof du)t={update:bE(n,e.key,e.value)};else if(e instanceof wd)t={delete:Mf(n,e.key)};else if(e instanceof Mi)t={update:bE(n,e.key,e.data),updateMask:e2(e.fieldMask)};else{if(!(e instanceof $b))return Te();t={verify:Mf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof Xc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Za)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof eu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw Te()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:WF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te()}(n,e.precondition)),t}function pm(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Cn.updateTime($n(s.updateTime)):s.exists!==void 0?Cn.exists(s.exists):Cn.none()}(e.currentDocument):Cn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;if("setToServerValue"in c)Se(c.setToServerValue==="REQUEST_TIME"),h=new Xc;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];h=new Za(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];h=new eu(p)}else"increment"in c?h=new Zc(a,c.increment):Te();const d=Nt.fromServerFormat(c.fieldPath);return new kF(d,h)}(n,i)):[];if(e.update){e.update.name;const i=wo(n,e.update.name),s=new Pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(h){const d=h.fieldPaths||[];return new Yn(d.map(p=>Nt.fromServerFormat(p)))}(e.updateMask);return new Mi(i,s,a,t,r)}return new du(i,s,t,r)}if(e.delete){const i=wo(n,e.delete);return new wd(i,t)}if(e.verify){const i=wo(n,e.verify);return new $b(i,t)}return Te()}function QF(n,e){return n&&n.length>0?(Se(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?$n(i.updateTime):$n(s);return a.isEqual(xe.min())&&(a=$n(s)),new VF(a,i.transformResults||[])}(t,e))):[]}function Jb(n,e){return{documents:[Gb(n,e.path)]}}function Yb(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Gb(n,i);const s=function(d){if(d.length!==0)return eA(vt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:ka(v.field),direction:YF(v.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=hm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function Xb(n){let e=Hb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Se(r===1);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(_){const v=Zb(_);return v instanceof vt&&g_(v)?v.getFilters():[v]}(t.where));let a=[];t.orderBy&&(a=function(_){return _.map(v=>function(O){return new Vf(Oa(O.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(_){let v;return v=typeof _=="object"?_.value:_,pd(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(_){const v=!!_.before,I=_.values||[];return new Ya(I,v)}(t.startAt));let d=null;return t.endAt&&(d=function(_){const v=!_.before,I=_.values||[];return new Ya(I,v)}(t.endAt)),Rb(e,i,a,s,c,"F",h,d)}function JF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zb(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Oa(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oa(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Oa(t.unaryFilter.field);return it.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Oa(t.unaryFilter.field);return it.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return it.create(Oa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return vt.create(t.compositeFilter.filters.map(r=>Zb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function YF(n){return qF[n]}function XF(n){return zF[n]}function ZF(n){return KF[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Oa(n){return Nt.fromServerFormat(n.fieldPath)}function eA(n){return n instanceof it?function(t){if(t.op==="=="){if(aE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(oE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(oE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:XF(t.op),value:t.value}}}(n):n instanceof vt?function(t){const r=t.getFilters().map(i=>eA(i));return r.length===1?r[0]:{compositeFilter:{op:ZF(t.op),filters:r}}}(n):Te()}function e2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t,r,i,s=xe.min(),a=xe.min(),c=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.ct=e}}function t2(n,e){let t;if(e.document)t=GF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=ko(e.noDocument.readTime);t=Bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te();{const r=ye.fromSegments(e.unknownDocument.path),i=ko(e.unknownDocument.version);t=Bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Lt(i[0],i[1]);return xe.fromTimestamp(s)}(e.readTime)),t}function AE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:Mf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:tu(s,a.version.toTimestamp()),createTime:tu(s,a.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Do(e.version)};else{if(!e.isUnknownDocument())return Te();r.unknownDocument={path:t.path.toArray(),version:Do(e.version)}}return r}function Uf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Do(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ko(n){const e=new Lt(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function ho(n,e){const t=(e.baseMutations||[]).map(s=>pm(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>pm(n.ct,s)),i=Lt.fromMillis(e.localWriteTimeMs);return new y_(e.batchId,i,t,r)}function gc(n){const e=ko(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ko(n.lastLimboFreeSnapshotVersion):xe.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Se(s.documents.length===1),ir(ml(Hb(s.documents[0])))}(n.query):function(s){return ir(Xb(s))}(n.query),new bi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Gt.fromBase64String(n.resumeToken))}function rA(n,e){const t=Do(e.snapshotVersion),r=Do(e.lastLimboFreeSnapshotVersion);let i;i=Nf(e.target)?Jb(n.ct,e.target):Yb(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iA(n){const e=Xb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lm(e,e.limit,"L"):e}function dg(n,e){return new w_(e.largestBatchId,pm(n.ct,e.overlayMutation))}function SE(n,e){const t=e.path.lastSegment();return[n,Bn(e.path.popLast()),t]}function RE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Do(r.readTime),documentKey:Bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{getBundleMetadata(e,t){return PE(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ko(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return PE(e).put(function(i){return{bundleId:i.id,createTime:Do($n(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return CE(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:iA(s.bundledQuery),readTime:ko(s.readTime)}}(r)})}saveNamedQuery(e,t){return CE(e).put(function(i){return{name:i.name,readTime:Do($n(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function PE(n){return on(n,"bundles")}function CE(n){return on(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Ed(e,r)}getOverlay(e,t){return Xu(e).get(SE(this.userId,t)).next(r=>r?dg(this.serializer,r):null)}getOverlays(e,t){const r=Jr();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const c=new w_(t,a);i.push(this.ht(e,c))}),K.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Bn(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Xu(e).j("collectionPathOverlayIndex",c))}),K.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Jr(),s=Bn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xu(e).U("collectionPathOverlayIndex",a).next(c=>{for(const h of c){const d=dg(this.serializer,h);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Jr();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xu(e).J({index:"collectionGroupOverlayIndex",range:c},(h,d,p)=>{const _=dg(this.serializer,d);s.size()<i||_.largestBatchId===a?(s.set(_.getKey(),_),a=_.largestBatchId):p.done()}).next(()=>s)}ht(e,t){return Xu(e).put(function(i,s,a){const[c,h,d]=SE(s,a.mutation.key);return{userId:s,collectionPath:h,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ff(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function Xu(n){return on(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{Pt(e){return on(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Gt.fromUint8Array(r):Gt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(xt(e.integerValue));else if("doubleValue"in e){const r=xt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Hc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ki(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ps(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?_b(e)?this.dt(t,Number.MAX_SAFE_INTEGER):gd(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(xt(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ye.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}fo.vt=new fo;function i2(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xE(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=i2(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class s2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=xE(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=xE(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class o2{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class a2{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Zu{constructor(){this.jt=new s2,this.Ht=new o2(this.jt),this.Jt=new a2(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new po(this.indexId,this.documentKey,this.arrayValue,r)}}function ns(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=DE(n.arrayValue,e.arrayValue),t!==0?t:(t=DE(n.directionalValue,e.directionalValue),t!==0?t:ye.comparator(n.documentKey,e.documentKey)))}function DE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.Xt=new wt((t,r)=>Nt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Se(e.collectionGroup===this.collectionId),this.nn)return!1;const t=rm(e);if(t!==void 0&&!this.sn(t))return!1;const r=co(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[s];if(!this.on(c,h)||!this._n(this.en[a++],h))return!1}++s}for(;s<r.length;++s){const c=r[s];if(a>=this.en.length||!this._n(this.en[a++],c))return!1}return!0}an(){if(this.nn)return null;let e=new wt(Nt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new sf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new sf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new sf(r.field,r.dir==="asc"?0:1)));return new Of(Of.UNKNOWN_ID,this.collectionId,t,Gc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n){var e,t;if(Se(n instanceof it||n instanceof vt),n instanceof it){if(n instanceof Sb){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>it.create(n.field,"==",s)))||[];return vt.create(i,"or")}return n}const r=n.filters.map(i=>sA(i));return vt.create(r,n.op)}function u2(n){if(n.getFilters().length===0)return[];const e=_m(sA(n));return Se(oA(e)),gm(e)||mm(e)?[e]:e.getFilters()}function gm(n){return n instanceof it}function mm(n){return n instanceof vt&&g_(n)}function oA(n){return gm(n)||mm(n)||function(t){if(t instanceof vt&&am(t)){for(const r of t.getFilters())if(!gm(r)&&!mm(r))return!1;return!0}return!1}(n)}function _m(n){if(Se(n instanceof it||n instanceof vt),n instanceof it)return n;if(n.filters.length===1)return _m(n.filters[0]);const e=n.filters.map(r=>_m(r));let t=vt.create(e,n.op);return t=Bf(t),oA(t)?t:(Se(t instanceof vt),Se(Xa(t)),Se(t.filters.length>1),t.filters.reduce((r,i)=>T_(r,i)))}function T_(n,e){let t;return Se(n instanceof it||n instanceof vt),Se(e instanceof it||e instanceof vt),t=n instanceof it?e instanceof it?function(i,s){return vt.create([i,s],"and")}(n,e):OE(n,e):e instanceof it?OE(e,n):function(i,s){if(Se(i.filters.length>0&&s.filters.length>0),Xa(i)&&Xa(s))return Tb(i,s.getFilters());const a=am(i)?i:s,c=am(i)?s:i,h=a.filters.map(d=>T_(d,c));return vt.create(h,"or")}(n,e),Bf(t)}function OE(n,e){if(Xa(e))return Tb(e,n.getFilters());{const t=e.filters.map(r=>T_(n,r));return vt.create(t,"or")}}function Bf(n){if(Se(n instanceof it||n instanceof vt),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return Bf(e[0]);if(Eb(n))return n;const t=e.map(i=>Bf(i)),r=[];return t.forEach(i=>{i instanceof it?r.push(i):i instanceof vt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:vt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.un=new b_}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(or.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(or.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class b_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(Tt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new Uint8Array(0);class l2{constructor(e,t){this.databaseId=t,this.cn=new b_,this.ln=new Ns(r=>xo(r),(r,i)=>gl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Bn(i)};return VE(e).put(s)}return K.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ib(t),""],!1,!0);return VE(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Qr(a.parent))}return r})}addFieldIndex(e,t){const r=ec(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=ba(e);return s.next(c=>{a.put(RE(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ec(e),i=ba(e),s=Ta(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ec(e),r=Ta(e),i=ba(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return K.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new kE(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Ta(e);let i=!0;const s=new Map;return K.forEach(this.hn(t),a=>this.Pn(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=Ye();const c=[];return K.forEach(s,(h,d)=>{oe("IndexedDbIndexManager",`Using index ${function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(h)} to execute ${xo(t)}`);const p=function(q,W){const Y=rm(W);if(Y===void 0)return null;for(const re of Lf(q,Y.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(d,h),_=function(q,W){const Y=new Map;for(const re of co(W))for(const P of Lf(q,re.fieldPath))switch(P.op){case"==":case"in":Y.set(re.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return Y.set(re.fieldPath.canonicalString(),P.value),Array.from(Y.values())}return null}(d,h),v=function(q,W){const Y=[];let re=!0;for(const P of co(W)){const S=P.kind===0?fE(q,P.fieldPath,q.startAt):dE(q,P.fieldPath,q.startAt);Y.push(S.value),re&&(re=S.inclusive)}return new Ya(Y,re)}(d,h),I=function(q,W){const Y=[];let re=!0;for(const P of co(W)){const S=P.kind===0?dE(q,P.fieldPath,q.endAt):fE(q,P.fieldPath,q.endAt);Y.push(S.value),re&&(re=S.inclusive)}return new Ya(Y,re)}(d,h),O=this.In(h,d,v),M=this.In(h,d,I),F=this.Tn(h,d,_),Q=this.En(h.indexId,p,O,v.inclusive,M,I.inclusive,F);return K.forEach(Q,z=>r.G(z,t.limit).next(q=>{q.forEach(W=>{const Y=ye.fromSegments(W.documentKey);a.has(Y)||(a=a.add(Y),c.push(Y))})}))}).next(()=>c)}return K.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=u2(vt.create(e.filters,"and")).map(r=>cm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,a,c){const h=(t!=null?t.length:1)*Math.max(r.length,s.length),d=h/(t!=null?t.length:1),p=[];for(let _=0;_<h;++_){const v=t?this.dn(t[_/d]):Gh,I=this.An(e,v,r[_%d],i),O=this.Rn(e,v,s[_%d],a),M=c.map(F=>this.An(e,v,F,!0));p.push(...this.createRange(I,O,M))}return p}An(e,t,r,i){const s=new po(e,ye.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new po(e,ye.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new kE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.rn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const i=this.hn(t);return K.forEach(i,s=>this.Pn(e,s).next(a=>{a?r!==0&&a.fields.length<function(h){let d=new wt(Nt.comparator),p=!1;for(const _ of h.filters)for(const v of _.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:d=d.add(v.field));for(const _ of h.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Zu;for(const i of co(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);fo.vt.It(s,a)}return r.zt()}dn(e){const t=new Zu;return fo.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Zu;return fo.vt.It(p_(this.databaseId,t),r.Yt(function(s){const a=co(s);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Zu);let s=0;for(const a of co(e)){const c=r[s++];for(const h of i)if(this.fn(t,a.fieldPath)&&Yc(c))i=this.gn(i,a,c);else{const d=h.Yt(a.kind);fo.vt.It(c,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const h=new Zu;h.seed(c.zt()),fo.vt.It(a,h.Yt(t.kind)),s.push(h)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=ec(e),i=ba(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return K.forEach(s,c=>i.get([c.indexId,this.uid]).next(h=>{a.push(function(p,_){const v=_?new Gc(_.sequenceNumber,new or(ko(_.readTime),new ye(Qr(_.documentKey)),_.largestBatchId)):Gc.empty(),I=p.fields.map(([O,M])=>new sf(Nt.fromServerFormat(O),M));return new Of(p.indexId,p.collectionGroup,I,v)}(c,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ze(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ec(e),s=ba(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>K.forEach(c,h=>s.put(RE(h.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?K.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),K.forEach(c,h=>this.wn(e,i,h).next(d=>{const p=this.Sn(s,h);return d.isEqual(p)?K.resolve():this.bn(e,s,h,d,p)}))))})}Dn(e,t,r,i){return Ta(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ta(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Ta(e);let s=new wt(ns);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(a,c)=>{s=s.add(new po(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}Sn(e,t){let r=new wt(ns);const i=this.Vn(t,e);if(i==null)return r;const s=rm(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Yc(a))for(const c of a.arrayValue.values||[])r=r.add(new po(t.indexId,e.key,this.dn(c),i))}else r=r.add(new po(t.indexId,e.key,Gh,i));return r}bn(e,t,r,i,s){oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(h,d,p,_,v){const I=h.getIterator(),O=d.getIterator();let M=Ia(I),F=Ia(O);for(;M||F;){let Q=!1,z=!1;if(M&&F){const q=p(M,F);q<0?z=!0:q>0&&(Q=!0)}else M!=null?z=!0:Q=!0;Q?(_(F),F=Ia(O)):z?(v(M),M=Ia(I)):(M=Ia(I),F=Ia(O))}}(i,s,ns,c=>{a.push(this.Dn(e,t,r,c))},c=>{a.push(this.vn(e,t,r,c))}),K.waitFor(a)}yn(e){let t=1;return ba(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>ns(a,c)).filter((a,c,h)=>!c||ns(a,h[c-1])!==0);const i=[];i.push(e);for(const a of r){const c=ns(a,e),h=ns(a,t);if(c===0)i[0]=e.Zt();else if(c>0&&h<0)i.push(a),i.push(a.Zt());else if(h>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const c=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Gh,[]],h=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Gh,[]];s.push(IDBKeyRange.bound(c,h))}return s}Cn(e,t){return ns(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NE)}getMinOffset(e,t){return K.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Te())).next(NE)}}function VE(n){return on(n,"collectionParents")}function Ta(n){return on(n,"indexEntries")}function ec(n){return on(n,"indexConfiguration")}function ba(n){return on(n,"indexState")}function NE(n){Se(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;c_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new or(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const h=r.J({range:a},(p,_,v)=>(c++,v.delete()));s.push(h.next(()=>{Se(c===1)}));const d=[];for(const p of t.mutations){const _=hb(e,p.key.path,t.batchId);s.push(i.delete(_)),d.push(p.key)}return K.waitFor(s).next(()=>d)}function $f(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Te();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(41943040,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class Id{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Se(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Id(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rs(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Va(e),a=rs(e);return a.add({}).next(c=>{Se(typeof c=="number");const h=new y_(c,t,r,i),d=function(I,O,M){const F=M.baseMutations.map(z=>Ff(I.ct,z)),Q=M.mutations.map(z=>Ff(I.ct,z));return{userId:O,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:F,mutations:Q}}(this.serializer,this.userId,h),p=[];let _=new wt((v,I)=>ze(v.canonicalString(),I.canonicalString()));for(const v of i){const I=hb(this.userId,v.key.path,c);_=_.add(v.key.path.popLast()),p.push(a.put(d)),p.push(s.put(I,WM))}return _.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[c]=h.keys()}),K.waitFor(p).next(()=>h)})}lookupMutationBatch(e,t){return rs(e).get(t).next(r=>r?(Se(r.userId===this.userId),ho(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?K.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return rs(e).J({index:"userMutationsIndex",range:i},(a,c,h)=>{c.userId===this.userId&&(Se(c.batchId>=r),s=ho(this.serializer,c)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rs(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rs(e).U("userMutationsIndex",t).next(r=>r.map(i=>ho(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=of(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Va(e).J({range:i},(a,c,h)=>{const[d,p,_]=a,v=Qr(p);if(d===this.userId&&t.path.isEqual(v))return rs(e).get(_).next(I=>{if(!I)throw Te();Se(I.userId===this.userId),s.push(ho(this.serializer,I))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(ze);const i=[];return t.forEach(s=>{const a=of(this.userId,s.path),c=IDBKeyRange.lowerBound(a),h=Va(e).J({range:c},(d,p,_)=>{const[v,I,O]=d,M=Qr(I);v===this.userId&&s.path.isEqual(M)?r=r.add(O):_.done()});i.push(h)}),K.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=of(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new wt(ze);return Va(e).J({range:a},(h,d,p)=>{const[_,v,I]=h,O=Qr(v);_===this.userId&&r.isPrefixOf(O)?O.length===i&&(c=c.add(I)):p.done()}).next(()=>this.xn(e,c))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(rs(e).get(s).next(a=>{if(a===null)throw Te();Se(a.userId===this.userId),r.push(ho(this.serializer,a))}))}),K.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return aA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),K.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Va(e).J({range:r},(s,a,c)=>{if(s[0]===this.userId){const h=Qr(s[1]);i.push(h)}else c.done()}).next(()=>{Se(i.length===0)})})}containsKey(e,t){return uA(e,this.userId,t)}Nn(e){return cA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uA(n,e,t){const r=of(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Va(n).J({range:s,H:!0},(c,h,d)=>{const[p,_,v]=c;p===e&&_===i&&(a=!0),d.done()}).next(()=>a)}function rs(n){return on(n,"mutations")}function Va(n){return on(n,"documentMutations")}function cA(n){return on(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oo(0)}static kn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Oo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>xe.fromTimestamp(new Lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Aa(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Aa(e).J((a,c)=>{const h=gc(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,s.push(this.removeTargetData(e,h)))}).next(()=>K.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Aa(e).J((r,i)=>{const s=gc(i);t(s)})}qn(e){return ME(e).get("targetGlobalKey").next(t=>(Se(t!==null),t))}Qn(e,t){return ME(e).put("targetGlobalKey",t)}Kn(e,t){return Aa(e).put(rA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Aa(e).J({range:i,index:"queryTargetsIndex"},(a,c,h)=>{const d=gc(c);gl(t,d.target)&&(s=d,h.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ps(e);return t.forEach(a=>{const c=Bn(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),K.waitFor(i)}removeMatchingKeys(e,t,r){const i=ps(e);return K.forEach(t,s=>{const a=Bn(s.path);return K.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ps(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ps(e);let s=Ye();return i.J({range:r,H:!0},(a,c,h)=>{const d=Qr(a[1]),p=new ye(d);s=s.add(p)}).next(()=>s)}containsKey(e,t){const r=Bn(t.path),i=IDBKeyRange.bound([r],[ib(r)],!1,!0);let s=0;return ps(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,c],h,d)=>{a!==0&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Aa(e).get(t).next(r=>r?gc(r):null)}}function Aa(n){return on(n,"targets")}function ME(n){return on(n,"targetGlobal")}function ps(n){return on(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE([n,e],[t,r]){const i=ze(n,t);return i===0?ze(e,r):i}class f2{constructor(e){this.Un=e,this.buffer=new wt(FE),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class d2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vs(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Os(t)}await this.Hn(3e5)})}}class p2{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Jn.oe);const r=new f2(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(LE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LE):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,c,h,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,a=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,t))).next(_=>(s=_,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(d=Date.now(),xa()<=nt.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(h-c)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-p}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:_})))}}function g2(n,e){return new p2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.db=e,this.garbageCollector=g2(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Hh(e,r)}removeReference(e,t,r){return Hh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hh(e,t)}nr(e,t){return function(i,s){let a=!1;return cA(i).Y(c=>uA(i,c,s).next(h=>(h&&(a=!0),K.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,c)=>{if(c<=t){const h=this.nr(e,a).next(d=>{if(!d)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,xe.min()),ps(e).delete(function(_){return[0,Bn(_.path)]}(a))))});i.push(h)}}).next(()=>K.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hh(e,t)}tr(e,t){const r=ps(e);let i,s=Jn.oe;return r.J({index:"documentTargetsIndex"},([a,c],{path:h,sequenceNumber:d})=>{a===0?(s!==Jn.oe&&t(new ye(Qr(i)),s),s=d,i=h):s=Jn.oe}).next(()=>{s!==Jn.oe&&t(new ye(Qr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hh(n,e){return ps(n).put(function(r,i){return{targetId:0,path:Bn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.changes=new Ns(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oo(e).put(r)}removeEntry(e,t,r){return oo(e).delete(function(s,a){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Uf(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Bt.newInvalidDocument(t);return oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Bt.newInvalidDocument(t)};return oo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,s)=>{r={document:this.ir(t,s),size:$f(s)}}).next(()=>r)}getEntries(e,t){let r=rr();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)}).next(()=>r)}ar(e,t){let r=rr(),i=new At(ye.comparator);return this._r(e,t,(s,a)=>{const c=this.ir(s,a);r=r.insert(s,c),i=i.insert(s,$f(a))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return K.resolve();let i=new wt($E);t.forEach(h=>i=i.add(h));const s=IDBKeyRange.bound(tc(i.first()),tc(i.last())),a=i.getIterator();let c=a.getNext();return oo(e).J({index:"documentKeyIndex",range:s},(h,d,p)=>{const _=ye.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&$E(c,_)<0;)r(c,null),c=a.getNext();c&&c.isEqual(_)&&(r(c,d),c=a.hasNext()?a.getNext():null),c?p.$(tc(c)):p.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),Uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).U(IDBKeyRange.bound(c,h,!0)).next(d=>{s==null||s.incrementDocumentReadCount(d.length);let p=rr();for(const _ of d){const v=this.ir(ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);v.isFoundDocument()&&(_l(t,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(e,t,r,i){let s=rr();const a=BE(t,r),c=BE(t,or.max());return oo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(h,d,p)=>{const _=this.ir(ye.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(_.key,_),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new y2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return UE(e).get("remoteDocumentGlobalKey").next(t=>(Se(!!t),t))}rr(e,t){return UE(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=t2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return Bt.newInvalidDocument(e)}}function hA(n){return new _2(n)}class y2 extends lA{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ns(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wt((s,a)=>ze(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,c.readTime)),a.isValidDocument()){const h=AE(this.cr.serializer,a);i=i.add(s.path.popLast()),r+=$f(h)-c.size,t.push(this.cr.addEntry(e,s,h))}else if(r-=c.size,this.trackRemovals){const h=AE(this.cr.serializer,a.convertToNoDocument(xe.min()));t.push(this.cr.addEntry(e,s,h))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function UE(n){return on(n,"remoteDocumentGlobal")}function oo(n){return on(n,"remoteDocumentsV14")}function tc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BE(n,e){const t=e.documentKey.path.toArray();return[n,Uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $E(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ze(t[s],r[s]),i)return i;return i=ze(t.length,r.length),i||(i=ze(t[t.length-2],r[r.length-2]),i||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&xc(r.mutation,i,Yn.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){const i=Jr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=dc();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Jr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=rr();const a=Cc(),c=function(){return Cc()}();return t.forEach((h,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Mi)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),xc(p.mutation,d,p.mutation.getFieldMask(),Lt.now())):a.set(d.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var _;return c.set(d,new v2(p,(_=a.get(d))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Cc();let i=new At((a,c)=>a-c),s=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let p=r.get(h)||Yn.empty();p=c.applyToLocalView(d,p),r.set(h,p);const _=(i.get(c.batchId)||Ye()).add(h);i=i.insert(c.batchId,_)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,p=h.value,_=Ob();p.forEach(v=>{if(!s.has(v)){const I=Ub(t.get(v),r.get(v));I!==null&&_.set(v,I),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,_))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):K.resolve(Jr());let c=-1,h=s;return a.next(d=>K.forEach(d,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(p)?K.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{h=h.insert(p,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,h,d,Ye())).next(p=>({batchId:c,changes:kb(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=dc();return this.indexManager.getCollectionParents(e,s).next(c=>K.forEach(c,h=>{const d=function(_,v){return new md(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((_,v)=>{a=a.insert(_,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((h,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Bt.newInvalidDocument(p)))});let c=dc();return a.forEach((h,d)=>{const p=s.get(h);p!==void 0&&xc(p.mutation,d,Yn.empty(),Lt.now()),_l(t,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:iA(i.bundledQuery),readTime:$n(i.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.overlays=new At(ye.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jr();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const i=Jr(),s=t.length+1,a=new ye(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new At((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Jr(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Jr(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return K.resolve(c)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new w_(t,r));let s=this.Ir.get(t);s===void 0&&(s=Ye(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.Tr=new wt(hn.Er),this.dr=new wt(hn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new hn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new hn(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ye(new Tt([])),r=new hn(t,e),i=new hn(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ye(new Tt([])),r=new hn(t,e),i=new hn(t,e+1);let s=Ye();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new hn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new wt(hn.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new y_(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new hn(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hn(t,0),i=new hn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);s.push(c)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(ze);return t.forEach(i=>{const s=new hn(i,0),a=new hn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new hn(new ye(s),0);let c=new wt(ze);return this.br.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.wr)),!0)},a),K.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Se(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(t.mutations,i=>{const s=new hn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new hn(t,0),i=this.br.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.Mr=e,this.docs=function(){return new At(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let r=rr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=rr();const a=t.path,c=new ye(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||c_(ob(p),r)<=0||(i.has(p.key)||_l(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Te()}Or(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new A2(this)}getSize(e){return K.resolve(this.size)}}class A2 extends lA{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.persistence=e,this.Nr=new Ns(t=>xo(t),gl),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new A_,this.targetCount=0,this.kr=Oo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Jn(0),this.Kr=!1,this.Kr=!0,this.$r=new I2,this.referenceDelegate=e(this),this.Ur=new S2(this),this.indexManager=new c2,this.remoteDocumentCache=function(i){return new b2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new nA(t),this.Gr=new w2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new T2(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const i=new R2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class R2 extends ub{constructor(e){super(),this.currentSequenceNumber=e}}class Td{constructor(e){this.persistence=e,this.Jr=new A_,this.Yr=null}static Zr(e){return new Td(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{const i=ye.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.serializer=e}O(e,t,r,i){const s=new dd("createOrUpgrade",t);r<1&&i>=1&&(function(h){h.createObjectStore("owner")}(e),function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tE,{unique:!0}),h.createObjectStore("documentMutations")}(e),qE(e),function(h){h.createObjectStore("remoteDocuments")}(e));let a=K.resolve();return r<3&&i>=3&&(r!==0&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),qE(e)),a=a.next(()=>function(h){const d=h.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(h,d){return d.store("mutations").U().next(p=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tE,{unique:!0});const _=d.store("mutations"),v=p.map(I=>_.put(I));return K.waitFor(v)})}(e,s))),a=a.next(()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ni(s))),r<6&&i>=6&&(a=a.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(a=a.next(()=>this.ii(s))),r<8&&i>=8&&(a=a.next(()=>this.si(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.oi(s))),r<11&&i>=11&&(a=a.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(h){const d=h.createObjectStore("documentOverlays",{keyPath:iF});d.createIndex("collectionPathOverlayIndex",sF,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",oF,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(h){const d=h.createObjectStore("remoteDocumentsV14",{keyPath:GM});d.createIndex("documentKeyIndex",HM),d.createIndex("collectionGroupIndex",QM)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),r<15&&i>=15&&(a=a.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:eF}).createIndex("sequenceNumberIndex",tF,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:nF}).createIndex("documentKeyIndex",rF,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=$f(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>K.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(c=>K.forEach(c,h=>{Se(h.userId===s.userId);const d=ho(this.serializer,h);return aA(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,c)=>{const h=new Tt(a),d=function(_){return[0,Bn(_)]}(h);s.push(t.get(d).next(p=>p?K.resolve():(_=>t.put({targetId:0,path:Bn(_),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>K.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:ZM});const r=t.store("collectionParents"),i=new b_,s=a=>{if(i.add(a)){const c=a.lastSegment(),h=a.popLast();return r.put({collectionId:c,parent:Bn(h)})}};return t.store("remoteDocuments").J({H:!0},(a,c)=>{const h=new Tt(a);return s(h.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,c,h],d)=>{const p=Qr(c);return s(p.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=gc(i),a=rA(this.serializer,s);return t.put(a)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const c=t.store("remoteDocumentsV14"),h=function(_){return _.document?new ye(Tt.fromString(_.document.name).popFirst(5)):_.noDocument?ye.fromSegments(_.noDocument.path):_.unknownDocument?ye.fromSegments(_.unknownDocument.path):Te()}(a).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(d))}).next(()=>K.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=hA(this.serializer),s=new dA(Td.Zr,this.serializer.ct);return r.U().next(a=>{const c=new Map;return a.forEach(h=>{var d;let p=(d=c.get(h.userId))!==null&&d!==void 0?d:Ye();ho(this.serializer,h).keys().forEach(_=>p=p.add(_)),c.set(h.userId,p)}),K.forEach(c,(h,d)=>{const p=new bn(d),_=Ed.lt(this.serializer,p),v=s.getIndexManager(p),I=Id.lt(p,this.serializer,v,s.referenceDelegate);return new fA(i,I,_,v).recalculateAndSaveOverlaysForDocumentKeys(new im(t,Jn.oe),h).next()})})}}function qE(n){n.createObjectStore("targetDocuments",{keyPath:YM}).createIndex("documentTargetsIndex",XM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JM,{unique:!0}),n.createObjectStore("targetGlobal")}const pg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class S_{constructor(e,t,r,i,s,a,c,h,d,p,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=c,this.ci=d,this.li=p,this.hi=_,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!S_.D())throw new ve(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m2(this,i),this.Ai=t+"main",this.serializer=new nA(h),this.Ri=new As(this.Ai,this.hi,new P2(this.serializer)),this.$r=new r2,this.Ur=new h2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hA(this.serializer),this.Gr=new n2,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ne.FAILED_PRECONDITION,pg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Jn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Vs(e))return oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return nc(e).get("owner").next(t=>K.resolve(this.vi(t)))}Ci(e){return Qh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=on(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(c=>s.indexOf(c)===-1);return K.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?K.resolve(!0):nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ve(ne.FAILED_PRECONDITION,pg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new im(e,Jn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Qh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Id.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new l2(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ed.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){oe("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(h){return h===17?cF:h===16?uF:h===15?h_:h===14?pb:h===13?db:h===12?aF:h===11?fb:void Te()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,c=>(a=new im(c,this.Qr?this.Qr.next():Jn.oe),t==="readwrite-primary"?this.wi(a).next(h=>!!h||this.Si(a)).next(h=>{if(!h)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ve(ne.FAILED_PRECONDITION,ab);return r(a)}).next(h=>this.Di(a).next(()=>h)):this.Ki(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Ki(e){return nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ne.FAILED_PRECONDITION,pg)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nc(e).put("owner",t)}static D(){return As.D()}bi(e){const t=nc(e);return t.get("owner").next(r=>this.vi(r)?(oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):K.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;KT()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nc(n){return on(n,"owner")}function Qh(n){return on(n,"clientMetadata")}function pA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ye(),i=Ye();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new R_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return KT()?8:cb(sn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new C2;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(xa()<=nt.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Da(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(xa()<=nt.DEBUG&&oe("QueryEngine","Query:",Da(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(xa()<=nt.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Da(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(t))):K.resolve())}Yi(e,t){if(pE(t))return K.resolve(null);let r=ir(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=lm(t,null,"F"),r=ir(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Ye(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.ts(t,c);return this.ns(t,d,a,h.readTime)?this.Yi(e,lm(t,null,"F")):this.rs(e,d,t,h)}))})))}Zi(e,t,r,i){return pE(t)||i.isEqual(xe.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?K.resolve(null):(xa()<=nt.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Da(t)),this.rs(e,a,t,sb(i,-1)).next(c=>c))})}ts(e,t){let r=new wt(xb(e));return t.forEach((i,s)=>{_l(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return xa()<=nt.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Da(t)),this.Ji.getDocumentsMatchingQuery(e,t,or.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new At(ze),this._s=new Ns(s=>xo(s),gl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function mA(n,e,t,r){return new x2(n,e,t,r)}async function _A(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let h=Ye();for(const d of i){a.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}for(const d of s){c.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function D2(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,d,p){const _=d.batch,v=_.keys();let I=K.resolve();return v.forEach(O=>{I=I.next(()=>p.getEntry(h,O)).next(M=>{const F=d.docVersions.get(O);Se(F!==null),M.version.compareTo(F)<0&&(_.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),p.addEntry(M)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(h,_))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ye();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function yA(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function k2(n,e){const t=be(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const c=[];e.targetChanges.forEach((p,_)=>{const v=i.get(_);if(!v)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,_)));let I=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Gt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),i=i.insert(_,I),function(M,F,Q){return M.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(v,I,p)&&c.push(t.Ur.updateTargetData(s,I))});let h=rr(),d=Ye();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(O2(s,a,e.documentUpdates).next(p=>{h=p.Ps,d=p.Is})),!r.isEqual(xe.min())){const p=t.Ur.getLastRemoteSnapshotVersion(s).next(_=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return K.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,d)).next(()=>h)}).then(s=>(t.os=i,s))}function O2(n,e,t){let r=Ye(),i=Ye();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=rr();return t.forEach((c,h)=>{const d=s.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(xe.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):oe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function V2(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qf(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new bi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function nu(n,e,t){const r=be(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Vs(a))throw a;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function ym(n,e,t){const r=be(n);let i=xe.min(),s=Ye();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,d,p){const _=be(h),v=_._s.get(p);return v!==void 0?K.resolve(_.os.get(v)):_.Ur.getTargetData(d,p)}(r,a,ir(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:xe.min(),t?s:Ye())).next(c=>(EA(r,Cb(e),c),{documents:c,Ts:s})))}function vA(n,e){const t=be(n),r=be(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(a=>a?a.target:null))}function wA(n,e){const t=be(n),r=t.us.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,sb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(EA(t,e,i),i))}function EA(n,e,t){let r=n.us.get(e)||xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function zE(n,e){return`firestore_clients_${n}_${e}`}function KE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gg(n,e){return`firestore_targets_${n}_${e}`}class zf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ve(i.error.code,i.error.message))),a?new zf(e,t,i.state,s):(Kt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ve(r.error.code,r.error.message))),s?new Dc(e,r.state,i):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=m_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=lb(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Kf(e,s):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class P_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new P_(t.clientId,t.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vm{constructor(){this.activeTargetIds=m_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mg{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new At(ze),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=zE(this.persistenceKey,this.ps),this.vs=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new vm),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this.Os=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(zE(this.persistenceKey,r));if(i){const s=Kf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gg(this.persistenceKey,e));if(i){const s=Dc.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe("SharedClientState","READ",e,t),t}setItem(e,t){oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(oe("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let a=Jn.oe;if(s!=null)try{const c=JSON.parse(s);Se(typeof c=="number"),a=c}catch(c){Kt("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(t.newValue);r!==Jn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new zf(this.currentUser,e,t,r),s=KE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=KE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=gg(this.persistenceKey,e),s=new Dc(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Kf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return zf.Rs(new bn(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Dc.Rs(i,t)}Ls(e){return P_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],c=[];return s.forEach(h=>{i.has(h)||a.push(h)}),i.forEach(h=>{s.has(h)||c.push(h)}),this.syncEngine.io(a,c).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=m_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class IA{constructor(){this.so=new vm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh=null;function _g(){return Jh===null?Jh=function(){return 268435456+Math.round(2147483648*Math.random())}():Jh++,"0x"+Jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class F2 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const c=_g(),h=this.xo(t,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,h,d,i).then(p=>(oe("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw jc("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",h,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){const i=L2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=_g();return new Promise((a,c)=>{const h=new XT;h.setWithCredentials(!0),h.listenOnce(ZT.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case rf.NO_ERROR:const p=h.getResponseJson();oe(In,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case rf.TIMEOUT:oe(In,`RPC '${e}' ${s} timed out`),c(new ve(ne.DEADLINE_EXCEEDED,"Request time out"));break;case rf.HTTP_ERROR:const _=h.getStatus();if(oe(In,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const O=function(F){const Q=F.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Q)>=0?Q:ne.UNKNOWN}(I.status);c(new ve(O,I.message))}else c(new ve(ne.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ve(ne.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{oe(In,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);oe(In,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=_g(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=nb(),c=tb(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=s.join("");oe(In,`Creating RPC '${e}' stream ${i}: ${p}`,h);const _=a.createWebChannel(p,h);let v=!1,I=!1;const O=new M2({Io:F=>{I?oe(In,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(v||(oe(In,`Opening RPC '${e}' stream ${i} transport.`),_.open(),v=!0),oe(In,`RPC '${e}' stream ${i} sending:`,F),_.send(F))},To:()=>_.close()}),M=(F,Q,z)=>{F.listen(Q,q=>{try{z(q)}catch(W){setTimeout(()=>{throw W},0)}})};return M(_,fc.EventType.OPEN,()=>{I||(oe(In,`RPC '${e}' stream ${i} transport opened.`),O.yo())}),M(_,fc.EventType.CLOSE,()=>{I||(I=!0,oe(In,`RPC '${e}' stream ${i} transport closed`),O.So())}),M(_,fc.EventType.ERROR,F=>{I||(I=!0,jc(In,`RPC '${e}' stream ${i} transport errored:`,F),O.So(new ve(ne.UNAVAILABLE,"The operation could not be completed")))}),M(_,fc.EventType.MESSAGE,F=>{var Q;if(!I){const z=F.data[0];Se(!!z);const q=z,W=q.error||((Q=q[0])===null||Q===void 0?void 0:Q.error);if(W){oe(In,`RPC '${e}' stream ${i} received error:`,W);const Y=W.status;let re=function(A){const x=Xt[A];if(x!==void 0)return qb(x)}(Y),P=W.message;re===void 0&&(re=ne.INTERNAL,P="Unknown error status: "+Y+" with message "+W.message),I=!0,O.So(new ve(re,P)),_.close()}else oe(In,`RPC '${e}' stream ${i} received:`,z),O.bo(z)}}),M(c,eb.STAT_EVENT,F=>{F.stat===nm.PROXY?oe(In,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===nm.NOPROXY&&oe(In,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.wo()},0),O}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof window!="undefined"?window:null}function hf(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n){return new jF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t,r,i,s,a,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bA(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ve(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U2 extends AA{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=HF(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?$n(a.readTime):xe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=dm(this.serializer),t.addTarget=function(s,a){let c;const h=a.target;if(c=Nf(h)?{documents:Jb(s,h)}:{query:Yb(s,h)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=jb(s,a.resumeToken);const d=hm(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){c.readTime=tu(s,a.snapshotVersion.toTimestamp());const d=hm(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=JF(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=dm(this.serializer),t.removeTarget=e,this.a_(t)}}class B2 extends AA{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=QF(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=dm(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ff(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,fm(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ne.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,fm(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(ne.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class q2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kt(t),this.D_=!1):oe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Bo(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(h){const d=be(h);d.L_.add(4),await wl(d),d.q_.set("Unknown"),d.L_.delete(4),await Ad(d)}(this))})}),this.q_=new q2(r,i)}}async function Ad(n){if(Bo(n))for(const e of n.B_)await e(!0)}async function wl(n){for(const e of n.B_)await e(!1)}function Sd(n,e){const t=be(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),D_(t)?x_(t):gu(t).r_()&&C_(t,e))}function ru(n,e){const t=be(n),r=gu(t);t.N_.delete(e),r.r_()&&SA(t,e),t.N_.size===0&&(r.r_()?r.o_():Bo(t)&&t.q_.set("Unknown"))}function C_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gu(n).A_(e)}function SA(n,e){n.Q_.xe(e),gu(n).R_(e)}function x_(n){n.Q_=new $F({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),gu(n).start(),n.q_.v_()}function D_(n){return Bo(n)&&!gu(n).n_()&&n.N_.size>0}function Bo(n){return be(n).L_.size===0}function RA(n){n.Q_=void 0}async function K2(n){n.q_.set("Online")}async function j2(n){n.N_.forEach((e,t)=>{C_(n,e)})}async function W2(n,e){RA(n),D_(n)?(n.q_.M_(e),x_(n)):n.q_.set("Unknown")}async function G2(n,e,t){if(n.q_.set("Online"),e instanceof Kb&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(n,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jf(n,r)}else if(e instanceof lf?n.Q_.Ke(e):e instanceof zb?n.Q_.He(e):n.Q_.We(e),!t.isEqual(xe.min()))try{const r=await yA(n.localStore);t.compareTo(r)>=0&&await function(s,a){const c=s.Q_.rt(a);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,d)=>{const p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(Gt.EMPTY_BYTE_STRING,p.snapshotVersion)),SA(s,h);const _=new bi(p.target,h,d,p.sequenceNumber);C_(s,_)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await jf(n,r)}}async function jf(n,e,t){if(!Vs(e))throw e;n.L_.add(1),await wl(n),n.q_.set("Offline"),t||(t=()=>yA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Ad(n)})}function PA(n,e){return e().catch(t=>jf(n,t,e))}async function pu(n){const e=be(n),t=xs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;H2(e);)try{const i=await V2(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Q2(e,i)}catch(i){await jf(e,i)}CA(e)&&xA(e)}function H2(n){return Bo(n)&&n.O_.length<10}function Q2(n,e){n.O_.push(e);const t=xs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function CA(n){return Bo(n)&&!xs(n).n_()&&n.O_.length>0}function xA(n){xs(n).start()}async function J2(n){xs(n).p_()}async function Y2(n){const e=xs(n);for(const t of n.O_)e.m_(t.mutations)}async function X2(n,e,t){const r=n.O_.shift(),i=v_.from(r,e,t);await PA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await pu(n)}async function Z2(n,e){e&&xs(n).V_&&await async function(r,i){if(function(a){return FF(a)&&a!==ne.ABORTED}(i.code)){const s=r.O_.shift();xs(r).s_(),await PA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pu(r)}}(n,e),CA(n)&&xA(n)}async function WE(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=Bo(t);t.L_.add(3),await wl(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Ad(t)}async function wm(n,e){const t=be(n);e?(t.L_.delete(2),await Ad(t)):e||(t.L_.add(2),await wl(t),t.q_.set("Unknown"))}function gu(n){return n.K_||(n.K_=function(t,r,i){const s=be(t);return s.w_(),new U2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:K2.bind(null,n),Ro:j2.bind(null,n),mo:W2.bind(null,n),d_:G2.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),D_(n)?x_(n):n.q_.set("Unknown")):(await n.K_.stop(),RA(n))})),n.K_}function xs(n){return n.U_||(n.U_=function(t,r,i){const s=be(t);return s.w_(),new B2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:J2.bind(null,n),mo:Z2.bind(null,n),f_:Y2.bind(null,n),g_:X2.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await pu(n)):(await n.U_.stop(),n.O_.length>0&&(oe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new k_(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O_(n,e){if(Kt("AsyncQueue",`${e}: ${n}`),Vs(n))return new ve(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=dc(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new qa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.W_=new At(ye.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class iu{constructor(e,t,r,i,s,a,c,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new iu(e,t,qa.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class tU{constructor(){this.queries=HE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=be(t),s=i.queries;i.queries=HE(),s.forEach((a,c)=>{for(const h of c.j_)h.onError(r)})})(this,new ve(ne.ABORTED,"Firestore shutting down"))}}function HE(){return new Ns(n=>Pb(n),_d)}async function DA(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new eU,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const c=O_(a,`Initialization of query '${Da(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&V_(t)}async function kA(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nU(n,e){const t=be(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&V_(t)}function rU(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function V_(n){n.Y_.forEach(e=>{e.next()})}var Em,QE;(QE=Em||(Em={})).ea="default",QE.Cache="cache";class OA{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new iu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.key=e}}class NA{constructor(e){this.key=e}}class iU{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ye(),this.mutatedKeys=Ye(),this.Aa=xb(e),this.Ra=new qa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new GE,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,_)=>{const v=i.get(p),I=_l(this.query,_)?_:null,O=!!v&&this.mutatedKeys.has(v.key),M=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;v&&I?v.data.isEqual(I.data)?O!==M&&(r.track({type:3,doc:I}),F=!0):this.ga(v,I)||(r.track({type:2,doc:I}),F=!0,(h&&this.Aa(I,h)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!v&&I?(r.track({type:0,doc:I}),F=!0):v&&!I&&(r.track({type:1,doc:v}),F=!0,(h||d)&&(c=!0)),F&&(I?(a=a.add(I),s=M?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,_)=>function(I,O){const M=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return M(I)-M(O)}(p.type,_.type)||this.Aa(p.doc,_.doc)),this.pa(r),i=i!=null&&i;const c=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new iu(this.query,e.Ra,s,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new GE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new NA(r))}),this.da.forEach(r=>{e.has(r)||t.push(new VA(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ye();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return iu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oU{constructor(e){this.key=e,this.va=!1}}class aU{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ns(c=>Pb(c),_d),this.Ma=new Map,this.xa=new Set,this.Oa=new At(ye.comparator),this.Na=new Map,this.La=new A_,this.Ba={},this.ka=new Map,this.qa=Oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uU(n,e,t=!0){const r=Rd(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await LA(r,e,t,!0),i}async function cU(n,e){const t=Rd(n);await LA(t,e,!0,!1)}async function LA(n,e,t,r){const i=await qf(n.localStore,ir(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let c;return r&&(c=await N_(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Sd(n.remoteStore,i),c}async function N_(n,e,t,r,i){n.Ka=(_,v,I)=>async function(M,F,Q,z){let q=F.view.ma(Q);q.ns&&(q=await ym(M.localStore,F.query,!1).then(({documents:P})=>F.view.ma(P,q)));const W=z&&z.targetChanges.get(F.targetId),Y=z&&z.targetMismatches.get(F.targetId)!=null,re=F.view.applyChanges(q,M.isPrimaryClient,W,Y);return Im(M,F.targetId,re.wa),re.snapshot}(n,_,v,I);const s=await ym(n.localStore,e,!0),a=new iU(e,s.Ts),c=a.ma(s.documents),h=vl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,h);Im(n,t,d.wa);const p=new sU(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}async function lU(n,e,t){const r=be(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!_d(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ru(r.remoteStore,i.targetId),su(r,i.targetId)}).catch(Os)):(su(r,i.targetId),await nu(r.localStore,i.targetId,!0))}async function hU(n,e){const t=be(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ru(t.remoteStore,r.targetId))}async function fU(n,e,t){const r=U_(n);try{const i=await function(a,c){const h=be(a),d=Lt.now(),p=c.reduce((I,O)=>I.add(O.key),Ye());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>{let O=rr(),M=Ye();return h.cs.getEntries(I,p).next(F=>{O=F,O.forEach((Q,z)=>{z.isValidDocument()||(M=M.add(Q))})}).next(()=>h.localDocuments.getOverlayedDocuments(I,O)).next(F=>{_=F;const Q=[];for(const z of c){const q=LF(z,_.get(z.key).overlayedDocument);q!=null&&Q.push(new Mi(z.key,q,vb(q.value.mapValue),Cn.exists(!0)))}return h.mutationQueue.addMutationBatch(I,d,Q,c)}).next(F=>{v=F;const Q=F.applyToLocalDocumentSet(_,M);return h.documentOverlayCache.saveOverlays(I,F.batchId,Q)})}).then(()=>({batchId:v.batchId,changes:kb(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new At(ze)),d=d.insert(c,h),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),await Ls(r,i.changes),await pu(r.remoteStore)}catch(i){const s=O_(i,"Failed to persist write");t.reject(s)}}async function MA(n,e){const t=be(n);try{const r=await k2(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Se(a.va):i.removedDocuments.size>0&&(Se(a.va),a.va=!1))}),await Ls(t,r,e)}catch(r){await Os(r)}}function JE(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const h=be(a);h.onlineState=c;let d=!1;h.queries.forEach((p,_)=>{for(const v of _.j_)v.Z_(c)&&(d=!0)}),d&&V_(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dU(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new At(ye.comparator);a=a.insert(s,Bt.newNoDocument(s,xe.min()));const c=Ye().add(s),h=new yl(xe.min(),new Map,new At(ze),a,c);await MA(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),F_(r)}else await nu(r.localStore,e,!1).then(()=>su(r,e,t)).catch(Os)}async function pU(n,e){const t=be(n),r=e.batch.batchId;try{const i=await D2(t.localStore,e);M_(t,r,null),L_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ls(t,i)}catch(i){await Os(i)}}async function gU(n,e,t){const r=be(n);try{const i=await function(a,c){const h=be(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return h.mutationQueue.lookupMutationBatch(d,c).next(_=>(Se(_!==null),p=_.keys(),h.mutationQueue.removeMutationBatch(d,_))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>h.localDocuments.getDocuments(d,p))})}(r.localStore,e);M_(r,e,t),L_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ls(r,i)}catch(i){await Os(i)}}function L_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function M_(n,e,t){const r=be(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function su(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||FA(n,r)})}function FA(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(ru(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),F_(n))}function Im(n,e,t){for(const r of t)r instanceof VA?(n.La.addReference(r.key,e),mU(n,r)):r instanceof NA?(oe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||FA(n,r.key)):Te()}function mU(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(oe("SyncEngine","New document in limbo: "+t),n.xa.add(r),F_(n))}function F_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ye(Tt.fromString(e)),r=n.qa.next();n.Na.set(r,new oU(t)),n.Oa=n.Oa.insert(t,r),Sd(n.remoteStore,new bi(ir(ml(t.path)),r,"TargetPurposeLimboResolution",Jn.oe))}}async function Ls(n,e,t){const r=be(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{a.push(r.Ka(h,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){const _=d?!d.fromCache:(p=t==null?void 0:t.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=R_.Wi(h.targetId,d);s.push(_)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(h,d){const p=be(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>K.forEach(d,v=>K.forEach(v.$i,I=>p.persistence.referenceDelegate.addReference(_,v.targetId,I)).next(()=>K.forEach(v.Ui,I=>p.persistence.referenceDelegate.removeReference(_,v.targetId,I)))))}catch(_){if(!Vs(_))throw _;oe("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const I=p.os.get(v),O=I.snapshotVersion,M=I.withLastLimboFreeSnapshotVersion(O);p.os=p.os.insert(v,M)}}}(r.localStore,s))}async function _U(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await _A(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(h=>{h.reject(new ve(ne.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ls(t,r.hs)}}function yU(n,e){const t=be(n),r=t.Na.get(e);if(r&&r.va)return Ye().add(r.key);{let i=Ye();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}async function vU(n,e){const t=be(n),r=await ym(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Im(t,e.targetId,i.wa),i}async function wU(n,e){const t=be(n);return wA(t.localStore,e).then(r=>Ls(t,r))}async function EU(n,e,t,r){const i=be(n),s=await function(c,h){const d=be(c),p=be(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",_=>p.Mn(_,h).next(v=>v?d.localDocuments.getDocuments(_,v):K.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await pu(i.remoteStore):t==="acknowledged"||t==="rejected"?(M_(i,e,r||null),L_(i,e),function(c,h){be(be(c).mutationQueue).On(h)}(i.localStore,e)):Te(),await Ls(i,s)):oe("SyncEngine","Cannot apply mutation batch with id: "+e)}async function IU(n,e){const t=be(n);if(Rd(t),U_(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await YE(t,r.toArray());t.Qa=!0,await wm(t.remoteStore,!0);for(const s of i)Sd(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(su(t,a),nu(t.localStore,a,!0))),ru(t.remoteStore,a)}),await i,await YE(t,r),function(a){const c=be(a);c.Na.forEach((h,d)=>{ru(c.remoteStore,d)}),c.La.pr(),c.Na=new Map,c.Oa=new At(ye.comparator)}(t),t.Qa=!1,await wm(t.remoteStore,!1)}}async function YE(n,e,t){const r=be(n),i=[],s=[];for(const a of e){let c;const h=r.Ma.get(a);if(h&&h.length!==0){c=await qf(r.localStore,ir(h[0]));for(const d of h){const p=r.Fa.get(d),_=await vU(r,p);_.snapshot&&s.push(_.snapshot)}}else{const d=await vA(r.localStore,a);c=await qf(r.localStore,d),await N_(r,UA(d),a,!1,c.resumeToken)}i.push(c)}return r.Ca.d_(s),i}function UA(n){return Rb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function TU(n){return function(t){return be(be(t).persistence).Qi()}(be(n).localStore)}async function bU(n,e,t,r){const i=be(n);if(i.Qa)return void oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await wA(i.localStore,Cb(s[0])),c=yl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Gt.EMPTY_BYTE_STRING);await Ls(i,a,c);break}case"rejected":await nu(i.localStore,e,!0),su(i,e,r);break;default:Te()}}async function AU(n,e,t){const r=Rd(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){oe("SyncEngine","Adding an already active target "+i);continue}const s=await vA(r.localStore,i),a=await qf(r.localStore,s);await N_(r,UA(s),a.targetId,!1,a.resumeToken),Sd(r.remoteStore,a)}for(const i of t)r.Ma.has(i)&&await nu(r.localStore,i,!1).then(()=>{ru(r.remoteStore,i),su(r,i)}).catch(Os)}}function Rd(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dU.bind(null,e),e.Ca.d_=nU.bind(null,e.eventManager),e.Ca.$a=rU.bind(null,e.eventManager),e}function U_(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gU.bind(null,e),e}class el{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return mA(this.persistence,new gA,e.initialUser,this.serializer)}Ga(e){return new dA(Td.Zr,this.serializer)}Wa(e){return new IA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}el.provider={build:()=>new el};class BA extends el{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await U_(this.Ja.syncEngine),await pu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return mA(this.persistence,new gA,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new d2(r,e.asyncQueue,t)}Ha(e,t){const r=new KM(t,this.persistence);return new zM(e.asyncQueue,r)}Ga(e){const t=pA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new S_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TA(),hf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new IA}}class SU extends BA{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof mg&&(this.sharedClientState.syncEngine={no:EU.bind(null,t),ro:bU.bind(null,t),io:AU.bind(null,t),Qi:TU.bind(null,t),eo:wU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await IU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=TA();if(!mg.D(t))throw new ve(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_U.bind(null,this.syncEngine),await wm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tU}()}createDatastore(e){const t=bd(e.databaseInfo.databaseId),r=function(s){return new F2(s)}(e.databaseInfo);return function(s,a,c,h){return new $2(s,a,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,c){return new z2(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>JE(this.syncEngine,t,0),function(){return jE.D()?new jE:new N2}())}createSyncEngine(e,t){return function(i,s,a,c,h,d,p){const _=new aU(i,s,a,c,h,d);return p&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=be(i);oe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await wl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}tl.provider={build:()=>new tl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bn.UNAUTHENTICATED,this.clientId=rb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{oe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=O_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yg(n,e){n.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _A(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function XE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PU(n);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>WE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>WE(e.remoteStore,i)),n._onlineComponents=e}async function PU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await yg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;jc("Error using user provided cache. Falling back to memory cache: "+t),await yg(n,new el)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await yg(n,new el);return n._offlineComponents}async function qA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await XE(n,n._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await XE(n,new tl))),n._onlineComponents}function CU(n){return qA(n).then(e=>e.syncEngine)}async function Tm(n){const e=await qA(n),t=e.eventManager;return t.onListen=uU.bind(null,e.syncEngine),t.onUnlisten=lU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hU.bind(null,e.syncEngine),t}function xU(n,e,t={}){const r=new Pi;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,c,h,d){const p=new $A({next:v=>{p.Za(),a.enqueueAndForget(()=>kA(s,_));const I=v.docs.has(c);!I&&v.fromCache?d.reject(new ve(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&h&&h.source==="server"?d.reject(new ve(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),_=new OA(ml(c.path),p,{includeMetadataChanges:!0,_a:!0});return DA(s,_)}(await Tm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(n,e,t){if(!t)throw new ve(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kU(n,e,t,r){if(e===!0&&r===!0)throw new ve(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function e0(n){if(!ye.isDocumentKey(n))throw new ve(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function B_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function Ss(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=B_(n);throw new ve(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class KA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OM;switch(r.type){case"firstParty":return new LM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ZE.get(t);r&&(oe("ComponentProvider","Removing Datastore"),ZE.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pd(this.firestore,e,this._query)}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class nl extends Pd{constructor(e,t,r){super(e,t,ml(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new ye(e))}withConverter(e){return new nl(this.firestore,e,this._path)}}function n0(n,e,...t){if(n=xn(n),arguments.length===1&&(e=rb.newId()),DU("doc","path",e),n instanceof KA){const r=Tt.fromString(e,...t);return e0(r),new sr(n,null,new ye(r))}{if(!(n instanceof sr||n instanceof nl))throw new ve(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return e0(r),new sr(n.firestore,n instanceof nl?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bA(this,"async_queue_retry"),this.Vu=()=>{const r=hf();r&&oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Pi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vs(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Kt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=k_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function i0(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class ou extends KA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new r0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r0(e),this._firestoreClient=void 0,await e}}}function OU(n,e,t){t||(t="(default)");const r=a_(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(zc(s,e))return i;throw new ve(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function Cd(n){if(n._terminated)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VU(n),n._firestoreClient}function VU(n){var e,t,r;const i=n._freezeSettings(),s=function(c,h,d,p){return new hF(c,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,zA(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||((t=i.localCache)===null||t===void 0?void 0:t._offlineComponentProvider)&&((r=i.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new RU(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new au(Gt.fromBase64String(e))}catch(t){throw new ve(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new au(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=/^__.*__$/;class LU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class jA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class K_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new K_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WA(this.Cu)&&NU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class MU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bd(e)}Qu(e,t,r,i=!1){return new K_({Cu:e,methodName:t,qu:r,path:Nt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GA(n){const e=n._freezeSettings(),t=bd(n._databaseId);return new MU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HA(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);j_("Data must be an object, but it was:",a,r);const c=QA(r,a);let h,d;if(s.merge)h=new Yn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const _ of s.mergeFields){const v=bm(e,_,t);if(!a.contains(v))throw new ve(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);YA(p,v)||p.push(v)}h=new Yn(p),d=a.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,d=a.fieldTransforms;return new LU(new Pn(c),h,d)}class El extends $_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof El}}function FU(n,e,t,r){const i=n.Qu(1,e,t);j_("Data must be an object, but it was:",i,r);const s=[],a=Pn.empty();Uo(r,(h,d)=>{const p=W_(e,h,t);d=xn(d);const _=i.Nu(p);if(d instanceof El)s.push(p);else{const v=Dd(d,_);v!=null&&(s.push(p),a.set(p,v))}});const c=new Yn(s);return new jA(a,c,i.fieldTransforms)}function UU(n,e,t,r,i,s){const a=n.Qu(1,e,t),c=[bm(e,r,t)],h=[i];if(s.length%2!=0)throw new ve(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)c.push(bm(e,s[v])),h.push(s[v+1]);const d=[],p=Pn.empty();for(let v=c.length-1;v>=0;--v)if(!YA(d,c[v])){const I=c[v];let O=h[v];O=xn(O);const M=a.Nu(I);if(O instanceof El)d.push(I);else{const F=Dd(O,M);F!=null&&(d.push(I),p.set(I,F))}}const _=new Yn(d);return new jA(p,_,a.fieldTransforms)}function Dd(n,e){if(JA(n=xn(n)))return j_("Unsupported field value:",e,n),QA(n,e);if(n instanceof $_)return function(r,i){if(!WA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let h=Dd(c,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Lt.fromDate(r);return{timestampValue:tu(i.serializer,s)}}if(r instanceof Lt){const s=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tu(i.serializer,s)}}if(r instanceof q_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof au)return{bytesValue:jb(i.serializer,r._byteString)};if(r instanceof sr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:I_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof z_)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return __(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${B_(r)}`)}(n,e)}function QA(n,e){const t={};return gb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uo(n,(r,i)=>{const s=Dd(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function JA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof q_||n instanceof au||n instanceof sr||n instanceof $_||n instanceof z_)}function j_(n,e,t){if(!JA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=B_(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function bm(n,e,t){if((e=xn(e))instanceof xd)return e._internalPath;if(typeof e=="string")return W_(n,e);throw Wf("Field path arguments must be of type string or ",n,!1,void 0,t)}const BU=new RegExp("[~\\*/\\[\\]]");function W_(n,e,t){if(e.search(BU)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xd(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wf(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new ve(ne.INVALID_ARGUMENT,c+n+h)}function YA(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $U(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $U extends XA{data(){return super.data()}}function ZA(n,e){return typeof e=="string"?W_(n,e):e instanceof xd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zU{convertValue(e,t="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Uo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>xt(a.doubleValue));return new z_(s)}convertGeoPoint(e){return new q_(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=d_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const t=ki(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);Se(tA(r));const i=new Po(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||Kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tS extends XA{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ff extends tS{data(e={}){return super.data(e)}}class KU{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ff(this._firestore,this._userDataWriter,r.key,r,new mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const h=new ff(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const h=new ff(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:jU(c.type),doc:h,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n){n=Ss(n,sr);const e=Ss(n.firestore,ou);return xU(Cd(e),n._key).then(t=>iS(e,n,t))}class nS extends zU{constructor(e){super(),this.firestore=e}convertBytes(e){return new au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function GU(n,e,t){n=Ss(n,sr);const r=Ss(n.firestore,ou),i=eS(n.converter,e,t);return rS(r,[HA(GA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Cn.none())])}function s0(n,...e){var t,r,i;n=xn(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||i0(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(i0(e[a])){const _=e[a];e[a]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let h,d,p;if(n instanceof sr)d=Ss(n.firestore,ou),p=ml(n._key.path),h={next:_=>{e[a]&&e[a](iS(d,n,_))},error:e[a+1],complete:e[a+2]};else{const _=Ss(n,Pd);d=Ss(_.firestore,ou),p=_._query;const v=new nS(d);h={next:I=>{e[a]&&e[a](new KU(d,v,_,I))},error:e[a+1],complete:e[a+2]},qU(n._query)}return function(v,I,O,M){const F=new $A(M),Q=new OA(I,F,O);return v.asyncQueue.enqueueAndForget(async()=>DA(await Tm(v),Q)),()=>{F.Za(),v.asyncQueue.enqueueAndForget(async()=>kA(await Tm(v),Q))}}(Cd(d),p,c,h)}function rS(n,e){return function(r,i){const s=new Pi;return r.asyncQueue.enqueueAndForget(async()=>fU(await CU(r),i,s)),s.promise}(Cd(n),e)}function iS(n,e,t){const r=t.docs.get(e._key),i=new nS(n);return new tS(n,i,e._key,r,new mc(t.hasPendingWrites,t.fromCache),e.converter)}class HU{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=XU(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function QU(n){return new HU(n)}class JU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=tl.provider,this._offlineComponentProvider={build:t=>new BA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class YU{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=tl.provider,this._offlineComponentProvider={build:t=>new SU(t,e==null?void 0:e.cacheSizeBytes)}}}function XU(n){return new JU(n==null?void 0:n.forceOwnership)}function ZU(){return new YU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=GA(e)}set(e,t,r){this._verifyNotCommitted();const i=vg(e,this._firestore),s=eS(i.converter,t,r),a=HA(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Cn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=vg(e,this._firestore);let a;return a=typeof(t=xn(t))=="string"||t instanceof xd?UU(this._dataReader,"WriteBatch.update",s._key,t,r,i):FU(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vg(e,this._firestore);return this._mutations=this._mutations.concat(new wd(t._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vg(n,e){if((n=xn(n)).firestore!==e)throw new ve(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(){return new El("deleteField")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(n){return Cd(n=Ss(n,ou)),new eB(n,e=>rS(n,e))}(function(e,t=!0){(function(i){fu=i})(hu),Ha(new Ao("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new ou(new VM(r.getProvider("auth-internal")),new FM(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),bs(Xw,"4.7.3",e),bs(Xw,"4.7.3","esm2017")})();function G_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sS(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nB=sS,oS=new dl("auth","Firebase",sS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new s_("@firebase/auth");function rB(n,...e){Gf.logLevel<=nt.WARN&&Gf.warn(`Auth (${hu}): ${n}`,...e)}function df(n,...e){Gf.logLevel<=nt.ERROR&&Gf.error(`Auth (${hu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(n,...e){throw H_(n,...e)}function Xr(n,...e){return H_(n,...e)}function aS(n,e,t){const r=Object.assign(Object.assign({},nB()),{[e]:t});return new dl("auth","Firebase",r).create(e,{appName:n.name})}function Ci(n){return aS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oS.create(n,...e)}function Me(n,e,...t){if(!n)throw H_(e,...t)}function Ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw df(e),new Error(e)}function Oi(n,e){n||Ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function iB(){return o0()==="http:"||o0()==="https:"}function o0(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iB()||fL()||"connection"in navigator)?navigator.onLine:!0}function oB(){if(typeof navigator=="undefined")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oi(t>e,"Short delay should be less than long delay!"),this.isMobile=cL()||dL()}get(){return sB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n,e){Oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=new Il(3e4,6e4);function Ms(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Fs(n,e,t,r,i={}){return cS(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=pl(Object.assign({key:n.config.apiKey},a)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:h},s);return hL()||(d.referrerPolicy="no-referrer"),uS.fetch()(lS(n,n.config.apiHost,t,c),d)})}async function cS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},aB),e);try{const i=new lB(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Xh(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Xh(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw Xh(n,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw aS(n,p,d);Or(n,p)}}catch(i){if(i instanceof Li)throw i;Or(n,"network-request-failed",{message:String(i)})}}async function Tl(n,e,t,r,i={}){const s=await Fs(n,e,t,r,i);return"mfaPendingCredential"in s&&Or(n,"multi-factor-auth-required",{_serverResponse:s}),s}function lS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Q_(n.config,i):`${n.config.apiScheme}://${i}`}function cB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),uB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Xr(n,e,r);return i.customData._tokenResponse=t,i}function a0(n){return n!==void 0&&n.enterprise!==void 0}class hB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function fB(n,e){return Fs(n,"GET","/v2/recaptchaConfig",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dB(n,e){return Fs(n,"POST","/v1/accounts:delete",e)}async function hS(n,e){return Fs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){if(!!n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pB(n,e=!1){const t=xn(n),r=await t.getIdToken(e),i=J_(r);Me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kc(wg(i.auth_time)),issuedAtTime:kc(wg(i.iat)),expirationTime:kc(wg(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function wg(n){return Number(n)*1e3}function J_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const i=$T(t);return i?JSON.parse(i):(df("Failed to decode base64 JWT payload"),null)}catch(i){return df("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function u0(n){const e=J_(n);return Me(e,"internal-error"),Me(typeof e.exp!="undefined","internal-error"),Me(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Li&&gB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function gB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await rl(n,hS(t,{idToken:r}));Me(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fS(s.providerUserInfo):[],c=yB(n.providerData,a),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Sm(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function _B(n){const e=xn(n);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fS(n){return n.map(e=>{var{providerId:t}=e,r=G_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(n,e){const t=await cS(n,{},async()=>{const r=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=lS(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",uS.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wB(n,e){return Fs(n,"POST","/v2/accounts:revokeToken",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken!="undefined","internal-error"),Me(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):u0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=u0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await vB(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new za;return r&&(Me(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Me(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return Ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(n,e){Me(typeof n=="string"||typeof n=="undefined","internal-error",{appName:e})}class Si{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=G_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await rl(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pB(this,e)}reload(){return _B(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await rl(this,dB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,h,d,p;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,O=(a=t.photoURL)!==null&&a!==void 0?a:void 0,M=(c=t.tenantId)!==null&&c!==void 0?c:void 0,F=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,Q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,z=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:q,emailVerified:W,isAnonymous:Y,providerData:re,stsTokenManager:P}=t;Me(q&&P,e,"internal-error");const S=za.fromJSON(this.name,P);Me(typeof q=="string",e,"internal-error"),is(_,e.name),is(v,e.name),Me(typeof W=="boolean",e,"internal-error"),Me(typeof Y=="boolean",e,"internal-error"),is(I,e.name),is(O,e.name),is(M,e.name),is(F,e.name),is(Q,e.name),is(z,e.name);const A=new Si({uid:q,auth:e,email:v,emailVerified:W,displayName:_,isAnonymous:Y,photoURL:O,phoneNumber:I,tenantId:M,stsTokenManager:S,createdAt:Q,lastLoginAt:z});return re&&Array.isArray(re)&&(A.providerData=re.map(x=>Object.assign({},x))),F&&(A._redirectEventId=F),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new za;i.updateFromServerResponse(t);const s=new Si({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hf(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?fS(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new za;c.updateFromIdToken(r);const h=new Si({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Sm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;function Ri(n){Oi(n instanceof Function,"Expected a class definition");let e=c0.get(n);return e?(Oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,c0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dS.type="NONE";const l0=dS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ka{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=pf(this.userKey,i.apiKey,s),this.fullPersistenceKey=pf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Si._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ka(Ri(l0),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Ri(l0);const a=pf(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const p=await d._get(a);if(p){const _=Si._fromJSON(e,p);d!==s&&(c=_),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ka(s,e,r):(s=h[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Ka(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vS(e))return"Blackberry";if(wS(e))return"Webos";if(gS(e))return"Safari";if((e.includes("chrome/")||mS(e))&&!e.includes("edge/"))return"Chrome";if(yS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pS(n=sn()){return/firefox\//i.test(n)}function gS(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mS(n=sn()){return/crios\//i.test(n)}function _S(n=sn()){return/iemobile/i.test(n)}function yS(n=sn()){return/android/i.test(n)}function vS(n=sn()){return/blackberry/i.test(n)}function wS(n=sn()){return/webos/i.test(n)}function Y_(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function EB(n=sn()){var e;return Y_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IB(){return pL()&&document.documentMode===10}function ES(n=sn()){return Y_(n)||yS(n)||wS(n)||vS(n)||/windows phone/i.test(n)||_S(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n,e=[]){let t;switch(n){case"Browser":t=h0(sn());break;case"Worker":t=`${h0(sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const h=e(s);a(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bB(n,e={}){return Fs(n,"GET","/v2/passwordPolicy",Ms(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=6;class SB{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:AB,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f0(this),this.idTokenSubscription=new f0(this),this.beforeStateQueue=new TB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ka.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hS(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h==null?void 0:h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(Ci(this));const t=e?xn(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bB(this),t=new SB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await wB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ri(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&rB(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function $o(n){return xn(n)}class f0{constructor(e){this.auth=e,this.observer=null,this.addObserver=wL(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PB(n){kd=n}function TS(n){return kd.loadJS(n)}function CB(){return kd.recaptchaEnterpriseScript}function xB(){return kd.gapiScript}function DB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const kB="recaptcha-enterprise",OB="NO_RECAPTCHA";class VB{constructor(e){this.type=kB,this.auth=$o(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{fB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new hB(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(h=>{c(h)})})}function i(s,a,c){const h=window.grecaptcha;a0(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(OB)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&a0(window.grecaptcha))i(c,s,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=CB();h.length!==0&&(h+=c),TS(h).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function d0(n,e,t,r=!1){const i=new VB(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Rm(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await d0(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await d0(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(n,e){const t=a_(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(zc(s,e!=null?e:{}))return i;Or(i,"already-initialized")}return t.initialize({options:e})}function LB(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ri);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MB(n,e,t){const r=$o(n);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=bS(e),{host:a,port:c}=FB(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||UB()}function bS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FB(n){const e=bS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:p0(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:p0(a)}}}function p0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function UB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ai("not implemented")}_getIdTokenResponse(e){return Ai("not implemented")}_linkToIdToken(e,t){return Ai("not implemented")}_getReauthenticationResolver(e){return Ai("not implemented")}}async function BB(n,e){return Fs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(n,e){return Tl(n,"POST","/v1/accounts:signInWithPassword",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(n,e){return Tl(n,"POST","/v1/accounts:signInWithEmailLink",Ms(n,e))}async function zB(n,e){return Tl(n,"POST","/v1/accounts:signInWithEmailLink",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends X_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new il(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new il(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,t,"signInWithPassword",$B);case"emailLink":return qB(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,r,"signUpPassword",BB);case"emailLink":return zB(e,{idToken:t,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n,e){return Tl(n,"POST","/v1/accounts:signInWithIdp",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="http://localhost";class Vo extends X_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=G_(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Vo(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ja(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ja(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ja(e,t)}buildRequest(){const e={requestUri:KB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WB(n){const e=lc(hc(n)).link,t=e?lc(hc(e)).deep_link_id:null,r=lc(hc(n)).deep_link_id;return(r?lc(hc(r)).link:null)||r||t||e||n}class Z_{constructor(e){var t,r,i,s,a,c;const h=lc(hc(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,_=jB((i=h.mode)!==null&&i!==void 0?i:null);Me(d&&p&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=WB(e);try{return new Z_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.providerId=mu.PROVIDER_ID}static credential(e,t){return il._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Z_.parseLink(t);return Me(r,"argument-error"),il._fromEmailAndCode(e,r.code,r.tenantId)}}mu.PROVIDER_ID="password";mu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends AS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends bl{constructor(){super("facebook.com")}static credential(e){return Vo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends bl{constructor(){super("github.com")}static credential(e){return Vo._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends bl{constructor(){super("twitter.com")}static credential(e,t){return Vo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ys.credential(t,r)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(n,e){return Tl(n,"POST","/v1/accounts:signUp",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Si._fromIdTokenResponse(e,r,i),a=g0(r);return new No({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=g0(r);return new No({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function g0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends Li{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Qf(e,t,r,i)}}function SS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qf._fromErrorAndOperation(n,s,e,r):s})}async function HB(n,e,t=!1){const r=await rl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return No._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(n,e,t=!1){const{auth:r}=n;if(Hr(r.app))return Promise.reject(Ci(r));const i="reauthenticate";try{const s=await rl(n,SS(r,i,e,n),t);Me(s.idToken,r,"internal-error");const a=J_(s.idToken);Me(a,r,"internal-error");const{sub:c}=a;return Me(n.uid===c,r,"user-mismatch"),No._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(n,e,t=!1){if(Hr(n.app))return Promise.reject(Ci(n));const r="signIn",i=await SS(n,r,e),s=await No._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function JB(n,e){return RS($o(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(n){const e=$o(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YB(n,e,t){if(Hr(n.app))return Promise.reject(Ci(n));const r=$o(n),a=await Rm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GB).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&PS(n),h}),c=await No._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function XB(n,e,t){return Hr(n.app)?Promise.reject(Ci(n)):JB(xn(n),mu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&PS(n),r})}function ZB(n,e,t,r){return xn(n).onIdTokenChanged(e,t,r)}function e4(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}const Jf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=1e3,n4=10;class xS extends CS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ES(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);IB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,n4):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},t4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xS.type="LOCAL";const r4=xS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends CS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DS.type="SESSION";const kS=DS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(n){return Promise.all(n.map(async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Od(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(t.origin,s)),h=await i4(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,h)=>{const d=ey("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){const v=_;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(v.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function o4(n){Zr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(){return typeof Zr().WorkerGlobalScope!="undefined"&&typeof Zr().importScripts=="function"}async function a4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function c4(){return OS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="firebaseLocalStorageDb",l4=1,Yf="firebaseLocalStorage",NS="fbase_key";class Al{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vd(n,e){return n.transaction([Yf],e?"readwrite":"readonly").objectStore(Yf)}function h4(){const n=indexedDB.deleteDatabase(VS);return new Al(n).toPromise()}function Pm(){const n=indexedDB.open(VS,l4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Yf,{keyPath:NS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Yf)?e(r):(r.close(),await h4(),e(await Pm()))})})}async function m0(n,e,t){const r=Vd(n,!0).put({[NS]:e,value:t});return new Al(r).toPromise()}async function f4(n,e){const t=Vd(n,!1).get(e),r=await new Al(t).toPromise();return r===void 0?null:r.value}function _0(n,e){const t=Vd(n,!0).delete(e);return new Al(t).toPromise()}const d4=800,p4=3;class LS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>p4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(c4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await a4(),!this.activeServiceWorker)return;this.sender=new s4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((t=r[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await m0(e,Jf,"1"),await _0(e,Jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>m0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>f4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vd(i,!1).getAll();return new Al(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LS.type="LOCAL";const g4=LS;new Il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n,e){return e?Ri(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends X_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ja(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ja(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _4(n){return RS(n.auth,new ty(n),n.bypassAuthState)}function y4(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),QB(t,new ty(n),n.bypassAuthState)}async function v4(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),HB(t,new ty(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _4;case"linkViaPopup":case"linkViaRedirect":return v4;case"reauthViaPopup":case"reauthViaRedirect":return y4;default:Or(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new Il(2e3,1e4);class Ma extends MS{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");const e=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w4.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="pendingRedirect",gf=new Map;class I4 extends MS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const r=await T4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T4(n,e){const t=S4(e),r=A4(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function b4(n,e){gf.set(n._key(),e)}function A4(n){return Ri(n._redirectPersistence)}function S4(n){return pf(E4,n.config.apiKey,n.name)}async function R4(n,e,t=!1){if(Hr(n.app))return Promise.reject(Ci(n));const r=$o(n),i=m4(r,e),a=await new I4(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=10*60*1e3;class C4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!FS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P4&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(e))}saveEventToCache(e){this.cachedEventUids.add(y0(e)),this.lastProcessedEventTime=Date.now()}}function y0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function FS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(n,e={}){return Fs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O4=/^https?/;async function V4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await D4(n);for(const t of e)try{if(N4(t))return}catch{}Or(n,"unauthorized-domain")}function N4(n){const e=Am(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!O4.test(t))return!1;if(k4.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new Il(3e4,6e4);function v0(){const n=Zr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M4(n){return new Promise((e,t)=>{var r,i,s;function a(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),t(Xr(n,"network-request-failed"))},timeout:L4.get()})}if(!((i=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zr().gapi)===null||s===void 0)&&s.load)a();else{const c=DB("iframefcb");return Zr()[c]=()=>{gapi.load?a():t(Xr(n,"network-request-failed"))},TS(`${xB()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw mf=null,e})}let mf=null;function F4(n){return mf=mf||M4(n),mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=new Il(5e3,15e3),B4="__/auth/iframe",$4="emulator/auth/iframe",q4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K4(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Q_(e,$4):`https://${n.config.authDomain}/${B4}`,r={apiKey:e.apiKey,appName:n.name,v:hu},i=z4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${pl(r).slice(1)}`}async function j4(n){const e=await F4(n),t=Zr().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:K4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Xr(n,"network-request-failed"),c=Zr().setTimeout(()=>{s(a)},U4.get());function h(){Zr().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G4=500,H4=600,Q4="_blank",J4="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y4(n,e,t,r=G4,i=H4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},W4),{width:r.toString(),height:i.toString(),top:s,left:a}),d=sn().toLowerCase();t&&(c=mS(d)?Q4:t),pS(d)&&(e=e||J4,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[I,O])=>`${v}${I}=${O},`,"");if(EB(d)&&c!=="_self")return X4(e||"",c),new w0(null);const _=window.open(e||"",c,p);Me(_,n,"popup-blocked");try{_.focus()}catch{}return new w0(_)}function X4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="__/auth/handler",e$="emulator/auth/handler",t$=encodeURIComponent("fac");async function E0(n,e,t,r,i,s){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hu,eventId:i};if(e instanceof AS){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",vL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,_]of Object.entries(s||{}))a[p]=_}if(e instanceof bl){const p=e.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const h=await n._getAppCheckToken(),d=h?`#${t$}=${encodeURIComponent(h)}`:"";return`${n$(n)}?${pl(c).slice(1)}${d}`}function n$({config:n}){return n.emulator?Q_(n,e$):`https://${n.authDomain}/${Z4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="webStorageSupport";class r${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kS,this._completeRedirectFn=R4,this._overrideRedirectResult=b4}async _openPopup(e,t,r,i){var s;Oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await E0(e,t,r,Am(),i);return Y4(e,a,ey())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await E0(e,t,r,Am(),i);return o4(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Oi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await j4(e),r=new C4(e);return t.register("authEvent",i=>(Me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Eg];a!==void 0&&t(!!a),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ES()||gS()||Y_()}}const i$=r$;var I0="@firebase/auth",T0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a$(n){Ha(new Ao("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Me(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IS(n)},d=new RB(r,i,s,h);return LB(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ha(new Ao("auth-internal",e=>{const t=$o(e.getProvider("auth").getImmediate());return(r=>new s$(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(I0,T0,o$(n)),bs(I0,T0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=5*60,c$=zT("authIdTokenMaxAge")||u$;let b0=null;const l$=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>c$)return;const i=t==null?void 0:t.token;b0!==i&&(b0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function h$(n=wM()){const e=a_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=NB(n,{popupRedirectResolver:i$,persistence:[g4,r4,kS]}),r=zT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=l$(s.toString());e4(t,a,()=>a(t.currentUser)),ZB(t,c=>a(c))}}const i=aL("auth");return i&&MB(t,`http://${i}`),t}function f$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}PB({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Xr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",f$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a$("Browser");var d$="firebase",p$="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bs(d$,p$,"app");const mn=[];for(let n=0;n<256;++n)mn.push((n+256).toString(16).slice(1));function g$(n,e=0){return(mn[n[e+0]]+mn[n[e+1]]+mn[n[e+2]]+mn[n[e+3]]+"-"+mn[n[e+4]]+mn[n[e+5]]+"-"+mn[n[e+6]]+mn[n[e+7]]+"-"+mn[n[e+8]]+mn[n[e+9]]+"-"+mn[n[e+10]]+mn[n[e+11]]+mn[n[e+12]]+mn[n[e+13]]+mn[n[e+14]]+mn[n[e+15]]).toLowerCase()}let Ig;const m$=new Uint8Array(16);function _$(){if(!Ig){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ig=crypto.getRandomValues.bind(crypto)}return Ig(m$)}const y$=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var A0={randomUUID:y$};function ny(n,e,t){if(A0.randomUUID&&!e&&!n)return A0.randomUUID();n=n||{};const r=n.random||(n.rng||_$)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return g$(r)}const rc={make(n="",e="",t="",r=null){n||(n=ny());let i=!0;return r||(r=Date.now()),{id:n,name:e,active:i,email:t,timestamp:r}},user2person(n){return this.make(n.id,n.name,n.email)},makeUser(n="",e="",t=""){return{id:n,name:e,email:t}},username(n){return(n==null?void 0:n.name)||(n==null?void 0:n.email)},compare(n,e){const t=this.username(n).toLowerCase(),r=this.username(e).toLowerCase();return t.localeCompare(r)}},v$={make(n,e,t){const r=ny(),i=Date.now();return{name:n,users:t,id:r,people:e,transactions:{},timestamp:i}}},w$={make(n=""){return{name:n,friends:{},sheets:{}}}},S0={make(n,e,t,r){const i=n.length;let s="";const a=ny();let c=0,h=n.indexOf(t);h===-1&&(h=i>0?0:-1);const d=n.map(_=>({isDebtor:r[_].active,owedAmount:0}));let p=Date.now();return{name:s,id:a,amount:c,payer:h,currency:e,debts:d,timestamp:p}},position(n,e){return n.payer===e?n.amount-n.debts[e].owedAmount:-n.debts[e].owedAmount},updatePeople(n,e){for(let t=n.debts.length;t<e;t++)n.debts.push({isDebtor:!1,owedAmount:0})},clearOwedAmounts(n,e){n.debts.forEach((t,r)=>{r!==e&&(t.owedAmount=0)})},fillLastOwedAmount(n){const e=n.debts.map((a,c)=>({debt:a,index:c})).filter(({debt:a})=>a.isDebtor&&a.owedAmount===0),t=n.debts.reduce((a,c)=>a+c.owedAmount,0),r=n.amount-t;let i=!1;if(r<0&&(n.amount-=r,i=!0),e.length!==1||r<=0)return i;const{index:s}=e[0];return n.debts[s].owedAmount=r,i},check(n){let e=0;if(n.debts.forEach((t,r)=>{if(t.owedAmount>0&&!t.isDebtor)throw new Error(`The person ${r} is not a debtor but owes money!`);e+=t.owedAmount}),e!==n.amount)throw new Error(`The owed amounts: ${e/100} do not sum up to the transaction amount: ${n.amount/100}! Probably you need to fix either the shares or the total amount.`)},split(n){const e=n.debts.filter(i=>i.isDebtor).length;if(e==0){Object.values(n.debts).forEach(i=>{i.owedAmount=0});return}const t=Math.floor(n.amount/e);let r=n.amount%e;n.debts.forEach((i,s)=>{i.isDebtor?(i.owedAmount=t,r>0&&s!==n.payer&&(i.owedAmount+=1,--r)):i.owedAmount=0})}},Tg={make(n=0){const r={mat:[],ntransactions:0};for(let i=0;i<n;++i)this.addPeople(r,n);return r},addPeople(n,e){for(let t=n.mat.length;t<e;++t)n.mat.push(Array(n.mat.length).fill(0))},getSummary(n,e){if(e==null||e<0||e>=n.mat.length)return[];const t=[];for(let r=0;r<n.mat[e].length;r++)n.mat[e][r]!==0&&t.push({person:r,amount:n.mat[e][r]});for(let r=e+1;r<n.mat.length;r++)n.mat[r][e]!==0&&t.push({person:r,amount:-n.mat[r][e]});return t},applyTransaction(n,e,t){const r=e.payer;for(let i=0;i<e.debts.length;++i)this._apply(n,i,r,t*e.debts[i].owedAmount);n.ntransactions+=t},_apply(n,e,t,r){e!==t&&(e<t&&([e,t]=[t,e],r=-r),n.mat[e][t]+=r)}},US={make(n={},e=0){const s={nPeople:e,nTransactions:0,nCurrencies:0,mats:{}};return US.applyTransactions(s,n,e),s},applyTransactions(n,e,t){n.nPeople=t,t&&Object.values(e).forEach(r=>{r.currency in n.mats||(n.mats[r.currency]=Tg.make(t),++n.nCurrencies),Tg.applyTransaction(n.mats[r.currency],r,1),++n.nTransactions})},getSummary(n,e){const t=[],r={};return e<0||!(n!=null&&n.nPeople)||e>=n.nPeople?{ans:t,totals:r}:(Object.entries(n.mats).forEach(([i,s])=>{const a=Tg.getSummary(s,e);let c=0;a.length>0&&a.forEach(h=>{t.push({currency:i,person:h.person,amount:h.amount}),c+=h.amount}),c!=0&&(r[i]=c)}),{ans:t,totals:r})}},bg={make(){return{apiKey:null,authDomain:null,projectId:null,storageBucket:null,messagingSenderId:null,appId:null}},isCompatible(n){return n?["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].every(t=>n[t]&&n[t].trim()!==""):!1}};var ic=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Cm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,v=2,I=4,O=1,M=2,F=1,Q=2,z=4,q=8,W=16,Y=32,re=64,P=128,S=256,A=512,x=30,N="...",V=800,C=16,fe=1,We=2,et=3,Ce=1/0,$e=9007199254740991,Dn=17976931348623157e292,yn=0/0,Dt=4294967295,St=Dt-1,Rt=Dt>>>1,Nr=[["ary",P],["bind",F],["bindKey",Q],["curry",q],["curryRight",W],["flip",A],["partial",Y],["partialRight",re],["rearg",S]],dn="[object Arguments]",Zt="[object Array]",Z="[object AsyncFunction]",_e="[object Boolean]",de="[object Date]",Ee="[object DOMException]",He="[object Error]",at="[object Function]",R="[object GeneratorFunction]",D="[object Map]",j="[object Number]",ie="[object Null]",J="[object Object]",ue="[object Promise]",pe="[object Proxy]",le="[object RegExp]",ce="[object Set]",ae="[object String]",Pe="[object Symbol]",ge="[object Undefined]",Ie="[object WeakMap]",De="[object WeakSet]",Re="[object ArrayBuffer]",Ne="[object DataView]",Xe="[object Float32Array]",Ht="[object Float64Array]",kt="[object Int8Array]",pn="[object Int16Array]",Ot="[object Int32Array]",ar="[object Uint8Array]",ti="[object Uint8ClampedArray]",$t="[object Uint16Array]",vn="[object Uint32Array]",qo=/\b__p \+= '';/g,_u=/\b(__p \+=) '' \+/g,Sl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yu=/&(?:amp|lt|gt|quot|#39);/g,Fi=/[&<>"']/g,vu=RegExp(yu.source),wu=RegExp(Fi.source),ni=/<%-([\s\S]+?)%>/g,Rl=/<%([\s\S]+?)%>/g,Us=/<%=([\s\S]+?)%>/g,Pl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bs=/^\w*$/,Cl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,en=/[\\^$.*+?()[\]{}|]/g,xl=RegExp(en.source),ri=/^\s+/,$s=/\s/,Md=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fd=/\{\n\/\* \[wrapped with (.+)\] \*/,Ui=/,? & /,Ud=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bd=/[()=,{}\[\]\/\s]/,zo=/\\(\\)?/g,Dl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ko=/\w*$/,jo=/^[-+]0x[0-9a-f]+$/i,Lr=/^0b[01]+$/i,kl=/^\[object .+?Constructor\]$/,Ol=/^0o[0-7]+$/i,Eu=/^(?:0|[1-9]\d*)$/,Iu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qs=/($^)/,Vl=/['\n\r\u2028\u2029\\]/g,Wo="\\ud800-\\udfff",Go="\\u0300-\\u036f",Nl="\\ufe20-\\ufe2f",Tu="\\u20d0-\\u20ff",Bi=Go+Nl+Tu,Mr="\\u2700-\\u27bf",Ho="a-z\\xdf-\\xf6\\xf8-\\xff",$d="\\xac\\xb1\\xd7\\xf7",Ll="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ml="\\u2000-\\u206f",Fl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qo="A-Z\\xc0-\\xd6\\xd8-\\xde",Jo="\\ufe0e\\ufe0f",bu=$d+Ll+Ml+Fl,Yo="['\u2019]",qd="["+Wo+"]",Ul="["+bu+"]",zs="["+Bi+"]",Au="\\d+",zd="["+Mr+"]",Fr="["+Ho+"]",ur="[^"+Wo+bu+Au+Mr+Ho+Qo+"]",$i="\\ud83c[\\udffb-\\udfff]",Xo="(?:"+zs+"|"+$i+")",Su="[^"+Wo+"]",dt="(?:\\ud83c[\\udde6-\\uddff]){2}",qi="[\\ud800-\\udbff][\\udc00-\\udfff]",cr="["+Qo+"]",zi="\\u200d",Bl="(?:"+Fr+"|"+ur+")",$l="(?:"+cr+"|"+ur+")",ql="(?:"+Yo+"(?:d|ll|m|re|s|t|ve))?",zl="(?:"+Yo+"(?:D|LL|M|RE|S|T|VE))?",Kl=Xo+"?",jl="["+Jo+"]?",Ks="(?:"+zi+"(?:"+[Su,dt,qi].join("|")+")"+jl+Kl+")*",Ur="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ru=jl+Kl+Ks,Gl="(?:"+[zd,dt,qi].join("|")+")"+Ru,Ki="(?:"+[Su+zs+"?",zs,dt,qi,qd].join("|")+")",Kd=RegExp(Yo,"g"),jd=RegExp(zs,"g"),Pu=RegExp($i+"(?="+$i+")|"+Ki+Ru,"g"),Br=RegExp([cr+"?"+Fr+"+"+ql+"(?="+[Ul,cr,"$"].join("|")+")",$l+"+"+zl+"(?="+[Ul,cr+Bl,"$"].join("|")+")",cr+"?"+Bl+"+"+ql,cr+"+"+zl,Wl,Ur,Au,Gl].join("|"),"g"),Wd=RegExp("["+zi+Wo+Bi+Jo+"]"),Gd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ea=-1,yt={};yt[Xe]=yt[Ht]=yt[kt]=yt[pn]=yt[Ot]=yt[ar]=yt[ti]=yt[$t]=yt[vn]=!0,yt[dn]=yt[Zt]=yt[Re]=yt[_e]=yt[Ne]=yt[de]=yt[He]=yt[at]=yt[D]=yt[j]=yt[J]=yt[le]=yt[ce]=yt[ae]=yt[Ie]=!1;var ut={};ut[dn]=ut[Zt]=ut[Re]=ut[Ne]=ut[_e]=ut[de]=ut[Xe]=ut[Ht]=ut[kt]=ut[pn]=ut[Ot]=ut[D]=ut[j]=ut[J]=ut[le]=ut[ce]=ut[ae]=ut[Pe]=ut[ar]=ut[ti]=ut[$t]=ut[vn]=!0,ut[He]=ut[at]=ut[Ie]=!1;var js={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Hl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hd=parseFloat,Qd=parseInt,xu=typeof ic=="object"&&ic&&ic.Object===Object&&ic,Ql=typeof self=="object"&&self&&self.Object===Object&&self,Qt=xu||Ql||Function("return this")(),ji=e&&!e.nodeType&&e,$r=ji&&!0&&n&&!n.nodeType&&n,lr=$r&&$r.exports===ji,ta=lr&&xu.process,qn=function(){try{var U=$r&&$r.require&&$r.require("util").types;return U||ta&&ta.binding&&ta.binding("util")}catch{}}(),Wi=qn&&qn.isArrayBuffer,Du=qn&&qn.isDate,na=qn&&qn.isMap,Ws=qn&&qn.isRegExp,ku=qn&&qn.isSet,Gs=qn&&qn.isTypedArray;function kn(U,X,H){switch(H.length){case 0:return U.call(X);case 1:return U.call(X,H[0]);case 2:return U.call(X,H[0],H[1]);case 3:return U.call(X,H[0],H[1],H[2])}return U.apply(X,H)}function Jl(U,X,H,we){for(var qe=-1,lt=U==null?0:U.length;++qe<lt;){var tn=U[qe];X(we,tn,H(tn),U)}return we}function an(U,X){for(var H=-1,we=U==null?0:U.length;++H<we&&X(U[H],H,U)!==!1;);return U}function Yl(U,X){for(var H=U==null?0:U.length;H--&&X(U[H],H,U)!==!1;);return U}function Ou(U,X){for(var H=-1,we=U==null?0:U.length;++H<we;)if(!X(U[H],H,U))return!1;return!0}function hr(U,X){for(var H=-1,we=U==null?0:U.length,qe=0,lt=[];++H<we;){var tn=U[H];X(tn,H,U)&&(lt[qe++]=tn)}return lt}function Gi(U,X){var H=U==null?0:U.length;return!!H&&si(U,X,0)>-1}function ra(U,X,H){for(var we=-1,qe=U==null?0:U.length;++we<qe;)if(H(X,U[we]))return!0;return!1}function pt(U,X){for(var H=-1,we=U==null?0:U.length,qe=Array(we);++H<we;)qe[H]=X(U[H],H,U);return qe}function Tr(U,X){for(var H=-1,we=X.length,qe=U.length;++H<we;)U[qe+H]=X[H];return U}function ia(U,X,H,we){var qe=-1,lt=U==null?0:U.length;for(we&&lt&&(H=U[++qe]);++qe<lt;)H=X(H,U[qe],qe,U);return H}function ii(U,X,H,we){var qe=U==null?0:U.length;for(we&&qe&&(H=U[--qe]);qe--;)H=X(H,U[qe],qe,U);return H}function sa(U,X){for(var H=-1,we=U==null?0:U.length;++H<we;)if(X(U[H],H,U))return!0;return!1}var Xl=g("length");function Zl(U){return U.split("")}function eh(U){return U.match(Ud)||[]}function Hs(U,X,H){var we;return H(U,function(qe,lt,tn){if(X(qe,lt,tn))return we=lt,!1}),we}function un(U,X,H,we){for(var qe=U.length,lt=H+(we?1:-1);we?lt--:++lt<qe;)if(X(U[lt],lt,U))return lt;return-1}function si(U,X,H){return X===X?ER(U,X,H):un(U,oi,H)}function th(U,X,H,we){for(var qe=H-1,lt=U.length;++qe<lt;)if(we(U[qe],X))return qe;return-1}function oi(U){return U!==U}function l(U,X){var H=U==null?0:U.length;return H?G(U,X)/H:yn}function g(U){return function(X){return X==null?t:X[U]}}function y(U){return function(X){return U==null?t:U[X]}}function T(U,X,H,we,qe){return qe(U,function(lt,tn,Et){H=we?(we=!1,lt):X(H,lt,tn,Et)}),H}function $(U,X){var H=U.length;for(U.sort(X);H--;)U[H]=U[H].value;return U}function G(U,X){for(var H,we=-1,qe=U.length;++we<qe;){var lt=X(U[we]);lt!==t&&(H=H===t?lt:H+lt)}return H}function he(U,X){for(var H=-1,we=Array(U);++H<U;)we[H]=X(H);return we}function gt(U,X){return pt(X,function(H){return[H,U[H]]})}function Jt(U){return U&&U.slice(0,cy(U)+1).replace(ri,"")}function Fe(U){return function(X){return U(X)}}function Yt(U,X){return pt(X,function(H){return U[H]})}function Ft(U,X){return U.has(X)}function ai(U,X){for(var H=-1,we=U.length;++H<we&&si(X,U[H],0)>-1;);return H}function zn(U,X){for(var H=U.length;H--&&si(X,U[H],0)>-1;);return H}function oa(U,X){for(var H=U.length,we=0;H--;)U[H]===X&&++we;return we}var Vu=y(js),gR=y(Hl);function mR(U){return"\\"+Ct[U]}function _R(U,X){return U==null?t:U[X]}function aa(U){return Wd.test(U)}function yR(U){return Gd.test(U)}function vR(U){for(var X,H=[];!(X=U.next()).done;)H.push(X.value);return H}function Jd(U){var X=-1,H=Array(U.size);return U.forEach(function(we,qe){H[++X]=[qe,we]}),H}function uy(U,X){return function(H){return U(X(H))}}function Hi(U,X){for(var H=-1,we=U.length,qe=0,lt=[];++H<we;){var tn=U[H];(tn===X||tn===p)&&(U[H]=p,lt[qe++]=H)}return lt}function nh(U){var X=-1,H=Array(U.size);return U.forEach(function(we){H[++X]=we}),H}function wR(U){var X=-1,H=Array(U.size);return U.forEach(function(we){H[++X]=[we,we]}),H}function ER(U,X,H){for(var we=H-1,qe=U.length;++we<qe;)if(U[we]===X)return we;return-1}function IR(U,X,H){for(var we=H+1;we--;)if(U[we]===X)return we;return we}function ua(U){return aa(U)?bR(U):Xl(U)}function br(U){return aa(U)?AR(U):Zl(U)}function cy(U){for(var X=U.length;X--&&$s.test(U.charAt(X)););return X}var TR=y(Cu);function bR(U){for(var X=Pu.lastIndex=0;Pu.test(U);)++X;return X}function AR(U){return U.match(Pu)||[]}function SR(U){return U.match(Br)||[]}var RR=function U(X){X=X==null?Qt:ca.defaults(Qt.Object(),X,ca.pick(Qt,Zo));var H=X.Array,we=X.Date,qe=X.Error,lt=X.Function,tn=X.Math,Et=X.Object,Yd=X.RegExp,PR=X.String,fr=X.TypeError,rh=H.prototype,CR=lt.prototype,la=Et.prototype,ih=X["__core-js_shared__"],sh=CR.toString,mt=la.hasOwnProperty,xR=0,ly=function(){var o=/[^.]+$/.exec(ih&&ih.keys&&ih.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),oh=la.toString,DR=sh.call(Et),kR=Qt._,OR=Yd("^"+sh.call(mt).replace(en,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ah=lr?X.Buffer:t,Qi=X.Symbol,uh=X.Uint8Array,hy=ah?ah.allocUnsafe:t,ch=uy(Et.getPrototypeOf,Et),fy=Et.create,dy=la.propertyIsEnumerable,lh=rh.splice,py=Qi?Qi.isConcatSpreadable:t,Nu=Qi?Qi.iterator:t,Qs=Qi?Qi.toStringTag:t,hh=function(){try{var o=eo(Et,"defineProperty");return o({},"",{}),o}catch{}}(),VR=X.clearTimeout!==Qt.clearTimeout&&X.clearTimeout,NR=we&&we.now!==Qt.Date.now&&we.now,LR=X.setTimeout!==Qt.setTimeout&&X.setTimeout,fh=tn.ceil,dh=tn.floor,Xd=Et.getOwnPropertySymbols,MR=ah?ah.isBuffer:t,gy=X.isFinite,FR=rh.join,UR=uy(Et.keys,Et),nn=tn.max,wn=tn.min,BR=we.now,$R=X.parseInt,my=tn.random,qR=rh.reverse,Zd=eo(X,"DataView"),Lu=eo(X,"Map"),ep=eo(X,"Promise"),ha=eo(X,"Set"),Mu=eo(X,"WeakMap"),Fu=eo(Et,"create"),ph=Mu&&new Mu,fa={},zR=to(Zd),KR=to(Lu),jR=to(ep),WR=to(ha),GR=to(Mu),gh=Qi?Qi.prototype:t,Uu=gh?gh.valueOf:t,_y=gh?gh.toString:t;function E(o){if(Ut(o)&&!je(o)&&!(o instanceof tt)){if(o instanceof dr)return o;if(mt.call(o,"__wrapped__"))return yv(o)}return new dr(o)}var da=function(){function o(){}return function(u){if(!Vt(u))return{};if(fy)return fy(u);o.prototype=u;var f=new o;return o.prototype=t,f}}();function mh(){}function dr(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=t}E.templateSettings={escape:ni,evaluate:Rl,interpolate:Us,variable:"",imports:{_:E}},E.prototype=mh.prototype,E.prototype.constructor=E,dr.prototype=da(mh.prototype),dr.prototype.constructor=dr;function tt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function HR(){var o=new tt(this.__wrapped__);return o.__actions__=Kn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Kn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Kn(this.__views__),o}function QR(){if(this.__filtered__){var o=new tt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function JR(){var o=this.__wrapped__.value(),u=this.__dir__,f=je(o),m=u<0,w=f?o.length:0,b=uC(0,w,this.__views__),k=b.start,L=b.end,B=L-k,ee=m?L:k-1,te=this.__iteratees__,se=te.length,me=0,Ae=wn(B,this.__takeCount__);if(!f||!m&&w==B&&Ae==B)return $y(o,this.__actions__);var Oe=[];e:for(;B--&&me<Ae;){ee+=u;for(var Qe=-1,Ve=o[ee];++Qe<se;){var Ze=te[Qe],rt=Ze.iteratee,er=Ze.type,Nn=rt(Ve);if(er==We)Ve=Nn;else if(!Nn){if(er==fe)continue e;break e}}Oe[me++]=Ve}return Oe}tt.prototype=da(mh.prototype),tt.prototype.constructor=tt;function Js(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function YR(){this.__data__=Fu?Fu(null):{},this.size=0}function XR(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function ZR(o){var u=this.__data__;if(Fu){var f=u[o];return f===h?t:f}return mt.call(u,o)?u[o]:t}function eP(o){var u=this.__data__;return Fu?u[o]!==t:mt.call(u,o)}function tP(o,u){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=Fu&&u===t?h:u,this}Js.prototype.clear=YR,Js.prototype.delete=XR,Js.prototype.get=ZR,Js.prototype.has=eP,Js.prototype.set=tP;function ui(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function nP(){this.__data__=[],this.size=0}function rP(o){var u=this.__data__,f=_h(u,o);if(f<0)return!1;var m=u.length-1;return f==m?u.pop():lh.call(u,f,1),--this.size,!0}function iP(o){var u=this.__data__,f=_h(u,o);return f<0?t:u[f][1]}function sP(o){return _h(this.__data__,o)>-1}function oP(o,u){var f=this.__data__,m=_h(f,o);return m<0?(++this.size,f.push([o,u])):f[m][1]=u,this}ui.prototype.clear=nP,ui.prototype.delete=rP,ui.prototype.get=iP,ui.prototype.has=sP,ui.prototype.set=oP;function ci(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function aP(){this.size=0,this.__data__={hash:new Js,map:new(Lu||ui),string:new Js}}function uP(o){var u=Ch(this,o).delete(o);return this.size-=u?1:0,u}function cP(o){return Ch(this,o).get(o)}function lP(o){return Ch(this,o).has(o)}function hP(o,u){var f=Ch(this,o),m=f.size;return f.set(o,u),this.size+=f.size==m?0:1,this}ci.prototype.clear=aP,ci.prototype.delete=uP,ci.prototype.get=cP,ci.prototype.has=lP,ci.prototype.set=hP;function Ys(o){var u=-1,f=o==null?0:o.length;for(this.__data__=new ci;++u<f;)this.add(o[u])}function fP(o){return this.__data__.set(o,h),this}function dP(o){return this.__data__.has(o)}Ys.prototype.add=Ys.prototype.push=fP,Ys.prototype.has=dP;function Ar(o){var u=this.__data__=new ui(o);this.size=u.size}function pP(){this.__data__=new ui,this.size=0}function gP(o){var u=this.__data__,f=u.delete(o);return this.size=u.size,f}function mP(o){return this.__data__.get(o)}function _P(o){return this.__data__.has(o)}function yP(o,u){var f=this.__data__;if(f instanceof ui){var m=f.__data__;if(!Lu||m.length<i-1)return m.push([o,u]),this.size=++f.size,this;f=this.__data__=new ci(m)}return f.set(o,u),this.size=f.size,this}Ar.prototype.clear=pP,Ar.prototype.delete=gP,Ar.prototype.get=mP,Ar.prototype.has=_P,Ar.prototype.set=yP;function yy(o,u){var f=je(o),m=!f&&no(o),w=!f&&!m&&es(o),b=!f&&!m&&!w&&_a(o),k=f||m||w||b,L=k?he(o.length,PR):[],B=L.length;for(var ee in o)(u||mt.call(o,ee))&&!(k&&(ee=="length"||w&&(ee=="offset"||ee=="parent")||b&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||di(ee,B)))&&L.push(ee);return L}function vy(o){var u=o.length;return u?o[hp(0,u-1)]:t}function vP(o,u){return xh(Kn(o),Xs(u,0,o.length))}function wP(o){return xh(Kn(o))}function tp(o,u,f){(f!==t&&!Sr(o[u],f)||f===t&&!(u in o))&&li(o,u,f)}function Bu(o,u,f){var m=o[u];(!(mt.call(o,u)&&Sr(m,f))||f===t&&!(u in o))&&li(o,u,f)}function _h(o,u){for(var f=o.length;f--;)if(Sr(o[f][0],u))return f;return-1}function EP(o,u,f,m){return Ji(o,function(w,b,k){u(m,w,f(w),k)}),m}function wy(o,u){return o&&zr(u,cn(u),o)}function IP(o,u){return o&&zr(u,Wn(u),o)}function li(o,u,f){u=="__proto__"&&hh?hh(o,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[u]=f}function np(o,u){for(var f=-1,m=u.length,w=H(m),b=o==null;++f<m;)w[f]=b?t:Lp(o,u[f]);return w}function Xs(o,u,f){return o===o&&(f!==t&&(o=o<=f?o:f),u!==t&&(o=o>=u?o:u)),o}function pr(o,u,f,m,w,b){var k,L=u&_,B=u&v,ee=u&I;if(f&&(k=w?f(o,m,w,b):f(o)),k!==t)return k;if(!Vt(o))return o;var te=je(o);if(te){if(k=lC(o),!L)return Kn(o,k)}else{var se=En(o),me=se==at||se==R;if(es(o))return Ky(o,L);if(se==J||se==dn||me&&!w){if(k=B||me?{}:cv(o),!L)return B?ZP(o,IP(k,o)):XP(o,wy(k,o))}else{if(!ut[se])return w?o:{};k=hC(o,se,L)}}b||(b=new Ar);var Ae=b.get(o);if(Ae)return Ae;b.set(o,k),Fv(o)?o.forEach(function(Ve){k.add(pr(Ve,u,f,Ve,o,b))}):Lv(o)&&o.forEach(function(Ve,Ze){k.set(Ze,pr(Ve,u,f,Ze,o,b))});var Oe=ee?B?Ip:Ep:B?Wn:cn,Qe=te?t:Oe(o);return an(Qe||o,function(Ve,Ze){Qe&&(Ze=Ve,Ve=o[Ze]),Bu(k,Ze,pr(Ve,u,f,Ze,o,b))}),k}function TP(o){var u=cn(o);return function(f){return Ey(f,o,u)}}function Ey(o,u,f){var m=f.length;if(o==null)return!m;for(o=Et(o);m--;){var w=f[m],b=u[w],k=o[w];if(k===t&&!(w in o)||!b(k))return!1}return!0}function Iy(o,u,f){if(typeof o!="function")throw new fr(a);return Gu(function(){o.apply(t,f)},u)}function $u(o,u,f,m){var w=-1,b=Gi,k=!0,L=o.length,B=[],ee=u.length;if(!L)return B;f&&(u=pt(u,Fe(f))),m?(b=ra,k=!1):u.length>=i&&(b=Ft,k=!1,u=new Ys(u));e:for(;++w<L;){var te=o[w],se=f==null?te:f(te);if(te=m||te!==0?te:0,k&&se===se){for(var me=ee;me--;)if(u[me]===se)continue e;B.push(te)}else b(u,se,m)||B.push(te)}return B}var Ji=Qy(qr),Ty=Qy(ip,!0);function bP(o,u){var f=!0;return Ji(o,function(m,w,b){return f=!!u(m,w,b),f}),f}function yh(o,u,f){for(var m=-1,w=o.length;++m<w;){var b=o[m],k=u(b);if(k!=null&&(L===t?k===k&&!Zn(k):f(k,L)))var L=k,B=b}return B}function AP(o,u,f,m){var w=o.length;for(f=Ge(f),f<0&&(f=-f>w?0:w+f),m=m===t||m>w?w:Ge(m),m<0&&(m+=w),m=f>m?0:Bv(m);f<m;)o[f++]=u;return o}function by(o,u){var f=[];return Ji(o,function(m,w,b){u(m,w,b)&&f.push(m)}),f}function gn(o,u,f,m,w){var b=-1,k=o.length;for(f||(f=dC),w||(w=[]);++b<k;){var L=o[b];u>0&&f(L)?u>1?gn(L,u-1,f,m,w):Tr(w,L):m||(w[w.length]=L)}return w}var rp=Jy(),Ay=Jy(!0);function qr(o,u){return o&&rp(o,u,cn)}function ip(o,u){return o&&Ay(o,u,cn)}function vh(o,u){return hr(u,function(f){return pi(o[f])})}function Zs(o,u){u=Xi(u,o);for(var f=0,m=u.length;o!=null&&f<m;)o=o[Kr(u[f++])];return f&&f==m?o:t}function Sy(o,u,f){var m=u(o);return je(o)?m:Tr(m,f(o))}function On(o){return o==null?o===t?ge:ie:Qs&&Qs in Et(o)?aC(o):wC(o)}function sp(o,u){return o>u}function SP(o,u){return o!=null&&mt.call(o,u)}function RP(o,u){return o!=null&&u in Et(o)}function PP(o,u,f){return o>=wn(u,f)&&o<nn(u,f)}function op(o,u,f){for(var m=f?ra:Gi,w=o[0].length,b=o.length,k=b,L=H(b),B=1/0,ee=[];k--;){var te=o[k];k&&u&&(te=pt(te,Fe(u))),B=wn(te.length,B),L[k]=!f&&(u||w>=120&&te.length>=120)?new Ys(k&&te):t}te=o[0];var se=-1,me=L[0];e:for(;++se<w&&ee.length<B;){var Ae=te[se],Oe=u?u(Ae):Ae;if(Ae=f||Ae!==0?Ae:0,!(me?Ft(me,Oe):m(ee,Oe,f))){for(k=b;--k;){var Qe=L[k];if(!(Qe?Ft(Qe,Oe):m(o[k],Oe,f)))continue e}me&&me.push(Oe),ee.push(Ae)}}return ee}function CP(o,u,f,m){return qr(o,function(w,b,k){u(m,f(w),b,k)}),m}function qu(o,u,f){u=Xi(u,o),o=dv(o,u);var m=o==null?o:o[Kr(mr(u))];return m==null?t:kn(m,o,f)}function Ry(o){return Ut(o)&&On(o)==dn}function xP(o){return Ut(o)&&On(o)==Re}function DP(o){return Ut(o)&&On(o)==de}function zu(o,u,f,m,w){return o===u?!0:o==null||u==null||!Ut(o)&&!Ut(u)?o!==o&&u!==u:kP(o,u,f,m,zu,w)}function kP(o,u,f,m,w,b){var k=je(o),L=je(u),B=k?Zt:En(o),ee=L?Zt:En(u);B=B==dn?J:B,ee=ee==dn?J:ee;var te=B==J,se=ee==J,me=B==ee;if(me&&es(o)){if(!es(u))return!1;k=!0,te=!1}if(me&&!te)return b||(b=new Ar),k||_a(o)?ov(o,u,f,m,w,b):sC(o,u,B,f,m,w,b);if(!(f&O)){var Ae=te&&mt.call(o,"__wrapped__"),Oe=se&&mt.call(u,"__wrapped__");if(Ae||Oe){var Qe=Ae?o.value():o,Ve=Oe?u.value():u;return b||(b=new Ar),w(Qe,Ve,f,m,b)}}return me?(b||(b=new Ar),oC(o,u,f,m,w,b)):!1}function OP(o){return Ut(o)&&En(o)==D}function ap(o,u,f,m){var w=f.length,b=w,k=!m;if(o==null)return!b;for(o=Et(o);w--;){var L=f[w];if(k&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++w<b;){L=f[w];var B=L[0],ee=o[B],te=L[1];if(k&&L[2]){if(ee===t&&!(B in o))return!1}else{var se=new Ar;if(m)var me=m(ee,te,B,o,u,se);if(!(me===t?zu(te,ee,O|M,m,se):me))return!1}}return!0}function Py(o){if(!Vt(o)||gC(o))return!1;var u=pi(o)?OR:kl;return u.test(to(o))}function VP(o){return Ut(o)&&On(o)==le}function NP(o){return Ut(o)&&En(o)==ce}function LP(o){return Ut(o)&&Lh(o.length)&&!!yt[On(o)]}function Cy(o){return typeof o=="function"?o:o==null?Gn:typeof o=="object"?je(o)?ky(o[0],o[1]):Dy(o):Yv(o)}function up(o){if(!Wu(o))return UR(o);var u=[];for(var f in Et(o))mt.call(o,f)&&f!="constructor"&&u.push(f);return u}function MP(o){if(!Vt(o))return vC(o);var u=Wu(o),f=[];for(var m in o)m=="constructor"&&(u||!mt.call(o,m))||f.push(m);return f}function cp(o,u){return o<u}function xy(o,u){var f=-1,m=jn(o)?H(o.length):[];return Ji(o,function(w,b,k){m[++f]=u(w,b,k)}),m}function Dy(o){var u=bp(o);return u.length==1&&u[0][2]?hv(u[0][0],u[0][1]):function(f){return f===o||ap(f,o,u)}}function ky(o,u){return Sp(o)&&lv(u)?hv(Kr(o),u):function(f){var m=Lp(f,o);return m===t&&m===u?Mp(f,o):zu(u,m,O|M)}}function wh(o,u,f,m,w){o!==u&&rp(u,function(b,k){if(w||(w=new Ar),Vt(b))FP(o,u,k,f,wh,m,w);else{var L=m?m(Pp(o,k),b,k+"",o,u,w):t;L===t&&(L=b),tp(o,k,L)}},Wn)}function FP(o,u,f,m,w,b,k){var L=Pp(o,f),B=Pp(u,f),ee=k.get(B);if(ee){tp(o,f,ee);return}var te=b?b(L,B,f+"",o,u,k):t,se=te===t;if(se){var me=je(B),Ae=!me&&es(B),Oe=!me&&!Ae&&_a(B);te=B,me||Ae||Oe?je(L)?te=L:qt(L)?te=Kn(L):Ae?(se=!1,te=Ky(B,!0)):Oe?(se=!1,te=jy(B,!0)):te=[]:Hu(B)||no(B)?(te=L,no(L)?te=$v(L):(!Vt(L)||pi(L))&&(te=cv(B))):se=!1}se&&(k.set(B,te),w(te,B,m,b,k),k.delete(B)),tp(o,f,te)}function Oy(o,u){var f=o.length;if(!!f)return u+=u<0?f:0,di(u,f)?o[u]:t}function Vy(o,u,f){u.length?u=pt(u,function(b){return je(b)?function(k){return Zs(k,b.length===1?b[0]:b)}:b}):u=[Gn];var m=-1;u=pt(u,Fe(ke()));var w=xy(o,function(b,k,L){var B=pt(u,function(ee){return ee(b)});return{criteria:B,index:++m,value:b}});return $(w,function(b,k){return YP(b,k,f)})}function UP(o,u){return Ny(o,u,function(f,m){return Mp(o,m)})}function Ny(o,u,f){for(var m=-1,w=u.length,b={};++m<w;){var k=u[m],L=Zs(o,k);f(L,k)&&Ku(b,Xi(k,o),L)}return b}function BP(o){return function(u){return Zs(u,o)}}function lp(o,u,f,m){var w=m?th:si,b=-1,k=u.length,L=o;for(o===u&&(u=Kn(u)),f&&(L=pt(o,Fe(f)));++b<k;)for(var B=0,ee=u[b],te=f?f(ee):ee;(B=w(L,te,B,m))>-1;)L!==o&&lh.call(L,B,1),lh.call(o,B,1);return o}function Ly(o,u){for(var f=o?u.length:0,m=f-1;f--;){var w=u[f];if(f==m||w!==b){var b=w;di(w)?lh.call(o,w,1):pp(o,w)}}return o}function hp(o,u){return o+dh(my()*(u-o+1))}function $P(o,u,f,m){for(var w=-1,b=nn(fh((u-o)/(f||1)),0),k=H(b);b--;)k[m?b:++w]=o,o+=f;return k}function fp(o,u){var f="";if(!o||u<1||u>$e)return f;do u%2&&(f+=o),u=dh(u/2),u&&(o+=o);while(u);return f}function Je(o,u){return Cp(fv(o,u,Gn),o+"")}function qP(o){return vy(ya(o))}function zP(o,u){var f=ya(o);return xh(f,Xs(u,0,f.length))}function Ku(o,u,f,m){if(!Vt(o))return o;u=Xi(u,o);for(var w=-1,b=u.length,k=b-1,L=o;L!=null&&++w<b;){var B=Kr(u[w]),ee=f;if(B==="__proto__"||B==="constructor"||B==="prototype")return o;if(w!=k){var te=L[B];ee=m?m(te,B,L):t,ee===t&&(ee=Vt(te)?te:di(u[w+1])?[]:{})}Bu(L,B,ee),L=L[B]}return o}var My=ph?function(o,u){return ph.set(o,u),o}:Gn,KP=hh?function(o,u){return hh(o,"toString",{configurable:!0,enumerable:!1,value:Up(u),writable:!0})}:Gn;function jP(o){return xh(ya(o))}function gr(o,u,f){var m=-1,w=o.length;u<0&&(u=-u>w?0:w+u),f=f>w?w:f,f<0&&(f+=w),w=u>f?0:f-u>>>0,u>>>=0;for(var b=H(w);++m<w;)b[m]=o[m+u];return b}function WP(o,u){var f;return Ji(o,function(m,w,b){return f=u(m,w,b),!f}),!!f}function Eh(o,u,f){var m=0,w=o==null?m:o.length;if(typeof u=="number"&&u===u&&w<=Rt){for(;m<w;){var b=m+w>>>1,k=o[b];k!==null&&!Zn(k)&&(f?k<=u:k<u)?m=b+1:w=b}return w}return dp(o,u,Gn,f)}function dp(o,u,f,m){var w=0,b=o==null?0:o.length;if(b===0)return 0;u=f(u);for(var k=u!==u,L=u===null,B=Zn(u),ee=u===t;w<b;){var te=dh((w+b)/2),se=f(o[te]),me=se!==t,Ae=se===null,Oe=se===se,Qe=Zn(se);if(k)var Ve=m||Oe;else ee?Ve=Oe&&(m||me):L?Ve=Oe&&me&&(m||!Ae):B?Ve=Oe&&me&&!Ae&&(m||!Qe):Ae||Qe?Ve=!1:Ve=m?se<=u:se<u;Ve?w=te+1:b=te}return wn(b,St)}function Fy(o,u){for(var f=-1,m=o.length,w=0,b=[];++f<m;){var k=o[f],L=u?u(k):k;if(!f||!Sr(L,B)){var B=L;b[w++]=k===0?0:k}}return b}function Uy(o){return typeof o=="number"?o:Zn(o)?yn:+o}function Xn(o){if(typeof o=="string")return o;if(je(o))return pt(o,Xn)+"";if(Zn(o))return _y?_y.call(o):"";var u=o+"";return u=="0"&&1/o==-Ce?"-0":u}function Yi(o,u,f){var m=-1,w=Gi,b=o.length,k=!0,L=[],B=L;if(f)k=!1,w=ra;else if(b>=i){var ee=u?null:rC(o);if(ee)return nh(ee);k=!1,w=Ft,B=new Ys}else B=u?[]:L;e:for(;++m<b;){var te=o[m],se=u?u(te):te;if(te=f||te!==0?te:0,k&&se===se){for(var me=B.length;me--;)if(B[me]===se)continue e;u&&B.push(se),L.push(te)}else w(B,se,f)||(B!==L&&B.push(se),L.push(te))}return L}function pp(o,u){return u=Xi(u,o),o=dv(o,u),o==null||delete o[Kr(mr(u))]}function By(o,u,f,m){return Ku(o,u,f(Zs(o,u)),m)}function Ih(o,u,f,m){for(var w=o.length,b=m?w:-1;(m?b--:++b<w)&&u(o[b],b,o););return f?gr(o,m?0:b,m?b+1:w):gr(o,m?b+1:0,m?w:b)}function $y(o,u){var f=o;return f instanceof tt&&(f=f.value()),ia(u,function(m,w){return w.func.apply(w.thisArg,Tr([m],w.args))},f)}function gp(o,u,f){var m=o.length;if(m<2)return m?Yi(o[0]):[];for(var w=-1,b=H(m);++w<m;)for(var k=o[w],L=-1;++L<m;)L!=w&&(b[w]=$u(b[w]||k,o[L],u,f));return Yi(gn(b,1),u,f)}function qy(o,u,f){for(var m=-1,w=o.length,b=u.length,k={};++m<w;){var L=m<b?u[m]:t;f(k,o[m],L)}return k}function mp(o){return qt(o)?o:[]}function _p(o){return typeof o=="function"?o:Gn}function Xi(o,u){return je(o)?o:Sp(o,u)?[o]:_v(ht(o))}var GP=Je;function Zi(o,u,f){var m=o.length;return f=f===t?m:f,!u&&f>=m?o:gr(o,u,f)}var zy=VR||function(o){return Qt.clearTimeout(o)};function Ky(o,u){if(u)return o.slice();var f=o.length,m=hy?hy(f):new o.constructor(f);return o.copy(m),m}function yp(o){var u=new o.constructor(o.byteLength);return new uh(u).set(new uh(o)),u}function HP(o,u){var f=u?yp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function QP(o){var u=new o.constructor(o.source,Ko.exec(o));return u.lastIndex=o.lastIndex,u}function JP(o){return Uu?Et(Uu.call(o)):{}}function jy(o,u){var f=u?yp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function Wy(o,u){if(o!==u){var f=o!==t,m=o===null,w=o===o,b=Zn(o),k=u!==t,L=u===null,B=u===u,ee=Zn(u);if(!L&&!ee&&!b&&o>u||b&&k&&B&&!L&&!ee||m&&k&&B||!f&&B||!w)return 1;if(!m&&!b&&!ee&&o<u||ee&&f&&w&&!m&&!b||L&&f&&w||!k&&w||!B)return-1}return 0}function YP(o,u,f){for(var m=-1,w=o.criteria,b=u.criteria,k=w.length,L=f.length;++m<k;){var B=Wy(w[m],b[m]);if(B){if(m>=L)return B;var ee=f[m];return B*(ee=="desc"?-1:1)}}return o.index-u.index}function Gy(o,u,f,m){for(var w=-1,b=o.length,k=f.length,L=-1,B=u.length,ee=nn(b-k,0),te=H(B+ee),se=!m;++L<B;)te[L]=u[L];for(;++w<k;)(se||w<b)&&(te[f[w]]=o[w]);for(;ee--;)te[L++]=o[w++];return te}function Hy(o,u,f,m){for(var w=-1,b=o.length,k=-1,L=f.length,B=-1,ee=u.length,te=nn(b-L,0),se=H(te+ee),me=!m;++w<te;)se[w]=o[w];for(var Ae=w;++B<ee;)se[Ae+B]=u[B];for(;++k<L;)(me||w<b)&&(se[Ae+f[k]]=o[w++]);return se}function Kn(o,u){var f=-1,m=o.length;for(u||(u=H(m));++f<m;)u[f]=o[f];return u}function zr(o,u,f,m){var w=!f;f||(f={});for(var b=-1,k=u.length;++b<k;){var L=u[b],B=m?m(f[L],o[L],L,f,o):t;B===t&&(B=o[L]),w?li(f,L,B):Bu(f,L,B)}return f}function XP(o,u){return zr(o,Ap(o),u)}function ZP(o,u){return zr(o,av(o),u)}function Th(o,u){return function(f,m){var w=je(f)?Jl:EP,b=u?u():{};return w(f,o,ke(m,2),b)}}function pa(o){return Je(function(u,f){var m=-1,w=f.length,b=w>1?f[w-1]:t,k=w>2?f[2]:t;for(b=o.length>3&&typeof b=="function"?(w--,b):t,k&&Vn(f[0],f[1],k)&&(b=w<3?t:b,w=1),u=Et(u);++m<w;){var L=f[m];L&&o(u,L,m,b)}return u})}function Qy(o,u){return function(f,m){if(f==null)return f;if(!jn(f))return o(f,m);for(var w=f.length,b=u?w:-1,k=Et(f);(u?b--:++b<w)&&m(k[b],b,k)!==!1;);return f}}function Jy(o){return function(u,f,m){for(var w=-1,b=Et(u),k=m(u),L=k.length;L--;){var B=k[o?L:++w];if(f(b[B],B,b)===!1)break}return u}}function eC(o,u,f){var m=u&F,w=ju(o);function b(){var k=this&&this!==Qt&&this instanceof b?w:o;return k.apply(m?f:this,arguments)}return b}function Yy(o){return function(u){u=ht(u);var f=aa(u)?br(u):t,m=f?f[0]:u.charAt(0),w=f?Zi(f,1).join(""):u.slice(1);return m[o]()+w}}function ga(o){return function(u){return ia(Qv(Hv(u).replace(Kd,"")),o,"")}}function ju(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var f=da(o.prototype),m=o.apply(f,u);return Vt(m)?m:f}}function tC(o,u,f){var m=ju(o);function w(){for(var b=arguments.length,k=H(b),L=b,B=ma(w);L--;)k[L]=arguments[L];var ee=b<3&&k[0]!==B&&k[b-1]!==B?[]:Hi(k,B);if(b-=ee.length,b<f)return nv(o,u,bh,w.placeholder,t,k,ee,t,t,f-b);var te=this&&this!==Qt&&this instanceof w?m:o;return kn(te,this,k)}return w}function Xy(o){return function(u,f,m){var w=Et(u);if(!jn(u)){var b=ke(f,3);u=cn(u),f=function(L){return b(w[L],L,w)}}var k=o(u,f,m);return k>-1?w[b?u[k]:k]:t}}function Zy(o){return fi(function(u){var f=u.length,m=f,w=dr.prototype.thru;for(o&&u.reverse();m--;){var b=u[m];if(typeof b!="function")throw new fr(a);if(w&&!k&&Ph(b)=="wrapper")var k=new dr([],!0)}for(m=k?m:f;++m<f;){b=u[m];var L=Ph(b),B=L=="wrapper"?Tp(b):t;B&&Rp(B[0])&&B[1]==(P|q|Y|S)&&!B[4].length&&B[9]==1?k=k[Ph(B[0])].apply(k,B[3]):k=b.length==1&&Rp(b)?k[L]():k.thru(b)}return function(){var ee=arguments,te=ee[0];if(k&&ee.length==1&&je(te))return k.plant(te).value();for(var se=0,me=f?u[se].apply(this,ee):te;++se<f;)me=u[se].call(this,me);return me}})}function bh(o,u,f,m,w,b,k,L,B,ee){var te=u&P,se=u&F,me=u&Q,Ae=u&(q|W),Oe=u&A,Qe=me?t:ju(o);function Ve(){for(var Ze=arguments.length,rt=H(Ze),er=Ze;er--;)rt[er]=arguments[er];if(Ae)var Nn=ma(Ve),tr=oa(rt,Nn);if(m&&(rt=Gy(rt,m,w,Ae)),b&&(rt=Hy(rt,b,k,Ae)),Ze-=tr,Ae&&Ze<ee){var zt=Hi(rt,Nn);return nv(o,u,bh,Ve.placeholder,f,rt,zt,L,B,ee-Ze)}var Rr=se?f:this,mi=me?Rr[o]:o;return Ze=rt.length,L?rt=EC(rt,L):Oe&&Ze>1&&rt.reverse(),te&&B<Ze&&(rt.length=B),this&&this!==Qt&&this instanceof Ve&&(mi=Qe||ju(mi)),mi.apply(Rr,rt)}return Ve}function ev(o,u){return function(f,m){return CP(f,o,u(m),{})}}function Ah(o,u){return function(f,m){var w;if(f===t&&m===t)return u;if(f!==t&&(w=f),m!==t){if(w===t)return m;typeof f=="string"||typeof m=="string"?(f=Xn(f),m=Xn(m)):(f=Uy(f),m=Uy(m)),w=o(f,m)}return w}}function vp(o){return fi(function(u){return u=pt(u,Fe(ke())),Je(function(f){var m=this;return o(u,function(w){return kn(w,m,f)})})})}function Sh(o,u){u=u===t?" ":Xn(u);var f=u.length;if(f<2)return f?fp(u,o):u;var m=fp(u,fh(o/ua(u)));return aa(u)?Zi(br(m),0,o).join(""):m.slice(0,o)}function nC(o,u,f,m){var w=u&F,b=ju(o);function k(){for(var L=-1,B=arguments.length,ee=-1,te=m.length,se=H(te+B),me=this&&this!==Qt&&this instanceof k?b:o;++ee<te;)se[ee]=m[ee];for(;B--;)se[ee++]=arguments[++L];return kn(me,w?f:this,se)}return k}function tv(o){return function(u,f,m){return m&&typeof m!="number"&&Vn(u,f,m)&&(f=m=t),u=gi(u),f===t?(f=u,u=0):f=gi(f),m=m===t?u<f?1:-1:gi(m),$P(u,f,m,o)}}function Rh(o){return function(u,f){return typeof u=="string"&&typeof f=="string"||(u=_r(u),f=_r(f)),o(u,f)}}function nv(o,u,f,m,w,b,k,L,B,ee){var te=u&q,se=te?k:t,me=te?t:k,Ae=te?b:t,Oe=te?t:b;u|=te?Y:re,u&=~(te?re:Y),u&z||(u&=~(F|Q));var Qe=[o,u,w,Ae,se,Oe,me,L,B,ee],Ve=f.apply(t,Qe);return Rp(o)&&pv(Ve,Qe),Ve.placeholder=m,gv(Ve,o,u)}function wp(o){var u=tn[o];return function(f,m){if(f=_r(f),m=m==null?0:wn(Ge(m),292),m&&gy(f)){var w=(ht(f)+"e").split("e"),b=u(w[0]+"e"+(+w[1]+m));return w=(ht(b)+"e").split("e"),+(w[0]+"e"+(+w[1]-m))}return u(f)}}var rC=ha&&1/nh(new ha([,-0]))[1]==Ce?function(o){return new ha(o)}:qp;function rv(o){return function(u){var f=En(u);return f==D?Jd(u):f==ce?wR(u):gt(u,o(u))}}function hi(o,u,f,m,w,b,k,L){var B=u&Q;if(!B&&typeof o!="function")throw new fr(a);var ee=m?m.length:0;if(ee||(u&=~(Y|re),m=w=t),k=k===t?k:nn(Ge(k),0),L=L===t?L:Ge(L),ee-=w?w.length:0,u&re){var te=m,se=w;m=w=t}var me=B?t:Tp(o),Ae=[o,u,f,m,w,te,se,b,k,L];if(me&&yC(Ae,me),o=Ae[0],u=Ae[1],f=Ae[2],m=Ae[3],w=Ae[4],L=Ae[9]=Ae[9]===t?B?0:o.length:nn(Ae[9]-ee,0),!L&&u&(q|W)&&(u&=~(q|W)),!u||u==F)var Oe=eC(o,u,f);else u==q||u==W?Oe=tC(o,u,L):(u==Y||u==(F|Y))&&!w.length?Oe=nC(o,u,f,m):Oe=bh.apply(t,Ae);var Qe=me?My:pv;return gv(Qe(Oe,Ae),o,u)}function iv(o,u,f,m){return o===t||Sr(o,la[f])&&!mt.call(m,f)?u:o}function sv(o,u,f,m,w,b){return Vt(o)&&Vt(u)&&(b.set(u,o),wh(o,u,t,sv,b),b.delete(u)),o}function iC(o){return Hu(o)?t:o}function ov(o,u,f,m,w,b){var k=f&O,L=o.length,B=u.length;if(L!=B&&!(k&&B>L))return!1;var ee=b.get(o),te=b.get(u);if(ee&&te)return ee==u&&te==o;var se=-1,me=!0,Ae=f&M?new Ys:t;for(b.set(o,u),b.set(u,o);++se<L;){var Oe=o[se],Qe=u[se];if(m)var Ve=k?m(Qe,Oe,se,u,o,b):m(Oe,Qe,se,o,u,b);if(Ve!==t){if(Ve)continue;me=!1;break}if(Ae){if(!sa(u,function(Ze,rt){if(!Ft(Ae,rt)&&(Oe===Ze||w(Oe,Ze,f,m,b)))return Ae.push(rt)})){me=!1;break}}else if(!(Oe===Qe||w(Oe,Qe,f,m,b))){me=!1;break}}return b.delete(o),b.delete(u),me}function sC(o,u,f,m,w,b,k){switch(f){case Ne:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Re:return!(o.byteLength!=u.byteLength||!b(new uh(o),new uh(u)));case _e:case de:case j:return Sr(+o,+u);case He:return o.name==u.name&&o.message==u.message;case le:case ae:return o==u+"";case D:var L=Jd;case ce:var B=m&O;if(L||(L=nh),o.size!=u.size&&!B)return!1;var ee=k.get(o);if(ee)return ee==u;m|=M,k.set(o,u);var te=ov(L(o),L(u),m,w,b,k);return k.delete(o),te;case Pe:if(Uu)return Uu.call(o)==Uu.call(u)}return!1}function oC(o,u,f,m,w,b){var k=f&O,L=Ep(o),B=L.length,ee=Ep(u),te=ee.length;if(B!=te&&!k)return!1;for(var se=B;se--;){var me=L[se];if(!(k?me in u:mt.call(u,me)))return!1}var Ae=b.get(o),Oe=b.get(u);if(Ae&&Oe)return Ae==u&&Oe==o;var Qe=!0;b.set(o,u),b.set(u,o);for(var Ve=k;++se<B;){me=L[se];var Ze=o[me],rt=u[me];if(m)var er=k?m(rt,Ze,me,u,o,b):m(Ze,rt,me,o,u,b);if(!(er===t?Ze===rt||w(Ze,rt,f,m,b):er)){Qe=!1;break}Ve||(Ve=me=="constructor")}if(Qe&&!Ve){var Nn=o.constructor,tr=u.constructor;Nn!=tr&&"constructor"in o&&"constructor"in u&&!(typeof Nn=="function"&&Nn instanceof Nn&&typeof tr=="function"&&tr instanceof tr)&&(Qe=!1)}return b.delete(o),b.delete(u),Qe}function fi(o){return Cp(fv(o,t,Ev),o+"")}function Ep(o){return Sy(o,cn,Ap)}function Ip(o){return Sy(o,Wn,av)}var Tp=ph?function(o){return ph.get(o)}:qp;function Ph(o){for(var u=o.name+"",f=fa[u],m=mt.call(fa,u)?f.length:0;m--;){var w=f[m],b=w.func;if(b==null||b==o)return w.name}return u}function ma(o){var u=mt.call(E,"placeholder")?E:o;return u.placeholder}function ke(){var o=E.iteratee||Bp;return o=o===Bp?Cy:o,arguments.length?o(arguments[0],arguments[1]):o}function Ch(o,u){var f=o.__data__;return pC(u)?f[typeof u=="string"?"string":"hash"]:f.map}function bp(o){for(var u=cn(o),f=u.length;f--;){var m=u[f],w=o[m];u[f]=[m,w,lv(w)]}return u}function eo(o,u){var f=_R(o,u);return Py(f)?f:t}function aC(o){var u=mt.call(o,Qs),f=o[Qs];try{o[Qs]=t;var m=!0}catch{}var w=oh.call(o);return m&&(u?o[Qs]=f:delete o[Qs]),w}var Ap=Xd?function(o){return o==null?[]:(o=Et(o),hr(Xd(o),function(u){return dy.call(o,u)}))}:zp,av=Xd?function(o){for(var u=[];o;)Tr(u,Ap(o)),o=ch(o);return u}:zp,En=On;(Zd&&En(new Zd(new ArrayBuffer(1)))!=Ne||Lu&&En(new Lu)!=D||ep&&En(ep.resolve())!=ue||ha&&En(new ha)!=ce||Mu&&En(new Mu)!=Ie)&&(En=function(o){var u=On(o),f=u==J?o.constructor:t,m=f?to(f):"";if(m)switch(m){case zR:return Ne;case KR:return D;case jR:return ue;case WR:return ce;case GR:return Ie}return u});function uC(o,u,f){for(var m=-1,w=f.length;++m<w;){var b=f[m],k=b.size;switch(b.type){case"drop":o+=k;break;case"dropRight":u-=k;break;case"take":u=wn(u,o+k);break;case"takeRight":o=nn(o,u-k);break}}return{start:o,end:u}}function cC(o){var u=o.match(Fd);return u?u[1].split(Ui):[]}function uv(o,u,f){u=Xi(u,o);for(var m=-1,w=u.length,b=!1;++m<w;){var k=Kr(u[m]);if(!(b=o!=null&&f(o,k)))break;o=o[k]}return b||++m!=w?b:(w=o==null?0:o.length,!!w&&Lh(w)&&di(k,w)&&(je(o)||no(o)))}function lC(o){var u=o.length,f=new o.constructor(u);return u&&typeof o[0]=="string"&&mt.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function cv(o){return typeof o.constructor=="function"&&!Wu(o)?da(ch(o)):{}}function hC(o,u,f){var m=o.constructor;switch(u){case Re:return yp(o);case _e:case de:return new m(+o);case Ne:return HP(o,f);case Xe:case Ht:case kt:case pn:case Ot:case ar:case ti:case $t:case vn:return jy(o,f);case D:return new m;case j:case ae:return new m(o);case le:return QP(o);case ce:return new m;case Pe:return JP(o)}}function fC(o,u){var f=u.length;if(!f)return o;var m=f-1;return u[m]=(f>1?"& ":"")+u[m],u=u.join(f>2?", ":" "),o.replace(Md,`{
/* [wrapped with `+u+`] */
`)}function dC(o){return je(o)||no(o)||!!(py&&o&&o[py])}function di(o,u){var f=typeof o;return u=u==null?$e:u,!!u&&(f=="number"||f!="symbol"&&Eu.test(o))&&o>-1&&o%1==0&&o<u}function Vn(o,u,f){if(!Vt(f))return!1;var m=typeof u;return(m=="number"?jn(f)&&di(u,f.length):m=="string"&&u in f)?Sr(f[u],o):!1}function Sp(o,u){if(je(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||Zn(o)?!0:Bs.test(o)||!Pl.test(o)||u!=null&&o in Et(u)}function pC(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Rp(o){var u=Ph(o),f=E[u];if(typeof f!="function"||!(u in tt.prototype))return!1;if(o===f)return!0;var m=Tp(f);return!!m&&o===m[0]}function gC(o){return!!ly&&ly in o}var mC=ih?pi:Kp;function Wu(o){var u=o&&o.constructor,f=typeof u=="function"&&u.prototype||la;return o===f}function lv(o){return o===o&&!Vt(o)}function hv(o,u){return function(f){return f==null?!1:f[o]===u&&(u!==t||o in Et(f))}}function _C(o){var u=Vh(o,function(m){return f.size===d&&f.clear(),m}),f=u.cache;return u}function yC(o,u){var f=o[1],m=u[1],w=f|m,b=w<(F|Q|P),k=m==P&&f==q||m==P&&f==S&&o[7].length<=u[8]||m==(P|S)&&u[7].length<=u[8]&&f==q;if(!(b||k))return o;m&F&&(o[2]=u[2],w|=f&F?0:z);var L=u[3];if(L){var B=o[3];o[3]=B?Gy(B,L,u[4]):L,o[4]=B?Hi(o[3],p):u[4]}return L=u[5],L&&(B=o[5],o[5]=B?Hy(B,L,u[6]):L,o[6]=B?Hi(o[5],p):u[6]),L=u[7],L&&(o[7]=L),m&P&&(o[8]=o[8]==null?u[8]:wn(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=w,o}function vC(o){var u=[];if(o!=null)for(var f in Et(o))u.push(f);return u}function wC(o){return oh.call(o)}function fv(o,u,f){return u=nn(u===t?o.length-1:u,0),function(){for(var m=arguments,w=-1,b=nn(m.length-u,0),k=H(b);++w<b;)k[w]=m[u+w];w=-1;for(var L=H(u+1);++w<u;)L[w]=m[w];return L[u]=f(k),kn(o,this,L)}}function dv(o,u){return u.length<2?o:Zs(o,gr(u,0,-1))}function EC(o,u){for(var f=o.length,m=wn(u.length,f),w=Kn(o);m--;){var b=u[m];o[m]=di(b,f)?w[b]:t}return o}function Pp(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var pv=mv(My),Gu=LR||function(o,u){return Qt.setTimeout(o,u)},Cp=mv(KP);function gv(o,u,f){var m=u+"";return Cp(o,fC(m,IC(cC(m),f)))}function mv(o){var u=0,f=0;return function(){var m=BR(),w=C-(m-f);if(f=m,w>0){if(++u>=V)return arguments[0]}else u=0;return o.apply(t,arguments)}}function xh(o,u){var f=-1,m=o.length,w=m-1;for(u=u===t?m:u;++f<u;){var b=hp(f,w),k=o[b];o[b]=o[f],o[f]=k}return o.length=u,o}var _v=_C(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(Cl,function(f,m,w,b){u.push(w?b.replace(zo,"$1"):m||f)}),u});function Kr(o){if(typeof o=="string"||Zn(o))return o;var u=o+"";return u=="0"&&1/o==-Ce?"-0":u}function to(o){if(o!=null){try{return sh.call(o)}catch{}try{return o+""}catch{}}return""}function IC(o,u){return an(Nr,function(f){var m="_."+f[0];u&f[1]&&!Gi(o,m)&&o.push(m)}),o.sort()}function yv(o){if(o instanceof tt)return o.clone();var u=new dr(o.__wrapped__,o.__chain__);return u.__actions__=Kn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function TC(o,u,f){(f?Vn(o,u,f):u===t)?u=1:u=nn(Ge(u),0);var m=o==null?0:o.length;if(!m||u<1)return[];for(var w=0,b=0,k=H(fh(m/u));w<m;)k[b++]=gr(o,w,w+=u);return k}function bC(o){for(var u=-1,f=o==null?0:o.length,m=0,w=[];++u<f;){var b=o[u];b&&(w[m++]=b)}return w}function AC(){var o=arguments.length;if(!o)return[];for(var u=H(o-1),f=arguments[0],m=o;m--;)u[m-1]=arguments[m];return Tr(je(f)?Kn(f):[f],gn(u,1))}var SC=Je(function(o,u){return qt(o)?$u(o,gn(u,1,qt,!0)):[]}),RC=Je(function(o,u){var f=mr(u);return qt(f)&&(f=t),qt(o)?$u(o,gn(u,1,qt,!0),ke(f,2)):[]}),PC=Je(function(o,u){var f=mr(u);return qt(f)&&(f=t),qt(o)?$u(o,gn(u,1,qt,!0),t,f):[]});function CC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:Ge(u),gr(o,u<0?0:u,m)):[]}function xC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:Ge(u),u=m-u,gr(o,0,u<0?0:u)):[]}function DC(o,u){return o&&o.length?Ih(o,ke(u,3),!0,!0):[]}function kC(o,u){return o&&o.length?Ih(o,ke(u,3),!0):[]}function OC(o,u,f,m){var w=o==null?0:o.length;return w?(f&&typeof f!="number"&&Vn(o,u,f)&&(f=0,m=w),AP(o,u,f,m)):[]}function vv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:Ge(f);return w<0&&(w=nn(m+w,0)),un(o,ke(u,3),w)}function wv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m-1;return f!==t&&(w=Ge(f),w=f<0?nn(m+w,0):wn(w,m-1)),un(o,ke(u,3),w,!0)}function Ev(o){var u=o==null?0:o.length;return u?gn(o,1):[]}function VC(o){var u=o==null?0:o.length;return u?gn(o,Ce):[]}function NC(o,u){var f=o==null?0:o.length;return f?(u=u===t?1:Ge(u),gn(o,u)):[]}function LC(o){for(var u=-1,f=o==null?0:o.length,m={};++u<f;){var w=o[u];m[w[0]]=w[1]}return m}function Iv(o){return o&&o.length?o[0]:t}function MC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:Ge(f);return w<0&&(w=nn(m+w,0)),si(o,u,w)}function FC(o){var u=o==null?0:o.length;return u?gr(o,0,-1):[]}var UC=Je(function(o){var u=pt(o,mp);return u.length&&u[0]===o[0]?op(u):[]}),BC=Je(function(o){var u=mr(o),f=pt(o,mp);return u===mr(f)?u=t:f.pop(),f.length&&f[0]===o[0]?op(f,ke(u,2)):[]}),$C=Je(function(o){var u=mr(o),f=pt(o,mp);return u=typeof u=="function"?u:t,u&&f.pop(),f.length&&f[0]===o[0]?op(f,t,u):[]});function qC(o,u){return o==null?"":FR.call(o,u)}function mr(o){var u=o==null?0:o.length;return u?o[u-1]:t}function zC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m;return f!==t&&(w=Ge(f),w=w<0?nn(m+w,0):wn(w,m-1)),u===u?IR(o,u,w):un(o,oi,w,!0)}function KC(o,u){return o&&o.length?Oy(o,Ge(u)):t}var jC=Je(Tv);function Tv(o,u){return o&&o.length&&u&&u.length?lp(o,u):o}function WC(o,u,f){return o&&o.length&&u&&u.length?lp(o,u,ke(f,2)):o}function GC(o,u,f){return o&&o.length&&u&&u.length?lp(o,u,t,f):o}var HC=fi(function(o,u){var f=o==null?0:o.length,m=np(o,u);return Ly(o,pt(u,function(w){return di(w,f)?+w:w}).sort(Wy)),m});function QC(o,u){var f=[];if(!(o&&o.length))return f;var m=-1,w=[],b=o.length;for(u=ke(u,3);++m<b;){var k=o[m];u(k,m,o)&&(f.push(k),w.push(m))}return Ly(o,w),f}function xp(o){return o==null?o:qR.call(o)}function JC(o,u,f){var m=o==null?0:o.length;return m?(f&&typeof f!="number"&&Vn(o,u,f)?(u=0,f=m):(u=u==null?0:Ge(u),f=f===t?m:Ge(f)),gr(o,u,f)):[]}function YC(o,u){return Eh(o,u)}function XC(o,u,f){return dp(o,u,ke(f,2))}function ZC(o,u){var f=o==null?0:o.length;if(f){var m=Eh(o,u);if(m<f&&Sr(o[m],u))return m}return-1}function e1(o,u){return Eh(o,u,!0)}function t1(o,u,f){return dp(o,u,ke(f,2),!0)}function n1(o,u){var f=o==null?0:o.length;if(f){var m=Eh(o,u,!0)-1;if(Sr(o[m],u))return m}return-1}function r1(o){return o&&o.length?Fy(o):[]}function i1(o,u){return o&&o.length?Fy(o,ke(u,2)):[]}function s1(o){var u=o==null?0:o.length;return u?gr(o,1,u):[]}function o1(o,u,f){return o&&o.length?(u=f||u===t?1:Ge(u),gr(o,0,u<0?0:u)):[]}function a1(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:Ge(u),u=m-u,gr(o,u<0?0:u,m)):[]}function u1(o,u){return o&&o.length?Ih(o,ke(u,3),!1,!0):[]}function c1(o,u){return o&&o.length?Ih(o,ke(u,3)):[]}var l1=Je(function(o){return Yi(gn(o,1,qt,!0))}),h1=Je(function(o){var u=mr(o);return qt(u)&&(u=t),Yi(gn(o,1,qt,!0),ke(u,2))}),f1=Je(function(o){var u=mr(o);return u=typeof u=="function"?u:t,Yi(gn(o,1,qt,!0),t,u)});function d1(o){return o&&o.length?Yi(o):[]}function p1(o,u){return o&&o.length?Yi(o,ke(u,2)):[]}function g1(o,u){return u=typeof u=="function"?u:t,o&&o.length?Yi(o,t,u):[]}function Dp(o){if(!(o&&o.length))return[];var u=0;return o=hr(o,function(f){if(qt(f))return u=nn(f.length,u),!0}),he(u,function(f){return pt(o,g(f))})}function bv(o,u){if(!(o&&o.length))return[];var f=Dp(o);return u==null?f:pt(f,function(m){return kn(u,t,m)})}var m1=Je(function(o,u){return qt(o)?$u(o,u):[]}),_1=Je(function(o){return gp(hr(o,qt))}),y1=Je(function(o){var u=mr(o);return qt(u)&&(u=t),gp(hr(o,qt),ke(u,2))}),v1=Je(function(o){var u=mr(o);return u=typeof u=="function"?u:t,gp(hr(o,qt),t,u)}),w1=Je(Dp);function E1(o,u){return qy(o||[],u||[],Bu)}function I1(o,u){return qy(o||[],u||[],Ku)}var T1=Je(function(o){var u=o.length,f=u>1?o[u-1]:t;return f=typeof f=="function"?(o.pop(),f):t,bv(o,f)});function Av(o){var u=E(o);return u.__chain__=!0,u}function b1(o,u){return u(o),o}function Dh(o,u){return u(o)}var A1=fi(function(o){var u=o.length,f=u?o[0]:0,m=this.__wrapped__,w=function(b){return np(b,o)};return u>1||this.__actions__.length||!(m instanceof tt)||!di(f)?this.thru(w):(m=m.slice(f,+f+(u?1:0)),m.__actions__.push({func:Dh,args:[w],thisArg:t}),new dr(m,this.__chain__).thru(function(b){return u&&!b.length&&b.push(t),b}))});function S1(){return Av(this)}function R1(){return new dr(this.value(),this.__chain__)}function P1(){this.__values__===t&&(this.__values__=Uv(this.value()));var o=this.__index__>=this.__values__.length,u=o?t:this.__values__[this.__index__++];return{done:o,value:u}}function C1(){return this}function x1(o){for(var u,f=this;f instanceof mh;){var m=yv(f);m.__index__=0,m.__values__=t,u?w.__wrapped__=m:u=m;var w=m;f=f.__wrapped__}return w.__wrapped__=o,u}function D1(){var o=this.__wrapped__;if(o instanceof tt){var u=o;return this.__actions__.length&&(u=new tt(this)),u=u.reverse(),u.__actions__.push({func:Dh,args:[xp],thisArg:t}),new dr(u,this.__chain__)}return this.thru(xp)}function k1(){return $y(this.__wrapped__,this.__actions__)}var O1=Th(function(o,u,f){mt.call(o,f)?++o[f]:li(o,f,1)});function V1(o,u,f){var m=je(o)?Ou:bP;return f&&Vn(o,u,f)&&(u=t),m(o,ke(u,3))}function N1(o,u){var f=je(o)?hr:by;return f(o,ke(u,3))}var L1=Xy(vv),M1=Xy(wv);function F1(o,u){return gn(kh(o,u),1)}function U1(o,u){return gn(kh(o,u),Ce)}function B1(o,u,f){return f=f===t?1:Ge(f),gn(kh(o,u),f)}function Sv(o,u){var f=je(o)?an:Ji;return f(o,ke(u,3))}function Rv(o,u){var f=je(o)?Yl:Ty;return f(o,ke(u,3))}var $1=Th(function(o,u,f){mt.call(o,f)?o[f].push(u):li(o,f,[u])});function q1(o,u,f,m){o=jn(o)?o:ya(o),f=f&&!m?Ge(f):0;var w=o.length;return f<0&&(f=nn(w+f,0)),Mh(o)?f<=w&&o.indexOf(u,f)>-1:!!w&&si(o,u,f)>-1}var z1=Je(function(o,u,f){var m=-1,w=typeof u=="function",b=jn(o)?H(o.length):[];return Ji(o,function(k){b[++m]=w?kn(u,k,f):qu(k,u,f)}),b}),K1=Th(function(o,u,f){li(o,f,u)});function kh(o,u){var f=je(o)?pt:xy;return f(o,ke(u,3))}function j1(o,u,f,m){return o==null?[]:(je(u)||(u=u==null?[]:[u]),f=m?t:f,je(f)||(f=f==null?[]:[f]),Vy(o,u,f))}var W1=Th(function(o,u,f){o[f?0:1].push(u)},function(){return[[],[]]});function G1(o,u,f){var m=je(o)?ia:T,w=arguments.length<3;return m(o,ke(u,4),f,w,Ji)}function H1(o,u,f){var m=je(o)?ii:T,w=arguments.length<3;return m(o,ke(u,4),f,w,Ty)}function Q1(o,u){var f=je(o)?hr:by;return f(o,Nh(ke(u,3)))}function J1(o){var u=je(o)?vy:qP;return u(o)}function Y1(o,u,f){(f?Vn(o,u,f):u===t)?u=1:u=Ge(u);var m=je(o)?vP:zP;return m(o,u)}function X1(o){var u=je(o)?wP:jP;return u(o)}function Z1(o){if(o==null)return 0;if(jn(o))return Mh(o)?ua(o):o.length;var u=En(o);return u==D||u==ce?o.size:up(o).length}function ex(o,u,f){var m=je(o)?sa:WP;return f&&Vn(o,u,f)&&(u=t),m(o,ke(u,3))}var tx=Je(function(o,u){if(o==null)return[];var f=u.length;return f>1&&Vn(o,u[0],u[1])?u=[]:f>2&&Vn(u[0],u[1],u[2])&&(u=[u[0]]),Vy(o,gn(u,1),[])}),Oh=NR||function(){return Qt.Date.now()};function nx(o,u){if(typeof u!="function")throw new fr(a);return o=Ge(o),function(){if(--o<1)return u.apply(this,arguments)}}function Pv(o,u,f){return u=f?t:u,u=o&&u==null?o.length:u,hi(o,P,t,t,t,t,u)}function Cv(o,u){var f;if(typeof u!="function")throw new fr(a);return o=Ge(o),function(){return--o>0&&(f=u.apply(this,arguments)),o<=1&&(u=t),f}}var kp=Je(function(o,u,f){var m=F;if(f.length){var w=Hi(f,ma(kp));m|=Y}return hi(o,m,u,f,w)}),xv=Je(function(o,u,f){var m=F|Q;if(f.length){var w=Hi(f,ma(xv));m|=Y}return hi(u,m,o,f,w)});function Dv(o,u,f){u=f?t:u;var m=hi(o,q,t,t,t,t,t,u);return m.placeholder=Dv.placeholder,m}function kv(o,u,f){u=f?t:u;var m=hi(o,W,t,t,t,t,t,u);return m.placeholder=kv.placeholder,m}function Ov(o,u,f){var m,w,b,k,L,B,ee=0,te=!1,se=!1,me=!0;if(typeof o!="function")throw new fr(a);u=_r(u)||0,Vt(f)&&(te=!!f.leading,se="maxWait"in f,b=se?nn(_r(f.maxWait)||0,u):b,me="trailing"in f?!!f.trailing:me);function Ae(zt){var Rr=m,mi=w;return m=w=t,ee=zt,k=o.apply(mi,Rr),k}function Oe(zt){return ee=zt,L=Gu(Ze,u),te?Ae(zt):k}function Qe(zt){var Rr=zt-B,mi=zt-ee,Xv=u-Rr;return se?wn(Xv,b-mi):Xv}function Ve(zt){var Rr=zt-B,mi=zt-ee;return B===t||Rr>=u||Rr<0||se&&mi>=b}function Ze(){var zt=Oh();if(Ve(zt))return rt(zt);L=Gu(Ze,Qe(zt))}function rt(zt){return L=t,me&&m?Ae(zt):(m=w=t,k)}function er(){L!==t&&zy(L),ee=0,m=B=w=L=t}function Nn(){return L===t?k:rt(Oh())}function tr(){var zt=Oh(),Rr=Ve(zt);if(m=arguments,w=this,B=zt,Rr){if(L===t)return Oe(B);if(se)return zy(L),L=Gu(Ze,u),Ae(B)}return L===t&&(L=Gu(Ze,u)),k}return tr.cancel=er,tr.flush=Nn,tr}var rx=Je(function(o,u){return Iy(o,1,u)}),ix=Je(function(o,u,f){return Iy(o,_r(u)||0,f)});function sx(o){return hi(o,A)}function Vh(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new fr(a);var f=function(){var m=arguments,w=u?u.apply(this,m):m[0],b=f.cache;if(b.has(w))return b.get(w);var k=o.apply(this,m);return f.cache=b.set(w,k)||b,k};return f.cache=new(Vh.Cache||ci),f}Vh.Cache=ci;function Nh(o){if(typeof o!="function")throw new fr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function ox(o){return Cv(2,o)}var ax=GP(function(o,u){u=u.length==1&&je(u[0])?pt(u[0],Fe(ke())):pt(gn(u,1),Fe(ke()));var f=u.length;return Je(function(m){for(var w=-1,b=wn(m.length,f);++w<b;)m[w]=u[w].call(this,m[w]);return kn(o,this,m)})}),Op=Je(function(o,u){var f=Hi(u,ma(Op));return hi(o,Y,t,u,f)}),Vv=Je(function(o,u){var f=Hi(u,ma(Vv));return hi(o,re,t,u,f)}),ux=fi(function(o,u){return hi(o,S,t,t,t,u)});function cx(o,u){if(typeof o!="function")throw new fr(a);return u=u===t?u:Ge(u),Je(o,u)}function lx(o,u){if(typeof o!="function")throw new fr(a);return u=u==null?0:nn(Ge(u),0),Je(function(f){var m=f[u],w=Zi(f,0,u);return m&&Tr(w,m),kn(o,this,w)})}function hx(o,u,f){var m=!0,w=!0;if(typeof o!="function")throw new fr(a);return Vt(f)&&(m="leading"in f?!!f.leading:m,w="trailing"in f?!!f.trailing:w),Ov(o,u,{leading:m,maxWait:u,trailing:w})}function fx(o){return Pv(o,1)}function dx(o,u){return Op(_p(u),o)}function px(){if(!arguments.length)return[];var o=arguments[0];return je(o)?o:[o]}function gx(o){return pr(o,I)}function mx(o,u){return u=typeof u=="function"?u:t,pr(o,I,u)}function _x(o){return pr(o,_|I)}function yx(o,u){return u=typeof u=="function"?u:t,pr(o,_|I,u)}function vx(o,u){return u==null||Ey(o,u,cn(u))}function Sr(o,u){return o===u||o!==o&&u!==u}var wx=Rh(sp),Ex=Rh(function(o,u){return o>=u}),no=Ry(function(){return arguments}())?Ry:function(o){return Ut(o)&&mt.call(o,"callee")&&!dy.call(o,"callee")},je=H.isArray,Ix=Wi?Fe(Wi):xP;function jn(o){return o!=null&&Lh(o.length)&&!pi(o)}function qt(o){return Ut(o)&&jn(o)}function Tx(o){return o===!0||o===!1||Ut(o)&&On(o)==_e}var es=MR||Kp,bx=Du?Fe(Du):DP;function Ax(o){return Ut(o)&&o.nodeType===1&&!Hu(o)}function Sx(o){if(o==null)return!0;if(jn(o)&&(je(o)||typeof o=="string"||typeof o.splice=="function"||es(o)||_a(o)||no(o)))return!o.length;var u=En(o);if(u==D||u==ce)return!o.size;if(Wu(o))return!up(o).length;for(var f in o)if(mt.call(o,f))return!1;return!0}function Rx(o,u){return zu(o,u)}function Px(o,u,f){f=typeof f=="function"?f:t;var m=f?f(o,u):t;return m===t?zu(o,u,t,f):!!m}function Vp(o){if(!Ut(o))return!1;var u=On(o);return u==He||u==Ee||typeof o.message=="string"&&typeof o.name=="string"&&!Hu(o)}function Cx(o){return typeof o=="number"&&gy(o)}function pi(o){if(!Vt(o))return!1;var u=On(o);return u==at||u==R||u==Z||u==pe}function Nv(o){return typeof o=="number"&&o==Ge(o)}function Lh(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=$e}function Vt(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function Ut(o){return o!=null&&typeof o=="object"}var Lv=na?Fe(na):OP;function xx(o,u){return o===u||ap(o,u,bp(u))}function Dx(o,u,f){return f=typeof f=="function"?f:t,ap(o,u,bp(u),f)}function kx(o){return Mv(o)&&o!=+o}function Ox(o){if(mC(o))throw new qe(s);return Py(o)}function Vx(o){return o===null}function Nx(o){return o==null}function Mv(o){return typeof o=="number"||Ut(o)&&On(o)==j}function Hu(o){if(!Ut(o)||On(o)!=J)return!1;var u=ch(o);if(u===null)return!0;var f=mt.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&sh.call(f)==DR}var Np=Ws?Fe(Ws):VP;function Lx(o){return Nv(o)&&o>=-$e&&o<=$e}var Fv=ku?Fe(ku):NP;function Mh(o){return typeof o=="string"||!je(o)&&Ut(o)&&On(o)==ae}function Zn(o){return typeof o=="symbol"||Ut(o)&&On(o)==Pe}var _a=Gs?Fe(Gs):LP;function Mx(o){return o===t}function Fx(o){return Ut(o)&&En(o)==Ie}function Ux(o){return Ut(o)&&On(o)==De}var Bx=Rh(cp),$x=Rh(function(o,u){return o<=u});function Uv(o){if(!o)return[];if(jn(o))return Mh(o)?br(o):Kn(o);if(Nu&&o[Nu])return vR(o[Nu]());var u=En(o),f=u==D?Jd:u==ce?nh:ya;return f(o)}function gi(o){if(!o)return o===0?o:0;if(o=_r(o),o===Ce||o===-Ce){var u=o<0?-1:1;return u*Dn}return o===o?o:0}function Ge(o){var u=gi(o),f=u%1;return u===u?f?u-f:u:0}function Bv(o){return o?Xs(Ge(o),0,Dt):0}function _r(o){if(typeof o=="number")return o;if(Zn(o))return yn;if(Vt(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=Vt(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Jt(o);var f=Lr.test(o);return f||Ol.test(o)?Qd(o.slice(2),f?2:8):jo.test(o)?yn:+o}function $v(o){return zr(o,Wn(o))}function qx(o){return o?Xs(Ge(o),-$e,$e):o===0?o:0}function ht(o){return o==null?"":Xn(o)}var zx=pa(function(o,u){if(Wu(u)||jn(u)){zr(u,cn(u),o);return}for(var f in u)mt.call(u,f)&&Bu(o,f,u[f])}),qv=pa(function(o,u){zr(u,Wn(u),o)}),Fh=pa(function(o,u,f,m){zr(u,Wn(u),o,m)}),Kx=pa(function(o,u,f,m){zr(u,cn(u),o,m)}),jx=fi(np);function Wx(o,u){var f=da(o);return u==null?f:wy(f,u)}var Gx=Je(function(o,u){o=Et(o);var f=-1,m=u.length,w=m>2?u[2]:t;for(w&&Vn(u[0],u[1],w)&&(m=1);++f<m;)for(var b=u[f],k=Wn(b),L=-1,B=k.length;++L<B;){var ee=k[L],te=o[ee];(te===t||Sr(te,la[ee])&&!mt.call(o,ee))&&(o[ee]=b[ee])}return o}),Hx=Je(function(o){return o.push(t,sv),kn(zv,t,o)});function Qx(o,u){return Hs(o,ke(u,3),qr)}function Jx(o,u){return Hs(o,ke(u,3),ip)}function Yx(o,u){return o==null?o:rp(o,ke(u,3),Wn)}function Xx(o,u){return o==null?o:Ay(o,ke(u,3),Wn)}function Zx(o,u){return o&&qr(o,ke(u,3))}function eD(o,u){return o&&ip(o,ke(u,3))}function tD(o){return o==null?[]:vh(o,cn(o))}function nD(o){return o==null?[]:vh(o,Wn(o))}function Lp(o,u,f){var m=o==null?t:Zs(o,u);return m===t?f:m}function rD(o,u){return o!=null&&uv(o,u,SP)}function Mp(o,u){return o!=null&&uv(o,u,RP)}var iD=ev(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=oh.call(u)),o[u]=f},Up(Gn)),sD=ev(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=oh.call(u)),mt.call(o,u)?o[u].push(f):o[u]=[f]},ke),oD=Je(qu);function cn(o){return jn(o)?yy(o):up(o)}function Wn(o){return jn(o)?yy(o,!0):MP(o)}function aD(o,u){var f={};return u=ke(u,3),qr(o,function(m,w,b){li(f,u(m,w,b),m)}),f}function uD(o,u){var f={};return u=ke(u,3),qr(o,function(m,w,b){li(f,w,u(m,w,b))}),f}var cD=pa(function(o,u,f){wh(o,u,f)}),zv=pa(function(o,u,f,m){wh(o,u,f,m)}),lD=fi(function(o,u){var f={};if(o==null)return f;var m=!1;u=pt(u,function(b){return b=Xi(b,o),m||(m=b.length>1),b}),zr(o,Ip(o),f),m&&(f=pr(f,_|v|I,iC));for(var w=u.length;w--;)pp(f,u[w]);return f});function hD(o,u){return Kv(o,Nh(ke(u)))}var fD=fi(function(o,u){return o==null?{}:UP(o,u)});function Kv(o,u){if(o==null)return{};var f=pt(Ip(o),function(m){return[m]});return u=ke(u),Ny(o,f,function(m,w){return u(m,w[0])})}function dD(o,u,f){u=Xi(u,o);var m=-1,w=u.length;for(w||(w=1,o=t);++m<w;){var b=o==null?t:o[Kr(u[m])];b===t&&(m=w,b=f),o=pi(b)?b.call(o):b}return o}function pD(o,u,f){return o==null?o:Ku(o,u,f)}function gD(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:Ku(o,u,f,m)}var jv=rv(cn),Wv=rv(Wn);function mD(o,u,f){var m=je(o),w=m||es(o)||_a(o);if(u=ke(u,4),f==null){var b=o&&o.constructor;w?f=m?new b:[]:Vt(o)?f=pi(b)?da(ch(o)):{}:f={}}return(w?an:qr)(o,function(k,L,B){return u(f,k,L,B)}),f}function _D(o,u){return o==null?!0:pp(o,u)}function yD(o,u,f){return o==null?o:By(o,u,_p(f))}function vD(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:By(o,u,_p(f),m)}function ya(o){return o==null?[]:Yt(o,cn(o))}function wD(o){return o==null?[]:Yt(o,Wn(o))}function ED(o,u,f){return f===t&&(f=u,u=t),f!==t&&(f=_r(f),f=f===f?f:0),u!==t&&(u=_r(u),u=u===u?u:0),Xs(_r(o),u,f)}function ID(o,u,f){return u=gi(u),f===t?(f=u,u=0):f=gi(f),o=_r(o),PP(o,u,f)}function TD(o,u,f){if(f&&typeof f!="boolean"&&Vn(o,u,f)&&(u=f=t),f===t&&(typeof u=="boolean"?(f=u,u=t):typeof o=="boolean"&&(f=o,o=t)),o===t&&u===t?(o=0,u=1):(o=gi(o),u===t?(u=o,o=0):u=gi(u)),o>u){var m=o;o=u,u=m}if(f||o%1||u%1){var w=my();return wn(o+w*(u-o+Hd("1e-"+((w+"").length-1))),u)}return hp(o,u)}var bD=ga(function(o,u,f){return u=u.toLowerCase(),o+(f?Gv(u):u)});function Gv(o){return Fp(ht(o).toLowerCase())}function Hv(o){return o=ht(o),o&&o.replace(Iu,Vu).replace(jd,"")}function AD(o,u,f){o=ht(o),u=Xn(u);var m=o.length;f=f===t?m:Xs(Ge(f),0,m);var w=f;return f-=u.length,f>=0&&o.slice(f,w)==u}function SD(o){return o=ht(o),o&&wu.test(o)?o.replace(Fi,gR):o}function RD(o){return o=ht(o),o&&xl.test(o)?o.replace(en,"\\$&"):o}var PD=ga(function(o,u,f){return o+(f?"-":"")+u.toLowerCase()}),CD=ga(function(o,u,f){return o+(f?" ":"")+u.toLowerCase()}),xD=Yy("toLowerCase");function DD(o,u,f){o=ht(o),u=Ge(u);var m=u?ua(o):0;if(!u||m>=u)return o;var w=(u-m)/2;return Sh(dh(w),f)+o+Sh(fh(w),f)}function kD(o,u,f){o=ht(o),u=Ge(u);var m=u?ua(o):0;return u&&m<u?o+Sh(u-m,f):o}function OD(o,u,f){o=ht(o),u=Ge(u);var m=u?ua(o):0;return u&&m<u?Sh(u-m,f)+o:o}function VD(o,u,f){return f||u==null?u=0:u&&(u=+u),$R(ht(o).replace(ri,""),u||0)}function ND(o,u,f){return(f?Vn(o,u,f):u===t)?u=1:u=Ge(u),fp(ht(o),u)}function LD(){var o=arguments,u=ht(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var MD=ga(function(o,u,f){return o+(f?"_":"")+u.toLowerCase()});function FD(o,u,f){return f&&typeof f!="number"&&Vn(o,u,f)&&(u=f=t),f=f===t?Dt:f>>>0,f?(o=ht(o),o&&(typeof u=="string"||u!=null&&!Np(u))&&(u=Xn(u),!u&&aa(o))?Zi(br(o),0,f):o.split(u,f)):[]}var UD=ga(function(o,u,f){return o+(f?" ":"")+Fp(u)});function BD(o,u,f){return o=ht(o),f=f==null?0:Xs(Ge(f),0,o.length),u=Xn(u),o.slice(f,f+u.length)==u}function $D(o,u,f){var m=E.templateSettings;f&&Vn(o,u,f)&&(u=t),o=ht(o),u=Fh({},u,m,iv);var w=Fh({},u.imports,m.imports,iv),b=cn(w),k=Yt(w,b),L,B,ee=0,te=u.interpolate||qs,se="__p += '",me=Yd((u.escape||qs).source+"|"+te.source+"|"+(te===Us?Dl:qs).source+"|"+(u.evaluate||qs).source+"|$","g"),Ae="//# sourceURL="+(mt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ea+"]")+`
`;o.replace(me,function(Ve,Ze,rt,er,Nn,tr){return rt||(rt=er),se+=o.slice(ee,tr).replace(Vl,mR),Ze&&(L=!0,se+=`' +
__e(`+Ze+`) +
'`),Nn&&(B=!0,se+=`';
`+Nn+`;
__p += '`),rt&&(se+=`' +
((__t = (`+rt+`)) == null ? '' : __t) +
'`),ee=tr+Ve.length,Ve}),se+=`';
`;var Oe=mt.call(u,"variable")&&u.variable;if(!Oe)se=`with (obj) {
`+se+`
}
`;else if(Bd.test(Oe))throw new qe(c);se=(B?se.replace(qo,""):se).replace(_u,"$1").replace(Sl,"$1;"),se="function("+(Oe||"obj")+`) {
`+(Oe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var Qe=Jv(function(){return lt(b,Ae+"return "+se).apply(t,k)});if(Qe.source=se,Vp(Qe))throw Qe;return Qe}function qD(o){return ht(o).toLowerCase()}function zD(o){return ht(o).toUpperCase()}function KD(o,u,f){if(o=ht(o),o&&(f||u===t))return Jt(o);if(!o||!(u=Xn(u)))return o;var m=br(o),w=br(u),b=ai(m,w),k=zn(m,w)+1;return Zi(m,b,k).join("")}function jD(o,u,f){if(o=ht(o),o&&(f||u===t))return o.slice(0,cy(o)+1);if(!o||!(u=Xn(u)))return o;var m=br(o),w=zn(m,br(u))+1;return Zi(m,0,w).join("")}function WD(o,u,f){if(o=ht(o),o&&(f||u===t))return o.replace(ri,"");if(!o||!(u=Xn(u)))return o;var m=br(o),w=ai(m,br(u));return Zi(m,w).join("")}function GD(o,u){var f=x,m=N;if(Vt(u)){var w="separator"in u?u.separator:w;f="length"in u?Ge(u.length):f,m="omission"in u?Xn(u.omission):m}o=ht(o);var b=o.length;if(aa(o)){var k=br(o);b=k.length}if(f>=b)return o;var L=f-ua(m);if(L<1)return m;var B=k?Zi(k,0,L).join(""):o.slice(0,L);if(w===t)return B+m;if(k&&(L+=B.length-L),Np(w)){if(o.slice(L).search(w)){var ee,te=B;for(w.global||(w=Yd(w.source,ht(Ko.exec(w))+"g")),w.lastIndex=0;ee=w.exec(te);)var se=ee.index;B=B.slice(0,se===t?L:se)}}else if(o.indexOf(Xn(w),L)!=L){var me=B.lastIndexOf(w);me>-1&&(B=B.slice(0,me))}return B+m}function HD(o){return o=ht(o),o&&vu.test(o)?o.replace(yu,TR):o}var QD=ga(function(o,u,f){return o+(f?" ":"")+u.toUpperCase()}),Fp=Yy("toUpperCase");function Qv(o,u,f){return o=ht(o),u=f?t:u,u===t?yR(o)?SR(o):eh(o):o.match(u)||[]}var Jv=Je(function(o,u){try{return kn(o,t,u)}catch(f){return Vp(f)?f:new qe(f)}}),JD=fi(function(o,u){return an(u,function(f){f=Kr(f),li(o,f,kp(o[f],o))}),o});function YD(o){var u=o==null?0:o.length,f=ke();return o=u?pt(o,function(m){if(typeof m[1]!="function")throw new fr(a);return[f(m[0]),m[1]]}):[],Je(function(m){for(var w=-1;++w<u;){var b=o[w];if(kn(b[0],this,m))return kn(b[1],this,m)}})}function XD(o){return TP(pr(o,_))}function Up(o){return function(){return o}}function ZD(o,u){return o==null||o!==o?u:o}var ek=Zy(),tk=Zy(!0);function Gn(o){return o}function Bp(o){return Cy(typeof o=="function"?o:pr(o,_))}function nk(o){return Dy(pr(o,_))}function rk(o,u){return ky(o,pr(u,_))}var ik=Je(function(o,u){return function(f){return qu(f,o,u)}}),sk=Je(function(o,u){return function(f){return qu(o,f,u)}});function $p(o,u,f){var m=cn(u),w=vh(u,m);f==null&&!(Vt(u)&&(w.length||!m.length))&&(f=u,u=o,o=this,w=vh(u,cn(u)));var b=!(Vt(f)&&"chain"in f)||!!f.chain,k=pi(o);return an(w,function(L){var B=u[L];o[L]=B,k&&(o.prototype[L]=function(){var ee=this.__chain__;if(b||ee){var te=o(this.__wrapped__),se=te.__actions__=Kn(this.__actions__);return se.push({func:B,args:arguments,thisArg:o}),te.__chain__=ee,te}return B.apply(o,Tr([this.value()],arguments))})}),o}function ok(){return Qt._===this&&(Qt._=kR),this}function qp(){}function ak(o){return o=Ge(o),Je(function(u){return Oy(u,o)})}var uk=vp(pt),ck=vp(Ou),lk=vp(sa);function Yv(o){return Sp(o)?g(Kr(o)):BP(o)}function hk(o){return function(u){return o==null?t:Zs(o,u)}}var fk=tv(),dk=tv(!0);function zp(){return[]}function Kp(){return!1}function pk(){return{}}function gk(){return""}function mk(){return!0}function _k(o,u){if(o=Ge(o),o<1||o>$e)return[];var f=Dt,m=wn(o,Dt);u=ke(u),o-=Dt;for(var w=he(m,u);++f<o;)u(f);return w}function yk(o){return je(o)?pt(o,Kr):Zn(o)?[o]:Kn(_v(ht(o)))}function vk(o){var u=++xR;return ht(o)+u}var wk=Ah(function(o,u){return o+u},0),Ek=wp("ceil"),Ik=Ah(function(o,u){return o/u},1),Tk=wp("floor");function bk(o){return o&&o.length?yh(o,Gn,sp):t}function Ak(o,u){return o&&o.length?yh(o,ke(u,2),sp):t}function Sk(o){return l(o,Gn)}function Rk(o,u){return l(o,ke(u,2))}function Pk(o){return o&&o.length?yh(o,Gn,cp):t}function Ck(o,u){return o&&o.length?yh(o,ke(u,2),cp):t}var xk=Ah(function(o,u){return o*u},1),Dk=wp("round"),kk=Ah(function(o,u){return o-u},0);function Ok(o){return o&&o.length?G(o,Gn):0}function Vk(o,u){return o&&o.length?G(o,ke(u,2)):0}return E.after=nx,E.ary=Pv,E.assign=zx,E.assignIn=qv,E.assignInWith=Fh,E.assignWith=Kx,E.at=jx,E.before=Cv,E.bind=kp,E.bindAll=JD,E.bindKey=xv,E.castArray=px,E.chain=Av,E.chunk=TC,E.compact=bC,E.concat=AC,E.cond=YD,E.conforms=XD,E.constant=Up,E.countBy=O1,E.create=Wx,E.curry=Dv,E.curryRight=kv,E.debounce=Ov,E.defaults=Gx,E.defaultsDeep=Hx,E.defer=rx,E.delay=ix,E.difference=SC,E.differenceBy=RC,E.differenceWith=PC,E.drop=CC,E.dropRight=xC,E.dropRightWhile=DC,E.dropWhile=kC,E.fill=OC,E.filter=N1,E.flatMap=F1,E.flatMapDeep=U1,E.flatMapDepth=B1,E.flatten=Ev,E.flattenDeep=VC,E.flattenDepth=NC,E.flip=sx,E.flow=ek,E.flowRight=tk,E.fromPairs=LC,E.functions=tD,E.functionsIn=nD,E.groupBy=$1,E.initial=FC,E.intersection=UC,E.intersectionBy=BC,E.intersectionWith=$C,E.invert=iD,E.invertBy=sD,E.invokeMap=z1,E.iteratee=Bp,E.keyBy=K1,E.keys=cn,E.keysIn=Wn,E.map=kh,E.mapKeys=aD,E.mapValues=uD,E.matches=nk,E.matchesProperty=rk,E.memoize=Vh,E.merge=cD,E.mergeWith=zv,E.method=ik,E.methodOf=sk,E.mixin=$p,E.negate=Nh,E.nthArg=ak,E.omit=lD,E.omitBy=hD,E.once=ox,E.orderBy=j1,E.over=uk,E.overArgs=ax,E.overEvery=ck,E.overSome=lk,E.partial=Op,E.partialRight=Vv,E.partition=W1,E.pick=fD,E.pickBy=Kv,E.property=Yv,E.propertyOf=hk,E.pull=jC,E.pullAll=Tv,E.pullAllBy=WC,E.pullAllWith=GC,E.pullAt=HC,E.range=fk,E.rangeRight=dk,E.rearg=ux,E.reject=Q1,E.remove=QC,E.rest=cx,E.reverse=xp,E.sampleSize=Y1,E.set=pD,E.setWith=gD,E.shuffle=X1,E.slice=JC,E.sortBy=tx,E.sortedUniq=r1,E.sortedUniqBy=i1,E.split=FD,E.spread=lx,E.tail=s1,E.take=o1,E.takeRight=a1,E.takeRightWhile=u1,E.takeWhile=c1,E.tap=b1,E.throttle=hx,E.thru=Dh,E.toArray=Uv,E.toPairs=jv,E.toPairsIn=Wv,E.toPath=yk,E.toPlainObject=$v,E.transform=mD,E.unary=fx,E.union=l1,E.unionBy=h1,E.unionWith=f1,E.uniq=d1,E.uniqBy=p1,E.uniqWith=g1,E.unset=_D,E.unzip=Dp,E.unzipWith=bv,E.update=yD,E.updateWith=vD,E.values=ya,E.valuesIn=wD,E.without=m1,E.words=Qv,E.wrap=dx,E.xor=_1,E.xorBy=y1,E.xorWith=v1,E.zip=w1,E.zipObject=E1,E.zipObjectDeep=I1,E.zipWith=T1,E.entries=jv,E.entriesIn=Wv,E.extend=qv,E.extendWith=Fh,$p(E,E),E.add=wk,E.attempt=Jv,E.camelCase=bD,E.capitalize=Gv,E.ceil=Ek,E.clamp=ED,E.clone=gx,E.cloneDeep=_x,E.cloneDeepWith=yx,E.cloneWith=mx,E.conformsTo=vx,E.deburr=Hv,E.defaultTo=ZD,E.divide=Ik,E.endsWith=AD,E.eq=Sr,E.escape=SD,E.escapeRegExp=RD,E.every=V1,E.find=L1,E.findIndex=vv,E.findKey=Qx,E.findLast=M1,E.findLastIndex=wv,E.findLastKey=Jx,E.floor=Tk,E.forEach=Sv,E.forEachRight=Rv,E.forIn=Yx,E.forInRight=Xx,E.forOwn=Zx,E.forOwnRight=eD,E.get=Lp,E.gt=wx,E.gte=Ex,E.has=rD,E.hasIn=Mp,E.head=Iv,E.identity=Gn,E.includes=q1,E.indexOf=MC,E.inRange=ID,E.invoke=oD,E.isArguments=no,E.isArray=je,E.isArrayBuffer=Ix,E.isArrayLike=jn,E.isArrayLikeObject=qt,E.isBoolean=Tx,E.isBuffer=es,E.isDate=bx,E.isElement=Ax,E.isEmpty=Sx,E.isEqual=Rx,E.isEqualWith=Px,E.isError=Vp,E.isFinite=Cx,E.isFunction=pi,E.isInteger=Nv,E.isLength=Lh,E.isMap=Lv,E.isMatch=xx,E.isMatchWith=Dx,E.isNaN=kx,E.isNative=Ox,E.isNil=Nx,E.isNull=Vx,E.isNumber=Mv,E.isObject=Vt,E.isObjectLike=Ut,E.isPlainObject=Hu,E.isRegExp=Np,E.isSafeInteger=Lx,E.isSet=Fv,E.isString=Mh,E.isSymbol=Zn,E.isTypedArray=_a,E.isUndefined=Mx,E.isWeakMap=Fx,E.isWeakSet=Ux,E.join=qC,E.kebabCase=PD,E.last=mr,E.lastIndexOf=zC,E.lowerCase=CD,E.lowerFirst=xD,E.lt=Bx,E.lte=$x,E.max=bk,E.maxBy=Ak,E.mean=Sk,E.meanBy=Rk,E.min=Pk,E.minBy=Ck,E.stubArray=zp,E.stubFalse=Kp,E.stubObject=pk,E.stubString=gk,E.stubTrue=mk,E.multiply=xk,E.nth=KC,E.noConflict=ok,E.noop=qp,E.now=Oh,E.pad=DD,E.padEnd=kD,E.padStart=OD,E.parseInt=VD,E.random=TD,E.reduce=G1,E.reduceRight=H1,E.repeat=ND,E.replace=LD,E.result=dD,E.round=Dk,E.runInContext=U,E.sample=J1,E.size=Z1,E.snakeCase=MD,E.some=ex,E.sortedIndex=YC,E.sortedIndexBy=XC,E.sortedIndexOf=ZC,E.sortedLastIndex=e1,E.sortedLastIndexBy=t1,E.sortedLastIndexOf=n1,E.startCase=UD,E.startsWith=BD,E.subtract=kk,E.sum=Ok,E.sumBy=Vk,E.template=$D,E.times=_k,E.toFinite=gi,E.toInteger=Ge,E.toLength=Bv,E.toLower=qD,E.toNumber=_r,E.toSafeInteger=qx,E.toString=ht,E.toUpper=zD,E.trim=KD,E.trimEnd=jD,E.trimStart=WD,E.truncate=GD,E.unescape=HD,E.uniqueId=vk,E.upperCase=QD,E.upperFirst=Fp,E.each=Sv,E.eachRight=Rv,E.first=Iv,$p(E,function(){var o={};return qr(E,function(u,f){mt.call(E.prototype,f)||(o[f]=u)}),o}(),{chain:!1}),E.VERSION=r,an(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){E[o].placeholder=E}),an(["drop","take"],function(o,u){tt.prototype[o]=function(f){f=f===t?1:nn(Ge(f),0);var m=this.__filtered__&&!u?new tt(this):this.clone();return m.__filtered__?m.__takeCount__=wn(f,m.__takeCount__):m.__views__.push({size:wn(f,Dt),type:o+(m.__dir__<0?"Right":"")}),m},tt.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),an(["filter","map","takeWhile"],function(o,u){var f=u+1,m=f==fe||f==et;tt.prototype[o]=function(w){var b=this.clone();return b.__iteratees__.push({iteratee:ke(w,3),type:f}),b.__filtered__=b.__filtered__||m,b}}),an(["head","last"],function(o,u){var f="take"+(u?"Right":"");tt.prototype[o]=function(){return this[f](1).value()[0]}}),an(["initial","tail"],function(o,u){var f="drop"+(u?"":"Right");tt.prototype[o]=function(){return this.__filtered__?new tt(this):this[f](1)}}),tt.prototype.compact=function(){return this.filter(Gn)},tt.prototype.find=function(o){return this.filter(o).head()},tt.prototype.findLast=function(o){return this.reverse().find(o)},tt.prototype.invokeMap=Je(function(o,u){return typeof o=="function"?new tt(this):this.map(function(f){return qu(f,o,u)})}),tt.prototype.reject=function(o){return this.filter(Nh(ke(o)))},tt.prototype.slice=function(o,u){o=Ge(o);var f=this;return f.__filtered__&&(o>0||u<0)?new tt(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),u!==t&&(u=Ge(u),f=u<0?f.dropRight(-u):f.take(u-o)),f)},tt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},tt.prototype.toArray=function(){return this.take(Dt)},qr(tt.prototype,function(o,u){var f=/^(?:filter|find|map|reject)|While$/.test(u),m=/^(?:head|last)$/.test(u),w=E[m?"take"+(u=="last"?"Right":""):u],b=m||/^find/.test(u);!w||(E.prototype[u]=function(){var k=this.__wrapped__,L=m?[1]:arguments,B=k instanceof tt,ee=L[0],te=B||je(k),se=function(Ze){var rt=w.apply(E,Tr([Ze],L));return m&&me?rt[0]:rt};te&&f&&typeof ee=="function"&&ee.length!=1&&(B=te=!1);var me=this.__chain__,Ae=!!this.__actions__.length,Oe=b&&!me,Qe=B&&!Ae;if(!b&&te){k=Qe?k:new tt(this);var Ve=o.apply(k,L);return Ve.__actions__.push({func:Dh,args:[se],thisArg:t}),new dr(Ve,me)}return Oe&&Qe?o.apply(this,L):(Ve=this.thru(se),Oe?m?Ve.value()[0]:Ve.value():Ve)})}),an(["pop","push","shift","sort","splice","unshift"],function(o){var u=rh[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",m=/^(?:pop|shift)$/.test(o);E.prototype[o]=function(){var w=arguments;if(m&&!this.__chain__){var b=this.value();return u.apply(je(b)?b:[],w)}return this[f](function(k){return u.apply(je(k)?k:[],w)})}}),qr(tt.prototype,function(o,u){var f=E[u];if(f){var m=f.name+"";mt.call(fa,m)||(fa[m]=[]),fa[m].push({name:u,func:f})}}),fa[bh(t,Q).name]=[{name:"wrapper",func:t}],tt.prototype.clone=HR,tt.prototype.reverse=QR,tt.prototype.value=JR,E.prototype.at=A1,E.prototype.chain=S1,E.prototype.commit=R1,E.prototype.next=P1,E.prototype.plant=x1,E.prototype.reverse=D1,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=k1,E.prototype.first=E.prototype.head,Nu&&(E.prototype[Nu]=C1),E},ca=RR();$r?(($r.exports=ca)._=ca,ji._=ca):Qt._=ca}).call(ic)})(Cm,Cm.exports);var E$=Cm.exports;let jr=null,ct=null,sc=null;const BS=ZN("mainStore",{state:()=>({transactionId:null,currentSheetId:null,userLedger:null,currentSheet:null,config:bg.make(),unsubscribeUserLedger:null,unsubscribeCurrentSheet:null}),getters:{isSheet(){return this.currentSheet!==null},lastCurrency(){var n;return this.currentSheet&&((n=this.currentSheetTransactions)==null?void 0:n.length)?this.currentSheet.transactions[this.currentSheetTransactions[0]].currency:"USD"},user(){var n,e,t;return rc.makeUser((n=ct==null?void 0:ct.currentUser)==null?void 0:n.uid,(e=this.userLedger)==null?void 0:e.name,(t=ct==null?void 0:ct.currentUser)==null?void 0:t.email)},userLedgerFriends(){return!this.userLedger||!this.userLedger.friends?[]:Object.entries(this.userLedger.friends).sort(([,n],[,e])=>rc.compare(n,e)).map(([n])=>n)},userLedgerSheets(){return!this.userLedger||!this.userLedger.sheets?[]:Object.entries(this.userLedger.sheets).sort(([,n],[,e])=>n.timestamp-e.timestamp).map(([n])=>n)},currentSheetPeople(){return!this.currentSheet||!this.currentSheet.people?[]:Object.entries(this.currentSheet.people).sort(([,n],[,e])=>n.timestamp-e.timestamp).map(([n])=>n)},currentSheetTransactions(){return!this.currentSheet||!this.currentSheet.transactions?[]:Object.entries(this.currentSheet.transactions).sort(([,n],[,e])=>e.timestamp-n.timestamp).map(([n])=>n)},currentSheetResults(){return!this.currentSheet||!this.currentSheet.transactions||!this.currentSheetPeople?[]:US.make(this.currentSheet.transactions,this.currentSheetPeople.length||0)}},actions:{payerId(n){return this.personIdx2Id(this.currentSheet.transactions[n].payer)},personId2Idx(n){return this.currentSheetPeople.indexOf(n)},personIdx2Id(n){return this.currentSheetPeople[n]},async addTransaction(n,e=null){return await this.autoBatch(async(t,r)=>{await this.removeTransaction(this.transactionId,r);const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t.id}`]:t})},n,e)},async removeTransaction(n,e=null){if(!!n)return await this.autoBatch(async(t,r)=>{const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t}`]:Yh()})},n,e)},async setPeople(n,e=null){if(!this.currentSheet)throw new Error("Current sheet should be set here.");const t=Object.fromEntries(Object.keys(n).filter(i=>this.isUserOrFriend(i)).map(i=>[i,"owner"])),r=Object.keys(t).filter(i=>!(i in this.currentSheet.users));return await this.autoBatch(async(i,s,a,c)=>{const h={name:this.currentSheet.name,timestamp:this.currentSheet.timestamp};a.forEach(p=>{const _=this.getUserLedgerRef(p);c.update(_,{[`sheets.${this.currentSheet.id}`]:h})});const d=this.getSheetRef(this.currentSheet.id);c.update(d,{users:s}),c.update(d,{people:i})},n,t,r,e)},getEditableTransaction(n=this.transactionId){if(this.currentSheet&&n in this.currentSheet.transactions){const e=E$.cloneDeep(this.currentSheet.transactions[n]);return S0.updatePeople(e,this.currentSheetPeople.length),e}return S0.make(this.currentSheetPeople,this.lastCurrency,ct.currentUser.uid,this.currentSheet.people)},async setSheetName(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`sheets.${this.currentSheet.id}.name`]:t})},n,e)},getName(n,e=null){var t;return n===this.user.id?rc.username(this.user):n in this.userLedger.friends?rc.username(this.userLedger.friends[n]):(e===null&&(e=(t=this.currentSheet)==null?void 0:t.people),rc.username(e[n]))},isCaption(n,e=null){var t,r;return n===this.user.id?!!this.user.name:n in((t=this.userLedger)==null?void 0:t.friends)?!!this.userLedger.friends[n].name:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),!!e[n].name)},getEmail(n,e=null){var t,r;return n===this.user.id?this.user.email:n in((t=this.userLedger)==null?void 0:t.friends)?this.userLedger.friends[n].email:(e===null&&(e=(r=this.currentSheet)==null?void 0:r.people),e[n].email)},isPersonFullyRemovable(n){if(n===this.user.id)return!1;if(!this.currentSheet)return!0;if(n in this.currentSheet.users)return!1;const e=this.currentSheetPeople.indexOf(n);return e===-1?!0:Object.values(this.currentSheet.transactions).every(t=>e>=t.debts.length)},async addSheetFromNameAndPeople(n,e,t=null){const r=Object.fromEntries(Object.keys(e).filter(s=>this.isUserOrFriend(s)).map(s=>[s,"owner"])),i=v$.make(n,e,r);return await this.autoBatch(async(s,a)=>{await this.addSheet(s,a)},i,t),i},async removeSheet(n,e,t=null){return await this.autoBatch(async(r,i,s)=>{const a=this.getSheetRef(r);i<=1?s.delete(a):(s.update(a,{[`users.${ct.currentUser.uid}`]:Yh()}),s.update(a,{[`people.${ct.currentUser.uid}.active`]:!1}));const c=this.getUserLedgerRef();s.update(c,{[`sheets.${r}`]:Yh()})},n,e,t)},async nUsers(n){const e=this.getSheetRef(n),t=await WU(e);if(!t.exists)throw new Error(`Document ${n} does not exist!`);return Object.keys(t.data().users).length},async addSheet(n,e=null){return await this.autoBatch(async(t,r)=>{const i={name:t.name,timestamp:t.timestamp};Object.keys(t.users).forEach(a=>{const c=this.getUserLedgerRef(a);r.update(c,{[`sheets.${t.id}`]:i})});const s=this.getSheetRef(t.id);r.set(s,t)},n,e)},isUserOrFriend(n){return n===ct.currentUser.uid||n in this.userLedger.friends},async removeFriend(n,e=null){if(!(n in this.userLedger.friends))throw new Error("This user is not your friend!");return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${t}`]:Yh()})},n,e)},async setFriendName(n,e,t=null){if(e in this.userLedger.friends)return await this.autoBatch(async(r,i,s)=>{const a=this.getUserLedgerRef();s.update(a,{[`friends.${i}.name`]:r})},n,e,t)},async addFriend(n,e=null){if(n.id in this.userLedger.friends)throw new Error("This user is already a friend!");if(n.id===ct.currentUser.uid)throw new Error("You cannot add youself as friend!");return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{[`friends.${t.id}`]:t})},n,e)},isFirebaseReady(){return jr!==null},isReady(){return this.isFirebaseReady()&&(ct==null?void 0:ct.currentUser)&&!!this.userLedger},async setUsername(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getUserLedgerRef();r.update(i,{name:t})},n,e)},async init(){if(jr===null&&await this.initFirebase(),jr===null)return!1;await(ct==null?void 0:ct.authStateReady()),(ct==null?void 0:ct.currentUser)&&!this.userLedger&&await this.subscribeUserLedger(),this.currentSheetId&&await this.subscribeCurrentSheet(this.currentSheetId)},setConfig(n){if(!bg.isCompatible(n))throw new Error("fbConfig not compatible!");this.config=n},async initFirebase(){if(!!bg.isCompatible(this.config)){if(await this.clearFirebase(),EM().length>0)throw new Error("There should not be firebase instances active");jr=HT(this.config),ct=h$(jr),sc=OU(jr,{localCache:QU({tabManager:ZU()})})}},async clearFirebase(){await this.logout(),sc=null,jr!==null&&await IM(jr),ct=null,jr=null},async logout(){this.clearUserLedger(),ct!=null&&ct.currentUser&&await(ct==null?void 0:ct.signOut())},async login(n,e){this.logout(),jr===null&&await this.initFirebase(),await XB(ct,n,e)},async register(n,e){this.logout(),this.isFirebaseSet||await this.initFirebase(),await YB(ct,n,e);const t=this.getUserLedgerRef();await GU(t,w$.make())},clearUserLedger(){var n;(n=this.unsubscribeUserLedger)==null||n.call(this),this.userLedger=null},async subscribeUserLedger(){this.clearUserLedger();let n=!0;await new Promise(e=>{const t=this.getUserLedgerRef();this.unsubscribeUserLedger=s0(t,r=>{r.exists()&&(this.userLedger=r.data()),n&&(n=!1,e())})})},clearCurrentSheet(){var n;(n=this.unsubscribeCurrentSheet)==null||n.call(this),this.currentSheet=null,this.currentSheetId=null},async subscribeCurrentSheet(n){this.clearCurrentSheet();let e=!0;await new Promise(t=>{const r=this.getSheetRef(n);this.unsubscribeCurrentSheet=s0(r,async i=>{i.exists()&&(this.currentSheet=i.data()),await this.updateFriends(),e&&(e=!1,t())})}),this.currentSheetId=this.currentSheet.id||null},async updateFriends(n=null){const e=Object.keys(this.currentSheet.users).filter(r=>!(r in this.userLedger.friends)&&r!==ct.currentUser.uid);if(!e.length)return;const t=e.map(r=>{var i,s;return{id:r,name:(i=this.currentSheet.people[r])==null?void 0:i.name,email:(s=this.currentSheet.people[r])==null?void 0:s.email}});await this.autoBatch(async(r,i)=>{for(const s of r)await this.addFriend(s,i)},t,n)},getUserLedgerRef(n=null){return n||(n=ct.currentUser.uid),n0(sc,"users",n)},getSheetRef(n){return n0(sc,"sheets",n)},async autoBatch(n,...e){const t=!e[e.length-1];t&&(e[e.length-1]=tB(sc));const r=await n.apply(this,e);return t&&await e[e.length-1].commit(),r}},persist:{key:"sessionData",pick:["config","currentSheetId","transactionId"]}}),I$={__name:"App",setup(n){const e=BS();return ll(async()=>{await e.cleanupFb()}),(t,r)=>{const i=jO("router-view");return Sf(),Rf(i)}}};const T$=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,b$=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,A$=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function S$(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){R$(n);return}return e}function R$(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function P$(n,e={}){if(typeof n!="string")return n;const t=n.trim();if(n[0]==='"'&&n.endsWith('"')&&!n.includes("\\"))return t.slice(1,-1);if(t.length<=9){const r=t.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!A$.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(T$.test(n)||b$.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,S$)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function C$(n,e){if(n==null)return;let t=n;for(let r=0;r<e.length;r++){if(t==null||t[e[r]]==null)return;t=t[e[r]]}return t}function ry(n,e,t){if(t.length===0)return e;const r=t[0];return t.length>1&&(e=ry(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,r)?Number.isInteger(Number(t[1]))?[]:{}:n[r],e,Array.prototype.slice.call(t,1))),Number.isInteger(Number(r))&&Array.isArray(n)?n.slice()[r]:Object.assign({},n,{[r]:e})}function $S(n,e){if(n==null||e.length===0)return n;if(e.length===1){if(n==null)return n;if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(e[0],1);const t={};for(const r in n)t[r]=n[r];return delete t[e[0]],t}if(n[e[0]]==null){if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const t={};for(const r in n)t[r]=n[r];return t}return ry(n,$S(n[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function qS(n,e){return e.map(t=>t.split(".")).map(t=>[t,C$(n,t)]).filter(t=>t[1]!==void 0).reduce((t,r)=>ry(t,r[1],r[0]),{})}function zS(n,e){return e.map(t=>t.split(".")).reduce((t,r)=>$S(t,r),n)}function R0(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a,beforeHydrate:c,afterHydrate:h},d,p=!0){try{p&&(c==null||c(d));const _=e.getItem(r);if(_){const v=t.deserialize(_),I=s?qS(v,s):v,O=a?zS(I,a):I;n.$patch(O)}p&&(h==null||h(d))}catch(_){i&&console.error("[pinia-plugin-persistedstate]",_)}}function P0(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a}){try{const c=s?qS(n,s):n,h=a?zS(c,a):c,d=t.serialize(h);e.setItem(r,d)}catch(c){i&&console.error("[pinia-plugin-persistedstate]",c)}}function x$(n,e,t){const{pinia:r,store:i,options:{persist:s=t}}=n;if(!s)return;if(!(i.$id in r.state.value)){const h=r._s.get(i.$id.replace("__hot:",""));h&&Promise.resolve().then(()=>h.$persist());return}const c=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(e);i.$hydrate=({runHooks:h=!0}={})=>{c.forEach(d=>{R0(i,d,n,h)})},i.$persist=()=>{c.forEach(h=>{P0(i.$state,h)})},c.forEach(h=>{R0(i,h,n),i.$subscribe((d,p)=>P0(p,h),{detached:!0})})}function D$(n={}){return function(e){var t;x$(e,r=>{var i,s,a,c,h,d,p;return{key:(n.key?n.key:_=>_)((i=r.key)!=null?i:e.store.$id),debug:(a=(s=r.debug)!=null?s:n.debug)!=null?a:!1,serializer:(h=(c=r.serializer)!=null?c:n.serializer)!=null?h:{serialize:_=>JSON.stringify(_),deserialize:_=>P$(_)},storage:(p=(d=r.storage)!=null?d:n.storage)!=null?p:window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}},(t=n.auto)!=null?t:!1)}}var k$=D$(),Ag=()=>{const n=GN();return n.use(k$),n};/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Na=typeof document!="undefined";function KS(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function O$(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&KS(n.default)}const _t=Object.assign;function Sg(n,e){const t={};for(const r in e){const i=e[r];t[r]=Vr(i)?i.map(n):n(i)}return t}const Oc=()=>{},Vr=Array.isArray,jS=/#/g,V$=/&/g,N$=/\//g,L$=/=/g,M$=/\?/g,WS=/\+/g,F$=/%5B/g,U$=/%5D/g,GS=/%5E/g,B$=/%60/g,HS=/%7B/g,$$=/%7C/g,QS=/%7D/g,q$=/%20/g;function iy(n){return encodeURI(""+n).replace($$,"|").replace(F$,"[").replace(U$,"]")}function z$(n){return iy(n).replace(HS,"{").replace(QS,"}").replace(GS,"^")}function xm(n){return iy(n).replace(WS,"%2B").replace(q$,"+").replace(jS,"%23").replace(V$,"%26").replace(B$,"`").replace(HS,"{").replace(QS,"}").replace(GS,"^")}function K$(n){return xm(n).replace(L$,"%3D")}function j$(n){return iy(n).replace(jS,"%23").replace(M$,"%3F")}function W$(n){return n==null?"":j$(n).replace(N$,"%2F")}function sl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const G$=/\/$/,H$=n=>n.replace(G$,"");function Rg(n,e,t="/"){let r,i={},s="",a="";const c=e.indexOf("#");let h=e.indexOf("?");return c<h&&c>=0&&(h=-1),h>-1&&(r=e.slice(0,h),s=e.slice(h+1,c>-1?c:e.length),i=n(s)),c>-1&&(r=r||e.slice(0,c),a=e.slice(c,e.length)),r=X$(r!=null?r:e,t),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:sl(a)}}function Q$(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function C0(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function J$(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&uu(e.matched[r],t.matched[i])&&JS(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function uu(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function JS(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!Y$(n[t],e[t]))return!1;return!0}function Y$(n,e){return Vr(n)?x0(n,e):Vr(e)?x0(e,n):n===e}function x0(n,e){return Vr(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function X$(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,a,c;for(a=0;a<r.length;a++)if(c=r[a],c!==".")if(c==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(a).join("/")}const ss={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ol;(function(n){n.pop="pop",n.push="push"})(ol||(ol={}));var Vc;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Vc||(Vc={}));function Z$(n){if(!n)if(Na){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),H$(n)}const eq=/^[^#]+#/;function tq(n,e){return n.replace(eq,"#")+e}function nq(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Nd=()=>({left:window.scrollX,top:window.scrollY});function rq(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=nq(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function D0(n,e){return(history.state?history.state.position-e:-1)+n}const Dm=new Map;function iq(n,e){Dm.set(n,e)}function sq(n){const e=Dm.get(n);return Dm.delete(n),e}let oq=()=>location.protocol+"//"+location.host;function YS(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let c=i.includes(n.slice(s))?n.slice(s).length:1,h=i.slice(c);return h[0]!=="/"&&(h="/"+h),C0(h,"")}return C0(t,n)+r+i}function aq(n,e,t,r){let i=[],s=[],a=null;const c=({state:v})=>{const I=YS(n,location),O=t.value,M=e.value;let F=0;if(v){if(t.value=I,e.value=v,a&&a===O){a=null;return}F=M?v.position-M.position:0}else r(I);i.forEach(Q=>{Q(t.value,O,{delta:F,type:ol.pop,direction:F?F>0?Vc.forward:Vc.back:Vc.unknown})})};function h(){a=t.value}function d(v){i.push(v);const I=()=>{const O=i.indexOf(v);O>-1&&i.splice(O,1)};return s.push(I),I}function p(){const{history:v}=window;!v.state||v.replaceState(_t({},v.state,{scroll:Nd()}),"")}function _(){for(const v of s)v();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:h,listen:d,destroy:_}}function k0(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?Nd():null}}function uq(n){const{history:e,location:t}=window,r={value:YS(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(h,d,p){const _=n.indexOf("#"),v=_>-1?(t.host&&document.querySelector("base")?n:n.slice(_))+h:oq()+n+h;try{e[p?"replaceState":"pushState"](d,"",v),i.value=d}catch(I){console.error(I),t[p?"replace":"assign"](v)}}function a(h,d){const p=_t({},e.state,k0(i.value.back,h,i.value.forward,!0),d,{position:i.value.position});s(h,p,!0),r.value=h}function c(h,d){const p=_t({},i.value,e.state,{forward:h,scroll:Nd()});s(p.current,p,!0);const _=_t({},k0(r.value,h,null),{position:p.position+1},d);s(h,_,!1),r.value=h}return{location:r,state:i,push:c,replace:a}}function cq(n){n=Z$(n);const e=uq(n),t=aq(n,e.state,e.location,e.replace);function r(s,a=!0){a||t.pauseListeners(),history.go(s)}const i=_t({location:"",base:n,go:r,createHref:tq.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function lq(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),cq(n)}function hq(n){return typeof n=="string"||n&&typeof n=="object"}function XS(n){return typeof n=="string"||typeof n=="symbol"}const ZS=Symbol("");var O0;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(O0||(O0={}));function cu(n,e){return _t(new Error,{type:n,[ZS]:!0},e)}function yi(n,e){return n instanceof Error&&ZS in n&&(e==null||!!(n.type&e))}const V0="[^/]+?",fq={sensitive:!1,strict:!1,start:!0,end:!0},dq=/[.+*?^${}()[\]/\\]/g;function pq(n,e){const t=_t({},fq,e),r=[];let i=t.start?"^":"";const s=[];for(const d of n){const p=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let _=0;_<d.length;_++){const v=d[_];let I=40+(t.sensitive?.25:0);if(v.type===0)_||(i+="/"),i+=v.value.replace(dq,"\\$&"),I+=40;else if(v.type===1){const{value:O,repeatable:M,optional:F,regexp:Q}=v;s.push({name:O,repeatable:M,optional:F});const z=Q||V0;if(z!==V0){I+=10;try{new RegExp(`(${z})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${O}" (${z}): `+W.message)}}let q=M?`((?:${z})(?:/(?:${z}))*)`:`(${z})`;_||(q=F&&d.length<2?`(?:/${q})`:"/"+q),F&&(q+="?"),i+=q,I+=20,F&&(I+=-8),M&&(I+=-20),z===".*"&&(I+=-50)}p.push(I)}r.push(p)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function c(d){const p=d.match(a),_={};if(!p)return null;for(let v=1;v<p.length;v++){const I=p[v]||"",O=s[v-1];_[O.name]=I&&O.repeatable?I.split("/"):I}return _}function h(d){let p="",_=!1;for(const v of n){(!_||!p.endsWith("/"))&&(p+="/"),_=!1;for(const I of v)if(I.type===0)p+=I.value;else if(I.type===1){const{value:O,repeatable:M,optional:F}=I,Q=O in d?d[O]:"";if(Vr(Q)&&!M)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const z=Vr(Q)?Q.join("/"):Q;if(!z)if(F)v.length<2&&(p.endsWith("/")?p=p.slice(0,-1):_=!0);else throw new Error(`Missing required param "${O}"`);p+=z}}return p||"/"}return{re:a,score:r,keys:s,parse:c,stringify:h}}function gq(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function eR(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=gq(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(N0(r))return 1;if(N0(i))return-1}return i.length-r.length}function N0(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const mq={type:0,value:""},_q=/[a-zA-Z0-9_]/;function yq(n){if(!n)return[[]];if(n==="/")return[[mq]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(I){throw new Error(`ERR (${t})/"${d}": ${I}`)}let t=0,r=t;const i=[];let s;function a(){s&&i.push(s),s=[]}let c=0,h,d="",p="";function _(){!d||(t===0?s.push({type:0,value:d}):t===1||t===2||t===3?(s.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:p,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=h}for(;c<n.length;){if(h=n[c++],h==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:h==="/"?(d&&_(),a()):h===":"?(_(),t=1):v();break;case 4:v(),t=r;break;case 1:h==="("?t=2:_q.test(h)?v():(_(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case 2:h===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+h:t=3:p+=h;break;case 3:_(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&c--,p="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${d}"`),_(),a(),i}function vq(n,e,t){const r=pq(yq(n.path),t),i=_t(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function wq(n,e){const t=[],r=new Map;e=U0({strict:!1,end:!0,sensitive:!1},e);function i(_){return r.get(_)}function s(_,v,I){const O=!I,M=M0(_);M.aliasOf=I&&I.record;const F=U0(e,_),Q=[M];if("alias"in _){const W=typeof _.alias=="string"?[_.alias]:_.alias;for(const Y of W)Q.push(M0(_t({},M,{components:I?I.record.components:M.components,path:Y,aliasOf:I?I.record:M})))}let z,q;for(const W of Q){const{path:Y}=W;if(v&&Y[0]!=="/"){const re=v.record.path,P=re[re.length-1]==="/"?"":"/";W.path=v.record.path+(Y&&P+Y)}if(z=vq(W,v,F),I?I.alias.push(z):(q=q||z,q!==z&&q.alias.push(z),O&&_.name&&!F0(z)&&a(_.name)),tR(z)&&h(z),M.children){const re=M.children;for(let P=0;P<re.length;P++)s(re[P],z,I&&I.children[P])}I=I||z}return q?()=>{a(q)}:Oc}function a(_){if(XS(_)){const v=r.get(_);v&&(r.delete(_),t.splice(t.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=t.indexOf(_);v>-1&&(t.splice(v,1),_.record.name&&r.delete(_.record.name),_.children.forEach(a),_.alias.forEach(a))}}function c(){return t}function h(_){const v=Tq(_,t);t.splice(v,0,_),_.record.name&&!F0(_)&&r.set(_.record.name,_)}function d(_,v){let I,O={},M,F;if("name"in _&&_.name){if(I=r.get(_.name),!I)throw cu(1,{location:_});F=I.record.name,O=_t(L0(v.params,I.keys.filter(q=>!q.optional).concat(I.parent?I.parent.keys.filter(q=>q.optional):[]).map(q=>q.name)),_.params&&L0(_.params,I.keys.map(q=>q.name))),M=I.stringify(O)}else if(_.path!=null)M=_.path,I=t.find(q=>q.re.test(M)),I&&(O=I.parse(M),F=I.record.name);else{if(I=v.name?r.get(v.name):t.find(q=>q.re.test(v.path)),!I)throw cu(1,{location:_,currentLocation:v});F=I.record.name,O=_t({},v.params,_.params),M=I.stringify(O)}const Q=[];let z=I;for(;z;)Q.unshift(z.record),z=z.parent;return{name:F,path:M,params:O,matched:Q,meta:Iq(Q)}}n.forEach(_=>s(_));function p(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:a,clearRoutes:p,getRoutes:c,getRecordMatcher:i}}function L0(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function M0(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Eq(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Eq(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function F0(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Iq(n){return n.reduce((e,t)=>_t(e,t.meta),{})}function U0(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function Tq(n,e){let t=0,r=e.length;for(;t!==r;){const s=t+r>>1;eR(n,e[s])<0?r=s:t=s+1}const i=bq(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function bq(n){let e=n;for(;e=e.parent;)if(tR(e)&&eR(n,e)===0)return e}function tR({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Aq(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(WS," "),a=s.indexOf("="),c=sl(a<0?s:s.slice(0,a)),h=a<0?null:sl(s.slice(a+1));if(c in e){let d=e[c];Vr(d)||(d=e[c]=[d]),d.push(h)}else e[c]=h}return e}function B0(n){let e="";for(let t in n){const r=n[t];if(t=K$(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Vr(r)?r.map(s=>s&&xm(s)):[r&&xm(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function Sq(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Vr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const Rq=Symbol(""),$0=Symbol(""),Ld=Symbol(""),nR=Symbol(""),km=Symbol("");function oc(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function fs(n,e,t,r,i,s=a=>a()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((c,h)=>{const d=v=>{v===!1?h(cu(4,{from:t,to:e})):v instanceof Error?h(v):hq(v)?h(cu(2,{from:e,to:v})):(a&&r.enterCallbacks[i]===a&&typeof v=="function"&&a.push(v),c())},p=s(()=>n.call(r&&r.instances[i],e,t,d));let _=Promise.resolve(p);n.length<3&&(_=_.then(d)),_.catch(v=>h(v))})}function Pg(n,e,t,r,i=s=>s()){const s=[];for(const a of n)for(const c in a.components){let h=a.components[c];if(!(e!=="beforeRouteEnter"&&!a.instances[c]))if(KS(h)){const p=(h.__vccOpts||h)[e];p&&s.push(fs(p,t,r,a,c,i))}else{let d=h();s.push(()=>d.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${c}" at "${a.path}"`);const _=O$(p)?p.default:p;a.mods[c]=p,a.components[c]=_;const I=(_.__vccOpts||_)[e];return I&&fs(I,t,r,a,c,i)()}))}}return s}function q0(n){const e=Dr(Ld),t=Dr(nR),r=Be(()=>{const h=mo(n.to);return e.resolve(h)}),i=Be(()=>{const{matched:h}=r.value,{length:d}=h,p=h[d-1],_=t.matched;if(!p||!_.length)return-1;const v=_.findIndex(uu.bind(null,p));if(v>-1)return v;const I=z0(h[d-2]);return d>1&&z0(p)===I&&_[_.length-1].path!==I?_.findIndex(uu.bind(null,h[d-2])):v}),s=Be(()=>i.value>-1&&Dq(t.params,r.value.params)),a=Be(()=>i.value>-1&&i.value===t.matched.length-1&&JS(t.params,r.value.params));function c(h={}){return xq(h)?e[mo(n.replace)?"replace":"push"](mo(n.to)).catch(Oc):Promise.resolve()}return{route:r,href:Be(()=>r.value.href),isActive:s,isExactActive:a,navigate:c}}const Pq=Ym({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:q0,setup(n,{slots:e}){const t=Mo(q0(n)),{options:r}=Dr(Ld),i=Be(()=>({[K0(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[K0(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:Ue("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),Cq=Pq;function xq(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Dq(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Vr(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function z0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const K0=(n,e,t)=>n!=null?n:e!=null?e:t,kq=Ym({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=Dr(km),i=Be(()=>n.route||r.value),s=Dr($0,0),a=Be(()=>{let d=mo(s);const{matched:p}=i.value;let _;for(;(_=p[d])&&!_.components;)d++;return d}),c=Be(()=>i.value.matched[a.value]);ef($0,Be(()=>a.value+1)),ef(Rq,c),ef(km,i);const h=Io();return $a(()=>[h.value,c.value,n.name],([d,p,_],[v,I,O])=>{p&&(p.instances[_]=d,I&&I!==p&&d&&d===v&&(p.leaveGuards.size||(p.leaveGuards=I.leaveGuards),p.updateGuards.size||(p.updateGuards=I.updateGuards))),d&&p&&(!I||!uu(p,I)||!v)&&(p.enterCallbacks[_]||[]).forEach(M=>M(d))},{flush:"post"}),()=>{const d=i.value,p=n.name,_=c.value,v=_&&_.components[p];if(!v)return j0(t.default,{Component:v,route:d});const I=_.props[p],O=I?I===!0?d.params:typeof I=="function"?I(d):I:null,F=Ue(v,_t({},O,e,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(_.instances[p]=null)},ref:h}));return j0(t.default,{Component:F,route:d})||F}}});function j0(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Oq=kq;function Vq(n){const e=wq(n.routes,n),t=n.parseQuery||Aq,r=n.stringifyQuery||B0,i=n.history,s=oc(),a=oc(),c=oc(),h=mO(ss);let d=ss;Na&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Sg.bind(null,Z=>""+Z),_=Sg.bind(null,W$),v=Sg.bind(null,sl);function I(Z,_e){let de,Ee;return XS(Z)?(de=e.getRecordMatcher(Z),Ee=_e):Ee=Z,e.addRoute(Ee,de)}function O(Z){const _e=e.getRecordMatcher(Z);_e&&e.removeRoute(_e)}function M(){return e.getRoutes().map(Z=>Z.record)}function F(Z){return!!e.getRecordMatcher(Z)}function Q(Z,_e){if(_e=_t({},_e||h.value),typeof Z=="string"){const D=Rg(t,Z,_e.path),j=e.resolve({path:D.path},_e),ie=i.createHref(D.fullPath);return _t(D,j,{params:v(j.params),hash:sl(D.hash),redirectedFrom:void 0,href:ie})}let de;if(Z.path!=null)de=_t({},Z,{path:Rg(t,Z.path,_e.path).path});else{const D=_t({},Z.params);for(const j in D)D[j]==null&&delete D[j];de=_t({},Z,{params:_(D)}),_e.params=_(_e.params)}const Ee=e.resolve(de,_e),He=Z.hash||"";Ee.params=p(v(Ee.params));const at=Q$(r,_t({},Z,{hash:z$(He),path:Ee.path})),R=i.createHref(at);return _t({fullPath:at,hash:He,query:r===B0?Sq(Z.query):Z.query||{}},Ee,{redirectedFrom:void 0,href:R})}function z(Z){return typeof Z=="string"?Rg(t,Z,h.value.path):_t({},Z)}function q(Z,_e){if(d!==Z)return cu(8,{from:_e,to:Z})}function W(Z){return P(Z)}function Y(Z){return W(_t(z(Z),{replace:!0}))}function re(Z){const _e=Z.matched[Z.matched.length-1];if(_e&&_e.redirect){const{redirect:de}=_e;let Ee=typeof de=="function"?de(Z):de;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=z(Ee):{path:Ee},Ee.params={}),_t({query:Z.query,hash:Z.hash,params:Ee.path!=null?{}:Z.params},Ee)}}function P(Z,_e){const de=d=Q(Z),Ee=h.value,He=Z.state,at=Z.force,R=Z.replace===!0,D=re(de);if(D)return P(_t(z(D),{state:typeof D=="object"?_t({},He,D.state):He,force:at,replace:R}),_e||de);const j=de;j.redirectedFrom=_e;let ie;return!at&&J$(r,Ee,de)&&(ie=cu(16,{to:j,from:Ee}),Dt(Ee,Ee,!0,!1)),(ie?Promise.resolve(ie):x(j,Ee)).catch(J=>yi(J)?yi(J,2)?J:yn(J):$e(J,j,Ee)).then(J=>{if(J){if(yi(J,2))return P(_t({replace:R},z(J.to),{state:typeof J.to=="object"?_t({},He,J.to.state):He,force:at}),_e||j)}else J=V(j,Ee,!0,R,He);return N(j,Ee,J),J})}function S(Z,_e){const de=q(Z,_e);return de?Promise.reject(de):Promise.resolve()}function A(Z){const _e=Nr.values().next().value;return _e&&typeof _e.runWithContext=="function"?_e.runWithContext(Z):Z()}function x(Z,_e){let de;const[Ee,He,at]=Nq(Z,_e);de=Pg(Ee.reverse(),"beforeRouteLeave",Z,_e);for(const D of Ee)D.leaveGuards.forEach(j=>{de.push(fs(j,Z,_e))});const R=S.bind(null,Z,_e);return de.push(R),Zt(de).then(()=>{de=[];for(const D of s.list())de.push(fs(D,Z,_e));return de.push(R),Zt(de)}).then(()=>{de=Pg(He,"beforeRouteUpdate",Z,_e);for(const D of He)D.updateGuards.forEach(j=>{de.push(fs(j,Z,_e))});return de.push(R),Zt(de)}).then(()=>{de=[];for(const D of at)if(D.beforeEnter)if(Vr(D.beforeEnter))for(const j of D.beforeEnter)de.push(fs(j,Z,_e));else de.push(fs(D.beforeEnter,Z,_e));return de.push(R),Zt(de)}).then(()=>(Z.matched.forEach(D=>D.enterCallbacks={}),de=Pg(at,"beforeRouteEnter",Z,_e,A),de.push(R),Zt(de))).then(()=>{de=[];for(const D of a.list())de.push(fs(D,Z,_e));return de.push(R),Zt(de)}).catch(D=>yi(D,8)?D:Promise.reject(D))}function N(Z,_e,de){c.list().forEach(Ee=>A(()=>Ee(Z,_e,de)))}function V(Z,_e,de,Ee,He){const at=q(Z,_e);if(at)return at;const R=_e===ss,D=Na?history.state:{};de&&(Ee||R?i.replace(Z.fullPath,_t({scroll:R&&D&&D.scroll},He)):i.push(Z.fullPath,He)),h.value=Z,Dt(Z,_e,de,R),yn()}let C;function fe(){C||(C=i.listen((Z,_e,de)=>{if(!dn.listening)return;const Ee=Q(Z),He=re(Ee);if(He){P(_t(He,{replace:!0}),Ee).catch(Oc);return}d=Ee;const at=h.value;Na&&iq(D0(at.fullPath,de.delta),Nd()),x(Ee,at).catch(R=>yi(R,12)?R:yi(R,2)?(P(R.to,Ee).then(D=>{yi(D,20)&&!de.delta&&de.type===ol.pop&&i.go(-1,!1)}).catch(Oc),Promise.reject()):(de.delta&&i.go(-de.delta,!1),$e(R,Ee,at))).then(R=>{R=R||V(Ee,at,!1),R&&(de.delta&&!yi(R,8)?i.go(-de.delta,!1):de.type===ol.pop&&yi(R,20)&&i.go(-1,!1)),N(Ee,at,R)}).catch(Oc)}))}let We=oc(),et=oc(),Ce;function $e(Z,_e,de){yn(Z);const Ee=et.list();return Ee.length?Ee.forEach(He=>He(Z,_e,de)):console.error(Z),Promise.reject(Z)}function Dn(){return Ce&&h.value!==ss?Promise.resolve():new Promise((Z,_e)=>{We.add([Z,_e])})}function yn(Z){return Ce||(Ce=!Z,fe(),We.list().forEach(([_e,de])=>Z?de(Z):_e()),We.reset()),Z}function Dt(Z,_e,de,Ee){const{scrollBehavior:He}=n;if(!Na||!He)return Promise.resolve();const at=!de&&sq(D0(Z.fullPath,0))||(Ee||!de)&&history.state&&history.state.scroll||null;return Hm().then(()=>He(Z,_e,at)).then(R=>R&&rq(R)).catch(R=>$e(R,Z,_e))}const St=Z=>i.go(Z);let Rt;const Nr=new Set,dn={currentRoute:h,listening:!0,addRoute:I,removeRoute:O,clearRoutes:e.clearRoutes,hasRoute:F,getRoutes:M,resolve:Q,options:n,push:W,replace:Y,go:St,back:()=>St(-1),forward:()=>St(1),beforeEach:s.add,beforeResolve:a.add,afterEach:c.add,onError:et.add,isReady:Dn,install(Z){const _e=this;Z.component("RouterLink",Cq),Z.component("RouterView",Oq),Z.config.globalProperties.$router=_e,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>mo(h)}),Na&&!Rt&&h.value===ss&&(Rt=!0,W(i.location).catch(He=>{}));const de={};for(const He in ss)Object.defineProperty(de,He,{get:()=>h.value[He],enumerable:!0});Z.provide(Ld,_e),Z.provide(nR,CI(de)),Z.provide(km,h);const Ee=Z.unmount;Nr.add(Z),Z.unmount=function(){Nr.delete(Z),Nr.size<1&&(d=ss,C&&C(),C=null,h.value=ss,Rt=!1,Ce=!1),Ee()}}};function Zt(Z){return Z.reduce((_e,de)=>_e.then(()=>A(de)),Promise.resolve())}return dn}function Nq(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let a=0;a<s;a++){const c=e.matched[a];c&&(n.matched.find(d=>uu(d,c))?r.push(c):t.push(c));const h=n.matched[a];h&&(e.matched.find(d=>uu(d,h))||i.push(h))}return[t,r,i]}function Y9(){return Dr(Ld)}const Lq=function(){const e=document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),W0={},Mq="/kbalance_quasar_pwa/",vi=function(e,t){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=`${Mq}${r}`,r in W0)return;W0[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":Lq,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((c,h)=>{a.addEventListener("load",c),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},Fq=[{path:"/",component:()=>vi(()=>import("./MainLayout.f218119f.js"),["assets/MainLayout.f218119f.js","assets/scroll.fbfcd578.js","assets/QResizeObserver.2308058d.js","assets/plugin-vue_export-helper.21dcd24c.js"]),children:[{path:"/",name:"IndexPage",component:()=>vi(()=>import("./IndexPage.2c7386c2.js"),["assets/IndexPage.2c7386c2.js","assets/IndexPage.c63e55ef.css","assets/QToolbarTitle.f3aaa582.js","assets/PersonItem.ea6b1417.js","assets/QResizeObserver.2308058d.js","assets/QPage.12fb9754.js","assets/focusout.66668d89.js","assets/rtl.276c3f1b.js","assets/QSlideItem.6379af18.js","assets/QCardActions.167e081e.js","assets/QDialog.2f9d9835.js","assets/scroll.fbfcd578.js","assets/ShareString.7906fdec.js","assets/ReceiveString.166ae8f5.js","assets/plugin-vue_export-helper.21dcd24c.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/newSheetWizard",name:"NewSheetWizardPage",component:()=>vi(()=>import("./NewSheetWizardPage.9623ee90.js"),["assets/NewSheetWizardPage.9623ee90.js","assets/QToolbarTitle.f3aaa582.js","assets/PersonItem.ea6b1417.js","assets/QResizeObserver.2308058d.js","assets/QPage.12fb9754.js","assets/QForm.baee7235.js","assets/PeopleList.d21ba0f8.js","assets/QSlideItem.6379af18.js","assets/ReceiveString.166ae8f5.js","assets/QCardActions.167e081e.js","assets/QDialog.2f9d9835.js","assets/focusout.66668d89.js","assets/scroll.fbfcd578.js","assets/PeopleDropdown.14c477bc.js","assets/QMenu.0f859ee6.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/sheet",name:"SheetPage",component:()=>vi(()=>import("./SheetPage.27738ee8.js"),["assets/SheetPage.27738ee8.js","assets/QSpace.37f57c3c.js","assets/PersonItem.ea6b1417.js","assets/QResizeObserver.2308058d.js","assets/QPage.12fb9754.js","assets/QSlideItem.6379af18.js","assets/PeopleDropdown.14c477bc.js","assets/QMenu.0f859ee6.js","assets/focusout.66668d89.js","assets/scroll.fbfcd578.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/people",name:"PeoplePage",component:()=>vi(()=>import("./PeoplePage.fcb3aacd.js"),["assets/PeoplePage.fcb3aacd.js","assets/QSpace.37f57c3c.js","assets/PersonItem.ea6b1417.js","assets/QResizeObserver.2308058d.js","assets/QPage.12fb9754.js","assets/PeopleList.d21ba0f8.js","assets/QSlideItem.6379af18.js","assets/ReceiveString.166ae8f5.js","assets/QCardActions.167e081e.js","assets/QDialog.2f9d9835.js","assets/focusout.66668d89.js","assets/scroll.fbfcd578.js","assets/PeopleDropdown.14c477bc.js","assets/QMenu.0f859ee6.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/sheet/transaction",name:"TransactionPage",component:()=>vi(()=>import("./TransactionPage.f15bde09.js"),["assets/TransactionPage.f15bde09.js","assets/QSpace.37f57c3c.js","assets/PersonItem.ea6b1417.js","assets/QResizeObserver.2308058d.js","assets/QPage.12fb9754.js","assets/QMenu.0f859ee6.js","assets/focusout.66668d89.js","assets/scroll.fbfcd578.js","assets/QDialog.2f9d9835.js","assets/rtl.276c3f1b.js"]),meta:{requiresAuth:!0,requiresFirebase:!0,requiresSheet:!0}},{path:"/login",name:"LoginPage",component:()=>vi(()=>import("./LoginPage.5969e3f9.js"),["assets/LoginPage.5969e3f9.js","assets/QPage.12fb9754.js","assets/QCardActions.167e081e.js","assets/QForm.baee7235.js"])},{path:"/settings",name:"SettingsPage",component:()=>vi(()=>import("./SettingsPage.c1c7dcb5.js"),["assets/SettingsPage.c1c7dcb5.js","assets/QPage.12fb9754.js","assets/QCardActions.167e081e.js","assets/ShareString.7906fdec.js","assets/QDialog.2f9d9835.js","assets/focusout.66668d89.js","assets/scroll.fbfcd578.js","assets/ReceiveString.166ae8f5.js"])}]},{path:"/:catchAll(.*)*",component:()=>vi(()=>import("./ErrorNotFound.d82eea53.js"),[])}];var Cg=()=>{const e=Vq({scrollBehavior:()=>({left:0,top:0}),routes:Fq,history:lq("/kbalance_quasar_pwa/")}),t=BS();let r=!0;return e.beforeEach(async(i,s,a)=>{r&&(await t.init(),r=!1),i.matched.some(c=>c.meta.requiresFirebase)&&!t.isFirebaseReady()?a({name:"SettingsPage"}):i.matched.some(c=>c.meta.requiresAuth)&&!t.isReady()?a({name:"LoginPage"}):i.matched.some(c=>c.meta.requiresSheet)&&!t.isSheet?a({name:"IndexPage"}):a()}),e};async function Uq(n,e){const t=n(I$);t.use(jN,e);const r=typeof Ag=="function"?await Ag({}):Ag;t.use(r);const i=Fo(typeof Cg=="function"?await Cg({store:r}):Cg);return r.use(({store:s})=>{s.router=i}),{app:t,store:r,router:i}}const Om={xs:18,sm:24,md:32,lg:38,xl:46},sy={size:String};function oy(n,e=Om){return Be(()=>n.size!==void 0?{fontSize:n.size in e?`${e[n.size]}px`:n.size}:null)}function Bq(n,e){return n!==void 0&&n()||e}function X9(n,e){if(n!==void 0){const t=n();if(t!=null)return t.slice()}return e}function _c(n,e){return n!==void 0?e.concat(n()):e}function $q(n,e){return n===void 0?e:e!==void 0?e.concat(n()):n()}function Z9(n,e,t,r,i,s){e.key=r+i;const a=Ue(n,e,t);return i===!0?FI(a,s()):a}const G0="0 0 24 24",H0=n=>n,xg=n=>`ionicons ${n}`,rR={"mdi-":n=>`mdi ${n}`,"icon-":H0,"bt-":n=>`bt ${n}`,"eva-":n=>`eva ${n}`,"ion-md":xg,"ion-ios":xg,"ion-logo":xg,"iconfont ":H0,"ti-":n=>`themify-icon ${n}`,"bi-":n=>`bootstrap-icons ${n}`},iR={o_:"-outlined",r_:"-round",s_:"-sharp"},sR={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},qq=new RegExp("^("+Object.keys(rR).join("|")+")"),zq=new RegExp("^("+Object.keys(iR).join("|")+")"),Q0=new RegExp("^("+Object.keys(sR).join("|")+")"),Kq=/^[Mm]\s?[-+]?\.?\d/,jq=/^img:/,Wq=/^svguse:/,Gq=/^ion-/,Hq=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var Xf=fl({name:"QIcon",props:{...sy,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(n,{slots:e}){const{proxy:{$q:t}}=lu(),r=oy(n),i=Be(()=>"q-icon"+(n.left===!0?" on-left":"")+(n.right===!0?" on-right":"")+(n.color!==void 0?` text-${n.color}`:"")),s=Be(()=>{let a,c=n.name;if(c==="none"||!c)return{none:!0};if(t.iconMapFn!==null){const p=t.iconMapFn(c);if(p!==void 0)if(p.icon!==void 0){if(c=p.icon,c==="none"||!c)return{none:!0}}else return{cls:p.cls,content:p.content!==void 0?p.content:" "}}if(Kq.test(c)===!0){const[p,_=G0]=c.split("|");return{svg:!0,viewBox:_,nodes:p.split("&&").map(v=>{const[I,O,M]=v.split("@@");return Ue("path",{style:O,d:I,transform:M})})}}if(jq.test(c)===!0)return{img:!0,src:c.substring(4)};if(Wq.test(c)===!0){const[p,_=G0]=c.split("|");return{svguse:!0,src:p.substring(7),viewBox:_}}let h=" ";const d=c.match(qq);if(d!==null)a=rR[d[1]](c);else if(Hq.test(c)===!0)a=c;else if(Gq.test(c)===!0)a=`ionicons ion-${t.platform.is.ios===!0?"ios":"md"}${c.substring(3)}`;else if(Q0.test(c)===!0){a="notranslate material-symbols";const p=c.match(Q0);p!==null&&(c=c.substring(6),a+=sR[p[1]]),h=c}else{a="notranslate material-icons";const p=c.match(zq);p!==null&&(c=c.substring(2),a+=iR[p[1]]),h=c}return{cls:a,content:h}});return()=>{const a={class:i.value,style:r.value,"aria-hidden":"true",role:"presentation"};return s.value.none===!0?Ue(n.tag,a,Bq(e.default)):s.value.img===!0?Ue(n.tag,a,_c(e.default,[Ue("img",{src:s.value.src})])):s.value.svg===!0?Ue(n.tag,a,_c(e.default,[Ue("svg",{viewBox:s.value.viewBox||"0 0 24 24"},s.value.nodes)])):s.value.svguse===!0?Ue(n.tag,a,_c(e.default,[Ue("svg",{viewBox:s.value.viewBox},[Ue("use",{"xlink:href":s.value.src})])])):(s.value.cls!==void 0&&(a.class+=" "+s.value.cls),Ue(n.tag,a,_c(e.default,[s.value.content])))}}}),Qq=fl({name:"QAvatar",props:{...sy,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(n,{slots:e}){const t=oy(n),r=Be(()=>"q-avatar"+(n.color?` bg-${n.color}`:"")+(n.textColor?` text-${n.textColor} q-chip--colored`:"")+(n.square===!0?" q-avatar--square":n.rounded===!0?" rounded-borders":"")),i=Be(()=>n.fontSize?{fontSize:n.fontSize}:null);return()=>{const s=n.icon!==void 0?[Ue(Xf,{name:n.icon})]:void 0;return Ue("div",{class:r.value,style:t.value},[Ue("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},$q(e.default,s))])}}});const Jq={size:{type:[String,Number],default:"1em"},color:String};function Yq(n){return{cSize:Be(()=>n.size in Om?`${Om[n.size]}px`:n.size),classes:Be(()=>"q-spinner"+(n.color?` text-${n.color}`:""))}}var oR=fl({name:"QSpinner",props:{...Jq,thickness:{type:Number,default:5}},setup(n){const{cSize:e,classes:t}=Yq(n);return()=>Ue("svg",{class:t.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Ue("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":n.thickness,"stroke-miterlimit":"10"})])}});function Xq(n,e){const t=n.style;for(const r in e)t[r]=e[r]}function e6(n){if(n==null)return;if(typeof n=="string")try{return document.querySelector(n)||void 0}catch{return}const e=mo(n);if(e)return e.$el||e}function t6(n,e){if(n==null||n.contains(e)===!0)return!0;for(let t=n.nextElementSibling;t!==null;t=t.nextElementSibling)if(t.contains(e))return!0;return!1}function Zq(n,e=250){let t=!1,r;return function(){return t===!1&&(t=!0,setTimeout(()=>{t=!1},e),r=n.apply(this,arguments)),r}}function J0(n,e,t,r){t.modifiers.stop===!0&&CT(n);const i=t.modifiers.color;let s=t.modifiers.center;s=s===!0||r===!0;const a=document.createElement("span"),c=document.createElement("span"),h=TN(n),{left:d,top:p,width:_,height:v}=e.getBoundingClientRect(),I=Math.sqrt(_*_+v*v),O=I/2,M=`${(_-I)/2}px`,F=s?M:`${h.left-d-O}px`,Q=`${(v-I)/2}px`,z=s?Q:`${h.top-p-O}px`;c.className="q-ripple__inner",Xq(c,{height:`${I}px`,width:`${I}px`,transform:`translate3d(${F},${z},0) scale3d(.2,.2,1)`,opacity:0}),a.className=`q-ripple${i?" text-"+i:""}`,a.setAttribute("dir","ltr"),a.appendChild(c),e.appendChild(a);const q=()=>{a.remove(),clearTimeout(W)};t.abort.push(q);let W=setTimeout(()=>{c.classList.add("q-ripple__inner--enter"),c.style.transform=`translate3d(${M},${Q},0) scale3d(1,1,1)`,c.style.opacity=.2,W=setTimeout(()=>{c.classList.remove("q-ripple__inner--enter"),c.classList.add("q-ripple__inner--leave"),c.style.opacity=0,W=setTimeout(()=>{a.remove(),t.abort.splice(t.abort.indexOf(q),1)},275)},250)},50)}function Y0(n,{modifiers:e,value:t,arg:r}){const i=Object.assign({},n.cfg.ripple,e,t);n.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||r,keyCodes:[].concat(i.keyCodes||13)}}var e9=IN({name:"ripple",beforeMount(n,e){const t=e.instance.$.appContext.config.globalProperties.$q.config||{};if(t.ripple===!1)return;const r={cfg:t,enabled:e.value!==!1,modifiers:{},abort:[],start(i){r.enabled===!0&&i.qSkipRipple!==!0&&i.type===(r.modifiers.early===!0?"pointerdown":"click")&&J0(i,n,r,i.qKeyEvent===!0)},keystart:Zq(i=>{r.enabled===!0&&i.qSkipRipple!==!0&&Gg(i,r.modifiers.keyCodes)===!0&&i.type===`key${r.modifiers.early===!0?"down":"up"}`&&J0(i,n,r,!0)},300)};Y0(r,e),n.__qripple=r,bN(r,"main",[[n,"pointerdown","start","passive"],[n,"click","start","passive"],[n,"keydown","keystart","passive"],[n,"keyup","keystart","passive"]])},updated(n,e){if(e.oldValue!==e.value){const t=n.__qripple;t!==void 0&&(t.enabled=e.value!==!1,t.enabled===!0&&Object(e.value)===e.value&&Y0(t,e))}},beforeUnmount(n){const e=n.__qripple;e!==void 0&&(e.abort.forEach(t=>{t()}),AN(e,"main"),delete n._qripple)}});const aR={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},t9=Object.keys(aR),n9={align:{type:String,validator:n=>t9.includes(n)}};function r9(n){return Be(()=>{const e=n.align===void 0?n.vertical===!0?"stretch":"left":n.align;return`${n.vertical===!0?"items":"justify"}-${aR[e]}`})}function n6(n){if(Object(n.$parent)===n.$parent)return n.$parent;let{parent:e}=n.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function uR(n,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(t=>{uR(n,t)}):n.add(e)}function r6(n){const e=new Set;return n.forEach(t=>{uR(e,t)}),Array.from(e)}function i9(n){return n.appContext.config.globalProperties.$router!==void 0}function i6(n){return n.isUnmounted===!0||n.isDeactivated===!0}function X0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}function Z0(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function s9(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(Array.isArray(i)===!1||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function eI(n,e){return Array.isArray(e)===!0?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function o9(n,e){return Array.isArray(n)===!0?eI(n,e):Array.isArray(e)===!0?eI(e,n):n===e}function a9(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(o9(n[t],e[t])===!1)return!1;return!0}const cR={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},s6={...cR,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function u9({fallbackTag:n,useDisableForRouterLinkProps:e=!0}={}){const t=lu(),{props:r,proxy:i,emit:s}=t,a=i9(t),c=Be(()=>r.disable!==!0&&r.href!==void 0),h=Be(e===!0?()=>a===!0&&r.disable!==!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>a===!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),d=Be(()=>h.value===!0?z(r.to):null),p=Be(()=>d.value!==null),_=Be(()=>c.value===!0||p.value===!0),v=Be(()=>r.type==="a"||_.value===!0?"a":r.tag||n||"div"),I=Be(()=>c.value===!0?{href:r.href,target:r.target}:p.value===!0?{href:d.value.href,target:r.target}:{}),O=Be(()=>{if(p.value===!1)return-1;const{matched:Y}=d.value,{length:re}=Y,P=Y[re-1];if(P===void 0)return-1;const S=i.$route.matched;if(S.length===0)return-1;const A=S.findIndex(Z0.bind(null,P));if(A!==-1)return A;const x=X0(Y[re-2]);return re>1&&X0(P)===x&&S[S.length-1].path!==x?S.findIndex(Z0.bind(null,Y[re-2])):A}),M=Be(()=>p.value===!0&&O.value!==-1&&s9(i.$route.params,d.value.params)),F=Be(()=>M.value===!0&&O.value===i.$route.matched.length-1&&a9(i.$route.params,d.value.params)),Q=Be(()=>p.value===!0?F.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":M.value===!0?` ${r.activeClass}`:"":"");function z(Y){try{return i.$router.resolve(Y)}catch{}return null}function q(Y,{returnRouterError:re,to:P=r.to,replace:S=r.replace}={}){if(r.disable===!0)return Y.preventDefault(),Promise.resolve(!1);if(Y.metaKey||Y.altKey||Y.ctrlKey||Y.shiftKey||Y.button!==void 0&&Y.button!==0||r.target==="_blank")return Promise.resolve(!1);Y.preventDefault();const A=i.$router[S===!0?"replace":"push"](P);return re===!0?A:A.then(()=>{}).catch(()=>{})}function W(Y){if(p.value===!0){const re=P=>q(Y,P);s("click",Y,re),Y.defaultPrevented!==!0&&re()}else s("click",Y)}return{hasRouterLink:p,hasHrefLink:c,hasLink:_,linkTag:v,resolvedLink:d,linkIsActive:M,linkIsExactActive:F,linkClass:Q,linkAttrs:I,getLink:z,navigateToRouterLink:q,navigateOnClick:W}}const tI={none:0,xs:4,sm:8,md:16,lg:24,xl:32},c9={xs:8,sm:10,md:14,lg:20,xl:24},l9=["button","submit","reset"],h9=/[^\s]\/[^\s]/,f9=["flat","outline","push","unelevated"];function lR(n,e){return n.flat===!0?"flat":n.outline===!0?"outline":n.push===!0?"push":n.unelevated===!0?"unelevated":e}function o6(n){const e=lR(n);return e!==void 0?{[e]:!0}:{}}const d9={...sy,...cR,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...f9.reduce((n,e)=>(n[e]=Boolean)&&n,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...n9.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},p9={...d9,round:Boolean};function g9(n){const e=oy(n,c9),t=r9(n),{hasRouterLink:r,hasLink:i,linkTag:s,linkAttrs:a,navigateOnClick:c}=u9({fallbackTag:"button"}),h=Be(()=>{const F=n.fab===!1&&n.fabMini===!1?e.value:{};return n.padding!==void 0?Object.assign({},F,{padding:n.padding.split(/\s+/).map(Q=>Q in tI?tI[Q]+"px":Q).join(" "),minWidth:"0",minHeight:"0"}):F}),d=Be(()=>n.rounded===!0||n.fab===!0||n.fabMini===!0),p=Be(()=>n.disable!==!0&&n.loading!==!0),_=Be(()=>p.value===!0?n.tabindex||0:-1),v=Be(()=>lR(n,"standard")),I=Be(()=>{const F={tabindex:_.value};return i.value===!0?Object.assign(F,a.value):l9.includes(n.type)===!0&&(F.type=n.type),s.value==="a"?(n.disable===!0?F["aria-disabled"]="true":F.href===void 0&&(F.role="button"),r.value!==!0&&h9.test(n.type)===!0&&(F.type=n.type)):n.disable===!0&&(F.disabled="",F["aria-disabled"]="true"),n.loading===!0&&n.percentage!==void 0&&Object.assign(F,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.percentage}),F}),O=Be(()=>{let F;n.color!==void 0?n.flat===!0||n.outline===!0?F=`text-${n.textColor||n.color}`:F=`bg-${n.color} text-${n.textColor||"white"}`:n.textColor&&(F=`text-${n.textColor}`);const Q=n.round===!0?"round":`rectangle${d.value===!0?" q-btn--rounded":n.square===!0?" q-btn--square":""}`;return`q-btn--${v.value} q-btn--${Q}`+(F!==void 0?" "+F:"")+(p.value===!0?" q-btn--actionable q-focusable q-hoverable":n.disable===!0?" disabled":"")+(n.fab===!0?" q-btn--fab":n.fabMini===!0?" q-btn--fab-mini":"")+(n.noCaps===!0?" q-btn--no-uppercase":"")+(n.dense===!0?" q-btn--dense":"")+(n.stretch===!0?" no-border-radius self-stretch":"")+(n.glossy===!0?" glossy":"")+(n.square?" q-btn--square":"")}),M=Be(()=>t.value+(n.stack===!0?" column":" row")+(n.noWrap===!0?" no-wrap text-no-wrap":"")+(n.loading===!0?" q-btn__content--hidden":""));return{classes:O,style:h,innerClasses:M,attributes:I,hasLink:i,linkTag:s,navigateOnClick:c,isActionable:p}}const{passiveCapture:vr}=bo;let Sa=null,Ra=null,Pa=null;var m9=fl({name:"QBtn",props:{...p9,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(n,{slots:e,emit:t}){const{proxy:r}=lu(),{classes:i,style:s,innerClasses:a,attributes:c,hasLink:h,linkTag:d,navigateOnClick:p,isActionable:_}=g9(n),v=Io(null),I=Io(null);let O=null,M,F=null;const Q=Be(()=>n.label!==void 0&&n.label!==null&&n.label!==""),z=Be(()=>n.disable===!0||n.ripple===!1?!1:{keyCodes:h.value===!0?[13,32]:[13],...n.ripple===!0?{}:n.ripple}),q=Be(()=>({center:n.round})),W=Be(()=>{const fe=Math.max(0,Math.min(100,n.percentage));return fe>0?{transition:"transform 0.6s",transform:`translateX(${fe-100}%)`}:{}}),Y=Be(()=>{if(n.loading===!0)return{onMousedown:C,onTouchstart:C,onClick:C,onKeydown:C,onKeyup:C};if(_.value===!0){const fe={onClick:P,onKeydown:S,onMousedown:x};if(r.$q.platform.has.touch===!0){const We=n.onTouchstart!==void 0?"":"Passive";fe[`onTouchstart${We}`]=A}return fe}return{onClick:wa}}),re=Be(()=>({ref:v,class:"q-btn q-btn-item non-selectable no-outline "+i.value,style:s.value,...c.value,...Y.value}));function P(fe){if(v.value!==null){if(fe!==void 0){if(fe.defaultPrevented===!0)return;const We=document.activeElement;if(n.type==="submit"&&We!==document.body&&v.value.contains(We)===!1&&We.contains(v.value)===!1){v.value.focus();const et=()=>{document.removeEventListener("keydown",wa,!0),document.removeEventListener("keyup",et,vr),v.value!==null&&v.value.removeEventListener("blur",et,vr)};document.addEventListener("keydown",wa,!0),document.addEventListener("keyup",et,vr),v.value.addEventListener("blur",et,vr)}}p(fe)}}function S(fe){v.value!==null&&(t("keydown",fe),Gg(fe,[13,32])===!0&&Ra!==v.value&&(Ra!==null&&V(),fe.defaultPrevented!==!0&&(v.value.focus(),Ra=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("keyup",N,!0),v.value.addEventListener("blur",N,vr)),wa(fe)))}function A(fe){v.value!==null&&(t("touchstart",fe),fe.defaultPrevented!==!0&&(Sa!==v.value&&(Sa!==null&&V(),Sa=v.value,O=fe.target,O.addEventListener("touchcancel",N,vr),O.addEventListener("touchend",N,vr)),M=!0,F!==null&&clearTimeout(F),F=setTimeout(()=>{F=null,M=!1},200)))}function x(fe){v.value!==null&&(fe.qSkipRipple=M===!0,t("mousedown",fe),fe.defaultPrevented!==!0&&Pa!==v.value&&(Pa!==null&&V(),Pa=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("mouseup",N,vr)))}function N(fe){if(v.value!==null&&!(fe!==void 0&&fe.type==="blur"&&document.activeElement===v.value)){if(fe!==void 0&&fe.type==="keyup"){if(Ra===v.value&&Gg(fe,[13,32])===!0){const We=new MouseEvent("click",fe);We.qKeyEvent=!0,fe.defaultPrevented===!0&&Wg(We),fe.cancelBubble===!0&&CT(We),v.value.dispatchEvent(We),wa(fe),fe.qKeyEvent=!0}t("keyup",fe)}V()}}function V(fe){const We=I.value;fe!==!0&&(Sa===v.value||Pa===v.value)&&We!==null&&We!==document.activeElement&&(We.setAttribute("tabindex",-1),We.focus()),Sa===v.value&&(O!==null&&(O.removeEventListener("touchcancel",N,vr),O.removeEventListener("touchend",N,vr)),Sa=O=null),Pa===v.value&&(document.removeEventListener("mouseup",N,vr),Pa=null),Ra===v.value&&(document.removeEventListener("keyup",N,!0),v.value!==null&&v.value.removeEventListener("blur",N,vr),Ra=null),v.value!==null&&v.value.classList.remove("q-btn--active")}function C(fe){wa(fe),fe.qSkipRipple=!0}return ll(()=>{V(!0)}),Object.assign(r,{click:fe=>{_.value===!0&&P(fe)}}),()=>{let fe=[];n.icon!==void 0&&fe.push(Ue(Xf,{name:n.icon,left:n.stack!==!0&&Q.value===!0,role:"img"})),Q.value===!0&&fe.push(Ue("span",{class:"block"},[n.label])),fe=_c(e.default,fe),n.iconRight!==void 0&&n.round===!1&&fe.push(Ue(Xf,{name:n.iconRight,right:n.stack!==!0&&Q.value===!0,role:"img"}));const We=[Ue("span",{class:"q-focus-helper",ref:I})];return n.loading===!0&&n.percentage!==void 0&&We.push(Ue("span",{class:"q-btn__progress absolute-full overflow-hidden"+(n.darkPercentage===!0?" q-btn__progress--dark":"")},[Ue("span",{class:"q-btn__progress-indicator fit block",style:W.value})])),We.push(Ue("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+a.value},fe)),n.loading!==null&&We.push(Ue($V,{name:"q-transition--fade"},()=>n.loading===!0?[Ue("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Ue(oR)])]:null)),FI(Ue(d.value,re.value,We),[[e9,z.value,void 0,q.value]])}}});let _9=1,y9=document.body;function v9(n,e){const t=document.createElement("div");if(t.id=e!==void 0?`q-portal--${e}--${_9++}`:n,kf.globalNodes!==void 0){const r=kf.globalNodes.class;r!==void 0&&(t.className=r)}return y9.appendChild(t),t}function a6(n){n.remove()}let w9=0;const _f={},yf={},Pr={},hR={},E9=/^\s*$/,fR=[],I9=[void 0,null,!0,!1,""],ay=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],T9=["top-left","top-right","bottom-left","bottom-right"],La={positive:{icon:n=>n.iconSet.type.positive,color:"positive"},negative:{icon:n=>n.iconSet.type.negative,color:"negative"},warning:{icon:n=>n.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:n=>n.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function dR(n,e,t){if(!n)return ac("parameter required");let r;const i={textColor:"white"};if(n.ignoreDefaults!==!0&&Object.assign(i,_f),qc(n)===!1&&(i.type&&Object.assign(i,La[i.type]),n={message:n}),Object.assign(i,La[n.type||i.type],n),typeof i.icon=="function"&&(i.icon=i.icon(e)),i.spinner?(i.spinner===!0&&(i.spinner=oR),i.spinner=Fo(i.spinner)):i.spinner=!1,i.meta={hasMedia:Boolean(i.spinner!==!1||i.icon||i.avatar),hasText:nI(i.message)||nI(i.caption)},i.position){if(ay.includes(i.position)===!1)return ac("wrong position",n)}else i.position="bottom";if(I9.includes(i.timeout)===!0)i.timeout=5e3;else{const h=Number(i.timeout);if(isNaN(h)||h<0)return ac("wrong timeout",n);i.timeout=Number.isFinite(h)?h:0}i.timeout===0?i.progress=!1:i.progress===!0&&(i.meta.progressClass="q-notification__progress"+(i.progressClass?` ${i.progressClass}`:""),i.meta.progressStyle={animationDuration:`${i.timeout+1e3}ms`});const s=(Array.isArray(n.actions)===!0?n.actions:[]).concat(n.ignoreDefaults!==!0&&Array.isArray(_f.actions)===!0?_f.actions:[]).concat(La[n.type]!==void 0&&Array.isArray(La[n.type].actions)===!0?La[n.type].actions:[]),{closeBtn:a}=i;if(a&&s.push({label:typeof a=="string"?a:e.lang.label.close}),i.actions=s.map(({handler:h,noDismiss:d,...p})=>({flat:!0,...p,onClick:typeof h=="function"?()=>{h(),d!==!0&&c()}:()=>{c()}})),i.multiLine===void 0&&(i.multiLine=i.actions.length>1),Object.assign(i.meta,{class:`q-notification row items-stretch q-notification--${i.multiLine===!0?"multi-line":"standard"}`+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:"")+(i.classes!==void 0?` ${i.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(i.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(i.multiLine===!0?"":" col"),leftClass:i.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...i.attrs}}),i.group===!1?(i.group=void 0,i.meta.group=void 0):((i.group===void 0||i.group===!0)&&(i.group=[i.message,i.caption,i.multiline].concat(i.actions.map(h=>`${h.label}*${h.icon}`)).join("|")),i.meta.group=i.group+"|"+i.position),i.actions.length===0?i.actions=void 0:i.meta.actionsClass="q-notification__actions row items-center "+(i.multiLine===!0?"justify-end":"col-auto")+(i.meta.hasMedia===!0?" q-notification__actions--with-media":""),t!==void 0){t.notif.meta.timer&&(clearTimeout(t.notif.meta.timer),t.notif.meta.timer=void 0),i.meta.uid=t.notif.meta.uid;const h=Pr[i.position].value.indexOf(t.notif);Pr[i.position].value[h]=i}else{const h=yf[i.meta.group];if(h===void 0){if(i.meta.uid=w9++,i.meta.badge=1,["left","right","center"].indexOf(i.position)!==-1)Pr[i.position].value.splice(Math.floor(Pr[i.position].value.length/2),0,i);else{const d=i.position.indexOf("top")!==-1?"unshift":"push";Pr[i.position].value[d](i)}i.group!==void 0&&(yf[i.meta.group]=i)}else{if(h.meta.timer&&(clearTimeout(h.meta.timer),h.meta.timer=void 0),i.badgePosition!==void 0){if(T9.includes(i.badgePosition)===!1)return ac("wrong badgePosition",n)}else i.badgePosition=`top-${i.position.indexOf("left")!==-1?"right":"left"}`;i.meta.uid=h.meta.uid,i.meta.badge=h.meta.badge+1,i.meta.badgeClass=`q-notification__badge q-notification__badge--${i.badgePosition}`+(i.badgeColor!==void 0?` bg-${i.badgeColor}`:"")+(i.badgeTextColor!==void 0?` text-${i.badgeTextColor}`:"")+(i.badgeClass?` ${i.badgeClass}`:"");const d=Pr[i.position].value.indexOf(h);Pr[i.position].value[d]=yf[i.meta.group]=i}}const c=()=>{b9(i),r=void 0};if(i.timeout>0&&(i.meta.timer=setTimeout(()=>{i.meta.timer=void 0,c()},i.timeout+1e3)),i.group!==void 0)return h=>{h!==void 0?ac("trying to update a grouped one which is forbidden",n):c()};if(r={dismiss:c,config:n,notif:i},t!==void 0){Object.assign(t,r);return}return h=>{if(r!==void 0)if(h===void 0)r.dismiss();else{const d=Object.assign({},r.config,h,{group:!1,position:i.position});dR(d,e,r)}}}function b9(n){n.meta.timer&&(clearTimeout(n.meta.timer),n.meta.timer=void 0);const e=Pr[n.position].value.indexOf(n);if(e!==-1){n.group!==void 0&&delete yf[n.meta.group];const t=fR[""+n.meta.uid];if(t){const{width:r,height:i}=getComputedStyle(t);t.style.left=`${t.offsetLeft}px`,t.style.width=r,t.style.height=i}Pr[n.position].value.splice(e,1),typeof n.onDismiss=="function"&&n.onDismiss()}}function nI(n){return n!=null&&E9.test(n)!==!0}function ac(n,e){return console.error(`Notify: ${n}`,e),!1}function A9(){return fl({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Ue("div",{class:"q-notifications"},ay.map(n=>Ue(aN,{key:n,class:hR[n],tag:"div",name:`q-notification--${n}`},()=>Pr[n].value.map(e=>{const t=e.meta,r=[];if(t.hasMedia===!0&&(e.spinner!==!1?r.push(Ue(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+t.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(Ue(Xf,{class:"q-notification__icon q-notification__icon--"+t.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(Ue(Qq,{class:"q-notification__avatar q-notification__avatar--"+t.leftClass},()=>Ue("img",{src:e.avatar,"aria-hidden":"true"})))),t.hasText===!0){let s;const a={class:"q-notification__message col"};if(e.html===!0)a.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const c=[e.message];s=e.caption?[Ue("div",c),Ue("div",{class:"q-notification__caption"},[e.caption])]:c}r.push(Ue("div",a,s))}const i=[Ue("div",{class:t.contentClass},r)];return e.progress===!0&&i.push(Ue("div",{key:`${t.uid}|p|${t.badge}`,class:t.progressClass,style:t.progressStyle})),e.actions!==void 0&&i.push(Ue("div",{class:t.actionsClass},e.actions.map(s=>Ue(m9,s)))),t.badge>1&&i.push(Ue("div",{key:`${t.uid}|${t.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[t.badge])),Ue("div",{ref:s=>{fR[""+t.uid]=s},key:t.uid,class:t.class,...t.attrs},[Ue("div",{class:t.wrapperClass},i)])}))))}})}var S9={setDefaults(n){qc(n)===!0&&Object.assign(_f,n)},registerType(n,e){qc(e)===!0&&(La[n]=e)},install({$q:n,parentApp:e}){if(n.notify=this.create=t=>dR(t,n),n.notify.setDefaults=this.setDefaults,n.notify.registerType=this.registerType,n.config.notify!==void 0&&this.setDefaults(n.config.notify),this.__installed!==!0){ay.forEach(r=>{Pr[r]=Io([]);const i=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",s=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",a=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${s}`;hR[r]=`q-notifications__list q-notifications__list--${i} fixed column no-wrap ${a}`});const t=v9("q-notify");qN(A9(),e).mount(t)}}},R9={config:{},plugins:{Notify:S9}},P9=function(){return Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},Vm;typeof window!="undefined"&&(typeof Promise!="undefined"?Vm=new Promise(function(n){return window.addEventListener("load",n)}):Vm={then:function(n){return window.addEventListener("load",n)}});function C9(n,e){e===void 0&&(e={});var t=e.registrationOptions;t===void 0&&(t={}),delete e.registrationOptions;var r=function(i){for(var s=[],a=arguments.length-1;a-- >0;)s[a]=arguments[a+1];e&&e[i]&&e[i].apply(e,s)};"serviceWorker"in navigator&&Vm.then(function(){P9()?(x9(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return al(r,i)})):(pR(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return al(r,i)}))})}function al(n,e){navigator.onLine||n("offline"),n("error",e)}function pR(n,e,t){navigator.serviceWorker.register(n,t).then(function(r){if(e("registered",r),r.waiting){e("updated",r);return}r.onupdatefound=function(){e("updatefound",r);var i=r.installing;i.onstatechange=function(){i.state==="installed"&&(navigator.serviceWorker.controller?e("updated",r):e("cached",r))}}}).catch(function(r){return al(e,r)})}function x9(n,e,t){fetch(n).then(function(r){r.status===404?(e("error",new Error("Service worker not found at "+n)),rI()):r.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+n+" to have javascript content-type, but received "+r.headers.get("content-type"))),rI()):pR(n,e,t)}).catch(function(r){return al(e,r)})}function rI(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()}).catch(function(n){return al(emit,n)})}C9("/kbalance_quasar_pwa/sw.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});async function D9({app:n,router:e,store:t}){n.use(e),n.mount("#q-app")}Uq(RT,R9).then(D9);export{L9 as $,e6 as A,Xq as B,FI as C,W9 as D,wa as E,Gg as F,xN as G,og as H,MO as I,LO as J,IN as K,Yr as L,B9 as M,bN as N,q9 as O,TN as P,Xf as Q,e9 as R,AN as S,$V as T,r6 as U,O9 as V,Z9 as W,gT as X,SV as Y,m9 as Z,BS as _,Be as a,Qn as a0,Y9 as a1,Qk as a2,mo as a3,V9 as a4,Bm as a5,X9 as a6,s6 as a7,u9 as a8,jg as a9,d9 as aA,o6 as aB,US as aC,S0 as aD,sy as aE,oy as aF,$q as aG,UO as aH,Zm as aI,ot as aJ,LV as aK,jt as aL,U9 as aM,bg as aN,M9 as aa,BN as ab,BO as ac,j9 as ad,SN as ae,i_ as af,Wg as ag,oR as ah,CT as ai,n9 as aj,r9 as ak,FN as al,$9 as am,t6 as an,Ym as ao,Um as ap,F9 as aq,N9 as ar,i6 as as,i9 as at,n6 as au,k9 as av,v9 as aw,a6 as ax,rc as ay,E$ as az,Bq as b,fl as c,K9 as d,G9 as e,ll as f,lu as g,Ue as h,Dr as i,bo as j,To as k,z9 as l,Mo as m,$c as n,Xm as o,ef as p,QI as q,Io as r,_c as s,jO as t,Sf as u,Rf as v,$a as w,CO as x,Un as y,Hm as z};
