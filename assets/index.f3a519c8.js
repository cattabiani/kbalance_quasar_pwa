/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xm(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const It={},Fa=[],Pr=()=>{},xk=()=>!1,jf=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Dm=n=>n.startsWith("onUpdate:"),Wt=Object.assign,km=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Dk=Object.prototype.hasOwnProperty,ft=(n,e)=>Dk.call(n,e),Me=Array.isArray,Ua=n=>Wf(n)==="[object Map]",eI=n=>Wf(n)==="[object Set]",Ke=n=>typeof n=="function",Mt=n=>typeof n=="string",Di=n=>typeof n=="symbol",Pt=n=>n!==null&&typeof n=="object",tI=n=>(Pt(n)||Ke(n))&&Ke(n.then)&&Ke(n.catch),nI=Object.prototype.toString,Wf=n=>nI.call(n),kk=n=>Wf(n).slice(8,-1),rI=n=>Wf(n)==="[object Object]",Om=n=>Mt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,pc=xm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gf=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Ok=/-(\w)/g,Er=Gf(n=>n.replace(Ok,(e,t)=>t?t.toUpperCase():"")),Vk=/\B([A-Z])/g,Lo=Gf(n=>n.replace(Vk,"-$1").toLowerCase()),Hf=Gf(n=>n.charAt(0).toUpperCase()+n.slice(1)),qp=Gf(n=>n?`on${Hf(n)}`:""),ys=(n,e)=>!Object.is(n,e),zp=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},iI=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Nk=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Lk=n=>{const e=Mt(n)?Number(n):NaN;return isNaN(e)?n:e};let jv;const Qf=()=>jv||(jv=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function Jf(n){if(Me(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Mt(r)?Bk(r):Jf(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Mt(n)||Pt(n))return n}const Mk=/;(?![^(]*\))/g,Fk=/:([^]+)/,Uk=/\/\*[^]*?\*\//g;function Bk(n){const e={};return n.replace(Uk,"").split(Mk).forEach(t=>{if(t){const r=t.split(Fk);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Yf(n){let e="";if(Mt(n))e=n;else if(Me(n))for(let t=0;t<n.length;t++){const r=Yf(n[t]);r&&(e+=r+" ")}else if(Pt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function S9(n){if(!n)return null;let{class:e,style:t}=n;return e&&!Mt(e)&&(n.class=Yf(e)),t&&(n.style=Jf(t)),n}const $k="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qk=xm($k);function sI(n){return!!n||n===""}const oI=n=>!!(n&&n.__v_isRef===!0),zk=n=>Mt(n)?n:n==null?"":Me(n)||Pt(n)&&(n.toString===nI||!Ke(n.toString))?oI(n)?zk(n.value):JSON.stringify(n,aI,2):String(n),aI=(n,e)=>oI(e)?aI(n,e.value):Ua(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Kp(r,s)+" =>"]=i,t),{})}:eI(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Kp(t))}:Di(e)?Kp(e):Pt(e)&&!Me(e)&&!rI(e)?String(e):e,Kp=(n,e="")=>{var t;return Di(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nn;class uI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nn,!e&&Nn&&(this.index=(Nn.scopes||(Nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Nn;try{return Nn=this,e()}finally{Nn=t}}}on(){Nn=this}off(){Nn=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function cI(n){return new uI(n)}function lI(){return Nn}function Kk(n,e=!1){Nn&&Nn.cleanups.push(n)}let bt;const jp=new WeakSet;class hI{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nn&&Nn.active&&Nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,jp.has(this)&&(jp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dI(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wv(this),pI(this);const e=bt,t=Cr;bt=this,Cr=!0;try{return this.fn()}finally{gI(this),bt=e,Cr=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Lm(e);this.deps=this.depsTail=void 0,Wv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?jp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Pg(this)&&this.run()}get dirty(){return Pg(this)}}let fI=0,gc,mc;function dI(n,e=!1){if(n.flags|=8,e){n.next=mc,mc=n;return}n.next=gc,gc=n}function Vm(){fI++}function Nm(){if(--fI>0)return;if(mc){let e=mc;for(mc=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;gc;){let e=gc;for(gc=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function pI(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function gI(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),Lm(r),jk(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Pg(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(mI(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function mI(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Dc))return;n.globalVersion=Dc;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Pg(n)){n.flags&=-3;return}const t=bt,r=Cr;bt=n,Cr=!0;try{pI(n);const i=n.fn(n._value);(e.version===0||ys(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{bt=t,Cr=r,gI(n),n.flags&=-3}}function Lm(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)Lm(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function jk(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Cr=!0;const _I=[];function Cs(){_I.push(Cr),Cr=!1}function xs(){const n=_I.pop();Cr=n===void 0?!0:n}function Wv(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=bt;bt=void 0;try{e()}finally{bt=t}}}let Dc=0;class Wk{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mm{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!bt||!Cr||bt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==bt)t=this.activeLink=new Wk(bt,this),bt.deps?(t.prevDep=bt.depsTail,bt.depsTail.nextDep=t,bt.depsTail=t):bt.deps=bt.depsTail=t,yI(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=bt.depsTail,t.nextDep=void 0,bt.depsTail.nextDep=t,bt.depsTail=t,bt.deps===t&&(bt.deps=r)}return t}trigger(e){this.version++,Dc++,this.notify(e)}notify(e){Vm();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Nm()}}}function yI(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)yI(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const df=new WeakMap,go=Symbol(""),Cg=Symbol(""),kc=Symbol("");function bn(n,e,t){if(Cr&&bt){let r=df.get(n);r||df.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new Mm),i.map=r,i.key=t),i.track()}}function Ei(n,e,t,r,i,s){const a=df.get(n);if(!a){Dc++;return}const c=h=>{h&&h.trigger()};if(Vm(),e==="clear")a.forEach(c);else{const h=Me(n),d=h&&Om(t);if(h&&t==="length"){const p=Number(r);a.forEach((_,v)=>{(v==="length"||v===kc||!Di(v)&&v>=p)&&c(_)})}else switch((t!==void 0||a.has(void 0))&&c(a.get(t)),d&&c(a.get(kc)),e){case"add":h?d&&c(a.get("length")):(c(a.get(go)),Ua(n)&&c(a.get(Cg)));break;case"delete":h||(c(a.get(go)),Ua(n)&&c(a.get(Cg)));break;case"set":Ua(n)&&c(a.get(go));break}}Nm()}function Gk(n,e){const t=df.get(n);return t&&t.get(e)}function va(n){const e=ot(n);return e===n?e:(bn(e,"iterate",kc),vr(n)?e:e.map(An))}function Xf(n){return bn(n=ot(n),"iterate",kc),n}const Hk={__proto__:null,[Symbol.iterator](){return Wp(this,Symbol.iterator,An)},concat(...n){return va(this).concat(...n.map(e=>Me(e)?va(e):e))},entries(){return Wp(this,"entries",n=>(n[1]=An(n[1]),n))},every(n,e){return mi(this,"every",n,e,void 0,arguments)},filter(n,e){return mi(this,"filter",n,e,t=>t.map(An),arguments)},find(n,e){return mi(this,"find",n,e,An,arguments)},findIndex(n,e){return mi(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return mi(this,"findLast",n,e,An,arguments)},findLastIndex(n,e){return mi(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return mi(this,"forEach",n,e,void 0,arguments)},includes(...n){return Gp(this,"includes",n)},indexOf(...n){return Gp(this,"indexOf",n)},join(n){return va(this).join(n)},lastIndexOf(...n){return Gp(this,"lastIndexOf",n)},map(n,e){return mi(this,"map",n,e,void 0,arguments)},pop(){return Hu(this,"pop")},push(...n){return Hu(this,"push",n)},reduce(n,...e){return Gv(this,"reduce",n,e)},reduceRight(n,...e){return Gv(this,"reduceRight",n,e)},shift(){return Hu(this,"shift")},some(n,e){return mi(this,"some",n,e,void 0,arguments)},splice(...n){return Hu(this,"splice",n)},toReversed(){return va(this).toReversed()},toSorted(n){return va(this).toSorted(n)},toSpliced(...n){return va(this).toSpliced(...n)},unshift(...n){return Hu(this,"unshift",n)},values(){return Wp(this,"values",An)}};function Wp(n,e,t){const r=Xf(n),i=r[e]();return r!==n&&!vr(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const Qk=Array.prototype;function mi(n,e,t,r,i,s){const a=Xf(n),c=a!==n&&!vr(n),h=a[e];if(h!==Qk[e]){const _=h.apply(n,s);return c?An(_):_}let d=t;a!==n&&(c?d=function(_,v){return t.call(this,An(_),v,n)}:t.length>2&&(d=function(_,v){return t.call(this,_,v,n)}));const p=h.call(a,d,r);return c&&i?i(p):p}function Gv(n,e,t,r){const i=Xf(n);let s=t;return i!==n&&(vr(n)?t.length>3&&(s=function(a,c,h){return t.call(this,a,c,h,n)}):s=function(a,c,h){return t.call(this,a,An(c),h,n)}),i[e](s,...r)}function Gp(n,e,t){const r=ot(n);bn(r,"iterate",kc);const i=r[e](...t);return(i===-1||i===!1)&&Bm(t[0])?(t[0]=ot(t[0]),r[e](...t)):i}function Hu(n,e,t=[]){Cs(),Vm();const r=ot(n)[e].apply(n,t);return Nm(),xs(),r}const Jk=xm("__proto__,__v_isRef,__isVue"),vI=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Di));function Yk(n){Di(n)||(n=String(n));const e=ot(this);return bn(e,"has",n),e.hasOwnProperty(n)}class wI{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?aO:bI:s?TI:II).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Me(e);if(!i){let h;if(a&&(h=Hk[t]))return h;if(t==="hasOwnProperty")return Yk}const c=Reflect.get(e,t,jt(e)?e:r);return(Di(t)?vI.has(t):Jk(t))||(i||bn(e,"get",t),s)?c:jt(c)?a&&Om(t)?c:c.value:Pt(c)?i?SI(c):Mo(c):c}}class EI extends wI{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const h=wo(s);if(!vr(r)&&!wo(r)&&(s=ot(s),r=ot(r)),!Me(e)&&jt(s)&&!jt(r))return h?!1:(s.value=r,!0)}const a=Me(e)&&Om(t)?Number(t)<e.length:ft(e,t),c=Reflect.set(e,t,r,jt(e)?e:i);return e===ot(i)&&(a?ys(r,s)&&Ei(e,"set",t,r):Ei(e,"add",t,r)),c}deleteProperty(e,t){const r=ft(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Ei(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Di(t)||!vI.has(t))&&bn(e,"has",t),r}ownKeys(e){return bn(e,"iterate",Me(e)?"length":go),Reflect.ownKeys(e)}}class Xk extends wI{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Zk=new EI,eO=new Xk,tO=new EI(!0);const xg=n=>n,Vh=n=>Reflect.getPrototypeOf(n);function nO(n,e,t){return function(...r){const i=this.__v_raw,s=ot(i),a=Ua(s),c=n==="entries"||n===Symbol.iterator&&a,h=n==="keys"&&a,d=i[n](...r),p=t?xg:e?Dg:An;return!e&&bn(s,"iterate",h?Cg:go),{next(){const{value:_,done:v}=d.next();return v?{value:_,done:v}:{value:c?[p(_[0]),p(_[1])]:p(_),done:v}},[Symbol.iterator](){return this}}}}function Nh(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function rO(n,e){const t={get(i){const s=this.__v_raw,a=ot(s),c=ot(i);n||(ys(i,c)&&bn(a,"get",i),bn(a,"get",c));const{has:h}=Vh(a),d=e?xg:n?Dg:An;if(h.call(a,i))return d(s.get(i));if(h.call(a,c))return d(s.get(c));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!n&&bn(ot(i),"iterate",go),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=ot(s),c=ot(i);return n||(ys(i,c)&&bn(a,"has",i),bn(a,"has",c)),i===c?s.has(i):s.has(i)||s.has(c)},forEach(i,s){const a=this,c=a.__v_raw,h=ot(c),d=e?xg:n?Dg:An;return!n&&bn(h,"iterate",go),c.forEach((p,_)=>i.call(s,d(p),d(_),a))}};return Wt(t,n?{add:Nh("add"),set:Nh("set"),delete:Nh("delete"),clear:Nh("clear")}:{add(i){!e&&!vr(i)&&!wo(i)&&(i=ot(i));const s=ot(this);return Vh(s).has.call(s,i)||(s.add(i),Ei(s,"add",i,i)),this},set(i,s){!e&&!vr(s)&&!wo(s)&&(s=ot(s));const a=ot(this),{has:c,get:h}=Vh(a);let d=c.call(a,i);d||(i=ot(i),d=c.call(a,i));const p=h.call(a,i);return a.set(i,s),d?ys(s,p)&&Ei(a,"set",i,s):Ei(a,"add",i,s),this},delete(i){const s=ot(this),{has:a,get:c}=Vh(s);let h=a.call(s,i);h||(i=ot(i),h=a.call(s,i)),c&&c.call(s,i);const d=s.delete(i);return h&&Ei(s,"delete",i,void 0),d},clear(){const i=ot(this),s=i.size!==0,a=i.clear();return s&&Ei(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=nO(i,n,e)}),t}function Fm(n,e){const t=rO(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(ft(t,i)&&i in r?t:r,i,s)}const iO={get:Fm(!1,!1)},sO={get:Fm(!1,!0)},oO={get:Fm(!0,!1)};const II=new WeakMap,TI=new WeakMap,bI=new WeakMap,aO=new WeakMap;function uO(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cO(n){return n.__v_skip||!Object.isExtensible(n)?0:uO(kk(n))}function Mo(n){return wo(n)?n:Um(n,!1,Zk,iO,II)}function AI(n){return Um(n,!1,tO,sO,TI)}function SI(n){return Um(n,!0,eO,oO,bI)}function Um(n,e,t,r,i){if(!Pt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const a=cO(n);if(a===0)return n;const c=new Proxy(n,a===2?r:t);return i.set(n,c),c}function vs(n){return wo(n)?vs(n.__v_raw):!!(n&&n.__v_isReactive)}function wo(n){return!!(n&&n.__v_isReadonly)}function vr(n){return!!(n&&n.__v_isShallow)}function Bm(n){return n?!!n.__v_raw:!1}function ot(n){const e=n&&n.__v_raw;return e?ot(e):n}function Fo(n){return!ft(n,"__v_skip")&&Object.isExtensible(n)&&iI(n,"__v_skip",!0),n}const An=n=>Pt(n)?Mo(n):n,Dg=n=>Pt(n)?SI(n):n;function jt(n){return n?n.__v_isRef===!0:!1}function Eo(n){return RI(n,!1)}function lO(n){return RI(n,!0)}function RI(n,e){return jt(n)?n:new hO(n,e)}class hO{constructor(e,t){this.dep=new Mm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ot(e),this._value=t?e:An(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||vr(e)||wo(e);e=r?e:ot(e),ys(e,t)&&(this._rawValue=e,this._value=r?e:An(e),this.dep.trigger())}}function mo(n){return jt(n)?n.value:n}const fO={get:(n,e,t)=>e==="__v_raw"?n:mo(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return jt(i)&&!jt(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function PI(n){return vs(n)?n:new Proxy(n,fO)}function dO(n){const e=Me(n)?new Array(n.length):{};for(const t in n)e[t]=gO(n,t);return e}class pO{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Gk(ot(this._object),this._key)}}function gO(n,e,t){const r=n[e];return jt(r)?r:new pO(n,e,t)}class mO{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Mm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Dc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return dI(this,!0),!0}get value(){const e=this.dep.track();return mI(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _O(n,e,t=!1){let r,i;return Ke(n)?r=n:(r=n.get,i=n.set),new mO(r,i,t)}const Lh={},pf=new WeakMap;let oo;function yO(n,e=!1,t=oo){if(t){let r=pf.get(t);r||pf.set(t,r=[]),r.push(n)}}function vO(n,e,t=It){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:c,call:h}=t,d=X=>i?X:vr(X)||i===!1||i===0?Ii(X,1):Ii(X);let p,_,v,I,V=!1,M=!1;if(jt(n)?(_=()=>n.value,V=vr(n)):vs(n)?(_=()=>d(n),V=!0):Me(n)?(M=!0,V=n.some(X=>vs(X)||vr(X)),_=()=>n.map(X=>{if(jt(X))return X.value;if(vs(X))return d(X);if(Ke(X))return h?h(X,2):X()})):Ke(n)?e?_=h?()=>h(n,2):n:_=()=>{if(v){Cs();try{v()}finally{xs()}}const X=oo;oo=p;try{return h?h(n,3,[I]):n(I)}finally{oo=X}}:_=Pr,e&&i){const X=_,ee=i===!0?1/0:i;_=()=>Ii(X(),ee)}const U=lI(),G=()=>{p.stop(),U&&km(U.effects,p)};if(s&&e){const X=e;e=(...ee)=>{X(...ee),G()}}let J=M?new Array(n.length).fill(Lh):Lh;const W=X=>{if(!(!(p.flags&1)||!p.dirty&&!X))if(e){const ee=p.run();if(i||V||(M?ee.some((ce,C)=>ys(ce,J[C])):ys(ee,J))){v&&v();const ce=oo;oo=p;try{const C=[ee,J===Lh?void 0:M&&J[0]===Lh?[]:J,I];h?h(e,3,C):e(...C),J=ee}finally{oo=ce}}}else p.run()};return c&&c(W),p=new hI(_),p.scheduler=a?()=>a(W,!1):W,I=X=>yO(X,!1,p),v=p.onStop=()=>{const X=pf.get(p);if(X){if(h)h(X,4);else for(const ee of X)ee();pf.delete(p)}},e?r?W(!0):J=p.run():a?a(W.bind(null,!0),!0):p.run(),G.pause=p.pause.bind(p),G.resume=p.resume.bind(p),G.stop=G,G}function Ii(n,e=1/0,t){if(e<=0||!Pt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,jt(n))Ii(n.value,e,t);else if(Me(n))for(let r=0;r<n.length;r++)Ii(n[r],e,t);else if(eI(n)||Ua(n))n.forEach(r=>{Ii(r,e,t)});else if(rI(n)){for(const r in n)Ii(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Ii(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sl(n,e,t,r){try{return r?n(...r):n()}catch(i){Zf(i,e,t)}}function Dr(n,e,t,r){if(Ke(n)){const i=sl(n,e,t,r);return i&&tI(i)&&i.catch(s=>{Zf(s,e,t)}),i}if(Me(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Dr(n[s],e,t,r));return i}}function Zf(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||It;if(e){let c=e.parent;const h=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;c;){const p=c.ec;if(p){for(let _=0;_<p.length;_++)if(p[_](n,h,d)===!1)return}c=c.parent}if(s){Cs(),sl(s,null,10,[n,h,d]),xs();return}}wO(n,t,i,r,a)}function wO(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Ln=[];let jr=-1;const Ba=[];let as=null,Ca=0;const CI=Promise.resolve();let gf=null;function $m(n){const e=gf||CI;return n?e.then(this?n.bind(this):n):e}function EO(n){let e=jr+1,t=Ln.length;for(;e<t;){const r=e+t>>>1,i=Ln[r],s=Oc(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function qm(n){if(!(n.flags&1)){const e=Oc(n),t=Ln[Ln.length-1];!t||!(n.flags&2)&&e>=Oc(t)?Ln.push(n):Ln.splice(EO(e),0,n),n.flags|=1,xI()}}function xI(){gf||(gf=CI.then(kI))}function IO(n){Me(n)?Ba.push(...n):as&&n.id===-1?as.splice(Ca+1,0,n):n.flags&1||(Ba.push(n),n.flags|=1),xI()}function Hv(n,e,t=jr+1){for(;t<Ln.length;t++){const r=Ln[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Ln.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function DI(n){if(Ba.length){const e=[...new Set(Ba)].sort((t,r)=>Oc(t)-Oc(r));if(Ba.length=0,as){as.push(...e);return}for(as=e,Ca=0;Ca<as.length;Ca++){const t=as[Ca];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}as=null,Ca=0}}const Oc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function kI(n){const e=Pr;try{for(jr=0;jr<Ln.length;jr++){const t=Ln[jr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),sl(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;jr<Ln.length;jr++){const t=Ln[jr];t&&(t.flags&=-2)}jr=-1,Ln.length=0,DI(),gf=null,(Ln.length||Ba.length)&&kI()}}let rn=null,OI=null;function mf(n){const e=rn;return rn=n,OI=n&&n.type.__scopeId||null,e}function TO(n,e=rn,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&ow(-1);const s=mf(e);let a;try{a=n(...i)}finally{mf(s),r._d&&ow(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function VI(n,e){if(rn===null)return n;const t=sd(rn),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,c,h=It]=e[i];s&&(Ke(s)&&(s={mounted:s,updated:s}),s.deep&&Ii(a),r.push({dir:s,instance:t,value:a,oldValue:void 0,arg:c,modifiers:h}))}return n}function to(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const c=i[a];s&&(c.oldValue=s[a].value);let h=c.dir[r];h&&(Cs(),Dr(h,t,8,[n.el,c,n,e]),xs())}}const NI=Symbol("_vte"),LI=n=>n.__isTeleport,_c=n=>n&&(n.disabled||n.disabled===""),bO=n=>n&&(n.defer||n.defer===""),Qv=n=>typeof SVGElement!="undefined"&&n instanceof SVGElement,Jv=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,kg=(n,e)=>{const t=n&&n.to;return Mt(t)?e?e(t):null:t},AO={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,a,c,h,d){const{mc:p,pc:_,pbc:v,o:{insert:I,querySelector:V,createText:M,createComment:U}}=d,G=_c(e.props);let{shapeFlag:J,children:W,dynamicChildren:X}=e;if(n==null){const ee=e.el=M(""),ce=e.anchor=M("");I(ee,t,r),I(ce,t,r);const C=(A,D)=>{J&16&&(i&&i.isCE&&(i.ce._teleportTarget=A),p(W,A,D,i,s,a,c,h))},S=()=>{const A=e.target=kg(e.props,V),D=MI(A,e,M,I);A&&(a!=="svg"&&Qv(A)?a="svg":a!=="mathml"&&Jv(A)&&(a="mathml"),G||(C(A,D),Gh(e,!1)))};G&&(C(t,ce),Gh(e,!0)),bO(e.props)?Gn(S,s):S()}else{e.el=n.el,e.targetStart=n.targetStart;const ee=e.anchor=n.anchor,ce=e.target=n.target,C=e.targetAnchor=n.targetAnchor,S=_c(n.props),A=S?t:ce,D=S?ee:C;if(a==="svg"||Qv(ce)?a="svg":(a==="mathml"||Jv(ce))&&(a="mathml"),X?(v(n.dynamicChildren,X,A,i,s,a,c),Gm(n,e,!0)):h||_(n,e,A,D,i,s,a,c,!1),G)S?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):Mh(e,t,ee,d,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const N=e.target=kg(e.props,V);N&&Mh(e,N,null,d,0)}else S&&Mh(e,ce,C,d,1);Gh(e,G)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:c,anchor:h,targetStart:d,targetAnchor:p,target:_,props:v}=n;if(_&&(i(d),i(p)),s&&i(h),a&16){const I=s||!_c(v);for(let V=0;V<c.length;V++){const M=c[V];r(M,e,t,I,!!M.dynamicChildren)}}},move:Mh,hydrate:SO};function Mh(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:a,anchor:c,shapeFlag:h,children:d,props:p}=n,_=s===2;if(_&&r(a,e,t),(!_||_c(p))&&h&16)for(let v=0;v<d.length;v++)i(d[v],e,t,2);_&&r(c,e,t)}function SO(n,e,t,r,i,s,{o:{nextSibling:a,parentNode:c,querySelector:h,insert:d,createText:p}},_){const v=e.target=kg(e.props,h);if(v){const I=_c(e.props),V=v._lpa||v.firstChild;if(e.shapeFlag&16)if(I)e.anchor=_(a(n),e,c(n),t,r,i,s),e.targetStart=V,e.targetAnchor=V&&a(V);else{e.anchor=a(n);let M=V;for(;M;){if(M&&M.nodeType===8){if(M.data==="teleport start anchor")e.targetStart=M;else if(M.data==="teleport anchor"){e.targetAnchor=M,v._lpa=e.targetAnchor&&a(e.targetAnchor);break}}M=a(M)}e.targetAnchor||MI(v,e,p,d),_(V&&a(V),e,v,t,r,i,s)}Gh(e,I)}return e.anchor&&a(e.anchor)}const R9=AO;function Gh(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function MI(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[NI]=s,n&&(r(i,n),r(s,n)),s}const us=Symbol("_leaveCb"),Fh=Symbol("_enterCb");function FI(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jI(()=>{n.isMounted=!0}),nd(()=>{n.isUnmounting=!0}),n}const _r=[Function,Array],UI={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_r,onEnter:_r,onAfterEnter:_r,onEnterCancelled:_r,onBeforeLeave:_r,onLeave:_r,onAfterLeave:_r,onLeaveCancelled:_r,onBeforeAppear:_r,onAppear:_r,onAfterAppear:_r,onAppearCancelled:_r},BI=n=>{const e=n.subTree;return e.component?BI(e.component):e},RO={name:"BaseTransition",props:UI,setup(n,{slots:e}){const t=ol(),r=FI();return()=>{const i=e.default&&zm(e.default(),!0);if(!i||!i.length)return;const s=$I(i),a=ot(n),{mode:c}=a;if(r.isLeaving)return Hp(s);const h=Yv(s);if(!h)return Hp(s);let d=Vc(h,a,r,t,v=>d=v);h.type!==Mn&&Io(h,d);const p=t.subTree,_=p&&Yv(p);if(_&&_.type!==Mn&&!co(h,_)&&BI(t).type!==Mn){const v=Vc(_,a,r,t);if(Io(_,v),c==="out-in"&&h.type!==Mn)return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete v.afterLeave},Hp(s);c==="in-out"&&h.type!==Mn&&(v.delayLeave=(I,V,M)=>{const U=qI(r,_);U[String(_.key)]=_,I[us]=()=>{V(),I[us]=void 0,delete d.delayedLeave},d.delayedLeave=M})}return s}}};function $I(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Mn){e=t;break}}return e}const PO=RO;function qI(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Vc(n,e,t,r,i){const{appear:s,mode:a,persisted:c=!1,onBeforeEnter:h,onEnter:d,onAfterEnter:p,onEnterCancelled:_,onBeforeLeave:v,onLeave:I,onAfterLeave:V,onLeaveCancelled:M,onBeforeAppear:U,onAppear:G,onAfterAppear:J,onAppearCancelled:W}=e,X=String(n.key),ee=qI(t,n),ce=(A,D)=>{A&&Dr(A,r,9,D)},C=(A,D)=>{const N=D[1];ce(A,D),Me(A)?A.every(O=>O.length<=1)&&N():A.length<=1&&N()},S={mode:a,persisted:c,beforeEnter(A){let D=h;if(!t.isMounted)if(s)D=U||h;else return;A[us]&&A[us](!0);const N=ee[X];N&&co(n,N)&&N.el[us]&&N.el[us](),ce(D,[A])},enter(A){let D=d,N=p,O=_;if(!t.isMounted)if(s)D=G||d,N=J||p,O=W||_;else return;let P=!1;const fe=A[Fh]=We=>{P||(P=!0,We?ce(O,[A]):ce(N,[A]),S.delayedLeave&&S.delayedLeave(),A[Fh]=void 0)};D?C(D,[A,fe]):fe()},leave(A,D){const N=String(n.key);if(A[Fh]&&A[Fh](!0),t.isUnmounting)return D();ce(v,[A]);let O=!1;const P=A[us]=fe=>{O||(O=!0,D(),fe?ce(M,[A]):ce(V,[A]),A[us]=void 0,ee[N]===n&&delete ee[N])};ee[N]=n,I?C(I,[A,P]):P()},clone(A){const D=Vc(A,e,t,r,i);return i&&i(D),D}};return S}function Hp(n){if(ed(n))return n=As(n),n.children=null,n}function Yv(n){if(!ed(n))return LI(n.type)&&n.children?$I(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ke(t.default))return t.default()}}function Io(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Io(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function zm(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let a=n[s];const c=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===Qn?(a.patchFlag&128&&i++,r=r.concat(zm(a.children,e,c))):(e||a.type!==Mn)&&r.push(c!=null?As(a,{key:c}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Km(n,e){return Ke(n)?(()=>Wt({name:n.name},e,{setup:n}))():n}function zI(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Og(n,e,t,r,i=!1){if(Me(n)){n.forEach((V,M)=>Og(V,e&&(Me(e)?e[M]:e),t,r,i));return}if($a(r)&&!i)return;const s=r.shapeFlag&4?sd(r.component):r.el,a=i?null:s,{i:c,r:h}=n,d=e&&e.r,p=c.refs===It?c.refs={}:c.refs,_=c.setupState,v=ot(_),I=_===It?()=>!1:V=>ft(v,V);if(d!=null&&d!==h&&(Mt(d)?(p[d]=null,I(d)&&(_[d]=null)):jt(d)&&(d.value=null)),Ke(h))sl(h,c,12,[a,p]);else{const V=Mt(h),M=jt(h);if(V||M){const U=()=>{if(n.f){const G=V?I(h)?_[h]:p[h]:h.value;i?Me(G)&&km(G,s):Me(G)?G.includes(s)||G.push(s):V?(p[h]=[s],I(h)&&(_[h]=p[h])):(h.value=[s],n.k&&(p[n.k]=h.value))}else V?(p[h]=a,I(h)&&(_[h]=a)):M&&(h.value=a,n.k&&(p[n.k]=a))};a?(U.id=-1,Gn(U,t)):U()}}}Qf().requestIdleCallback;Qf().cancelIdleCallback;const $a=n=>!!n.type.__asyncLoader,ed=n=>n.type.__isKeepAlive;function CO(n,e){KI(n,"a",e)}function xO(n,e){KI(n,"da",e)}function KI(n,e,t=hn){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(td(e,r,t),t){let i=t.parent;for(;i&&i.parent;)ed(i.parent.vnode)&&DO(r,e,t,i),i=i.parent}}function DO(n,e,t,r){const i=td(e,n,r,!0);GI(()=>{km(r[e],i)},t)}function td(n,e,t=hn,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{Cs();const c=al(t),h=Dr(e,t,n,a);return c(),xs(),h});return r?i.unshift(s):i.push(s),s}}const ki=n=>(e,t=hn)=>{(!Mc||n==="sp")&&td(n,(...r)=>e(...r),t)},kO=ki("bm"),jI=ki("m"),OO=ki("bu"),WI=ki("u"),nd=ki("bum"),GI=ki("um"),VO=ki("sp"),NO=ki("rtg"),LO=ki("rtc");function MO(n,e=hn){td("ec",n,e)}const HI="components";function FO(n,e){return BO(HI,n,!0,e)||n}const UO=Symbol.for("v-ndc");function BO(n,e,t=!0,r=!1){const i=rn||hn;if(i){const s=i.type;if(n===HI){const c=PV(s,!1);if(c&&(c===e||c===Er(e)||c===Hf(Er(e))))return s}const a=Xv(i[n]||s[n],e)||Xv(i.appContext[n],e);return!a&&r?s:a}}function Xv(n,e){return n&&(n[e]||n[Er(e)]||n[Hf(Er(e))])}function P9(n,e,t,r){let i;const s=t&&t[r],a=Me(n);if(a||Mt(n)){const c=a&&vs(n);let h=!1;c&&(h=!vr(n),n=Xf(n)),i=new Array(n.length);for(let d=0,p=n.length;d<p;d++)i[d]=e(h?An(n[d]):n[d],d,void 0,s&&s[d])}else if(typeof n=="number"){i=new Array(n);for(let c=0;c<n;c++)i[c]=e(c+1,c,void 0,s&&s[c])}else if(Pt(n))if(n[Symbol.iterator])i=Array.from(n,(c,h)=>e(c,h,void 0,s&&s[h]));else{const c=Object.keys(n);i=new Array(c.length);for(let h=0,d=c.length;h<d;h++){const p=c[h];i[h]=e(n[p],p,h,s&&s[h])}}else i=[];return t&&(t[r]=i),i}function C9(n,e,t={},r,i){if(rn.ce||rn.parent&&$a(rn.parent)&&rn.parent.ce)return e!=="default"&&(t.name=e),yf(),vf(Qn,null,[Fn("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),yf();const a=s&&QI(s(t)),c=t.key||a&&a.key,h=vf(Qn,{key:(c&&!Di(c)?c:`_${e}`)+(!a&&r?"_fb":"")},a||(r?r():[]),a&&n._===1?64:-2);return!i&&h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function QI(n){return n.some(e=>Lc(e)?!(e.type===Mn||e.type===Qn&&!QI(e.children)):!0)?n:null}const Vg=n=>n?gT(n)?sd(n):Vg(n.parent):null,yc=Wt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Vg(n.parent),$root:n=>Vg(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>jm(n),$forceUpdate:n=>n.f||(n.f=()=>{qm(n.update)}),$nextTick:n=>n.n||(n.n=$m.bind(n.proxy)),$watch:n=>uV.bind(n)}),Qp=(n,e)=>n!==It&&!n.__isScriptSetup&&ft(n,e),$O={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:a,type:c,appContext:h}=n;let d;if(e[0]!=="$"){const I=a[e];if(I!==void 0)switch(I){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Qp(r,e))return a[e]=1,r[e];if(i!==It&&ft(i,e))return a[e]=2,i[e];if((d=n.propsOptions[0])&&ft(d,e))return a[e]=3,s[e];if(t!==It&&ft(t,e))return a[e]=4,t[e];Ng&&(a[e]=0)}}const p=yc[e];let _,v;if(p)return e==="$attrs"&&bn(n.attrs,"get",""),p(n);if((_=c.__cssModules)&&(_=_[e]))return _;if(t!==It&&ft(t,e))return a[e]=4,t[e];if(v=h.config.globalProperties,ft(v,e))return v[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Qp(i,e)?(i[e]=t,!0):r!==It&&ft(r,e)?(r[e]=t,!0):ft(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},a){let c;return!!t[a]||n!==It&&ft(n,a)||Qp(e,a)||(c=s[0])&&ft(c,a)||ft(r,a)||ft(yc,a)||ft(i.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ft(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Zv(n){return Me(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Ng=!0;function qO(n){const e=jm(n),t=n.proxy,r=n.ctx;Ng=!1,e.beforeCreate&&ew(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:a,watch:c,provide:h,inject:d,created:p,beforeMount:_,mounted:v,beforeUpdate:I,updated:V,activated:M,deactivated:U,beforeDestroy:G,beforeUnmount:J,destroyed:W,unmounted:X,render:ee,renderTracked:ce,renderTriggered:C,errorCaptured:S,serverPrefetch:A,expose:D,inheritAttrs:N,components:O,directives:P,filters:fe}=e;if(d&&zO(d,r,null),a)for(const Ce in a){const $e=a[Ce];Ke($e)&&(r[Ce]=$e.bind(t))}if(i){const Ce=i.call(t,t);Pt(Ce)&&(n.data=Mo(Ce))}if(Ng=!0,s)for(const Ce in s){const $e=s[Ce],Cn=Ke($e)?$e.bind(t,t):Ke($e.get)?$e.get.bind(t,t):Pr,_n=!Ke($e)&&Ke($e.set)?$e.set.bind(t):Pr,Dt=Be({get:Cn,set:_n});Object.defineProperty(r,Ce,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:St=>Dt.value=St})}if(c)for(const Ce in c)JI(c[Ce],r,t,Ce);if(h){const Ce=Ke(h)?h.call(t):h;Reflect.ownKeys(Ce).forEach($e=>{Hh($e,Ce[$e])})}p&&ew(p,n,"c");function et(Ce,$e){Me($e)?$e.forEach(Cn=>Ce(Cn.bind(t))):$e&&Ce($e.bind(t))}if(et(kO,_),et(jI,v),et(OO,I),et(WI,V),et(CO,M),et(xO,U),et(MO,S),et(LO,ce),et(NO,C),et(nd,J),et(GI,X),et(VO,A),Me(D))if(D.length){const Ce=n.exposed||(n.exposed={});D.forEach($e=>{Object.defineProperty(Ce,$e,{get:()=>t[$e],set:Cn=>t[$e]=Cn})})}else n.exposed||(n.exposed={});ee&&n.render===Pr&&(n.render=ee),N!=null&&(n.inheritAttrs=N),O&&(n.components=O),P&&(n.directives=P),A&&zI(n)}function zO(n,e,t=Pr){Me(n)&&(n=Lg(n));for(const r in n){const i=n[r];let s;Pt(i)?"default"in i?s=xr(i.from||r,i.default,!0):s=xr(i.from||r):s=xr(i),jt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function ew(n,e,t){Dr(Me(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function JI(n,e,t,r){let i=r.includes(".")?cT(t,r):()=>t[r];if(Mt(n)){const s=e[n];Ke(s)&&vc(i,s)}else if(Ke(n))vc(i,n.bind(t));else if(Pt(n))if(Me(n))n.forEach(s=>JI(s,e,t,r));else{const s=Ke(n.handler)?n.handler.bind(t):e[n.handler];Ke(s)&&vc(i,s,n)}}function jm(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,c=s.get(e);let h;return c?h=c:!i.length&&!t&&!r?h=e:(h={},i.length&&i.forEach(d=>_f(h,d,a,!0)),_f(h,e,a)),Pt(e)&&s.set(e,h),h}function _f(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&_f(n,s,t,!0),i&&i.forEach(a=>_f(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const c=KO[a]||t&&t[a];n[a]=c?c(n[a],e[a]):e[a]}return n}const KO={data:tw,props:nw,emits:nw,methods:sc,computed:sc,beforeCreate:Vn,created:Vn,beforeMount:Vn,mounted:Vn,beforeUpdate:Vn,updated:Vn,beforeDestroy:Vn,beforeUnmount:Vn,destroyed:Vn,unmounted:Vn,activated:Vn,deactivated:Vn,errorCaptured:Vn,serverPrefetch:Vn,components:sc,directives:sc,watch:WO,provide:tw,inject:jO};function tw(n,e){return e?n?function(){return Wt(Ke(n)?n.call(this,this):n,Ke(e)?e.call(this,this):e)}:e:n}function jO(n,e){return sc(Lg(n),Lg(e))}function Lg(n){if(Me(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Vn(n,e){return n?[...new Set([].concat(n,e))]:e}function sc(n,e){return n?Wt(Object.create(null),n,e):e}function nw(n,e){return n?Me(n)&&Me(e)?[...new Set([...n,...e])]:Wt(Object.create(null),Zv(n),Zv(e!=null?e:{})):e}function WO(n,e){if(!n)return e;if(!e)return n;const t=Wt(Object.create(null),n);for(const r in e)t[r]=Vn(n[r],e[r]);return t}function YI(){return{app:null,config:{isNativeTag:xk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GO=0;function HO(n,e){return function(r,i=null){Ke(r)||(r=Wt({},r)),i!=null&&!Pt(i)&&(i=null);const s=YI(),a=new WeakSet,c=[];let h=!1;const d=s.app={_uid:GO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:xV,get config(){return s.config},set config(p){},use(p,..._){return a.has(p)||(p&&Ke(p.install)?(a.add(p),p.install(d,..._)):Ke(p)&&(a.add(p),p(d,..._))),d},mixin(p){return s.mixins.includes(p)||s.mixins.push(p),d},component(p,_){return _?(s.components[p]=_,d):s.components[p]},directive(p,_){return _?(s.directives[p]=_,d):s.directives[p]},mount(p,_,v){if(!h){const I=d._ceVNode||Fn(r,i);return I.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),_&&e?e(I,p):n(I,p,v),h=!0,d._container=p,p.__vue_app__=d,sd(I.component)}},onUnmount(p){c.push(p)},unmount(){h&&(Dr(c,d._instance,16),n(null,d._container),delete d._container.__vue_app__)},provide(p,_){return s.provides[p]=_,d},runWithContext(p){const _=_o;_o=d;try{return p()}finally{_o=_}}};return d}}let _o=null;function Hh(n,e){if(hn){let t=hn.provides;const r=hn.parent&&hn.parent.provides;r===t&&(t=hn.provides=Object.create(r)),t[n]=e}}function xr(n,e,t=!1){const r=hn||rn;if(r||_o){const i=_o?_o._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Ke(e)?e.call(r&&r.proxy):e}}function QO(){return!!(hn||rn||_o)}const XI={},ZI=()=>Object.create(XI),eT=n=>Object.getPrototypeOf(n)===XI;function JO(n,e,t,r=!1){const i={},s=ZI();n.propsDefaults=Object.create(null),tT(n,e,i,s);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=r?i:AI(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function YO(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=n,c=ot(i),[h]=n.propsOptions;let d=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=n.vnode.dynamicProps;for(let _=0;_<p.length;_++){let v=p[_];if(rd(n.emitsOptions,v))continue;const I=e[v];if(h)if(ft(s,v))I!==s[v]&&(s[v]=I,d=!0);else{const V=Er(v);i[V]=Mg(h,c,V,I,n,!1)}else I!==s[v]&&(s[v]=I,d=!0)}}}else{tT(n,e,i,s)&&(d=!0);let p;for(const _ in c)(!e||!ft(e,_)&&((p=Lo(_))===_||!ft(e,p)))&&(h?t&&(t[_]!==void 0||t[p]!==void 0)&&(i[_]=Mg(h,c,_,void 0,n,!0)):delete i[_]);if(s!==c)for(const _ in s)(!e||!ft(e,_)&&!0)&&(delete s[_],d=!0)}d&&Ei(n.attrs,"set","")}function tT(n,e,t,r){const[i,s]=n.propsOptions;let a=!1,c;if(e)for(let h in e){if(pc(h))continue;const d=e[h];let p;i&&ft(i,p=Er(h))?!s||!s.includes(p)?t[p]=d:(c||(c={}))[p]=d:rd(n.emitsOptions,h)||(!(h in r)||d!==r[h])&&(r[h]=d,a=!0)}if(s){const h=ot(t),d=c||It;for(let p=0;p<s.length;p++){const _=s[p];t[_]=Mg(i,h,_,d[_],n,!ft(d,_))}}return a}function Mg(n,e,t,r,i,s){const a=n[t];if(a!=null){const c=ft(a,"default");if(c&&r===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&Ke(h)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const p=al(i);r=d[t]=h.call(null,e),p()}}else r=h;i.ce&&i.ce._setProp(t,r)}a[0]&&(s&&!c?r=!1:a[1]&&(r===""||r===Lo(t))&&(r=!0))}return r}const XO=new WeakMap;function nT(n,e,t=!1){const r=t?XO:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,a={},c=[];let h=!1;if(!Ke(n)){const p=_=>{h=!0;const[v,I]=nT(_,e,!0);Wt(a,v),I&&c.push(...I)};!t&&e.mixins.length&&e.mixins.forEach(p),n.extends&&p(n.extends),n.mixins&&n.mixins.forEach(p)}if(!s&&!h)return Pt(n)&&r.set(n,Fa),Fa;if(Me(s))for(let p=0;p<s.length;p++){const _=Er(s[p]);rw(_)&&(a[_]=It)}else if(s)for(const p in s){const _=Er(p);if(rw(_)){const v=s[p],I=a[_]=Me(v)||Ke(v)?{type:v}:Wt({},v),V=I.type;let M=!1,U=!0;if(Me(V))for(let G=0;G<V.length;++G){const J=V[G],W=Ke(J)&&J.name;if(W==="Boolean"){M=!0;break}else W==="String"&&(U=!1)}else M=Ke(V)&&V.name==="Boolean";I[0]=M,I[1]=U,(M||ft(I,"default"))&&c.push(_)}}const d=[a,c];return Pt(n)&&r.set(n,d),d}function rw(n){return n[0]!=="$"&&!pc(n)}const rT=n=>n[0]==="_"||n==="$stable",Wm=n=>Me(n)?n.map(Wr):[Wr(n)],ZO=(n,e,t)=>{if(e._n)return e;const r=TO((...i)=>Wm(e(...i)),t);return r._c=!1,r},iT=(n,e,t)=>{const r=n._ctx;for(const i in n){if(rT(i))continue;const s=n[i];if(Ke(s))e[i]=ZO(i,s,r);else if(s!=null){const a=Wm(s);e[i]=()=>a}}},sT=(n,e)=>{const t=Wm(e);n.slots.default=()=>t},oT=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},eV=(n,e,t)=>{const r=n.slots=ZI();if(n.vnode.shapeFlag&32){const i=e._;i?(oT(r,e,t),t&&iI(r,"_",i,!0)):iT(e,r)}else e&&sT(n,e)},tV=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,a=It;if(r.shapeFlag&32){const c=e._;c?t&&c===1?s=!1:oT(i,e,t):(s=!e.$stable,iT(e,i)),a=e}else e&&(sT(n,e),a={default:1});if(s)for(const c in i)!rT(c)&&a[c]==null&&delete i[c]},Gn=gV;function nV(n){return rV(n)}function rV(n,e){const t=Qf();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:c,createComment:h,setText:d,setElementText:p,parentNode:_,nextSibling:v,setScopeId:I=Pr,insertStaticContent:V}=n,M=(R,x,z,re=null,H=null,ae=null,pe=void 0,le=null,ue=!!x.dynamicChildren)=>{if(R===x)return;R&&!co(R,x)&&(re=Y(R),St(R,H,ae,!0),R=null),x.patchFlag===-2&&(ue=!1,x.dynamicChildren=null);const{type:oe,ref:Pe,shapeFlag:ge}=x;switch(oe){case id:U(R,x,z,re);break;case Mn:G(R,x,z,re);break;case Xp:R==null&&J(x,z,re,pe);break;case Qn:O(R,x,z,re,H,ae,pe,le,ue);break;default:ge&1?ee(R,x,z,re,H,ae,pe,le,ue):ge&6?P(R,x,z,re,H,ae,pe,le,ue):(ge&64||ge&128)&&oe.process(R,x,z,re,H,ae,pe,le,ue,Ee)}Pe!=null&&H&&Og(Pe,R&&R.ref,ae,x||R,!x)},U=(R,x,z,re)=>{if(R==null)r(x.el=c(x.children),z,re);else{const H=x.el=R.el;x.children!==R.children&&d(H,x.children)}},G=(R,x,z,re)=>{R==null?r(x.el=h(x.children||""),z,re):x.el=R.el},J=(R,x,z,re)=>{[R.el,R.anchor]=V(R.children,x,z,re,R.el,R.anchor)},W=({el:R,anchor:x},z,re)=>{let H;for(;R&&R!==x;)H=v(R),r(R,z,re),R=H;r(x,z,re)},X=({el:R,anchor:x})=>{let z;for(;R&&R!==x;)z=v(R),i(R),R=z;i(x)},ee=(R,x,z,re,H,ae,pe,le,ue)=>{x.type==="svg"?pe="svg":x.type==="math"&&(pe="mathml"),R==null?ce(x,z,re,H,ae,pe,le,ue):A(R,x,H,ae,pe,le,ue)},ce=(R,x,z,re,H,ae,pe,le)=>{let ue,oe;const{props:Pe,shapeFlag:ge,transition:Ie,dirs:De}=R;if(ue=R.el=a(R.type,ae,Pe&&Pe.is,Pe),ge&8?p(ue,R.children):ge&16&&S(R.children,ue,null,re,H,Jp(R,ae),pe,le),De&&to(R,null,re,"created"),C(ue,R,R.scopeId,pe,re),Pe){for(const Ne in Pe)Ne!=="value"&&!pc(Ne)&&s(ue,Ne,null,Pe[Ne],ae,re);"value"in Pe&&s(ue,"value",null,Pe.value,ae),(oe=Pe.onVnodeBeforeMount)&&Kr(oe,re,R)}De&&to(R,null,re,"beforeMount");const Re=iV(H,Ie);Re&&Ie.beforeEnter(ue),r(ue,x,z),((oe=Pe&&Pe.onVnodeMounted)||Re||De)&&Gn(()=>{oe&&Kr(oe,re,R),Re&&Ie.enter(ue),De&&to(R,null,re,"mounted")},H)},C=(R,x,z,re,H)=>{if(z&&I(R,z),re)for(let ae=0;ae<re.length;ae++)I(R,re[ae]);if(H){let ae=H.subTree;if(x===ae||hT(ae.type)&&(ae.ssContent===x||ae.ssFallback===x)){const pe=H.vnode;C(R,pe,pe.scopeId,pe.slotScopeIds,H.parent)}}},S=(R,x,z,re,H,ae,pe,le,ue=0)=>{for(let oe=ue;oe<R.length;oe++){const Pe=R[oe]=le?cs(R[oe]):Wr(R[oe]);M(null,Pe,x,z,re,H,ae,pe,le)}},A=(R,x,z,re,H,ae,pe)=>{const le=x.el=R.el;let{patchFlag:ue,dynamicChildren:oe,dirs:Pe}=x;ue|=R.patchFlag&16;const ge=R.props||It,Ie=x.props||It;let De;if(z&&no(z,!1),(De=Ie.onVnodeBeforeUpdate)&&Kr(De,z,x,R),Pe&&to(x,R,z,"beforeUpdate"),z&&no(z,!0),(ge.innerHTML&&Ie.innerHTML==null||ge.textContent&&Ie.textContent==null)&&p(le,""),oe?D(R.dynamicChildren,oe,le,z,re,Jp(x,H),ae):pe||$e(R,x,le,null,z,re,Jp(x,H),ae,!1),ue>0){if(ue&16)N(le,ge,Ie,z,H);else if(ue&2&&ge.class!==Ie.class&&s(le,"class",null,Ie.class,H),ue&4&&s(le,"style",ge.style,Ie.style,H),ue&8){const Re=x.dynamicProps;for(let Ne=0;Ne<Re.length;Ne++){const Xe=Re[Ne],Ht=ge[Xe],kt=Ie[Xe];(kt!==Ht||Xe==="value")&&s(le,Xe,Ht,kt,H,z)}}ue&1&&R.children!==x.children&&p(le,x.children)}else!pe&&oe==null&&N(le,ge,Ie,z,H);((De=Ie.onVnodeUpdated)||Pe)&&Gn(()=>{De&&Kr(De,z,x,R),Pe&&to(x,R,z,"updated")},re)},D=(R,x,z,re,H,ae,pe)=>{for(let le=0;le<x.length;le++){const ue=R[le],oe=x[le],Pe=ue.el&&(ue.type===Qn||!co(ue,oe)||ue.shapeFlag&70)?_(ue.el):z;M(ue,oe,Pe,null,re,H,ae,pe,!0)}},N=(R,x,z,re,H)=>{if(x!==z){if(x!==It)for(const ae in x)!pc(ae)&&!(ae in z)&&s(R,ae,x[ae],null,H,re);for(const ae in z){if(pc(ae))continue;const pe=z[ae],le=x[ae];pe!==le&&ae!=="value"&&s(R,ae,le,pe,H,re)}"value"in z&&s(R,"value",x.value,z.value,H)}},O=(R,x,z,re,H,ae,pe,le,ue)=>{const oe=x.el=R?R.el:c(""),Pe=x.anchor=R?R.anchor:c("");let{patchFlag:ge,dynamicChildren:Ie,slotScopeIds:De}=x;De&&(le=le?le.concat(De):De),R==null?(r(oe,z,re),r(Pe,z,re),S(x.children||[],z,Pe,H,ae,pe,le,ue)):ge>0&&ge&64&&Ie&&R.dynamicChildren?(D(R.dynamicChildren,Ie,z,H,ae,pe,le),(x.key!=null||H&&x===H.subTree)&&Gm(R,x,!0)):$e(R,x,z,Pe,H,ae,pe,le,ue)},P=(R,x,z,re,H,ae,pe,le,ue)=>{x.slotScopeIds=le,R==null?x.shapeFlag&512?H.ctx.activate(x,z,re,pe,ue):fe(x,z,re,H,ae,pe,ue):We(R,x,ue)},fe=(R,x,z,re,H,ae,pe)=>{const le=R.component=TV(R,re,H);if(ed(R)&&(le.ctx.renderer=Ee),bV(le,!1,pe),le.asyncDep){if(H&&H.registerDep(le,et,pe),!R.el){const ue=le.subTree=Fn(Mn);G(null,ue,x,z)}}else et(le,R,x,z,H,ae,pe)},We=(R,x,z)=>{const re=x.component=R.component;if(dV(R,x,z))if(re.asyncDep&&!re.asyncResolved){Ce(re,x,z);return}else re.next=x,re.update();else x.el=R.el,re.vnode=x},et=(R,x,z,re,H,ae,pe)=>{const le=()=>{if(R.isMounted){let{next:ge,bu:Ie,u:De,parent:Re,vnode:Ne}=R;{const Ot=aT(R);if(Ot){ge&&(ge.el=Ne.el,Ce(R,ge,pe)),Ot.asyncDep.then(()=>{R.isUnmounted||le()});return}}let Xe=ge,Ht;no(R,!1),ge?(ge.el=Ne.el,Ce(R,ge,pe)):ge=Ne,Ie&&zp(Ie),(Ht=ge.props&&ge.props.onVnodeBeforeUpdate)&&Kr(Ht,Re,ge,Ne),no(R,!0);const kt=Yp(R),dn=R.subTree;R.subTree=kt,M(dn,kt,_(dn.el),Y(dn),R,H,ae),ge.el=kt.el,Xe===null&&pV(R,kt.el),De&&Gn(De,H),(Ht=ge.props&&ge.props.onVnodeUpdated)&&Gn(()=>Kr(Ht,Re,ge,Ne),H)}else{let ge;const{el:Ie,props:De}=x,{bm:Re,m:Ne,parent:Xe,root:Ht,type:kt}=R,dn=$a(x);if(no(R,!1),Re&&zp(Re),!dn&&(ge=De&&De.onVnodeBeforeMount)&&Kr(ge,Xe,x),no(R,!0),Ie&&at){const Ot=()=>{R.subTree=Yp(R),at(Ie,R.subTree,R,H,null)};dn&&kt.__asyncHydrate?kt.__asyncHydrate(Ie,R,Ot):Ot()}else{Ht.ce&&Ht.ce._injectChildStyle(kt);const Ot=R.subTree=Yp(R);M(null,Ot,z,re,R,H,ae),x.el=Ot.el}if(Ne&&Gn(Ne,H),!dn&&(ge=De&&De.onVnodeMounted)){const Ot=x;Gn(()=>Kr(ge,Xe,Ot),H)}(x.shapeFlag&256||Xe&&$a(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&R.a&&Gn(R.a,H),R.isMounted=!0,x=z=re=null}};R.scope.on();const ue=R.effect=new hI(le);R.scope.off();const oe=R.update=ue.run.bind(ue),Pe=R.job=ue.runIfDirty.bind(ue);Pe.i=R,Pe.id=R.uid,ue.scheduler=()=>qm(Pe),no(R,!0),oe()},Ce=(R,x,z)=>{x.component=R;const re=R.vnode.props;R.vnode=x,R.next=null,YO(R,x.props,re,z),tV(R,x.children,z),Cs(),Hv(R),xs()},$e=(R,x,z,re,H,ae,pe,le,ue=!1)=>{const oe=R&&R.children,Pe=R?R.shapeFlag:0,ge=x.children,{patchFlag:Ie,shapeFlag:De}=x;if(Ie>0){if(Ie&128){_n(oe,ge,z,re,H,ae,pe,le,ue);return}else if(Ie&256){Cn(oe,ge,z,re,H,ae,pe,le,ue);return}}De&8?(Pe&16&&Zt(oe,H,ae),ge!==oe&&p(z,ge)):Pe&16?De&16?_n(oe,ge,z,re,H,ae,pe,le,ue):Zt(oe,H,ae,!0):(Pe&8&&p(z,""),De&16&&S(ge,z,re,H,ae,pe,le,ue))},Cn=(R,x,z,re,H,ae,pe,le,ue)=>{R=R||Fa,x=x||Fa;const oe=R.length,Pe=x.length,ge=Math.min(oe,Pe);let Ie;for(Ie=0;Ie<ge;Ie++){const De=x[Ie]=ue?cs(x[Ie]):Wr(x[Ie]);M(R[Ie],De,z,null,H,ae,pe,le,ue)}oe>Pe?Zt(R,H,ae,!0,!1,ge):S(x,z,re,H,ae,pe,le,ue,ge)},_n=(R,x,z,re,H,ae,pe,le,ue)=>{let oe=0;const Pe=x.length;let ge=R.length-1,Ie=Pe-1;for(;oe<=ge&&oe<=Ie;){const De=R[oe],Re=x[oe]=ue?cs(x[oe]):Wr(x[oe]);if(co(De,Re))M(De,Re,z,null,H,ae,pe,le,ue);else break;oe++}for(;oe<=ge&&oe<=Ie;){const De=R[ge],Re=x[Ie]=ue?cs(x[Ie]):Wr(x[Ie]);if(co(De,Re))M(De,Re,z,null,H,ae,pe,le,ue);else break;ge--,Ie--}if(oe>ge){if(oe<=Ie){const De=Ie+1,Re=De<Pe?x[De].el:re;for(;oe<=Ie;)M(null,x[oe]=ue?cs(x[oe]):Wr(x[oe]),z,Re,H,ae,pe,le,ue),oe++}}else if(oe>Ie)for(;oe<=ge;)St(R[oe],H,ae,!0),oe++;else{const De=oe,Re=oe,Ne=new Map;for(oe=Re;oe<=Ie;oe++){const $t=x[oe]=ue?cs(x[oe]):Wr(x[oe]);$t.key!=null&&Ne.set($t.key,oe)}let Xe,Ht=0;const kt=Ie-Re+1;let dn=!1,Ot=0;const or=new Array(kt);for(oe=0;oe<kt;oe++)or[oe]=0;for(oe=De;oe<=ge;oe++){const $t=R[oe];if(Ht>=kt){St($t,H,ae,!0);continue}let yn;if($t.key!=null)yn=Ne.get($t.key);else for(Xe=Re;Xe<=Ie;Xe++)if(or[Xe-Re]===0&&co($t,x[Xe])){yn=Xe;break}yn===void 0?St($t,H,ae,!0):(or[yn-Re]=oe+1,yn>=Ot?Ot=yn:dn=!0,M($t,x[yn],z,null,H,ae,pe,le,ue),Ht++)}const ei=dn?sV(or):Fa;for(Xe=ei.length-1,oe=kt-1;oe>=0;oe--){const $t=Re+oe,yn=x[$t],qo=$t+1<Pe?x[$t+1].el:re;or[oe]===0?M(null,yn,z,qo,H,ae,pe,le,ue):dn&&(Xe<0||oe!==ei[Xe]?Dt(yn,z,qo,2):Xe--)}}},Dt=(R,x,z,re,H=null)=>{const{el:ae,type:pe,transition:le,children:ue,shapeFlag:oe}=R;if(oe&6){Dt(R.component.subTree,x,z,re);return}if(oe&128){R.suspense.move(x,z,re);return}if(oe&64){pe.move(R,x,z,Ee);return}if(pe===Qn){r(ae,x,z);for(let ge=0;ge<ue.length;ge++)Dt(ue[ge],x,z,re);r(R.anchor,x,z);return}if(pe===Xp){W(R,x,z);return}if(re!==2&&oe&1&&le)if(re===0)le.beforeEnter(ae),r(ae,x,z),Gn(()=>le.enter(ae),H);else{const{leave:ge,delayLeave:Ie,afterLeave:De}=le,Re=()=>r(ae,x,z),Ne=()=>{ge(ae,()=>{Re(),De&&De()})};Ie?Ie(ae,Re,Ne):Ne()}else r(ae,x,z)},St=(R,x,z,re=!1,H=!1)=>{const{type:ae,props:pe,ref:le,children:ue,dynamicChildren:oe,shapeFlag:Pe,patchFlag:ge,dirs:Ie,cacheIndex:De}=R;if(ge===-2&&(H=!1),le!=null&&Og(le,null,z,R,!0),De!=null&&(x.renderCache[De]=void 0),Pe&256){x.ctx.deactivate(R);return}const Re=Pe&1&&Ie,Ne=!$a(R);let Xe;if(Ne&&(Xe=pe&&pe.onVnodeBeforeUnmount)&&Kr(Xe,x,R),Pe&6)fn(R.component,z,re);else{if(Pe&128){R.suspense.unmount(z,re);return}Re&&to(R,null,x,"beforeUnmount"),Pe&64?R.type.remove(R,x,z,Ee,re):oe&&!oe.hasOnce&&(ae!==Qn||ge>0&&ge&64)?Zt(oe,x,z,!1,!0):(ae===Qn&&ge&384||!H&&Pe&16)&&Zt(ue,x,z),re&&Rt(R)}(Ne&&(Xe=pe&&pe.onVnodeUnmounted)||Re)&&Gn(()=>{Xe&&Kr(Xe,x,R),Re&&to(R,null,x,"unmounted")},z)},Rt=R=>{const{type:x,el:z,anchor:re,transition:H}=R;if(x===Qn){Vr(z,re);return}if(x===Xp){X(R);return}const ae=()=>{i(z),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(R.shapeFlag&1&&H&&!H.persisted){const{leave:pe,delayLeave:le}=H,ue=()=>pe(z,ae);le?le(R.el,ae,ue):ue()}else ae()},Vr=(R,x)=>{let z;for(;R!==x;)z=v(R),i(R),R=z;i(x)},fn=(R,x,z)=>{const{bum:re,scope:H,job:ae,subTree:pe,um:le,m:ue,a:oe}=R;iw(ue),iw(oe),re&&zp(re),H.stop(),ae&&(ae.flags|=8,St(pe,R,x,z)),le&&Gn(le,x),Gn(()=>{R.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},Zt=(R,x,z,re=!1,H=!1,ae=0)=>{for(let pe=ae;pe<R.length;pe++)St(R[pe],x,z,re,H)},Y=R=>{if(R.shapeFlag&6)return Y(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const x=v(R.anchor||R.el),z=x&&x[NI];return z?v(z):x};let _e=!1;const de=(R,x,z)=>{R==null?x._vnode&&St(x._vnode,null,null,!0):M(x._vnode||null,R,x,null,null,null,z),x._vnode=R,_e||(_e=!0,Hv(),DI(),_e=!1)},Ee={p:M,um:St,m:Dt,r:Rt,mt:fe,mc:S,pc:$e,pbc:D,n:Y,o:n};let He,at;return e&&([He,at]=e(Ee)),{render:de,hydrate:He,createApp:HO(de,He)}}function Jp({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function no({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function iV(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Gm(n,e,t=!1){const r=n.children,i=e.children;if(Me(r)&&Me(i))for(let s=0;s<r.length;s++){const a=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=cs(i[s]),c.el=a.el),!t&&c.patchFlag!==-2&&Gm(a,c)),c.type===id&&(c.el=a.el)}}function sV(n){const e=n.slice(),t=[0];let r,i,s,a,c;const h=n.length;for(r=0;r<h;r++){const d=n[r];if(d!==0){if(i=t[t.length-1],n[i]<d){e[r]=i,t.push(r);continue}for(s=0,a=t.length-1;s<a;)c=s+a>>1,n[t[c]]<d?s=c+1:a=c;d<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function aT(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:aT(e)}function iw(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const oV=Symbol.for("v-scx"),aV=()=>xr(oV);function vc(n,e,t){return uT(n,e,t)}function uT(n,e,t=It){const{immediate:r,deep:i,flush:s,once:a}=t,c=Wt({},t),h=e&&r||!e&&s!=="post";let d;if(Mc){if(s==="sync"){const I=aV();d=I.__watcherHandles||(I.__watcherHandles=[])}else if(!h){const I=()=>{};return I.stop=Pr,I.resume=Pr,I.pause=Pr,I}}const p=hn;c.call=(I,V,M)=>Dr(I,p,V,M);let _=!1;s==="post"?c.scheduler=I=>{Gn(I,p&&p.suspense)}:s!=="sync"&&(_=!0,c.scheduler=(I,V)=>{V?I():qm(I)}),c.augmentJob=I=>{e&&(I.flags|=4),_&&(I.flags|=2,p&&(I.id=p.uid,I.i=p))};const v=vO(n,e,c);return Mc&&(d?d.push(v):h&&v()),v}function uV(n,e,t){const r=this.proxy,i=Mt(n)?n.includes(".")?cT(r,n):()=>r[n]:n.bind(r,r);let s;Ke(e)?s=e:(s=e.handler,t=e);const a=al(this),c=uT(i,s.bind(r),t);return a(),c}function cT(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const cV=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Er(e)}Modifiers`]||n[`${Lo(e)}Modifiers`];function lV(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||It;let i=t;const s=e.startsWith("update:"),a=s&&cV(r,e.slice(7));a&&(a.trim&&(i=t.map(p=>Mt(p)?p.trim():p)),a.number&&(i=t.map(Nk)));let c,h=r[c=qp(e)]||r[c=qp(Er(e))];!h&&s&&(h=r[c=qp(Lo(e))]),h&&Dr(h,n,6,i);const d=r[c+"Once"];if(d){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,Dr(d,n,6,i)}}function lT(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let a={},c=!1;if(!Ke(n)){const h=d=>{const p=lT(d,e,!0);p&&(c=!0,Wt(a,p))};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}return!s&&!c?(Pt(n)&&r.set(n,null),null):(Me(s)?s.forEach(h=>a[h]=null):Wt(a,s),Pt(n)&&r.set(n,a),a)}function rd(n,e){return!n||!jf(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(n,e[0].toLowerCase()+e.slice(1))||ft(n,Lo(e))||ft(n,e))}function Yp(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:c,emit:h,render:d,renderCache:p,props:_,data:v,setupState:I,ctx:V,inheritAttrs:M}=n,U=mf(n);let G,J;try{if(t.shapeFlag&4){const X=i||r,ee=X;G=Wr(d.call(ee,X,p,_,I,v,V)),J=c}else{const X=e;G=Wr(X.length>1?X(_,{attrs:c,slots:a,emit:h}):X(_,null)),J=e.props?c:hV(c)}}catch(X){wc.length=0,Zf(X,n,1),G=Fn(Mn)}let W=G;if(J&&M!==!1){const X=Object.keys(J),{shapeFlag:ee}=W;X.length&&ee&7&&(s&&X.some(Dm)&&(J=fV(J,s)),W=As(W,J,!1,!0))}return t.dirs&&(W=As(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(t.dirs):t.dirs),t.transition&&Io(W,t.transition),G=W,mf(U),G}const hV=n=>{let e;for(const t in n)(t==="class"||t==="style"||jf(t))&&((e||(e={}))[t]=n[t]);return e},fV=(n,e)=>{const t={};for(const r in n)(!Dm(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function dV(n,e,t){const{props:r,children:i,component:s}=n,{props:a,children:c,patchFlag:h}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&h>=0){if(h&1024)return!0;if(h&16)return r?sw(r,a,d):!!a;if(h&8){const p=e.dynamicProps;for(let _=0;_<p.length;_++){const v=p[_];if(a[v]!==r[v]&&!rd(d,v))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?sw(r,a,d):!0:!!a;return!1}function sw(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!rd(t,s))return!0}return!1}function pV({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const hT=n=>n.__isSuspense;function gV(n,e){e&&e.pendingBranch?Me(n)?e.effects.push(...n):e.effects.push(n):IO(n)}const Qn=Symbol.for("v-fgt"),id=Symbol.for("v-txt"),Mn=Symbol.for("v-cmt"),Xp=Symbol.for("v-stc"),wc=[];let nr=null;function yf(n=!1){wc.push(nr=n?null:[])}function mV(){wc.pop(),nr=wc[wc.length-1]||null}let Nc=1;function ow(n){Nc+=n,n<0&&nr&&(nr.hasOnce=!0)}function fT(n){return n.dynamicChildren=Nc>0?nr||Fa:null,mV(),Nc>0&&nr&&nr.push(n),n}function x9(n,e,t,r,i,s){return fT(pT(n,e,t,r,i,s,!0))}function vf(n,e,t,r,i){return fT(Fn(n,e,t,r,i,!0))}function Lc(n){return n?n.__v_isVNode===!0:!1}function co(n,e){return n.type===e.type&&n.key===e.key}const dT=({key:n})=>n!=null?n:null,Qh=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Mt(n)||jt(n)||Ke(n)?{i:rn,r:n,k:e,f:!!t}:n:null);function pT(n,e=null,t=null,r=0,i=null,s=n===Qn?0:1,a=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&dT(e),ref:e&&Qh(e),scopeId:OI,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rn};return c?(Hm(h,t),s&128&&n.normalize(h)):t&&(h.shapeFlag|=Mt(t)?8:16),Nc>0&&!a&&nr&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&nr.push(h),h}const Fn=_V;function _V(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===UO)&&(n=Mn),Lc(n)){const c=As(n,e,!0);return t&&Hm(c,t),Nc>0&&!s&&nr&&(c.shapeFlag&6?nr[nr.indexOf(n)]=c:nr.push(c)),c.patchFlag=-2,c}if(CV(n)&&(n=n.__vccOpts),e){e=yV(e);let{class:c,style:h}=e;c&&!Mt(c)&&(e.class=Yf(c)),Pt(h)&&(Bm(h)&&!Me(h)&&(h=Wt({},h)),e.style=Jf(h))}const a=Mt(n)?1:hT(n)?128:LI(n)?64:Pt(n)?4:Ke(n)?2:0;return pT(n,e,t,r,i,a,s,!0)}function yV(n){return n?Bm(n)||eT(n)?Wt({},n):n:null}function As(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:c,transition:h}=n,d=e?wV(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:n.type,props:d,key:d&&dT(d),ref:e&&e.ref?t&&s?Me(s)?s.concat(Qh(e)):[s,Qh(e)]:Qh(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Qn?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:h,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&As(n.ssContent),ssFallback:n.ssFallback&&As(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return h&&r&&Io(p,h.clone(p)),p}function vV(n=" ",e=0){return Fn(id,null,n,e)}function D9(n="",e=!1){return e?(yf(),vf(Mn,null,n)):Fn(Mn,null,n)}function Wr(n){return n==null||typeof n=="boolean"?Fn(Mn):Me(n)?Fn(Qn,null,n.slice()):Lc(n)?cs(n):Fn(id,null,String(n))}function cs(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:As(n)}function Hm(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Me(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Hm(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!eT(e)?e._ctx=rn:i===3&&rn&&(rn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:rn},t=32):(e=String(e),r&64?(t=16,e=[vV(e)]):t=8);n.children=e,n.shapeFlag|=t}function wV(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Yf([e.class,r.class]));else if(i==="style")e.style=Jf([e.style,r.style]);else if(jf(i)){const s=e[i],a=r[i];a&&s!==a&&!(Me(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Kr(n,e,t,r=null){Dr(n,e,7,[t,r])}const EV=YI();let IV=0;function TV(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||EV,s={uid:IV++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nT(r,i),emitsOptions:lT(r,i),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=lV.bind(null,s),n.ce&&n.ce(s),s}let hn=null;const ol=()=>hn||rn;let wf,Fg;{const n=Qf(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};wf=e("__VUE_INSTANCE_SETTERS__",t=>hn=t),Fg=e("__VUE_SSR_SETTERS__",t=>Mc=t)}const al=n=>{const e=hn;return wf(n),n.scope.on(),()=>{n.scope.off(),wf(e)}},aw=()=>{hn&&hn.scope.off(),wf(null)};function gT(n){return n.vnode.shapeFlag&4}let Mc=!1;function bV(n,e=!1,t=!1){e&&Fg(e);const{props:r,children:i}=n.vnode,s=gT(n);JO(n,r,s,e),eV(n,i,t);const a=s?AV(n,e):void 0;return e&&Fg(!1),a}function AV(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,$O);const{setup:r}=t;if(r){Cs();const i=n.setupContext=r.length>1?RV(n):null,s=al(n),a=sl(r,n,0,[n.props,i]),c=tI(a);if(xs(),s(),(c||n.sp)&&!$a(n)&&zI(n),c){if(a.then(aw,aw),e)return a.then(h=>{uw(n,h,e)}).catch(h=>{Zf(h,n,0)});n.asyncDep=a}else uw(n,a,e)}else mT(n,e)}function uw(n,e,t){Ke(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Pt(e)&&(n.setupState=PI(e)),mT(n,t)}let cw;function mT(n,e,t){const r=n.type;if(!n.render){if(!e&&cw&&!r.render){const i=r.template||jm(n).template;if(i){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:c,compilerOptions:h}=r,d=Wt(Wt({isCustomElement:s,delimiters:c},a),h);r.render=cw(i,d)}}n.render=r.render||Pr}{const i=al(n);Cs();try{qO(n)}finally{xs(),i()}}}const SV={get(n,e){return bn(n,"get",""),n[e]}};function RV(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,SV),slots:n.slots,emit:n.emit,expose:e}}function sd(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(PI(Fo(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in yc)return yc[t](n)},has(e,t){return t in e||t in yc}})):n.proxy}function PV(n,e=!0){return Ke(n)?n.displayName||n.name:n.name||e&&n.__name}function CV(n){return Ke(n)&&"__vccOpts"in n}const Be=(n,e)=>_O(n,e,Mc);function Ue(n,e,t){const r=arguments.length;return r===2?Pt(e)&&!Me(e)?Lc(e)?Fn(n,null,[e]):Fn(n,e):Fn(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Lc(t)&&(t=[t]),Fn(n,e,t))}const xV="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ug;const lw=typeof window!="undefined"&&window.trustedTypes;if(lw)try{Ug=lw.createPolicy("vue",{createHTML:n=>n})}catch{}const _T=Ug?n=>Ug.createHTML(n):n=>n,DV="http://www.w3.org/2000/svg",kV="http://www.w3.org/1998/Math/MathML",wi=typeof document!="undefined"?document:null,hw=wi&&wi.createElement("template"),OV={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?wi.createElementNS(DV,n):e==="mathml"?wi.createElementNS(kV,n):t?wi.createElement(n,{is:t}):wi.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>wi.createTextNode(n),createComment:n=>wi.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>wi.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const a=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{hw.innerHTML=_T(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const c=hw.content;if(r==="svg"||r==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Xi="transition",Qu="animation",Ga=Symbol("_vtc"),yT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},vT=Wt({},UI,yT),VV=n=>(n.displayName="Transition",n.props=vT,n),NV=VV((n,{slots:e})=>Ue(PO,wT(n),e)),ro=(n,e=[])=>{Me(n)?n.forEach(t=>t(...e)):n&&n(...e)},fw=n=>n?Me(n)?n.some(e=>e.length>1):n.length>1:!1;function wT(n){const e={};for(const O in n)O in yT||(e[O]=n[O]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:c=`${t}-enter-to`,appearFromClass:h=s,appearActiveClass:d=a,appearToClass:p=c,leaveFromClass:_=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:I=`${t}-leave-to`}=n,V=LV(i),M=V&&V[0],U=V&&V[1],{onBeforeEnter:G,onEnter:J,onEnterCancelled:W,onLeave:X,onLeaveCancelled:ee,onBeforeAppear:ce=G,onAppear:C=J,onAppearCancelled:S=W}=e,A=(O,P,fe)=>{ss(O,P?p:c),ss(O,P?d:a),fe&&fe()},D=(O,P)=>{O._isLeaving=!1,ss(O,_),ss(O,I),ss(O,v),P&&P()},N=O=>(P,fe)=>{const We=O?C:J,et=()=>A(P,O,fe);ro(We,[P,et]),dw(()=>{ss(P,O?h:s),vi(P,O?p:c),fw(We)||pw(P,r,M,et)})};return Wt(e,{onBeforeEnter(O){ro(G,[O]),vi(O,s),vi(O,a)},onBeforeAppear(O){ro(ce,[O]),vi(O,h),vi(O,d)},onEnter:N(!1),onAppear:N(!0),onLeave(O,P){O._isLeaving=!0;const fe=()=>D(O,P);vi(O,_),vi(O,v),IT(),dw(()=>{!O._isLeaving||(ss(O,_),vi(O,I),fw(X)||pw(O,r,U,fe))}),ro(X,[O,fe])},onEnterCancelled(O){A(O,!1),ro(W,[O])},onAppearCancelled(O){A(O,!0),ro(S,[O])},onLeaveCancelled(O){D(O),ro(ee,[O])}})}function LV(n){if(n==null)return null;if(Pt(n))return[Zp(n.enter),Zp(n.leave)];{const e=Zp(n);return[e,e]}}function Zp(n){return Lk(n)}function vi(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ga]||(n[Ga]=new Set)).add(e)}function ss(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ga];t&&(t.delete(e),t.size||(n[Ga]=void 0))}function dw(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let MV=0;function pw(n,e,t,r){const i=n._endId=++MV,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:c,propCount:h}=ET(n,e);if(!a)return r();const d=a+"end";let p=0;const _=()=>{n.removeEventListener(d,v),s()},v=I=>{I.target===n&&++p>=h&&_()};setTimeout(()=>{p<h&&_()},c+1),n.addEventListener(d,v)}function ET(n,e){const t=window.getComputedStyle(n),r=V=>(t[V]||"").split(", "),i=r(`${Xi}Delay`),s=r(`${Xi}Duration`),a=gw(i,s),c=r(`${Qu}Delay`),h=r(`${Qu}Duration`),d=gw(c,h);let p=null,_=0,v=0;e===Xi?a>0&&(p=Xi,_=a,v=s.length):e===Qu?d>0&&(p=Qu,_=d,v=h.length):(_=Math.max(a,d),p=_>0?a>d?Xi:Qu:null,v=p?p===Xi?s.length:h.length:0);const I=p===Xi&&/\b(transform|all)(,|$)/.test(r(`${Xi}Property`).toString());return{type:p,timeout:_,propCount:v,hasTransform:I}}function gw(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>mw(t)+mw(n[r])))}function mw(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function IT(){return document.body.offsetHeight}function FV(n,e,t){const r=n[Ga];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Ef=Symbol("_vod"),TT=Symbol("_vsh"),k9={beforeMount(n,{value:e},{transition:t}){n[Ef]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Ju(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Ju(n,!0),r.enter(n)):r.leave(n,()=>{Ju(n,!1)}):Ju(n,e))},beforeUnmount(n,{value:e}){Ju(n,e)}};function Ju(n,e){n.style.display=e?n[Ef]:"none",n[TT]=!e}const UV=Symbol(""),BV=/(^|;)\s*display\s*:/;function $V(n,e,t){const r=n.style,i=Mt(t);let s=!1;if(t&&!i){if(e)if(Mt(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();t[c]==null&&Jh(r,c,"")}else for(const a in e)t[a]==null&&Jh(r,a,"");for(const a in t)a==="display"&&(s=!0),Jh(r,a,t[a])}else if(i){if(e!==t){const a=r[UV];a&&(t+=";"+a),r.cssText=t,s=BV.test(t)}}else e&&n.removeAttribute("style");Ef in n&&(n[Ef]=s?r.display:"",n[TT]&&(r.display="none"))}const _w=/\s*!important$/;function Jh(n,e,t){if(Me(t))t.forEach(r=>Jh(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=qV(n,e);_w.test(t)?n.setProperty(Lo(r),t.replace(_w,""),"important"):n[r]=t}}const yw=["Webkit","Moz","ms"],eg={};function qV(n,e){const t=eg[e];if(t)return t;let r=Er(e);if(r!=="filter"&&r in n)return eg[e]=r;r=Hf(r);for(let i=0;i<yw.length;i++){const s=yw[i]+r;if(s in n)return eg[e]=s}return e}const vw="http://www.w3.org/1999/xlink";function ww(n,e,t,r,i,s=qk(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(vw,e.slice(6,e.length)):n.setAttributeNS(vw,e,t):t==null||s&&!sI(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Di(t)?String(t):t)}function Ew(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?_T(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const c=s==="OPTION"?n.getAttribute("value")||"":n.value,h=t==null?n.type==="checkbox"?"on":"":String(t);(c!==h||!("_value"in n))&&(n.value=h),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=sI(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(i||e)}function zV(n,e,t,r){n.addEventListener(e,t,r)}function KV(n,e,t,r){n.removeEventListener(e,t,r)}const Iw=Symbol("_vei");function jV(n,e,t,r,i=null){const s=n[Iw]||(n[Iw]={}),a=s[e];if(r&&a)a.value=r;else{const[c,h]=WV(e);if(r){const d=s[e]=QV(r,i);zV(n,c,d,h)}else a&&(KV(n,c,a,h),s[e]=void 0)}}const Tw=/(?:Once|Passive|Capture)$/;function WV(n){let e;if(Tw.test(n)){e={};let r;for(;r=n.match(Tw);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Lo(n.slice(2)),e]}let tg=0;const GV=Promise.resolve(),HV=()=>tg||(GV.then(()=>tg=0),tg=Date.now());function QV(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Dr(JV(r,t.value),e,5,[r])};return t.value=n,t.attached=HV(),t}function JV(n,e){if(Me(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const bw=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,YV=(n,e,t,r,i,s)=>{const a=i==="svg";e==="class"?FV(n,r,a):e==="style"?$V(n,t,r):jf(e)?Dm(e)||jV(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):XV(n,e,r,a))?(Ew(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ww(n,e,r,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Mt(r))?Ew(n,Er(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),ww(n,e,r,a))};function XV(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&bw(e)&&Ke(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return bw(e)&&Mt(t)?!1:e in n}const bT=new WeakMap,AT=new WeakMap,If=Symbol("_moveCb"),Aw=Symbol("_enterCb"),ZV=n=>(delete n.props.mode,n),eN=ZV({name:"TransitionGroup",props:Wt({},vT,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=ol(),r=FI();let i,s;return WI(()=>{if(!i.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!sN(i[0].el,t.vnode.el,a))return;i.forEach(nN),i.forEach(rN);const c=i.filter(iN);IT(),c.forEach(h=>{const d=h.el,p=d.style;vi(d,a),p.transform=p.webkitTransform=p.transitionDuration="";const _=d[If]=v=>{v&&v.target!==d||(!v||/transform$/.test(v.propertyName))&&(d.removeEventListener("transitionend",_),d[If]=null,ss(d,a))};d.addEventListener("transitionend",_)})}),()=>{const a=ot(n),c=wT(a);let h=a.tag||Qn;if(i=[],s)for(let d=0;d<s.length;d++){const p=s[d];p.el&&p.el instanceof Element&&(i.push(p),Io(p,Vc(p,c,r,t)),bT.set(p,p.el.getBoundingClientRect()))}s=e.default?zm(e.default()):[];for(let d=0;d<s.length;d++){const p=s[d];p.key!=null&&Io(p,Vc(p,c,r,t))}return Fn(h,null,s)}}}),tN=eN;function nN(n){const e=n.el;e[If]&&e[If](),e[Aw]&&e[Aw]()}function rN(n){AT.set(n,n.el.getBoundingClientRect())}function iN(n){const e=bT.get(n),t=AT.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function sN(n,e,t){const r=n.cloneNode(),i=n[Ga];i&&i.forEach(c=>{c.split(/\s+/).forEach(h=>h&&r.classList.remove(h))}),t.split(/\s+/).forEach(c=>c&&r.classList.add(c)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:a}=ET(r);return s.removeChild(r),a}const oN=["ctrl","shift","alt","meta"],aN={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>oN.some(t=>n[`${t}Key`]&&!e.includes(t))},O9=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let a=0;a<e.length;a++){const c=aN[e[a]];if(c&&c(i,e))return}return n(i,...s)})},uN=Wt({patchProp:YV},OV);let Sw;function cN(){return Sw||(Sw=nV(uN))}const ST=(...n)=>{const e=cN().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=hN(r);if(!i)return;const s=e._component;!Ke(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,lN(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function lN(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function hN(n){return Mt(n)?document.querySelector(n):n}function Qm(n,e,t,r){return Object.defineProperty(n,e,{get:t,set:r,enumerable:!0}),n}const To=Eo(!1);let Bg;function fN(n,e){const t=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(n)||/(opr)[\/]([\w.]+)/.exec(n)||/(vivaldi)[\/]([\w.]+)/.exec(n)||/(chrome|crios)[\/]([\w.]+)/.exec(n)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(n)||/(firefox|fxios)[\/]([\w.]+)/.exec(n)||/(webkit)[\/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(n)||[];return{browser:t[5]||t[3]||t[1]||"",version:t[4]||t[2]||"0",platform:e[0]||""}}function dN(n){return/(ipad)/.exec(n)||/(ipod)/.exec(n)||/(windows phone)/.exec(n)||/(iphone)/.exec(n)||/(kindle)/.exec(n)||/(silk)/.exec(n)||/(android)/.exec(n)||/(win)/.exec(n)||/(mac)/.exec(n)||/(linux)/.exec(n)||/(cros)/.exec(n)||/(playbook)/.exec(n)||/(bb)/.exec(n)||/(blackberry)/.exec(n)||[]}const RT="ontouchstart"in window||window.navigator.maxTouchPoints>0;function pN(n){const e=n.toLowerCase(),t=dN(e),r=fN(e,t),i={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(i[r.browser]=!0,i.version=r.version,i.versionNumber=parseInt(r.version,10)),r.platform&&(i[r.platform]=!0);const s=i.android||i.ios||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"];if(s===!0||e.indexOf("mobile")!==-1?i.mobile=!0:i.desktop=!0,i["windows phone"]&&(i.winphone=!0,delete i["windows phone"]),i.edga||i.edgios||i.edg?(i.edge=!0,r.browser="edge"):i.crios?(i.chrome=!0,r.browser="chrome"):i.fxios&&(i.firefox=!0,r.browser="firefox"),(i.ipod||i.ipad||i.iphone)&&(i.ios=!0),i.vivaldi&&(r.browser="vivaldi",i.vivaldi=!0),(i.chrome||i.opr||i.safari||i.vivaldi||i.mobile===!0&&i.ios!==!0&&s!==!0)&&(i.webkit=!0),i.opr&&(r.browser="opera",i.opera=!0),i.safari&&(i.blackberry||i.bb?(r.browser="blackberry",i.blackberry=!0):i.playbook?(r.browser="playbook",i.playbook=!0):i.android?(r.browser="android",i.android=!0):i.kindle?(r.browser="kindle",i.kindle=!0):i.silk&&(r.browser="silk",i.silk=!0)),i.name=r.browser,i.platform=r.platform,e.indexOf("electron")!==-1)i.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)i.bex=!0;else{if(window.Capacitor!==void 0?(i.capacitor=!0,i.nativeMobile=!0,i.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(i.cordova=!0,i.nativeMobile=!0,i.nativeMobileWrapper="cordova"),To.value===!0&&(Bg={is:{...i}}),RT===!0&&i.mac===!0&&(i.desktop===!0&&i.safari===!0||i.nativeMobile===!0&&i.android!==!0&&i.ios!==!0&&i.ipad!==!0)){delete i.mac,delete i.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(i,{mobile:!0,ios:!0,platform:a,[a]:!0})}i.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete i.desktop,i.mobile=!0)}return i}const Rw=navigator.userAgent||navigator.vendor||window.opera,gN={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Jr={userAgent:Rw,is:pN(Rw),has:{touch:RT},within:{iframe:window.self!==window.top}},$g={install(n){const{$q:e}=n;To.value===!0?(n.onSSRHydrated.push(()=>{Object.assign(e.platform,Jr),To.value=!1}),e.platform=Mo(this)):e.platform=this}};{let n;Qm(Jr.has,"webStorage",()=>{if(n!==void 0)return n;try{if(window.localStorage)return n=!0,!0}catch{}return n=!1,!1}),Object.assign($g,Jr),To.value===!0&&(Object.assign($g,Bg,gN),Bg=null)}function ul(n){return Fo(Km(n))}function mN(n){return Fo(n)}const od=(n,e)=>{const t=Mo(n);for(const r in n)Qm(e,r,()=>t[r],i=>{t[r]=i});return e},bo={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const n=Object.defineProperty({},"passive",{get(){Object.assign(bo,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,n),window.removeEventListener("qtest",null,n)}catch{}function Fc(){}function V9(n){return n.button===0}function _N(n){return n.touches&&n.touches[0]?n=n.touches[0]:n.changedTouches&&n.changedTouches[0]?n=n.changedTouches[0]:n.targetTouches&&n.targetTouches[0]&&(n=n.targetTouches[0]),{top:n.clientY,left:n.clientX}}function N9(n){if(n.path)return n.path;if(n.composedPath)return n.composedPath();const e=[];let t=n.target;for(;t;){if(e.push(t),t.tagName==="HTML")return e.push(document),e.push(window),e;t=t.parentElement}}function PT(n){n.stopPropagation()}function qg(n){n.cancelable!==!1&&n.preventDefault()}function wa(n){n.cancelable!==!1&&n.preventDefault(),n.stopPropagation()}function L9(n,e){if(n===void 0||e===!0&&n.__dragPrevented===!0)return;const t=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",qg,bo.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",qg,bo.notPassiveCapture)};n.querySelectorAll("a, img").forEach(t)}function yN(n,e,t){const r=`__q_${e}_evt`;n[r]=n[r]!==void 0?n[r].concat(t):t,t.forEach(i=>{i[0].addEventListener(i[1],n[i[2]],bo[i[3]])})}function vN(n,e){const t=`__q_${e}_evt`;n[t]!==void 0&&(n[t].forEach(r=>{r[0].removeEventListener(r[1],n[r[2]],bo[r[3]])}),n[t]=void 0)}function wN(n,e=250,t){let r=null;function i(){const s=arguments,a=()=>{r=null,t!==!0&&n.apply(this,s)};r!==null?clearTimeout(r):t===!0&&n.apply(this,s),r=setTimeout(a,e)}return i.cancel=()=>{r!==null&&clearTimeout(r)},i}const ng=["sm","md","lg","xl"],{passive:Pw}=bo;var EN=od({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Fc,setDebounce:Fc,install({$q:n,onSSRHydrated:e}){if(n.screen=this,this.__installed===!0){n.config.screen!==void 0&&(n.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:t}=window,r=t||window,i=document.scrollingElement||document.documentElement,s=t===void 0||Jr.is.mobile===!0?()=>[Math.max(window.innerWidth,i.clientWidth),Math.max(window.innerHeight,i.clientHeight)]:()=>[t.width*t.scale+window.innerWidth-i.clientWidth,t.height*t.scale+window.innerHeight-i.clientHeight],a=n.config.screen!==void 0&&n.config.screen.bodyClasses===!0;this.__update=_=>{const[v,I]=s();if(I!==this.height&&(this.height=I),v!==this.width)this.width=v;else if(_!==!0)return;let V=this.sizes;this.gt.xs=v>=V.sm,this.gt.sm=v>=V.md,this.gt.md=v>=V.lg,this.gt.lg=v>=V.xl,this.lt.sm=v<V.sm,this.lt.md=v<V.md,this.lt.lg=v<V.lg,this.lt.xl=v<V.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,V=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",V!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${V}`)),this.name=V)};let c,h={},d=16;this.setSizes=_=>{ng.forEach(v=>{_[v]!==void 0&&(h[v]=_[v])})},this.setDebounce=_=>{d=_};const p=()=>{const _=getComputedStyle(document.body);_.getPropertyValue("--q-size-sm")&&ng.forEach(v=>{this.sizes[v]=parseInt(_.getPropertyValue(`--q-size-${v}`),10)}),this.setSizes=v=>{ng.forEach(I=>{v[I]&&(this.sizes[I]=v[I])}),this.__update(!0)},this.setDebounce=v=>{c!==void 0&&r.removeEventListener("resize",c,Pw),c=v>0?wN(this.__update,v):this.__update,r.addEventListener("resize",c,Pw)},this.setDebounce(d),Object.keys(h).length!==0?(this.setSizes(h),h=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};To.value===!0?e.push(p):p()}});const In=od({isActive:!1,mode:!1},{__media:void 0,set(n){In.mode=n,n==="auto"?(In.__media===void 0&&(In.__media=window.matchMedia("(prefers-color-scheme: dark)"),In.__updateMedia=()=>{In.set("auto")},In.__media.addListener(In.__updateMedia)),n=In.__media.matches):In.__media!==void 0&&(In.__media.removeListener(In.__updateMedia),In.__media=void 0),In.isActive=n===!0,document.body.classList.remove(`body--${n===!0?"light":"dark"}`),document.body.classList.add(`body--${n===!0?"dark":"light"}`)},toggle(){In.set(In.isActive===!1)},install({$q:n,ssrContext:e}){const{dark:t}=n.config;n.dark=this,this.__installed!==!0&&this.set(t!==void 0?t:!1)}});function IN(n,e,t=document.body){if(typeof n!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(t instanceof Element))throw new TypeError("Expected a DOM element");t.style.setProperty(`--q-${n}`,e)}let CT=!1;function TN(n){CT=n.isComposing===!0}function bN(n){return CT===!0||n!==Object(n)||n.isComposing===!0||n.qKeyEvent===!0}function zg(n,e){return bN(n)===!0?!1:[].concat(e).includes(n.keyCode)}function xT(n){if(n.ios===!0)return"ios";if(n.android===!0)return"android"}function AN({is:n,has:e,within:t},r){const i=[n.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(n.mobile===!0){const s=xT(n);s!==void 0&&i.push("platform-"+s)}if(n.nativeMobile===!0){const s=n.nativeMobileWrapper;i.push(s),i.push("native-mobile"),n.ios===!0&&(r[s]===void 0||r[s].iosStatusBarPadding!==!1)&&i.push("q-ios-padding")}else n.electron===!0?i.push("electron"):n.bex===!0&&i.push("bex");return t.iframe===!0&&i.push("within-iframe"),i}function SN(){const{is:n}=Jr,e=document.body.className,t=new Set(e.replace(/ {2}/g," ").split(" "));if(n.nativeMobile!==!0&&n.electron!==!0&&n.bex!==!0){if(n.desktop===!0)t.delete("mobile"),t.delete("platform-ios"),t.delete("platform-android"),t.add("desktop");else if(n.mobile===!0){t.delete("desktop"),t.add("mobile"),t.delete("platform-ios"),t.delete("platform-android");const i=xT(n);i!==void 0&&t.add(`platform-${i}`)}}Jr.has.touch===!0&&(t.delete("no-touch"),t.add("touch")),Jr.within.iframe===!0&&t.add("within-iframe");const r=Array.from(t).join(" ");e!==r&&(document.body.className=r)}function RN(n){for(const e in n)IN(e,n[e])}var PN={install(n){if(this.__installed!==!0){if(To.value===!0)SN();else{const{$q:e}=n;e.config.brand!==void 0&&RN(e.config.brand);const t=AN(Jr,e.config);document.body.classList.add.apply(document.body.classList,t)}Jr.is.ios===!0&&document.body.addEventListener("touchstart",Fc),window.addEventListener("keydown",TN,!0)}}};const DT=()=>!0;function CN(n){return typeof n=="string"&&n!==""&&n!=="/"&&n!=="#/"}function xN(n){return n.startsWith("#")===!0&&(n=n.substring(1)),n.startsWith("/")===!1&&(n="/"+n),n.endsWith("/")===!0&&(n=n.substring(0,n.length-1)),"#"+n}function DN(n){if(n.backButtonExit===!1)return()=>!1;if(n.backButtonExit==="*")return DT;const e=["#/"];return Array.isArray(n.backButtonExit)===!0&&e.push(...n.backButtonExit.filter(CN).map(xN)),()=>e.includes(window.location.hash)}var kN={__history:[],add:Fc,remove:Fc,install({$q:n}){if(this.__installed===!0)return;const{cordova:e,capacitor:t}=Jr.is;if(e!==!0&&t!==!0)return;const r=n.config[e===!0?"cordova":"capacitor"];if(r!==void 0&&r.backButton===!1||t===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=a=>{a.condition===void 0&&(a.condition=DT),this.__history.push(a)},this.remove=a=>{const c=this.__history.indexOf(a);c>=0&&this.__history.splice(c,1)};const i=DN(Object.assign({backButtonExit:!0},r)),s=()=>{if(this.__history.length){const a=this.__history[this.__history.length-1];a.condition()===!0&&(this.__history.pop(),a.handler())}else i()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",s,!1)}):window.Capacitor.Plugins.App.addListener("backButton",s)}},Cw={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:n=>n?`Expand "${n}"`:"Expand",collapse:n=>n?`Collapse "${n}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:n=>n===1?"1 record selected.":(n===0?"No":n)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(n,e,t)=>n+"-"+e+" of "+t,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function xw(){const n=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof n=="string")return n.split(/[-_]/).map((e,t)=>t===0?e.toLowerCase():t>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const ls=od({__qLang:{}},{getLocale:xw,set(n=Cw,e){const t={...n,rtl:n.rtl===!0,getLocale:xw};{if(t.set=ls.set,ls.__langConfig===void 0||ls.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",t.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",t.isoName)}Object.assign(ls.__qLang,t)}},install({$q:n,lang:e,ssrContext:t}){n.lang=ls.__qLang,ls.__langConfig=n.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set"&&i!=="getLocale")}}),this.set(e||Cw))}});var ON={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const Tf=od({iconMapFn:null,__qIconSet:{}},{set(n,e){const t={...n};t.set=Tf.set,Object.assign(Tf.__qIconSet,t)},install({$q:n,iconSet:e,ssrContext:t}){n.config.iconMapFn!==void 0&&(this.iconMapFn=n.config.iconMapFn),n.iconSet=this.__qIconSet,Qm(n,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(i=>i!=="set")}}),this.set(e||ON))}}),VN="_q_",M9="_q_l_",F9="_q_pc_",U9="_q_fo_";function B9(){}const bf={};let kT=!1;function NN(){kT=!0}function rg(n,e){if(n===e)return!0;if(n!==null&&e!==null&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;let t,r;if(n.constructor===Array){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(rg(n[r],e[r])!==!0)return!1;return!0}if(n.constructor===Map){if(n.size!==e.size)return!1;let s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}for(s=n.entries(),r=s.next();r.done!==!0;){if(rg(r.value[1],e.get(r.value[0]))!==!0)return!1;r=s.next()}return!0}if(n.constructor===Set){if(n.size!==e.size)return!1;const s=n.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}return!0}if(n.buffer!=null&&n.buffer.constructor===ArrayBuffer){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const i=Object.keys(n).filter(s=>n[s]!==void 0);if(t=i.length,t!==Object.keys(e).filter(s=>e[s]!==void 0).length)return!1;for(r=t;r--!==0;){const s=i[r];if(rg(n[s],e[s])!==!0)return!1}return!0}return n!==n&&e!==e}function Uc(n){return n!==null&&typeof n=="object"&&Array.isArray(n)!==!0}const Dw=[$g,PN,In,EN,kN,ls,Tf];function LN(n,e){const t=ST(n);t.config.globalProperties=e.config.globalProperties;const{reload:r,...i}=e._context;return Object.assign(t._context,i),t}function kw(n,e){e.forEach(t=>{t.install(n),t.__installed=!0})}function MN(n,e,t){n.config.globalProperties.$q=t.$q,n.provide(VN,t.$q),kw(t,Dw),e.components!==void 0&&Object.values(e.components).forEach(r=>{Uc(r)===!0&&r.name!==void 0&&n.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{Uc(r)===!0&&r.name!==void 0&&n.directive(r.name,r)}),e.plugins!==void 0&&kw(t,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&Dw.includes(r)===!1)),To.value===!0&&(t.$q.onSSRHydrated=()=>{t.onSSRHydrated.forEach(r=>{r()}),t.$q.onSSRHydrated=()=>{}})}var FN=function(n,e={}){const t={version:"2.17.1"};kT===!1?(e.config!==void 0&&Object.assign(bf,e.config),t.config={...bf},NN()):t.config=e.config||{},MN(n,e,{parentApp:n,$q:t,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},UN={name:"Quasar",version:"2.17.1",install:FN,lang:ls,iconSet:Tf},BN=!1;/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let OT;const ad=n=>OT=n,VT=Symbol();function Kg(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Ec;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Ec||(Ec={}));function $N(){const n=cI(!0),e=n.run(()=>Eo({}));let t=[],r=[];const i=Fo({install(s){ad(i),i._a=s,s.provide(VT,i),s.config.globalProperties.$pinia=i,r.forEach(a=>t.push(a)),r=[]},use(s){return!this._a&&!BN?r.push(s):t.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const NT=()=>{};function Ow(n,e,t,r=NT){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&lI()&&Kk(i),i}function Ea(n,...e){n.slice().forEach(t=>{t(...e)})}const qN=n=>n(),Vw=Symbol(),ig=Symbol();function jg(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];Kg(i)&&Kg(r)&&n.hasOwnProperty(t)&&!jt(r)&&!vs(r)?n[t]=jg(i,r):n[t]=r}return n}const zN=Symbol();function KN(n){return!Kg(n)||!n.hasOwnProperty(zN)}const{assign:os}=Object;function jN(n){return!!(jt(n)&&n.effect)}function WN(n,e,t,r){const{state:i,actions:s,getters:a}=e,c=t.state.value[n];let h;function d(){c||(t.state.value[n]=i?i():{});const p=dO(t.state.value[n]);return os(p,s,Object.keys(a||{}).reduce((_,v)=>(_[v]=Fo(Be(()=>{ad(t);const I=t._s.get(n);return a[v].call(I,I)})),_),{}))}return h=LT(n,d,e,t,r,!0),h}function LT(n,e,t={},r,i,s){let a;const c=os({actions:{}},t),h={deep:!0};let d,p,_=[],v=[],I;const V=r.state.value[n];!s&&!V&&(r.state.value[n]={}),Eo({});let M;function U(S){let A;d=p=!1,typeof S=="function"?(S(r.state.value[n]),A={type:Ec.patchFunction,storeId:n,events:I}):(jg(r.state.value[n],S),A={type:Ec.patchObject,payload:S,storeId:n,events:I});const D=M=Symbol();$m().then(()=>{M===D&&(d=!0)}),p=!0,Ea(_,A,r.state.value[n])}const G=s?function(){const{state:A}=t,D=A?A():{};this.$patch(N=>{os(N,D)})}:NT;function J(){a.stop(),_=[],v=[],r._s.delete(n)}const W=(S,A="")=>{if(Vw in S)return S[ig]=A,S;const D=function(){ad(r);const N=Array.from(arguments),O=[],P=[];function fe(Ce){O.push(Ce)}function We(Ce){P.push(Ce)}Ea(v,{args:N,name:D[ig],store:ee,after:fe,onError:We});let et;try{et=S.apply(this&&this.$id===n?this:ee,N)}catch(Ce){throw Ea(P,Ce),Ce}return et instanceof Promise?et.then(Ce=>(Ea(O,Ce),Ce)).catch(Ce=>(Ea(P,Ce),Promise.reject(Ce))):(Ea(O,et),et)};return D[Vw]=!0,D[ig]=A,D},X={_p:r,$id:n,$onAction:Ow.bind(null,v),$patch:U,$reset:G,$subscribe(S,A={}){const D=Ow(_,S,A.detached,()=>N()),N=a.run(()=>vc(()=>r.state.value[n],O=>{(A.flush==="sync"?p:d)&&S({storeId:n,type:Ec.direct,events:I},O)},os({},h,A)));return D},$dispose:J},ee=Mo(X);r._s.set(n,ee);const C=(r._a&&r._a.runWithContext||qN)(()=>r._e.run(()=>(a=cI()).run(()=>e({action:W}))));for(const S in C){const A=C[S];if(jt(A)&&!jN(A)||vs(A))s||(V&&KN(A)&&(jt(A)?A.value=V[S]:jg(A,V[S])),r.state.value[n][S]=A);else if(typeof A=="function"){const D=W(A,S);C[S]=D,c.actions[S]=A}}return os(ee,C),os(ot(ee),C),Object.defineProperty(ee,"$state",{get:()=>r.state.value[n],set:S=>{U(A=>{os(A,S)})}}),r._p.forEach(S=>{os(ee,a.run(()=>S({store:ee,app:r._a,pinia:r,options:c})))}),V&&s&&t.hydrate&&t.hydrate(ee.$state,V),d=!0,p=!0,ee}/*! #__NO_SIDE_EFFECTS__ */function GN(n,e,t){let r,i;const s=typeof e=="function";typeof n=="string"?(r=n,i=s?t:e):(i=n,r=n.id);function a(c,h){const d=QO();return c=c||(d?xr(VT,null):null),c&&ad(c),c=OT,c._s.has(r)||(s?LT(r,e,i,c):WN(r,i,c)),c._s.get(r)}return a.$id=r,a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},HN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],c=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},FT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,c=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4;let v=(c&15)<<2|d>>6,I=d&63;h||(I=64,a||(v=64)),r.push(t[p],t[_],t[v],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||_==null)throw new QN;const v=s<<2|c>>4;if(r.push(v),d!==64){const I=c<<4&240|d>>2;if(r.push(I),_!==64){const V=d<<6&192|_;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JN=function(n){const e=MT(n);return FT.encodeByteArray(e,!0)},UT=function(n){return JN(n).replace(/\./g,"")},BT=function(n){try{return FT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=()=>YN().__FIREBASE_DEFAULTS__,ZN=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eL=()=>{if(typeof document=="undefined")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&BT(n[1]);return e&&JSON.parse(e)},ud=()=>{try{return XN()||ZN()||eL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tL=n=>{var e,t;return(t=(e=ud())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$T=()=>{var n;return(n=ud())===null||n===void 0?void 0:n.config},qT=n=>{var e;return(e=ud())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rL(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function iL(){var n;const e=(n=ud())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sL(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function oL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uL(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zT(){return!iL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KT(){try{return typeof indexedDB=="object"}catch{return!1}}function cL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL="FirebaseError";class Oi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lL,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?hL(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Oi(i,c,r)}}function hL(n,e){return n.replace(fL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fL=/\{\$([^}]+)}/g;function dL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Nw(s)&&Nw(a)){if(!Bc(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Nw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ac(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pL(n,e){const t=new gL(n,e);return t.subscribe.bind(t)}class gL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sg),i.error===void 0&&(i.error=sg),i.complete===void 0&&(i.complete=sg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(n){return n&&n._delegate?n._delegate:n}class Ao{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new nL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vL(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(!!r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yL(n){return n===ao?void 0:n}function vL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _L(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const EL={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},IL=nt.INFO,TL={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},bL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=TL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=IL,this._logHandler=bL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const AL=(n,e)=>e.some(t=>n instanceof t);let Lw,Mw;function SL(){return Lw||(Lw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RL(){return Mw||(Mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jT=new WeakMap,Wg=new WeakMap,WT=new WeakMap,og=new WeakMap,Ym=new WeakMap;function PL(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(ws(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&jT.set(t,n)}).catch(()=>{}),Ym.set(e,n),e}function CL(n){if(Wg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Wg.set(n,e)}let Gg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xL(n){Gg=n(Gg)}function DL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ag(this),e,...t);return WT.set(r,e.sort?e.sort():[e]),ws(r)}:RL().includes(n)?function(...e){return n.apply(ag(this),e),ws(jT.get(this))}:function(...e){return ws(n.apply(ag(this),e))}}function kL(n){return typeof n=="function"?DL(n):(n instanceof IDBTransaction&&CL(n),AL(n,SL())?new Proxy(n,Gg):n)}function ws(n){if(n instanceof IDBRequest)return PL(n);if(og.has(n))return og.get(n);const e=kL(n);return e!==n&&(og.set(n,e),Ym.set(e,n)),e}const ag=n=>Ym.get(n);function OL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=ws(a);return r&&a.addEventListener("upgradeneeded",h=>{r(ws(a.result),h.oldVersion,h.newVersion,ws(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const VL=["get","getKey","getAll","getAllKeys","count"],NL=["put","add","delete","clear"],ug=new Map;function Fw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=NL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VL.includes(t)))return;const s=async function(a,...c){const h=this.transaction(a,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return ug.set(e,s),s}xL(n=>({...n,get:(e,t,r)=>Fw(e,t)||n.get(e,t,r),has:(e,t)=>!!Fw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ML(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function ML(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hg="@firebase/app",Uw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Jm("@firebase/app"),FL="@firebase/app-compat",UL="@firebase/analytics-compat",BL="@firebase/analytics",$L="@firebase/app-check-compat",qL="@firebase/app-check",zL="@firebase/auth",KL="@firebase/auth-compat",jL="@firebase/database",WL="@firebase/data-connect",GL="@firebase/database-compat",HL="@firebase/functions",QL="@firebase/functions-compat",JL="@firebase/installations",YL="@firebase/installations-compat",XL="@firebase/messaging",ZL="@firebase/messaging-compat",eM="@firebase/performance",tM="@firebase/performance-compat",nM="@firebase/remote-config",rM="@firebase/remote-config-compat",iM="@firebase/storage",sM="@firebase/storage-compat",oM="@firebase/firestore",aM="@firebase/vertexai-preview",uM="@firebase/firestore-compat",cM="firebase",lM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="[DEFAULT]",hM={[Hg]:"fire-core",[FL]:"fire-core-compat",[BL]:"fire-analytics",[UL]:"fire-analytics-compat",[qL]:"fire-app-check",[$L]:"fire-app-check-compat",[zL]:"fire-auth",[KL]:"fire-auth-compat",[jL]:"fire-rtdb",[WL]:"fire-data-connect",[GL]:"fire-rtdb-compat",[HL]:"fire-fn",[QL]:"fire-fn-compat",[JL]:"fire-iid",[YL]:"fire-iid-compat",[XL]:"fire-fcm",[ZL]:"fire-fcm-compat",[eM]:"fire-perf",[tM]:"fire-perf-compat",[nM]:"fire-rc",[rM]:"fire-rc-compat",[iM]:"fire-gcs",[sM]:"fire-gcs-compat",[oM]:"fire-fst",[uM]:"fire-fst-compat",[aM]:"fire-vertex","fire-js":"fire-js",[cM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Map,Jg=new Map,Yg=new Map;function Bw(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ha(n){const e=n.name;if(Yg.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,n);for(const t of So.values())Bw(t,n);for(const t of Jg.values())Bw(t,n);return!0}function Xm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},Es=new cl("app","Firebase",fM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=lM;function GT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Es.create("bad-app-name",{appName:String(i)});if(t||(t=$T()),!t)throw Es.create("no-options");const s=So.get(i);if(s){if(Bc(t,s.options)&&Bc(r,s.config))return s;throw Es.create("duplicate-app",{appName:i})}const a=new wL(i);for(const h of Yg.values())a.addComponent(h);const c=new dM(t,r,a);return So.set(i,c),c}function pM(n=Qg){const e=So.get(n);if(!e&&n===Qg&&$T())return GT();if(!e)throw Es.create("no-app",{appName:n});return e}function gM(){return Array.from(So.values())}async function mM(n){let e=!1;const t=n.name;So.has(t)?(e=!0,So.delete(t)):Jg.has(t)&&n.decRefCount()<=0&&(Jg.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Is(n,e,t){var r;let i=(r=hM[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(c.join(" "));return}Ha(new Ao(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="firebase-heartbeat-database",yM=1,$c="firebase-heartbeat-store";let cg=null;function HT(){return cg||(cg=OL(_M,yM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($c)}catch(t){console.warn(t)}}}}).catch(n=>{throw Es.create("idb-open",{originalErrorMessage:n.message})})),cg}async function vM(n){try{const t=(await HT()).transaction($c),r=await t.objectStore($c).get(QT(n));return await t.done,r}catch(e){if(e instanceof Oi)Pi.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(t.message)}}}async function $w(n,e){try{const r=(await HT()).transaction($c,"readwrite");await r.objectStore($c).put(e,QT(n)),await r.done}catch(t){if(t instanceof Oi)Pi.warn(t.message);else{const r=Es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pi.warn(r.message)}}}function QT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=1024,EM=30*24*60*60*1e3;class IM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=EM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qw(),{heartbeatsToSend:r,unsentEntries:i}=TM(this._heartbeatsCache.heartbeats),s=UT(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Pi.warn(t),""}}}function qw(){return new Date().toISOString().substring(0,10)}function TM(n,e=wM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),zw(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),zw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class bM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KT()?cL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $w(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $w(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zw(n){return UT(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(n){Ha(new Ao("platform-logger",e=>new LL(e),"PRIVATE")),Ha(new Ao("heartbeat",e=>new IM(e),"PRIVATE")),Is(Hg,Uw,n),Is(Hg,Uw,"esm2017"),Is("fire-js","")}AM("");var Kw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,JT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function A(){}A.prototype=S.prototype,C.D=S.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(D,N,O){for(var P=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)P[fe-2]=arguments[fe];return S.prototype[N].apply(D,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,S,A){A||(A=0);var D=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)D[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;16>N;++N)D[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=C.g[0],A=C.g[1],N=C.g[2];var O=C.g[3],P=S+(O^A&(N^O))+D[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=O+(N^S&(A^N))+D[1]+3905402710&4294967295,O=S+(P<<12&4294967295|P>>>20),P=N+(A^O&(S^A))+D[2]+606105819&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(S^N&(O^S))+D[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(O^A&(N^O))+D[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(N^S&(A^N))+D[5]+1200080426&4294967295,O=S+(P<<12&4294967295|P>>>20),P=N+(A^O&(S^A))+D[6]+2821735955&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(S^N&(O^S))+D[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(O^A&(N^O))+D[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(N^S&(A^N))+D[9]+2336552879&4294967295,O=S+(P<<12&4294967295|P>>>20),P=N+(A^O&(S^A))+D[10]+4294925233&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(S^N&(O^S))+D[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(O^A&(N^O))+D[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=O+(N^S&(A^N))+D[13]+4254626195&4294967295,O=S+(P<<12&4294967295|P>>>20),P=N+(A^O&(S^A))+D[14]+2792965006&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(S^N&(O^S))+D[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(N^O&(A^N))+D[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(S^A))+D[6]+3225465664&4294967295,O=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(O^S))+D[11]+643717713&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(N^O))+D[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(N^O&(A^N))+D[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(S^A))+D[10]+38016083&4294967295,O=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(O^S))+D[15]+3634488961&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(N^O))+D[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(N^O&(A^N))+D[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(S^A))+D[14]+3275163606&4294967295,O=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(O^S))+D[3]+4107603335&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(N^O))+D[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(N^O&(A^N))+D[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(S^A))+D[2]+4243563512&4294967295,O=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(O^S))+D[7]+1735328473&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^S&(N^O))+D[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(A^N^O)+D[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^N)+D[8]+2272392833&4294967295,O=S+(P<<11&4294967295|P>>>21),P=N+(O^S^A)+D[11]+1839030562&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^S)+D[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(A^N^O)+D[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^N)+D[4]+1272893353&4294967295,O=S+(P<<11&4294967295|P>>>21),P=N+(O^S^A)+D[7]+4139469664&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^S)+D[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(A^N^O)+D[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^N)+D[0]+3936430074&4294967295,O=S+(P<<11&4294967295|P>>>21),P=N+(O^S^A)+D[3]+3572445317&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^S)+D[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(A^N^O)+D[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=O+(S^A^N)+D[12]+3873151461&4294967295,O=S+(P<<11&4294967295|P>>>21),P=N+(O^S^A)+D[15]+530742520&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^S)+D[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(N^(A|~O))+D[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~N))+D[7]+1126891415&4294967295,O=S+(P<<10&4294967295|P>>>22),P=N+(S^(O|~A))+D[14]+2878612391&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~S))+D[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=S+(N^(A|~O))+D[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~N))+D[3]+2399980690&4294967295,O=S+(P<<10&4294967295|P>>>22),P=N+(S^(O|~A))+D[10]+4293915773&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~S))+D[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=S+(N^(A|~O))+D[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~N))+D[15]+4264355552&4294967295,O=S+(P<<10&4294967295|P>>>22),P=N+(S^(O|~A))+D[6]+2734768916&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~S))+D[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=S+(N^(A|~O))+D[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=O+(A^(S|~N))+D[11]+3174756917&4294967295,O=S+(P<<10&4294967295|P>>>22),P=N+(S^(O|~A))+D[2]+718787259&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~S))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+O&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var A=S-this.blockSize,D=this.B,N=this.h,O=0;O<S;){if(N==0)for(;O<=A;)i(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<S;)if(D[N++]=C.charCodeAt(O++),N==this.blockSize){i(this,D),N=0;break}}else for(;O<S;)if(D[N++]=C[O++],N==this.blockSize){i(this,D),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var A=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=A&255,A/=256;for(this.u(C),C=Array(16),S=A=0;4>S;++S)for(var D=0;32>D;D+=8)C[A++]=this.g[S]>>>D&255;return C};function s(C,S){var A=c;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=S(C)}function a(C,S){this.h=S;for(var A=[],D=!0,N=C.length-1;0<=N;N--){var O=C[N]|0;D&&O==S||(A[N]=O,D=!1)}this.g=A}var c={};function h(C){return-128<=C&&128>C?s(C,function(S){return new a([S|0],0>S?-1:0)}):new a([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return _;if(0>C)return U(d(-C));for(var S=[],A=1,D=0;C>=A;D++)S[D]=C/A|0,A*=4294967296;return new a(S,0)}function p(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return U(p(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(S,8)),D=_,N=0;N<C.length;N+=8){var O=Math.min(8,C.length-N),P=parseInt(C.substring(N,N+O),S);8>O?(O=d(Math.pow(S,O)),D=D.j(O).add(d(P))):(D=D.j(A),D=D.add(d(P)))}return D}var _=h(0),v=h(1),I=h(16777216);n=a.prototype,n.m=function(){if(M(this))return-U(this).m();for(var C=0,S=1,A=0;A<this.g.length;A++){var D=this.i(A);C+=(0<=D?D:4294967296+D)*S,S*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(M(this))return"-"+U(this).toString(C);for(var S=d(Math.pow(C,6)),A=this,D="";;){var N=X(A,S).g;A=G(A,N.j(S));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=N,V(A))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function M(C){return C.h==-1}n.l=function(C){return C=G(this,C),M(C)?-1:V(C)?0:1};function U(C){for(var S=C.g.length,A=[],D=0;D<S;D++)A[D]=~C.g[D];return new a(A,~C.h).add(v)}n.abs=function(){return M(this)?U(this):this},n.add=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],D=0,N=0;N<=S;N++){var O=D+(this.i(N)&65535)+(C.i(N)&65535),P=(O>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);D=P>>>16,O&=65535,P&=65535,A[N]=P<<16|O}return new a(A,A[A.length-1]&-2147483648?-1:0)};function G(C,S){return C.add(U(S))}n.j=function(C){if(V(this)||V(C))return _;if(M(this))return M(C)?U(this).j(U(C)):U(U(this).j(C));if(M(C))return U(this.j(U(C)));if(0>this.l(I)&&0>C.l(I))return d(this.m()*C.m());for(var S=this.g.length+C.g.length,A=[],D=0;D<2*S;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var N=0;N<C.g.length;N++){var O=this.i(D)>>>16,P=this.i(D)&65535,fe=C.i(N)>>>16,We=C.i(N)&65535;A[2*D+2*N]+=P*We,J(A,2*D+2*N),A[2*D+2*N+1]+=O*We,J(A,2*D+2*N+1),A[2*D+2*N+1]+=P*fe,J(A,2*D+2*N+1),A[2*D+2*N+2]+=O*fe,J(A,2*D+2*N+2)}for(D=0;D<S;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=S;D<2*S;D++)A[D]=0;return new a(A,0)};function J(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function W(C,S){this.g=C,this.h=S}function X(C,S){if(V(S))throw Error("division by zero");if(V(C))return new W(_,_);if(M(C))return S=X(U(C),S),new W(U(S.g),U(S.h));if(M(S))return S=X(C,U(S)),new W(U(S.g),S.h);if(30<C.g.length){if(M(C)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var A=v,D=S;0>=D.l(C);)A=ee(A),D=ee(D);var N=ce(A,1),O=ce(D,1);for(D=ce(D,2),A=ce(A,2);!V(D);){var P=O.add(D);0>=P.l(C)&&(N=N.add(A),O=P),D=ce(D,1),A=ce(A,1)}return S=G(C,N.j(S)),new W(N,S)}for(N=_;0<=C.l(S);){for(A=Math.max(1,Math.floor(C.m()/S.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=d(A),P=O.j(S);M(P)||0<P.l(C);)A-=D,O=d(A),P=O.j(S);V(O)&&(O=v),N=N.add(O),C=G(C,P)}return new W(N,C)}n.A=function(C){return X(this,C).h},n.and=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)&C.i(D);return new a(A,this.h&C.h)},n.or=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)|C.i(D);return new a(A,this.h|C.h)},n.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],D=0;D<S;D++)A[D]=this.i(D)^C.i(D);return new a(A,this.h^C.h)};function ee(C){for(var S=C.g.length+1,A=[],D=0;D<S;D++)A[D]=C.i(D)<<1|C.i(D-1)>>>31;return new a(A,C.h)}function ce(C,S){var A=S>>5;S%=32;for(var D=C.g.length-A,N=[],O=0;O<D;O++)N[O]=0<S?C.i(O+A)>>>S|C.i(O+A+1)<<32-S:C.i(O+A);return new a(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,yo=a}).apply(typeof Kw!="undefined"?Kw:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Uh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YT,uc,XT,Yh,Xg,ZT,eb,tb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,g,y){return l==Array.prototype||l==Object.prototype||(l[g]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var g=0;g<l.length;++g){var y=l[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,g){if(g)e:{var y=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var $=l[T];if(!($ in y))break e;y=y[$]}l=l[l.length-1],T=y[l],g=g(T),g!=T&&g!=null&&e(y,l,{configurable:!0,writable:!0,value:g})}}function s(l,g){l instanceof String&&(l+="");var y=0,T=!1,$={next:function(){if(!T&&y<l.length){var K=y++;return{value:g(K,l[K]),done:!1}}return T=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(l){return l||function(){return s(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(l){var g=typeof l;return g=g!="object"?g:l?Array.isArray(l)?"array":g:"null",g=="array"||g=="object"&&typeof l.length=="number"}function d(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function p(l,g,y){return l.call.apply(l.bind,arguments)}function _(l,g,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,T),l.apply(g,$)}}return function(){return l.apply(g,arguments)}}function v(l,g,y){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,v.apply(null,arguments)}function I(l,g){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function V(l,g){function y(){}y.prototype=g.prototype,l.aa=g.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,$,K){for(var he=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)he[gt-2]=arguments[gt];return g.prototype[$].apply(T,he)}}function M(l){const g=l.length;if(0<g){const y=Array(g);for(let T=0;T<g;T++)y[T]=l[T];return y}return[]}function U(l,g){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(h(T)){const $=l.length||0,K=T.length||0;l.length=$+K;for(let he=0;he<K;he++)l[$+he]=T[he]}else l.push(T)}}class G{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function J(l){return/^[\s\xa0]*$/.test(l)}function W(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function X(l){return X[" "](l),l}X[" "]=function(){};var ee=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ce(l,g,y){for(const T in l)g.call(y,l[T],T,l)}function C(l,g){for(const y in l)g.call(void 0,l[y],y,l)}function S(l){const g={};for(const y in l)g[y]=l[y];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,g){let y,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(y in T)l[y]=T[y];for(let K=0;K<A.length;K++)y=A[K],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function N(l){var g=1;l=l.split(":");const y=[];for(;0<g&&l.length;)y.push(l.shift()),g--;return l.length&&y.push(l.join(":")),y}function O(l){c.setTimeout(()=>{throw l},0)}function P(){var l=Cn;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class fe{constructor(){this.h=this.g=null}add(g,y){const T=We.get();T.set(g,y),this.h?this.h.next=T:this.g=T,this.h=T}}var We=new G(()=>new et,l=>l.reset());class et{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,$e=!1,Cn=new fe,_n=()=>{const l=c.Promise.resolve(void 0);Ce=()=>{l.then(Dt)}};var Dt=()=>{for(var l;l=P();){try{l.h.call(l.g)}catch(y){O(y)}var g=We;g.j(l),100>g.h&&(g.h++,l.next=g.g,g.g=l)}$e=!1};function St(){this.s=this.s,this.C=this.C}St.prototype.s=!1,St.prototype.ma=function(){this.s||(this.s=!0,this.N())},St.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Rt(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var Vr=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return l}();function fn(l,g){if(Rt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget){if(ee){e:{try{X(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else y=="mouseover"?g=l.fromElement:y=="mouseout"&&(g=l.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Zt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&fn.aa.h.call(this)}}V(fn,Rt);var Zt={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),_e=0;function de(l,g,y,T,$){this.listener=l,this.proxy=null,this.src=g,this.type=y,this.capture=!!T,this.ha=$,this.key=++_e,this.da=this.fa=!1}function Ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function He(l){this.src=l,this.g={},this.h=0}He.prototype.add=function(l,g,y,T,$){var K=l.toString();l=this.g[K],l||(l=this.g[K]=[],this.h++);var he=R(l,g,T,$);return-1<he?(g=l[he],y||(g.fa=!1)):(g=new de(g,this.src,K,!!T,$),g.fa=y,l.push(g)),g};function at(l,g){var y=g.type;if(y in l.g){var T=l.g[y],$=Array.prototype.indexOf.call(T,g,void 0),K;(K=0<=$)&&Array.prototype.splice.call(T,$,1),K&&(Ee(g),l.g[y].length==0&&(delete l.g[y],l.h--))}}function R(l,g,y,T){for(var $=0;$<l.length;++$){var K=l[$];if(!K.da&&K.listener==g&&K.capture==!!y&&K.ha==T)return $}return-1}var x="closure_lm_"+(1e6*Math.random()|0),z={};function re(l,g,y,T,$){if(T&&T.once)return pe(l,g,y,T,$);if(Array.isArray(g)){for(var K=0;K<g.length;K++)re(l,g[K],y,T,$);return null}return y=De(y),l&&l[Y]?l.K(g,y,d(T)?!!T.capture:!!T,$):H(l,g,y,!1,T,$)}function H(l,g,y,T,$,K){if(!g)throw Error("Invalid event type");var he=d($)?!!$.capture:!!$,gt=ge(l);if(gt||(l[x]=gt=new He(l)),y=gt.add(g,y,T,he,K),y.proxy)return y;if(T=ae(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Vr||($=he),$===void 0&&($=!1),l.addEventListener(g.toString(),T,$);else if(l.attachEvent)l.attachEvent(oe(g.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ae(){function l(y){return g.call(l.src,l.listener,y)}const g=Pe;return l}function pe(l,g,y,T,$){if(Array.isArray(g)){for(var K=0;K<g.length;K++)pe(l,g[K],y,T,$);return null}return y=De(y),l&&l[Y]?l.L(g,y,d(T)?!!T.capture:!!T,$):H(l,g,y,!0,T,$)}function le(l,g,y,T,$){if(Array.isArray(g))for(var K=0;K<g.length;K++)le(l,g[K],y,T,$);else T=d(T)?!!T.capture:!!T,y=De(y),l&&l[Y]?(l=l.i,g=String(g).toString(),g in l.g&&(K=l.g[g],y=R(K,y,T,$),-1<y&&(Ee(K[y]),Array.prototype.splice.call(K,y,1),K.length==0&&(delete l.g[g],l.h--)))):l&&(l=ge(l))&&(g=l.g[g.toString()],l=-1,g&&(l=R(g,y,T,$)),(y=-1<l?g[l]:null)&&ue(y))}function ue(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[Y])at(g.i,l);else{var y=l.type,T=l.proxy;g.removeEventListener?g.removeEventListener(y,T,l.capture):g.detachEvent?g.detachEvent(oe(y),T):g.addListener&&g.removeListener&&g.removeListener(T),(y=ge(g))?(at(y,l),y.h==0&&(y.src=null,g[x]=null)):Ee(l)}}}function oe(l){return l in z?z[l]:z[l]="on"+l}function Pe(l,g){if(l.da)l=!0;else{g=new fn(g,this);var y=l.listener,T=l.ha||l.src;l.fa&&ue(l),l=y.call(T,g)}return l}function ge(l){return l=l[x],l instanceof He?l:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(l){return typeof l=="function"?l:(l[Ie]||(l[Ie]=function(g){return l.handleEvent(g)}),l[Ie])}function Re(){St.call(this),this.i=new He(this),this.M=this,this.F=null}V(Re,St),Re.prototype[Y]=!0,Re.prototype.removeEventListener=function(l,g,y,T){le(this,l,g,y,T)};function Ne(l,g){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=g.type||g,typeof g=="string")g=new Rt(g,l);else if(g instanceof Rt)g.target=g.target||l;else{var $=g;g=new Rt(T,l),D(g,$)}if($=!0,y)for(var K=y.length-1;0<=K;K--){var he=g.g=y[K];$=Xe(he,T,!0,g)&&$}if(he=g.g=l,$=Xe(he,T,!0,g)&&$,$=Xe(he,T,!1,g)&&$,y)for(K=0;K<y.length;K++)he=g.g=y[K],$=Xe(he,T,!1,g)&&$}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var l=this.i,g;for(g in l.g){for(var y=l.g[g],T=0;T<y.length;T++)Ee(y[T]);delete l.g[g],l.h--}}this.F=null},Re.prototype.K=function(l,g,y,T){return this.i.add(String(l),g,!1,y,T)},Re.prototype.L=function(l,g,y,T){return this.i.add(String(l),g,!0,y,T)};function Xe(l,g,y,T){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,K=0;K<g.length;++K){var he=g[K];if(he&&!he.da&&he.capture==y){var gt=he.listener,Jt=he.ha||he.src;he.fa&&at(l.i,he),$=gt.call(Jt,T)!==!1&&$}}return $&&!T.defaultPrevented}function Ht(l,g,y){if(typeof l=="function")y&&(l=v(l,y));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(l,g||0)}function kt(l){l.g=Ht(()=>{l.g=null,l.i&&(l.i=!1,kt(l))},l.l);const g=l.h;l.h=null,l.m.apply(null,g)}class dn extends St{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(l){St.call(this),this.h=l,this.g={}}V(Ot,St);var or=[];function ei(l){ce(l.g,function(g,y){this.g.hasOwnProperty(y)&&ue(g)},l),l.g={}}Ot.prototype.N=function(){Ot.aa.N.call(this),ei(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,yn=c.JSON.parse,qo=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function mu(){}mu.prototype.h=null;function El(l){return l.h||(l.h=l.i())}function _u(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yu(){Rt.call(this,"d")}V(yu,Rt);function vu(){Rt.call(this,"c")}V(vu,Rt);var ti={},Il=null;function Ms(){return Il=Il||new Re}ti.La="serverreachability";function Tl(l){Rt.call(this,ti.La,l)}V(Tl,Rt);function Fs(l){const g=Ms();Ne(g,new Tl(g))}ti.STAT_EVENT="statevent";function bl(l,g){Rt.call(this,ti.STAT_EVENT,l),this.stat=g}V(bl,Rt);function en(l){const g=Ms();Ne(g,new bl(g,l))}ti.Ma="timingevent";function Al(l,g){Rt.call(this,ti.Ma,l),this.size=g}V(Al,Rt);function ni(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},g)}function Us(){this.g=!0}Us.prototype.xa=function(){this.g=!1};function Vd(l,g,y,T,$,K){l.info(function(){if(l.g)if(K)for(var he="",gt=K.split("&"),Jt=0;Jt<gt.length;Jt++){var Fe=gt[Jt].split("=");if(1<Fe.length){var Yt=Fe[0];Fe=Fe[1];var Ft=Yt.split("_");he=2<=Ft.length&&Ft[1]=="type"?he+(Yt+"="+Fe+"&"):he+(Yt+"=redacted&")}}else he=null;else he=K;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+g+`
`+y+`
`+he})}function Nd(l,g,y,T,$,K,he){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+g+`
`+y+`
`+K+" "+he})}function Li(l,g,y,T){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+Md(l,y)+(T?" "+T:"")})}function Ld(l,g){l.info(function(){return"TIMEOUT: "+g})}Us.prototype.info=function(){};function Md(l,g){if(!l.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var $=T[1];if(Array.isArray($)&&!(1>$.length)){var K=$[0];if(K!="noop"&&K!="stop"&&K!="close")for(var he=1;he<$.length;he++)$[he]=""}}}}return $t(y)}catch{return g}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ko;function jo(){}V(jo,mu),jo.prototype.g=function(){return new XMLHttpRequest},jo.prototype.i=function(){return{}},Ko=new jo;function Nr(l,g,y,T){this.j=l,this.i=g,this.l=y,this.R=T||1,this.U=new Ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var Pl={},wu={};function Eu(l,g,y){l.L=1,l.v=Ui(ar(g)),l.m=y,l.P=!0,Bs(l,null)}function Bs(l,g){l.F=Date.now(),Go(l),l.A=ar(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),ql(y.i,"t",T),l.C=0,y=l.j.J,l.h=new Rl,l.g=Hl(l.j,y?g:null,!l.m),0<l.O&&(l.M=new dn(v(l.Y,l,l.g),l.O)),g=l.U,y=l.g,T=l.ca;var $="readystatechange";Array.isArray($)||($&&(or[0]=$.toString()),$=or);for(var K=0;K<$.length;K++){var he=re(y,$[K],T||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,g)):(l.u="GET",l.g.ea(l.A,l.u,null,g)),Fs(),Vd(l.i,l.u,l.A,l.l,l.R,l.m)}Nr.prototype.ca=function(l){l=l.target;const g=this.M;g&&cr(l)==3?g.j():this.Y(l)},Nr.prototype.Y=function(l){try{if(l==this.g)e:{const Ft=cr(this.g);var g=this.g.Ba();const oi=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||ta(this.g)))){this.J||Ft!=4||g==7||(g==8||0>=oi?Fs(3):Fs(2)),Iu(this);var y=this.g.Z();this.X=y;t:if(Cl(this)){var T=ta(this.g);l="";var $=T.length,K=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Lr(this),Mi(this);var he="";break t}this.h.i=new c.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,l+=this.h.i.decode(T[g],{stream:!(K&&g==$-1)});T.length=0,this.h.g+=l,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=y==200,Nd(this.i,this.u,this.A,this.l,this.R,Ft,y),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Jt=this.g;if((gt=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(gt)){var Fe=gt;break t}}Fe=null}if(y=Fe)Li(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ho(this,y);else{this.o=!1,this.s=3,en(12),Lr(this),Mi(this);break e}}if(this.P){y=!0;let qn;for(;!this.J&&this.C<he.length;)if(qn=Wo(this,he),qn==wu){Ft==4&&(this.s=4,en(14),y=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Pl){this.s=4,en(15),Li(this.i,this.l,he,"[Invalid Chunk]"),y=!1;break}else Li(this.i,this.l,qn,null),Ho(this,qn);if(Cl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||he.length!=0||this.h.h||(this.s=1,en(16),y=!1),this.o=this.o&&y,!y)Li(this.i,this.l,he,"[Invalid Chunked Response]"),Lr(this),Mi(this);else if(0<he.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Ki(Yt),Yt.M=!0,en(11))}}else Li(this.i,this.l,he,null),Ho(this,he);Ft==4&&Lr(this),this.o&&!this.J&&(Ft==4?Ir(this.j,this):(this.o=!1,Go(this)))}else $n(this.g),y==400&&0<he.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Lr(this),Mi(this)}}}catch{}finally{}};function Cl(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Wo(l,g){var y=l.C,T=g.indexOf(`
`,y);return T==-1?wu:(y=Number(g.substring(y,T)),isNaN(y)?Pl:(T+=1,T+y>g.length?wu:(g=g.slice(T,T+y),l.C=T+y,g)))}Nr.prototype.cancel=function(){this.J=!0,Lr(this)};function Go(l){l.S=Date.now()+l.I,xl(l,l.I)}function xl(l,g){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ni(v(l.ba,l),g)}function Iu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Nr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ld(this.i,this.A),this.L!=2&&(Fs(),en(17)),Lr(this),this.s=2,Mi(this)):xl(this,this.S-l)};function Mi(l){l.j.G==0||l.J||Ir(l.j,l)}function Lr(l){Iu(l);var g=l.M;g&&typeof g.ma=="function"&&g.ma(),l.M=null,ei(l.U),l.g&&(g=l.g,l.g=null,g.abort(),g.ma())}function Ho(l,g){try{var y=l.j;if(y.G!=0&&(y.g==l||Qo(y.h,l))){if(!l.K&&Qo(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)pt(y),Ks(y);else break e;lr(y),en(18)}}else y.za=$[1],0<y.za-y.T&&37500>$[2]&&y.F&&y.v==0&&!y.C&&(y.C=ni(v(y.Za,y),6e3));if(1>=Ol(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ri(y,11)}else if((l.K||y.g==l)&&pt(y),!J(g))for($=y.Da.g.parse(g),g=0;g<$.length;g++){let Fe=$[g];if(y.T=Fe[0],Fe=Fe[1],y.G==2)if(Fe[0]=="c"){y.K=Fe[1],y.ia=Fe[2];const Yt=Fe[3];Yt!=null&&(y.la=Yt,y.j.info("VER="+y.la));const Ft=Fe[4];Ft!=null&&(y.Aa=Ft,y.j.info("SVER="+y.Aa));const oi=Fe[5];oi!=null&&typeof oi=="number"&&0<oi&&(T=1.5*oi,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const qn=l.g;if(qn){const oa=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var K=T.h;K.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Jo(K,K.h),K.h=null))}if(T.D){const Ou=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ou&&(T.ya=Ou,dt(T.I,T.D,Ou))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var he=l;if(T.qa=Gl(T,T.J?T.ia:null,T.W),he.K){Tu(T.h,he);var gt=he,Jt=T.L;Jt&&(gt.I=Jt),gt.B&&(Iu(gt),Go(gt)),T.g=he}else ku(T);0<y.i.length&&js(y)}else Fe[0]!="stop"&&Fe[0]!="close"||ri(y,7);else y.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ri(y,7):na(y):Fe[0]!="noop"&&y.l&&y.l.ta(Fe),y.v=0)}}Fs(4)}catch{}}var Fd=class{constructor(l,g){this.g=l,this.map=g}};function Dl(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kl(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ol(l){return l.h?1:l.g?l.g.size:0}function Qo(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Jo(l,g){l.g?l.g.add(g):l.h=g}function Tu(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}Dl.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Yo(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let g=l.i;for(const y of l.g.values())g=g.concat(y.D);return g}return M(l.i)}function Ud(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map!="undefined"&&l instanceof Map||typeof Set!="undefined"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(h(l)){for(var g=[],y=l.length,T=0;T<y;T++)g.push(l[T]);return g}g=[],y=0;for(T in l)g[y++]=l[T];return g}function Vl(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map!="undefined"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set!="undefined"&&l instanceof Set)){if(h(l)||typeof l=="string"){var g=[];l=l.length;for(var y=0;y<l;y++)g.push(y);return g}g=[],y=0;for(const T in l)g[y++]=T;return g}}}function $s(l,g){if(l.forEach&&typeof l.forEach=="function")l.forEach(g,void 0);else if(h(l)||typeof l=="string")Array.prototype.forEach.call(l,g,void 0);else for(var y=Vl(l),T=Ud(l),$=T.length,K=0;K<$;K++)g.call(void 0,T[K],y&&y[K],l)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bd(l,g){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),$=null;if(0<=T){var K=l[y].substring(0,T);$=l[y].substring(T+1)}else K=l[y];g(K,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Mr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Mr){this.h=l.h,Fi(this,l.j),this.o=l.o,this.g=l.g,Xo(this,l.s),this.l=l.l;var g=l.i,y=new qs;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Au(this,y),this.m=l.m}else l&&(g=String(l).match(bu))?(this.h=!1,Fi(this,g[1]||"",!0),this.o=ur(g[2]||""),this.g=ur(g[3]||"",!0),Xo(this,g[4]),this.l=ur(g[5]||"",!0),Au(this,g[6]||"",!0),this.m=ur(g[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}Mr.prototype.toString=function(){var l=[],g=this.j;g&&l.push(Bi(g,Ll,!0),":");var y=this.g;return(y||g=="file")&&(l.push("//"),(g=this.o)&&l.push(Bi(g,Ll,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Bi(y,y.charAt(0)=="/"?Fl:Ml,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Bi(y,Bl)),l.join("")};function ar(l){return new Mr(l)}function Fi(l,g,y){l.j=y?ur(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function Xo(l,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);l.s=g}else l.s=null}function Au(l,g,y){g instanceof qs?(l.i=g,$d(l.i,l.h)):(y||(g=Bi(g,Ul)),l.i=new qs(g,l.h))}function dt(l,g,y){l.i.set(g,y)}function Ui(l){return dt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ur(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Bi(l,g,y){return typeof l=="string"?(l=encodeURI(l).replace(g,Nl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Nl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ll=/[#\/\?@]/g,Ml=/[#\?:]/g,Fl=/[#\?]/g,Ul=/[#\?@]/g,Bl=/#/g;function qs(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function Fr(l){l.g||(l.g=new Map,l.h=0,l.i&&Bd(l.i,function(g,y){l.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=qs.prototype,n.add=function(l,g){Fr(this),this.i=null,l=$i(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(g),this.h+=1,this};function $l(l,g){Fr(l),g=$i(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function Su(l,g){return Fr(l),g=$i(l,g),l.g.has(g)}n.forEach=function(l,g){Fr(this),this.g.forEach(function(y,T){y.forEach(function($){l.call(g,$,T,this)},this)},this)},n.na=function(){Fr(this);const l=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let T=0;T<g.length;T++){const $=l[T];for(let K=0;K<$.length;K++)y.push(g[T])}return y},n.V=function(l){Fr(this);let g=[];if(typeof l=="string")Su(this,l)&&(g=g.concat(this.g.get($i(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)g=g.concat(l[y])}return g},n.set=function(l,g){return Fr(this),this.i=null,l=$i(this,l),Su(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},n.get=function(l,g){return l?(l=this.V(l),0<l.length?String(l[0]):g):g};function ql(l,g,y){$l(l,g),0<y.length&&(l.i=null,l.g.set($i(l,g),M(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var T=g[y];const K=encodeURIComponent(String(T)),he=this.V(T);for(T=0;T<he.length;T++){var $=K;he[T]!==""&&($+="="+encodeURIComponent(String(he[T]))),l.push($)}}return this.i=l.join("&")};function $i(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function $d(l,g){g&&!l.j&&(Fr(l),l.i=null,l.g.forEach(function(y,T){var $=T.toLowerCase();T!=$&&($l(this,T),ql(this,$,y))},l)),l.j=g}function qd(l,g){const y=new Us;if(c.Image){const T=new Image;T.onload=I(Ur,y,"TestLoadImage: loaded",!0,g,T),T.onerror=I(Ur,y,"TestLoadImage: error",!1,g,T),T.onabort=I(Ur,y,"TestLoadImage: abort",!1,g,T),T.ontimeout=I(Ur,y,"TestLoadImage: timeout",!1,g,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else g(!1)}function Ru(l,g){const y=new Us,T=new AbortController,$=setTimeout(()=>{T.abort(),Ur(y,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:T.signal}).then(K=>{clearTimeout($),K.ok?Ur(y,"TestPingServer: ok",!0,g):Ur(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),Ur(y,"TestPingServer: error",!1,g)})}function Ur(l,g,y,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(y)}catch{}}function zd(){this.g=new qo}function Kd(l,g,y){const T=y||"";try{$s(l,function($,K){let he=$;d($)&&(he=$t($)),g.push(T+K+"="+encodeURIComponent(he))})}catch($){throw g.push(T+"type="+encodeURIComponent("_badmap")),$}}function Zo(l){this.l=l.Ub||null,this.j=l.eb||!1}V(Zo,mu),Zo.prototype.g=function(){return new ea(this.l,this.j)},Zo.prototype.i=function(l){return function(){return l}}({});function ea(l,g){Re.call(this),this.D=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(ea,Re),n=ea.prototype,n.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=g,this.readyState=1,zs(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(g.body=l),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ct(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yt(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yt(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?ct(this):zs(this),this.readyState==3&&yt(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,ct(this))},n.Qa=function(l){this.g&&(this.response=l,ct(this))},n.ga=function(){this.g&&ct(this)};function ct(l){l.readyState=4,l.l=null,l.j=null,l.v=null,zs(l)}n.setRequestHeader=function(l,g){this.u.append(l,g)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=g.next();return l.join(`\r
`)};function zs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zl(l){let g="";return ce(l,function(y,T){g+=T,g+=":",g+=y,g+=`\r
`}),g}function Pu(l,g,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=zl(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):dt(l,g,y))}function Ct(l){Re.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Ct,Re);var jd=/^https?$/i,Wd=["POST","PUT"];n=Ct.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,g,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ko.g(),this.v=this.o?El(this.o):El(Ko),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch(K){Cu(this,K);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)y.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const K of T.keys())y.set(K,T.get(K));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(K=>K.toLowerCase()=="content-type"),$=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Wd,g,void 0))||T||$||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,he]of y)this.g.setRequestHeader(K,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Br(this),this.u=!0,this.g.send(l),this.u=!1}catch(K){Cu(this,K)}};function Cu(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.m=5,Kl(l),qi(l)}function Kl(l){l.A||(l.A=!0,Ne(l,"complete"),Ne(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ne(this,"complete"),Ne(this,"abort"),qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qt(this):this.bb())},n.bb=function(){Qt(this)};function Qt(l){if(l.h&&typeof a!="undefined"&&(!l.v[1]||cr(l)!=4||l.Z()!=2)){if(l.u&&cr(l)==4)Ht(l.Ea,0,l);else if(Ne(l,"readystatechange"),cr(l)==4){l.h=!1;try{const he=l.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var T;if(T=he===0){var $=String(l.D).match(bu)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),T=!jd.test($?$.toLowerCase():"")}y=T}if(y)Ne(l,"complete"),Ne(l,"success");else{l.m=6;try{var K=2<cr(l)?l.g.statusText:""}catch{K=""}l.l=K+" ["+l.Z()+"]",Kl(l)}}finally{qi(l)}}}}function qi(l,g){if(l.g){Br(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,g||Ne(l,"ready");try{y.onreadystatechange=T}catch{}}}function Br(l){l.I&&(c.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function cr(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),yn(g)}};function ta(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function $n(l){const g={};l=(l.g&&2<=cr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(J(l[T]))continue;var y=N(l[T]);const $=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const K=g[$]||[];g[$]=K,K.push(y)}C(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(l,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||g}function xu(l){this.Aa=0,this.i=[],this.j=new Us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zi("baseRetryDelayMs",5e3,l),this.cb=zi("retryDelaySeedMs",1e4,l),this.Wa=zi("forwardChannelMaxRetries",2,l),this.wa=zi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Dl(l&&l.concurrentRequestLimit),this.Da=new zd,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xu.prototype,n.la=8,n.G=1,n.connect=function(l,g,y,T){en(0),this.W=l,this.H=g||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=Gl(this,null,this.W),js(this)};function na(l){if(Du(l),l.G==3){var g=l.U++,y=ar(l.I);if(dt(y,"SID",l.K),dt(y,"RID",g),dt(y,"TYPE","terminate"),an(l,y),g=new Nr(l,l.j,g),g.L=2,g.v=Ui(ar(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=Hl(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Go(g)}sa(l)}function Ks(l){l.g&&(Ki(l),l.g.cancel(),l.g=null)}function Du(l){Ks(l),l.u&&(c.clearTimeout(l.u),l.u=null),pt(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function js(l){if(!kl(l.h)&&!l.s){l.s=!0;var g=l.Ga;Ce||_n(),$e||(Ce(),$e=!0),Cn.add(g,l),l.B=0}}function xn(l,g){return Ol(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=g.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ni(v(l.Ga,l,g),ia(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const $=new Nr(this,this.j,l);let K=this.o;if(this.S&&(K?(K=S(K),D(K,this.S)):K=this.S),this.m!==null||this.O||($.H=K,K=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Wl(this,$,g),y=ar(this.I),dt(y,"RID",l),dt(y,"CVER",22),this.D&&dt(y,"X-HTTP-Session-Id",this.D),an(this,y),K&&(this.O?g="headers="+encodeURIComponent(String(zl(K)))+"&"+g:this.m&&Pu(y,this.m,K)),Jo(this.h,$),this.Ua&&dt(y,"TYPE","init"),this.P?(dt(y,"$req",g),dt(y,"SID","null"),$.T=!0,Eu($,y,null)):Eu($,y,g),this.G=2}}else this.G==3&&(l?jl(this,l):this.i.length==0||kl(this.h)||jl(this))};function jl(l,g){var y;g?y=g.l:y=l.U++;const T=ar(l.I);dt(T,"SID",l.K),dt(T,"RID",y),dt(T,"AID",l.T),an(l,T),l.m&&l.o&&Pu(T,l.m,l.o),y=new Nr(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),g&&(l.i=g.D.concat(l.i)),g=Wl(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Jo(l.h,y),Eu(y,T,g)}function an(l,g){l.H&&ce(l.H,function(y,T){dt(g,T,y)}),l.l&&$s({},function(y,T){dt(g,T,y)})}function Wl(l,g,y){y=Math.min(l.i.length,y);var T=l.l?v(l.l.Na,l.l,l):null;e:{var $=l.i;let K=-1;for(;;){const he=["count="+y];K==-1?0<y?(K=$[0].g,he.push("ofs="+K)):K=0:he.push("ofs="+K);let gt=!0;for(let Jt=0;Jt<y;Jt++){let Fe=$[Jt].g;const Yt=$[Jt].map;if(Fe-=K,0>Fe)K=Math.max(0,$[Jt].g-100),gt=!1;else try{Kd(Yt,he,"req"+Fe+"_")}catch{T&&T(Yt)}}if(gt){T=he.join("&");break e}}}return l=l.i.splice(0,y),g.D=l,T}function ku(l){if(!l.g&&!l.u){l.Y=1;var g=l.Fa;Ce||_n(),$e||(Ce(),$e=!0),Cn.add(g,l),l.v=0}}function lr(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ni(v(l.Fa,l),ia(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ni(v(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),Ks(this),ra(this))};function Ki(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function ra(l){l.g=new Nr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var g=ar(l.qa);dt(g,"RID","rpc"),dt(g,"SID",l.K),dt(g,"AID",l.T),dt(g,"CI",l.F?"0":"1"),!l.F&&l.ja&&dt(g,"TO",l.ja),dt(g,"TYPE","xmlhttp"),an(l,g),l.m&&l.o&&Pu(g,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Ui(ar(g)),y.m=null,y.P=!0,Bs(y,l)}n.Za=function(){this.C!=null&&(this.C=null,Ks(this),lr(this),en(19))};function pt(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Ir(l,g){var y=null;if(l.g==g){pt(l),Ki(l),l.g=null;var T=2}else if(Qo(l.h,g))y=g.D,Tu(l.h,g),T=1;else return;if(l.G!=0){if(g.o)if(T==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var $=l.B;T=Ms(),Ne(T,new Al(T,y)),js(l)}else ku(l);else if($=g.s,$==3||$==0&&0<g.X||!(T==1&&xn(l,g)||T==2&&lr(l)))switch(y&&0<y.length&&(g=l.h,g.i=g.i.concat(y)),$){case 1:ri(l,5);break;case 4:ri(l,10);break;case 3:ri(l,6);break;default:ri(l,2)}}}function ia(l,g){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*g}function ri(l,g){if(l.j.info("Error code "+g),g==2){var y=v(l.fb,l),T=l.Xa;const $=!T;T=new Mr(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Fi(T,"https"),Ui(T),$?qd(T.toString(),y):Ru(T.toString(),y)}else en(2);l.G=0,l.l&&l.l.sa(g),sa(l),Du(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function sa(l){if(l.G=0,l.ka=[],l.l){const g=Yo(l.h);(g.length!=0||l.i.length!=0)&&(U(l.ka,g),U(l.ka,l.i),l.h.i.length=0,M(l.i),l.i.length=0),l.l.ra()}}function Gl(l,g,y){var T=y instanceof Mr?ar(y):new Mr(y);if(T.g!="")g&&(T.g=g+"."+T.g),Xo(T,T.s);else{var $=c.location;T=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var K=new Mr(null);T&&Fi(K,T),g&&(K.g=g),$&&Xo(K,$),y&&(K.l=y),T=K}return y=l.D,g=l.ya,y&&g&&dt(T,y,g),dt(T,"VER",l.la),an(l,T),T}function Hl(l,g,y){if(g&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Ca&&!l.pa?new Ct(new Zo({eb:y})):new Ct(l.pa),g.Ha(l.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ql(){}n=Ql.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ws(){}Ws.prototype.g=function(l,g){return new un(l,g)};function un(l,g){Re.call(this),this.g=new xu(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(l?l["X-WebChannel-Client-Profile"]=g.va:l={"X-WebChannel-Client-Profile":g.va}),this.g.S=l,(l=g&&g.Sb)&&!J(l)&&(this.g.m=l),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!J(g)&&(this.g.D=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new si(this)}V(un,Re),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){na(this.g)},un.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=$t(l),l=y);g.i.push(new Fd(g.Ya++,l)),g.G==3&&js(g)},un.prototype.N=function(){this.g.l=null,delete this.j,na(this.g),delete this.g,un.aa.N.call(this)};function ii(l){yu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(const y in g){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}V(ii,yu);function Jl(){vu.call(this),this.status=1}V(Jl,vu);function si(l){this.g=l}V(si,Ql),si.prototype.ua=function(){Ne(this.g,"a")},si.prototype.ta=function(l){Ne(this.g,new ii(l))},si.prototype.sa=function(l){Ne(this.g,new Jl)},si.prototype.ra=function(){Ne(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,tb=function(){return new Ws},eb=function(){return Ms()},ZT=ti,Xg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,Yh=zo,Sl.COMPLETE="complete",XT=Sl,_u.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",Re.prototype.listen=Re.prototype.K,uc=_u,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,YT=Ct}).apply(typeof Uh!="undefined"?Uh:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const jw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Jm("@firebase/firestore");function xa(){return Ro.logLevel}function se(n,...e){if(Ro.logLevel<=nt.DEBUG){const t=e.map(Zm);Ro.debug(`Firestore (${hu}): ${n}`,...t)}}function Kt(n,...e){if(Ro.logLevel<=nt.ERROR){const t=e.map(Zm);Ro.error(`Firestore (${hu}): ${n}`,...t)}}function qc(n,...e){if(Ro.logLevel<=nt.WARN){const t=e.map(Zm);Ro.warn(`Firestore (${hu}): ${n}`,...t)}}function Zm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: `+n;throw Kt(e),new Error(e)}function Se(n,e){n||Te()}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Oi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tn.UNAUTHENTICATED))}shutdown(){}}class PM{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let s=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ts,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ts)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new SM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new Tn(e)}}class CM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new CM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Se(this.o===void 0);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string"),this.R=t.token,new DM(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=OM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rb(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Lt(0,0))}static max(){return new xe(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(),r===void 0?r=e.length-t:r>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tt extends zc{construct(e,t,r){return new Tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Tt(t)}static emptyPath(){return new Tt([])}}const VM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends zc{construct(e,t,r){return new Nt(e,t,r)}static isValidIdentifier(e){return VM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ve(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ve(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new ve(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Tt.fromString(e))}static fromName(e){return new ye(Tt.fromString(e).popFirst(5))}static empty(){return new ye(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Zg(n){return n.fields.find(e=>e.kind===2)}function uo(n){return n.fields.filter(e=>e.kind!==2)}Af.UNKNOWN_ID=-1;class Xh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Kc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Kc(0,sr.min())}}function ib(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new sr(i,ye.empty(),e)}function sb(n){return new sr(n.readTime,n.key,-1)}class sr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new sr(xe.min(),ye.empty(),-1)}static max(){return new sr(xe.max(),ye.empty(),-1)}}function e_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ab{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==ob)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const d=h;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new q((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ts,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ic(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=t_(r.target.error);this.V.reject(new Ic(e,i))}}static open(e,t,r,i){try{return new cd(t,e.transaction(i,r))}catch(s){throw new Ic(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new LM(t)}}class bs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,bs.S(sn())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),lo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!KT())return!1;if(bs.v())return!0;const e=sn(),t=bs.S(e),r=0<t&&t<10,i=ub(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Ic(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ve(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ve(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Ic(e,a))},i.onupgradeneeded=s=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const c=cd.open(this.db,e,s?"readonly":"readwrite",r),h=i(c).next(d=>(c.g(),d)).catch(d=>(c.abort(d),q.reject(d))).toPromise();return h.catch(()=>{}),await c.m,h}catch(c){const h=c,d=h.name!=="FirebaseError"&&a<3;if(se("SimpleDb","Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ub(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class NM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return lo(this.B.delete())}}class Ic extends ve{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ks(n){return n.name==="IndexedDbTransactionError"}class LM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lo(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next(t=>(t===void 0&&(t=null),se("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),lo(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new q((a,c)=>{s.onerror=h=>{c(h.target.error)},s.onsuccess=h=>{a(h.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(c,h)=>{a.push(h)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new q((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,c)=>c.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new q((r,i)=>{t.onerror=s=>{const a=t_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}W(e,t){const r=[];return new q((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const h=new NM(c),d=t(c.primaryKey,c.value,h);if(d instanceof q){const p=d.catch(_=>(h.done(),q.reject(_)));r.push(p)}h.isDone?i():h.K===null?c.continue():c.continue(h.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(n){return new q((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=t_(r.target.error);t(i)}})}let Ww=!1;function t_(n){const e=bs.S(sn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ww||(Ww=!0,setTimeout(()=>{throw r},0)),r}}return n}class MM{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){se("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{se("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){ks(t)?se("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ds(t)}await this.X(6e4)})}}class FM{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return se("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(c=>(se("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=sb(s);e_(a,r)>0&&(r=a)}),new sr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jn.oe=-1;function ld(n){return n==null}function jc(n){return n===0&&1/n==-1/0}function cb(n){return typeof n=="number"&&Number.isInteger(n)&&!jc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gw(e)),e=UM(n.get(t),e);return Gw(e)}function UM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Gw(n){return n+""}function Hr(n){const e=n.length;if(Se(e>=2),e===2)return Se(n.charAt(0)===""&&n.charAt(1)===""),Tt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&Te(),n.charAt(a+1)){case"":const c=n.substring(s,a);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Te()}s=a+2}return new Tt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n,e){return[n,Un(e)]}function lb(n,e,t){return[n,Un(e),t]}const BM={},$M=["prefixPath","collectionGroup","readTime","documentId"],qM=["prefixPath","collectionGroup","documentId"],zM=["collectionGroup","readTime","prefixPath","documentId"],KM=["canonicalId","targetId"],jM=["targetId","path"],WM=["path","targetId"],GM=["collectionId","parent"],HM=["indexId","uid"],QM=["uid","sequenceNumber"],JM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YM=["indexId","uid","orderedDocumentKey"],XM=["userId","collectionPath","documentId"],ZM=["userId","collectionPath","largestBatchId"],eF=["userId","collectionGroup","largestBatchId"],hb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tF=[...hb,"documentOverlays"],fb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],db=fb,n_=[...db,"indexConfiguration","indexState","indexEntries"],nF=n_,rF=[...n_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends ab{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function on(n,e){const t=be(n);return bs.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r!=null?r:mn.RED,this.left=i!=null?i:mn.EMPTY,this.right=s!=null?s:mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new mn(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,r,i,s){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jw(this.data.getIterator())}getIteratorFrom(e){return new Jw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wt(this.comparator);return t.data=e,t}}class Jw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ia(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new wt(Nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new gb("Invalid base64 string: "+s):s}}(e);return new Gt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const iF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(Se(!!n),typeof n=="string"){let e=0;const t=iF.exec(n);if(Se(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ss(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function i_(n){const e=n.mapValue.fields.__previous_value__;return r_(e)?i_(e):e}function Wc(n){const e=Ci(n.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,t,r,i,s,a,c,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d}}class Po{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ef={nullValue:"NULL_VALUE"};function Co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?r_(n)?4:mb(n)?9007199254740991:hd(n)?10:11:Te()}function Zr(n,e){if(n===e)return!0;const t=Co(n);if(t!==Co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wc(n).isEqual(Wc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ci(i.timestampValue),c=Ci(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ss(i.bytesValue).isEqual(Ss(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xt(i.doubleValue),c=xt(s.doubleValue);return a===c?jc(a)===jc(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Qw(a)!==Qw(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!Zr(a[h],c[h])))return!1;return!0}(n,e);default:return Te()}}function Gc(n,e){return(n.values||[]).find(t=>Zr(t,e))!==void 0}function Rs(n,e){if(n===e)return 0;const t=Co(n),r=Co(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(s,a){const c=xt(s.integerValue||s.doubleValue),h=xt(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Yw(n.timestampValue,e.timestampValue);case 4:return Yw(Wc(n),Wc(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return function(s,a){const c=Ss(s),h=Ss(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),h=a.split("/");for(let d=0;d<c.length&&d<h.length;d++){const p=ze(c[d],h[d]);if(p!==0)return p}return ze(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const c=ze(xt(s.latitude),xt(a.latitude));return c!==0?c:ze(xt(s.longitude),xt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Xw(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,h,d,p;const _=s.fields||{},v=a.fields||{},I=(c=_.value)===null||c===void 0?void 0:c.arrayValue,V=(h=v.value)===null||h===void 0?void 0:h.arrayValue,M=ze(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((p=V==null?void 0:V.values)===null||p===void 0?void 0:p.length)||0);return M!==0?M:Xw(I,V)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===_s.mapValue&&a===_s.mapValue)return 0;if(s===_s.mapValue)return 1;if(a===_s.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let _=0;_<h.length&&_<p.length;++_){const v=ze(h[_],p[_]);if(v!==0)return v;const I=Rs(c[h[_]],d[p[_]]);if(I!==0)return I}return ze(h.length,p.length)}(n.mapValue,e.mapValue);default:throw Te()}}function Yw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Ci(n),r=Ci(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function Xw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Rs(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function Ja(n){return tm(n)}function tm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ci(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ss(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=tm(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${tm(t.fields[a])}`;return i+"}"}(n.mapValue):Te()}function s_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nm(n){return!!n&&"integerValue"in n}function Hc(n){return!!n&&"arrayValue"in n}function Zw(n){return!!n&&"nullValue"in n}function eE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tf(n){return!!n&&"mapValue"in n}function hd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Tc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Uo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const _b={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function oF(n){return"nullValue"in n?ef:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?s_(Po.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?hd(n)?_b:{mapValue:{}}:Te()}function aF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?s_(Po.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?_b:"mapValue"in n?hd(n)?{mapValue:{}}:_s:Te()}function tE(n,e){const t=Rs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nE(n,e){const t=Rs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=Tc(a):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Uo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Sn(Tc(this.value))}}function yb(n){const e=[];return Uo(n.fields,(t,r)=>{const i=new Nt([t]);if(tf(r)){const s=yb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Bt(e,0,xe.min(),xe.min(),xe.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,i){return new Bt(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new Bt(e,2,t,xe.min(),xe.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,xe.min(),xe.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.position=e,this.inclusive=t}}function rE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),t.key):r=Rs(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function iE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t="asc"){this.field=e,this.dir=t}}function uF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{}class it extends vb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cF(e,t,r):t==="array-contains"?new fF(e,r):t==="in"?new Ab(e,r):t==="not-in"?new dF(e,r):t==="array-contains-any"?new pF(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lF(e,r):new hF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Rs(t,this.value)):t!==null&&Co(this.value)===Co(t)&&this.matchesComparison(Rs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends vb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new vt(e,t)}matches(e){return Xa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xa(n){return n.op==="and"}function rm(n){return n.op==="or"}function o_(n){return wb(n)&&Xa(n)}function wb(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function im(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+Ja(n.value);if(o_(n))return n.filters.map(e=>im(e)).join(",");{const e=n.filters.map(t=>im(t)).join(",");return`${n.op}(${e})`}}function Eb(n,e){return n instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&Zr(r.value,i.value)}(n,e):n instanceof vt?function(r,i){return i instanceof vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&Eb(a,i.filters[c]),!0):!1}(n,e):void Te()}function Ib(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function Tb(n){return n instanceof it?function(t){return`${t.field.canonicalString()} ${t.op} ${Ja(t.value)}`}(n):n instanceof vt?function(t){return t.op.toString()+" {"+t.getFilters().map(Tb).join(" ,")+"}"}(n):"Filter"}class cF extends it{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class lF extends it{constructor(e,t){super(e,"in",t),this.keys=bb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hF extends it{constructor(e,t){super(e,"not-in",t),this.keys=bb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class fF extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hc(t)&&Gc(t.arrayValue,this.value)}}class Ab extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gc(this.value.arrayValue,t)}}class dF extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Gc(this.value.arrayValue,t)}}class pF extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function sm(n,e=null,t=[],r=[],i=null,s=null,a=null){return new gF(n,e,t,r,i,s,a)}function xo(n){const e=be(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>im(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ja(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ja(r)).join(",")),e.ue=t}return e.ue}function hl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Eb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iE(n.startAt,e.startAt)&&iE(n.endAt,e.endAt)}function Rf(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Pf(n,e){return n.filters.filter(t=>t instanceof it&&t.field.isEqual(e))}function sE(n,e,t){let r=ef,i=!0;for(const s of Pf(n,e)){let a=ef,c=!0;switch(s.op){case"<":case"<=":a=oF(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=ef}tE({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];tE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function oE(n,e,t){let r=_s,i=!0;for(const s of Pf(n,e)){let a=_s,c=!0;switch(s.op){case">=":case">":a=aF(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=_s}nE({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];nE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Sb(n,e,t,r,i,s,a,c){return new fd(n,e,t,r,i,s,a,c)}function dd(n){return new fd(n)}function aE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mF(n){return n.collectionGroup!==null}function bc(n){const e=be(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new wt(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sf(s,r))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new Sf(Nt.keyField(),r))}return e.ce}function ir(n){const e=be(n);return e.le||(e.le=_F(e,bc(n))),e.le}function _F(n,e){if(n.limitType==="F")return sm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Sf(i.field,s)});const t=n.endAt?new Ya(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ya(n.startAt.position,n.startAt.inclusive):null;return sm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function om(n,e,t){return new fd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pd(n,e){return hl(ir(n),ir(e))&&n.limitType===e.limitType}function Rb(n){return`${xo(ir(n))}|lt:${n.limitType}`}function Da(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Tb(i)).join(", ")}]`),ld(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ja(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ja(i)).join(",")),`Target(${r})`}(ir(n))}; limitType=${n.limitType})`}function fl(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of bc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,h){const d=rE(a,c,h);return a.inclusive?d<=0:d<0}(r.startAt,bc(r),i)||r.endAt&&!function(a,c,h){const d=rE(a,c,h);return a.inclusive?d>=0:d>0}(r.endAt,bc(r),i))}(n,e)}function Pb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Cb(n){return(e,t)=>{let r=!1;for(const i of bc(n)){const s=yF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function yF(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(s,a,c){const h=a.data.field(s),d=c.data.field(s);return h!==null&&d!==null?Rs(h,d):Te()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new At(ye.comparator);function rr(){return vF}const xb=new At(ye.comparator);function cc(...n){let e=xb;for(const t of n)e=e.insert(t.key,t);return e}function Db(n){let e=xb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qr(){return Ac()}function kb(){return Ac()}function Ac(){return new Os(n=>n.toString(),(n,e)=>n.isEqual(e))}const wF=new At(ye.comparator),EF=new wt(ye.comparator);function Ye(...n){let e=EF;for(const t of n)e=e.add(t);return e}const IF=new wt(ze);function a_(){return IF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function Ob(n){return{integerValue:""+n}}function Vb(n,e){return cb(e)?Ob(e):u_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function TF(n,e,t){return n instanceof Qc?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&r_(s)&&(s=i_(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Za?Lb(n,e):n instanceof eu?Mb(n,e):function(i,s){const a=Nb(i,s),c=uE(a)+uE(i.Pe);return nm(a)&&nm(i.Pe)?Ob(c):u_(i.serializer,c)}(n,e)}function bF(n,e,t){return n instanceof Za?Lb(n,e):n instanceof eu?Mb(n,e):t}function Nb(n,e){return n instanceof tu?function(r){return nm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Qc extends gd{}class Za extends gd{constructor(e){super(),this.elements=e}}function Lb(n,e){const t=Fb(e);for(const r of n.elements)t.some(i=>Zr(i,r))||t.push(r);return{arrayValue:{values:t}}}class eu extends gd{constructor(e){super(),this.elements=e}}function Mb(n,e){let t=Fb(e);for(const r of n.elements)t=t.filter(i=>!Zr(i,r));return{arrayValue:{values:t}}}class tu extends gd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function uE(n){return xt(n.integerValue||n.doubleValue)}function Fb(n){return Hc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t){this.field=e,this.transform=t}}function AF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Za&&i instanceof Za||r instanceof eu&&i instanceof eu?Qa(r.elements,i.elements,Zr):r instanceof tu&&i instanceof tu?Zr(r.Pe,i.Pe):r instanceof Qc&&i instanceof Qc}(n.transform,e.transform)}class SF{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class md{}function Bb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _d(n.key,Rn.none()):new fu(n.key,n.data,Rn.none());{const t=n.data,r=Sn.empty();let i=new wt(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Vi(n.key,r,new Yn(i.toArray()),Rn.none())}}function RF(n,e,t){n instanceof fu?function(i,s,a){const c=i.value.clone(),h=lE(i.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Vi?function(i,s,a){if(!nf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=lE(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll($b(i)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Sc(n,e,t,r){return n instanceof fu?function(s,a,c,h){if(!nf(s.precondition,a))return c;const d=s.value.clone(),p=hE(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vi?function(s,a,c,h){if(!nf(s.precondition,a))return c;const d=hE(s.fieldTransforms,h,a),p=a.data;return p.setAll($b(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(s,a,c){return nf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function PF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Nb(r.transform,i||null);s!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,s))}return t||null}function cE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qa(r,i,(s,a)=>AF(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends md{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vi extends md{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $b(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lE(n,e,t){const r=new Map;Se(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,bF(a,c,t[i]))}return r}function hE(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,TF(s,a,e))}return r}class _d extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qb extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&RF(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kb();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const h=Bb(a,c);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(t,r)=>cE(t,r))&&Qa(this.baseMutations,e.baseMutations,(t,r)=>cE(t,r))}}class l_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Se(e.mutations.length===r.length);let i=function(){return wF}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new l_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,st;function xF(n){switch(n){default:return Te();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function zb(n){if(n===void 0)return Kt("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Xt.OK:return ne.OK;case Xt.CANCELLED:return ne.CANCELLED;case Xt.UNKNOWN:return ne.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ne.INTERNAL;case Xt.UNAVAILABLE:return ne.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ne.NOT_FOUND;case Xt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Xt.ABORTED:return ne.ABORTED;case Xt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Xt.DATA_LOSS:return ne.DATA_LOSS;default:return Te()}}(st=Xt||(Xt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=new yo([4294967295,4294967295],0);function fE(n){const e=DF().encode(n),t=new JT;return t.update(e),new Uint8Array(t.digest())}function dE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yo([t,r],0),new yo([i,s],0)]}class f_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lc(`Invalid padding: ${t}`);if(r<0)throw new lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(yo.fromNumber(r)));return i.compare(kF)===1&&(i=new yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=fE(e),[r,i]=dE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new f_(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const t=fE(e),[r,i]=dE(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dl(xe.min(),i,new At(ze),rr(),Ye())}}class pl{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pl(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Kb{constructor(e,t){this.targetId=e,this.me=t}}class jb{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class pE{constructor(){this.fe=0,this.ge=mE(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ye(),t=Ye(),r=Ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Te()}}),new pl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=mE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OF{constructor(e){this.Le=e,this.Be=new Map,this.ke=rr(),this.qe=gE(),this.Qe=new At(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Rf(s))if(r===0){const a=new ye(s.path);this.Ue(t,a,Bt.newNoDocument(a,xe.min()))}else Se(r===1);else{const a=this.Ye(t);if(a!==r){const c=this.Ze(e),h=c?this.Xe(c,e,a):1;if(h!==0){this.je(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,c;try{a=Ss(r).toUint8Array()}catch(h){if(h instanceof gb)return qc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new f_(a,i,s)}catch(h){return qc(h instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const c=this.Je(a);if(c){if(s.current&&Rf(c.target)){const h=new ye(c.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Bt.newNoDocument(h,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=Ye();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new dl(e,t,this.Qe,this.ke,r);return this.ke=rr(),this.qe=gE(),this.Qe=new At(ze),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new pE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new wt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function gE(){return new At(ye.comparator)}function mE(){return new At(ye.comparator)}const VF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),NF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),LF=(()=>({and:"AND",or:"OR"}))();class MF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function am(n,e){return n.useProto3Json||ld(e)?e:{value:e}}function nu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FF(n,e){return nu(n,e.toTimestamp())}function Bn(n){return Se(!!n),xe.fromTimestamp(function(t){const r=Ci(t);return new Lt(r.seconds,r.nanos)}(n))}function d_(n,e){return um(n,e).canonicalString()}function um(n,e){const t=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Gb(n){const e=Tt.fromString(n);return Se(nA(e)),e}function Cf(n,e){return d_(n.databaseId,e.path)}function vo(n,e){const t=Gb(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(Jb(t))}function Hb(n,e){return d_(n.databaseId,e)}function Qb(n){const e=Gb(n);return e.length===4?Tt.emptyPath():Jb(e)}function cm(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jb(n){return Se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function _E(n,e,t){return{name:Cf(n,e),fields:t.value.mapValue.fields}}function UF(n,e,t){const r=vo(n,e.name),i=Bn(e.updateTime),s=e.createTime?Bn(e.createTime):xe.min(),a=new Sn({mapValue:{fields:e.fields}}),c=Bt.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function BF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Se(p===void 0||typeof p=="string"),Gt.fromBase64String(p||"")):(Se(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Gt.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const p=d.code===void 0?ne.UNKNOWN:zb(d.code);return new ve(p,d.message||"")}(a);t=new jb(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=vo(n,r.document.name),s=Bn(r.document.updateTime),a=r.document.createTime?Bn(r.document.createTime):xe.min(),c=new Sn({mapValue:{fields:r.document.fields}}),h=Bt.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new rf(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=vo(n,r.document),s=r.readTime?Bn(r.readTime):xe.min(),a=Bt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new rf([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=vo(n,r.document),s=r.removedTargetIds||[];t=new rf([],s,i,null)}else{if(!("filter"in e))return Te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new CF(i,s),c=r.targetId;t=new Kb(c,a)}}return t}function xf(n,e){let t;if(e instanceof fu)t={update:_E(n,e.key,e.value)};else if(e instanceof _d)t={delete:Cf(n,e.key)};else if(e instanceof Vi)t={update:_E(n,e.key,e.data),updateMask:WF(e.fieldMask)};else{if(!(e instanceof qb))return Te();t={verify:Cf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof Qc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Za)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof eu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tu)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw Te()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:FF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te()}(n,e.precondition)),t}function lm(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Rn.updateTime(Bn(s.updateTime)):s.exists!==void 0?Rn.exists(s.exists):Rn.none()}(e.currentDocument):Rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;if("setToServerValue"in c)Se(c.setToServerValue==="REQUEST_TIME"),h=new Qc;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];h=new Za(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];h=new eu(p)}else"increment"in c?h=new tu(a,c.increment):Te();const d=Nt.fromServerFormat(c.fieldPath);return new Ub(d,h)}(n,i)):[];if(e.update){e.update.name;const i=vo(n,e.update.name),s=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(h){const d=h.fieldPaths||[];return new Yn(d.map(p=>Nt.fromServerFormat(p)))}(e.updateMask);return new Vi(i,s,a,t,r)}return new fu(i,s,t,r)}if(e.delete){const i=vo(n,e.delete);return new _d(i,t)}if(e.verify){const i=vo(n,e.verify);return new qb(i,t)}return Te()}function $F(n,e){return n&&n.length>0?(Se(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?Bn(i.updateTime):Bn(s);return a.isEqual(xe.min())&&(a=Bn(s)),new SF(a,i.transformResults||[])}(t,e))):[]}function Yb(n,e){return{documents:[Hb(n,e.path)]}}function Xb(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hb(n,i);const s=function(d){if(d.length!==0)return tA(vt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:ka(v.field),direction:zF(v.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=am(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function Zb(n){let e=Qb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Se(r===1);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(_){const v=eA(_);return v instanceof vt&&o_(v)?v.getFilters():[v]}(t.where));let a=[];t.orderBy&&(a=function(_){return _.map(v=>function(V){return new Sf(Oa(V.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(_){let v;return v=typeof _=="object"?_.value:_,ld(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(_){const v=!!_.before,I=_.values||[];return new Ya(I,v)}(t.startAt));let d=null;return t.endAt&&(d=function(_){const v=!_.before,I=_.values||[];return new Ya(I,v)}(t.endAt)),Sb(e,i,a,s,c,"F",h,d)}function qF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Oa(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oa(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Oa(t.unaryFilter.field);return it.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Oa(t.unaryFilter.field);return it.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return it.create(Oa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return vt.create(t.compositeFilter.filters.map(r=>eA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function zF(n){return VF[n]}function KF(n){return NF[n]}function jF(n){return LF[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Oa(n){return Nt.fromServerFormat(n.fieldPath)}function tA(n){return n instanceof it?function(t){if(t.op==="=="){if(eE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(Zw(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(Zw(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:KF(t.op),value:t.value}}}(n):n instanceof vt?function(t){const r=t.getFilters().map(i=>tA(i));return r.length===1?r[0]:{compositeFilter:{op:jF(t.op),filters:r}}}(n):Te()}function WF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t,r,i,s=xe.min(),a=xe.min(),c=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.ct=e}}function GF(n,e){let t;if(e.document)t=UF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=ko(e.noDocument.readTime);t=Bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te();{const r=ye.fromSegments(e.unknownDocument.path),i=ko(e.unknownDocument.version);t=Bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Lt(i[0],i[1]);return xe.fromTimestamp(s)}(e.readTime)),t}function yE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Df(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:Cf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:nu(s,a.version.toTimestamp()),createTime:nu(s,a.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Do(e.version)};else{if(!e.isUnknownDocument())return Te();r.unknownDocument={path:t.path.toArray(),version:Do(e.version)}}return r}function Df(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Do(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ko(n){const e=new Lt(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function ho(n,e){const t=(e.baseMutations||[]).map(s=>lm(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>lm(n.ct,s)),i=Lt.fromMillis(e.localWriteTimeMs);return new c_(e.batchId,i,t,r)}function hc(n){const e=ko(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ko(n.lastLimboFreeSnapshotVersion):xe.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Se(s.documents.length===1),ir(dd(Qb(s.documents[0])))}(n.query):function(s){return ir(Zb(s))}(n.query),new Ti(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Gt.fromBase64String(n.resumeToken))}function iA(n,e){const t=Do(e.snapshotVersion),r=Do(e.lastLimboFreeSnapshotVersion);let i;i=Rf(e.target)?Yb(n.ct,e.target):Xb(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sA(n){const e=Zb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?om(e,e.limit,"L"):e}function lg(n,e){return new h_(e.largestBatchId,lm(n.ct,e.overlayMutation))}function vE(n,e){const t=e.path.lastSegment();return[n,Un(e.path.popLast()),t]}function wE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Do(r.readTime),documentKey:Un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{getBundleMetadata(e,t){return EE(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ko(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return EE(e).put(function(i){return{bundleId:i.id,createTime:Do(Bn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return IE(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:sA(s.bundledQuery),readTime:ko(s.readTime)}}(r)})}saveNamedQuery(e,t){return IE(e).put(function(i){return{name:i.name,readTime:Do(Bn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function EE(n){return on(n,"bundles")}function IE(n){return on(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new yd(e,r)}getOverlay(e,t){return Yu(e).get(vE(this.userId,t)).next(r=>r?lg(this.serializer,r):null)}getOverlays(e,t){const r=Qr();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const c=new h_(t,a);i.push(this.ht(e,c))}),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Un(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Yu(e).j("collectionPathOverlayIndex",c))}),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Qr(),s=Un(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Yu(e).U("collectionPathOverlayIndex",a).next(c=>{for(const h of c){const d=lg(this.serializer,h);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Qr();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yu(e).J({index:"collectionGroupOverlayIndex",range:c},(h,d,p)=>{const _=lg(this.serializer,d);s.size()<i||_.largestBatchId===a?(s.set(_.getKey(),_),a=_.largestBatchId):p.done()}).next(()=>s)}ht(e,t){return Yu(e).put(function(i,s,a){const[c,h,d]=vE(s,a.mutation.key);return{userId:s,collectionPath:h,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:xf(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function Yu(n){return on(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{Pt(e){return on(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Gt.fromUint8Array(r):Gt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(xt(e.integerValue));else if("doubleValue"in e){const r=xt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),jc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ci(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ss(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?mb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):hd(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(xt(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ye.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}fo.vt=new fo;function JF(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function TE(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=JF(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class YF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=TE(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=TE(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class XF{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class ZF{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Xu{constructor(){this.jt=new YF,this.Ht=new XF(this.jt),this.Jt=new ZF(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new po(this.indexId,this.documentKey,this.arrayValue,r)}}function Zi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=bE(n.arrayValue,e.arrayValue),t!==0?t:(t=bE(n.directionalValue,e.directionalValue),t!==0?t:ye.comparator(n.documentKey,e.documentKey)))}function bE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.Xt=new wt((t,r)=>Nt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Se(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Zg(e);if(t!==void 0&&!this.sn(t))return!1;const r=uo(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[s];if(!this.on(c,h)||!this._n(this.en[a++],h))return!1}++s}for(;s<r.length;++s){const c=r[s];if(a>=this.en.length||!this._n(this.en[a++],c))return!1}return!0}an(){if(this.nn)return null;let e=new wt(Nt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Xh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Xh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Xh(r.field,r.dir==="asc"?0:1)));return new Af(Af.UNKNOWN_ID,this.collectionId,t,Kc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n){var e,t;if(Se(n instanceof it||n instanceof vt),n instanceof it){if(n instanceof Ab){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>it.create(n.field,"==",s)))||[];return vt.create(i,"or")}return n}const r=n.filters.map(i=>oA(i));return vt.create(r,n.op)}function e2(n){if(n.getFilters().length===0)return[];const e=dm(oA(n));return Se(aA(e)),hm(e)||fm(e)?[e]:e.getFilters()}function hm(n){return n instanceof it}function fm(n){return n instanceof vt&&o_(n)}function aA(n){return hm(n)||fm(n)||function(t){if(t instanceof vt&&rm(t)){for(const r of t.getFilters())if(!hm(r)&&!fm(r))return!1;return!0}return!1}(n)}function dm(n){if(Se(n instanceof it||n instanceof vt),n instanceof it)return n;if(n.filters.length===1)return dm(n.filters[0]);const e=n.filters.map(r=>dm(r));let t=vt.create(e,n.op);return t=kf(t),aA(t)?t:(Se(t instanceof vt),Se(Xa(t)),Se(t.filters.length>1),t.filters.reduce((r,i)=>p_(r,i)))}function p_(n,e){let t;return Se(n instanceof it||n instanceof vt),Se(e instanceof it||e instanceof vt),t=n instanceof it?e instanceof it?function(i,s){return vt.create([i,s],"and")}(n,e):SE(n,e):e instanceof it?SE(e,n):function(i,s){if(Se(i.filters.length>0&&s.filters.length>0),Xa(i)&&Xa(s))return Ib(i,s.getFilters());const a=rm(i)?i:s,c=rm(i)?s:i,h=a.filters.map(d=>p_(d,c));return vt.create(h,"or")}(n,e),kf(t)}function SE(n,e){if(Xa(e))return Ib(e,n.getFilters());{const t=e.filters.map(r=>p_(n,r));return vt.create(t,"or")}}function kf(n){if(Se(n instanceof it||n instanceof vt),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return kf(e[0]);if(wb(n))return n;const t=e.map(i=>kf(i)),r=[];return t.forEach(i=>{i instanceof it?r.push(i):i instanceof vt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:vt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.un=new g_}addToCollectionParentIndex(e,t){return this.un.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(sr.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class g_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(Tt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Uint8Array(0);class n2{constructor(e,t){this.databaseId=t,this.cn=new g_,this.ln=new Os(r=>xo(r),(r,i)=>hl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Un(i)};return RE(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[rb(t),""],!1,!0);return RE(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Hr(a.parent))}return r})}addFieldIndex(e,t){const r=Zu(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=ba(e);return s.next(c=>{a.put(wE(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Zu(e),i=ba(e),s=Ta(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Zu(e),r=Ta(e),i=ba(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return q.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new AE(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Ta(e);let i=!0;const s=new Map;return q.forEach(this.hn(t),a=>this.Pn(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=Ye();const c=[];return q.forEach(s,(h,d)=>{se("IndexedDbIndexManager",`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(h)} to execute ${xo(t)}`);const p=function(W,X){const ee=Zg(X);if(ee===void 0)return null;for(const ce of Pf(W,ee.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null}(d,h),_=function(W,X){const ee=new Map;for(const ce of uo(X))for(const C of Pf(W,ce.fieldPath))switch(C.op){case"==":case"in":ee.set(ce.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return ee.set(ce.fieldPath.canonicalString(),C.value),Array.from(ee.values())}return null}(d,h),v=function(W,X){const ee=[];let ce=!0;for(const C of uo(X)){const S=C.kind===0?sE(W,C.fieldPath,W.startAt):oE(W,C.fieldPath,W.startAt);ee.push(S.value),ce&&(ce=S.inclusive)}return new Ya(ee,ce)}(d,h),I=function(W,X){const ee=[];let ce=!0;for(const C of uo(X)){const S=C.kind===0?oE(W,C.fieldPath,W.endAt):sE(W,C.fieldPath,W.endAt);ee.push(S.value),ce&&(ce=S.inclusive)}return new Ya(ee,ce)}(d,h),V=this.In(h,d,v),M=this.In(h,d,I),U=this.Tn(h,d,_),G=this.En(h.indexId,p,V,v.inclusive,M,I.inclusive,U);return q.forEach(G,J=>r.G(J,t.limit).next(W=>{W.forEach(X=>{const ee=ye.fromSegments(X.documentKey);a.has(ee)||(a=a.add(ee),c.push(ee))})}))}).next(()=>c)}return q.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=e2(vt.create(e.filters,"and")).map(r=>sm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,a,c){const h=(t!=null?t.length:1)*Math.max(r.length,s.length),d=h/(t!=null?t.length:1),p=[];for(let _=0;_<h;++_){const v=t?this.dn(t[_/d]):$h,I=this.An(e,v,r[_%d],i),V=this.Rn(e,v,s[_%d],a),M=c.map(U=>this.An(e,v,U,!0));p.push(...this.createRange(I,V,M))}return p}An(e,t,r,i){const s=new po(e,ye.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new po(e,ye.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new AE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.rn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const i=this.hn(t);return q.forEach(i,s=>this.Pn(e,s).next(a=>{a?r!==0&&a.fields.length<function(h){let d=new wt(Nt.comparator),p=!1;for(const _ of h.filters)for(const v of _.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:d=d.add(v.field));for(const _ of h.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Xu;for(const i of uo(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);fo.vt.It(s,a)}return r.zt()}dn(e){const t=new Xu;return fo.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Xu;return fo.vt.It(s_(this.databaseId,t),r.Yt(function(s){const a=uo(s);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Xu);let s=0;for(const a of uo(e)){const c=r[s++];for(const h of i)if(this.fn(t,a.fieldPath)&&Hc(c))i=this.gn(i,a,c);else{const d=h.Yt(a.kind);fo.vt.It(c,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const h=new Xu;h.seed(c.zt()),fo.vt.It(a,h.Yt(t.kind)),s.push(h)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Zu(e),i=ba(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return q.forEach(s,c=>i.get([c.indexId,this.uid]).next(h=>{a.push(function(p,_){const v=_?new Kc(_.sequenceNumber,new sr(ko(_.readTime),new ye(Hr(_.documentKey)),_.largestBatchId)):Kc.empty(),I=p.fields.map(([V,M])=>new Xh(Nt.fromServerFormat(V),M));return new Af(p.indexId,p.collectionGroup,I,v)}(c,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ze(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Zu(e),s=ba(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>q.forEach(c,h=>s.put(wE(h.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?q.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),q.forEach(c,h=>this.wn(e,i,h).next(d=>{const p=this.Sn(s,h);return d.isEqual(p)?q.resolve():this.bn(e,s,h,d,p)}))))})}Dn(e,t,r,i){return Ta(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ta(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Ta(e);let s=new wt(Zi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(a,c)=>{s=s.add(new po(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}Sn(e,t){let r=new wt(Zi);const i=this.Vn(t,e);if(i==null)return r;const s=Zg(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Hc(a))for(const c of a.arrayValue.values||[])r=r.add(new po(t.indexId,e.key,this.dn(c),i))}else r=r.add(new po(t.indexId,e.key,$h,i));return r}bn(e,t,r,i,s){se("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(h,d,p,_,v){const I=h.getIterator(),V=d.getIterator();let M=Ia(I),U=Ia(V);for(;M||U;){let G=!1,J=!1;if(M&&U){const W=p(M,U);W<0?J=!0:W>0&&(G=!0)}else M!=null?J=!0:G=!0;G?(_(U),U=Ia(V)):J?(v(M),M=Ia(I)):(M=Ia(I),U=Ia(V))}}(i,s,Zi,c=>{a.push(this.Dn(e,t,r,c))},c=>{a.push(this.vn(e,t,r,c))}),q.waitFor(a)}yn(e){let t=1;return ba(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>Zi(a,c)).filter((a,c,h)=>!c||Zi(a,h[c-1])!==0);const i=[];i.push(e);for(const a of r){const c=Zi(a,e),h=Zi(a,t);if(c===0)i[0]=e.Zt();else if(c>0&&h<0)i.push(a),i.push(a.Zt());else if(h>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const c=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,$h,[]],h=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,$h,[]];s.push(IDBKeyRange.bound(c,h))}return s}Cn(e,t){return Zi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(PE)}getMinOffset(e,t){return q.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Te())).next(PE)}}function RE(n){return on(n,"collectionParents")}function Ta(n){return on(n,"indexEntries")}function Zu(n){return on(n,"indexConfiguration")}function ba(n){return on(n,"indexState")}function PE(n){Se(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;e_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new sr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const h=r.J({range:a},(p,_,v)=>(c++,v.delete()));s.push(h.next(()=>{Se(c===1)}));const d=[];for(const p of t.mutations){const _=lb(e,p.key.path,t.batchId);s.push(i.delete(_)),d.push(p.key)}return q.waitFor(s).next(()=>d)}function Of(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Te();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(41943040,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class vd{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Se(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new vd(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return es(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Va(e),a=es(e);return a.add({}).next(c=>{Se(typeof c=="number");const h=new c_(c,t,r,i),d=function(I,V,M){const U=M.baseMutations.map(J=>xf(I.ct,J)),G=M.mutations.map(J=>xf(I.ct,J));return{userId:V,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:U,mutations:G}}(this.serializer,this.userId,h),p=[];let _=new wt((v,I)=>ze(v.canonicalString(),I.canonicalString()));for(const v of i){const I=lb(this.userId,v.key.path,c);_=_.add(v.key.path.popLast()),p.push(a.put(d)),p.push(s.put(I,BM))}return _.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[c]=h.keys()}),q.waitFor(p).next(()=>h)})}lookupMutationBatch(e,t){return es(e).get(t).next(r=>r?(Se(r.userId===this.userId),ho(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?q.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return es(e).J({index:"userMutationsIndex",range:i},(a,c,h)=>{c.userId===this.userId&&(Se(c.batchId>=r),s=ho(this.serializer,c)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return es(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return es(e).U("userMutationsIndex",t).next(r=>r.map(i=>ho(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Va(e).J({range:i},(a,c,h)=>{const[d,p,_]=a,v=Hr(p);if(d===this.userId&&t.path.isEqual(v))return es(e).get(_).next(I=>{if(!I)throw Te();Se(I.userId===this.userId),s.push(ho(this.serializer,I))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(ze);const i=[];return t.forEach(s=>{const a=Zh(this.userId,s.path),c=IDBKeyRange.lowerBound(a),h=Va(e).J({range:c},(d,p,_)=>{const[v,I,V]=d,M=Hr(I);v===this.userId&&s.path.isEqual(M)?r=r.add(V):_.done()});i.push(h)}),q.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Zh(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new wt(ze);return Va(e).J({range:a},(h,d,p)=>{const[_,v,I]=h,V=Hr(v);_===this.userId&&r.isPrefixOf(V)?V.length===i&&(c=c.add(I)):p.done()}).next(()=>this.xn(e,c))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(es(e).get(s).next(a=>{if(a===null)throw Te();Se(a.userId===this.userId),r.push(ho(this.serializer,a))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return uA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Va(e).J({range:r},(s,a,c)=>{if(s[0]===this.userId){const h=Hr(s[1]);i.push(h)}else c.done()}).next(()=>{Se(i.length===0)})})}containsKey(e,t){return cA(e,this.userId,t)}Nn(e){return lA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cA(n,e,t){const r=Zh(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Va(n).J({range:s,H:!0},(c,h,d)=>{const[p,_,v]=c;p===e&&_===i&&(a=!0),d.done()}).next(()=>a)}function es(n){return on(n,"mutations")}function Va(n){return on(n,"documentMutations")}function lA(n){return on(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oo(0)}static kn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Oo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>xe.fromTimestamp(new Lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Aa(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Aa(e).J((a,c)=>{const h=hc(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,s.push(this.removeTargetData(e,h)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Aa(e).J((r,i)=>{const s=hc(i);t(s)})}qn(e){return xE(e).get("targetGlobalKey").next(t=>(Se(t!==null),t))}Qn(e,t){return xE(e).put("targetGlobalKey",t)}Kn(e,t){return Aa(e).put(iA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Aa(e).J({range:i,index:"queryTargetsIndex"},(a,c,h)=>{const d=hc(c);hl(t,d.target)&&(s=d,h.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=fs(e);return t.forEach(a=>{const c=Un(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=fs(e);return q.forEach(t,s=>{const a=Un(s.path);return q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=fs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=fs(e);let s=Ye();return i.J({range:r,H:!0},(a,c,h)=>{const d=Hr(a[1]),p=new ye(d);s=s.add(p)}).next(()=>s)}containsKey(e,t){const r=Un(t.path),i=IDBKeyRange.bound([r],[rb(r)],!1,!0);let s=0;return fs(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,c],h,d)=>{a!==0&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Aa(e).get(t).next(r=>r?hc(r):null)}}function Aa(n){return on(n,"targets")}function xE(n){return on(n,"targetGlobal")}function fs(n){return on(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE([n,e],[t,r]){const i=ze(n,t);return i===0?ze(e,r):i}class i2{constructor(e){this.Un=e,this.buffer=new wt(DE),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();DE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class s2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ks(t)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ds(t)}await this.Hn(3e5)})}}class o2{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Jn.oe);const r=new i2(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(CE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CE):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,c,h,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,a=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,t))).next(_=>(s=_,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(d=Date.now(),xa()<=nt.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${s} targets in `+(h-c)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-p}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:_})))}}function a2(n,e){return new o2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,t){this.db=e,this.garbageCollector=a2(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return qh(e,r)}removeReference(e,t,r){return qh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qh(e,t)}nr(e,t){return function(i,s){let a=!1;return lA(i).Y(c=>cA(i,c,s).next(h=>(h&&(a=!0),q.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,c)=>{if(c<=t){const h=this.nr(e,a).next(d=>{if(!d)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,xe.min()),fs(e).delete(function(_){return[0,Un(_.path)]}(a))))});i.push(h)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qh(e,t)}tr(e,t){const r=fs(e);let i,s=Jn.oe;return r.J({index:"documentTargetsIndex"},([a,c],{path:h,sequenceNumber:d})=>{a===0?(s!==Jn.oe&&t(new ye(Hr(i)),s),s=d,i=h):s=Jn.oe}).next(()=>{s!==Jn.oe&&t(new ye(Hr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qh(n,e){return fs(n).put(function(r,i){return{targetId:0,path:Un(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.changes=new Os(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return io(e).put(r)}removeEntry(e,t,r){return io(e).delete(function(s,a){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Df(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Bt.newInvalidDocument(t);return io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ec(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Bt.newInvalidDocument(t)};return io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ec(t))},(i,s)=>{r={document:this.ir(t,s),size:Of(s)}}).next(()=>r)}getEntries(e,t){let r=rr();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)}).next(()=>r)}ar(e,t){let r=rr(),i=new At(ye.comparator);return this._r(e,t,(s,a)=>{const c=this.ir(s,a);r=r.insert(s,c),i=i.insert(s,Of(a))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return q.resolve();let i=new wt(VE);t.forEach(h=>i=i.add(h));const s=IDBKeyRange.bound(ec(i.first()),ec(i.last())),a=i.getIterator();let c=a.getNext();return io(e).J({index:"documentKeyIndex",range:s},(h,d,p)=>{const _=ye.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&VE(c,_)<0;)r(c,null),c=a.getNext();c&&c.isEqual(_)&&(r(c,d),c=a.hasNext()?a.getNext():null),c?p.$(ec(c)):p.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),Df(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return io(e).U(IDBKeyRange.bound(c,h,!0)).next(d=>{s==null||s.incrementDocumentReadCount(d.length);let p=rr();for(const _ of d){const v=this.ir(ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);v.isFoundDocument()&&(fl(t,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(e,t,r,i){let s=rr();const a=OE(t,r),c=OE(t,sr.max());return io(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(h,d,p)=>{const _=this.ir(ye.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(_.key,_),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new l2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return kE(e).get("remoteDocumentGlobalKey").next(t=>(Se(!!t),t))}rr(e,t){return kE(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=GF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return Bt.newInvalidDocument(e)}}function fA(n){return new c2(n)}class l2 extends hA{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Os(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wt((s,a)=>ze(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,c.readTime)),a.isValidDocument()){const h=yE(this.cr.serializer,a);i=i.add(s.path.popLast()),r+=Of(h)-c.size,t.push(this.cr.addEntry(e,s,h))}else if(r-=c.size,this.trackRemovals){const h=yE(this.cr.serializer,a.convertToNoDocument(xe.min()));t.push(this.cr.addEntry(e,s,h))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function kE(n){return on(n,"remoteDocumentGlobal")}function io(n){return on(n,"remoteDocumentsV14")}function ec(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OE(n,e){const t=e.documentKey.path.toArray();return[n,Df(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ze(t[s],r[s]),i)return i;return i=ze(t.length,r.length),i||(i=ze(t[t.length-2],r[r.length-2]),i||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Sc(r.mutation,i,Yn.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){const i=Qr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=cc();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Qr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=rr();const a=Ac(),c=function(){return Ac()}();return t.forEach((h,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Vi)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Sc(p.mutation,d,p.mutation.getFieldMask(),Lt.now())):a.set(d.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var _;return c.set(d,new h2(p,(_=a.get(d))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Ac();let i=new At((a,c)=>a-c),s=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let p=r.get(h)||Yn.empty();p=c.applyToLocalView(d,p),r.set(h,p);const _=(i.get(c.batchId)||Ye()).add(h);i=i.insert(c.batchId,_)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,p=h.value,_=kb();p.forEach(v=>{if(!s.has(v)){const I=Bb(t.get(v),r.get(v));I!==null&&_.set(v,I),s=s.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,_))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(Qr());let c=-1,h=s;return a.next(d=>q.forEach(d,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(p)?q.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{h=h.insert(p,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,h,d,Ye())).next(p=>({batchId:c,changes:Db(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=cc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=cc();return this.indexManager.getCollectionParents(e,s).next(c=>q.forEach(c,h=>{const d=function(_,v){return new fd(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((_,v)=>{a=a.insert(_,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((h,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Bt.newInvalidDocument(p)))});let c=cc();return a.forEach((h,d)=>{const p=s.get(h);p!==void 0&&Sc(p.mutation,d,Yn.empty(),Lt.now()),fl(t,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:sA(i.bundledQuery),readTime:Bn(i.readTime)}}(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.overlays=new At(ye.comparator),this.Ir=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qr();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=Qr(),s=t.length+1,a=new ye(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new At((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Qr(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Qr(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return q.resolve(c)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new h_(t,r));let s=this.Ir.get(t);s===void 0&&(s=Ye(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.Tr=new wt(ln.Er),this.dr=new wt(ln.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new ln(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ln(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ye(new Tt([])),r=new ln(t,e),i=new ln(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ye(new Tt([])),r=new ln(t,e),i=new ln(t,e+1);let s=Ye();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new ln(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ln{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new wt(ln.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new c_(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new ln(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,t){return q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ln(t,0),i=new ln(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);s.push(c)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(ze);return t.forEach(i=>{const s=new ln(i,0),a=new ln(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new ln(new ye(s),0);let c=new wt(ze);return this.br.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.wr)),!0)},a),q.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Se(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(t.mutations,i=>{const s=new ln(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new ln(t,0),i=this.br.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.Mr=e,this.docs=function(){return new At(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let r=rr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bt.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=rr();const a=t.path,c=new ye(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||e_(sb(p),r)<=0||(i.has(p.key)||fl(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Te()}Or(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _2(this)}getSize(e){return q.resolve(this.size)}}class _2 extends hA{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.persistence=e,this.Nr=new Os(t=>xo(t),hl),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new m_,this.targetCount=0,this.kr=Oo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Kn(t),q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Jn(0),this.Kr=!1,this.Kr=!0,this.$r=new p2,this.referenceDelegate=e(this),this.Ur=new y2(this),this.indexManager=new t2,this.remoteDocumentCache=function(i){return new m2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rA(t),this.Gr=new f2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new g2(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const i=new v2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class v2 extends ab{constructor(e){super(),this.currentSequenceNumber=e}}class wd{constructor(e){this.persistence=e,this.Jr=new m_,this.Yr=null}static Zr(e){return new wd(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=ye.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return q.or([()=>q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e}O(e,t,r,i){const s=new cd("createOrUpgrade",t);r<1&&i>=1&&(function(h){h.createObjectStore("owner")}(e),function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hw,{unique:!0}),h.createObjectStore("documentMutations")}(e),NE(e),function(h){h.createObjectStore("remoteDocuments")}(e));let a=q.resolve();return r<3&&i>=3&&(r!==0&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),NE(e)),a=a.next(()=>function(h){const d=h.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(h,d){return d.store("mutations").U().next(p=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hw,{unique:!0});const _=d.store("mutations"),v=p.map(I=>_.put(I));return q.waitFor(v)})}(e,s))),a=a.next(()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ni(s))),r<6&&i>=6&&(a=a.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(a=a.next(()=>this.ii(s))),r<8&&i>=8&&(a=a.next(()=>this.si(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.oi(s))),r<11&&i>=11&&(a=a.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(h){const d=h.createObjectStore("documentOverlays",{keyPath:XM});d.createIndex("collectionPathOverlayIndex",ZM,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",eF,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(h){const d=h.createObjectStore("remoteDocumentsV14",{keyPath:$M});d.createIndex("documentKeyIndex",qM),d.createIndex("collectionGroupIndex",zM)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),r<15&&i>=15&&(a=a.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:HM}).createIndex("sequenceNumberIndex",QM,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:JM}).createIndex("documentKeyIndex",YM,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Of(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>q.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(c=>q.forEach(c,h=>{Se(h.userId===s.userId);const d=ho(this.serializer,h);return uA(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,c)=>{const h=new Tt(a),d=function(_){return[0,Un(_)]}(h);s.push(t.get(d).next(p=>p?q.resolve():(_=>t.put({targetId:0,path:Un(_),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>q.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:GM});const r=t.store("collectionParents"),i=new g_,s=a=>{if(i.add(a)){const c=a.lastSegment(),h=a.popLast();return r.put({collectionId:c,parent:Un(h)})}};return t.store("remoteDocuments").J({H:!0},(a,c)=>{const h=new Tt(a);return s(h.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,c,h],d)=>{const p=Hr(c);return s(p.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=hc(i),a=iA(this.serializer,s);return t.put(a)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const c=t.store("remoteDocumentsV14"),h=function(_){return _.document?new ye(Tt.fromString(_.document.name).popFirst(5)):_.noDocument?ye.fromSegments(_.noDocument.path):_.unknownDocument?ye.fromSegments(_.unknownDocument.path):Te()}(a).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(d))}).next(()=>q.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=fA(this.serializer),s=new pA(wd.Zr,this.serializer.ct);return r.U().next(a=>{const c=new Map;return a.forEach(h=>{var d;let p=(d=c.get(h.userId))!==null&&d!==void 0?d:Ye();ho(this.serializer,h).keys().forEach(_=>p=p.add(_)),c.set(h.userId,p)}),q.forEach(c,(h,d)=>{const p=new Tn(d),_=yd.lt(this.serializer,p),v=s.getIndexManager(p),I=vd.lt(p,this.serializer,v,s.referenceDelegate);return new dA(i,I,_,v).recalculateAndSaveOverlaysForDocumentKeys(new em(t,Jn.oe),h).next()})})}}function NE(n){n.createObjectStore("targetDocuments",{keyPath:jM}).createIndex("documentTargetsIndex",WM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KM,{unique:!0}),n.createObjectStore("targetGlobal")}const hg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class __{constructor(e,t,r,i,s,a,c,h,d,p,_=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=c,this.ci=d,this.li=p,this.hi=_,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!__.D())throw new ve(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new u2(this,i),this.Ai=t+"main",this.serializer=new rA(h),this.Ri=new bs(this.Ai,this.hi,new w2(this.serializer)),this.$r=new QF,this.Ur=new r2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fA(this.serializer),this.Gr=new HF,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ne.FAILED_PRECONDITION,hg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Jn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ks(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return tc(e).get("owner").next(t=>q.resolve(this.vi(t)))}Ci(e){return zh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=on(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(c=>s.indexOf(c)===-1);return q.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?q.resolve(!0):tc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ve(ne.FAILED_PRECONDITION,hg);return!1}}return!(!this.networkEnabled||!this.inForeground)||zh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||a&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new em(e,Jn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return vd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new n2(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return yd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){se("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(h){return h===17?rF:h===16?nF:h===15?n_:h===14?db:h===13?fb:h===12?tF:h===11?hb:void Te()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,c=>(a=new em(c,this.Qr?this.Qr.next():Jn.oe),t==="readwrite-primary"?this.wi(a).next(h=>!!h||this.Si(a)).next(h=>{if(!h)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ve(ne.FAILED_PRECONDITION,ob);return r(a)}).next(h=>this.Di(a).next(()=>h)):this.Ki(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Ki(e){return tc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ne.FAILED_PRECONDITION,hg)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tc(e).put("owner",t)}static D(){return bs.D()}bi(e){const t=tc(e);return t.get("owner").next(r=>this.vi(r)?(se("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;zT()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tc(n){return on(n,"owner")}function zh(n){return on(n,"clientMetadata")}function gA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ye(),i=Ye();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new y_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zT()?8:ub(sn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new E2;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(xa()<=nt.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Da(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(xa()<=nt.DEBUG&&se("QueryEngine","Query:",Da(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(xa()<=nt.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Da(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(t))):q.resolve())}Yi(e,t){if(aE(t))return q.resolve(null);let r=ir(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=om(t,null,"F"),r=ir(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Ye(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.ts(t,c);return this.ns(t,d,a,h.readTime)?this.Yi(e,om(t,null,"F")):this.rs(e,d,t,h)}))})))}Zi(e,t,r,i){return aE(t)||i.isEqual(xe.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?q.resolve(null):(xa()<=nt.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Da(t)),this.rs(e,a,t,ib(i,-1)).next(c=>c))})}ts(e,t){let r=new wt(Cb(e));return t.forEach((i,s)=>{fl(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return xa()<=nt.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Da(t)),this.Ji.getDocumentsMatchingQuery(e,t,sr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new At(ze),this._s=new Os(s=>xo(s),hl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function _A(n,e,t,r){return new I2(n,e,t,r)}async function yA(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let h=Ye();for(const d of i){a.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}for(const d of s){c.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function T2(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,d,p){const _=d.batch,v=_.keys();let I=q.resolve();return v.forEach(V=>{I=I.next(()=>p.getEntry(h,V)).next(M=>{const U=d.docVersions.get(V);Se(U!==null),M.version.compareTo(U)<0&&(_.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),p.addEntry(M)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(h,_))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ye();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function vA(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function b2(n,e){const t=be(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const c=[];e.targetChanges.forEach((p,_)=>{const v=i.get(_);if(!v)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,_)));let I=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Gt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),i=i.insert(_,I),function(M,U,G){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(v,I,p)&&c.push(t.Ur.updateTargetData(s,I))});let h=rr(),d=Ye();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(A2(s,a,e.documentUpdates).next(p=>{h=p.Ps,d=p.Is})),!r.isEqual(xe.min())){const p=t.Ur.getLastRemoteSnapshotVersion(s).next(_=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return q.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,d)).next(()=>h)}).then(s=>(t.os=i,s))}function A2(n,e,t){let r=Ye(),i=Ye();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=rr();return t.forEach((c,h)=>{const d=s.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(xe.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):se("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function S2(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vf(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Ti(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function ru(n,e,t){const r=be(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ks(a))throw a;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function pm(n,e,t){const r=be(n);let i=xe.min(),s=Ye();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,d,p){const _=be(h),v=_._s.get(p);return v!==void 0?q.resolve(_.os.get(v)):_.Ur.getTargetData(d,p)}(r,a,ir(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:xe.min(),t?s:Ye())).next(c=>(IA(r,Pb(e),c),{documents:c,Ts:s})))}function wA(n,e){const t=be(n),r=be(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(a=>a?a.target:null))}function EA(n,e){const t=be(n),r=t.us.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,ib(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(IA(t,e,i),i))}function IA(n,e,t){let r=n.us.get(e)||xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function LE(n,e){return`firestore_clients_${n}_${e}`}function ME(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function fg(n,e){return`firestore_targets_${n}_${e}`}class Nf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ve(i.error.code,i.error.message))),a?new Nf(e,t,i.state,s):(Kt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ve(r.error.code,r.error.message))),s?new Rc(e,r.state,i):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=a_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=cb(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Lf(e,s):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class v_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new v_(t.clientId,t.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gm{constructor(){this.activeTargetIds=a_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dg{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new At(ze),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=LE(this.persistenceKey,this.ps),this.vs=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new gm),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this.Os=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(LE(this.persistenceKey,r));if(i){const s=Lf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(fg(this.persistenceKey,e));if(i){const s=Rc.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se("SharedClientState","READ",e,t),t}setItem(e,t){se("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(se("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let a=Jn.oe;if(s!=null)try{const c=JSON.parse(s);Se(typeof c=="number"),a=c}catch(c){Kt("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(t.newValue);r!==Jn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Nf(this.currentUser,e,t,r),s=ME(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=ME(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=fg(this.persistenceKey,e),s=new Rc(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Lf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Nf.Rs(new Tn(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Rc.Rs(i,t)}Ls(e){return v_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],c=[];return s.forEach(h=>{i.has(h)||a.push(h)}),i.forEach(h=>{s.has(h)||c.push(h)}),this.syncEngine.io(a,c).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=a_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class TA{constructor(){this.so=new gm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh=null;function pg(){return Kh===null?Kh=function(){return 268435456+Math.round(2147483648*Math.random())}():Kh++,"0x"+Kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class x2 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const c=pg(),h=this.xo(t,r.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,h,d,i).then(p=>(se("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw qc("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",h,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){const i=P2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=pg();return new Promise((a,c)=>{const h=new YT;h.setWithCredentials(!0),h.listenOnce(XT.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Yh.NO_ERROR:const p=h.getResponseJson();se(En,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Yh.TIMEOUT:se(En,`RPC '${e}' ${s} timed out`),c(new ve(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Yh.HTTP_ERROR:const _=h.getStatus();if(se(En,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const V=function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(G)>=0?G:ne.UNKNOWN}(I.status);c(new ve(V,I.message))}else c(new ve(ne.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ve(ne.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{se(En,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);se(En,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=pg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=tb(),c=eb(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=s.join("");se(En,`Creating RPC '${e}' stream ${i}: ${p}`,h);const _=a.createWebChannel(p,h);let v=!1,I=!1;const V=new C2({Io:U=>{I?se(En,`Not sending because RPC '${e}' stream ${i} is closed:`,U):(v||(se(En,`Opening RPC '${e}' stream ${i} transport.`),_.open(),v=!0),se(En,`RPC '${e}' stream ${i} sending:`,U),_.send(U))},To:()=>_.close()}),M=(U,G,J)=>{U.listen(G,W=>{try{J(W)}catch(X){setTimeout(()=>{throw X},0)}})};return M(_,uc.EventType.OPEN,()=>{I||(se(En,`RPC '${e}' stream ${i} transport opened.`),V.yo())}),M(_,uc.EventType.CLOSE,()=>{I||(I=!0,se(En,`RPC '${e}' stream ${i} transport closed`),V.So())}),M(_,uc.EventType.ERROR,U=>{I||(I=!0,qc(En,`RPC '${e}' stream ${i} transport errored:`,U),V.So(new ve(ne.UNAVAILABLE,"The operation could not be completed")))}),M(_,uc.EventType.MESSAGE,U=>{var G;if(!I){const J=U.data[0];Se(!!J);const W=J,X=W.error||((G=W[0])===null||G===void 0?void 0:G.error);if(X){se(En,`RPC '${e}' stream ${i} received error:`,X);const ee=X.status;let ce=function(A){const D=Xt[A];if(D!==void 0)return zb(D)}(ee),C=X.message;ce===void 0&&(ce=ne.INTERNAL,C="Unknown error status: "+ee+" with message "+X.message),I=!0,V.So(new ve(ce,C)),_.close()}else se(En,`RPC '${e}' stream ${i} received:`,J),V.bo(J)}}),M(c,ZT.STAT_EVENT,U=>{U.stat===Xg.PROXY?se(En,`RPC '${e}' stream ${i} detected buffering proxy`):U.stat===Xg.NOPROXY&&se(En,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof window!="undefined"?window:null}function sf(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n){return new MF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,r,i,s,a,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new AA(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ve(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D2 extends SA{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=BF(this.serializer,e),r=function(s){if(!("targetChange"in s))return xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?Bn(a.readTime):xe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=cm(this.serializer),t.addTarget=function(s,a){let c;const h=a.target;if(c=Rf(h)?{documents:Yb(s,h)}:{query:Xb(s,h)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Wb(s,a.resumeToken);const d=am(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){c.readTime=nu(s,a.snapshotVersion.toTimestamp());const d=am(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=qF(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=cm(this.serializer),t.removeTarget=e,this.a_(t)}}class k2 extends SA{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=$F(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=cm(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xf(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,um(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ne.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,um(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(ne.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class V2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kt(t),this.D_=!1):se("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Bo(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(h){const d=be(h);d.L_.add(4),await gl(d),d.q_.set("Unknown"),d.L_.delete(4),await Id(d)}(this))})}),this.q_=new V2(r,i)}}async function Id(n){if(Bo(n))for(const e of n.B_)await e(!0)}async function gl(n){for(const e of n.B_)await e(!1)}function Td(n,e){const t=be(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),I_(t)?E_(t):pu(t).r_()&&w_(t,e))}function iu(n,e){const t=be(n),r=pu(t);t.N_.delete(e),r.r_()&&RA(t,e),t.N_.size===0&&(r.r_()?r.o_():Bo(t)&&t.q_.set("Unknown"))}function w_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pu(n).A_(e)}function RA(n,e){n.Q_.xe(e),pu(n).R_(e)}function E_(n){n.Q_=new OF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),pu(n).start(),n.q_.v_()}function I_(n){return Bo(n)&&!pu(n).n_()&&n.N_.size>0}function Bo(n){return be(n).L_.size===0}function PA(n){n.Q_=void 0}async function L2(n){n.q_.set("Online")}async function M2(n){n.N_.forEach((e,t)=>{w_(n,e)})}async function F2(n,e){PA(n),I_(n)?(n.q_.M_(e),E_(n)):n.q_.set("Unknown")}async function U2(n,e,t){if(n.q_.set("Online"),e instanceof jb&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(n,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mf(n,r)}else if(e instanceof rf?n.Q_.Ke(e):e instanceof Kb?n.Q_.He(e):n.Q_.We(e),!t.isEqual(xe.min()))try{const r=await vA(n.localStore);t.compareTo(r)>=0&&await function(s,a){const c=s.Q_.rt(a);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,d)=>{const p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(Gt.EMPTY_BYTE_STRING,p.snapshotVersion)),RA(s,h);const _=new Ti(p.target,h,d,p.sequenceNumber);w_(s,_)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await Mf(n,r)}}async function Mf(n,e,t){if(!ks(e))throw e;n.L_.add(1),await gl(n),n.q_.set("Offline"),t||(t=()=>vA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Id(n)})}function CA(n,e){return e().catch(t=>Mf(n,t,e))}async function du(n){const e=be(n),t=Ps(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;B2(e);)try{const i=await S2(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,$2(e,i)}catch(i){await Mf(e,i)}xA(e)&&DA(e)}function B2(n){return Bo(n)&&n.O_.length<10}function $2(n,e){n.O_.push(e);const t=Ps(n);t.r_()&&t.V_&&t.m_(e.mutations)}function xA(n){return Bo(n)&&!Ps(n).n_()&&n.O_.length>0}function DA(n){Ps(n).start()}async function q2(n){Ps(n).p_()}async function z2(n){const e=Ps(n);for(const t of n.O_)e.m_(t.mutations)}async function K2(n,e,t){const r=n.O_.shift(),i=l_.from(r,e,t);await CA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await du(n)}async function j2(n,e){e&&Ps(n).V_&&await async function(r,i){if(function(a){return xF(a)&&a!==ne.ABORTED}(i.code)){const s=r.O_.shift();Ps(r).s_(),await CA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await du(r)}}(n,e),xA(n)&&DA(n)}async function UE(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=Bo(t);t.L_.add(3),await gl(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Id(t)}async function mm(n,e){const t=be(n);e?(t.L_.delete(2),await Id(t)):e||(t.L_.add(2),await gl(t),t.q_.set("Unknown"))}function pu(n){return n.K_||(n.K_=function(t,r,i){const s=be(t);return s.w_(),new D2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:L2.bind(null,n),Ro:M2.bind(null,n),mo:F2.bind(null,n),d_:U2.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),I_(n)?E_(n):n.q_.set("Unknown")):(await n.K_.stop(),PA(n))})),n.K_}function Ps(n){return n.U_||(n.U_=function(t,r,i){const s=be(t);return s.w_(),new k2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:q2.bind(null,n),mo:j2.bind(null,n),f_:z2.bind(null,n),g_:K2.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await du(n)):(await n.U_.stop(),n.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new T_(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b_(n,e){if(Kt("AsyncQueue",`${e}: ${n}`),ks(n))return new ve(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=cc(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new qa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.W_=new At(ye.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class su{constructor(e,t,r,i,s,a,c,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new su(e,t,qa.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class G2{constructor(){this.queries=$E(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=be(t),s=i.queries;i.queries=$E(),s.forEach((a,c)=>{for(const h of c.j_)h.onError(r)})})(this,new ve(ne.ABORTED,"Firestore shutting down"))}}function $E(){return new Os(n=>Rb(n),pd)}async function H2(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new W2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const c=b_(a,`Initialization of query '${Da(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&A_(t)}async function Q2(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function J2(n,e){const t=be(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&A_(t)}function Y2(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function A_(n){n.Y_.forEach(e=>{e.next()})}var _m,qE;(qE=_m||(_m={})).ea="default",qE.Cache="cache";class X2{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new su(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.key=e}}class OA{constructor(e){this.key=e}}class Z2{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ye(),this.mutatedKeys=Ye(),this.Aa=Cb(e),this.Ra=new qa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new BE,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,_)=>{const v=i.get(p),I=fl(this.query,_)?_:null,V=!!v&&this.mutatedKeys.has(v.key),M=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;v&&I?v.data.isEqual(I.data)?V!==M&&(r.track({type:3,doc:I}),U=!0):this.ga(v,I)||(r.track({type:2,doc:I}),U=!0,(h&&this.Aa(I,h)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!v&&I?(r.track({type:0,doc:I}),U=!0):v&&!I&&(r.track({type:1,doc:v}),U=!0,(h||d)&&(c=!0)),U&&(I?(a=a.add(I),s=M?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,_)=>function(I,V){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return M(I)-M(V)}(p.type,_.type)||this.Aa(p.doc,_.doc)),this.pa(r),i=i!=null&&i;const c=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new su(this.query,e.Ra,s,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new BE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new OA(r))}),this.da.forEach(r=>{e.has(r)||t.push(new kA(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ye();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return su.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class eU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tU{constructor(e){this.key=e,this.va=!1}}class nU{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Os(c=>Rb(c),pd),this.Ma=new Map,this.xa=new Set,this.Oa=new At(ye.comparator),this.Na=new Map,this.La=new m_,this.Ba={},this.ka=new Map,this.qa=Oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rU(n,e,t=!0){const r=bd(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await VA(r,e,t,!0),i}async function iU(n,e){const t=bd(n);await VA(t,e,!0,!1)}async function VA(n,e,t,r){const i=await Vf(n.localStore,ir(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let c;return r&&(c=await S_(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Td(n.remoteStore,i),c}async function S_(n,e,t,r,i){n.Ka=(_,v,I)=>async function(M,U,G,J){let W=U.view.ma(G);W.ns&&(W=await pm(M.localStore,U.query,!1).then(({documents:C})=>U.view.ma(C,W)));const X=J&&J.targetChanges.get(U.targetId),ee=J&&J.targetMismatches.get(U.targetId)!=null,ce=U.view.applyChanges(W,M.isPrimaryClient,X,ee);return ym(M,U.targetId,ce.wa),ce.snapshot}(n,_,v,I);const s=await pm(n.localStore,e,!0),a=new Z2(e,s.Ts),c=a.ma(s.documents),h=pl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,h);ym(n,t,d.wa);const p=new eU(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}async function sU(n,e,t){const r=be(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!pd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ru(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&iu(r.remoteStore,i.targetId),ou(r,i.targetId)}).catch(Ds)):(ou(r,i.targetId),await ru(r.localStore,i.targetId,!0))}async function oU(n,e){const t=be(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),iu(t.remoteStore,r.targetId))}async function aU(n,e,t){const r=x_(n);try{const i=await function(a,c){const h=be(a),d=Lt.now(),p=c.reduce((I,V)=>I.add(V.key),Ye());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>{let V=rr(),M=Ye();return h.cs.getEntries(I,p).next(U=>{V=U,V.forEach((G,J)=>{J.isValidDocument()||(M=M.add(G))})}).next(()=>h.localDocuments.getOverlayedDocuments(I,V)).next(U=>{_=U;const G=[];for(const J of c){const W=PF(J,_.get(J.key).overlayedDocument);W!=null&&G.push(new Vi(J.key,W,yb(W.value.mapValue),Rn.exists(!0)))}return h.mutationQueue.addMutationBatch(I,d,G,c)}).next(U=>{v=U;const G=U.applyToLocalDocumentSet(_,M);return h.documentOverlayCache.saveOverlays(I,U.batchId,G)})}).then(()=>({batchId:v.batchId,changes:Db(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new At(ze)),d=d.insert(c,h),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),await Vs(r,i.changes),await du(r.remoteStore)}catch(i){const s=b_(i,"Failed to persist write");t.reject(s)}}async function NA(n,e){const t=be(n);try{const r=await b2(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Se(a.va):i.removedDocuments.size>0&&(Se(a.va),a.va=!1))}),await Vs(t,r,e)}catch(r){await Ds(r)}}function zE(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const h=be(a);h.onlineState=c;let d=!1;h.queries.forEach((p,_)=>{for(const v of _.j_)v.Z_(c)&&(d=!0)}),d&&A_(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uU(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new At(ye.comparator);a=a.insert(s,Bt.newNoDocument(s,xe.min()));const c=Ye().add(s),h=new dl(xe.min(),new Map,new At(ze),a,c);await NA(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),C_(r)}else await ru(r.localStore,e,!1).then(()=>ou(r,e,t)).catch(Ds)}async function cU(n,e){const t=be(n),r=e.batch.batchId;try{const i=await T2(t.localStore,e);P_(t,r,null),R_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Vs(t,i)}catch(i){await Ds(i)}}async function lU(n,e,t){const r=be(n);try{const i=await function(a,c){const h=be(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return h.mutationQueue.lookupMutationBatch(d,c).next(_=>(Se(_!==null),p=_.keys(),h.mutationQueue.removeMutationBatch(d,_))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>h.localDocuments.getDocuments(d,p))})}(r.localStore,e);P_(r,e,t),R_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Vs(r,i)}catch(i){await Ds(i)}}function R_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function P_(n,e,t){const r=be(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ou(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||LA(n,r)})}function LA(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(iu(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),C_(n))}function ym(n,e,t){for(const r of t)r instanceof kA?(n.La.addReference(r.key,e),hU(n,r)):r instanceof OA?(se("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||LA(n,r.key)):Te()}function hU(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(se("SyncEngine","New document in limbo: "+t),n.xa.add(r),C_(n))}function C_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ye(Tt.fromString(e)),r=n.qa.next();n.Na.set(r,new tU(t)),n.Oa=n.Oa.insert(t,r),Td(n.remoteStore,new Ti(ir(dd(t.path)),r,"TargetPurposeLimboResolution",Jn.oe))}}async function Vs(n,e,t){const r=be(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{a.push(r.Ka(h,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){const _=d?!d.fromCache:(p=t==null?void 0:t.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=y_.Wi(h.targetId,d);s.push(_)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(h,d){const p=be(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>q.forEach(d,v=>q.forEach(v.$i,I=>p.persistence.referenceDelegate.addReference(_,v.targetId,I)).next(()=>q.forEach(v.Ui,I=>p.persistence.referenceDelegate.removeReference(_,v.targetId,I)))))}catch(_){if(!ks(_))throw _;se("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const I=p.os.get(v),V=I.snapshotVersion,M=I.withLastLimboFreeSnapshotVersion(V);p.os=p.os.insert(v,M)}}}(r.localStore,s))}async function fU(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await yA(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(h=>{h.reject(new ve(ne.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vs(t,r.hs)}}function dU(n,e){const t=be(n),r=t.Na.get(e);if(r&&r.va)return Ye().add(r.key);{let i=Ye();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}async function pU(n,e){const t=be(n),r=await pm(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&ym(t,e.targetId,i.wa),i}async function gU(n,e){const t=be(n);return EA(t.localStore,e).then(r=>Vs(t,r))}async function mU(n,e,t,r){const i=be(n),s=await function(c,h){const d=be(c),p=be(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",_=>p.Mn(_,h).next(v=>v?d.localDocuments.getDocuments(_,v):q.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await du(i.remoteStore):t==="acknowledged"||t==="rejected"?(P_(i,e,r||null),R_(i,e),function(c,h){be(be(c).mutationQueue).On(h)}(i.localStore,e)):Te(),await Vs(i,s)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function _U(n,e){const t=be(n);if(bd(t),x_(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await KE(t,r.toArray());t.Qa=!0,await mm(t.remoteStore,!0);for(const s of i)Td(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(ou(t,a),ru(t.localStore,a,!0))),iu(t.remoteStore,a)}),await i,await KE(t,r),function(a){const c=be(a);c.Na.forEach((h,d)=>{iu(c.remoteStore,d)}),c.La.pr(),c.Na=new Map,c.Oa=new At(ye.comparator)}(t),t.Qa=!1,await mm(t.remoteStore,!1)}}async function KE(n,e,t){const r=be(n),i=[],s=[];for(const a of e){let c;const h=r.Ma.get(a);if(h&&h.length!==0){c=await Vf(r.localStore,ir(h[0]));for(const d of h){const p=r.Fa.get(d),_=await pU(r,p);_.snapshot&&s.push(_.snapshot)}}else{const d=await wA(r.localStore,a);c=await Vf(r.localStore,d),await S_(r,MA(d),a,!1,c.resumeToken)}i.push(c)}return r.Ca.d_(s),i}function MA(n){return Sb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yU(n){return function(t){return be(be(t).persistence).Qi()}(be(n).localStore)}async function vU(n,e,t,r){const i=be(n);if(i.Qa)return void se("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await EA(i.localStore,Pb(s[0])),c=dl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Gt.EMPTY_BYTE_STRING);await Vs(i,a,c);break}case"rejected":await ru(i.localStore,e,!0),ou(i,e,r);break;default:Te()}}async function wU(n,e,t){const r=bd(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){se("SyncEngine","Adding an already active target "+i);continue}const s=await wA(r.localStore,i),a=await Vf(r.localStore,s);await S_(r,MA(s),a.targetId,!1,a.resumeToken),Td(r.remoteStore,a)}for(const i of t)r.Ma.has(i)&&await ru(r.localStore,i,!1).then(()=>{iu(r.remoteStore,i),ou(r,i)}).catch(Ds)}}function bd(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uU.bind(null,e),e.Ca.d_=J2.bind(null,e.eventManager),e.Ca.$a=Y2.bind(null,e.eventManager),e}function x_(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lU.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return _A(this.persistence,new mA,e.initialUser,this.serializer)}Ga(e){return new pA(wd.Zr,this.serializer)}Wa(e){return new TA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class FA extends Jc{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await x_(this.Ja.syncEngine),await du(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return _A(this.persistence,new mA,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new s2(r,e.asyncQueue,t)}Ha(e,t){const r=new FM(t,this.persistence);return new MM(e.asyncQueue,r)}Ga(e){const t=gA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new __(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bA(),sf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new TA}}class EU extends FA{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof dg&&(this.sharedClientState.syncEngine={no:mU.bind(null,t),ro:vU.bind(null,t),io:wU.bind(null,t),Qi:yU.bind(null,t),eo:gU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await _U(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=bA();if(!dg.D(t))throw new ve(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fU.bind(null,this.syncEngine),await mm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new G2}()}createDatastore(e){const t=Ed(e.databaseInfo.databaseId),r=function(s){return new x2(s)}(e.databaseInfo);return function(s,a,c,h){return new O2(s,a,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,c){return new N2(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>zE(this.syncEngine,t,0),function(){return FE.D()?new FE:new R2}())}createSyncEngine(e,t){return function(i,s,a,c,h,d,p){const _=new nU(i,s,a,c,h,d);return p&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=be(i);se("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await gl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Yc.provider={build:()=>new Yc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Tn.UNAUTHENTICATED,this.clientId=nb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{se("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(se("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=b_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gg(n,e){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function jE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await bU(n);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UE(e.remoteStore,i)),n._onlineComponents=e}async function bU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await gg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qc("Error using user provided cache. Falling back to memory cache: "+t),await gg(n,new Jc)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await gg(n,new Jc);return n._offlineComponents}async function UA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await jE(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await jE(n,new Yc))),n._onlineComponents}function AU(n){return UA(n).then(e=>e.syncEngine)}async function WE(n){const e=await UA(n),t=e.eventManager;return t.onListen=rU.bind(null,e.syncEngine),t.onUnlisten=sU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oU.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(n,e,t){if(!t)throw new ve(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RU(n,e,t,r){if(e===!0&&r===!0)throw new ve(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HE(n){if(!ye.isDocumentKey(n))throw new ve(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function D_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function za(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=D_(n);throw new ve(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $A{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RM;switch(r.type){case"firstParty":return new xM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=GE.get(t);r&&(se("ComponentProvider","Removing Datastore"),GE.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ad(this.firestore,e,this._query)}}class wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class Xc extends Ad{constructor(e,t,r){super(e,t,dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new ye(e))}withConverter(e){return new Xc(this.firestore,e,this._path)}}function JE(n,e,...t){if(n=Pn(n),arguments.length===1&&(e=nb.newId()),SU("doc","path",e),n instanceof $A){const r=Tt.fromString(e,...t);return HE(r),new wr(n,null,new ye(r))}{if(!(n instanceof wr||n instanceof Xc))throw new ve(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tt.fromString(e,...t));return HE(r),new wr(n.firestore,n instanceof Xc?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new AA(this,"async_queue_retry"),this.Vu=()=>{const r=sf();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=sf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=sf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Ts;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ks(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Kt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=T_.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function XE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Zc extends $A{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new YE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YE(e),this._firestoreClient=void 0,await e}}}function PU(n,e,t){t||(t="(default)");const r=Xm(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(Bc(s,e))return i;throw new ve(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function k_(n){if(n._terminated)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CU(n),n._firestoreClient}function CU(n){var e,t,r;const i=n._freezeSettings(),s=function(c,h,d,p){return new sF(c,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,BA(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||((t=i.localCache)===null||t===void 0?void 0:t._offlineComponentProvider)&&((r=i.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new TU(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new au(Gt.fromBase64String(e))}catch(t){throw new ve(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new au(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=/^__.*__$/;class DU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class qA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class N_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new N_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ff(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zA(this.Cu)&&xU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ed(e)}Qu(e,t,r,i=!1){return new N_({Cu:e,methodName:t,qu:r,path:Nt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KA(n){const e=n._freezeSettings(),t=Ed(n._databaseId);return new kU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jA(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);M_("Data must be an object, but it was:",a,r);const c=WA(r,a);let h,d;if(s.merge)h=new Yn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const _ of s.mergeFields){const v=vm(e,_,t);if(!a.contains(v))throw new ve(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);HA(p,v)||p.push(v)}h=new Yn(p),d=a.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,d=a.fieldTransforms;return new DU(new Sn(c),h,d)}class ml extends Rd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ml}}class L_ extends Rd{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new tu(e.serializer,Vb(e.serializer,this.$u));return new Ub(e.path,t)}isEqual(e){return e instanceof L_&&this.$u===e.$u}}function OU(n,e,t,r){const i=n.Qu(1,e,t);M_("Data must be an object, but it was:",i,r);const s=[],a=Sn.empty();Uo(r,(h,d)=>{const p=F_(e,h,t);d=Pn(d);const _=i.Nu(p);if(d instanceof ml)s.push(p);else{const v=Pd(d,_);v!=null&&(s.push(p),a.set(p,v))}});const c=new Yn(s);return new qA(a,c,i.fieldTransforms)}function VU(n,e,t,r,i,s){const a=n.Qu(1,e,t),c=[vm(e,r,t)],h=[i];if(s.length%2!=0)throw new ve(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)c.push(vm(e,s[v])),h.push(s[v+1]);const d=[],p=Sn.empty();for(let v=c.length-1;v>=0;--v)if(!HA(d,c[v])){const I=c[v];let V=h[v];V=Pn(V);const M=a.Nu(I);if(V instanceof ml)d.push(I);else{const U=Pd(V,M);U!=null&&(d.push(I),p.set(I,U))}}const _=new Yn(d);return new qA(p,_,a.fieldTransforms)}function Pd(n,e){if(GA(n=Pn(n)))return M_("Unsupported field value:",e,n),WA(n,e);if(n instanceof Rd)return function(r,i){if(!zA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let h=Pd(c,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Lt.fromDate(r);return{timestampValue:nu(i.serializer,s)}}if(r instanceof Lt){const s=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nu(i.serializer,s)}}if(r instanceof O_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof au)return{bytesValue:Wb(i.serializer,r._byteString)};if(r instanceof wr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:d_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof V_)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return u_(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${D_(r)}`)}(n,e)}function WA(n,e){const t={};return pb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uo(n,(r,i)=>{const s=Pd(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function GA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof O_||n instanceof au||n instanceof wr||n instanceof Rd||n instanceof V_)}function M_(n,e,t){if(!GA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=D_(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function vm(n,e,t){if((e=Pn(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return F_(n,e);throw Ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const NU=new RegExp("[~\\*/\\[\\]]");function F_(n,e,t){if(e.search(NU)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ff(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new ve(ne.INVALID_ARGUMENT,c+n+h)}function HA(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(JA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LU extends QA{data(){return super.data()}}function JA(n,e){return typeof e=="string"?F_(n,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FU{convertValue(e,t="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Uo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>xt(a.doubleValue));return new V_(s)}convertGeoPoint(e){return new O_(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=i_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tt.fromString(e);Se(nA(r));const i=new Po(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||Kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XA extends QA{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(JA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class of extends XA{data(e={}){return super.data(e)}}class UU{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new of(this._firestore,this._userDataWriter,r.key,r,new fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const h=new of(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const h=new of(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:BU(c.type),doc:h,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class ZA extends FU{constructor(e){super(),this.firestore=e}convertBytes(e){return new au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function $U(n,e,t){n=za(n,wr);const r=za(n.firestore,Zc),i=YA(n.converter,e,t);return eS(r,[jA(KA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Rn.none())])}function ZE(n,...e){var t,r,i;n=Pn(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||XE(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(XE(e[a])){const _=e[a];e[a]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let h,d,p;if(n instanceof wr)d=za(n.firestore,Zc),p=dd(n._key.path),h={next:_=>{e[a]&&e[a](qU(d,n,_))},error:e[a+1],complete:e[a+2]};else{const _=za(n,Ad);d=za(_.firestore,Zc),p=_._query;const v=new ZA(d);h={next:I=>{e[a]&&e[a](new UU(d,v,_,I))},error:e[a+1],complete:e[a+2]},MU(n._query)}return function(v,I,V,M){const U=new IU(M),G=new X2(I,U,V);return v.asyncQueue.enqueueAndForget(async()=>H2(await WE(v),G)),()=>{U.Za(),v.asyncQueue.enqueueAndForget(async()=>Q2(await WE(v),G))}}(k_(d),p,c,h)}function eS(n,e){return function(r,i){const s=new Ts;return r.asyncQueue.enqueueAndForget(async()=>aU(await AU(r),i,s)),s.promise}(k_(n),e)}function qU(n,e,t){const r=t.docs.get(e._key),i=new ZA(n);return new XA(n,i,e._key,r,new fc(t.hasPendingWrites,t.fromCache),e.converter)}class zU{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=GU(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function KU(n){return new zU(n)}class jU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Yc.provider,this._offlineComponentProvider={build:t=>new FA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class WU{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Yc.provider,this._offlineComponentProvider={build:t=>new EU(t,e==null?void 0:e.cacheSizeBytes)}}}function GU(n){return new jU(n==null?void 0:n.forceOwnership)}function HU(){return new WU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=KA(e)}set(e,t,r){this._verifyNotCommitted();const i=mg(e,this._firestore),s=YA(i.converter,t,r),a=jA(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Rn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=mg(e,this._firestore);let a;return a=typeof(t=Pn(t))=="string"||t instanceof Sd?VU(this._dataReader,"WriteBatch.update",s._key,t,r,i):OU(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mg(e,this._firestore);return this._mutations=this._mutations.concat(new _d(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mg(n,e){if((n=Pn(n)).firestore!==e)throw new ve(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(){return new ml("deleteField")}function jh(n){return new L_("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(n){return k_(n=za(n,Zc)),new QU(n,e=>eS(n,e))}(function(e,t=!0){(function(i){hu=i})(lu),Ha(new Ao("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new Zc(new PM(r.getProvider("auth-internal")),new kM(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Is(jw,"4.7.3",e),Is(jw,"4.7.3","esm2017")})();function U_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function tS(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YU=tS,nS=new cl("auth","Firebase",tS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Jm("@firebase/auth");function XU(n,...e){Uf.logLevel<=nt.WARN&&Uf.warn(`Auth (${lu}): ${n}`,...e)}function af(n,...e){Uf.logLevel<=nt.ERROR&&Uf.error(`Auth (${lu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n,...e){throw B_(n,...e)}function Yr(n,...e){return B_(n,...e)}function rS(n,e,t){const r=Object.assign(Object.assign({},YU()),{[e]:t});return new cl("auth","Firebase",r).create(e,{appName:n.name})}function Ri(n){return rS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function B_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return nS.create(n,...e)}function Le(n,e,...t){if(!n)throw B_(e,...t)}function bi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw af(e),new Error(e)}function xi(n,e){n||bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ZU(){return e0()==="http:"||e0()==="https:"}function e0(){var n;return typeof self!="undefined"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZU()||oL()||"connection"in navigator)?navigator.onLine:!0}function tB(){if(typeof navigator=="undefined")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,xi(t>e,"Short delay should be less than long delay!"),this.isMobile=rL()||aL()}get(){return eB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(n,e){xi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=new _l(3e4,6e4);function Ns(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ls(n,e,t,r,i={}){return sS(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=ll(Object.assign({key:n.config.apiKey},a)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:h},s);return sL()||(d.referrerPolicy="no-referrer"),iS.fetch()(oS(n,n.config.apiHost,t,c),d)})}async function sS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},nB),e);try{const i=new sB(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Wh(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wh(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Wh(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw Wh(n,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw rS(n,p,d);kr(n,p)}}catch(i){if(i instanceof Oi)throw i;kr(n,"network-request-failed",{message:String(i)})}}async function yl(n,e,t,r,i={}){const s=await Ls(n,e,t,r,i);return"mfaPendingCredential"in s&&kr(n,"multi-factor-auth-required",{_serverResponse:s}),s}function oS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?$_(n.config,i):`${n.config.apiScheme}://${i}`}function iB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yr(this.auth,"network-request-failed")),rB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Yr(n,e,r);return i.customData._tokenResponse=t,i}function t0(n){return n!==void 0&&n.enterprise!==void 0}class oB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return iB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function aB(n,e){return Ls(n,"GET","/v2/recaptchaConfig",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(n,e){return Ls(n,"POST","/v1/accounts:delete",e)}async function aS(n,e){return Ls(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){if(!!n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cB(n,e=!1){const t=Pn(n),r=await t.getIdToken(e),i=q_(r);Le(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pc(_g(i.auth_time)),issuedAtTime:Pc(_g(i.iat)),expirationTime:Pc(_g(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function _g(n){return Number(n)*1e3}function q_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return af("JWT malformed, contained fewer than 3 sections"),null;try{const i=BT(t);return i?JSON.parse(i):(af("Failed to decode base64 JWT payload"),null)}catch(i){return af("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function n0(n){const e=q_(n);return Le(e,"internal-error"),Le(typeof e.exp!="undefined","internal-error"),Le(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Oi&&lB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function lB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await el(n,aS(t,{idToken:r}));Le(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uS(s.providerUserInfo):[],c=dB(n.providerData,a),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),p=h?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Em(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function fB(n){const e=Pn(n);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uS(n){return n.map(e=>{var{providerId:t}=e,r=U_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(n,e){const t=await sS(n,{},async()=>{const r=ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=oS(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",iS.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gB(n,e){return Ls(n,"POST","/v2/accounts:revokeToken",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken!="undefined","internal-error"),Le(typeof e.refreshToken!="undefined","internal-error");const t="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):n0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=n0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await pB(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Ka;return r&&(Le(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Le(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Le(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(n,e){Le(typeof n=="string"||typeof n=="undefined","internal-error",{appName:e})}class Ai{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=U_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Em(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await el(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cB(this,e)}reload(){return fB(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gr(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await el(this,uB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,h,d,p;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,V=(a=t.photoURL)!==null&&a!==void 0?a:void 0,M=(c=t.tenantId)!==null&&c!==void 0?c:void 0,U=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,J=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:W,emailVerified:X,isAnonymous:ee,providerData:ce,stsTokenManager:C}=t;Le(W&&C,e,"internal-error");const S=Ka.fromJSON(this.name,C);Le(typeof W=="string",e,"internal-error"),ts(_,e.name),ts(v,e.name),Le(typeof X=="boolean",e,"internal-error"),Le(typeof ee=="boolean",e,"internal-error"),ts(I,e.name),ts(V,e.name),ts(M,e.name),ts(U,e.name),ts(G,e.name),ts(J,e.name);const A=new Ai({uid:W,auth:e,email:v,emailVerified:X,displayName:_,isAnonymous:ee,photoURL:V,phoneNumber:I,tenantId:M,stsTokenManager:S,createdAt:G,lastLoginAt:J});return ce&&Array.isArray(ce)&&(A.providerData=ce.map(D=>Object.assign({},D))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ka;i.updateFromServerResponse(t);const s=new Ai({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bf(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?uS(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Ka;c.updateFromIdToken(r);const h=new Ai({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Em(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;function Si(n){xi(n instanceof Function,"Expected a class definition");let e=r0.get(n);return e?(xi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,r0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cS.type="NONE";const i0=cS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n,e,t){return`firebase:${n}:${e}:${t}`}class ja{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=uf(this.userKey,i.apiKey,s),this.fullPersistenceKey=uf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ja(Si(i0),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Si(i0);const a=uf(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const p=await d._get(a);if(p){const _=Ai._fromJSON(e,p);d!==s&&(c=_),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new ja(s,e,r):(s=h[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new ja(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gS(e))return"Blackberry";if(mS(e))return"Webos";if(hS(e))return"Safari";if((e.includes("chrome/")||fS(e))&&!e.includes("edge/"))return"Chrome";if(pS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lS(n=sn()){return/firefox\//i.test(n)}function hS(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fS(n=sn()){return/crios\//i.test(n)}function dS(n=sn()){return/iemobile/i.test(n)}function pS(n=sn()){return/android/i.test(n)}function gS(n=sn()){return/blackberry/i.test(n)}function mS(n=sn()){return/webos/i.test(n)}function z_(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mB(n=sn()){var e;return z_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _B(){return uL()&&document.documentMode===10}function _S(n=sn()){return z_(n)||pS(n)||mS(n)||gS(n)||/windows phone/i.test(n)||dS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(n,e=[]){let t;switch(n){case"Browser":t=s0(sn());break;case"Worker":t=`${s0(sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${lu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const h=e(s);a(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(n,e={}){return Ls(n,"GET","/v2/passwordPolicy",Ns(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=6;class EB{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:wB,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o0(this),this.idTokenSubscription=new o0(this),this.beforeStateQueue=new yB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ja.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await aS(this,{idToken:e}),r=await Ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h==null?void 0:h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gr(this.app))return Promise.reject(Ri(this));const t=e?Pn(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gr(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gr(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vB(this),t=new EB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await gB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Si(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&XU(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function $o(n){return Pn(n)}class o0{constructor(e){this.auth=e,this.observer=null,this.addObserver=pL(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TB(n){Cd=n}function vS(n){return Cd.loadJS(n)}function bB(){return Cd.recaptchaEnterpriseScript}function AB(){return Cd.gapiScript}function SB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const RB="recaptcha-enterprise",PB="NO_RECAPTCHA";class CB{constructor(e){this.type=RB,this.auth=$o(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{aB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new oB(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(h=>{c(h)})})}function i(s,a,c){const h=window.grecaptcha;t0(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(PB)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&t0(window.grecaptcha))i(c,s,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=bB();h.length!==0&&(h+=c),vS(h).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function a0(n,e,t,r=!1){const i=new CB(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Im(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await a0(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await a0(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(n,e){const t=Xm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Bc(s,e!=null?e:{}))return i;kr(i,"already-initialized")}return t.initialize({options:e})}function DB(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Si);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kB(n,e,t){const r=$o(n);Le(r._canInitEmulator,r,"emulator-config-failed"),Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=wS(e),{host:a,port:c}=OB(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||VB()}function wS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OB(n){const e=wS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:u0(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:u0(a)}}}function u0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function VB(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,t){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}async function NB(n,e){return Ls(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(n,e){return yl(n,"POST","/v1/accounts:signInWithPassword",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(n,e){return yl(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}async function FB(n,e){return yl(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends K_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new tl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new tl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Im(e,t,"signInWithPassword",LB);case"emailLink":return MB(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Im(e,r,"signUpPassword",NB);case"emailLink":return FB(e,{idToken:t,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(n,e){return yl(n,"POST","/v1/accounts:signInWithIdp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB="http://localhost";class Vo extends K_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=U_(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Vo(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Wa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Wa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wa(e,t)}buildRequest(){const e={requestUri:UB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ll(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $B(n){const e=oc(ac(n)).link,t=e?oc(ac(e)).deep_link_id:null,r=oc(ac(n)).deep_link_id;return(r?oc(ac(r)).link:null)||r||t||e||n}class j_{constructor(e){var t,r,i,s,a,c;const h=oc(ac(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,_=BB((i=h.mode)!==null&&i!==void 0?i:null);Le(d&&p&&_,"argument-error"),this.apiKey=d,this.operation=_,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=$B(e);try{return new j_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this.providerId=gu.PROVIDER_ID}static credential(e,t){return tl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=j_.parseLink(t);return Le(r,"argument-error"),tl._fromEmailAndCode(e,r.code,r.tenantId)}}gu.PROVIDER_ID="password";gu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends ES{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends vl{constructor(){super("facebook.com")}static credential(e){return Vo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vo._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ps.credential(t,r)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends vl{constructor(){super("github.com")}static credential(e){return Vo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends vl{constructor(){super("twitter.com")}static credential(e,t){return Vo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(n,e){return yl(n,"POST","/v1/accounts:signUp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ai._fromIdTokenResponse(e,r,i),a=c0(r);return new No({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=c0(r);return new No({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function c0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends Oi{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$f.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new $f(e,t,r,i)}}function IS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(n,s,e,r):s})}async function zB(n,e,t=!1){const r=await el(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return No._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(n,e,t=!1){const{auth:r}=n;if(Gr(r.app))return Promise.reject(Ri(r));const i="reauthenticate";try{const s=await el(n,IS(r,i,e,n),t);Le(s.idToken,r,"internal-error");const a=q_(s.idToken);Le(a,r,"internal-error");const{sub:c}=a;return Le(n.uid===c,r,"user-mismatch"),No._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&kr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(n,e,t=!1){if(Gr(n.app))return Promise.reject(Ri(n));const r="signIn",i=await IS(n,r,e),s=await No._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function jB(n,e){return TS($o(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(n){const e=$o(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WB(n,e,t){if(Gr(n.app))return Promise.reject(Ri(n));const r=$o(n),a=await Im(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qB).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&bS(n),h}),c=await No._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function GB(n,e,t){return Gr(n.app)?Promise.reject(Ri(n)):jB(Pn(n),gu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bS(n),r})}function HB(n,e,t,r){return Pn(n).onIdTokenChanged(e,t,r)}function QB(n,e,t){return Pn(n).beforeAuthStateChanged(e,t)}const qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qf,"1"),this.storage.removeItem(qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=1e3,YB=10;class SS extends AS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_S(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);_B()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,YB):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},JB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SS.type="LOCAL";const XB=SS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS extends AS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}RS.type="SESSION";const PS=RS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(n){return Promise.all(n.map(async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new xd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(t.origin,s)),h=await ZB(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,h)=>{const d=W_("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){const v=_;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(v.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function t$(n){Xr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){return typeof Xr().WorkerGlobalScope!="undefined"&&typeof Xr().importScripts=="function"}async function n$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r$(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function i$(){return CS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebaseLocalStorageDb",s$=1,zf="firebaseLocalStorage",DS="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dd(n,e){return n.transaction([zf],e?"readwrite":"readonly").objectStore(zf)}function o$(){const n=indexedDB.deleteDatabase(xS);return new wl(n).toPromise()}function Tm(){const n=indexedDB.open(xS,s$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zf,{keyPath:DS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zf)?e(r):(r.close(),await o$(),e(await Tm()))})})}async function l0(n,e,t){const r=Dd(n,!0).put({[DS]:e,value:t});return new wl(r).toPromise()}async function a$(n,e){const t=Dd(n,!1).get(e),r=await new wl(t).toPromise();return r===void 0?null:r.value}function h0(n,e){const t=Dd(n,!0).delete(e);return new wl(t).toPromise()}const u$=800,c$=3;class kS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>c$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(i$()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await n$(),!this.activeServiceWorker)return;this.sender=new e$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((t=r[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tm();return await l0(e,qf,"1"),await h0(e,qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>l0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>a$(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>h0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Dd(i,!1).getAll();return new wl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kS.type="LOCAL";const l$=kS;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(n,e){return e?Si(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends K_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function f$(n){return TS(n.auth,new G_(n),n.bypassAuthState)}function d$(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),KB(t,new G_(n),n.bypassAuthState)}async function p$(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),zB(t,new G_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f$;case"linkViaPopup":case"linkViaRedirect":return p$;case"reauthViaPopup":case"reauthViaRedirect":return d$;default:kr(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=new _l(2e3,1e4);class Ma extends OS{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=W_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g$.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$="pendingRedirect",cf=new Map;class _$ extends OS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=cf.get(this.auth._key());if(!e){try{const r=await y$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}cf.set(this.auth._key(),e)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y$(n,e){const t=E$(e),r=w$(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function v$(n,e){cf.set(n._key(),e)}function w$(n){return Si(n._redirectPersistence)}function E$(n){return uf(m$,n.config.apiKey,n.name)}async function I$(n,e,t=!1){if(Gr(n.app))return Promise.reject(Ri(n));const r=$o(n),i=h$(r,e),a=await new _$(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=10*60*1e3;class b${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!VS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Yr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T$&&this.cachedEventUids.clear(),this.cachedEventUids.has(f0(e))}saveEventToCache(e){this.cachedEventUids.add(f0(e)),this.lastProcessedEventTime=Date.now()}}function f0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function VS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S$(n,e={}){return Ls(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P$=/^https?/;async function C$(n){if(n.config.emulator)return;const{authorizedDomains:e}=await S$(n);for(const t of e)try{if(x$(t))return}catch{}kr(n,"unauthorized-domain")}function x$(n){const e=wm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!P$.test(t))return!1;if(R$.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=new _l(3e4,6e4);function d0(){const n=Xr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function k$(n){return new Promise((e,t)=>{var r,i,s;function a(){d0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d0(),t(Yr(n,"network-request-failed"))},timeout:D$.get()})}if(!((i=(r=Xr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xr().gapi)===null||s===void 0)&&s.load)a();else{const c=SB("iframefcb");return Xr()[c]=()=>{gapi.load?a():t(Yr(n,"network-request-failed"))},vS(`${AB()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw lf=null,e})}let lf=null;function O$(n){return lf=lf||k$(n),lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=new _l(5e3,15e3),N$="__/auth/iframe",L$="emulator/auth/iframe",M$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U$(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$_(e,L$):`https://${n.config.authDomain}/${N$}`,r={apiKey:e.apiKey,appName:n.name,v:lu},i=F$.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ll(r).slice(1)}`}async function B$(n){const e=await O$(n),t=Xr().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:U$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M$,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Yr(n,"network-request-failed"),c=Xr().setTimeout(()=>{s(a)},V$.get());function h(){Xr().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q$=500,z$=600,K$="_blank",j$="http://localhost";class p0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function W$(n,e,t,r=q$,i=z$){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},$$),{width:r.toString(),height:i.toString(),top:s,left:a}),d=sn().toLowerCase();t&&(c=fS(d)?K$:t),lS(d)&&(e=e||j$,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[I,V])=>`${v}${I}=${V},`,"");if(mB(d)&&c!=="_self")return G$(e||"",c),new p0(null);const _=window.open(e||"",c,p);Le(_,n,"popup-blocked");try{_.focus()}catch{}return new p0(_)}function G$(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="__/auth/handler",Q$="emulator/auth/handler",J$=encodeURIComponent("fac");async function g0(n,e,t,r,i,s){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:lu,eventId:i};if(e instanceof ES){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",dL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,_]of Object.entries(s||{}))a[p]=_}if(e instanceof vl){const p=e.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const h=await n._getAppCheckToken(),d=h?`#${J$}=${encodeURIComponent(h)}`:"";return`${Y$(n)}?${ll(c).slice(1)}${d}`}function Y$({config:n}){return n.emulator?$_(n,Q$):`https://${n.authDomain}/${H$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="webStorageSupport";class X${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PS,this._completeRedirectFn=I$,this._overrideRedirectResult=v$}async _openPopup(e,t,r,i){var s;xi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await g0(e,t,r,wm(),i);return W$(e,a,W_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await g0(e,t,r,wm(),i);return t$(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(xi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await B$(e),r=new b$(e);return t.register("authEvent",i=>(Le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yg,{type:yg},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[yg];a!==void 0&&t(!!a),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=C$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _S()||hS()||z_()}}const Z$=X$;var m0="@firebase/auth",_0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n4(n){Ha(new Ao("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Le(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yS(n)},d=new IB(r,i,s,h);return DB(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ha(new Ao("auth-internal",e=>{const t=$o(e.getProvider("auth").getImmediate());return(r=>new e4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Is(m0,_0,t4(n)),Is(m0,_0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=5*60,i4=qT("authIdTokenMaxAge")||r4;let y0=null;const s4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>i4)return;const i=t==null?void 0:t.token;y0!==i&&(y0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function o4(n=pM()){const e=Xm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=xB(n,{popupRedirectResolver:Z$,persistence:[l$,XB,PS]}),r=qT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=s4(s.toString());QB(t,a,()=>a(t.currentUser)),HB(t,c=>a(c))}}const i=tL("auth");return i&&kB(t,`http://${i}`),t}function a4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TB({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Yr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",a4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n4("Browser");var u4="firebase",c4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(u4,c4,"app");const gn=[];for(let n=0;n<256;++n)gn.push((n+256).toString(16).slice(1));function l4(n,e=0){return(gn[n[e+0]]+gn[n[e+1]]+gn[n[e+2]]+gn[n[e+3]]+"-"+gn[n[e+4]]+gn[n[e+5]]+"-"+gn[n[e+6]]+gn[n[e+7]]+"-"+gn[n[e+8]]+gn[n[e+9]]+"-"+gn[n[e+10]]+gn[n[e+11]]+gn[n[e+12]]+gn[n[e+13]]+gn[n[e+14]]+gn[n[e+15]]).toLowerCase()}let vg;const h4=new Uint8Array(16);function f4(){if(!vg){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vg=crypto.getRandomValues.bind(crypto)}return vg(h4)}const d4=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var v0={randomUUID:d4};function H_(n,e,t){if(v0.randomUUID&&!e&&!n)return v0.randomUUID();n=n||{};const r=n.random||(n.rng||f4)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return l4(r)}const NS={make(n=null,e=null){e||(e=H_());let t=!0;const r=Date.now();return{name:n,id:e,active:t,timestamp:r}}},p4={make(n){const e=H_(),t=Date.now(),r=NS.make("",n),i={[r.id]:r},s={};return[{users:{[n]:"owner"},id:e,people:i,transactions:s},{name:"",timestamp:t,nusers:1,ntransactions:0}]}},w0={make(n,e,t,r){const i=n.length;let s="";const a=H_();let c=0,h=n.indexOf(t);h===-1&&(h=i>0?0:-1);const d=n.map(_=>({isDebtor:r[_].active,owedAmount:0}));let p=Date.now();return{name:s,id:a,amount:c,payer:h,currency:e,debts:d,timestamp:p}},updatePeople(n,e){for(let t=n.debts.length;t<e;t++)n.debts.push({isDebtor:!1,owedAmount:0})},split(n){const e=n.debts.filter(i=>i.isDebtor).length;if(e==0){Object.values(n.debts).forEach(i=>{i.owedAmount=0});return}const t=Math.floor(n.amount/e);let r=n.amount%e;for(let i=n.debts.length-1;i>=0;--i)n.debts[i].isDebtor?(n.debts[i].owedAmount=t,r>0&&(n.debts[i].owedAmount+=1,--r)):n.debts[i].owedAmount=0}},wg={make(n=0){const r={mat:[],ntransactions:0};for(let i=0;i<n;++i)this.addPeople(r,n);return r},addPeople(n,e){for(let t=n.mat.length;t<e;++t)n.mat.push(Array(n.mat.length).fill(0))},getSummary(n,e){if(e==null||e<0||e>=n.mat.length)return[];const t=[];for(let r=0;r<n.mat[e].length;r++)n.mat[e][r]!==0&&t.push({person:r,amount:n.mat[e][r]});for(let r=e+1;r<n.mat.length;r++)n.mat[r][e]!==0&&t.push({person:r,amount:-n.mat[r][e]});return t},applyTransaction(n,e,t){const r=e.payer;for(let i=0;i<e.debts.length;++i)this._apply(n,i,r,t*e.debts[i].owedAmount);n.ntransactions+=t},_apply(n,e,t,r){e!==t&&(e<t&&([e,t]=[t,e],r=-r),n.mat[e][t]+=r)}},LS={make(n={},e=0){const s={nPeople:e,nTransactions:0,nCurrencies:0,mats:{}};return LS.applyTransactions(s,n,e),s},applyTransactions(n,e,t){n.nPeople=t,t&&Object.values(e).forEach(r=>{r.currency in n.mats||(n.mats[r.currency]=wg.make(t),++n.nCurrencies),wg.applyTransaction(n.mats[r.currency],r,1),++n.nTransactions})},getSummary(n,e){const t=[],r={};return e<0||!(n!=null&&n.nPeople)||e>=n.nPeople?{ans:t,totals:r}:(Object.entries(n.mats).forEach(([i,s])=>{const a=wg.getSummary(s,e);let c=0;a.length>0&&a.forEach(h=>{t.push({currency:i,person:h.person,amount:h.amount}),c+=h.amount}),c!=0&&(r[i]=c)}),{ans:t,totals:r})}},E0={getDay(n){return new Date(n).getDate().toString().padStart(2,"0")},getMonth(n){const e=new Date(n);return new Intl.DateTimeFormat("en-GB",{month:"short"}).format(e)},getYear(n){return new Date(n).getFullYear()},displayCurrency(n,e){return`${n} ${parseFloat(e/100).toFixed(2)}`},truncate(n){if(!n)return n;const e=40;return n.length>e?n.substring(0,e-3)+"...":n},isDev(){return!!{}.VITE_FIREBASE_API_KEY&&!!{}.VITE_FIREBASE_AUTH_DOMAIN&&!!{}.VITE_FIREBASE_PROJECT_ID&&!!{}.VITE_FIREBASE_STORAGE_BUCKET&&!!{}.VITE_FIREBASE_MESSAGING_SENDER_ID&&!!{}.VITE_FIREBASE_APP_ID}},Eg={make(){return{apiKey:null,authDomain:null,projectId:null,storageBucket:null,messagingSenderId:null,appId:null}},isEmpty(n){return!n.apiKey&&!n.authDomain&&!n.projectId&&!n.storageBucket&&!n.messagingSenderId&&!n.appId},isCompatible(n){return["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].every(t=>n[t]&&n[t].trim()!=="")}};var nc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},bm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,v=2,I=4,V=1,M=2,U=1,G=2,J=4,W=8,X=16,ee=32,ce=64,C=128,S=256,A=512,D=30,N="...",O=800,P=16,fe=1,We=2,et=3,Ce=1/0,$e=9007199254740991,Cn=17976931348623157e292,_n=0/0,Dt=4294967295,St=Dt-1,Rt=Dt>>>1,Vr=[["ary",C],["bind",U],["bindKey",G],["curry",W],["curryRight",X],["flip",A],["partial",ee],["partialRight",ce],["rearg",S]],fn="[object Arguments]",Zt="[object Array]",Y="[object AsyncFunction]",_e="[object Boolean]",de="[object Date]",Ee="[object DOMException]",He="[object Error]",at="[object Function]",R="[object GeneratorFunction]",x="[object Map]",z="[object Number]",re="[object Null]",H="[object Object]",ae="[object Promise]",pe="[object Proxy]",le="[object RegExp]",ue="[object Set]",oe="[object String]",Pe="[object Symbol]",ge="[object Undefined]",Ie="[object WeakMap]",De="[object WeakSet]",Re="[object ArrayBuffer]",Ne="[object DataView]",Xe="[object Float32Array]",Ht="[object Float64Array]",kt="[object Int8Array]",dn="[object Int16Array]",Ot="[object Int32Array]",or="[object Uint8Array]",ei="[object Uint8ClampedArray]",$t="[object Uint16Array]",yn="[object Uint32Array]",qo=/\b__p \+= '';/g,mu=/\b(__p \+=) '' \+/g,El=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_u=/&(?:amp|lt|gt|quot|#39);/g,Ni=/[&<>"']/g,yu=RegExp(_u.source),vu=RegExp(Ni.source),ti=/<%-([\s\S]+?)%>/g,Il=/<%([\s\S]+?)%>/g,Ms=/<%=([\s\S]+?)%>/g,Tl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fs=/^\w*$/,bl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,en=/[\\^$.*+?()[\]{}|]/g,Al=RegExp(en.source),ni=/^\s+/,Us=/\s/,Vd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nd=/\{\n\/\* \[wrapped with (.+)\] \*/,Li=/,? & /,Ld=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Md=/[()=,{}\[\]\/\s]/,zo=/\\(\\)?/g,Sl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ko=/\w*$/,jo=/^[-+]0x[0-9a-f]+$/i,Nr=/^0b[01]+$/i,Rl=/^\[object .+?Constructor\]$/,Pl=/^0o[0-7]+$/i,wu=/^(?:0|[1-9]\d*)$/,Eu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bs=/($^)/,Cl=/['\n\r\u2028\u2029\\]/g,Wo="\\ud800-\\udfff",Go="\\u0300-\\u036f",xl="\\ufe20-\\ufe2f",Iu="\\u20d0-\\u20ff",Mi=Go+xl+Iu,Lr="\\u2700-\\u27bf",Ho="a-z\\xdf-\\xf6\\xf8-\\xff",Fd="\\xac\\xb1\\xd7\\xf7",Dl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kl="\\u2000-\\u206f",Ol=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qo="A-Z\\xc0-\\xd6\\xd8-\\xde",Jo="\\ufe0e\\ufe0f",Tu=Fd+Dl+kl+Ol,Yo="['\u2019]",Ud="["+Wo+"]",Vl="["+Tu+"]",$s="["+Mi+"]",bu="\\d+",Bd="["+Lr+"]",Mr="["+Ho+"]",ar="[^"+Wo+Tu+bu+Lr+Ho+Qo+"]",Fi="\\ud83c[\\udffb-\\udfff]",Xo="(?:"+$s+"|"+Fi+")",Au="[^"+Wo+"]",dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ui="[\\ud800-\\udbff][\\udc00-\\udfff]",ur="["+Qo+"]",Bi="\\u200d",Nl="(?:"+Mr+"|"+ar+")",Ll="(?:"+ur+"|"+ar+")",Ml="(?:"+Yo+"(?:d|ll|m|re|s|t|ve))?",Fl="(?:"+Yo+"(?:D|LL|M|RE|S|T|VE))?",Ul=Xo+"?",Bl="["+Jo+"]?",qs="(?:"+Bi+"(?:"+[Au,dt,Ui].join("|")+")"+Bl+Ul+")*",Fr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$l="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Su=Bl+Ul+qs,ql="(?:"+[Bd,dt,Ui].join("|")+")"+Su,$i="(?:"+[Au+$s+"?",$s,dt,Ui,Ud].join("|")+")",$d=RegExp(Yo,"g"),qd=RegExp($s,"g"),Ru=RegExp(Fi+"(?="+Fi+")|"+$i+Su,"g"),Ur=RegExp([ur+"?"+Mr+"+"+Ml+"(?="+[Vl,ur,"$"].join("|")+")",Ll+"+"+Fl+"(?="+[Vl,ur+Nl,"$"].join("|")+")",ur+"?"+Nl+"+"+Ml,ur+"+"+Fl,$l,Fr,bu,ql].join("|"),"g"),zd=RegExp("["+Bi+Wo+Mi+Jo+"]"),Kd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ea=-1,yt={};yt[Xe]=yt[Ht]=yt[kt]=yt[dn]=yt[Ot]=yt[or]=yt[ei]=yt[$t]=yt[yn]=!0,yt[fn]=yt[Zt]=yt[Re]=yt[_e]=yt[Ne]=yt[de]=yt[He]=yt[at]=yt[x]=yt[z]=yt[H]=yt[le]=yt[ue]=yt[oe]=yt[Ie]=!1;var ct={};ct[fn]=ct[Zt]=ct[Re]=ct[Ne]=ct[_e]=ct[de]=ct[Xe]=ct[Ht]=ct[kt]=ct[dn]=ct[Ot]=ct[x]=ct[z]=ct[H]=ct[le]=ct[ue]=ct[oe]=ct[Pe]=ct[or]=ct[ei]=ct[$t]=ct[yn]=!0,ct[He]=ct[at]=ct[Ie]=!1;var zs={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},zl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jd=parseFloat,Wd=parseInt,Cu=typeof nc=="object"&&nc&&nc.Object===Object&&nc,Kl=typeof self=="object"&&self&&self.Object===Object&&self,Qt=Cu||Kl||Function("return this")(),qi=e&&!e.nodeType&&e,Br=qi&&!0&&n&&!n.nodeType&&n,cr=Br&&Br.exports===qi,ta=cr&&Cu.process,$n=function(){try{var F=Br&&Br.require&&Br.require("util").types;return F||ta&&ta.binding&&ta.binding("util")}catch{}}(),zi=$n&&$n.isArrayBuffer,xu=$n&&$n.isDate,na=$n&&$n.isMap,Ks=$n&&$n.isRegExp,Du=$n&&$n.isSet,js=$n&&$n.isTypedArray;function xn(F,Q,j){switch(j.length){case 0:return F.call(Q);case 1:return F.call(Q,j[0]);case 2:return F.call(Q,j[0],j[1]);case 3:return F.call(Q,j[0],j[1],j[2])}return F.apply(Q,j)}function jl(F,Q,j,we){for(var qe=-1,lt=F==null?0:F.length;++qe<lt;){var tn=F[qe];Q(we,tn,j(tn),F)}return we}function an(F,Q){for(var j=-1,we=F==null?0:F.length;++j<we&&Q(F[j],j,F)!==!1;);return F}function Wl(F,Q){for(var j=F==null?0:F.length;j--&&Q(F[j],j,F)!==!1;);return F}function ku(F,Q){for(var j=-1,we=F==null?0:F.length;++j<we;)if(!Q(F[j],j,F))return!1;return!0}function lr(F,Q){for(var j=-1,we=F==null?0:F.length,qe=0,lt=[];++j<we;){var tn=F[j];Q(tn,j,F)&&(lt[qe++]=tn)}return lt}function Ki(F,Q){var j=F==null?0:F.length;return!!j&&ii(F,Q,0)>-1}function ra(F,Q,j){for(var we=-1,qe=F==null?0:F.length;++we<qe;)if(j(Q,F[we]))return!0;return!1}function pt(F,Q){for(var j=-1,we=F==null?0:F.length,qe=Array(we);++j<we;)qe[j]=Q(F[j],j,F);return qe}function Ir(F,Q){for(var j=-1,we=Q.length,qe=F.length;++j<we;)F[qe+j]=Q[j];return F}function ia(F,Q,j,we){var qe=-1,lt=F==null?0:F.length;for(we&&lt&&(j=F[++qe]);++qe<lt;)j=Q(j,F[qe],qe,F);return j}function ri(F,Q,j,we){var qe=F==null?0:F.length;for(we&&qe&&(j=F[--qe]);qe--;)j=Q(j,F[qe],qe,F);return j}function sa(F,Q){for(var j=-1,we=F==null?0:F.length;++j<we;)if(Q(F[j],j,F))return!0;return!1}var Gl=g("length");function Hl(F){return F.split("")}function Ql(F){return F.match(Ld)||[]}function Ws(F,Q,j){var we;return j(F,function(qe,lt,tn){if(Q(qe,lt,tn))return we=lt,!1}),we}function un(F,Q,j,we){for(var qe=F.length,lt=j+(we?1:-1);we?lt--:++lt<qe;)if(Q(F[lt],lt,F))return lt;return-1}function ii(F,Q,j){return Q===Q?mR(F,Q,j):un(F,si,j)}function Jl(F,Q,j,we){for(var qe=j-1,lt=F.length;++qe<lt;)if(we(F[qe],Q))return qe;return-1}function si(F){return F!==F}function l(F,Q){var j=F==null?0:F.length;return j?K(F,Q)/j:_n}function g(F){return function(Q){return Q==null?t:Q[F]}}function y(F){return function(Q){return F==null?t:F[Q]}}function T(F,Q,j,we,qe){return qe(F,function(lt,tn,Et){j=we?(we=!1,lt):Q(j,lt,tn,Et)}),j}function $(F,Q){var j=F.length;for(F.sort(Q);j--;)F[j]=F[j].value;return F}function K(F,Q){for(var j,we=-1,qe=F.length;++we<qe;){var lt=Q(F[we]);lt!==t&&(j=j===t?lt:j+lt)}return j}function he(F,Q){for(var j=-1,we=Array(F);++j<F;)we[j]=Q(j);return we}function gt(F,Q){return pt(Q,function(j){return[j,F[j]]})}function Jt(F){return F&&F.slice(0,ty(F)+1).replace(ni,"")}function Fe(F){return function(Q){return F(Q)}}function Yt(F,Q){return pt(Q,function(j){return F[j]})}function Ft(F,Q){return F.has(Q)}function oi(F,Q){for(var j=-1,we=F.length;++j<we&&ii(Q,F[j],0)>-1;);return j}function qn(F,Q){for(var j=F.length;j--&&ii(Q,F[j],0)>-1;);return j}function oa(F,Q){for(var j=F.length,we=0;j--;)F[j]===Q&&++we;return we}var Ou=y(zs),lR=y(zl);function hR(F){return"\\"+Ct[F]}function fR(F,Q){return F==null?t:F[Q]}function aa(F){return zd.test(F)}function dR(F){return Kd.test(F)}function pR(F){for(var Q,j=[];!(Q=F.next()).done;)j.push(Q.value);return j}function Gd(F){var Q=-1,j=Array(F.size);return F.forEach(function(we,qe){j[++Q]=[qe,we]}),j}function ey(F,Q){return function(j){return F(Q(j))}}function ji(F,Q){for(var j=-1,we=F.length,qe=0,lt=[];++j<we;){var tn=F[j];(tn===Q||tn===p)&&(F[j]=p,lt[qe++]=j)}return lt}function Yl(F){var Q=-1,j=Array(F.size);return F.forEach(function(we){j[++Q]=we}),j}function gR(F){var Q=-1,j=Array(F.size);return F.forEach(function(we){j[++Q]=[we,we]}),j}function mR(F,Q,j){for(var we=j-1,qe=F.length;++we<qe;)if(F[we]===Q)return we;return-1}function _R(F,Q,j){for(var we=j+1;we--;)if(F[we]===Q)return we;return we}function ua(F){return aa(F)?vR(F):Gl(F)}function Tr(F){return aa(F)?wR(F):Hl(F)}function ty(F){for(var Q=F.length;Q--&&Us.test(F.charAt(Q)););return Q}var yR=y(Pu);function vR(F){for(var Q=Ru.lastIndex=0;Ru.test(F);)++Q;return Q}function wR(F){return F.match(Ru)||[]}function ER(F){return F.match(Ur)||[]}var IR=function F(Q){Q=Q==null?Qt:ca.defaults(Qt.Object(),Q,ca.pick(Qt,Zo));var j=Q.Array,we=Q.Date,qe=Q.Error,lt=Q.Function,tn=Q.Math,Et=Q.Object,Hd=Q.RegExp,TR=Q.String,hr=Q.TypeError,Xl=j.prototype,bR=lt.prototype,la=Et.prototype,Zl=Q["__core-js_shared__"],eh=bR.toString,mt=la.hasOwnProperty,AR=0,ny=function(){var o=/[^.]+$/.exec(Zl&&Zl.keys&&Zl.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),th=la.toString,SR=eh.call(Et),RR=Qt._,PR=Hd("^"+eh.call(mt).replace(en,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nh=cr?Q.Buffer:t,Wi=Q.Symbol,rh=Q.Uint8Array,ry=nh?nh.allocUnsafe:t,ih=ey(Et.getPrototypeOf,Et),iy=Et.create,sy=la.propertyIsEnumerable,sh=Xl.splice,oy=Wi?Wi.isConcatSpreadable:t,Vu=Wi?Wi.iterator:t,Gs=Wi?Wi.toStringTag:t,oh=function(){try{var o=Xs(Et,"defineProperty");return o({},"",{}),o}catch{}}(),CR=Q.clearTimeout!==Qt.clearTimeout&&Q.clearTimeout,xR=we&&we.now!==Qt.Date.now&&we.now,DR=Q.setTimeout!==Qt.setTimeout&&Q.setTimeout,ah=tn.ceil,uh=tn.floor,Qd=Et.getOwnPropertySymbols,kR=nh?nh.isBuffer:t,ay=Q.isFinite,OR=Xl.join,VR=ey(Et.keys,Et),nn=tn.max,vn=tn.min,NR=we.now,LR=Q.parseInt,uy=tn.random,MR=Xl.reverse,Jd=Xs(Q,"DataView"),Nu=Xs(Q,"Map"),Yd=Xs(Q,"Promise"),ha=Xs(Q,"Set"),Lu=Xs(Q,"WeakMap"),Mu=Xs(Et,"create"),ch=Lu&&new Lu,fa={},FR=Zs(Jd),UR=Zs(Nu),BR=Zs(Yd),$R=Zs(ha),qR=Zs(Lu),lh=Wi?Wi.prototype:t,Fu=lh?lh.valueOf:t,cy=lh?lh.toString:t;function E(o){if(Ut(o)&&!je(o)&&!(o instanceof tt)){if(o instanceof fr)return o;if(mt.call(o,"__wrapped__"))return lv(o)}return new fr(o)}var da=function(){function o(){}return function(u){if(!Vt(u))return{};if(iy)return iy(u);o.prototype=u;var f=new o;return o.prototype=t,f}}();function hh(){}function fr(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=t}E.templateSettings={escape:ti,evaluate:Il,interpolate:Ms,variable:"",imports:{_:E}},E.prototype=hh.prototype,E.prototype.constructor=E,fr.prototype=da(hh.prototype),fr.prototype.constructor=fr;function tt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function zR(){var o=new tt(this.__wrapped__);return o.__actions__=zn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=zn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=zn(this.__views__),o}function KR(){if(this.__filtered__){var o=new tt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function jR(){var o=this.__wrapped__.value(),u=this.__dir__,f=je(o),m=u<0,w=f?o.length:0,b=rC(0,w,this.__views__),k=b.start,L=b.end,B=L-k,Z=m?L:k-1,te=this.__iteratees__,ie=te.length,me=0,Ae=vn(B,this.__takeCount__);if(!f||!m&&w==B&&Ae==B)return Oy(o,this.__actions__);var Oe=[];e:for(;B--&&me<Ae;){Z+=u;for(var Qe=-1,Ve=o[Z];++Qe<ie;){var Ze=te[Qe],rt=Ze.iteratee,er=Ze.type,On=rt(Ve);if(er==We)Ve=On;else if(!On){if(er==fe)continue e;break e}}Oe[me++]=Ve}return Oe}tt.prototype=da(hh.prototype),tt.prototype.constructor=tt;function Hs(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function WR(){this.__data__=Mu?Mu(null):{},this.size=0}function GR(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function HR(o){var u=this.__data__;if(Mu){var f=u[o];return f===h?t:f}return mt.call(u,o)?u[o]:t}function QR(o){var u=this.__data__;return Mu?u[o]!==t:mt.call(u,o)}function JR(o,u){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=Mu&&u===t?h:u,this}Hs.prototype.clear=WR,Hs.prototype.delete=GR,Hs.prototype.get=HR,Hs.prototype.has=QR,Hs.prototype.set=JR;function ai(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function YR(){this.__data__=[],this.size=0}function XR(o){var u=this.__data__,f=fh(u,o);if(f<0)return!1;var m=u.length-1;return f==m?u.pop():sh.call(u,f,1),--this.size,!0}function ZR(o){var u=this.__data__,f=fh(u,o);return f<0?t:u[f][1]}function eP(o){return fh(this.__data__,o)>-1}function tP(o,u){var f=this.__data__,m=fh(f,o);return m<0?(++this.size,f.push([o,u])):f[m][1]=u,this}ai.prototype.clear=YR,ai.prototype.delete=XR,ai.prototype.get=ZR,ai.prototype.has=eP,ai.prototype.set=tP;function ui(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var m=o[u];this.set(m[0],m[1])}}function nP(){this.size=0,this.__data__={hash:new Hs,map:new(Nu||ai),string:new Hs}}function rP(o){var u=bh(this,o).delete(o);return this.size-=u?1:0,u}function iP(o){return bh(this,o).get(o)}function sP(o){return bh(this,o).has(o)}function oP(o,u){var f=bh(this,o),m=f.size;return f.set(o,u),this.size+=f.size==m?0:1,this}ui.prototype.clear=nP,ui.prototype.delete=rP,ui.prototype.get=iP,ui.prototype.has=sP,ui.prototype.set=oP;function Qs(o){var u=-1,f=o==null?0:o.length;for(this.__data__=new ui;++u<f;)this.add(o[u])}function aP(o){return this.__data__.set(o,h),this}function uP(o){return this.__data__.has(o)}Qs.prototype.add=Qs.prototype.push=aP,Qs.prototype.has=uP;function br(o){var u=this.__data__=new ai(o);this.size=u.size}function cP(){this.__data__=new ai,this.size=0}function lP(o){var u=this.__data__,f=u.delete(o);return this.size=u.size,f}function hP(o){return this.__data__.get(o)}function fP(o){return this.__data__.has(o)}function dP(o,u){var f=this.__data__;if(f instanceof ai){var m=f.__data__;if(!Nu||m.length<i-1)return m.push([o,u]),this.size=++f.size,this;f=this.__data__=new ui(m)}return f.set(o,u),this.size=f.size,this}br.prototype.clear=cP,br.prototype.delete=lP,br.prototype.get=hP,br.prototype.has=fP,br.prototype.set=dP;function ly(o,u){var f=je(o),m=!f&&eo(o),w=!f&&!m&&Yi(o),b=!f&&!m&&!w&&_a(o),k=f||m||w||b,L=k?he(o.length,TR):[],B=L.length;for(var Z in o)(u||mt.call(o,Z))&&!(k&&(Z=="length"||w&&(Z=="offset"||Z=="parent")||b&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||fi(Z,B)))&&L.push(Z);return L}function hy(o){var u=o.length;return u?o[up(0,u-1)]:t}function pP(o,u){return Ah(zn(o),Js(u,0,o.length))}function gP(o){return Ah(zn(o))}function Xd(o,u,f){(f!==t&&!Ar(o[u],f)||f===t&&!(u in o))&&ci(o,u,f)}function Uu(o,u,f){var m=o[u];(!(mt.call(o,u)&&Ar(m,f))||f===t&&!(u in o))&&ci(o,u,f)}function fh(o,u){for(var f=o.length;f--;)if(Ar(o[f][0],u))return f;return-1}function mP(o,u,f,m){return Gi(o,function(w,b,k){u(m,w,f(w),k)}),m}function fy(o,u){return o&&qr(u,cn(u),o)}function _P(o,u){return o&&qr(u,jn(u),o)}function ci(o,u,f){u=="__proto__"&&oh?oh(o,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[u]=f}function Zd(o,u){for(var f=-1,m=u.length,w=j(m),b=o==null;++f<m;)w[f]=b?t:Op(o,u[f]);return w}function Js(o,u,f){return o===o&&(f!==t&&(o=o<=f?o:f),u!==t&&(o=o>=u?o:u)),o}function dr(o,u,f,m,w,b){var k,L=u&_,B=u&v,Z=u&I;if(f&&(k=w?f(o,m,w,b):f(o)),k!==t)return k;if(!Vt(o))return o;var te=je(o);if(te){if(k=sC(o),!L)return zn(o,k)}else{var ie=wn(o),me=ie==at||ie==R;if(Yi(o))return Ly(o,L);if(ie==H||ie==fn||me&&!w){if(k=B||me?{}:tv(o),!L)return B?HP(o,_P(k,o)):GP(o,fy(k,o))}else{if(!ct[ie])return w?o:{};k=oC(o,ie,L)}}b||(b=new br);var Ae=b.get(o);if(Ae)return Ae;b.set(o,k),xv(o)?o.forEach(function(Ve){k.add(dr(Ve,u,f,Ve,o,b))}):Pv(o)&&o.forEach(function(Ve,Ze){k.set(Ze,dr(Ve,u,f,Ze,o,b))});var Oe=Z?B?vp:yp:B?jn:cn,Qe=te?t:Oe(o);return an(Qe||o,function(Ve,Ze){Qe&&(Ze=Ve,Ve=o[Ze]),Uu(k,Ze,dr(Ve,u,f,Ze,o,b))}),k}function yP(o){var u=cn(o);return function(f){return dy(f,o,u)}}function dy(o,u,f){var m=f.length;if(o==null)return!m;for(o=Et(o);m--;){var w=f[m],b=u[w],k=o[w];if(k===t&&!(w in o)||!b(k))return!1}return!0}function py(o,u,f){if(typeof o!="function")throw new hr(a);return Wu(function(){o.apply(t,f)},u)}function Bu(o,u,f,m){var w=-1,b=Ki,k=!0,L=o.length,B=[],Z=u.length;if(!L)return B;f&&(u=pt(u,Fe(f))),m?(b=ra,k=!1):u.length>=i&&(b=Ft,k=!1,u=new Qs(u));e:for(;++w<L;){var te=o[w],ie=f==null?te:f(te);if(te=m||te!==0?te:0,k&&ie===ie){for(var me=Z;me--;)if(u[me]===ie)continue e;B.push(te)}else b(u,ie,m)||B.push(te)}return B}var Gi=$y($r),gy=$y(tp,!0);function vP(o,u){var f=!0;return Gi(o,function(m,w,b){return f=!!u(m,w,b),f}),f}function dh(o,u,f){for(var m=-1,w=o.length;++m<w;){var b=o[m],k=u(b);if(k!=null&&(L===t?k===k&&!Zn(k):f(k,L)))var L=k,B=b}return B}function wP(o,u,f,m){var w=o.length;for(f=Ge(f),f<0&&(f=-f>w?0:w+f),m=m===t||m>w?w:Ge(m),m<0&&(m+=w),m=f>m?0:kv(m);f<m;)o[f++]=u;return o}function my(o,u){var f=[];return Gi(o,function(m,w,b){u(m,w,b)&&f.push(m)}),f}function pn(o,u,f,m,w){var b=-1,k=o.length;for(f||(f=uC),w||(w=[]);++b<k;){var L=o[b];u>0&&f(L)?u>1?pn(L,u-1,f,m,w):Ir(w,L):m||(w[w.length]=L)}return w}var ep=qy(),_y=qy(!0);function $r(o,u){return o&&ep(o,u,cn)}function tp(o,u){return o&&_y(o,u,cn)}function ph(o,u){return lr(u,function(f){return di(o[f])})}function Ys(o,u){u=Qi(u,o);for(var f=0,m=u.length;o!=null&&f<m;)o=o[zr(u[f++])];return f&&f==m?o:t}function yy(o,u,f){var m=u(o);return je(o)?m:Ir(m,f(o))}function Dn(o){return o==null?o===t?ge:re:Gs&&Gs in Et(o)?nC(o):gC(o)}function np(o,u){return o>u}function EP(o,u){return o!=null&&mt.call(o,u)}function IP(o,u){return o!=null&&u in Et(o)}function TP(o,u,f){return o>=vn(u,f)&&o<nn(u,f)}function rp(o,u,f){for(var m=f?ra:Ki,w=o[0].length,b=o.length,k=b,L=j(b),B=1/0,Z=[];k--;){var te=o[k];k&&u&&(te=pt(te,Fe(u))),B=vn(te.length,B),L[k]=!f&&(u||w>=120&&te.length>=120)?new Qs(k&&te):t}te=o[0];var ie=-1,me=L[0];e:for(;++ie<w&&Z.length<B;){var Ae=te[ie],Oe=u?u(Ae):Ae;if(Ae=f||Ae!==0?Ae:0,!(me?Ft(me,Oe):m(Z,Oe,f))){for(k=b;--k;){var Qe=L[k];if(!(Qe?Ft(Qe,Oe):m(o[k],Oe,f)))continue e}me&&me.push(Oe),Z.push(Ae)}}return Z}function bP(o,u,f,m){return $r(o,function(w,b,k){u(m,f(w),b,k)}),m}function $u(o,u,f){u=Qi(u,o),o=sv(o,u);var m=o==null?o:o[zr(gr(u))];return m==null?t:xn(m,o,f)}function vy(o){return Ut(o)&&Dn(o)==fn}function AP(o){return Ut(o)&&Dn(o)==Re}function SP(o){return Ut(o)&&Dn(o)==de}function qu(o,u,f,m,w){return o===u?!0:o==null||u==null||!Ut(o)&&!Ut(u)?o!==o&&u!==u:RP(o,u,f,m,qu,w)}function RP(o,u,f,m,w,b){var k=je(o),L=je(u),B=k?Zt:wn(o),Z=L?Zt:wn(u);B=B==fn?H:B,Z=Z==fn?H:Z;var te=B==H,ie=Z==H,me=B==Z;if(me&&Yi(o)){if(!Yi(u))return!1;k=!0,te=!1}if(me&&!te)return b||(b=new br),k||_a(o)?Xy(o,u,f,m,w,b):eC(o,u,B,f,m,w,b);if(!(f&V)){var Ae=te&&mt.call(o,"__wrapped__"),Oe=ie&&mt.call(u,"__wrapped__");if(Ae||Oe){var Qe=Ae?o.value():o,Ve=Oe?u.value():u;return b||(b=new br),w(Qe,Ve,f,m,b)}}return me?(b||(b=new br),tC(o,u,f,m,w,b)):!1}function PP(o){return Ut(o)&&wn(o)==x}function ip(o,u,f,m){var w=f.length,b=w,k=!m;if(o==null)return!b;for(o=Et(o);w--;){var L=f[w];if(k&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++w<b;){L=f[w];var B=L[0],Z=o[B],te=L[1];if(k&&L[2]){if(Z===t&&!(B in o))return!1}else{var ie=new br;if(m)var me=m(Z,te,B,o,u,ie);if(!(me===t?qu(te,Z,V|M,m,ie):me))return!1}}return!0}function wy(o){if(!Vt(o)||lC(o))return!1;var u=di(o)?PR:Rl;return u.test(Zs(o))}function CP(o){return Ut(o)&&Dn(o)==le}function xP(o){return Ut(o)&&wn(o)==ue}function DP(o){return Ut(o)&&Dh(o.length)&&!!yt[Dn(o)]}function Ey(o){return typeof o=="function"?o:o==null?Wn:typeof o=="object"?je(o)?by(o[0],o[1]):Ty(o):zv(o)}function sp(o){if(!ju(o))return VR(o);var u=[];for(var f in Et(o))mt.call(o,f)&&f!="constructor"&&u.push(f);return u}function kP(o){if(!Vt(o))return pC(o);var u=ju(o),f=[];for(var m in o)m=="constructor"&&(u||!mt.call(o,m))||f.push(m);return f}function op(o,u){return o<u}function Iy(o,u){var f=-1,m=Kn(o)?j(o.length):[];return Gi(o,function(w,b,k){m[++f]=u(w,b,k)}),m}function Ty(o){var u=Ep(o);return u.length==1&&u[0][2]?rv(u[0][0],u[0][1]):function(f){return f===o||ip(f,o,u)}}function by(o,u){return Tp(o)&&nv(u)?rv(zr(o),u):function(f){var m=Op(f,o);return m===t&&m===u?Vp(f,o):qu(u,m,V|M)}}function gh(o,u,f,m,w){o!==u&&ep(u,function(b,k){if(w||(w=new br),Vt(b))OP(o,u,k,f,gh,m,w);else{var L=m?m(Ap(o,k),b,k+"",o,u,w):t;L===t&&(L=b),Xd(o,k,L)}},jn)}function OP(o,u,f,m,w,b,k){var L=Ap(o,f),B=Ap(u,f),Z=k.get(B);if(Z){Xd(o,f,Z);return}var te=b?b(L,B,f+"",o,u,k):t,ie=te===t;if(ie){var me=je(B),Ae=!me&&Yi(B),Oe=!me&&!Ae&&_a(B);te=B,me||Ae||Oe?je(L)?te=L:qt(L)?te=zn(L):Ae?(ie=!1,te=Ly(B,!0)):Oe?(ie=!1,te=My(B,!0)):te=[]:Gu(B)||eo(B)?(te=L,eo(L)?te=Ov(L):(!Vt(L)||di(L))&&(te=tv(B))):ie=!1}ie&&(k.set(B,te),w(te,B,m,b,k),k.delete(B)),Xd(o,f,te)}function Ay(o,u){var f=o.length;if(!!f)return u+=u<0?f:0,fi(u,f)?o[u]:t}function Sy(o,u,f){u.length?u=pt(u,function(b){return je(b)?function(k){return Ys(k,b.length===1?b[0]:b)}:b}):u=[Wn];var m=-1;u=pt(u,Fe(ke()));var w=Iy(o,function(b,k,L){var B=pt(u,function(Z){return Z(b)});return{criteria:B,index:++m,value:b}});return $(w,function(b,k){return WP(b,k,f)})}function VP(o,u){return Ry(o,u,function(f,m){return Vp(o,m)})}function Ry(o,u,f){for(var m=-1,w=u.length,b={};++m<w;){var k=u[m],L=Ys(o,k);f(L,k)&&zu(b,Qi(k,o),L)}return b}function NP(o){return function(u){return Ys(u,o)}}function ap(o,u,f,m){var w=m?Jl:ii,b=-1,k=u.length,L=o;for(o===u&&(u=zn(u)),f&&(L=pt(o,Fe(f)));++b<k;)for(var B=0,Z=u[b],te=f?f(Z):Z;(B=w(L,te,B,m))>-1;)L!==o&&sh.call(L,B,1),sh.call(o,B,1);return o}function Py(o,u){for(var f=o?u.length:0,m=f-1;f--;){var w=u[f];if(f==m||w!==b){var b=w;fi(w)?sh.call(o,w,1):hp(o,w)}}return o}function up(o,u){return o+uh(uy()*(u-o+1))}function LP(o,u,f,m){for(var w=-1,b=nn(ah((u-o)/(f||1)),0),k=j(b);b--;)k[m?b:++w]=o,o+=f;return k}function cp(o,u){var f="";if(!o||u<1||u>$e)return f;do u%2&&(f+=o),u=uh(u/2),u&&(o+=o);while(u);return f}function Je(o,u){return Sp(iv(o,u,Wn),o+"")}function MP(o){return hy(ya(o))}function FP(o,u){var f=ya(o);return Ah(f,Js(u,0,f.length))}function zu(o,u,f,m){if(!Vt(o))return o;u=Qi(u,o);for(var w=-1,b=u.length,k=b-1,L=o;L!=null&&++w<b;){var B=zr(u[w]),Z=f;if(B==="__proto__"||B==="constructor"||B==="prototype")return o;if(w!=k){var te=L[B];Z=m?m(te,B,L):t,Z===t&&(Z=Vt(te)?te:fi(u[w+1])?[]:{})}Uu(L,B,Z),L=L[B]}return o}var Cy=ch?function(o,u){return ch.set(o,u),o}:Wn,UP=oh?function(o,u){return oh(o,"toString",{configurable:!0,enumerable:!1,value:Lp(u),writable:!0})}:Wn;function BP(o){return Ah(ya(o))}function pr(o,u,f){var m=-1,w=o.length;u<0&&(u=-u>w?0:w+u),f=f>w?w:f,f<0&&(f+=w),w=u>f?0:f-u>>>0,u>>>=0;for(var b=j(w);++m<w;)b[m]=o[m+u];return b}function $P(o,u){var f;return Gi(o,function(m,w,b){return f=u(m,w,b),!f}),!!f}function mh(o,u,f){var m=0,w=o==null?m:o.length;if(typeof u=="number"&&u===u&&w<=Rt){for(;m<w;){var b=m+w>>>1,k=o[b];k!==null&&!Zn(k)&&(f?k<=u:k<u)?m=b+1:w=b}return w}return lp(o,u,Wn,f)}function lp(o,u,f,m){var w=0,b=o==null?0:o.length;if(b===0)return 0;u=f(u);for(var k=u!==u,L=u===null,B=Zn(u),Z=u===t;w<b;){var te=uh((w+b)/2),ie=f(o[te]),me=ie!==t,Ae=ie===null,Oe=ie===ie,Qe=Zn(ie);if(k)var Ve=m||Oe;else Z?Ve=Oe&&(m||me):L?Ve=Oe&&me&&(m||!Ae):B?Ve=Oe&&me&&!Ae&&(m||!Qe):Ae||Qe?Ve=!1:Ve=m?ie<=u:ie<u;Ve?w=te+1:b=te}return vn(b,St)}function xy(o,u){for(var f=-1,m=o.length,w=0,b=[];++f<m;){var k=o[f],L=u?u(k):k;if(!f||!Ar(L,B)){var B=L;b[w++]=k===0?0:k}}return b}function Dy(o){return typeof o=="number"?o:Zn(o)?_n:+o}function Xn(o){if(typeof o=="string")return o;if(je(o))return pt(o,Xn)+"";if(Zn(o))return cy?cy.call(o):"";var u=o+"";return u=="0"&&1/o==-Ce?"-0":u}function Hi(o,u,f){var m=-1,w=Ki,b=o.length,k=!0,L=[],B=L;if(f)k=!1,w=ra;else if(b>=i){var Z=u?null:XP(o);if(Z)return Yl(Z);k=!1,w=Ft,B=new Qs}else B=u?[]:L;e:for(;++m<b;){var te=o[m],ie=u?u(te):te;if(te=f||te!==0?te:0,k&&ie===ie){for(var me=B.length;me--;)if(B[me]===ie)continue e;u&&B.push(ie),L.push(te)}else w(B,ie,f)||(B!==L&&B.push(ie),L.push(te))}return L}function hp(o,u){return u=Qi(u,o),o=sv(o,u),o==null||delete o[zr(gr(u))]}function ky(o,u,f,m){return zu(o,u,f(Ys(o,u)),m)}function _h(o,u,f,m){for(var w=o.length,b=m?w:-1;(m?b--:++b<w)&&u(o[b],b,o););return f?pr(o,m?0:b,m?b+1:w):pr(o,m?b+1:0,m?w:b)}function Oy(o,u){var f=o;return f instanceof tt&&(f=f.value()),ia(u,function(m,w){return w.func.apply(w.thisArg,Ir([m],w.args))},f)}function fp(o,u,f){var m=o.length;if(m<2)return m?Hi(o[0]):[];for(var w=-1,b=j(m);++w<m;)for(var k=o[w],L=-1;++L<m;)L!=w&&(b[w]=Bu(b[w]||k,o[L],u,f));return Hi(pn(b,1),u,f)}function Vy(o,u,f){for(var m=-1,w=o.length,b=u.length,k={};++m<w;){var L=m<b?u[m]:t;f(k,o[m],L)}return k}function dp(o){return qt(o)?o:[]}function pp(o){return typeof o=="function"?o:Wn}function Qi(o,u){return je(o)?o:Tp(o,u)?[o]:cv(ht(o))}var qP=Je;function Ji(o,u,f){var m=o.length;return f=f===t?m:f,!u&&f>=m?o:pr(o,u,f)}var Ny=CR||function(o){return Qt.clearTimeout(o)};function Ly(o,u){if(u)return o.slice();var f=o.length,m=ry?ry(f):new o.constructor(f);return o.copy(m),m}function gp(o){var u=new o.constructor(o.byteLength);return new rh(u).set(new rh(o)),u}function zP(o,u){var f=u?gp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function KP(o){var u=new o.constructor(o.source,Ko.exec(o));return u.lastIndex=o.lastIndex,u}function jP(o){return Fu?Et(Fu.call(o)):{}}function My(o,u){var f=u?gp(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function Fy(o,u){if(o!==u){var f=o!==t,m=o===null,w=o===o,b=Zn(o),k=u!==t,L=u===null,B=u===u,Z=Zn(u);if(!L&&!Z&&!b&&o>u||b&&k&&B&&!L&&!Z||m&&k&&B||!f&&B||!w)return 1;if(!m&&!b&&!Z&&o<u||Z&&f&&w&&!m&&!b||L&&f&&w||!k&&w||!B)return-1}return 0}function WP(o,u,f){for(var m=-1,w=o.criteria,b=u.criteria,k=w.length,L=f.length;++m<k;){var B=Fy(w[m],b[m]);if(B){if(m>=L)return B;var Z=f[m];return B*(Z=="desc"?-1:1)}}return o.index-u.index}function Uy(o,u,f,m){for(var w=-1,b=o.length,k=f.length,L=-1,B=u.length,Z=nn(b-k,0),te=j(B+Z),ie=!m;++L<B;)te[L]=u[L];for(;++w<k;)(ie||w<b)&&(te[f[w]]=o[w]);for(;Z--;)te[L++]=o[w++];return te}function By(o,u,f,m){for(var w=-1,b=o.length,k=-1,L=f.length,B=-1,Z=u.length,te=nn(b-L,0),ie=j(te+Z),me=!m;++w<te;)ie[w]=o[w];for(var Ae=w;++B<Z;)ie[Ae+B]=u[B];for(;++k<L;)(me||w<b)&&(ie[Ae+f[k]]=o[w++]);return ie}function zn(o,u){var f=-1,m=o.length;for(u||(u=j(m));++f<m;)u[f]=o[f];return u}function qr(o,u,f,m){var w=!f;f||(f={});for(var b=-1,k=u.length;++b<k;){var L=u[b],B=m?m(f[L],o[L],L,f,o):t;B===t&&(B=o[L]),w?ci(f,L,B):Uu(f,L,B)}return f}function GP(o,u){return qr(o,Ip(o),u)}function HP(o,u){return qr(o,Zy(o),u)}function yh(o,u){return function(f,m){var w=je(f)?jl:mP,b=u?u():{};return w(f,o,ke(m,2),b)}}function pa(o){return Je(function(u,f){var m=-1,w=f.length,b=w>1?f[w-1]:t,k=w>2?f[2]:t;for(b=o.length>3&&typeof b=="function"?(w--,b):t,k&&kn(f[0],f[1],k)&&(b=w<3?t:b,w=1),u=Et(u);++m<w;){var L=f[m];L&&o(u,L,m,b)}return u})}function $y(o,u){return function(f,m){if(f==null)return f;if(!Kn(f))return o(f,m);for(var w=f.length,b=u?w:-1,k=Et(f);(u?b--:++b<w)&&m(k[b],b,k)!==!1;);return f}}function qy(o){return function(u,f,m){for(var w=-1,b=Et(u),k=m(u),L=k.length;L--;){var B=k[o?L:++w];if(f(b[B],B,b)===!1)break}return u}}function QP(o,u,f){var m=u&U,w=Ku(o);function b(){var k=this&&this!==Qt&&this instanceof b?w:o;return k.apply(m?f:this,arguments)}return b}function zy(o){return function(u){u=ht(u);var f=aa(u)?Tr(u):t,m=f?f[0]:u.charAt(0),w=f?Ji(f,1).join(""):u.slice(1);return m[o]()+w}}function ga(o){return function(u){return ia($v(Bv(u).replace($d,"")),o,"")}}function Ku(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var f=da(o.prototype),m=o.apply(f,u);return Vt(m)?m:f}}function JP(o,u,f){var m=Ku(o);function w(){for(var b=arguments.length,k=j(b),L=b,B=ma(w);L--;)k[L]=arguments[L];var Z=b<3&&k[0]!==B&&k[b-1]!==B?[]:ji(k,B);if(b-=Z.length,b<f)return Hy(o,u,vh,w.placeholder,t,k,Z,t,t,f-b);var te=this&&this!==Qt&&this instanceof w?m:o;return xn(te,this,k)}return w}function Ky(o){return function(u,f,m){var w=Et(u);if(!Kn(u)){var b=ke(f,3);u=cn(u),f=function(L){return b(w[L],L,w)}}var k=o(u,f,m);return k>-1?w[b?u[k]:k]:t}}function jy(o){return hi(function(u){var f=u.length,m=f,w=fr.prototype.thru;for(o&&u.reverse();m--;){var b=u[m];if(typeof b!="function")throw new hr(a);if(w&&!k&&Th(b)=="wrapper")var k=new fr([],!0)}for(m=k?m:f;++m<f;){b=u[m];var L=Th(b),B=L=="wrapper"?wp(b):t;B&&bp(B[0])&&B[1]==(C|W|ee|S)&&!B[4].length&&B[9]==1?k=k[Th(B[0])].apply(k,B[3]):k=b.length==1&&bp(b)?k[L]():k.thru(b)}return function(){var Z=arguments,te=Z[0];if(k&&Z.length==1&&je(te))return k.plant(te).value();for(var ie=0,me=f?u[ie].apply(this,Z):te;++ie<f;)me=u[ie].call(this,me);return me}})}function vh(o,u,f,m,w,b,k,L,B,Z){var te=u&C,ie=u&U,me=u&G,Ae=u&(W|X),Oe=u&A,Qe=me?t:Ku(o);function Ve(){for(var Ze=arguments.length,rt=j(Ze),er=Ze;er--;)rt[er]=arguments[er];if(Ae)var On=ma(Ve),tr=oa(rt,On);if(m&&(rt=Uy(rt,m,w,Ae)),b&&(rt=By(rt,b,k,Ae)),Ze-=tr,Ae&&Ze<Z){var zt=ji(rt,On);return Hy(o,u,vh,Ve.placeholder,f,rt,zt,L,B,Z-Ze)}var Sr=ie?f:this,gi=me?Sr[o]:o;return Ze=rt.length,L?rt=mC(rt,L):Oe&&Ze>1&&rt.reverse(),te&&B<Ze&&(rt.length=B),this&&this!==Qt&&this instanceof Ve&&(gi=Qe||Ku(gi)),gi.apply(Sr,rt)}return Ve}function Wy(o,u){return function(f,m){return bP(f,o,u(m),{})}}function wh(o,u){return function(f,m){var w;if(f===t&&m===t)return u;if(f!==t&&(w=f),m!==t){if(w===t)return m;typeof f=="string"||typeof m=="string"?(f=Xn(f),m=Xn(m)):(f=Dy(f),m=Dy(m)),w=o(f,m)}return w}}function mp(o){return hi(function(u){return u=pt(u,Fe(ke())),Je(function(f){var m=this;return o(u,function(w){return xn(w,m,f)})})})}function Eh(o,u){u=u===t?" ":Xn(u);var f=u.length;if(f<2)return f?cp(u,o):u;var m=cp(u,ah(o/ua(u)));return aa(u)?Ji(Tr(m),0,o).join(""):m.slice(0,o)}function YP(o,u,f,m){var w=u&U,b=Ku(o);function k(){for(var L=-1,B=arguments.length,Z=-1,te=m.length,ie=j(te+B),me=this&&this!==Qt&&this instanceof k?b:o;++Z<te;)ie[Z]=m[Z];for(;B--;)ie[Z++]=arguments[++L];return xn(me,w?f:this,ie)}return k}function Gy(o){return function(u,f,m){return m&&typeof m!="number"&&kn(u,f,m)&&(f=m=t),u=pi(u),f===t?(f=u,u=0):f=pi(f),m=m===t?u<f?1:-1:pi(m),LP(u,f,m,o)}}function Ih(o){return function(u,f){return typeof u=="string"&&typeof f=="string"||(u=mr(u),f=mr(f)),o(u,f)}}function Hy(o,u,f,m,w,b,k,L,B,Z){var te=u&W,ie=te?k:t,me=te?t:k,Ae=te?b:t,Oe=te?t:b;u|=te?ee:ce,u&=~(te?ce:ee),u&J||(u&=~(U|G));var Qe=[o,u,w,Ae,ie,Oe,me,L,B,Z],Ve=f.apply(t,Qe);return bp(o)&&ov(Ve,Qe),Ve.placeholder=m,av(Ve,o,u)}function _p(o){var u=tn[o];return function(f,m){if(f=mr(f),m=m==null?0:vn(Ge(m),292),m&&ay(f)){var w=(ht(f)+"e").split("e"),b=u(w[0]+"e"+(+w[1]+m));return w=(ht(b)+"e").split("e"),+(w[0]+"e"+(+w[1]-m))}return u(f)}}var XP=ha&&1/Yl(new ha([,-0]))[1]==Ce?function(o){return new ha(o)}:Up;function Qy(o){return function(u){var f=wn(u);return f==x?Gd(u):f==ue?gR(u):gt(u,o(u))}}function li(o,u,f,m,w,b,k,L){var B=u&G;if(!B&&typeof o!="function")throw new hr(a);var Z=m?m.length:0;if(Z||(u&=~(ee|ce),m=w=t),k=k===t?k:nn(Ge(k),0),L=L===t?L:Ge(L),Z-=w?w.length:0,u&ce){var te=m,ie=w;m=w=t}var me=B?t:wp(o),Ae=[o,u,f,m,w,te,ie,b,k,L];if(me&&dC(Ae,me),o=Ae[0],u=Ae[1],f=Ae[2],m=Ae[3],w=Ae[4],L=Ae[9]=Ae[9]===t?B?0:o.length:nn(Ae[9]-Z,0),!L&&u&(W|X)&&(u&=~(W|X)),!u||u==U)var Oe=QP(o,u,f);else u==W||u==X?Oe=JP(o,u,L):(u==ee||u==(U|ee))&&!w.length?Oe=YP(o,u,f,m):Oe=vh.apply(t,Ae);var Qe=me?Cy:ov;return av(Qe(Oe,Ae),o,u)}function Jy(o,u,f,m){return o===t||Ar(o,la[f])&&!mt.call(m,f)?u:o}function Yy(o,u,f,m,w,b){return Vt(o)&&Vt(u)&&(b.set(u,o),gh(o,u,t,Yy,b),b.delete(u)),o}function ZP(o){return Gu(o)?t:o}function Xy(o,u,f,m,w,b){var k=f&V,L=o.length,B=u.length;if(L!=B&&!(k&&B>L))return!1;var Z=b.get(o),te=b.get(u);if(Z&&te)return Z==u&&te==o;var ie=-1,me=!0,Ae=f&M?new Qs:t;for(b.set(o,u),b.set(u,o);++ie<L;){var Oe=o[ie],Qe=u[ie];if(m)var Ve=k?m(Qe,Oe,ie,u,o,b):m(Oe,Qe,ie,o,u,b);if(Ve!==t){if(Ve)continue;me=!1;break}if(Ae){if(!sa(u,function(Ze,rt){if(!Ft(Ae,rt)&&(Oe===Ze||w(Oe,Ze,f,m,b)))return Ae.push(rt)})){me=!1;break}}else if(!(Oe===Qe||w(Oe,Qe,f,m,b))){me=!1;break}}return b.delete(o),b.delete(u),me}function eC(o,u,f,m,w,b,k){switch(f){case Ne:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Re:return!(o.byteLength!=u.byteLength||!b(new rh(o),new rh(u)));case _e:case de:case z:return Ar(+o,+u);case He:return o.name==u.name&&o.message==u.message;case le:case oe:return o==u+"";case x:var L=Gd;case ue:var B=m&V;if(L||(L=Yl),o.size!=u.size&&!B)return!1;var Z=k.get(o);if(Z)return Z==u;m|=M,k.set(o,u);var te=Xy(L(o),L(u),m,w,b,k);return k.delete(o),te;case Pe:if(Fu)return Fu.call(o)==Fu.call(u)}return!1}function tC(o,u,f,m,w,b){var k=f&V,L=yp(o),B=L.length,Z=yp(u),te=Z.length;if(B!=te&&!k)return!1;for(var ie=B;ie--;){var me=L[ie];if(!(k?me in u:mt.call(u,me)))return!1}var Ae=b.get(o),Oe=b.get(u);if(Ae&&Oe)return Ae==u&&Oe==o;var Qe=!0;b.set(o,u),b.set(u,o);for(var Ve=k;++ie<B;){me=L[ie];var Ze=o[me],rt=u[me];if(m)var er=k?m(rt,Ze,me,u,o,b):m(Ze,rt,me,o,u,b);if(!(er===t?Ze===rt||w(Ze,rt,f,m,b):er)){Qe=!1;break}Ve||(Ve=me=="constructor")}if(Qe&&!Ve){var On=o.constructor,tr=u.constructor;On!=tr&&"constructor"in o&&"constructor"in u&&!(typeof On=="function"&&On instanceof On&&typeof tr=="function"&&tr instanceof tr)&&(Qe=!1)}return b.delete(o),b.delete(u),Qe}function hi(o){return Sp(iv(o,t,dv),o+"")}function yp(o){return yy(o,cn,Ip)}function vp(o){return yy(o,jn,Zy)}var wp=ch?function(o){return ch.get(o)}:Up;function Th(o){for(var u=o.name+"",f=fa[u],m=mt.call(fa,u)?f.length:0;m--;){var w=f[m],b=w.func;if(b==null||b==o)return w.name}return u}function ma(o){var u=mt.call(E,"placeholder")?E:o;return u.placeholder}function ke(){var o=E.iteratee||Mp;return o=o===Mp?Ey:o,arguments.length?o(arguments[0],arguments[1]):o}function bh(o,u){var f=o.__data__;return cC(u)?f[typeof u=="string"?"string":"hash"]:f.map}function Ep(o){for(var u=cn(o),f=u.length;f--;){var m=u[f],w=o[m];u[f]=[m,w,nv(w)]}return u}function Xs(o,u){var f=fR(o,u);return wy(f)?f:t}function nC(o){var u=mt.call(o,Gs),f=o[Gs];try{o[Gs]=t;var m=!0}catch{}var w=th.call(o);return m&&(u?o[Gs]=f:delete o[Gs]),w}var Ip=Qd?function(o){return o==null?[]:(o=Et(o),lr(Qd(o),function(u){return sy.call(o,u)}))}:Bp,Zy=Qd?function(o){for(var u=[];o;)Ir(u,Ip(o)),o=ih(o);return u}:Bp,wn=Dn;(Jd&&wn(new Jd(new ArrayBuffer(1)))!=Ne||Nu&&wn(new Nu)!=x||Yd&&wn(Yd.resolve())!=ae||ha&&wn(new ha)!=ue||Lu&&wn(new Lu)!=Ie)&&(wn=function(o){var u=Dn(o),f=u==H?o.constructor:t,m=f?Zs(f):"";if(m)switch(m){case FR:return Ne;case UR:return x;case BR:return ae;case $R:return ue;case qR:return Ie}return u});function rC(o,u,f){for(var m=-1,w=f.length;++m<w;){var b=f[m],k=b.size;switch(b.type){case"drop":o+=k;break;case"dropRight":u-=k;break;case"take":u=vn(u,o+k);break;case"takeRight":o=nn(o,u-k);break}}return{start:o,end:u}}function iC(o){var u=o.match(Nd);return u?u[1].split(Li):[]}function ev(o,u,f){u=Qi(u,o);for(var m=-1,w=u.length,b=!1;++m<w;){var k=zr(u[m]);if(!(b=o!=null&&f(o,k)))break;o=o[k]}return b||++m!=w?b:(w=o==null?0:o.length,!!w&&Dh(w)&&fi(k,w)&&(je(o)||eo(o)))}function sC(o){var u=o.length,f=new o.constructor(u);return u&&typeof o[0]=="string"&&mt.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function tv(o){return typeof o.constructor=="function"&&!ju(o)?da(ih(o)):{}}function oC(o,u,f){var m=o.constructor;switch(u){case Re:return gp(o);case _e:case de:return new m(+o);case Ne:return zP(o,f);case Xe:case Ht:case kt:case dn:case Ot:case or:case ei:case $t:case yn:return My(o,f);case x:return new m;case z:case oe:return new m(o);case le:return KP(o);case ue:return new m;case Pe:return jP(o)}}function aC(o,u){var f=u.length;if(!f)return o;var m=f-1;return u[m]=(f>1?"& ":"")+u[m],u=u.join(f>2?", ":" "),o.replace(Vd,`{
/* [wrapped with `+u+`] */
`)}function uC(o){return je(o)||eo(o)||!!(oy&&o&&o[oy])}function fi(o,u){var f=typeof o;return u=u==null?$e:u,!!u&&(f=="number"||f!="symbol"&&wu.test(o))&&o>-1&&o%1==0&&o<u}function kn(o,u,f){if(!Vt(f))return!1;var m=typeof u;return(m=="number"?Kn(f)&&fi(u,f.length):m=="string"&&u in f)?Ar(f[u],o):!1}function Tp(o,u){if(je(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||Zn(o)?!0:Fs.test(o)||!Tl.test(o)||u!=null&&o in Et(u)}function cC(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function bp(o){var u=Th(o),f=E[u];if(typeof f!="function"||!(u in tt.prototype))return!1;if(o===f)return!0;var m=wp(f);return!!m&&o===m[0]}function lC(o){return!!ny&&ny in o}var hC=Zl?di:$p;function ju(o){var u=o&&o.constructor,f=typeof u=="function"&&u.prototype||la;return o===f}function nv(o){return o===o&&!Vt(o)}function rv(o,u){return function(f){return f==null?!1:f[o]===u&&(u!==t||o in Et(f))}}function fC(o){var u=Ch(o,function(m){return f.size===d&&f.clear(),m}),f=u.cache;return u}function dC(o,u){var f=o[1],m=u[1],w=f|m,b=w<(U|G|C),k=m==C&&f==W||m==C&&f==S&&o[7].length<=u[8]||m==(C|S)&&u[7].length<=u[8]&&f==W;if(!(b||k))return o;m&U&&(o[2]=u[2],w|=f&U?0:J);var L=u[3];if(L){var B=o[3];o[3]=B?Uy(B,L,u[4]):L,o[4]=B?ji(o[3],p):u[4]}return L=u[5],L&&(B=o[5],o[5]=B?By(B,L,u[6]):L,o[6]=B?ji(o[5],p):u[6]),L=u[7],L&&(o[7]=L),m&C&&(o[8]=o[8]==null?u[8]:vn(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=w,o}function pC(o){var u=[];if(o!=null)for(var f in Et(o))u.push(f);return u}function gC(o){return th.call(o)}function iv(o,u,f){return u=nn(u===t?o.length-1:u,0),function(){for(var m=arguments,w=-1,b=nn(m.length-u,0),k=j(b);++w<b;)k[w]=m[u+w];w=-1;for(var L=j(u+1);++w<u;)L[w]=m[w];return L[u]=f(k),xn(o,this,L)}}function sv(o,u){return u.length<2?o:Ys(o,pr(u,0,-1))}function mC(o,u){for(var f=o.length,m=vn(u.length,f),w=zn(o);m--;){var b=u[m];o[m]=fi(b,f)?w[b]:t}return o}function Ap(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var ov=uv(Cy),Wu=DR||function(o,u){return Qt.setTimeout(o,u)},Sp=uv(UP);function av(o,u,f){var m=u+"";return Sp(o,aC(m,_C(iC(m),f)))}function uv(o){var u=0,f=0;return function(){var m=NR(),w=P-(m-f);if(f=m,w>0){if(++u>=O)return arguments[0]}else u=0;return o.apply(t,arguments)}}function Ah(o,u){var f=-1,m=o.length,w=m-1;for(u=u===t?m:u;++f<u;){var b=up(f,w),k=o[b];o[b]=o[f],o[f]=k}return o.length=u,o}var cv=fC(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(bl,function(f,m,w,b){u.push(w?b.replace(zo,"$1"):m||f)}),u});function zr(o){if(typeof o=="string"||Zn(o))return o;var u=o+"";return u=="0"&&1/o==-Ce?"-0":u}function Zs(o){if(o!=null){try{return eh.call(o)}catch{}try{return o+""}catch{}}return""}function _C(o,u){return an(Vr,function(f){var m="_."+f[0];u&f[1]&&!Ki(o,m)&&o.push(m)}),o.sort()}function lv(o){if(o instanceof tt)return o.clone();var u=new fr(o.__wrapped__,o.__chain__);return u.__actions__=zn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function yC(o,u,f){(f?kn(o,u,f):u===t)?u=1:u=nn(Ge(u),0);var m=o==null?0:o.length;if(!m||u<1)return[];for(var w=0,b=0,k=j(ah(m/u));w<m;)k[b++]=pr(o,w,w+=u);return k}function vC(o){for(var u=-1,f=o==null?0:o.length,m=0,w=[];++u<f;){var b=o[u];b&&(w[m++]=b)}return w}function wC(){var o=arguments.length;if(!o)return[];for(var u=j(o-1),f=arguments[0],m=o;m--;)u[m-1]=arguments[m];return Ir(je(f)?zn(f):[f],pn(u,1))}var EC=Je(function(o,u){return qt(o)?Bu(o,pn(u,1,qt,!0)):[]}),IC=Je(function(o,u){var f=gr(u);return qt(f)&&(f=t),qt(o)?Bu(o,pn(u,1,qt,!0),ke(f,2)):[]}),TC=Je(function(o,u){var f=gr(u);return qt(f)&&(f=t),qt(o)?Bu(o,pn(u,1,qt,!0),t,f):[]});function bC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:Ge(u),pr(o,u<0?0:u,m)):[]}function AC(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:Ge(u),u=m-u,pr(o,0,u<0?0:u)):[]}function SC(o,u){return o&&o.length?_h(o,ke(u,3),!0,!0):[]}function RC(o,u){return o&&o.length?_h(o,ke(u,3),!0):[]}function PC(o,u,f,m){var w=o==null?0:o.length;return w?(f&&typeof f!="number"&&kn(o,u,f)&&(f=0,m=w),wP(o,u,f,m)):[]}function hv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:Ge(f);return w<0&&(w=nn(m+w,0)),un(o,ke(u,3),w)}function fv(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m-1;return f!==t&&(w=Ge(f),w=f<0?nn(m+w,0):vn(w,m-1)),un(o,ke(u,3),w,!0)}function dv(o){var u=o==null?0:o.length;return u?pn(o,1):[]}function CC(o){var u=o==null?0:o.length;return u?pn(o,Ce):[]}function xC(o,u){var f=o==null?0:o.length;return f?(u=u===t?1:Ge(u),pn(o,u)):[]}function DC(o){for(var u=-1,f=o==null?0:o.length,m={};++u<f;){var w=o[u];m[w[0]]=w[1]}return m}function pv(o){return o&&o.length?o[0]:t}function kC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=f==null?0:Ge(f);return w<0&&(w=nn(m+w,0)),ii(o,u,w)}function OC(o){var u=o==null?0:o.length;return u?pr(o,0,-1):[]}var VC=Je(function(o){var u=pt(o,dp);return u.length&&u[0]===o[0]?rp(u):[]}),NC=Je(function(o){var u=gr(o),f=pt(o,dp);return u===gr(f)?u=t:f.pop(),f.length&&f[0]===o[0]?rp(f,ke(u,2)):[]}),LC=Je(function(o){var u=gr(o),f=pt(o,dp);return u=typeof u=="function"?u:t,u&&f.pop(),f.length&&f[0]===o[0]?rp(f,t,u):[]});function MC(o,u){return o==null?"":OR.call(o,u)}function gr(o){var u=o==null?0:o.length;return u?o[u-1]:t}function FC(o,u,f){var m=o==null?0:o.length;if(!m)return-1;var w=m;return f!==t&&(w=Ge(f),w=w<0?nn(m+w,0):vn(w,m-1)),u===u?_R(o,u,w):un(o,si,w,!0)}function UC(o,u){return o&&o.length?Ay(o,Ge(u)):t}var BC=Je(gv);function gv(o,u){return o&&o.length&&u&&u.length?ap(o,u):o}function $C(o,u,f){return o&&o.length&&u&&u.length?ap(o,u,ke(f,2)):o}function qC(o,u,f){return o&&o.length&&u&&u.length?ap(o,u,t,f):o}var zC=hi(function(o,u){var f=o==null?0:o.length,m=Zd(o,u);return Py(o,pt(u,function(w){return fi(w,f)?+w:w}).sort(Fy)),m});function KC(o,u){var f=[];if(!(o&&o.length))return f;var m=-1,w=[],b=o.length;for(u=ke(u,3);++m<b;){var k=o[m];u(k,m,o)&&(f.push(k),w.push(m))}return Py(o,w),f}function Rp(o){return o==null?o:MR.call(o)}function jC(o,u,f){var m=o==null?0:o.length;return m?(f&&typeof f!="number"&&kn(o,u,f)?(u=0,f=m):(u=u==null?0:Ge(u),f=f===t?m:Ge(f)),pr(o,u,f)):[]}function WC(o,u){return mh(o,u)}function GC(o,u,f){return lp(o,u,ke(f,2))}function HC(o,u){var f=o==null?0:o.length;if(f){var m=mh(o,u);if(m<f&&Ar(o[m],u))return m}return-1}function QC(o,u){return mh(o,u,!0)}function JC(o,u,f){return lp(o,u,ke(f,2),!0)}function YC(o,u){var f=o==null?0:o.length;if(f){var m=mh(o,u,!0)-1;if(Ar(o[m],u))return m}return-1}function XC(o){return o&&o.length?xy(o):[]}function ZC(o,u){return o&&o.length?xy(o,ke(u,2)):[]}function e1(o){var u=o==null?0:o.length;return u?pr(o,1,u):[]}function t1(o,u,f){return o&&o.length?(u=f||u===t?1:Ge(u),pr(o,0,u<0?0:u)):[]}function n1(o,u,f){var m=o==null?0:o.length;return m?(u=f||u===t?1:Ge(u),u=m-u,pr(o,u<0?0:u,m)):[]}function r1(o,u){return o&&o.length?_h(o,ke(u,3),!1,!0):[]}function i1(o,u){return o&&o.length?_h(o,ke(u,3)):[]}var s1=Je(function(o){return Hi(pn(o,1,qt,!0))}),o1=Je(function(o){var u=gr(o);return qt(u)&&(u=t),Hi(pn(o,1,qt,!0),ke(u,2))}),a1=Je(function(o){var u=gr(o);return u=typeof u=="function"?u:t,Hi(pn(o,1,qt,!0),t,u)});function u1(o){return o&&o.length?Hi(o):[]}function c1(o,u){return o&&o.length?Hi(o,ke(u,2)):[]}function l1(o,u){return u=typeof u=="function"?u:t,o&&o.length?Hi(o,t,u):[]}function Pp(o){if(!(o&&o.length))return[];var u=0;return o=lr(o,function(f){if(qt(f))return u=nn(f.length,u),!0}),he(u,function(f){return pt(o,g(f))})}function mv(o,u){if(!(o&&o.length))return[];var f=Pp(o);return u==null?f:pt(f,function(m){return xn(u,t,m)})}var h1=Je(function(o,u){return qt(o)?Bu(o,u):[]}),f1=Je(function(o){return fp(lr(o,qt))}),d1=Je(function(o){var u=gr(o);return qt(u)&&(u=t),fp(lr(o,qt),ke(u,2))}),p1=Je(function(o){var u=gr(o);return u=typeof u=="function"?u:t,fp(lr(o,qt),t,u)}),g1=Je(Pp);function m1(o,u){return Vy(o||[],u||[],Uu)}function _1(o,u){return Vy(o||[],u||[],zu)}var y1=Je(function(o){var u=o.length,f=u>1?o[u-1]:t;return f=typeof f=="function"?(o.pop(),f):t,mv(o,f)});function _v(o){var u=E(o);return u.__chain__=!0,u}function v1(o,u){return u(o),o}function Sh(o,u){return u(o)}var w1=hi(function(o){var u=o.length,f=u?o[0]:0,m=this.__wrapped__,w=function(b){return Zd(b,o)};return u>1||this.__actions__.length||!(m instanceof tt)||!fi(f)?this.thru(w):(m=m.slice(f,+f+(u?1:0)),m.__actions__.push({func:Sh,args:[w],thisArg:t}),new fr(m,this.__chain__).thru(function(b){return u&&!b.length&&b.push(t),b}))});function E1(){return _v(this)}function I1(){return new fr(this.value(),this.__chain__)}function T1(){this.__values__===t&&(this.__values__=Dv(this.value()));var o=this.__index__>=this.__values__.length,u=o?t:this.__values__[this.__index__++];return{done:o,value:u}}function b1(){return this}function A1(o){for(var u,f=this;f instanceof hh;){var m=lv(f);m.__index__=0,m.__values__=t,u?w.__wrapped__=m:u=m;var w=m;f=f.__wrapped__}return w.__wrapped__=o,u}function S1(){var o=this.__wrapped__;if(o instanceof tt){var u=o;return this.__actions__.length&&(u=new tt(this)),u=u.reverse(),u.__actions__.push({func:Sh,args:[Rp],thisArg:t}),new fr(u,this.__chain__)}return this.thru(Rp)}function R1(){return Oy(this.__wrapped__,this.__actions__)}var P1=yh(function(o,u,f){mt.call(o,f)?++o[f]:ci(o,f,1)});function C1(o,u,f){var m=je(o)?ku:vP;return f&&kn(o,u,f)&&(u=t),m(o,ke(u,3))}function x1(o,u){var f=je(o)?lr:my;return f(o,ke(u,3))}var D1=Ky(hv),k1=Ky(fv);function O1(o,u){return pn(Rh(o,u),1)}function V1(o,u){return pn(Rh(o,u),Ce)}function N1(o,u,f){return f=f===t?1:Ge(f),pn(Rh(o,u),f)}function yv(o,u){var f=je(o)?an:Gi;return f(o,ke(u,3))}function vv(o,u){var f=je(o)?Wl:gy;return f(o,ke(u,3))}var L1=yh(function(o,u,f){mt.call(o,f)?o[f].push(u):ci(o,f,[u])});function M1(o,u,f,m){o=Kn(o)?o:ya(o),f=f&&!m?Ge(f):0;var w=o.length;return f<0&&(f=nn(w+f,0)),kh(o)?f<=w&&o.indexOf(u,f)>-1:!!w&&ii(o,u,f)>-1}var F1=Je(function(o,u,f){var m=-1,w=typeof u=="function",b=Kn(o)?j(o.length):[];return Gi(o,function(k){b[++m]=w?xn(u,k,f):$u(k,u,f)}),b}),U1=yh(function(o,u,f){ci(o,f,u)});function Rh(o,u){var f=je(o)?pt:Iy;return f(o,ke(u,3))}function B1(o,u,f,m){return o==null?[]:(je(u)||(u=u==null?[]:[u]),f=m?t:f,je(f)||(f=f==null?[]:[f]),Sy(o,u,f))}var $1=yh(function(o,u,f){o[f?0:1].push(u)},function(){return[[],[]]});function q1(o,u,f){var m=je(o)?ia:T,w=arguments.length<3;return m(o,ke(u,4),f,w,Gi)}function z1(o,u,f){var m=je(o)?ri:T,w=arguments.length<3;return m(o,ke(u,4),f,w,gy)}function K1(o,u){var f=je(o)?lr:my;return f(o,xh(ke(u,3)))}function j1(o){var u=je(o)?hy:MP;return u(o)}function W1(o,u,f){(f?kn(o,u,f):u===t)?u=1:u=Ge(u);var m=je(o)?pP:FP;return m(o,u)}function G1(o){var u=je(o)?gP:BP;return u(o)}function H1(o){if(o==null)return 0;if(Kn(o))return kh(o)?ua(o):o.length;var u=wn(o);return u==x||u==ue?o.size:sp(o).length}function Q1(o,u,f){var m=je(o)?sa:$P;return f&&kn(o,u,f)&&(u=t),m(o,ke(u,3))}var J1=Je(function(o,u){if(o==null)return[];var f=u.length;return f>1&&kn(o,u[0],u[1])?u=[]:f>2&&kn(u[0],u[1],u[2])&&(u=[u[0]]),Sy(o,pn(u,1),[])}),Ph=xR||function(){return Qt.Date.now()};function Y1(o,u){if(typeof u!="function")throw new hr(a);return o=Ge(o),function(){if(--o<1)return u.apply(this,arguments)}}function wv(o,u,f){return u=f?t:u,u=o&&u==null?o.length:u,li(o,C,t,t,t,t,u)}function Ev(o,u){var f;if(typeof u!="function")throw new hr(a);return o=Ge(o),function(){return--o>0&&(f=u.apply(this,arguments)),o<=1&&(u=t),f}}var Cp=Je(function(o,u,f){var m=U;if(f.length){var w=ji(f,ma(Cp));m|=ee}return li(o,m,u,f,w)}),Iv=Je(function(o,u,f){var m=U|G;if(f.length){var w=ji(f,ma(Iv));m|=ee}return li(u,m,o,f,w)});function Tv(o,u,f){u=f?t:u;var m=li(o,W,t,t,t,t,t,u);return m.placeholder=Tv.placeholder,m}function bv(o,u,f){u=f?t:u;var m=li(o,X,t,t,t,t,t,u);return m.placeholder=bv.placeholder,m}function Av(o,u,f){var m,w,b,k,L,B,Z=0,te=!1,ie=!1,me=!0;if(typeof o!="function")throw new hr(a);u=mr(u)||0,Vt(f)&&(te=!!f.leading,ie="maxWait"in f,b=ie?nn(mr(f.maxWait)||0,u):b,me="trailing"in f?!!f.trailing:me);function Ae(zt){var Sr=m,gi=w;return m=w=t,Z=zt,k=o.apply(gi,Sr),k}function Oe(zt){return Z=zt,L=Wu(Ze,u),te?Ae(zt):k}function Qe(zt){var Sr=zt-B,gi=zt-Z,Kv=u-Sr;return ie?vn(Kv,b-gi):Kv}function Ve(zt){var Sr=zt-B,gi=zt-Z;return B===t||Sr>=u||Sr<0||ie&&gi>=b}function Ze(){var zt=Ph();if(Ve(zt))return rt(zt);L=Wu(Ze,Qe(zt))}function rt(zt){return L=t,me&&m?Ae(zt):(m=w=t,k)}function er(){L!==t&&Ny(L),Z=0,m=B=w=L=t}function On(){return L===t?k:rt(Ph())}function tr(){var zt=Ph(),Sr=Ve(zt);if(m=arguments,w=this,B=zt,Sr){if(L===t)return Oe(B);if(ie)return Ny(L),L=Wu(Ze,u),Ae(B)}return L===t&&(L=Wu(Ze,u)),k}return tr.cancel=er,tr.flush=On,tr}var X1=Je(function(o,u){return py(o,1,u)}),Z1=Je(function(o,u,f){return py(o,mr(u)||0,f)});function ex(o){return li(o,A)}function Ch(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new hr(a);var f=function(){var m=arguments,w=u?u.apply(this,m):m[0],b=f.cache;if(b.has(w))return b.get(w);var k=o.apply(this,m);return f.cache=b.set(w,k)||b,k};return f.cache=new(Ch.Cache||ui),f}Ch.Cache=ui;function xh(o){if(typeof o!="function")throw new hr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function tx(o){return Ev(2,o)}var nx=qP(function(o,u){u=u.length==1&&je(u[0])?pt(u[0],Fe(ke())):pt(pn(u,1),Fe(ke()));var f=u.length;return Je(function(m){for(var w=-1,b=vn(m.length,f);++w<b;)m[w]=u[w].call(this,m[w]);return xn(o,this,m)})}),xp=Je(function(o,u){var f=ji(u,ma(xp));return li(o,ee,t,u,f)}),Sv=Je(function(o,u){var f=ji(u,ma(Sv));return li(o,ce,t,u,f)}),rx=hi(function(o,u){return li(o,S,t,t,t,u)});function ix(o,u){if(typeof o!="function")throw new hr(a);return u=u===t?u:Ge(u),Je(o,u)}function sx(o,u){if(typeof o!="function")throw new hr(a);return u=u==null?0:nn(Ge(u),0),Je(function(f){var m=f[u],w=Ji(f,0,u);return m&&Ir(w,m),xn(o,this,w)})}function ox(o,u,f){var m=!0,w=!0;if(typeof o!="function")throw new hr(a);return Vt(f)&&(m="leading"in f?!!f.leading:m,w="trailing"in f?!!f.trailing:w),Av(o,u,{leading:m,maxWait:u,trailing:w})}function ax(o){return wv(o,1)}function ux(o,u){return xp(pp(u),o)}function cx(){if(!arguments.length)return[];var o=arguments[0];return je(o)?o:[o]}function lx(o){return dr(o,I)}function hx(o,u){return u=typeof u=="function"?u:t,dr(o,I,u)}function fx(o){return dr(o,_|I)}function dx(o,u){return u=typeof u=="function"?u:t,dr(o,_|I,u)}function px(o,u){return u==null||dy(o,u,cn(u))}function Ar(o,u){return o===u||o!==o&&u!==u}var gx=Ih(np),mx=Ih(function(o,u){return o>=u}),eo=vy(function(){return arguments}())?vy:function(o){return Ut(o)&&mt.call(o,"callee")&&!sy.call(o,"callee")},je=j.isArray,_x=zi?Fe(zi):AP;function Kn(o){return o!=null&&Dh(o.length)&&!di(o)}function qt(o){return Ut(o)&&Kn(o)}function yx(o){return o===!0||o===!1||Ut(o)&&Dn(o)==_e}var Yi=kR||$p,vx=xu?Fe(xu):SP;function wx(o){return Ut(o)&&o.nodeType===1&&!Gu(o)}function Ex(o){if(o==null)return!0;if(Kn(o)&&(je(o)||typeof o=="string"||typeof o.splice=="function"||Yi(o)||_a(o)||eo(o)))return!o.length;var u=wn(o);if(u==x||u==ue)return!o.size;if(ju(o))return!sp(o).length;for(var f in o)if(mt.call(o,f))return!1;return!0}function Ix(o,u){return qu(o,u)}function Tx(o,u,f){f=typeof f=="function"?f:t;var m=f?f(o,u):t;return m===t?qu(o,u,t,f):!!m}function Dp(o){if(!Ut(o))return!1;var u=Dn(o);return u==He||u==Ee||typeof o.message=="string"&&typeof o.name=="string"&&!Gu(o)}function bx(o){return typeof o=="number"&&ay(o)}function di(o){if(!Vt(o))return!1;var u=Dn(o);return u==at||u==R||u==Y||u==pe}function Rv(o){return typeof o=="number"&&o==Ge(o)}function Dh(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=$e}function Vt(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function Ut(o){return o!=null&&typeof o=="object"}var Pv=na?Fe(na):PP;function Ax(o,u){return o===u||ip(o,u,Ep(u))}function Sx(o,u,f){return f=typeof f=="function"?f:t,ip(o,u,Ep(u),f)}function Rx(o){return Cv(o)&&o!=+o}function Px(o){if(hC(o))throw new qe(s);return wy(o)}function Cx(o){return o===null}function xx(o){return o==null}function Cv(o){return typeof o=="number"||Ut(o)&&Dn(o)==z}function Gu(o){if(!Ut(o)||Dn(o)!=H)return!1;var u=ih(o);if(u===null)return!0;var f=mt.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&eh.call(f)==SR}var kp=Ks?Fe(Ks):CP;function Dx(o){return Rv(o)&&o>=-$e&&o<=$e}var xv=Du?Fe(Du):xP;function kh(o){return typeof o=="string"||!je(o)&&Ut(o)&&Dn(o)==oe}function Zn(o){return typeof o=="symbol"||Ut(o)&&Dn(o)==Pe}var _a=js?Fe(js):DP;function kx(o){return o===t}function Ox(o){return Ut(o)&&wn(o)==Ie}function Vx(o){return Ut(o)&&Dn(o)==De}var Nx=Ih(op),Lx=Ih(function(o,u){return o<=u});function Dv(o){if(!o)return[];if(Kn(o))return kh(o)?Tr(o):zn(o);if(Vu&&o[Vu])return pR(o[Vu]());var u=wn(o),f=u==x?Gd:u==ue?Yl:ya;return f(o)}function pi(o){if(!o)return o===0?o:0;if(o=mr(o),o===Ce||o===-Ce){var u=o<0?-1:1;return u*Cn}return o===o?o:0}function Ge(o){var u=pi(o),f=u%1;return u===u?f?u-f:u:0}function kv(o){return o?Js(Ge(o),0,Dt):0}function mr(o){if(typeof o=="number")return o;if(Zn(o))return _n;if(Vt(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=Vt(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Jt(o);var f=Nr.test(o);return f||Pl.test(o)?Wd(o.slice(2),f?2:8):jo.test(o)?_n:+o}function Ov(o){return qr(o,jn(o))}function Mx(o){return o?Js(Ge(o),-$e,$e):o===0?o:0}function ht(o){return o==null?"":Xn(o)}var Fx=pa(function(o,u){if(ju(u)||Kn(u)){qr(u,cn(u),o);return}for(var f in u)mt.call(u,f)&&Uu(o,f,u[f])}),Vv=pa(function(o,u){qr(u,jn(u),o)}),Oh=pa(function(o,u,f,m){qr(u,jn(u),o,m)}),Ux=pa(function(o,u,f,m){qr(u,cn(u),o,m)}),Bx=hi(Zd);function $x(o,u){var f=da(o);return u==null?f:fy(f,u)}var qx=Je(function(o,u){o=Et(o);var f=-1,m=u.length,w=m>2?u[2]:t;for(w&&kn(u[0],u[1],w)&&(m=1);++f<m;)for(var b=u[f],k=jn(b),L=-1,B=k.length;++L<B;){var Z=k[L],te=o[Z];(te===t||Ar(te,la[Z])&&!mt.call(o,Z))&&(o[Z]=b[Z])}return o}),zx=Je(function(o){return o.push(t,Yy),xn(Nv,t,o)});function Kx(o,u){return Ws(o,ke(u,3),$r)}function jx(o,u){return Ws(o,ke(u,3),tp)}function Wx(o,u){return o==null?o:ep(o,ke(u,3),jn)}function Gx(o,u){return o==null?o:_y(o,ke(u,3),jn)}function Hx(o,u){return o&&$r(o,ke(u,3))}function Qx(o,u){return o&&tp(o,ke(u,3))}function Jx(o){return o==null?[]:ph(o,cn(o))}function Yx(o){return o==null?[]:ph(o,jn(o))}function Op(o,u,f){var m=o==null?t:Ys(o,u);return m===t?f:m}function Xx(o,u){return o!=null&&ev(o,u,EP)}function Vp(o,u){return o!=null&&ev(o,u,IP)}var Zx=Wy(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=th.call(u)),o[u]=f},Lp(Wn)),eD=Wy(function(o,u,f){u!=null&&typeof u.toString!="function"&&(u=th.call(u)),mt.call(o,u)?o[u].push(f):o[u]=[f]},ke),tD=Je($u);function cn(o){return Kn(o)?ly(o):sp(o)}function jn(o){return Kn(o)?ly(o,!0):kP(o)}function nD(o,u){var f={};return u=ke(u,3),$r(o,function(m,w,b){ci(f,u(m,w,b),m)}),f}function rD(o,u){var f={};return u=ke(u,3),$r(o,function(m,w,b){ci(f,w,u(m,w,b))}),f}var iD=pa(function(o,u,f){gh(o,u,f)}),Nv=pa(function(o,u,f,m){gh(o,u,f,m)}),sD=hi(function(o,u){var f={};if(o==null)return f;var m=!1;u=pt(u,function(b){return b=Qi(b,o),m||(m=b.length>1),b}),qr(o,vp(o),f),m&&(f=dr(f,_|v|I,ZP));for(var w=u.length;w--;)hp(f,u[w]);return f});function oD(o,u){return Lv(o,xh(ke(u)))}var aD=hi(function(o,u){return o==null?{}:VP(o,u)});function Lv(o,u){if(o==null)return{};var f=pt(vp(o),function(m){return[m]});return u=ke(u),Ry(o,f,function(m,w){return u(m,w[0])})}function uD(o,u,f){u=Qi(u,o);var m=-1,w=u.length;for(w||(w=1,o=t);++m<w;){var b=o==null?t:o[zr(u[m])];b===t&&(m=w,b=f),o=di(b)?b.call(o):b}return o}function cD(o,u,f){return o==null?o:zu(o,u,f)}function lD(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:zu(o,u,f,m)}var Mv=Qy(cn),Fv=Qy(jn);function hD(o,u,f){var m=je(o),w=m||Yi(o)||_a(o);if(u=ke(u,4),f==null){var b=o&&o.constructor;w?f=m?new b:[]:Vt(o)?f=di(b)?da(ih(o)):{}:f={}}return(w?an:$r)(o,function(k,L,B){return u(f,k,L,B)}),f}function fD(o,u){return o==null?!0:hp(o,u)}function dD(o,u,f){return o==null?o:ky(o,u,pp(f))}function pD(o,u,f,m){return m=typeof m=="function"?m:t,o==null?o:ky(o,u,pp(f),m)}function ya(o){return o==null?[]:Yt(o,cn(o))}function gD(o){return o==null?[]:Yt(o,jn(o))}function mD(o,u,f){return f===t&&(f=u,u=t),f!==t&&(f=mr(f),f=f===f?f:0),u!==t&&(u=mr(u),u=u===u?u:0),Js(mr(o),u,f)}function _D(o,u,f){return u=pi(u),f===t?(f=u,u=0):f=pi(f),o=mr(o),TP(o,u,f)}function yD(o,u,f){if(f&&typeof f!="boolean"&&kn(o,u,f)&&(u=f=t),f===t&&(typeof u=="boolean"?(f=u,u=t):typeof o=="boolean"&&(f=o,o=t)),o===t&&u===t?(o=0,u=1):(o=pi(o),u===t?(u=o,o=0):u=pi(u)),o>u){var m=o;o=u,u=m}if(f||o%1||u%1){var w=uy();return vn(o+w*(u-o+jd("1e-"+((w+"").length-1))),u)}return up(o,u)}var vD=ga(function(o,u,f){return u=u.toLowerCase(),o+(f?Uv(u):u)});function Uv(o){return Np(ht(o).toLowerCase())}function Bv(o){return o=ht(o),o&&o.replace(Eu,Ou).replace(qd,"")}function wD(o,u,f){o=ht(o),u=Xn(u);var m=o.length;f=f===t?m:Js(Ge(f),0,m);var w=f;return f-=u.length,f>=0&&o.slice(f,w)==u}function ED(o){return o=ht(o),o&&vu.test(o)?o.replace(Ni,lR):o}function ID(o){return o=ht(o),o&&Al.test(o)?o.replace(en,"\\$&"):o}var TD=ga(function(o,u,f){return o+(f?"-":"")+u.toLowerCase()}),bD=ga(function(o,u,f){return o+(f?" ":"")+u.toLowerCase()}),AD=zy("toLowerCase");function SD(o,u,f){o=ht(o),u=Ge(u);var m=u?ua(o):0;if(!u||m>=u)return o;var w=(u-m)/2;return Eh(uh(w),f)+o+Eh(ah(w),f)}function RD(o,u,f){o=ht(o),u=Ge(u);var m=u?ua(o):0;return u&&m<u?o+Eh(u-m,f):o}function PD(o,u,f){o=ht(o),u=Ge(u);var m=u?ua(o):0;return u&&m<u?Eh(u-m,f)+o:o}function CD(o,u,f){return f||u==null?u=0:u&&(u=+u),LR(ht(o).replace(ni,""),u||0)}function xD(o,u,f){return(f?kn(o,u,f):u===t)?u=1:u=Ge(u),cp(ht(o),u)}function DD(){var o=arguments,u=ht(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var kD=ga(function(o,u,f){return o+(f?"_":"")+u.toLowerCase()});function OD(o,u,f){return f&&typeof f!="number"&&kn(o,u,f)&&(u=f=t),f=f===t?Dt:f>>>0,f?(o=ht(o),o&&(typeof u=="string"||u!=null&&!kp(u))&&(u=Xn(u),!u&&aa(o))?Ji(Tr(o),0,f):o.split(u,f)):[]}var VD=ga(function(o,u,f){return o+(f?" ":"")+Np(u)});function ND(o,u,f){return o=ht(o),f=f==null?0:Js(Ge(f),0,o.length),u=Xn(u),o.slice(f,f+u.length)==u}function LD(o,u,f){var m=E.templateSettings;f&&kn(o,u,f)&&(u=t),o=ht(o),u=Oh({},u,m,Jy);var w=Oh({},u.imports,m.imports,Jy),b=cn(w),k=Yt(w,b),L,B,Z=0,te=u.interpolate||Bs,ie="__p += '",me=Hd((u.escape||Bs).source+"|"+te.source+"|"+(te===Ms?Sl:Bs).source+"|"+(u.evaluate||Bs).source+"|$","g"),Ae="//# sourceURL="+(mt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ea+"]")+`
`;o.replace(me,function(Ve,Ze,rt,er,On,tr){return rt||(rt=er),ie+=o.slice(Z,tr).replace(Cl,hR),Ze&&(L=!0,ie+=`' +
__e(`+Ze+`) +
'`),On&&(B=!0,ie+=`';
`+On+`;
__p += '`),rt&&(ie+=`' +
((__t = (`+rt+`)) == null ? '' : __t) +
'`),Z=tr+Ve.length,Ve}),ie+=`';
`;var Oe=mt.call(u,"variable")&&u.variable;if(!Oe)ie=`with (obj) {
`+ie+`
}
`;else if(Md.test(Oe))throw new qe(c);ie=(B?ie.replace(qo,""):ie).replace(mu,"$1").replace(El,"$1;"),ie="function("+(Oe||"obj")+`) {
`+(Oe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var Qe=qv(function(){return lt(b,Ae+"return "+ie).apply(t,k)});if(Qe.source=ie,Dp(Qe))throw Qe;return Qe}function MD(o){return ht(o).toLowerCase()}function FD(o){return ht(o).toUpperCase()}function UD(o,u,f){if(o=ht(o),o&&(f||u===t))return Jt(o);if(!o||!(u=Xn(u)))return o;var m=Tr(o),w=Tr(u),b=oi(m,w),k=qn(m,w)+1;return Ji(m,b,k).join("")}function BD(o,u,f){if(o=ht(o),o&&(f||u===t))return o.slice(0,ty(o)+1);if(!o||!(u=Xn(u)))return o;var m=Tr(o),w=qn(m,Tr(u))+1;return Ji(m,0,w).join("")}function $D(o,u,f){if(o=ht(o),o&&(f||u===t))return o.replace(ni,"");if(!o||!(u=Xn(u)))return o;var m=Tr(o),w=oi(m,Tr(u));return Ji(m,w).join("")}function qD(o,u){var f=D,m=N;if(Vt(u)){var w="separator"in u?u.separator:w;f="length"in u?Ge(u.length):f,m="omission"in u?Xn(u.omission):m}o=ht(o);var b=o.length;if(aa(o)){var k=Tr(o);b=k.length}if(f>=b)return o;var L=f-ua(m);if(L<1)return m;var B=k?Ji(k,0,L).join(""):o.slice(0,L);if(w===t)return B+m;if(k&&(L+=B.length-L),kp(w)){if(o.slice(L).search(w)){var Z,te=B;for(w.global||(w=Hd(w.source,ht(Ko.exec(w))+"g")),w.lastIndex=0;Z=w.exec(te);)var ie=Z.index;B=B.slice(0,ie===t?L:ie)}}else if(o.indexOf(Xn(w),L)!=L){var me=B.lastIndexOf(w);me>-1&&(B=B.slice(0,me))}return B+m}function zD(o){return o=ht(o),o&&yu.test(o)?o.replace(_u,yR):o}var KD=ga(function(o,u,f){return o+(f?" ":"")+u.toUpperCase()}),Np=zy("toUpperCase");function $v(o,u,f){return o=ht(o),u=f?t:u,u===t?dR(o)?ER(o):Ql(o):o.match(u)||[]}var qv=Je(function(o,u){try{return xn(o,t,u)}catch(f){return Dp(f)?f:new qe(f)}}),jD=hi(function(o,u){return an(u,function(f){f=zr(f),ci(o,f,Cp(o[f],o))}),o});function WD(o){var u=o==null?0:o.length,f=ke();return o=u?pt(o,function(m){if(typeof m[1]!="function")throw new hr(a);return[f(m[0]),m[1]]}):[],Je(function(m){for(var w=-1;++w<u;){var b=o[w];if(xn(b[0],this,m))return xn(b[1],this,m)}})}function GD(o){return yP(dr(o,_))}function Lp(o){return function(){return o}}function HD(o,u){return o==null||o!==o?u:o}var QD=jy(),JD=jy(!0);function Wn(o){return o}function Mp(o){return Ey(typeof o=="function"?o:dr(o,_))}function YD(o){return Ty(dr(o,_))}function XD(o,u){return by(o,dr(u,_))}var ZD=Je(function(o,u){return function(f){return $u(f,o,u)}}),ek=Je(function(o,u){return function(f){return $u(o,f,u)}});function Fp(o,u,f){var m=cn(u),w=ph(u,m);f==null&&!(Vt(u)&&(w.length||!m.length))&&(f=u,u=o,o=this,w=ph(u,cn(u)));var b=!(Vt(f)&&"chain"in f)||!!f.chain,k=di(o);return an(w,function(L){var B=u[L];o[L]=B,k&&(o.prototype[L]=function(){var Z=this.__chain__;if(b||Z){var te=o(this.__wrapped__),ie=te.__actions__=zn(this.__actions__);return ie.push({func:B,args:arguments,thisArg:o}),te.__chain__=Z,te}return B.apply(o,Ir([this.value()],arguments))})}),o}function tk(){return Qt._===this&&(Qt._=RR),this}function Up(){}function nk(o){return o=Ge(o),Je(function(u){return Ay(u,o)})}var rk=mp(pt),ik=mp(ku),sk=mp(sa);function zv(o){return Tp(o)?g(zr(o)):NP(o)}function ok(o){return function(u){return o==null?t:Ys(o,u)}}var ak=Gy(),uk=Gy(!0);function Bp(){return[]}function $p(){return!1}function ck(){return{}}function lk(){return""}function hk(){return!0}function fk(o,u){if(o=Ge(o),o<1||o>$e)return[];var f=Dt,m=vn(o,Dt);u=ke(u),o-=Dt;for(var w=he(m,u);++f<o;)u(f);return w}function dk(o){return je(o)?pt(o,zr):Zn(o)?[o]:zn(cv(ht(o)))}function pk(o){var u=++AR;return ht(o)+u}var gk=wh(function(o,u){return o+u},0),mk=_p("ceil"),_k=wh(function(o,u){return o/u},1),yk=_p("floor");function vk(o){return o&&o.length?dh(o,Wn,np):t}function wk(o,u){return o&&o.length?dh(o,ke(u,2),np):t}function Ek(o){return l(o,Wn)}function Ik(o,u){return l(o,ke(u,2))}function Tk(o){return o&&o.length?dh(o,Wn,op):t}function bk(o,u){return o&&o.length?dh(o,ke(u,2),op):t}var Ak=wh(function(o,u){return o*u},1),Sk=_p("round"),Rk=wh(function(o,u){return o-u},0);function Pk(o){return o&&o.length?K(o,Wn):0}function Ck(o,u){return o&&o.length?K(o,ke(u,2)):0}return E.after=Y1,E.ary=wv,E.assign=Fx,E.assignIn=Vv,E.assignInWith=Oh,E.assignWith=Ux,E.at=Bx,E.before=Ev,E.bind=Cp,E.bindAll=jD,E.bindKey=Iv,E.castArray=cx,E.chain=_v,E.chunk=yC,E.compact=vC,E.concat=wC,E.cond=WD,E.conforms=GD,E.constant=Lp,E.countBy=P1,E.create=$x,E.curry=Tv,E.curryRight=bv,E.debounce=Av,E.defaults=qx,E.defaultsDeep=zx,E.defer=X1,E.delay=Z1,E.difference=EC,E.differenceBy=IC,E.differenceWith=TC,E.drop=bC,E.dropRight=AC,E.dropRightWhile=SC,E.dropWhile=RC,E.fill=PC,E.filter=x1,E.flatMap=O1,E.flatMapDeep=V1,E.flatMapDepth=N1,E.flatten=dv,E.flattenDeep=CC,E.flattenDepth=xC,E.flip=ex,E.flow=QD,E.flowRight=JD,E.fromPairs=DC,E.functions=Jx,E.functionsIn=Yx,E.groupBy=L1,E.initial=OC,E.intersection=VC,E.intersectionBy=NC,E.intersectionWith=LC,E.invert=Zx,E.invertBy=eD,E.invokeMap=F1,E.iteratee=Mp,E.keyBy=U1,E.keys=cn,E.keysIn=jn,E.map=Rh,E.mapKeys=nD,E.mapValues=rD,E.matches=YD,E.matchesProperty=XD,E.memoize=Ch,E.merge=iD,E.mergeWith=Nv,E.method=ZD,E.methodOf=ek,E.mixin=Fp,E.negate=xh,E.nthArg=nk,E.omit=sD,E.omitBy=oD,E.once=tx,E.orderBy=B1,E.over=rk,E.overArgs=nx,E.overEvery=ik,E.overSome=sk,E.partial=xp,E.partialRight=Sv,E.partition=$1,E.pick=aD,E.pickBy=Lv,E.property=zv,E.propertyOf=ok,E.pull=BC,E.pullAll=gv,E.pullAllBy=$C,E.pullAllWith=qC,E.pullAt=zC,E.range=ak,E.rangeRight=uk,E.rearg=rx,E.reject=K1,E.remove=KC,E.rest=ix,E.reverse=Rp,E.sampleSize=W1,E.set=cD,E.setWith=lD,E.shuffle=G1,E.slice=jC,E.sortBy=J1,E.sortedUniq=XC,E.sortedUniqBy=ZC,E.split=OD,E.spread=sx,E.tail=e1,E.take=t1,E.takeRight=n1,E.takeRightWhile=r1,E.takeWhile=i1,E.tap=v1,E.throttle=ox,E.thru=Sh,E.toArray=Dv,E.toPairs=Mv,E.toPairsIn=Fv,E.toPath=dk,E.toPlainObject=Ov,E.transform=hD,E.unary=ax,E.union=s1,E.unionBy=o1,E.unionWith=a1,E.uniq=u1,E.uniqBy=c1,E.uniqWith=l1,E.unset=fD,E.unzip=Pp,E.unzipWith=mv,E.update=dD,E.updateWith=pD,E.values=ya,E.valuesIn=gD,E.without=h1,E.words=$v,E.wrap=ux,E.xor=f1,E.xorBy=d1,E.xorWith=p1,E.zip=g1,E.zipObject=m1,E.zipObjectDeep=_1,E.zipWith=y1,E.entries=Mv,E.entriesIn=Fv,E.extend=Vv,E.extendWith=Oh,Fp(E,E),E.add=gk,E.attempt=qv,E.camelCase=vD,E.capitalize=Uv,E.ceil=mk,E.clamp=mD,E.clone=lx,E.cloneDeep=fx,E.cloneDeepWith=dx,E.cloneWith=hx,E.conformsTo=px,E.deburr=Bv,E.defaultTo=HD,E.divide=_k,E.endsWith=wD,E.eq=Ar,E.escape=ED,E.escapeRegExp=ID,E.every=C1,E.find=D1,E.findIndex=hv,E.findKey=Kx,E.findLast=k1,E.findLastIndex=fv,E.findLastKey=jx,E.floor=yk,E.forEach=yv,E.forEachRight=vv,E.forIn=Wx,E.forInRight=Gx,E.forOwn=Hx,E.forOwnRight=Qx,E.get=Op,E.gt=gx,E.gte=mx,E.has=Xx,E.hasIn=Vp,E.head=pv,E.identity=Wn,E.includes=M1,E.indexOf=kC,E.inRange=_D,E.invoke=tD,E.isArguments=eo,E.isArray=je,E.isArrayBuffer=_x,E.isArrayLike=Kn,E.isArrayLikeObject=qt,E.isBoolean=yx,E.isBuffer=Yi,E.isDate=vx,E.isElement=wx,E.isEmpty=Ex,E.isEqual=Ix,E.isEqualWith=Tx,E.isError=Dp,E.isFinite=bx,E.isFunction=di,E.isInteger=Rv,E.isLength=Dh,E.isMap=Pv,E.isMatch=Ax,E.isMatchWith=Sx,E.isNaN=Rx,E.isNative=Px,E.isNil=xx,E.isNull=Cx,E.isNumber=Cv,E.isObject=Vt,E.isObjectLike=Ut,E.isPlainObject=Gu,E.isRegExp=kp,E.isSafeInteger=Dx,E.isSet=xv,E.isString=kh,E.isSymbol=Zn,E.isTypedArray=_a,E.isUndefined=kx,E.isWeakMap=Ox,E.isWeakSet=Vx,E.join=MC,E.kebabCase=TD,E.last=gr,E.lastIndexOf=FC,E.lowerCase=bD,E.lowerFirst=AD,E.lt=Nx,E.lte=Lx,E.max=vk,E.maxBy=wk,E.mean=Ek,E.meanBy=Ik,E.min=Tk,E.minBy=bk,E.stubArray=Bp,E.stubFalse=$p,E.stubObject=ck,E.stubString=lk,E.stubTrue=hk,E.multiply=Ak,E.nth=UC,E.noConflict=tk,E.noop=Up,E.now=Ph,E.pad=SD,E.padEnd=RD,E.padStart=PD,E.parseInt=CD,E.random=yD,E.reduce=q1,E.reduceRight=z1,E.repeat=xD,E.replace=DD,E.result=uD,E.round=Sk,E.runInContext=F,E.sample=j1,E.size=H1,E.snakeCase=kD,E.some=Q1,E.sortedIndex=WC,E.sortedIndexBy=GC,E.sortedIndexOf=HC,E.sortedLastIndex=QC,E.sortedLastIndexBy=JC,E.sortedLastIndexOf=YC,E.startCase=VD,E.startsWith=ND,E.subtract=Rk,E.sum=Pk,E.sumBy=Ck,E.template=LD,E.times=fk,E.toFinite=pi,E.toInteger=Ge,E.toLength=kv,E.toLower=MD,E.toNumber=mr,E.toSafeInteger=Mx,E.toString=ht,E.toUpper=FD,E.trim=UD,E.trimEnd=BD,E.trimStart=$D,E.truncate=qD,E.unescape=zD,E.uniqueId=pk,E.upperCase=KD,E.upperFirst=Np,E.each=yv,E.eachRight=vv,E.first=pv,Fp(E,function(){var o={};return $r(E,function(u,f){mt.call(E.prototype,f)||(o[f]=u)}),o}(),{chain:!1}),E.VERSION=r,an(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){E[o].placeholder=E}),an(["drop","take"],function(o,u){tt.prototype[o]=function(f){f=f===t?1:nn(Ge(f),0);var m=this.__filtered__&&!u?new tt(this):this.clone();return m.__filtered__?m.__takeCount__=vn(f,m.__takeCount__):m.__views__.push({size:vn(f,Dt),type:o+(m.__dir__<0?"Right":"")}),m},tt.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),an(["filter","map","takeWhile"],function(o,u){var f=u+1,m=f==fe||f==et;tt.prototype[o]=function(w){var b=this.clone();return b.__iteratees__.push({iteratee:ke(w,3),type:f}),b.__filtered__=b.__filtered__||m,b}}),an(["head","last"],function(o,u){var f="take"+(u?"Right":"");tt.prototype[o]=function(){return this[f](1).value()[0]}}),an(["initial","tail"],function(o,u){var f="drop"+(u?"":"Right");tt.prototype[o]=function(){return this.__filtered__?new tt(this):this[f](1)}}),tt.prototype.compact=function(){return this.filter(Wn)},tt.prototype.find=function(o){return this.filter(o).head()},tt.prototype.findLast=function(o){return this.reverse().find(o)},tt.prototype.invokeMap=Je(function(o,u){return typeof o=="function"?new tt(this):this.map(function(f){return $u(f,o,u)})}),tt.prototype.reject=function(o){return this.filter(xh(ke(o)))},tt.prototype.slice=function(o,u){o=Ge(o);var f=this;return f.__filtered__&&(o>0||u<0)?new tt(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),u!==t&&(u=Ge(u),f=u<0?f.dropRight(-u):f.take(u-o)),f)},tt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},tt.prototype.toArray=function(){return this.take(Dt)},$r(tt.prototype,function(o,u){var f=/^(?:filter|find|map|reject)|While$/.test(u),m=/^(?:head|last)$/.test(u),w=E[m?"take"+(u=="last"?"Right":""):u],b=m||/^find/.test(u);!w||(E.prototype[u]=function(){var k=this.__wrapped__,L=m?[1]:arguments,B=k instanceof tt,Z=L[0],te=B||je(k),ie=function(Ze){var rt=w.apply(E,Ir([Ze],L));return m&&me?rt[0]:rt};te&&f&&typeof Z=="function"&&Z.length!=1&&(B=te=!1);var me=this.__chain__,Ae=!!this.__actions__.length,Oe=b&&!me,Qe=B&&!Ae;if(!b&&te){k=Qe?k:new tt(this);var Ve=o.apply(k,L);return Ve.__actions__.push({func:Sh,args:[ie],thisArg:t}),new fr(Ve,me)}return Oe&&Qe?o.apply(this,L):(Ve=this.thru(ie),Oe?m?Ve.value()[0]:Ve.value():Ve)})}),an(["pop","push","shift","sort","splice","unshift"],function(o){var u=Xl[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",m=/^(?:pop|shift)$/.test(o);E.prototype[o]=function(){var w=arguments;if(m&&!this.__chain__){var b=this.value();return u.apply(je(b)?b:[],w)}return this[f](function(k){return u.apply(je(k)?k:[],w)})}}),$r(tt.prototype,function(o,u){var f=E[u];if(f){var m=f.name+"";mt.call(fa,m)||(fa[m]=[]),fa[m].push({name:u,func:f})}}),fa[vh(t,G).name]=[{name:"wrapper",func:t}],tt.prototype.clone=zR,tt.prototype.reverse=KR,tt.prototype.value=jR,E.prototype.at=w1,E.prototype.chain=E1,E.prototype.commit=I1,E.prototype.next=T1,E.prototype.plant=A1,E.prototype.reverse=S1,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=R1,E.prototype.first=E.prototype.head,Vu&&(E.prototype[Vu]=b1),E},ca=IR();Br?((Br.exports=ca)._=ca,qi._=ca):Qt._=ca}).call(nc)})(bm,bm.exports);var I0=bm.exports;let ns=null,ut=null,_i=null;const MS=GN("mainStore",{state:()=>({transactionId:null,fbLedger:null,currentSheet:null,fbConfig:Eg.make(),fbAuth:null,unsubscribeToFbLedger:null,unsubscribeToCurrentSheet:null}),getters:{users(){return!this.fbLedger||!this.fbLedger.users?[]:Object.keys(this.fbLedger.users).sort((n,e)=>this.username(n).localeCompare(this.username(e)))},currentSheetPeople(){return!this.currentSheet||!this.currentSheet.people?[]:Object.entries(this.currentSheet.people).sort(([,n],[,e])=>n.timestamp-e.timestamp).map(([n])=>n)},currentSheetTransactions(){return!this.currentSheet||!this.currentSheet.transactions?[]:Object.entries(this.currentSheet.transactions).sort(([,n],[,e])=>e.timestamp-n.timestamp).map(([n])=>n)},currentSheetResults(){return!this.currentSheet||!this.currentSheet.transactions||!this.currentSheetPeople?[]:LS.make(this.currentSheet.transactions,this.currentSheetPeople.length||0)},currentSheetLedger(){var n,e,t;return((t=(n=this.fbLedger)==null?void 0:n.sheets)==null?void 0:t[(e=this.currentSheet)==null?void 0:e.id])||{}},sheetId(){var n;return((n=this.currentSheet)==null?void 0:n.id)||null},userSheets(){return ut.currentUser&&this.fbLedger?Object.keys(this.fbLedger.users[ut.currentUser.uid].sheets).map(e=>({id:e,name:this.fbLedger.sheets[e].name,timestamp:this.fbLedger.sheets[e].timestamp})).sort((e,t)=>t.timestamp-e.timestamp):[]},lastCurrency(){var n;return this.currentSheet&&((n=this.currentSheetTransactions)==null?void 0:n.length)?this.currentSheet.transactions[this.currentSheetTransactions[0]].currency:"USD"}},actions:{username(n=null){var e;return n||(n=(e=ut.currentUser)==null?void 0:e.uid),!this.fbLedger||!n?"":n in this.fbLedger.users?E0.truncate(this.fbLedger.users[n].name?this.fbLedger.users[n].name:this.fbLedger.users[n].email):this.currentSheet&&this.currentSheet&&n in this.currentSheet.people?E0.truncate(this.currentSheet.people[n].name):""},isUser(n){var e;return!!(n&&n in((e=this.fbLedger)==null?void 0:e.users))},isPersonRemovable(n){var e;return!this.isUser(n)||((e=this.currentSheetTransactions)==null?void 0:e.length)===0&&n!==ut.currentUser.uid},isPersonActive(n){var e,t,r;return!!(n&&((r=(t=(e=this.currentSheet)==null?void 0:e.people)==null?void 0:t[n])==null?void 0:r.active))},getEditablePerson(n=null){return this.isUser(n)?null:this.currentSheet&&n in this.currentSheet.people?I0.cloneDeep(this.currentSheet.people[n]):NS.make()},async activatePerson(n,e=null){if(!!n){if(this.isUser(n))throw new Error("You cannot activate real users.");if(!this.currentSheet.people[n].active)return await this.autoBatch(async(t,r)=>{const i=this.getSheetRef(this.sheetId);r.update(i,{[`people.${t}.active`]:!0})},n,e)}},async addPerson(n,e,t=null){if(!(!n||!this.currentSheet)){if(n.id in this.currentSheet.users)throw new Error("The selected user is already participating in this sheet. Pick someone else or create a fake user.");return await this.autoBatch(async(r,i)=>{var c;this.isUser(r.id)&&!this.isUser(e)&&await this.removePerson(e,(c=this.currentSheet)==null?void 0:c.id,!1,i);const s=this.getLedgerRef(),a=this.getSheetRef(this.sheetId);r.id in this.fbLedger.users&&(i.update(s,{[`users.${r.id}.sheets.${this.currentSheet.id}`]:null}),i.update(s,{[`sheets.${this.currentSheet.id}.nusers`]:jh(1)}),i.update(a,{[`users.${r.id}`]:"owner"})),i.update(a,{[`people.${r.id}`]:r})},n,t)}},async removePerson(n,e=(i=>(i=this.currentSheet)==null?void 0:i.id)(),t=!1,r=null){if(!!n){if(!t&&n===ut.currentUser.uid)throw new Error("You cannot remove yourself from a sheet. Remove the sheet instead.");if(this.isUser(n)&&this.fbLedger.sheets[e].nusers<=1)throw new Error("You cannot remove the last user from this sheet. A bug happened. Use unfollowSheet instead.");if(n in this.fbLedger.users&&!(e in this.fbLedger.users[n].sheets))throw new Error("This user does not participate in this sheet. It cannot be removed properly. This should not happen. There is a bug somewhere.");if(this.isUser(n)&&this.fbLedger.sheets[e].ntransactions!==0&&n!==ut.currentUser.uid)throw new Error("You cannot remove another user while the sheet contains transactions.");return await this.autoBatch(async(s,a,c)=>{const h=this.getLedgerRef(),d=this.getSheetRef(s);this.isUser(a)?((this.fbLedger.sheets[s].ntransactions===0||ut.currentUser.uid===a)&&(c.update(h,{[`users.${a}.sheets.${s}`]:so()}),c.update(h,{[`sheets.${s}.nusers`]:jh(-1)}),c.update(d,{[`users.${a}`]:so()})),this.fbLedger.sheets[s].ntransactions===0?c.update(d,{[`people.${a}`]:so()}):ut.currentUser.uid===a&&c.update(d,{[`people.${a}.active`]:!1})):this.fbLedger.sheets[s].ntransactions===0?c.update(d,{[`people.${a}`]:so()}):c.update(d,{[`people.${a}.active`]:!1})},e,n,r)}},async addTransaction(n,e=null){return await this.autoBatch(async(t,r)=>{await this.removeTransaction(this.transactionId,r);const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t.id}`]:t});const s=this.getLedgerRef();r.update(s,{[`sheets.${this.currentSheet.id}.ntransactions`]:jh(1)})},n,e)},async removeTransaction(n,e=null){if(!!n)return await this.autoBatch(async(t,r)=>{const i=this.getSheetRef(this.currentSheet.id);r.update(i,{[`transactions.${t}`]:so()});const s=this.getLedgerRef();r.update(s,{[`sheets.${this.currentSheet.id}.ntransactions`]:jh(-1)})},n,e)},getEditableTransaction(n=this.transactionId){if(this.currentSheet&&n in this.currentSheet.transactions){const e=I0.cloneDeep(this.currentSheet.transactions[n]);return w0.updatePeople(e,this.currentSheetPeople.length),e}return w0.make(this.currentSheetPeople,this.lastCurrency,ut.currentUser.uid,this.currentSheet.people)},async setCurrentSheetName(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getLedgerRef();r.update(i,{[`sheets.${this.currentSheet.id}.name`]:t})},n,e)},async addNewSheet(n=null){return await this.autoBatch(async e=>{const[t,r]=p4.make(ut.currentUser.uid),i=this.getSheetRef(t.id);e.set(i,t);const s=this.getLedgerRef();e.update(s,{[`sheets.${t.id}`]:r}),e.update(s,{[`users.${ut.currentUser.uid}.sheets.${t.id}`]:null})},n)},async removeSheet(n,e=null){if(!(this.fbLedger.sheets[n].nusers>1))return await this.autoBatch(async(t,r)=>{const i=this.getSheetRef(t);r.delete(i);const s=this.getLedgerRef();r.update(s,{[`users.${ut.currentUser.uid}.sheets.${t}`]:so()}),r.update(s,{[`sheets.${t}`]:so()})},n,e)},async unfollowSheet(n,e=null){return await this.autoBatch(async(t,r)=>{this.fbLedger.sheets[t].nusers<=1?await this.removeSheet(t,r):await this.removePerson(ut.currentUser.uid,t,!0,r)},n,e)},setNewConfig(n){Eg.isCompatible(n)&&(this.fbConfig=n)},getCurrentUserId(){var n;return(n=ut==null?void 0:ut.currentUser)==null?void 0:n.uid},isAuthenticated(){return!!ut.currentUser&&!!this.fbLedger},getLedgerRef(){if(!_i)throw new Error("fbDb should be active here.");return JE(_i,"ledger","ledger")},getSheetRef(n){if(!_i)throw new Error("fbDb should be active here.");if(!n)throw new Error("sheetid should be a proper id here.",n);return JE(_i,"sheets",n)},async setUsername(n,e=null){return await this.autoBatch(async(t,r)=>{const i=this.getLedgerRef();r.update(i,{[`users.${ut.currentUser.uid}.name`]:t})},n,e)},isFbActive(){return!!ns&&!!ut&&!!_i},async initFb(n=null){if(await this.clearFb(),n&&(this.fbConfig=n),!!this.fbConfig){if(gM().length)throw new Error("There should not be firebase instances active");try{ns=GT(this.fbConfig),ut=o4(ns),_i=PU(ns,{localCache:KU({tabManager:HU()})})}catch{this.config=Eg.make(),await this.clearFb()}}},clearCurrentSheet(){var n;(n=this.unsubscribeToCurrentSheet)==null||n.call(this),this.currentSheet=null},clearFbLedger(){var n;(n=this.unsubscribeToFbLedger)==null||n.call(this),this.fbLedger=null},async logout(){this.clearFbLedger(),this.clearCurrentSheet(),await(ut==null?void 0:ut.signOut())},async clearFb(){await this.logout(),_i=null,ns&&await mM(ns),ns=null},async setFbLedger(){if(!this.isFbActive())throw new Error("firebase should be active here.");if(this.fbLedger)throw new Error("fbLedger should be null here.");if(!ut.currentUser)throw new Error("we should be logged in here.");await new Promise(n=>{const e=this.getLedgerRef();this.unsubscribeToFbLedger=ZE(e,t=>{const r=!this.fbLedger;t.exists()&&(this.fbLedger=t.data()),r&&n()})})},async setCurrentSheet(n){if(!this.isFbActive())throw new Error("firebase should be active here.");if(this.currentSheet)throw new Error("currentSheet should be null here.");if(!ut.currentUser)throw new Error("we should be logged in here.");let e=!1;await new Promise((t,r)=>{const i=this.getSheetRef(n);this.unsubscribeToCurrentSheet=ZE(i,s=>{s.exists()?this.currentSheet=s.data():(this.clearCurrentSheet(),e||(e=!0,r(new Error(`Current Sheet ${n} does not exist.`)))),e||(e=!0,t())},s=>{e=!0,this.clearCurrentSheet(),r(s)})})},async init(){await this.initFb(),await(ut==null?void 0:ut.authStateReady()),!(!this.isFbActive()||!ut.currentUser)&&await this.setFbLedger()},async login(n,e){if(!this.isFbActive())throw console.log(!!ns,!!ut,!!_i),new Error("Firebase should be active here!");await GB(ut,n,e),await this.setFbLedger()},async register(n,e){if(!this.isFbActive())throw new Error("Firebase should be active here!");await WB(ut,n,e);const t=this.getLedgerRef();await $U(t,{users:{[`${ut.currentUser.uid}`]:{name:"",email:n,sheets:{}}}},{merge:!0}),await this.setFbLedger()},async autoBatch(n,...e){const t=!e[e.length-1];t&&(e[e.length-1]=JU(_i));const r=await n.apply(this,e);return t&&await e[e.length-1].commit(),r}},persist:{key:"sessionData",pick:["fbConfig"]}}),g4={__name:"App",setup(n){const e=MS();return nd(async()=>{await e.cleanupFb()}),(t,r)=>{const i=FO("router-view");return yf(),vf(i)}}};const m4=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,_4=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,y4=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function v4(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){w4(n);return}return e}function w4(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function E4(n,e={}){if(typeof n!="string")return n;const t=n.trim();if(n[0]==='"'&&n.endsWith('"')&&!n.includes("\\"))return t.slice(1,-1);if(t.length<=9){const r=t.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!y4.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(m4.test(n)||_4.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,v4)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function I4(n,e){if(n==null)return;let t=n;for(let r=0;r<e.length;r++){if(t==null||t[e[r]]==null)return;t=t[e[r]]}return t}function Q_(n,e,t){if(t.length===0)return e;const r=t[0];return t.length>1&&(e=Q_(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,r)?Number.isInteger(Number(t[1]))?[]:{}:n[r],e,Array.prototype.slice.call(t,1))),Number.isInteger(Number(r))&&Array.isArray(n)?n.slice()[r]:Object.assign({},n,{[r]:e})}function FS(n,e){if(n==null||e.length===0)return n;if(e.length===1){if(n==null)return n;if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(e[0],1);const t={};for(const r in n)t[r]=n[r];return delete t[e[0]],t}if(n[e[0]]==null){if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const t={};for(const r in n)t[r]=n[r];return t}return Q_(n,FS(n[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function US(n,e){return e.map(t=>t.split(".")).map(t=>[t,I4(n,t)]).filter(t=>t[1]!==void 0).reduce((t,r)=>Q_(t,r[1],r[0]),{})}function BS(n,e){return e.map(t=>t.split(".")).reduce((t,r)=>FS(t,r),n)}function T0(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a,beforeHydrate:c,afterHydrate:h},d,p=!0){try{p&&(c==null||c(d));const _=e.getItem(r);if(_){const v=t.deserialize(_),I=s?US(v,s):v,V=a?BS(I,a):I;n.$patch(V)}p&&(h==null||h(d))}catch(_){i&&console.error("[pinia-plugin-persistedstate]",_)}}function b0(n,{storage:e,serializer:t,key:r,debug:i,pick:s,omit:a}){try{const c=s?US(n,s):n,h=a?BS(c,a):c,d=t.serialize(h);e.setItem(r,d)}catch(c){i&&console.error("[pinia-plugin-persistedstate]",c)}}function T4(n,e,t){const{pinia:r,store:i,options:{persist:s=t}}=n;if(!s)return;if(!(i.$id in r.state.value)){const h=r._s.get(i.$id.replace("__hot:",""));h&&Promise.resolve().then(()=>h.$persist());return}const c=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(e);i.$hydrate=({runHooks:h=!0}={})=>{c.forEach(d=>{T0(i,d,n,h)})},i.$persist=()=>{c.forEach(h=>{b0(i.$state,h)})},c.forEach(h=>{T0(i,h,n),i.$subscribe((d,p)=>b0(p,h),{detached:!0})})}function b4(n={}){return function(e){var t;T4(e,r=>{var i,s,a,c,h,d,p;return{key:(n.key?n.key:_=>_)((i=r.key)!=null?i:e.store.$id),debug:(a=(s=r.debug)!=null?s:n.debug)!=null?a:!1,serializer:(h=(c=r.serializer)!=null?c:n.serializer)!=null?h:{serialize:_=>JSON.stringify(_),deserialize:_=>E4(_)},storage:(p=(d=r.storage)!=null?d:n.storage)!=null?p:window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}},(t=n.auto)!=null?t:!1)}}var A4=b4(),Ig=()=>{const n=$N();return n.use(A4),n};/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Na=typeof document!="undefined";function $S(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function S4(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&$S(n.default)}const _t=Object.assign;function Tg(n,e){const t={};for(const r in e){const i=e[r];t[r]=Or(i)?i.map(n):n(i)}return t}const Cc=()=>{},Or=Array.isArray,qS=/#/g,R4=/&/g,P4=/\//g,C4=/=/g,x4=/\?/g,zS=/\+/g,D4=/%5B/g,k4=/%5D/g,KS=/%5E/g,O4=/%60/g,jS=/%7B/g,V4=/%7C/g,WS=/%7D/g,N4=/%20/g;function J_(n){return encodeURI(""+n).replace(V4,"|").replace(D4,"[").replace(k4,"]")}function L4(n){return J_(n).replace(jS,"{").replace(WS,"}").replace(KS,"^")}function Am(n){return J_(n).replace(zS,"%2B").replace(N4,"+").replace(qS,"%23").replace(R4,"%26").replace(O4,"`").replace(jS,"{").replace(WS,"}").replace(KS,"^")}function M4(n){return Am(n).replace(C4,"%3D")}function F4(n){return J_(n).replace(qS,"%23").replace(x4,"%3F")}function U4(n){return n==null?"":F4(n).replace(P4,"%2F")}function nl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const B4=/\/$/,$4=n=>n.replace(B4,"");function bg(n,e,t="/"){let r,i={},s="",a="";const c=e.indexOf("#");let h=e.indexOf("?");return c<h&&c>=0&&(h=-1),h>-1&&(r=e.slice(0,h),s=e.slice(h+1,c>-1?c:e.length),i=n(s)),c>-1&&(r=r||e.slice(0,c),a=e.slice(c,e.length)),r=j4(r!=null?r:e,t),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:nl(a)}}function q4(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function A0(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function z4(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&uu(e.matched[r],t.matched[i])&&GS(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function uu(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function GS(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!K4(n[t],e[t]))return!1;return!0}function K4(n,e){return Or(n)?S0(n,e):Or(e)?S0(e,n):n===e}function S0(n,e){return Or(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function j4(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,a,c;for(a=0;a<r.length;a++)if(c=r[a],c!==".")if(c==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(a).join("/")}const rs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var rl;(function(n){n.pop="pop",n.push="push"})(rl||(rl={}));var xc;(function(n){n.back="back",n.forward="forward",n.unknown=""})(xc||(xc={}));function W4(n){if(!n)if(Na){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),$4(n)}const G4=/^[^#]+#/;function H4(n,e){return n.replace(G4,"#")+e}function Q4(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const kd=()=>({left:window.scrollX,top:window.scrollY});function J4(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=Q4(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function R0(n,e){return(history.state?history.state.position-e:-1)+n}const Sm=new Map;function Y4(n,e){Sm.set(n,e)}function X4(n){const e=Sm.get(n);return Sm.delete(n),e}let Z4=()=>location.protocol+"//"+location.host;function HS(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let c=i.includes(n.slice(s))?n.slice(s).length:1,h=i.slice(c);return h[0]!=="/"&&(h="/"+h),A0(h,"")}return A0(t,n)+r+i}function eq(n,e,t,r){let i=[],s=[],a=null;const c=({state:v})=>{const I=HS(n,location),V=t.value,M=e.value;let U=0;if(v){if(t.value=I,e.value=v,a&&a===V){a=null;return}U=M?v.position-M.position:0}else r(I);i.forEach(G=>{G(t.value,V,{delta:U,type:rl.pop,direction:U?U>0?xc.forward:xc.back:xc.unknown})})};function h(){a=t.value}function d(v){i.push(v);const I=()=>{const V=i.indexOf(v);V>-1&&i.splice(V,1)};return s.push(I),I}function p(){const{history:v}=window;!v.state||v.replaceState(_t({},v.state,{scroll:kd()}),"")}function _(){for(const v of s)v();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:h,listen:d,destroy:_}}function P0(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?kd():null}}function tq(n){const{history:e,location:t}=window,r={value:HS(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(h,d,p){const _=n.indexOf("#"),v=_>-1?(t.host&&document.querySelector("base")?n:n.slice(_))+h:Z4()+n+h;try{e[p?"replaceState":"pushState"](d,"",v),i.value=d}catch(I){console.error(I),t[p?"replace":"assign"](v)}}function a(h,d){const p=_t({},e.state,P0(i.value.back,h,i.value.forward,!0),d,{position:i.value.position});s(h,p,!0),r.value=h}function c(h,d){const p=_t({},i.value,e.state,{forward:h,scroll:kd()});s(p.current,p,!0);const _=_t({},P0(r.value,h,null),{position:p.position+1},d);s(h,_,!1),r.value=h}return{location:r,state:i,push:c,replace:a}}function nq(n){n=W4(n);const e=tq(n),t=eq(n,e.state,e.location,e.replace);function r(s,a=!0){a||t.pauseListeners(),history.go(s)}const i=_t({location:"",base:n,go:r,createHref:H4.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function rq(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),nq(n)}function iq(n){return typeof n=="string"||n&&typeof n=="object"}function QS(n){return typeof n=="string"||typeof n=="symbol"}const JS=Symbol("");var C0;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(C0||(C0={}));function cu(n,e){return _t(new Error,{type:n,[JS]:!0},e)}function yi(n,e){return n instanceof Error&&JS in n&&(e==null||!!(n.type&e))}const x0="[^/]+?",sq={sensitive:!1,strict:!1,start:!0,end:!0},oq=/[.+*?^${}()[\]/\\]/g;function aq(n,e){const t=_t({},sq,e),r=[];let i=t.start?"^":"";const s=[];for(const d of n){const p=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let _=0;_<d.length;_++){const v=d[_];let I=40+(t.sensitive?.25:0);if(v.type===0)_||(i+="/"),i+=v.value.replace(oq,"\\$&"),I+=40;else if(v.type===1){const{value:V,repeatable:M,optional:U,regexp:G}=v;s.push({name:V,repeatable:M,optional:U});const J=G||x0;if(J!==x0){I+=10;try{new RegExp(`(${J})`)}catch(X){throw new Error(`Invalid custom RegExp for param "${V}" (${J}): `+X.message)}}let W=M?`((?:${J})(?:/(?:${J}))*)`:`(${J})`;_||(W=U&&d.length<2?`(?:/${W})`:"/"+W),U&&(W+="?"),i+=W,I+=20,U&&(I+=-8),M&&(I+=-20),J===".*"&&(I+=-50)}p.push(I)}r.push(p)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function c(d){const p=d.match(a),_={};if(!p)return null;for(let v=1;v<p.length;v++){const I=p[v]||"",V=s[v-1];_[V.name]=I&&V.repeatable?I.split("/"):I}return _}function h(d){let p="",_=!1;for(const v of n){(!_||!p.endsWith("/"))&&(p+="/"),_=!1;for(const I of v)if(I.type===0)p+=I.value;else if(I.type===1){const{value:V,repeatable:M,optional:U}=I,G=V in d?d[V]:"";if(Or(G)&&!M)throw new Error(`Provided param "${V}" is an array but it is not repeatable (* or + modifiers)`);const J=Or(G)?G.join("/"):G;if(!J)if(U)v.length<2&&(p.endsWith("/")?p=p.slice(0,-1):_=!0);else throw new Error(`Missing required param "${V}"`);p+=J}}return p||"/"}return{re:a,score:r,keys:s,parse:c,stringify:h}}function uq(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function YS(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=uq(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(D0(r))return 1;if(D0(i))return-1}return i.length-r.length}function D0(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const cq={type:0,value:""},lq=/[a-zA-Z0-9_]/;function hq(n){if(!n)return[[]];if(n==="/")return[[cq]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(I){throw new Error(`ERR (${t})/"${d}": ${I}`)}let t=0,r=t;const i=[];let s;function a(){s&&i.push(s),s=[]}let c=0,h,d="",p="";function _(){!d||(t===0?s.push({type:0,value:d}):t===1||t===2||t===3?(s.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:p,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=h}for(;c<n.length;){if(h=n[c++],h==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:h==="/"?(d&&_(),a()):h===":"?(_(),t=1):v();break;case 4:v(),t=r;break;case 1:h==="("?t=2:lq.test(h)?v():(_(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case 2:h===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+h:t=3:p+=h;break;case 3:_(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&c--,p="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${d}"`),_(),a(),i}function fq(n,e,t){const r=aq(hq(n.path),t),i=_t(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function dq(n,e){const t=[],r=new Map;e=N0({strict:!1,end:!0,sensitive:!1},e);function i(_){return r.get(_)}function s(_,v,I){const V=!I,M=O0(_);M.aliasOf=I&&I.record;const U=N0(e,_),G=[M];if("alias"in _){const X=typeof _.alias=="string"?[_.alias]:_.alias;for(const ee of X)G.push(O0(_t({},M,{components:I?I.record.components:M.components,path:ee,aliasOf:I?I.record:M})))}let J,W;for(const X of G){const{path:ee}=X;if(v&&ee[0]!=="/"){const ce=v.record.path,C=ce[ce.length-1]==="/"?"":"/";X.path=v.record.path+(ee&&C+ee)}if(J=fq(X,v,U),I?I.alias.push(J):(W=W||J,W!==J&&W.alias.push(J),V&&_.name&&!V0(J)&&a(_.name)),XS(J)&&h(J),M.children){const ce=M.children;for(let C=0;C<ce.length;C++)s(ce[C],J,I&&I.children[C])}I=I||J}return W?()=>{a(W)}:Cc}function a(_){if(QS(_)){const v=r.get(_);v&&(r.delete(_),t.splice(t.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=t.indexOf(_);v>-1&&(t.splice(v,1),_.record.name&&r.delete(_.record.name),_.children.forEach(a),_.alias.forEach(a))}}function c(){return t}function h(_){const v=mq(_,t);t.splice(v,0,_),_.record.name&&!V0(_)&&r.set(_.record.name,_)}function d(_,v){let I,V={},M,U;if("name"in _&&_.name){if(I=r.get(_.name),!I)throw cu(1,{location:_});U=I.record.name,V=_t(k0(v.params,I.keys.filter(W=>!W.optional).concat(I.parent?I.parent.keys.filter(W=>W.optional):[]).map(W=>W.name)),_.params&&k0(_.params,I.keys.map(W=>W.name))),M=I.stringify(V)}else if(_.path!=null)M=_.path,I=t.find(W=>W.re.test(M)),I&&(V=I.parse(M),U=I.record.name);else{if(I=v.name?r.get(v.name):t.find(W=>W.re.test(v.path)),!I)throw cu(1,{location:_,currentLocation:v});U=I.record.name,V=_t({},v.params,_.params),M=I.stringify(V)}const G=[];let J=I;for(;J;)G.unshift(J.record),J=J.parent;return{name:U,path:M,params:V,matched:G,meta:gq(G)}}n.forEach(_=>s(_));function p(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:a,clearRoutes:p,getRoutes:c,getRecordMatcher:i}}function k0(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function O0(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:pq(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function pq(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function V0(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function gq(n){return n.reduce((e,t)=>_t(e,t.meta),{})}function N0(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function mq(n,e){let t=0,r=e.length;for(;t!==r;){const s=t+r>>1;YS(n,e[s])<0?r=s:t=s+1}const i=_q(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function _q(n){let e=n;for(;e=e.parent;)if(XS(e)&&YS(n,e)===0)return e}function XS({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function yq(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(zS," "),a=s.indexOf("="),c=nl(a<0?s:s.slice(0,a)),h=a<0?null:nl(s.slice(a+1));if(c in e){let d=e[c];Or(d)||(d=e[c]=[d]),d.push(h)}else e[c]=h}return e}function L0(n){let e="";for(let t in n){const r=n[t];if(t=M4(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Or(r)?r.map(s=>s&&Am(s)):[r&&Am(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function vq(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Or(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const wq=Symbol(""),M0=Symbol(""),Od=Symbol(""),ZS=Symbol(""),Rm=Symbol("");function rc(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function hs(n,e,t,r,i,s=a=>a()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((c,h)=>{const d=v=>{v===!1?h(cu(4,{from:t,to:e})):v instanceof Error?h(v):iq(v)?h(cu(2,{from:e,to:v})):(a&&r.enterCallbacks[i]===a&&typeof v=="function"&&a.push(v),c())},p=s(()=>n.call(r&&r.instances[i],e,t,d));let _=Promise.resolve(p);n.length<3&&(_=_.then(d)),_.catch(v=>h(v))})}function Ag(n,e,t,r,i=s=>s()){const s=[];for(const a of n)for(const c in a.components){let h=a.components[c];if(!(e!=="beforeRouteEnter"&&!a.instances[c]))if($S(h)){const p=(h.__vccOpts||h)[e];p&&s.push(hs(p,t,r,a,c,i))}else{let d=h();s.push(()=>d.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${c}" at "${a.path}"`);const _=S4(p)?p.default:p;a.mods[c]=p,a.components[c]=_;const I=(_.__vccOpts||_)[e];return I&&hs(I,t,r,a,c,i)()}))}}return s}function F0(n){const e=xr(Od),t=xr(ZS),r=Be(()=>{const h=mo(n.to);return e.resolve(h)}),i=Be(()=>{const{matched:h}=r.value,{length:d}=h,p=h[d-1],_=t.matched;if(!p||!_.length)return-1;const v=_.findIndex(uu.bind(null,p));if(v>-1)return v;const I=U0(h[d-2]);return d>1&&U0(p)===I&&_[_.length-1].path!==I?_.findIndex(uu.bind(null,h[d-2])):v}),s=Be(()=>i.value>-1&&bq(t.params,r.value.params)),a=Be(()=>i.value>-1&&i.value===t.matched.length-1&&GS(t.params,r.value.params));function c(h={}){return Tq(h)?e[mo(n.replace)?"replace":"push"](mo(n.to)).catch(Cc):Promise.resolve()}return{route:r,href:Be(()=>r.value.href),isActive:s,isExactActive:a,navigate:c}}const Eq=Km({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:F0,setup(n,{slots:e}){const t=Mo(F0(n)),{options:r}=xr(Od),i=Be(()=>({[B0(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[B0(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:Ue("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),Iq=Eq;function Tq(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function bq(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Or(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function U0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const B0=(n,e,t)=>n!=null?n:e!=null?e:t,Aq=Km({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=xr(Rm),i=Be(()=>n.route||r.value),s=xr(M0,0),a=Be(()=>{let d=mo(s);const{matched:p}=i.value;let _;for(;(_=p[d])&&!_.components;)d++;return d}),c=Be(()=>i.value.matched[a.value]);Hh(M0,Be(()=>a.value+1)),Hh(wq,c),Hh(Rm,i);const h=Eo();return vc(()=>[h.value,c.value,n.name],([d,p,_],[v,I,V])=>{p&&(p.instances[_]=d,I&&I!==p&&d&&d===v&&(p.leaveGuards.size||(p.leaveGuards=I.leaveGuards),p.updateGuards.size||(p.updateGuards=I.updateGuards))),d&&p&&(!I||!uu(p,I)||!v)&&(p.enterCallbacks[_]||[]).forEach(M=>M(d))},{flush:"post"}),()=>{const d=i.value,p=n.name,_=c.value,v=_&&_.components[p];if(!v)return $0(t.default,{Component:v,route:d});const I=_.props[p],V=I?I===!0?d.params:typeof I=="function"?I(d):I:null,U=Ue(v,_t({},V,e,{onVnodeUnmounted:G=>{G.component.isUnmounted&&(_.instances[p]=null)},ref:h}));return $0(t.default,{Component:U,route:d})||U}}});function $0(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Sq=Aq;function Rq(n){const e=dq(n.routes,n),t=n.parseQuery||yq,r=n.stringifyQuery||L0,i=n.history,s=rc(),a=rc(),c=rc(),h=lO(rs);let d=rs;Na&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Tg.bind(null,Y=>""+Y),_=Tg.bind(null,U4),v=Tg.bind(null,nl);function I(Y,_e){let de,Ee;return QS(Y)?(de=e.getRecordMatcher(Y),Ee=_e):Ee=Y,e.addRoute(Ee,de)}function V(Y){const _e=e.getRecordMatcher(Y);_e&&e.removeRoute(_e)}function M(){return e.getRoutes().map(Y=>Y.record)}function U(Y){return!!e.getRecordMatcher(Y)}function G(Y,_e){if(_e=_t({},_e||h.value),typeof Y=="string"){const x=bg(t,Y,_e.path),z=e.resolve({path:x.path},_e),re=i.createHref(x.fullPath);return _t(x,z,{params:v(z.params),hash:nl(x.hash),redirectedFrom:void 0,href:re})}let de;if(Y.path!=null)de=_t({},Y,{path:bg(t,Y.path,_e.path).path});else{const x=_t({},Y.params);for(const z in x)x[z]==null&&delete x[z];de=_t({},Y,{params:_(x)}),_e.params=_(_e.params)}const Ee=e.resolve(de,_e),He=Y.hash||"";Ee.params=p(v(Ee.params));const at=q4(r,_t({},Y,{hash:L4(He),path:Ee.path})),R=i.createHref(at);return _t({fullPath:at,hash:He,query:r===L0?vq(Y.query):Y.query||{}},Ee,{redirectedFrom:void 0,href:R})}function J(Y){return typeof Y=="string"?bg(t,Y,h.value.path):_t({},Y)}function W(Y,_e){if(d!==Y)return cu(8,{from:_e,to:Y})}function X(Y){return C(Y)}function ee(Y){return X(_t(J(Y),{replace:!0}))}function ce(Y){const _e=Y.matched[Y.matched.length-1];if(_e&&_e.redirect){const{redirect:de}=_e;let Ee=typeof de=="function"?de(Y):de;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=J(Ee):{path:Ee},Ee.params={}),_t({query:Y.query,hash:Y.hash,params:Ee.path!=null?{}:Y.params},Ee)}}function C(Y,_e){const de=d=G(Y),Ee=h.value,He=Y.state,at=Y.force,R=Y.replace===!0,x=ce(de);if(x)return C(_t(J(x),{state:typeof x=="object"?_t({},He,x.state):He,force:at,replace:R}),_e||de);const z=de;z.redirectedFrom=_e;let re;return!at&&z4(r,Ee,de)&&(re=cu(16,{to:z,from:Ee}),Dt(Ee,Ee,!0,!1)),(re?Promise.resolve(re):D(z,Ee)).catch(H=>yi(H)?yi(H,2)?H:_n(H):$e(H,z,Ee)).then(H=>{if(H){if(yi(H,2))return C(_t({replace:R},J(H.to),{state:typeof H.to=="object"?_t({},He,H.to.state):He,force:at}),_e||z)}else H=O(z,Ee,!0,R,He);return N(z,Ee,H),H})}function S(Y,_e){const de=W(Y,_e);return de?Promise.reject(de):Promise.resolve()}function A(Y){const _e=Vr.values().next().value;return _e&&typeof _e.runWithContext=="function"?_e.runWithContext(Y):Y()}function D(Y,_e){let de;const[Ee,He,at]=Pq(Y,_e);de=Ag(Ee.reverse(),"beforeRouteLeave",Y,_e);for(const x of Ee)x.leaveGuards.forEach(z=>{de.push(hs(z,Y,_e))});const R=S.bind(null,Y,_e);return de.push(R),Zt(de).then(()=>{de=[];for(const x of s.list())de.push(hs(x,Y,_e));return de.push(R),Zt(de)}).then(()=>{de=Ag(He,"beforeRouteUpdate",Y,_e);for(const x of He)x.updateGuards.forEach(z=>{de.push(hs(z,Y,_e))});return de.push(R),Zt(de)}).then(()=>{de=[];for(const x of at)if(x.beforeEnter)if(Or(x.beforeEnter))for(const z of x.beforeEnter)de.push(hs(z,Y,_e));else de.push(hs(x.beforeEnter,Y,_e));return de.push(R),Zt(de)}).then(()=>(Y.matched.forEach(x=>x.enterCallbacks={}),de=Ag(at,"beforeRouteEnter",Y,_e,A),de.push(R),Zt(de))).then(()=>{de=[];for(const x of a.list())de.push(hs(x,Y,_e));return de.push(R),Zt(de)}).catch(x=>yi(x,8)?x:Promise.reject(x))}function N(Y,_e,de){c.list().forEach(Ee=>A(()=>Ee(Y,_e,de)))}function O(Y,_e,de,Ee,He){const at=W(Y,_e);if(at)return at;const R=_e===rs,x=Na?history.state:{};de&&(Ee||R?i.replace(Y.fullPath,_t({scroll:R&&x&&x.scroll},He)):i.push(Y.fullPath,He)),h.value=Y,Dt(Y,_e,de,R),_n()}let P;function fe(){P||(P=i.listen((Y,_e,de)=>{if(!fn.listening)return;const Ee=G(Y),He=ce(Ee);if(He){C(_t(He,{replace:!0}),Ee).catch(Cc);return}d=Ee;const at=h.value;Na&&Y4(R0(at.fullPath,de.delta),kd()),D(Ee,at).catch(R=>yi(R,12)?R:yi(R,2)?(C(R.to,Ee).then(x=>{yi(x,20)&&!de.delta&&de.type===rl.pop&&i.go(-1,!1)}).catch(Cc),Promise.reject()):(de.delta&&i.go(-de.delta,!1),$e(R,Ee,at))).then(R=>{R=R||O(Ee,at,!1),R&&(de.delta&&!yi(R,8)?i.go(-de.delta,!1):de.type===rl.pop&&yi(R,20)&&i.go(-1,!1)),N(Ee,at,R)}).catch(Cc)}))}let We=rc(),et=rc(),Ce;function $e(Y,_e,de){_n(Y);const Ee=et.list();return Ee.length?Ee.forEach(He=>He(Y,_e,de)):console.error(Y),Promise.reject(Y)}function Cn(){return Ce&&h.value!==rs?Promise.resolve():new Promise((Y,_e)=>{We.add([Y,_e])})}function _n(Y){return Ce||(Ce=!Y,fe(),We.list().forEach(([_e,de])=>Y?de(Y):_e()),We.reset()),Y}function Dt(Y,_e,de,Ee){const{scrollBehavior:He}=n;if(!Na||!He)return Promise.resolve();const at=!de&&X4(R0(Y.fullPath,0))||(Ee||!de)&&history.state&&history.state.scroll||null;return $m().then(()=>He(Y,_e,at)).then(R=>R&&J4(R)).catch(R=>$e(R,Y,_e))}const St=Y=>i.go(Y);let Rt;const Vr=new Set,fn={currentRoute:h,listening:!0,addRoute:I,removeRoute:V,clearRoutes:e.clearRoutes,hasRoute:U,getRoutes:M,resolve:G,options:n,push:X,replace:ee,go:St,back:()=>St(-1),forward:()=>St(1),beforeEach:s.add,beforeResolve:a.add,afterEach:c.add,onError:et.add,isReady:Cn,install(Y){const _e=this;Y.component("RouterLink",Iq),Y.component("RouterView",Sq),Y.config.globalProperties.$router=_e,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>mo(h)}),Na&&!Rt&&h.value===rs&&(Rt=!0,X(i.location).catch(He=>{}));const de={};for(const He in rs)Object.defineProperty(de,He,{get:()=>h.value[He],enumerable:!0});Y.provide(Od,_e),Y.provide(ZS,AI(de)),Y.provide(Rm,h);const Ee=Y.unmount;Vr.add(Y),Y.unmount=function(){Vr.delete(Y),Vr.size<1&&(d=rs,P&&P(),P=null,h.value=rs,Rt=!1,Ce=!1),Ee()}}};function Zt(Y){return Y.reduce((_e,de)=>_e.then(()=>A(de)),Promise.resolve())}return fn}function Pq(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let a=0;a<s;a++){const c=e.matched[a];c&&(n.matched.find(d=>uu(d,c))?r.push(c):t.push(c));const h=n.matched[a];h&&(e.matched.find(d=>uu(d,h))||i.push(h))}return[t,r,i]}function K9(){return xr(Od)}const Cq=function(){const e=document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),q0={},xq="/kbalance_quasar_pwa/",is=function(e,t){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=`${xq}${r}`,r in q0)return;q0[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":Cq,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((c,h)=>{a.addEventListener("load",c),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},Dq=[{path:"/",component:()=>is(()=>import("./MainLayout.210101d6.js"),["assets/MainLayout.210101d6.js","assets/scroll.80b17db8.js","assets/QResizeObserver.629a3871.js"]),children:[{path:"",name:"IndexPage",component:()=>is(()=>import("./IndexPage.a51e9cee.js"),["assets/IndexPage.a51e9cee.js","assets/IndexPage.c63e55ef.css","assets/QList.dd3d3175.js","assets/QResizeObserver.629a3871.js","assets/use-quasar.d30f86b9.js","assets/QSlideItem.be4b2b47.js","assets/QCardActions.9a422cb1.js","assets/QDialog.9128e3ad.js","assets/scroll.80b17db8.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/sheet",name:"SheetPage",component:()=>is(()=>import("./SheetPage.a4ca73f4.js"),["assets/SheetPage.a4ca73f4.js","assets/QList.dd3d3175.js","assets/QResizeObserver.629a3871.js","assets/use-quasar.d30f86b9.js","assets/QSelect.6ce0d13e.js","assets/QDialog.9128e3ad.js","assets/scroll.80b17db8.js","assets/QSlideItem.be4b2b47.js","assets/SelectPerson.4958b7fc.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/sheet/people",name:"PeoplePage",component:()=>is(()=>import("./PeoplePage.944e08b8.js"),["assets/PeoplePage.944e08b8.js","assets/QList.dd3d3175.js","assets/QResizeObserver.629a3871.js","assets/use-quasar.d30f86b9.js","assets/QSlideItem.be4b2b47.js","assets/QCardActions.9a422cb1.js","assets/QDialog.9128e3ad.js","assets/scroll.80b17db8.js","assets/SelectPerson.4958b7fc.js","assets/QSelect.6ce0d13e.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/sheet/transaction",name:"TransactionPage",component:()=>is(()=>import("./TransactionPage.d2902c5d.js"),["assets/TransactionPage.d2902c5d.js","assets/QList.dd3d3175.js","assets/QResizeObserver.629a3871.js","assets/use-quasar.d30f86b9.js","assets/QSelect.6ce0d13e.js","assets/QDialog.9128e3ad.js","assets/scroll.80b17db8.js"]),meta:{requiresAuth:!0,requiresFirebase:!0}},{path:"/login",name:"LoginPage",component:()=>is(()=>import("./LoginPage.1d31be17.js"),["assets/LoginPage.1d31be17.js","assets/use-quasar.d30f86b9.js","assets/QCardActions.9a422cb1.js","assets/QForm.22f3d312.js"])},{path:"/firebaseSettings",name:"FirebaseSettingsPage",component:()=>is(()=>import("./FirebaseSettingsPage.6ff503c2.js"),["assets/FirebaseSettingsPage.6ff503c2.js","assets/use-quasar.d30f86b9.js","assets/QCardActions.9a422cb1.js","assets/QForm.22f3d312.js","assets/QDialog.9128e3ad.js","assets/scroll.80b17db8.js"])}]},{path:"/:catchAll(.*)*",component:()=>is(()=>import("./ErrorNotFound.337c3c78.js"),[])}];var Sg=()=>{const e=Rq({scrollBehavior:()=>({left:0,top:0}),routes:Dq,history:rq("/kbalance_quasar_pwa/")}),t=MS();let r=!0;return e.beforeEach(async(i,s,a)=>{r&&(r=!1,await t.init()),i.matched.some(c=>c.meta.requiresFirebase)&&!t.isFbActive()?a({name:"FirebaseSettingsPage"}):i.matched.some(c=>c.meta.requiresAuth)&&!t.isAuthenticated()?a({name:"LoginPage"}):a()}),e};async function kq(n,e){const t=n(g4);t.use(UN,e);const r=typeof Ig=="function"?await Ig({}):Ig;t.use(r);const i=Fo(typeof Sg=="function"?await Sg({store:r}):Sg);return r.use(({store:s})=>{s.router=i}),{app:t,store:r,router:i}}const Pm={xs:18,sm:24,md:32,lg:38,xl:46},Y_={size:String};function X_(n,e=Pm){return Be(()=>n.size!==void 0?{fontSize:n.size in e?`${e[n.size]}px`:n.size}:null)}function Oq(n,e){return n!==void 0&&n()||e}function j9(n,e){if(n!==void 0){const t=n();if(t!=null)return t.slice()}return e}function dc(n,e){return n!==void 0?e.concat(n()):e}function Vq(n,e){return n===void 0?e:e!==void 0?e.concat(n()):n()}function W9(n,e,t,r,i,s){e.key=r+i;const a=Ue(n,e,t);return i===!0?VI(a,s()):a}const z0="0 0 24 24",K0=n=>n,Rg=n=>`ionicons ${n}`,eR={"mdi-":n=>`mdi ${n}`,"icon-":K0,"bt-":n=>`bt ${n}`,"eva-":n=>`eva ${n}`,"ion-md":Rg,"ion-ios":Rg,"ion-logo":Rg,"iconfont ":K0,"ti-":n=>`themify-icon ${n}`,"bi-":n=>`bootstrap-icons ${n}`},tR={o_:"-outlined",r_:"-round",s_:"-sharp"},nR={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},Nq=new RegExp("^("+Object.keys(eR).join("|")+")"),Lq=new RegExp("^("+Object.keys(tR).join("|")+")"),j0=new RegExp("^("+Object.keys(nR).join("|")+")"),Mq=/^[Mm]\s?[-+]?\.?\d/,Fq=/^img:/,Uq=/^svguse:/,Bq=/^ion-/,$q=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var Kf=ul({name:"QIcon",props:{...Y_,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(n,{slots:e}){const{proxy:{$q:t}}=ol(),r=X_(n),i=Be(()=>"q-icon"+(n.left===!0?" on-left":"")+(n.right===!0?" on-right":"")+(n.color!==void 0?` text-${n.color}`:"")),s=Be(()=>{let a,c=n.name;if(c==="none"||!c)return{none:!0};if(t.iconMapFn!==null){const p=t.iconMapFn(c);if(p!==void 0)if(p.icon!==void 0){if(c=p.icon,c==="none"||!c)return{none:!0}}else return{cls:p.cls,content:p.content!==void 0?p.content:" "}}if(Mq.test(c)===!0){const[p,_=z0]=c.split("|");return{svg:!0,viewBox:_,nodes:p.split("&&").map(v=>{const[I,V,M]=v.split("@@");return Ue("path",{style:V,d:I,transform:M})})}}if(Fq.test(c)===!0)return{img:!0,src:c.substring(4)};if(Uq.test(c)===!0){const[p,_=z0]=c.split("|");return{svguse:!0,src:p.substring(7),viewBox:_}}let h=" ";const d=c.match(Nq);if(d!==null)a=eR[d[1]](c);else if($q.test(c)===!0)a=c;else if(Bq.test(c)===!0)a=`ionicons ion-${t.platform.is.ios===!0?"ios":"md"}${c.substring(3)}`;else if(j0.test(c)===!0){a="notranslate material-symbols";const p=c.match(j0);p!==null&&(c=c.substring(6),a+=nR[p[1]]),h=c}else{a="notranslate material-icons";const p=c.match(Lq);p!==null&&(c=c.substring(2),a+=tR[p[1]]),h=c}return{cls:a,content:h}});return()=>{const a={class:i.value,style:r.value,"aria-hidden":"true",role:"presentation"};return s.value.none===!0?Ue(n.tag,a,Oq(e.default)):s.value.img===!0?Ue(n.tag,a,dc(e.default,[Ue("img",{src:s.value.src})])):s.value.svg===!0?Ue(n.tag,a,dc(e.default,[Ue("svg",{viewBox:s.value.viewBox||"0 0 24 24"},s.value.nodes)])):s.value.svguse===!0?Ue(n.tag,a,dc(e.default,[Ue("svg",{viewBox:s.value.viewBox},[Ue("use",{"xlink:href":s.value.src})])])):(s.value.cls!==void 0&&(a.class+=" "+s.value.cls),Ue(n.tag,a,dc(e.default,[s.value.content])))}}}),qq=ul({name:"QAvatar",props:{...Y_,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(n,{slots:e}){const t=X_(n),r=Be(()=>"q-avatar"+(n.color?` bg-${n.color}`:"")+(n.textColor?` text-${n.textColor} q-chip--colored`:"")+(n.square===!0?" q-avatar--square":n.rounded===!0?" rounded-borders":"")),i=Be(()=>n.fontSize?{fontSize:n.fontSize}:null);return()=>{const s=n.icon!==void 0?[Ue(Kf,{name:n.icon})]:void 0;return Ue("div",{class:r.value,style:t.value},[Ue("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},Vq(e.default,s))])}}});const zq={size:{type:[String,Number],default:"1em"},color:String};function Kq(n){return{cSize:Be(()=>n.size in Pm?`${Pm[n.size]}px`:n.size),classes:Be(()=>"q-spinner"+(n.color?` text-${n.color}`:""))}}var rR=ul({name:"QSpinner",props:{...zq,thickness:{type:Number,default:5}},setup(n){const{cSize:e,classes:t}=Kq(n);return()=>Ue("svg",{class:t.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Ue("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":n.thickness,"stroke-miterlimit":"10"})])}});function jq(n,e){const t=n.style;for(const r in e)t[r]=e[r]}function G9(n){if(n==null)return;if(typeof n=="string")try{return document.querySelector(n)||void 0}catch{return}const e=mo(n);if(e)return e.$el||e}function H9(n,e){if(n==null||n.contains(e)===!0)return!0;for(let t=n.nextElementSibling;t!==null;t=t.nextElementSibling)if(t.contains(e))return!0;return!1}function Wq(n,e=250){let t=!1,r;return function(){return t===!1&&(t=!0,setTimeout(()=>{t=!1},e),r=n.apply(this,arguments)),r}}function W0(n,e,t,r){t.modifiers.stop===!0&&PT(n);const i=t.modifiers.color;let s=t.modifiers.center;s=s===!0||r===!0;const a=document.createElement("span"),c=document.createElement("span"),h=_N(n),{left:d,top:p,width:_,height:v}=e.getBoundingClientRect(),I=Math.sqrt(_*_+v*v),V=I/2,M=`${(_-I)/2}px`,U=s?M:`${h.left-d-V}px`,G=`${(v-I)/2}px`,J=s?G:`${h.top-p-V}px`;c.className="q-ripple__inner",jq(c,{height:`${I}px`,width:`${I}px`,transform:`translate3d(${U},${J},0) scale3d(.2,.2,1)`,opacity:0}),a.className=`q-ripple${i?" text-"+i:""}`,a.setAttribute("dir","ltr"),a.appendChild(c),e.appendChild(a);const W=()=>{a.remove(),clearTimeout(X)};t.abort.push(W);let X=setTimeout(()=>{c.classList.add("q-ripple__inner--enter"),c.style.transform=`translate3d(${M},${G},0) scale3d(1,1,1)`,c.style.opacity=.2,X=setTimeout(()=>{c.classList.remove("q-ripple__inner--enter"),c.classList.add("q-ripple__inner--leave"),c.style.opacity=0,X=setTimeout(()=>{a.remove(),t.abort.splice(t.abort.indexOf(W),1)},275)},250)},50)}function G0(n,{modifiers:e,value:t,arg:r}){const i=Object.assign({},n.cfg.ripple,e,t);n.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||r,keyCodes:[].concat(i.keyCodes||13)}}var Gq=mN({name:"ripple",beforeMount(n,e){const t=e.instance.$.appContext.config.globalProperties.$q.config||{};if(t.ripple===!1)return;const r={cfg:t,enabled:e.value!==!1,modifiers:{},abort:[],start(i){r.enabled===!0&&i.qSkipRipple!==!0&&i.type===(r.modifiers.early===!0?"pointerdown":"click")&&W0(i,n,r,i.qKeyEvent===!0)},keystart:Wq(i=>{r.enabled===!0&&i.qSkipRipple!==!0&&zg(i,r.modifiers.keyCodes)===!0&&i.type===`key${r.modifiers.early===!0?"down":"up"}`&&W0(i,n,r,!0)},300)};G0(r,e),n.__qripple=r,yN(r,"main",[[n,"pointerdown","start","passive"],[n,"click","start","passive"],[n,"keydown","keystart","passive"],[n,"keyup","keystart","passive"]])},updated(n,e){if(e.oldValue!==e.value){const t=n.__qripple;t!==void 0&&(t.enabled=e.value!==!1,t.enabled===!0&&Object(e.value)===e.value&&G0(t,e))}},beforeUnmount(n){const e=n.__qripple;e!==void 0&&(e.abort.forEach(t=>{t()}),vN(e,"main"),delete n._qripple)}});const iR={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Hq=Object.keys(iR),Qq={align:{type:String,validator:n=>Hq.includes(n)}};function Jq(n){return Be(()=>{const e=n.align===void 0?n.vertical===!0?"stretch":"left":n.align;return`${n.vertical===!0?"items":"justify"}-${iR[e]}`})}function Q9(n){if(Object(n.$parent)===n.$parent)return n.$parent;let{parent:e}=n.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function Yq(n){return n.appContext.config.globalProperties.$router!==void 0}function J9(n){return n.isUnmounted===!0||n.isDeactivated===!0}function H0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}function Q0(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Xq(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(Array.isArray(i)===!1||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function J0(n,e){return Array.isArray(e)===!0?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function Zq(n,e){return Array.isArray(n)===!0?J0(n,e):Array.isArray(e)===!0?J0(e,n):n===e}function e9(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(Zq(n[t],e[t])===!1)return!1;return!0}const sR={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},Y9={...sR,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function t9({fallbackTag:n,useDisableForRouterLinkProps:e=!0}={}){const t=ol(),{props:r,proxy:i,emit:s}=t,a=Yq(t),c=Be(()=>r.disable!==!0&&r.href!==void 0),h=Be(e===!0?()=>a===!0&&r.disable!==!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>a===!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),d=Be(()=>h.value===!0?J(r.to):null),p=Be(()=>d.value!==null),_=Be(()=>c.value===!0||p.value===!0),v=Be(()=>r.type==="a"||_.value===!0?"a":r.tag||n||"div"),I=Be(()=>c.value===!0?{href:r.href,target:r.target}:p.value===!0?{href:d.value.href,target:r.target}:{}),V=Be(()=>{if(p.value===!1)return-1;const{matched:ee}=d.value,{length:ce}=ee,C=ee[ce-1];if(C===void 0)return-1;const S=i.$route.matched;if(S.length===0)return-1;const A=S.findIndex(Q0.bind(null,C));if(A!==-1)return A;const D=H0(ee[ce-2]);return ce>1&&H0(C)===D&&S[S.length-1].path!==D?S.findIndex(Q0.bind(null,ee[ce-2])):A}),M=Be(()=>p.value===!0&&V.value!==-1&&Xq(i.$route.params,d.value.params)),U=Be(()=>M.value===!0&&V.value===i.$route.matched.length-1&&e9(i.$route.params,d.value.params)),G=Be(()=>p.value===!0?U.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":M.value===!0?` ${r.activeClass}`:"":"");function J(ee){try{return i.$router.resolve(ee)}catch{}return null}function W(ee,{returnRouterError:ce,to:C=r.to,replace:S=r.replace}={}){if(r.disable===!0)return ee.preventDefault(),Promise.resolve(!1);if(ee.metaKey||ee.altKey||ee.ctrlKey||ee.shiftKey||ee.button!==void 0&&ee.button!==0||r.target==="_blank")return Promise.resolve(!1);ee.preventDefault();const A=i.$router[S===!0?"replace":"push"](C);return ce===!0?A:A.then(()=>{}).catch(()=>{})}function X(ee){if(p.value===!0){const ce=C=>W(ee,C);s("click",ee,ce),ee.defaultPrevented!==!0&&ce()}else s("click",ee)}return{hasRouterLink:p,hasHrefLink:c,hasLink:_,linkTag:v,resolvedLink:d,linkIsActive:M,linkIsExactActive:U,linkClass:G,linkAttrs:I,getLink:J,navigateToRouterLink:W,navigateOnClick:X}}const Y0={none:0,xs:4,sm:8,md:16,lg:24,xl:32},n9={xs:8,sm:10,md:14,lg:20,xl:24},r9=["button","submit","reset"],i9=/[^\s]\/[^\s]/,s9=["flat","outline","push","unelevated"];function o9(n,e){return n.flat===!0?"flat":n.outline===!0?"outline":n.push===!0?"push":n.unelevated===!0?"unelevated":e}const a9={...Y_,...sR,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...s9.reduce((n,e)=>(n[e]=Boolean)&&n,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Qq.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},u9={...a9,round:Boolean};function c9(n){const e=X_(n,n9),t=Jq(n),{hasRouterLink:r,hasLink:i,linkTag:s,linkAttrs:a,navigateOnClick:c}=t9({fallbackTag:"button"}),h=Be(()=>{const U=n.fab===!1&&n.fabMini===!1?e.value:{};return n.padding!==void 0?Object.assign({},U,{padding:n.padding.split(/\s+/).map(G=>G in Y0?Y0[G]+"px":G).join(" "),minWidth:"0",minHeight:"0"}):U}),d=Be(()=>n.rounded===!0||n.fab===!0||n.fabMini===!0),p=Be(()=>n.disable!==!0&&n.loading!==!0),_=Be(()=>p.value===!0?n.tabindex||0:-1),v=Be(()=>o9(n,"standard")),I=Be(()=>{const U={tabindex:_.value};return i.value===!0?Object.assign(U,a.value):r9.includes(n.type)===!0&&(U.type=n.type),s.value==="a"?(n.disable===!0?U["aria-disabled"]="true":U.href===void 0&&(U.role="button"),r.value!==!0&&i9.test(n.type)===!0&&(U.type=n.type)):n.disable===!0&&(U.disabled="",U["aria-disabled"]="true"),n.loading===!0&&n.percentage!==void 0&&Object.assign(U,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.percentage}),U}),V=Be(()=>{let U;n.color!==void 0?n.flat===!0||n.outline===!0?U=`text-${n.textColor||n.color}`:U=`bg-${n.color} text-${n.textColor||"white"}`:n.textColor&&(U=`text-${n.textColor}`);const G=n.round===!0?"round":`rectangle${d.value===!0?" q-btn--rounded":n.square===!0?" q-btn--square":""}`;return`q-btn--${v.value} q-btn--${G}`+(U!==void 0?" "+U:"")+(p.value===!0?" q-btn--actionable q-focusable q-hoverable":n.disable===!0?" disabled":"")+(n.fab===!0?" q-btn--fab":n.fabMini===!0?" q-btn--fab-mini":"")+(n.noCaps===!0?" q-btn--no-uppercase":"")+(n.dense===!0?" q-btn--dense":"")+(n.stretch===!0?" no-border-radius self-stretch":"")+(n.glossy===!0?" glossy":"")+(n.square?" q-btn--square":"")}),M=Be(()=>t.value+(n.stack===!0?" column":" row")+(n.noWrap===!0?" no-wrap text-no-wrap":"")+(n.loading===!0?" q-btn__content--hidden":""));return{classes:V,style:h,innerClasses:M,attributes:I,hasLink:i,linkTag:s,navigateOnClick:c,isActionable:p}}const{passiveCapture:yr}=bo;let Sa=null,Ra=null,Pa=null;var l9=ul({name:"QBtn",props:{...u9,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(n,{slots:e,emit:t}){const{proxy:r}=ol(),{classes:i,style:s,innerClasses:a,attributes:c,hasLink:h,linkTag:d,navigateOnClick:p,isActionable:_}=c9(n),v=Eo(null),I=Eo(null);let V=null,M,U=null;const G=Be(()=>n.label!==void 0&&n.label!==null&&n.label!==""),J=Be(()=>n.disable===!0||n.ripple===!1?!1:{keyCodes:h.value===!0?[13,32]:[13],...n.ripple===!0?{}:n.ripple}),W=Be(()=>({center:n.round})),X=Be(()=>{const fe=Math.max(0,Math.min(100,n.percentage));return fe>0?{transition:"transform 0.6s",transform:`translateX(${fe-100}%)`}:{}}),ee=Be(()=>{if(n.loading===!0)return{onMousedown:P,onTouchstart:P,onClick:P,onKeydown:P,onKeyup:P};if(_.value===!0){const fe={onClick:C,onKeydown:S,onMousedown:D};if(r.$q.platform.has.touch===!0){const We=n.onTouchstart!==void 0?"":"Passive";fe[`onTouchstart${We}`]=A}return fe}return{onClick:wa}}),ce=Be(()=>({ref:v,class:"q-btn q-btn-item non-selectable no-outline "+i.value,style:s.value,...c.value,...ee.value}));function C(fe){if(v.value!==null){if(fe!==void 0){if(fe.defaultPrevented===!0)return;const We=document.activeElement;if(n.type==="submit"&&We!==document.body&&v.value.contains(We)===!1&&We.contains(v.value)===!1){v.value.focus();const et=()=>{document.removeEventListener("keydown",wa,!0),document.removeEventListener("keyup",et,yr),v.value!==null&&v.value.removeEventListener("blur",et,yr)};document.addEventListener("keydown",wa,!0),document.addEventListener("keyup",et,yr),v.value.addEventListener("blur",et,yr)}}p(fe)}}function S(fe){v.value!==null&&(t("keydown",fe),zg(fe,[13,32])===!0&&Ra!==v.value&&(Ra!==null&&O(),fe.defaultPrevented!==!0&&(v.value.focus(),Ra=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("keyup",N,!0),v.value.addEventListener("blur",N,yr)),wa(fe)))}function A(fe){v.value!==null&&(t("touchstart",fe),fe.defaultPrevented!==!0&&(Sa!==v.value&&(Sa!==null&&O(),Sa=v.value,V=fe.target,V.addEventListener("touchcancel",N,yr),V.addEventListener("touchend",N,yr)),M=!0,U!==null&&clearTimeout(U),U=setTimeout(()=>{U=null,M=!1},200)))}function D(fe){v.value!==null&&(fe.qSkipRipple=M===!0,t("mousedown",fe),fe.defaultPrevented!==!0&&Pa!==v.value&&(Pa!==null&&O(),Pa=v.value,v.value.classList.add("q-btn--active"),document.addEventListener("mouseup",N,yr)))}function N(fe){if(v.value!==null&&!(fe!==void 0&&fe.type==="blur"&&document.activeElement===v.value)){if(fe!==void 0&&fe.type==="keyup"){if(Ra===v.value&&zg(fe,[13,32])===!0){const We=new MouseEvent("click",fe);We.qKeyEvent=!0,fe.defaultPrevented===!0&&qg(We),fe.cancelBubble===!0&&PT(We),v.value.dispatchEvent(We),wa(fe),fe.qKeyEvent=!0}t("keyup",fe)}O()}}function O(fe){const We=I.value;fe!==!0&&(Sa===v.value||Pa===v.value)&&We!==null&&We!==document.activeElement&&(We.setAttribute("tabindex",-1),We.focus()),Sa===v.value&&(V!==null&&(V.removeEventListener("touchcancel",N,yr),V.removeEventListener("touchend",N,yr)),Sa=V=null),Pa===v.value&&(document.removeEventListener("mouseup",N,yr),Pa=null),Ra===v.value&&(document.removeEventListener("keyup",N,!0),v.value!==null&&v.value.removeEventListener("blur",N,yr),Ra=null),v.value!==null&&v.value.classList.remove("q-btn--active")}function P(fe){wa(fe),fe.qSkipRipple=!0}return nd(()=>{O(!0)}),Object.assign(r,{click:fe=>{_.value===!0&&C(fe)}}),()=>{let fe=[];n.icon!==void 0&&fe.push(Ue(Kf,{name:n.icon,left:n.stack!==!0&&G.value===!0,role:"img"})),G.value===!0&&fe.push(Ue("span",{class:"block"},[n.label])),fe=dc(e.default,fe),n.iconRight!==void 0&&n.round===!1&&fe.push(Ue(Kf,{name:n.iconRight,right:n.stack!==!0&&G.value===!0,role:"img"}));const We=[Ue("span",{class:"q-focus-helper",ref:I})];return n.loading===!0&&n.percentage!==void 0&&We.push(Ue("span",{class:"q-btn__progress absolute-full overflow-hidden"+(n.darkPercentage===!0?" q-btn__progress--dark":"")},[Ue("span",{class:"q-btn__progress-indicator fit block",style:X.value})])),We.push(Ue("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+a.value},fe)),n.loading!==null&&We.push(Ue(NV,{name:"q-transition--fade"},()=>n.loading===!0?[Ue("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Ue(rR)])]:null)),VI(Ue(d.value,ce.value,We),[[Gq,J.value,void 0,W.value]])}}});let h9=1,f9=document.body;function d9(n,e){const t=document.createElement("div");if(t.id=e!==void 0?`q-portal--${e}--${h9++}`:n,bf.globalNodes!==void 0){const r=bf.globalNodes.class;r!==void 0&&(t.className=r)}return f9.appendChild(t),t}function X9(n){n.remove()}let p9=0;const hf={},ff={},Rr={},oR={},g9=/^\s*$/,aR=[],m9=[void 0,null,!0,!1,""],Z_=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],_9=["top-left","top-right","bottom-left","bottom-right"],La={positive:{icon:n=>n.iconSet.type.positive,color:"positive"},negative:{icon:n=>n.iconSet.type.negative,color:"negative"},warning:{icon:n=>n.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:n=>n.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function uR(n,e,t){if(!n)return ic("parameter required");let r;const i={textColor:"white"};if(n.ignoreDefaults!==!0&&Object.assign(i,hf),Uc(n)===!1&&(i.type&&Object.assign(i,La[i.type]),n={message:n}),Object.assign(i,La[n.type||i.type],n),typeof i.icon=="function"&&(i.icon=i.icon(e)),i.spinner?(i.spinner===!0&&(i.spinner=rR),i.spinner=Fo(i.spinner)):i.spinner=!1,i.meta={hasMedia:Boolean(i.spinner!==!1||i.icon||i.avatar),hasText:X0(i.message)||X0(i.caption)},i.position){if(Z_.includes(i.position)===!1)return ic("wrong position",n)}else i.position="bottom";if(m9.includes(i.timeout)===!0)i.timeout=5e3;else{const h=Number(i.timeout);if(isNaN(h)||h<0)return ic("wrong timeout",n);i.timeout=Number.isFinite(h)?h:0}i.timeout===0?i.progress=!1:i.progress===!0&&(i.meta.progressClass="q-notification__progress"+(i.progressClass?` ${i.progressClass}`:""),i.meta.progressStyle={animationDuration:`${i.timeout+1e3}ms`});const s=(Array.isArray(n.actions)===!0?n.actions:[]).concat(n.ignoreDefaults!==!0&&Array.isArray(hf.actions)===!0?hf.actions:[]).concat(La[n.type]!==void 0&&Array.isArray(La[n.type].actions)===!0?La[n.type].actions:[]),{closeBtn:a}=i;if(a&&s.push({label:typeof a=="string"?a:e.lang.label.close}),i.actions=s.map(({handler:h,noDismiss:d,...p})=>({flat:!0,...p,onClick:typeof h=="function"?()=>{h(),d!==!0&&c()}:()=>{c()}})),i.multiLine===void 0&&(i.multiLine=i.actions.length>1),Object.assign(i.meta,{class:`q-notification row items-stretch q-notification--${i.multiLine===!0?"multi-line":"standard"}`+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:"")+(i.classes!==void 0?` ${i.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(i.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(i.multiLine===!0?"":" col"),leftClass:i.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...i.attrs}}),i.group===!1?(i.group=void 0,i.meta.group=void 0):((i.group===void 0||i.group===!0)&&(i.group=[i.message,i.caption,i.multiline].concat(i.actions.map(h=>`${h.label}*${h.icon}`)).join("|")),i.meta.group=i.group+"|"+i.position),i.actions.length===0?i.actions=void 0:i.meta.actionsClass="q-notification__actions row items-center "+(i.multiLine===!0?"justify-end":"col-auto")+(i.meta.hasMedia===!0?" q-notification__actions--with-media":""),t!==void 0){t.notif.meta.timer&&(clearTimeout(t.notif.meta.timer),t.notif.meta.timer=void 0),i.meta.uid=t.notif.meta.uid;const h=Rr[i.position].value.indexOf(t.notif);Rr[i.position].value[h]=i}else{const h=ff[i.meta.group];if(h===void 0){if(i.meta.uid=p9++,i.meta.badge=1,["left","right","center"].indexOf(i.position)!==-1)Rr[i.position].value.splice(Math.floor(Rr[i.position].value.length/2),0,i);else{const d=i.position.indexOf("top")!==-1?"unshift":"push";Rr[i.position].value[d](i)}i.group!==void 0&&(ff[i.meta.group]=i)}else{if(h.meta.timer&&(clearTimeout(h.meta.timer),h.meta.timer=void 0),i.badgePosition!==void 0){if(_9.includes(i.badgePosition)===!1)return ic("wrong badgePosition",n)}else i.badgePosition=`top-${i.position.indexOf("left")!==-1?"right":"left"}`;i.meta.uid=h.meta.uid,i.meta.badge=h.meta.badge+1,i.meta.badgeClass=`q-notification__badge q-notification__badge--${i.badgePosition}`+(i.badgeColor!==void 0?` bg-${i.badgeColor}`:"")+(i.badgeTextColor!==void 0?` text-${i.badgeTextColor}`:"")+(i.badgeClass?` ${i.badgeClass}`:"");const d=Rr[i.position].value.indexOf(h);Rr[i.position].value[d]=ff[i.meta.group]=i}}const c=()=>{y9(i),r=void 0};if(i.timeout>0&&(i.meta.timer=setTimeout(()=>{i.meta.timer=void 0,c()},i.timeout+1e3)),i.group!==void 0)return h=>{h!==void 0?ic("trying to update a grouped one which is forbidden",n):c()};if(r={dismiss:c,config:n,notif:i},t!==void 0){Object.assign(t,r);return}return h=>{if(r!==void 0)if(h===void 0)r.dismiss();else{const d=Object.assign({},r.config,h,{group:!1,position:i.position});uR(d,e,r)}}}function y9(n){n.meta.timer&&(clearTimeout(n.meta.timer),n.meta.timer=void 0);const e=Rr[n.position].value.indexOf(n);if(e!==-1){n.group!==void 0&&delete ff[n.meta.group];const t=aR[""+n.meta.uid];if(t){const{width:r,height:i}=getComputedStyle(t);t.style.left=`${t.offsetLeft}px`,t.style.width=r,t.style.height=i}Rr[n.position].value.splice(e,1),typeof n.onDismiss=="function"&&n.onDismiss()}}function X0(n){return n!=null&&g9.test(n)!==!0}function ic(n,e){return console.error(`Notify: ${n}`,e),!1}function v9(){return ul({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Ue("div",{class:"q-notifications"},Z_.map(n=>Ue(tN,{key:n,class:oR[n],tag:"div",name:`q-notification--${n}`},()=>Rr[n].value.map(e=>{const t=e.meta,r=[];if(t.hasMedia===!0&&(e.spinner!==!1?r.push(Ue(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+t.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(Ue(Kf,{class:"q-notification__icon q-notification__icon--"+t.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(Ue(qq,{class:"q-notification__avatar q-notification__avatar--"+t.leftClass},()=>Ue("img",{src:e.avatar,"aria-hidden":"true"})))),t.hasText===!0){let s;const a={class:"q-notification__message col"};if(e.html===!0)a.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const c=[e.message];s=e.caption?[Ue("div",c),Ue("div",{class:"q-notification__caption"},[e.caption])]:c}r.push(Ue("div",a,s))}const i=[Ue("div",{class:t.contentClass},r)];return e.progress===!0&&i.push(Ue("div",{key:`${t.uid}|p|${t.badge}`,class:t.progressClass,style:t.progressStyle})),e.actions!==void 0&&i.push(Ue("div",{class:t.actionsClass},e.actions.map(s=>Ue(l9,s)))),t.badge>1&&i.push(Ue("div",{key:`${t.uid}|${t.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[t.badge])),Ue("div",{ref:s=>{aR[""+t.uid]=s},key:t.uid,class:t.class,...t.attrs},[Ue("div",{class:t.wrapperClass},i)])}))))}})}var w9={setDefaults(n){Uc(n)===!0&&Object.assign(hf,n)},registerType(n,e){Uc(e)===!0&&(La[n]=e)},install({$q:n,parentApp:e}){if(n.notify=this.create=t=>uR(t,n),n.notify.setDefaults=this.setDefaults,n.notify.registerType=this.registerType,n.config.notify!==void 0&&this.setDefaults(n.config.notify),this.__installed!==!0){Z_.forEach(r=>{Rr[r]=Eo([]);const i=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",s=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",a=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${s}`;oR[r]=`q-notifications__list q-notifications__list--${i} fixed column no-wrap ${a}`});const t=d9("q-notify");LN(v9(),e).mount(t)}}},E9={config:{},plugins:{Notify:w9}},I9=function(){return Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},Cm;typeof window!="undefined"&&(typeof Promise!="undefined"?Cm=new Promise(function(n){return window.addEventListener("load",n)}):Cm={then:function(n){return window.addEventListener("load",n)}});function T9(n,e){e===void 0&&(e={});var t=e.registrationOptions;t===void 0&&(t={}),delete e.registrationOptions;var r=function(i){for(var s=[],a=arguments.length-1;a-- >0;)s[a]=arguments[a+1];e&&e[i]&&e[i].apply(e,s)};"serviceWorker"in navigator&&Cm.then(function(){I9()?(b9(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return il(r,i)})):(cR(n,r,t),navigator.serviceWorker.ready.then(function(i){r("ready",i)}).catch(function(i){return il(r,i)}))})}function il(n,e){navigator.onLine||n("offline"),n("error",e)}function cR(n,e,t){navigator.serviceWorker.register(n,t).then(function(r){if(e("registered",r),r.waiting){e("updated",r);return}r.onupdatefound=function(){e("updatefound",r);var i=r.installing;i.onstatechange=function(){i.state==="installed"&&(navigator.serviceWorker.controller?e("updated",r):e("cached",r))}}}).catch(function(r){return il(e,r)})}function b9(n,e,t){fetch(n).then(function(r){r.status===404?(e("error",new Error("Service worker not found at "+n)),Z0()):r.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+n+" to have javascript content-type, but received "+r.headers.get("content-type"))),Z0()):cR(n,e,t)}).catch(function(r){return il(e,r)})}function Z0(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()}).catch(function(n){return il(emit,n)})}T9("/kbalance_quasar_pwa/sw.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});async function A9({app:n,router:e,store:t}){n.use(e),n.mount("#q-app")}kq(ST,E9).then(A9);export{CO as $,G9 as A,jq as B,x9 as C,pT as D,vV as E,MS as F,mo as G,D9 as H,Qn as I,K9 as J,l9 as K,P9 as L,Yf as M,zk as N,j9 as O,Y9 as P,Kf as Q,t9 as R,zg as S,wa as T,E0 as U,$g as V,OO as W,U9 as X,wN as Y,Qm as Z,xO as _,Be as a,qg as a0,rR as a1,NV as a2,bN as a3,Jr as a4,PT as a5,VN as a6,mN as a7,V9 as a8,yN as a9,yV as aA,k9 as aB,ot as aC,xV as aD,jt as aE,w0 as aF,O9 as aG,Eg as aH,Km as aI,C9 as aJ,L9 as aa,_N as ab,vN as ac,VI as ad,Qq as ae,Jq as af,kN as ag,J9 as ah,Yq as ai,Q9 as aj,R9 as ak,d9 as al,X9 as am,N9 as an,H9 as ao,LS as ap,Jf as aq,Y_ as ar,X_ as as,W9 as at,Vq as au,Gq as av,kO as aw,WI as ax,rg as ay,S9 as az,Oq as b,ul as c,F9 as d,B9 as e,nd as f,ol as g,Ue as h,xr as i,bo as j,To as k,M9 as l,Mo as m,Fc as n,jI as o,Hh as p,GI as q,Eo as r,dc as s,FO as t,yf as u,vf as v,vc as w,TO as x,Fn as y,$m as z};
